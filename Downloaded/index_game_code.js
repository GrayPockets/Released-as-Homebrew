import {F as Ea, c as u, a as A, b, t as c, n as Ld, g as zd, r as k, o as r, d as Gd, m as U, e as D, f as M, U as Je, w as T, h as y, i as N, j as C, k as a, l as v, p as R, T as We, q as $, s as dl, u as L, v as _, x as q, y as he, _ as ot, z as nt, A as at, B as rt, C as lt, D as ct, E as dt, G as ut, H as gt, I as mt, J as ht, K as pt, L as At, M as bt, N as ft, O as vt, P as yt, Q as _t, R as wt, S as kt, V as Ct, W as St, X as Pt, Y as Tt, Z as It, $ as Mt, a0 as Rt, a1 as Dt, a2 as Et, a3 as Nt, a4 as Bt, a5 as Vt, a6 as Ot, a7 as jt, a8 as Ut, a9 as Ht, aa as qt, ab as Lt, ac as zt, ad as Gt, ae as Wt, af as Ft, ag as Qt, ah as Zt, ai as Xt, aj as Kt, ak as Yt, al as Jt, am as $t, an as xt, ao as ei, ap as si, aq as ti, ar as ii, as as oi, at as ni, au as ai, av as ri, aw as li, ax as ci, ay as di, az as ui, aA as gi, aB as mi, aC as hi, aD as pi, aE as Ai, aF as bi, aG as fi, aH as vi, aI as yi, aJ as _i, aK as wi, aL as ki, aM as Ci, aN as Si, aO as Pi, aP as Ti, aQ as Ii, aR as Mi, aS as Ri, aT as Di, aU as Ei, aV as Ni, aW as Bi, aX as Vi, aY as Oi, aZ as ji, a_ as Ui, a$ as Hi, b0 as qi, b1 as Li, b2 as zi, b3 as Gi, b4 as Wi, b5 as Fi, b6 as Qi, b7 as Zi, b8 as Xi, b9 as Ki, ba as Yi, bb as Ji, bc as $i, bd as xi, be as eo, bf as so, bg as to, bh as io, bi as oo, bj as no, bk as ao, bl as ro, bm as lo, bn as co, bo as uo, bp as go, bq as mo, br as ho, bs as po, bt as Ao, bu as bo, bv as fo, bw as vo, bx as yo, by as _o, bz as wo, bA as ko, bB as Co, bC as So, bD as Po, bE as To, bF as Io, bG as Mo, bH as Ro, bI as Do, bJ as Eo, bK as No, bL as Bo, bM as Vo, bN as Oo, bO as jo, bP as Uo, bQ as Ho, bR as qo, bS as Lo, bT as zo, bU as Go, bV as Wo, bW as Fo, bX as Qo, bY as Zo, bZ as Xo, b_ as Ko, b$ as Yo, c0 as Jo, c1 as $o, c2 as xo, c3 as en, c4 as sn, c5 as tn, c6 as on, c7 as nn, c8 as an, c9 as rn, ca as ln, cb as cn, cc as dn, cd as un, ce as gn, cf as mn, cg as hn, ch as pn, ci as An, cj as bn, ck as fn, cl as vn, cm as yn, cn as _n, co as wn, cp as kn, cq as Cn, cr as Sn, cs as Pn, ct as Tn, cu as z, cv as Ie, cw as be, cx as Ce, cy as Wd, cz as qs, cA as ul, cB as gl, cC as G, cD as Fd, cE as Qd, cF as Zd, cG as Xd, cH as Na, cI as Ls, cJ as Kd, cK as ml, cL as X, cM as Yd, cN as Jd, cO as $d, cP as xd, cQ as eu, cR as su, cS as tu, cT as iu, cU as ou, cV as nu, cW as au, cX as Ba, cY as ru, cZ as lu, c_ as cu, c$ as du, d0 as uu, d1 as gu, d2 as mu} from "./vendor-C0bCfSkh.js";
(function() {
    try {
        var e = typeof window < "u" ? window : typeof global < "u" ? global : typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : {};
        e.SENTRY_RELEASE = {
            id: "botc-app@3.51.1"
        }
    } catch {}
}
)();
try {
    (function() {
        var e = typeof window < "u" ? window : typeof global < "u" ? global : typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : {}
          , s = new e.Error().stack;
        s && (e._sentryDebugIds = e._sentryDebugIds || {},
        e._sentryDebugIds[s] = "8d02ed86-2331-43db-9e82-9014cf60094f",
        e._sentryDebugIdIdentifier = "sentry-dbid-8d02ed86-2331-43db-9e82-9014cf60094f")
    }
    )()
} catch {}
(function() {
    const s = document.createElement("link").relList;
    if (s && s.supports && s.supports("modulepreload"))
        return;
    for (const o of document.querySelectorAll('link[rel="modulepreload"]'))
        n(o);
    new MutationObserver(o => {
        for (const i of o)
            if (i.type === "childList")
                for (const l of i.addedNodes)
                    l.tagName === "LINK" && l.rel === "modulepreload" && n(l)
    }
    ).observe(document, {
        childList: !0,
        subtree: !0
    });
    function t(o) {
        const i = {};
        return o.integrity && (i.integrity = o.integrity),
        o.referrerPolicy && (i.referrerPolicy = o.referrerPolicy),
        o.crossOrigin === "use-credentials" ? i.credentials = "include" : o.crossOrigin === "anonymous" ? i.credentials = "omit" : i.credentials = "same-origin",
        i
    }
    function n(o) {
        if (o.ep)
            return;
        o.ep = !0;
        const i = t(o);
        fetch(o.href, i)
    }
}
)();
const O = (e, s) => {
    const t = e.__vccOpts || e;
    for (const [n,o] of s)
        t[n] = o;
    return t
}
  , hu = {
    name: "FontAwesomeTitledIcon",
    components: {
        FontAwesomeIcon: Ea
    },
    computed: {
        childAttrs() {
            const {class: e} = {
                ...this.$attrs
            };
            return {
                class: e
            }
        }
    },
    props: Ea.props
}
  , pu = {
    class: "svg-inline--fa"
}
  , Au = ["textContent"];
function bu(e, s, t, n, o, i) {
    const l = k("font-awesome-icon");
    return r(),
    u("svg", pu, [e.title ? (r(),
    u("title", {
        key: 0,
        textContent: c(e.title)
    }, null, 8, Au)) : A("", !0), b(l, Ld(zd({
        ...e.$props,
        ...i.childAttrs
    })), null, 16)])
}
const hl = O(hu, [["render", bu]])
  , pl = "/assets/bugreporter-icon-DwuUmRbi.webp"
  , Al = "/assets/worldcup25-icon-CnaZXF1j.webp"
  , fu = "modulepreload"
  , vu = function(e) {
    return "/" + e
}
  , Va = {}
  , Q = function(s, t, n) {
    let o = Promise.resolve();
    if (t && t.length > 0) {
        let d = function(h) {
            return Promise.all(h.map(m => Promise.resolve(m).then(p => ({
                status: "fulfilled",
                value: p
            }), p => ({
                status: "rejected",
                reason: p
            }))))
        };
        document.getElementsByTagName("link");
        const l = document.querySelector("meta[property=csp-nonce]")
          , g = (l == null ? void 0 : l.nonce) || (l == null ? void 0 : l.getAttribute("nonce"));
        o = d(t.map(h => {
            if (h = vu(h),
            h in Va)
                return;
            Va[h] = !0;
            const m = h.endsWith(".css")
              , p = m ? '[rel="stylesheet"]' : "";
            if (document.querySelector(`link[href="${h}"]${p}`))
                return;
            const f = document.createElement("link");
            if (f.rel = m ? "stylesheet" : fu,
            m || (f.as = "script"),
            f.crossOrigin = "",
            f.href = h,
            g && f.setAttribute("nonce", g),
            document.head.appendChild(f),
            m)
                return new Promise( (P, w) => {
                    f.addEventListener("load", P),
                    f.addEventListener("error", () => w(new Error(`Unable to preload CSS for ${h}`)))
                }
                )
        }
        ))
    }
    function i(l) {
        const g = new Event("vite:preloadError",{
            cancelable: !0
        });
        if (g.payload = l,
        window.dispatchEvent(g),
        !g.defaultPrevented)
            throw l
    }
    return o.then(l => {
        for (const g of l || [])
            g.status === "rejected" && i(g.reason);
        return s().catch(i)
    }
    )
}
  , Oa = (e, s, t) => {
    const n = e[s];
    return n ? typeof n == "function" ? n() : Promise.resolve(n) : new Promise( (o, i) => {
        (typeof queueMicrotask == "function" ? queueMicrotask : setTimeout)(i.bind(null, new Error("Unknown variable dynamic import: " + s + (s.split("/").length !== t ? ". Note that variables only represent file names one level deep." : ""))))
    }
    )
}
  , yu = {
    name: "English",
    contributors: [],
    isOfficial: !0,
    isGameTranslation: !0
}
  , _u = {
    name: "Czech",
    contributors: ["FarasCZ", "radonimium"]
}
  , wu = {
    name: "Danish",
    contributors: ["AV", "Grazzy", "Palsitora", "Total_DK", "BlodPaaKlokkeTaarnet", "Groschenlein"]
}
  , ku = {
    name: "Dutch",
    contributors: ["LizzyLovegood", "AlejoFBlack", "invalidCards", "kloofel", "Poedersuiker", "Clijmart", "sjakie", "sterredag", "Amras", "sebasjby"]
}
  , Cu = {
    name: "French",
    contributors: ["Bambi", "MQMotin", "Piapiou", "sylveryfae", "liem25", "Caederis", "eepmaxxer", "LostWon26", "Pacha", "EardstapaArctica"]
}
  , Su = {
    name: "Galician",
    contributors: ["Soril"]
}
  , Pu = {
    name: "German",
    contributors: ["bra1n", "Myrion", "Synca", "ReiSt"],
    isOfficial: !0,
    isGameTranslation: !0
}
  , Tu = {
    name: "Italian",
    contributors: ["Voidstarr", "misdreavus", "Reyzard", "fe.spin", "Stiussi", "Mons264", "GreldonKB", "laseplov", "DonAlosi"]
}
  , Iu = {
    name: "Japanese",
    contributors: ["bd_", "Sallii", "kahokkupelli", "ElectricMayhem"]
}
  , Mu = {
    name: "Korean",
    contributors: ["USIJ"]
}
  , Ru = {
    name: "Polish",
    contributors: ["Valis", "cupnoodle", "Aggie", "coolseel", "DianaJay", "i13k", "POLISH", "hidewari", "Marco", "h3oCharles"]
}
  , Du = {
    name: "Russian",
    contributors: ["mogekonik", "hdm", "serega6531", "Proxi", "Danila", "Gum", "410bus", "Arikel"],
    isOfficial: !0
}
  , Eu = {
    name: "Slovak",
    contributors: ["SamueliTTo", "Mozkovic", "myreness"]
}
  , Nu = {
    name: "Slovenian",
    contributors: ["just_ana", "Nusa"]
}
  , Bu = {
    name: "Spanish",
    contributors: ["theperuvianjuan", "hdm", "elessar", "Alber00012", "Chiromyiforme", "DrewScroll"],
    isOfficial: !0
}
  , Vu = {
    name: "Swedish",
    isGameTranslation: !0,
    contributors: ["Eliderad", "ElinZ", "Malle", "Hobbe"]
}
  , Ou = {
    name: "Ukrainian",
    contributors: ["Fabulist", "shevko", "Admol"]
}
  , ju = {
    name: "Vietnamese",
    contributors: ["tuanhuyng", "ChrisNg", "TranNhatTrung", "Big13"]
}
  , bl = {
    en: yu,
    "zh-Hans": {
        name: "Chinese (Simplified)",
        contributors: ["nunu2"],
        isGameTranslation: !0,
        isOfficial: !0
    },
    cs: _u,
    da: wu,
    nl: ku,
    "en-pirate": {
        link: "en@pirate",
        name: "English (Pirate)",
        isGameTranslation: !0,
        contributors: ["AlejoFBlack", "VaultDemonPsycho", "Diego", "Nerdguy"]
    },
    fr: Cu,
    gl: Su,
    de: Pu,
    "de-CH": {
        name: "German (Switzerland)",
        contributors: ["Myrion"]
    },
    it: Tu,
    ja: Iu,
    ko: Mu,
    "nb-NO": {
        name: "Norwegian BokmÃ¥l",
        contributors: ["Sunisawesome", "Some_Random_Person", "Athrenax", "NeoHummel", "mathilde", "andlar"]
    },
    pl: Ru,
    "pt-BR": {
        name: "Portuguese (Brazil)",
        contributors: ["Augurey2012", "Covre", "gmcrivelli", "PP", "piatan", "Zandrum", "Paula1974"]
    },
    "pt-PT": {
        name: "Portuguese (Portugal)",
        contributors: ["Batnu", "Paula1974", "iamthewalrus", "kpshk"]
    },
    ru: Du,
    sk: Eu,
    sl: Nu,
    es: Bu,
    "es-419": {
        name: "Spanish (Latin America)",
        isGameTranslation: !0,
        contributors: ["theperuvianjuan", "mannym2498", "Tallorete", "survivorkiki", "Lucas"]
    },
    "es-MX": {
        name: "Spanish (Mexico)",
        contributors: ["DrewScroll"]
    },
    sv: Vu,
    uk: Ou,
    vi: ju
}
  , $e = bl
  , fe = "en";
let Pe;
localStorage.getItem("locale") && !$e[localStorage.getItem("locale")] && localStorage.removeItem("locale");
const ja = (e, s, t) => s <= 2 ? t(e, s) : e % 10 === 1 && e % 100 !== 11 ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2
  , Uu = () => localStorage.getItem("locale") || Array.from(navigator.languages || [navigator.language]).find(e => Object.keys($e).includes(e)) || fe
  , zs = async e => {
    var n, o, i, l, g;
    let s = {};
    try {
        s = (o = (n = await Oa(Object.assign({
            "./app/cs.json": () => Q( () => import("./cs-BlhJFAiI.js"), []),
            "./app/da.json": () => Q( () => import("./da-DvFEVVis.js"), []),
            "./app/de.json": () => Q( () => import("./de-j5a6Q8mB.js"), []),
            "./app/de_CH.json": () => Q( () => import("./de_CH-BaSuhpiN.js"), []),
            "./app/en.json": () => Q( () => import("./en-Q4itZEfM.js"), []),
            "./app/en_pirate.json": () => Q( () => import("./en_pirate-CoHcFHys.js"), []),
            "./app/es.json": () => Q( () => import("./es-qaxZaoDI.js"), []),
            "./app/es_419.json": () => Q( () => import("./es_419-CZ_ROypB.js"), []),
            "./app/es_MX.json": () => Q( () => import("./es_MX-DPNJ3ED0.js"), []),
            "./app/fr.json": () => Q( () => import("./fr-Du-fCrRh.js"), []),
            "./app/gl.json": () => Q( () => import("./gl-CTLm7zkj.js"), []),
            "./app/it.json": () => Q( () => import("./it-CE3_kTcg.js"), []),
            "./app/ja.json": () => Q( () => import("./ja-L96Qh4lD.js"), []),
            "./app/ko.json": () => Q( () => import("./ko-Df-lYv67.js"), []),
            "./app/nb_NO.json": () => Q( () => import("./nb_NO-DHGYcp2g.js"), []),
            "./app/nl.json": () => Q( () => import("./nl-Bcx5_AA8.js"), []),
            "./app/pl.json": () => Q( () => import("./pl-BoY0dVCV.js"), []),
            "./app/pt_BR.json": () => Q( () => import("./pt_BR-D0Js4SVA.js"), []),
            "./app/pt_PT.json": () => Q( () => import("./pt_PT-DzUzijUE.js"), []),
            "./app/ru.json": () => Q( () => import("./ru-COlzLBFJ.js"), []),
            "./app/sk.json": () => Q( () => import("./sk-C5QClK9I.js"), []),
            "./app/sl.json": () => Q( () => import("./sl-c4lQ2v7T.js"), []),
            "./app/sv.json": () => Q( () => import("./sv-BRCbUKPA.js"), []),
            "./app/uk.json": () => Q( () => import("./uk-CsTPhJNJ.js"), []),
            "./app/vi.json": () => Q( () => import("./vi-8HDe9fRH.js"), []),
            "./app/zh_Hans.json": () => Q( () => import("./zh_Hans-CTXEyDSh.js"), [])
        }), `./app/${e.replace(/[-@]/g, "_")}.json`, 5)) == null ? void 0 : n.default) != null ? o : s
    } catch {}
    let t = {};
    if ((i = bl[e]) != null && i.isGameTranslation && (e === fe || !localStorage.getItem("locale-apponly")))
        try {
            t = (g = (l = await Oa(Object.assign({
                "./game/de.json": () => Q( () => import("./de-4i4H569W.js"), []),
                "./game/en.json": () => Q( () => import("./en-BzRRFxzs.js"), []),
                "./game/en_pirate.json": () => Q( () => import("./en_pirate-BUb4Wohs.js"), []),
                "./game/es_419.json": () => Q( () => import("./es_419-CH5HPZE1.js"), []),
                "./game/sv.json": () => Q( () => import("./sv-DyPdPJMA.js"), []),
                "./game/zh_Hans.json": () => Q( () => import("./zh_Hans-BInGB6xR.js"), [])
            }), `./game/${e.replace(/[-@]/g, "_")}.json`, 5)) == null ? void 0 : l.default) != null ? g : t
        } catch {}
    return {
        ...s,
        ...t
    }
}
;
async function Hu() {
    if (Pe)
        return Pe;
    const e = Uu()
      , s = {
        [e]: await zs(e)
    };
    return e !== fe && (s[fe] = await zs(fe)),
    Pe = Gd({
        locale: e,
        messages: s,
        legacy: !1,
        fallbackLocale: fe,
        datetimeFormats: {},
        globalInjection: !0,
        pluralRules: {
            ru: ja,
            uk: ja
        }
    }),
    document.querySelector("html").setAttribute("lang", e),
    Pe
}
async function Ua(e, s=!1) {
    if (!Object.keys($e).includes(e) || Pe.global.availableLocales.includes(e) && !s)
        return;
    const t = await zs(e);
    Pe.global.setLocaleMessage(e, t)
}
const qu = {
    name: "Notifications",
    components: {},
    computed: {
        ...M("session", ["boostExpires", "users"]),
        ...M("user", ["notifications", "relations"]),
        ...D("user", ["isStoryteller"])
    },
    data() {
        return {
            browser: Je()
        }
    },
    methods: {
        ...U(["toggleModal"]),
        remove(e) {
            switch (e.type) {
            case "audioNotAllowed":
                this.$store.commit("chat/toggleNotAllowed", !1),
                this.$store.commit("chat/toggleAudioDeafened", !1);
                break
            }
            this.$store.commit("user/removeNotification", e)
        },
        grantGrimoireAccess(e, s) {
            var t;
            this.isStoryteller && ((t = this.users.get(e)) == null ? void 0 : t.grimoireAccess) === 1 && this.$store.commit("user/requestGrimoire", {
                id: e,
                status: s
            })
        },
        showUser(e) {
            this.toggleModal({
                name: "user",
                params: {
                    userId: e
                }
            })
        }
    }
}
  , Lu = {
    id: "notifications"
}
  , zu = ["onClick"]
  , Gu = {
    href: "https://support.mozilla.org/en-US/kb/block-autoplay",
    target: "_blank"
}
  , Wu = ["onClick"]
  , Fu = {
    class: "button-group"
}
  , Qu = ["onClick"]
  , Zu = ["onClick"]
  , Xu = ["onClick"];
function Ku(e, s, t, n, o, i) {
    const l = k("i18n-t");
    return r(),
    u("div", Lu, [b(We, {
        name: "slide"
    }, {
        default: T( () => [(r(!0),
        u(y, null, N(e.notifications, g => {
            var d;
            return r(),
            u("div", {
                class: "notification",
                key: g.createdAt,
                onClick: h => i.remove(g),
                "aria-live": "assertive"
            }, [g.type === "audioNotAllowed" ? (r(),
            u(y, {
                key: 0
            }, [b(l, {
                keypath: "main-menu.error_audio",
                scope: "global"
            }, {
                default: T( () => [a("b", null, c(e.$t("main-menu.error_audio2")), 1)]),
                _: 1
            }), s[0] || (s[0] = a("br", null, null, -1)), ((d = o.browser) == null ? void 0 : d.browser.name) === "Firefox" ? (r(),
            C(l, {
                key: 0,
                scope: "global",
                keypath: "main-menu.error_audio3"
            }, {
                default: T( () => [a("a", Gu, c(e.$t("main-menu.error_audio4")), 1)]),
                _: 1
            })) : A("", !0)], 64)) : g.type === "boost" ? (r(),
            u(y, {
                key: 1
            }, [v(c(e.$t("main-menu.session_expires", [e.$d(new Date(e.boostExpires), {
                hour: "numeric",
                minute: "numeric"
            })])), 1)], 64)) : g.type === "grimoireAccess" ? (r(),
            u(y, {
                key: 2
            }, [b(l, {
                keypath: "main-menu.grim_request_user",
                scope: "global"
            }, {
                default: T( () => {
                    var h;
                    return [a("a", {
                        onClick: R(m => i.showUser(g.payload), ["stop"])
                    }, c((h = e.users.get(g.payload)) == null ? void 0 : h.username), 9, Wu)]
                }
                ),
                _: 2
            }, 1024), a("div", Fu, [a("div", {
                class: "button primary",
                role: "button",
                onClick: h => i.grantGrimoireAccess(g.payload, 3)
            }, c(e.$t("common.button_allow")), 9, Qu), a("div", {
                class: "button secondary",
                role: "button",
                onClick: h => i.grantGrimoireAccess(g.payload, 2)
            }, c(e.$t("common.button_deny")), 9, Zu)])], 64)) : g.type === "blockJoin" ? (r(),
            C(l, {
                key: 3,
                keypath: "main-menu.block_join",
                scope: "global"
            }, {
                default: T( () => {
                    var h, m;
                    return [a("a", {
                        onClick: R(p => i.showUser(g.payload), ["stop"])
                    }, c((m = (h = e.relations.get(g.payload)) == null ? void 0 : h.meta) == null ? void 0 : m.username), 9, Xu)]
                }
                ),
                _: 2
            }, 1024)) : A("", !0)], 8, zu)
        }
        ), 128))]),
        _: 1
    })])
}
const Yu = O(qu, [["render", Ku], ["__scopeId", "data-v-706902d4"]])
  , Ju = {
    components: {
        Notifications: Yu
    },
    inject: ["bindShortcut", "triggerShortcut", "unbindShortcut", "isApp", "toggleFullscreen"],
    computed: {
        ...M(["chat", "definitions", "edition", "game", "grimoire", "keybindings", "positions", "roles", "session", "settings", "vote"]),
        ...M("players", ["players", "storytellers"]),
        ...M("user", ["user", "downloadUrl"]),
        ...D("players", ["seatedPlayerMap"]),
        ...D("session", ["boostDuration"]),
        ...D("user", ["isStoryteller", "isSpectator", "hasGrimoireAccess"]),
        ...D("game", ["isNight"]),
        ...D(["roleIconURL"]),
        isRestricted() {
            return this.session.hook.name === "reveal-grimoire"
        },
        onlineUsers() {
            return [...this.session.users].filter( ([,e]) => e.isOnline).length
        },
        handIcons() {
            var s, t, n, o, i, l;
            const e = ["i-hand", "i-hand-fist", "i-hand-peace", "i-thumbs-up", "i-thumbs-down"];
            return (t = (s = this.session.users.get(this.user.id)) == null ? void 0 : s.flags) != null && t.includes("powerful") && (e.push("i-hand-spock", "i-hand-lizard", "i-hand-middle-finger", "i-face-smile", "i-face-frown"),
            this.roles.forEach(g => this.definitions.PLAYER_TEAMS.includes(g.team) && e.push("r-" + g.id))),
            (o = (n = this.session.users.get(this.user.id)) == null ? void 0 : n.cosmetics) != null && o.emotes && ((l = (i = this.session.users.get(this.user.id)) == null ? void 0 : i.cosmetics) == null || l.emotes.forEach(g => {
                e.push(g)
            }
            )),
            e
        }
    },
    data() {
        return {
            tab: "newgame",
            copied: !1,
            isWaitingForST: !1,
            raiseHandTimeout: null,
            isIconSelection: !1,
            schemaURL: "https://github.com/ThePandemoniumInstitute/botc-release/blob/main/script-schema.json",
            defaultLocale: fe,
            shortcuts: {
                leaveSession: this.leave,
                toggleNightOrder: () => this.toggleTab("nightOrder"),
                toggleReference: () => this.toggleTab("character"),
                modalRules: () => this.toggleModal({
                    name: "rules"
                }),
                modalSettings: () => this.toggleModal({
                    name: "settings"
                }),
                modalShortcuts: () => this.toggleModal({
                    name: "settings",
                    params: {
                        tab: 4
                    }
                }),
                modalUsers: () => this.toggleModal({
                    name: "users"
                }),
                modeGather: () => this.toggleMode("gather"),
                toggleNPCs: this.addNPC,
                raiseHand: () => this.raiseHand(),
                attentionGong: this.attentionGong,
                revealGrimoire: this.revealGrimoire,
                toggleAudioDeafened: () => this.deafen(),
                toggleAudioMuted: this.toggleAudioMuted,
                toggleEdition: this.toggleEdition,
                toggleNight: this.toggleNight,
                toggleNightSignal: this.toggleNightSignal,
                toggleRoles: this.toggleRoles,
                toggleTownSquare: this.toggleTownSquare,
                toggleVideoMuted: this.toggleVideoMuted,
                toggleVoteHistory: this.toggleVoteHistory,
                toggleWhisper: this.toggleWhisper,
                setTimer: this.setTimer,
                swipeUp: () => this.raiseHand(!0),
                swipeDown: () => this.raiseHand(!1)
            }
        }
    },
    methods: {
        ...U(["setGrimoireMode", "setMenuOpen", "toggleModal", "toggleTownSquare"]),
        ...U("players", ["addStoryteller", "removeStoryteller"]),
        ...U("chat", ["toggleVideoMuted", "toggleAudioDeafened", "toggleVideoDeafened", "toggleNotAllowed"]),
        ...$("session", ["leave"]),
        ...$("user", ["logout"]),
        ...$("game", ["revealGrimoire"]),
        ...$(["openDialogue"]),
        async quit() {
            await dl(0)
        },
        toggleMenu() {
            this.setMenuOpen("m")
        },
        deafen() {
            this.chat.isNotAllowed && this.toggleNotAllowed(!1),
            this.toggleAudioDeafened(),
            this.chat.audio.isDeafened && !this.chat.audio.isMuted && this.toggleAudioMuted()
        },
        toggleAudioMuted() {
            this.chat.audio.isPushToTalk || (this.$store.commit("chat/toggleAudioMuted"),
            !this.chat.audio.isMuted && this.chat.audio.isDeafened && (this.chat.isNotAllowed && this.toggleNotAllowed(!1),
            this.toggleAudioDeafened()))
        },
        attentionGong() {
            if (this.isStoryteller && !this.session.hook.name)
                try {
                    this.$store.dispatch("session/triggerHook", {
                        name: "attention-gong",
                        delay: 1e4
                    })
                } catch {}
        },
        clearRoles() {
            this.openDialogue({
                type: "confirm",
                title: "main-menu.prompt_clear_title",
                text: `main-menu.prompt_clear_${this.isStoryteller ? "st" : "player"}`
            }).then(e => {
                e && this.$store.dispatch("players/clearRoles")
            }
            ).catch( () => {}
            )
        },
        addNPC() {
            this.toggleModal({
                name: "npc"
            })
        },
        toggleNight() {
            this.isStoryteller && (this.vote.nomination || this.grimoire.mode !== "pointing" && this.$store.dispatch("game/togglePhase"))
        },
        toggleNightSignal() {
            var e;
            this.isStoryteller || (e = this.session.signals.storyteller) != null && e.length && this.toggleModal({
                name: "signal"
            })
        },
        toggleMode(e) {
            !this.isStoryteller && (e !== "grimoire" || this.grimoire.mode === "pointing") || (e !== "grimoire" && this.vote.nomination && this.$store.commit("vote/nomination"),
            this.setGrimoireMode(this.grimoire.mode !== e ? e : "grimoire"))
        },
        toggleEdition() {
            this.isStoryteller && (this.vote.nomination || this.setGrimoireMode(this.settings.game.isTutorialDisabled ? "grimoire" : "rules"),
            this.toggleModal({
                name: "edition"
            }))
        },
        toggleRoles() {
            this.isStoryteller && (this.setGrimoireMode(this.settings.game.isTutorialDisabled ? "grimoire" : "firstnight"),
            this.toggleModal({
                name: "roles"
            }))
        },
        toggleTab(e) {
            var t;
            let s = this.grimoire.rightSideTabState;
            if (e === "character") {
                const n = (t = window.documentPictureInPicture) == null ? void 0 : t.window;
                if ((n == null ? void 0 : n.document.title) === "character") {
                    n.close();
                    return
                }
                const o = this.positions.character;
                o ? (o.hidden = !o.hidden,
                this.$store.commit("setPosition", {
                    name: "character",
                    value: o
                })) : s === "character-open" ? s = "" : s === "character-mid" ? s = "character-open" : s = "character-mid"
            } else {
                const n = this.game.phase < 2 ? "firstnight" : "othernight"
                  , o = n === "othernight" ? "firstnight" : "othernight"
                  , i = this.positions[n]
                  , l = this.positions[o];
                i ? (i.hidden = !i.hidden,
                this.$store.commit("setPosition", {
                    name: n,
                    value: i
                }),
                l && !l.hidden && (l.hidden = !0,
                this.$store.commit("setPosition", {
                    name: o,
                    value: l
                }))) : s === n + "-open" ? s = "" : s === n + "-mid" ? s = n + "-open" : s = n + "-mid"
            }
            this.$store.commit("setRightSideTabState", s)
        },
        toggleVoteHistory({ctrlKey: e, metaKey: s}={}) {
            e || s || !this.vote.history.length || !this.hasGrimoireAccess || this.toggleModal({
                name: "vote-history"
            })
        },
        toggleWhisper() {
            this.session.sessionId && (this.seatedPlayerMap.has(this.user.id) ? this.$store.commit("chat/togglePrompt") : this.$store.commit("setTab", {
                tab: "text",
                value: !0
            }))
        },
        emotePreviewIcon(e) {
            return new URL(Object.assign({
                "/src/assets/cosmetics/emotes/bugreporter-icon.webp": pl,
                "/src/assets/cosmetics/emotes/worldcup25-icon.webp": Al
            })[`/src/assets/cosmetics/emotes/${e}-icon.webp`],import.meta.url).href
        },
        changeHandIcon(e) {
            this.$store.commit("session/setHandIcon", e),
            clearTimeout(this.raiseHandTimeout),
            this.raiseHandTimeout = setTimeout( () => this.raiseHandTimeout = null, 500),
            this.isIconSelection = !1
        },
        raiseHand(e) {
            this.vote.nomination || this.seatedPlayerMap.has(this.user.id) && (this.raiseHandTimeout || (this.$store.commit("session/raiseHand", {
                userId: this.user.id,
                value: e && this.session.handIcon
            }),
            this.raiseHandTimeout = setTimeout( () => this.raiseHandTimeout = null, 500)))
        },
        async setTimer() {
            if (this.isStoryteller)
                try {
                    const {title: e, value: s, checkbox: t} = await this.openDialogue({
                        type: "timer",
                        title: "main-menu.prompt_timer_title",
                        text: "main-menu.prompt_timer_text",
                        checkbox: {
                            value: this.session.timer.isPausedDuringVotes
                        }
                    });
                    s >= 3 && s <= 7200 ? this.$store.commit("session/setTimer", {
                        expiration: Date.now() + Math.round(s * 1e3),
                        title: e,
                        isPausedDuringVotes: t,
                        paused: t && this.vote.nomination ? Date.now() : void 0
                    }) : this.session.timer.expiration && this.$store.commit("session/setTimer")
                } catch {}
        },
        async emptySeat() {
            if (this.session.sessionId)
                try {
                    (!this.game.isRunning || await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "main-menu.prompt_vacate_title",
                        text: "main-menu.prompt_vacate_text"
                    })) && this.seatedPlayerMap.has(this.user.id) && !this.isStoryteller && this.$store.commit("players/claimSeat", -1)
                } catch {}
        }
    },
    mounted() {
        Object.keys(this.shortcuts).forEach(e => {
            this.bindShortcut(e, this.shortcuts[e].bind(this))
        }
        )
    },
    beforeUnmount() {
        Object.keys(this.shortcuts).forEach(e => {
            this.unbindShortcut(e)
        }
        )
    }
}
  , $u = {
    id: "controls"
}
  , xu = ["title"]
  , eg = ["title"]
  , sg = ["title"]
  , tg = ["title"]
  , ig = {
    class: "headline"
}
  , og = {
    key: 0
}
  , ng = {
    key: 1
}
  , ag = {
    key: 0
}
  , rg = {
    class: "headline"
}
  , lg = {
    key: 0,
    class: "icons"
}
  , cg = ["onClick"]
  , dg = ["onClick"]
  , ug = {
    class: "headline"
}
  , gg = ["href"]
  , mg = {
    key: 1
}
  , hg = ["href"]
  , pg = ["href"];
function Ag(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("Notifications");
    return r(),
    u("div", $u, [b(L, {
        name: "fade"
    }, {
        default: T( () => [e.hasGrimoireAccess && e.isSpectator ? (r(),
        u("div", {
            key: 0,
            class: "icon grimoire-access no-click",
            title: e.$t("main-menu.grim_access")
        }, [b(l, {
            icon: "book-dead"
        })], 8, xu)) : A("", !0)]),
        _: 1
    }), b(L, {
        name: "fade"
    }, {
        default: T( () => [e.vote.history.length && e.session.sessionId && e.hasGrimoireAccess ? (r(),
        u("div", {
            key: 0,
            class: "icon vote-history",
            onClick: s[0] || (s[0] = d => i.toggleVoteHistory()),
            title: e.$t("main-menu.vote_history")
        }, [b(l, {
            icon: "hand-point-right"
        }), v(" " + c(e.vote.history.length), 1)], 8, eg)) : A("", !0)]),
        _: 1
    }), b(L, {
        name: "fade"
    }, {
        default: T( () => [e.session.signals.storyteller && e.session.signals.storyteller.length && !e.isStoryteller ? (r(),
        u("div", {
            key: 0,
            class: "icon signals",
            onClick: s[1] || (s[1] = d => e.toggleModal({
                name: "signal"
            })),
            title: e.$t("main-menu.night_info_text"),
            "aria-live": "assertive"
        }, [b(l, {
            icon: "eye"
        }), v(" " + c(e.$t("main-menu.night_info")), 1)], 8, sg)) : A("", !0)]),
        _: 1
    }), b(L, {
        name: "fade"
    }, {
        default: T( () => [e.session.sessionId ? (r(),
        u("div", {
            key: 0,
            class: _(["icon chat", {
                reconnecting: e.chat.isReconnecting
            }])
        }, [a("div", {
            class: "mute",
            onClick: s[2] || (s[2] = d => i.deafen())
        }, [b(l, {
            title: e.$t("modals.settings.shortcuts.toggleAudioDeafened"),
            class: _(e.chat.audio.isDeafened ? "secondary" : ""),
            icon: e.chat.audio.isDeafened ? "volume-mute" : "volume-up"
        }, null, 8, ["title", "class", "icon"])]), e.chat.audio.device && e.seatedPlayerMap.has(e.user.id) ? (r(),
        C(l, {
            key: 0,
            onClick: s[3] || (s[3] = d => i.toggleAudioMuted()),
            title: e.chat.audio.isPushToTalk ? e.$t("main-menu.push_to_talk", [e.keybindings.toggleAudioMuted[0]]) : e.$t("main-menu.mute_mic", [e.keybindings.toggleAudioMuted[0]]),
            class: _(e.chat.audio.isMuted ? "secondary" : ""),
            icon: e.chat.audio.isMuted ? "microphone-slash" : "microphone"
        }, null, 8, ["title", "class", "icon"])) : A("", !0), e.chat.video.device && e.seatedPlayerMap.has(e.user.id) ? (r(),
        C(l, {
            key: 1,
            onClick: s[4] || (s[4] = d => e.toggleVideoMuted()),
            title: e.$t("main-menu.mute_cam", [e.keybindings.toggleVideoMuted[0]]),
            class: _(e.chat.video.isMuted ? "secondary" : ""),
            icon: e.chat.video.isMuted ? "video-slash" : "video"
        }, null, 8, ["title", "class", "icon"])) : A("", !0)], 2)) : A("", !0)]),
        _: 1
    }), b(L, {
        name: "fade"
    }, {
        default: T( () => [e.session.sessionId ? (r(),
        u("div", {
            key: 0,
            class: _(["icon session", {
                storyteller: e.isStoryteller,
                reconnecting: e.session.isReconnecting
            }]),
            title: e.$t("main-menu.show_users", [e.keybindings.modalUsers[0]]),
            onClick: s[5] || (s[5] = d => e.toggleModal({
                name: "users"
            }))
        }, [b(l, {
            icon: "wifi"
        }), v(" " + c(i.onlineUsers), 1)], 10, tg)) : A("", !0)]),
        _: 1
    }), b(g), a("div", {
        class: _(["menu", {
            open: e.grimoire.menuOpen === "m"
        }])
    }, [b(l, {
        icon: "cog",
        onClick: s[6] || (s[6] = R(d => i.toggleMenu(), ["stop"]))
    }), a("ul", null, [o.tab === "newgame" && !e.grimoire.loadingState ? (r(),
    u(y, {
        key: 0
    }, [a("li", ig, [e.isStoryteller ? (r(),
    u("h4", og, c(e.$t("main-menu.tab_new_game")), 1)) : (r(),
    u("h4", ng, c(e.$t("main-menu.tab_playing")), 1))]), e.isStoryteller && !i.isRestricted ? (r(),
    u(y, {
        key: 0
    }, [a("li", {
        onClick: s[7] || (s[7] = R(d => i.toggleMode("gather"), ["stop"]))
    }, [v(c(e.$t("main-menu.gather")) + " ", 1), e.grimoire.mode !== "gather" ? (r(),
    u("em", ag, c(e.keybindings.modeGather[0].trim()), 1)) : (r(),
    C(l, {
        key: 1,
        icon: "times-circle"
    }))]), a("li", {
        onClick: s[8] || (s[8] = R(d => i.toggleEdition(), ["stop"]))
    }, [v(c(e.$t("main-menu.edition")) + " ", 1), a("em", null, c(e.keybindings.toggleEdition[0].trim()), 1)]), a("li", {
        onClick: s[9] || (s[9] = R(d => e.toggleModal({
            name: "rules"
        }), ["stop"]))
    }, [v(c(e.$t("main-menu.rules")) + " ", 1), a("em", null, c(e.keybindings.modalRules[0].trim()), 1)]), a("li", {
        onClick: s[10] || (s[10] = R( (...d) => i.addNPC && i.addNPC(...d), ["stop"]))
    }, [v(c(e.$t("main-menu.npcs")) + " ", 1), a("em", null, c(e.keybindings.toggleNPCs[0].trim()), 1)]), e.players.length > 4 ? (r(),
    u("li", {
        key: 0,
        onClick: s[11] || (s[11] = R(d => i.toggleRoles(), ["stop"]))
    }, [v(c(e.$t("main-menu.characters")) + " ", 1), a("em", null, c(e.keybindings.toggleRoles[0]), 1)])) : A("", !0), a("li", {
        class: _({
            disabled: e.session.hook.name
        }),
        onClick: s[12] || (s[12] = d => e.revealGrimoire())
    }, [v(c(e.$t("main-menu.reveal_grim")) + " ", 1), a("em", null, c(e.keybindings.revealGrimoire[0].trim()), 1)], 2)], 64)) : i.isRestricted ? A("", !0) : (r(),
    u("li", {
        key: 1,
        onClick: s[13] || (s[13] = d => e.toggleModal({
            name: "rules"
        }))
    }, [v(c(e.$t("main-menu.rules")) + " ", 1), b(l, {
        icon: "book-dead"
    })])), i.isRestricted ? A("", !0) : (r(),
    u("li", {
        key: 2,
        onClick: s[14] || (s[14] = (...d) => i.clearRoles && i.clearRoles(...d))
    }, [v(c(e.$t("main-menu.clear_grim")) + " ", 1), b(l, {
        icon: "trash-alt"
    })])), e.session.sessionId && !i.isRestricted ? (r(),
    u(y, {
        key: 3
    }, [e.isStoryteller ? (r(),
    u("li", {
        key: 0,
        onClick: s[15] || (s[15] = d => e.removeStoryteller(e.user))
    }, [v(c(e.$t("main-menu.storyteller_remove")) + " ", 1), b(l, {
        icon: "user"
    })])) : e.storytellers.length ? A("", !0) : (r(),
    u("li", {
        key: 1,
        onClick: s[16] || (s[16] = d => e.addStoryteller(e.user))
    }, [v(c(e.$t("main-menu.storyteller_add")) + " ", 1), b(l, {
        icon: "crown"
    })])), e.seatedPlayerMap.has(e.user.id) && !e.isStoryteller ? (r(),
    u("li", {
        key: 2,
        onClick: s[17] || (s[17] = d => i.emptySeat())
    }, [v(c(e.$t("main-menu.vacate_seat")) + " ", 1), b(l, {
        icon: "chair"
    })])) : A("", !0)], 64)) : A("", !0), a("li", {
        onClick: s[18] || (s[18] = d => e.leave())
    }, [v(c(e.$t("main-menu.leave")) + " ", 1), a("em", null, c(e.keybindings.leaveSession[0].trim()), 1)])], 64)) : A("", !0), o.tab === "shortcuts" && !e.grimoire.loadingState ? (r(),
    u(y, {
        key: 1
    }, [a("li", rg, [a("h4", null, c(e.$t("main-menu.tab_during_game")), 1)]), i.isRestricted ? A("", !0) : (r(),
    u(y, {
        key: 0
    }, [a("li", {
        onClick: s[19] || (s[19] = d => i.triggerShortcut(e.keybindings.toggleWhisper[0]))
    }, [v(c(e.$t("main-menu.request_private")) + " ", 1), a("em", null, c(e.keybindings.toggleWhisper[0].trim()), 1)]), a("li", {
        onClick: s[23] || (s[23] = d => i.triggerShortcut(e.keybindings.raiseHand[0])),
        class: _({
            disabled: o.raiseHandTimeout || !e.seatedPlayerMap.has(e.user.id)
        })
    }, [!e.isStoryteller && e.vote.nomination ? (r(),
    u(y, {
        key: 0
    }, [v(c(e.$t("main-menu.cast_vote")), 1)], 64)) : (r(),
    u(y, {
        key: 1
    }, [a("span", null, c(e.$t("main-menu.raise_hand")), 1), e.session.handIcon.substring(0, 2) === "i-" ? (r(),
    C(l, {
        key: 0,
        class: "raise",
        icon: e.session.handIcon.substring(2),
        title: e.$t("main-menu.change_icon"),
        onClick: s[20] || (s[20] = R(d => o.isIconSelection = !o.isIconSelection, ["stop"]))
    }, null, 8, ["icon", "title"])) : e.session.handIcon.substring(0, 2) === "r-" ? (r(),
    u("span", {
        key: 1,
        class: "role",
        onClick: s[21] || (s[21] = R(d => o.isIconSelection = !o.isIconSelection, ["stop"])),
        style: q({
            backgroundImage: `url(${e.roleIconURL(e.session.handIcon.substring(2))})`
        })
    }, null, 4)) : (r(),
    u("span", {
        key: 2,
        class: "cosmetic",
        onClick: s[22] || (s[22] = R(d => o.isIconSelection = !o.isIconSelection, ["stop"])),
        style: q({
            backgroundImage: `url(${i.emotePreviewIcon(e.session.handIcon)})`
        })
    }, null, 4))], 64)), a("em", null, c(e.keybindings.raiseHand[0].trim()), 1)], 2), o.isIconSelection ? (r(),
    u("li", lg, [(r(!0),
    u(y, null, N(i.handIcons, (d, h) => (r(),
    u(y, {
        key: h
    }, [d.substring(0, 2) === "i-" ? (r(),
    C(l, {
        key: 0,
        class: "raise",
        icon: d.substring(2),
        title: e.$t("main-menu.change_icon"),
        onClick: R(m => i.changeHandIcon(d), ["stop"])
    }, null, 8, ["icon", "title", "onClick"])) : d.substring(0, 2) === "r-" ? (r(),
    u("span", {
        key: 1,
        class: "role",
        onClick: R(m => i.changeHandIcon(d), ["stop"]),
        style: q({
            backgroundImage: `url(${e.roleIconURL(d.substring(2))})`
        })
    }, null, 12, cg)) : (r(),
    u("span", {
        key: 2,
        class: "cosmetic",
        onClick: R(m => i.changeHandIcon(d), ["stop"]),
        style: q({
            backgroundImage: `url(${i.emotePreviewIcon(d)})`
        })
    }, null, 12, dg))], 64))), 128))])) : A("", !0), e.players.length ? (r(),
    u("li", {
        key: 1,
        onClick: s[24] || (s[24] = (...d) => e.toggleTownSquare && e.toggleTownSquare(...d))
    }, [e.grimoire.isTownSquare ? (r(),
    u(y, {
        key: 1
    }, [v(c(e.$t("main-menu.show_grim")), 1)], 64)) : (r(),
    u(y, {
        key: 0
    }, [v(c(e.$t("main-menu.show_town")), 1)], 64)), a("em", null, c(e.keybindings.toggleTownSquare[0].trim()), 1)])) : A("", !0), e.isStoryteller ? (r(),
    u("li", {
        key: 2,
        onClick: s[25] || (s[25] = d => i.toggleNight()),
        class: _({
            disabled: e.vote.nomination || e.grimoire.mode === "pointing"
        })
    }, [e.isNight ? e.isNight ? (r(),
    u(y, {
        key: 1
    }, [v(c(e.$t("main-menu.to_day")), 1)], 64)) : A("", !0) : (r(),
    u(y, {
        key: 0
    }, [v(c(e.$t("main-menu.to_night")), 1)], 64)), a("em", null, c(e.keybindings.toggleNight[0].trim()), 1)], 2)) : A("", !0)], 64)), a("li", {
        onClick: s[26] || (s[26] = d => i.toggleTab("character"))
    }, [v(c(e.$t("main-menu.char_sheet")) + " ", 1), a("em", null, c(e.keybindings.toggleReference[0].trim()), 1)]), e.hasGrimoireAccess || e.settings.game.isPlayerNightOrder ? (r(),
    u("li", {
        key: 1,
        onClick: s[27] || (s[27] = d => i.toggleTab("nightOrder"))
    }, [v(c(e.$t("main-menu.night_sheet")) + " ", 1), a("em", null, c(e.keybindings.toggleNightOrder[0].trim()), 1)])) : A("", !0), e.session.sessionId ? (r(),
    u(y, {
        key: 2
    }, [e.isStoryteller ? (r(),
    u("li", {
        key: 0,
        onClick: s[28] || (s[28] = (...d) => i.toggleVoteHistory && i.toggleVoteHistory(...d)),
        class: _({
            disabled: !e.vote.history.length
        })
    }, [v(c(e.$t("main-menu.vote_history")) + " ", 1), a("em", null, c(e.keybindings.toggleVoteHistory[0].trim()), 1)], 2)) : A("", !0), e.isStoryteller ? (r(),
    u("li", {
        key: 1,
        class: _({
            disabled: e.session.hook.name
        }),
        onClick: s[29] || (s[29] = d => i.attentionGong())
    }, [v(c(e.isNight ? e.$t("main-menu.gong_attention") : e.$t("main-menu.gong_recall")) + " ", 1), a("em", null, c(e.keybindings.attentionGong[0].trim()), 1)], 2)) : A("", !0), e.isStoryteller && !i.isRestricted ? (r(),
    u("li", {
        key: 2,
        onClick: s[30] || (s[30] = d => i.setTimer())
    }, [v(c(e.$t("main-menu.set_timer")) + " ", 1), a("em", null, c(e.keybindings.setTimer[0].trim()), 1)])) : A("", !0), a("li", {
        onClick: s[31] || (s[31] = d => e.toggleModal({
            name: "users"
        }))
    }, [v(c(e.$t("main-menu.user_list")) + " ", 1), a("em", null, c(e.keybindings.modalUsers[0].trim()), 1)])], 64)) : A("", !0)], 64)) : A("", !0), o.tab === "settings" || e.grimoire.loadingState ? (r(),
    u(y, {
        key: 2
    }, [a("li", ug, [a("h4", null, c(e.$t("main-menu.tab_app")), 1)]), a("li", {
        onClick: s[32] || (s[32] = d => i.toggleFullscreen())
    }, [v(c(e.$t("main-menu.fullscreen")) + " ", 1), a("em", null, c(e.keybindings.toggleFullscreen[0].trim()), 1)]), a("li", {
        onClick: s[33] || (s[33] = d => e.toggleModal({
            name: "settings"
        }))
    }, [v(c(e.$t("main-menu.settings")) + " ", 1), a("em", null, c(e.keybindings.modalSettings[0].trim()), 1)]), a("li", {
        onClick: s[34] || (s[34] = d => e.toggleModal({
            name: "help"
        }))
    }, [v(c(e.$t("main-menu.help")) + " ", 1), b(l, {
        icon: "info-circle"
    })]), !i.isApp && e.downloadUrl.length ? (r(!0),
    u(y, {
        key: 0
    }, N(e.downloadUrl, ([d,h]) => (r(),
    u("li", {
        key: d
    }, [a("a", {
        href: h,
        target: "_blank",
        tabindex: "-1"
    }, [v(c(e.$t("main-menu.download", [d])) + " ", 1), b(l, {
        icon: "download"
    })], 8, gg)]))), 128)) : A("", !0), e.$i18n.locale !== o.defaultLocale ? (r(),
    u("li", mg, [a("a", {
        href: `https://translation.botc.app/projects/botc-app/-/${e.$i18n.locale}/`,
        target: "_blank",
        tabindex: "-1"
    }, [v(c(e.$t("main-menu.translation")) + " ", 1), b(l, {
        icon: "language"
    })], 8, hg)])) : A("", !0), a("li", null, [a("a", {
        href: o.schemaURL,
        target: "_blank",
        tabindex: "-1"
    }, [v(c(e.$t("main-menu.json_schema")) + " ", 1), b(l, {
        icon: "file-code"
    })], 8, pg)]), e.user.id ? (r(),
    u("li", {
        key: 2,
        onClick: s[35] || (s[35] = d => e.logout())
    }, [v(c(e.$t("common.button_logout")) + " ", 1), b(l, {
        icon: "sign-out-alt"
    })])) : A("", !0), i.isApp ? (r(),
    u("li", {
        key: 3,
        onClick: s[36] || (s[36] = R(d => i.quit(), ["stop"]))
    }, [v(c(e.$t("pages.lobby.button_quit")) + " ", 1), b(l, {
        icon: "times-circle"
    })])) : A("", !0)], 64)) : A("", !0), a("li", {
        class: _(["tabs", o.tab])
    }, [e.grimoire.loadingState ? A("", !0) : (r(),
    C(l, {
        key: 0,
        icon: "plus-circle",
        class: "newgame",
        onClick: s[37] || (s[37] = R(d => o.tab = "newgame", ["stop"])),
        "aria-label": e.$t("main-menu.tab_new_game"),
        role: "button",
        "aria-hidden": "false"
    }, null, 8, ["aria-label"])), e.grimoire.loadingState ? A("", !0) : (r(),
    C(l, {
        key: 1,
        icon: "keyboard",
        class: "shortcuts",
        onClick: s[38] || (s[38] = R(d => o.tab = "shortcuts", ["stop"])),
        "aria-label": e.$t("main-menu.tab_during_game"),
        role: "button",
        "aria-hidden": "false"
    }, null, 8, ["aria-label"])), b(l, {
        icon: "sliders-h",
        class: "settings",
        onClick: s[39] || (s[39] = R(d => o.tab = "settings", ["stop"])),
        "aria-label": e.$t("main-menu.tab_app"),
        role: "button",
        "aria-hidden": "false"
    }, null, 8, ["aria-label"])], 2)])], 2)])
}
const bg = O(Ju, [["render", Ag], ["__scopeId", "data-v-2130b210"]])
  , fg = {
    data() {
        return {
            gradients: [["primary", "#ffad00", "#000"], ["primary-white", "#fff", "#ffad00"], ["secondary", "#6800da", "#000"], ["secondary-white", "#fff", "#6800da"], ["default", "#4E4E4E", "#000"], ["bug", "#15ff00", "#226c00"]]
        }
    }
}
  , vg = {
    id: "gradients"
}
  , yg = ["id"];
function _g(e, s, t, n, o, i) {
    return r(),
    u("div", vg, [s[0] || (s[0] = a("svg", {
        width: "0",
        height: "0"
    }, [a("defs", null, [a("path", {
        d: "M 70 70 m -42.4264 -42.4264 a 60 60 315 1 0 84.8528 84.8528 a 60 60 315 1 0 -84.8528 -84.8528",
        id: "circle-path"
    })])], -1)), (r(!0),
    u(y, null, N(o.gradients, (l, g) => (r(),
    u("svg", {
        width: "0",
        height: "0",
        key: g
    }, [a("linearGradient", {
        id: l[0],
        x1: "50%",
        y1: "100%",
        x2: "50%",
        y2: "0%"
    }, [a("stop", {
        offset: "0%",
        style: q({
            "stop-color": l[2],
            "stop-opacity": 1
        })
    }, null, 4), a("stop", {
        offset: "100%",
        style: q({
            "stop-color": l[1],
            "stop-opacity": 1
        })
    }, null, 4)], 8, yg)]))), 128))])
}
const wg = O(fg, [["render", _g], ["__scopeId", "data-v-8b24badb"]])
  , kg = "/assets/attentiongong-DpHLo7G5.mp3"
  , Cg = "/assets/chatjoin-DUW4cfah.mp3"
  , Sg = "/assets/chatleave-DJrIar29.mp3"
  , Pg = "/assets/countdown-DRzblIRW.mp3"
  , Tg = "/assets/privatejoin-Cx7LT4DF.mp3"
  , Ig = "/assets/privaterequest-Dl6tcyUb.mp3"
  , Mg = "/assets/timergong-Ct7TV6TZ.mp3"
  , Rg = "/assets/votecast-BUbYUp00.mp3"
  , Dg = "/assets/votetick-C0z0mAeb.mp3"
  , Eg = "/assets/votetickshort-CIEfFW_G.mp3"
  , In = ["chatJoin", "chatLeave", "privateRequest", "privateJoin", "voteTick", "voteTickShort", "voteCast", "countdown", "attentionGong", "timerGong"]
  , Ng = {
    computed: {
        ...M(["grimoire"]),
        ...M("settings", ["general", "sounds"])
    },
    data() {
        return {
            soundSources: new Map(In.map(e => [e, new URL(Object.assign({
                "/src/assets/sounds/attentiongong.mp3": kg,
                "/src/assets/sounds/chatjoin.mp3": Cg,
                "/src/assets/sounds/chatleave.mp3": Sg,
                "/src/assets/sounds/countdown.mp3": Pg,
                "/src/assets/sounds/privatejoin.mp3": Tg,
                "/src/assets/sounds/privaterequest.mp3": Ig,
                "/src/assets/sounds/timergong.mp3": Mg,
                "/src/assets/sounds/votecast.mp3": Rg,
                "/src/assets/sounds/votetick.mp3": Dg,
                "/src/assets/sounds/votetickshort.mp3": Eg
            })[`/src/assets/sounds/${e.toLowerCase()}.mp3`],import.meta.url).href]))
        }
    },
    methods: {
        ...U(["removeSound"]),
        adjustVolume(e, s) {
            e.target.volume = this.general.soundVolume * this.sounds.get(s)
        }
    }
}
  , Bg = {
    id: "sounds"
}
  , Vg = ["src", "muted", "onCanplay", "onEnded"];
function Og(e, s, t, n, o, i) {
    return r(),
    u("div", Bg, [(r(!0),
    u(y, null, N(e.grimoire.sounds, l => (r(),
    u("audio", {
        key: l.timestamp,
        src: o.soundSources.get(l.name),
        muted: !e.general.soundVolume || !e.sounds.get(l.name),
        onCanplay: g => i.adjustVolume(g, l.name),
        onEnded: g => e.removeSound({
            timestamp: l.timestamp
        }),
        autoplay: ""
    }, null, 40, Vg))), 128))])
}
const jg = O(Ng, [["render", Og]])
  , Ug = "botc-app"
  , Hg = "3.51.1"
  , qg = "Blood on the Clocktower Online"
  , Lg = "https://botc.app"
  , zg = "Steffen Baumgart <steffen@baumgart.biz>"
  , Gg = "module"
  , Wg = {
    node: ">=18.x"
}
  , Fg = ["botc", "grimoire", "app", "vue", "scss"]
  , Qg = {
    type: "git",
    url: "https://github.com/thepandemoniuminstitute/botc-app.git"
}
  , Zg = {
    dev: "vite --host",
    serve: "vite preview",
    build: "vite build",
    lint: "eslint --ext .js,.vue --ignore-path .gitignore --fix src",
    "lint:ci": "eslint --ext .js,.vue --ignore-path .gitignore --no-fix --max-warnings=0 src",
    tauri: "tauri",
    "tauri:dev": "tauri dev",
    "tauri:build": "NO_STRIP=true tauri build"
}
  , Xg = {
    "@fortawesome/fontawesome-svg-core": "^7.1.0",
    "@fortawesome/free-solid-svg-icons": "^7.1.0",
    "@fortawesome/vue-fontawesome": "^3.1.2",
    "@sentry/vite-plugin": "^4.4.0",
    "@sentry/vue": "^10.20.0",
    "@tauri-apps/api": "^2.9.0",
    "@tauri-apps/plugin-dialog": "^2.4.2",
    "@tauri-apps/plugin-fs": "^2.4.4",
    "@tauri-apps/plugin-os": "^2.3.2",
    "@tauri-apps/plugin-process": "^2.3.1",
    "@tauri-apps/plugin-updater": "^2.9.0",
    "@tauri-apps/plugin-window-state": "^2.4.1",
    "@vitejs/plugin-vue": "^6.0.1",
    ajv: "^8.17.1",
    "ajv-formats": "^3.0.1",
    hark: "^1.2.3",
    "iso-639-1": "^3.1.5",
    "jwt-decode": "^4.0.0",
    "language-icons": "^0.3.0",
    "mediasoup-client": "^3.18.1",
    sass: "^1.93.2",
    "socket.io-client": "^4.8.1",
    "ua-parser-js": "^2.0.6",
    vite: "^7.1.11",
    vue: "^3.5.22",
    "vue-i18n": "^11.1.12",
    "vue-router": "^4.6.3",
    "vue-turnstile": "^1.0.11",
    vuex: "^4.1.0"
}
  , Kg = {
    "@tauri-apps/cli": "^2.9.2",
    "@vue/eslint-config-prettier": "^9.0.0",
    eslint: "^8.57.1",
    "eslint-plugin-prettier": "^5.5.4",
    "eslint-plugin-vue": "^9.33.0",
    prettier: "^3.6.2",
    "vite-plugin-eslint": "^1.8.1"
}
  , re = {
    name: Ug,
    version: Hg,
    description: qg,
    homepage: Lg,
    private: !0,
    author: zg,
    type: Gg,
    engines: Wg,
    keywords: Fg,
    repository: Qg,
    scripts: Zg,
    dependencies: Xg,
    devDependencies: Kg
}
  , ze = [{}, {}, {}, {}, {}, {
    townsfolk: 3,
    outsider: 0,
    minion: 1,
    demon: 1
}, {
    townsfolk: 3,
    outsider: 1,
    minion: 1,
    demon: 1
}, {
    townsfolk: 5,
    outsider: 0,
    minion: 1,
    demon: 1
}, {
    townsfolk: 5,
    outsider: 1,
    minion: 1,
    demon: 1
}, {
    townsfolk: 5,
    outsider: 2,
    minion: 1,
    demon: 1
}, {
    townsfolk: 7,
    outsider: 0,
    minion: 2,
    demon: 1
}, {
    townsfolk: 7,
    outsider: 1,
    minion: 2,
    demon: 1
}, {
    townsfolk: 7,
    outsider: 2,
    minion: 2,
    demon: 1
}, {
    townsfolk: 9,
    outsider: 0,
    minion: 3,
    demon: 1
}, {
    townsfolk: 9,
    outsider: 1,
    minion: 3,
    demon: 1
}, {
    townsfolk: 9,
    outsider: 2,
    minion: 3,
    demon: 1
}]
  , Mn = {
    name: "Timer",
    computed: {
        ...M(["session", "grimoire", "vote"])
    },
    data() {
        return {
            timer: "",
            timeLeft: -1 / 0,
            timerTimeout: null,
            timerClass: "",
            animationDelay: 0
        }
    },
    methods: {
        setStartPosition() {
            this.timeLeft > 30 && (this.animationDelay = `${-120 + this.timeLeft % 120}s`)
        },
        updateTimer() {
            clearTimeout(this.timerTimeout);
            const {expiration: e, paused: s} = this.session.timer;
            this.timeLeft = Math.round((e - Date.now()) / 1e3),
            s && s < e && (this.timeLeft += Math.round((Date.now() - s) / 1e3)),
            this.timeLeft >= -5 ? (this.timeLeft > 30 ? (this.timerClass = "",
            this.timer = Math.ceil(this.timeLeft / 60) + "min") : this.timeLeft >= 0 ? (this.animationDelay = 0,
            this.timerClass = "secondary",
            this.timer = this.timeLeft + "s") : (this.grimoire.sounds.some( ({name: t}) => t === "timerGong") || this.$store.commit("playSound", "timerGong"),
            this.animationDelay = 0,
            this.timerClass = "warning",
            this.timer = this.$t("overlays.towninfo.timer_ended")),
            this.timerTimeout = setTimeout( () => this.updateTimer(), (this.timeLeft > 60 ? this.timeLeft % 60 || 60 : 1) * 1e3)) : this.timer = ""
        }
    },
    watch: {
        "session.timer.expiration"() {
            this.updateTimer(),
            this.setStartPosition()
        }
    },
    beforeMount() {
        this.updateTimer(),
        this.setStartPosition()
    },
    beforeUnmount() {
        clearTimeout(this.timerTimeout)
    }
}
  , Ha = () => {
    he(e => ({
        v74bf0f7e: e.animationDelay
    }))
}
  , qa = Mn.setup;
Mn.setup = qa ? (e, s) => (Ha(),
qa(e, s)) : Ha;
const Yg = ["title"]
  , Jg = {
    key: 0,
    class: "title"
};
function $g(e, s, t, n, o, i) {
    const l = k("font-awesome-icon");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [o.timeLeft >= -5 ? (r(),
        u("span", {
            key: 0,
            class: _(["timer", {
                [o.timerClass]: o.timerClass,
                paused: e.session.timer.paused && e.session.timer.paused < e.session.timer.expiration
            }]),
            title: e.session.timer.title
        }, [e.session.timer.title ? (r(),
        u("span", Jg, c(e.session.timer.title), 1)) : A("", !0), b(l, {
            icon: "hourglass-half"
        }), v(" " + c(o.timer), 1)], 10, Yg)) : A("", !0)]),
        _: 1
    })
}
const fl = O(Mn, [["render", $g], ["__scopeId", "data-v-9278b499"]])
  , xg = {
    inject: ["isApp"],
    name: "Version",
    components: {
        Timer: fl
    },
    computed: {
        ...M("user", ["user", "latestVersion", "newVersions", "downloadUrl", "appUpdate"]),
        ...M(["game", "session", "grimoire", "settings", "vote"]),
        ...M("players", ["players"]),
        ...D("game", ["lastPhase", "isNight"]),
        ...D("chat", ["isVideoWhisper"]),
        ...D("players", ["nonTravellers", "travellers"]),
        browserOutdated() {
            if (!this.browser)
                return !1;
            const {browser: e} = this.browser;
            return e.name === "Safari" && e.major <= 11 || e.name === "Opera" && e.major < 50 ? !0 : e.name === "IE" || e.name === "Opera Mini"
        },
        characterCount() {
            if (!ze[this.nonTravellers])
                return "? / ? / ? / ?";
            const {townsfolk: e="?", outsider: s="?", minion: t="?", demon: n="?"} = ze[this.nonTravellers];
            return `${e} / ${s} / ${t} / ${n}`
        },
        languageIcon() {
            return new URL(Object.assign({
                "/node_modules/language-icons/icons/aa.svg": Tn,
                "/node_modules/language-icons/icons/ab.svg": Pn,
                "/node_modules/language-icons/icons/ae.svg": Sn,
                "/node_modules/language-icons/icons/af.svg": Cn,
                "/node_modules/language-icons/icons/ak.svg": kn,
                "/node_modules/language-icons/icons/am.svg": wn,
                "/node_modules/language-icons/icons/an.svg": _n,
                "/node_modules/language-icons/icons/ar.svg": yn,
                "/node_modules/language-icons/icons/as.svg": vn,
                "/node_modules/language-icons/icons/av.svg": fn,
                "/node_modules/language-icons/icons/ay.svg": bn,
                "/node_modules/language-icons/icons/az.svg": An,
                "/node_modules/language-icons/icons/ba.svg": pn,
                "/node_modules/language-icons/icons/be.svg": hn,
                "/node_modules/language-icons/icons/bg.svg": mn,
                "/node_modules/language-icons/icons/bh.svg": gn,
                "/node_modules/language-icons/icons/bi.svg": un,
                "/node_modules/language-icons/icons/bm.svg": dn,
                "/node_modules/language-icons/icons/bn.svg": cn,
                "/node_modules/language-icons/icons/bo.svg": ln,
                "/node_modules/language-icons/icons/br.svg": rn,
                "/node_modules/language-icons/icons/bs.svg": an,
                "/node_modules/language-icons/icons/ca.svg": nn,
                "/node_modules/language-icons/icons/ce.svg": on,
                "/node_modules/language-icons/icons/ch.svg": tn,
                "/node_modules/language-icons/icons/co.svg": sn,
                "/node_modules/language-icons/icons/cr.svg": en,
                "/node_modules/language-icons/icons/cs.svg": xo,
                "/node_modules/language-icons/icons/cu.svg": $o,
                "/node_modules/language-icons/icons/cv.svg": Jo,
                "/node_modules/language-icons/icons/cy.svg": Yo,
                "/node_modules/language-icons/icons/da.svg": Ko,
                "/node_modules/language-icons/icons/de.svg": Xo,
                "/node_modules/language-icons/icons/dv.svg": Zo,
                "/node_modules/language-icons/icons/dz.svg": Qo,
                "/node_modules/language-icons/icons/ee.svg": Fo,
                "/node_modules/language-icons/icons/el.svg": Wo,
                "/node_modules/language-icons/icons/en.svg": Go,
                "/node_modules/language-icons/icons/eo.svg": zo,
                "/node_modules/language-icons/icons/es.svg": Lo,
                "/node_modules/language-icons/icons/et.svg": qo,
                "/node_modules/language-icons/icons/eu.svg": Ho,
                "/node_modules/language-icons/icons/fa.svg": Uo,
                "/node_modules/language-icons/icons/ff.svg": jo,
                "/node_modules/language-icons/icons/fi.svg": Oo,
                "/node_modules/language-icons/icons/fj.svg": Vo,
                "/node_modules/language-icons/icons/fo.svg": Bo,
                "/node_modules/language-icons/icons/fr.svg": No,
                "/node_modules/language-icons/icons/fy.svg": Eo,
                "/node_modules/language-icons/icons/ga.svg": Do,
                "/node_modules/language-icons/icons/gd.svg": Ro,
                "/node_modules/language-icons/icons/gl.svg": Mo,
                "/node_modules/language-icons/icons/gn.svg": Io,
                "/node_modules/language-icons/icons/gu.svg": To,
                "/node_modules/language-icons/icons/gv.svg": Po,
                "/node_modules/language-icons/icons/ha.svg": So,
                "/node_modules/language-icons/icons/he.svg": Co,
                "/node_modules/language-icons/icons/hi.svg": ko,
                "/node_modules/language-icons/icons/ho.svg": wo,
                "/node_modules/language-icons/icons/hr.svg": _o,
                "/node_modules/language-icons/icons/ht.svg": yo,
                "/node_modules/language-icons/icons/hu.svg": vo,
                "/node_modules/language-icons/icons/hy.svg": fo,
                "/node_modules/language-icons/icons/hz.svg": bo,
                "/node_modules/language-icons/icons/ia.svg": Ao,
                "/node_modules/language-icons/icons/id.svg": po,
                "/node_modules/language-icons/icons/ie.svg": ho,
                "/node_modules/language-icons/icons/ig.svg": mo,
                "/node_modules/language-icons/icons/ii.svg": go,
                "/node_modules/language-icons/icons/ik.svg": uo,
                "/node_modules/language-icons/icons/io.svg": co,
                "/node_modules/language-icons/icons/is.svg": lo,
                "/node_modules/language-icons/icons/it.svg": ro,
                "/node_modules/language-icons/icons/iu.svg": ao,
                "/node_modules/language-icons/icons/ja.svg": no,
                "/node_modules/language-icons/icons/jv.svg": oo,
                "/node_modules/language-icons/icons/ka.svg": io,
                "/node_modules/language-icons/icons/kg.svg": to,
                "/node_modules/language-icons/icons/ki.svg": so,
                "/node_modules/language-icons/icons/kj.svg": eo,
                "/node_modules/language-icons/icons/kk.svg": xi,
                "/node_modules/language-icons/icons/kl.svg": $i,
                "/node_modules/language-icons/icons/km.svg": Ji,
                "/node_modules/language-icons/icons/kn.svg": Yi,
                "/node_modules/language-icons/icons/ko.svg": Ki,
                "/node_modules/language-icons/icons/kr.svg": Xi,
                "/node_modules/language-icons/icons/ks.svg": Zi,
                "/node_modules/language-icons/icons/ku.svg": Qi,
                "/node_modules/language-icons/icons/kv.svg": Fi,
                "/node_modules/language-icons/icons/kw.svg": Wi,
                "/node_modules/language-icons/icons/ky.svg": Gi,
                "/node_modules/language-icons/icons/la.svg": zi,
                "/node_modules/language-icons/icons/lb.svg": Li,
                "/node_modules/language-icons/icons/lg.svg": qi,
                "/node_modules/language-icons/icons/li.svg": Hi,
                "/node_modules/language-icons/icons/ln.svg": Ui,
                "/node_modules/language-icons/icons/lo.svg": ji,
                "/node_modules/language-icons/icons/lt.svg": Oi,
                "/node_modules/language-icons/icons/lu.svg": Vi,
                "/node_modules/language-icons/icons/lv.svg": Bi,
                "/node_modules/language-icons/icons/mg.svg": Ni,
                "/node_modules/language-icons/icons/mh.svg": Ei,
                "/node_modules/language-icons/icons/mi.svg": Di,
                "/node_modules/language-icons/icons/mk.svg": Ri,
                "/node_modules/language-icons/icons/ml.svg": Mi,
                "/node_modules/language-icons/icons/mn.svg": Ii,
                "/node_modules/language-icons/icons/mr.svg": Ti,
                "/node_modules/language-icons/icons/ms.svg": Pi,
                "/node_modules/language-icons/icons/mt.svg": Si,
                "/node_modules/language-icons/icons/my.svg": Ci,
                "/node_modules/language-icons/icons/na.svg": ki,
                "/node_modules/language-icons/icons/nb.svg": wi,
                "/node_modules/language-icons/icons/nd.svg": _i,
                "/node_modules/language-icons/icons/ne.svg": yi,
                "/node_modules/language-icons/icons/ng.svg": vi,
                "/node_modules/language-icons/icons/nl.svg": fi,
                "/node_modules/language-icons/icons/nn.svg": bi,
                "/node_modules/language-icons/icons/no.svg": Ai,
                "/node_modules/language-icons/icons/nr.svg": pi,
                "/node_modules/language-icons/icons/nv.svg": hi,
                "/node_modules/language-icons/icons/ny.svg": mi,
                "/node_modules/language-icons/icons/oc.svg": gi,
                "/node_modules/language-icons/icons/oj.svg": ui,
                "/node_modules/language-icons/icons/om.svg": di,
                "/node_modules/language-icons/icons/or.svg": ci,
                "/node_modules/language-icons/icons/os.svg": li,
                "/node_modules/language-icons/icons/pa.svg": ri,
                "/node_modules/language-icons/icons/pi.svg": ai,
                "/node_modules/language-icons/icons/pl.svg": ni,
                "/node_modules/language-icons/icons/ps.svg": oi,
                "/node_modules/language-icons/icons/pt.svg": ii,
                "/node_modules/language-icons/icons/qu.svg": ti,
                "/node_modules/language-icons/icons/rm.svg": si,
                "/node_modules/language-icons/icons/rn.svg": ei,
                "/node_modules/language-icons/icons/ro.svg": xt,
                "/node_modules/language-icons/icons/ru.svg": $t,
                "/node_modules/language-icons/icons/rw.svg": Jt,
                "/node_modules/language-icons/icons/sa.svg": Yt,
                "/node_modules/language-icons/icons/sc.svg": Kt,
                "/node_modules/language-icons/icons/sd.svg": Xt,
                "/node_modules/language-icons/icons/se.svg": Zt,
                "/node_modules/language-icons/icons/sg.svg": Qt,
                "/node_modules/language-icons/icons/si.svg": Ft,
                "/node_modules/language-icons/icons/sk.svg": Wt,
                "/node_modules/language-icons/icons/sl.svg": Gt,
                "/node_modules/language-icons/icons/sm.svg": zt,
                "/node_modules/language-icons/icons/sn.svg": Lt,
                "/node_modules/language-icons/icons/so.svg": qt,
                "/node_modules/language-icons/icons/sq.svg": Ht,
                "/node_modules/language-icons/icons/sr.svg": Ut,
                "/node_modules/language-icons/icons/ss.svg": jt,
                "/node_modules/language-icons/icons/st.svg": Ot,
                "/node_modules/language-icons/icons/su.svg": Vt,
                "/node_modules/language-icons/icons/sv.svg": Bt,
                "/node_modules/language-icons/icons/sw.svg": Nt,
                "/node_modules/language-icons/icons/ta.svg": Et,
                "/node_modules/language-icons/icons/te.svg": Dt,
                "/node_modules/language-icons/icons/tg.svg": Rt,
                "/node_modules/language-icons/icons/th.svg": Mt,
                "/node_modules/language-icons/icons/ti.svg": It,
                "/node_modules/language-icons/icons/tk.svg": Tt,
                "/node_modules/language-icons/icons/tl.svg": Pt,
                "/node_modules/language-icons/icons/tn.svg": St,
                "/node_modules/language-icons/icons/to.svg": Ct,
                "/node_modules/language-icons/icons/tr.svg": kt,
                "/node_modules/language-icons/icons/ts.svg": wt,
                "/node_modules/language-icons/icons/tt.svg": _t,
                "/node_modules/language-icons/icons/tw.svg": yt,
                "/node_modules/language-icons/icons/ty.svg": vt,
                "/node_modules/language-icons/icons/ug.svg": ft,
                "/node_modules/language-icons/icons/uk.svg": bt,
                "/node_modules/language-icons/icons/ur.svg": At,
                "/node_modules/language-icons/icons/uz.svg": pt,
                "/node_modules/language-icons/icons/ve.svg": ht,
                "/node_modules/language-icons/icons/vi.svg": mt,
                "/node_modules/language-icons/icons/vo.svg": gt,
                "/node_modules/language-icons/icons/wa.svg": ut,
                "/node_modules/language-icons/icons/wo.svg": dt,
                "/node_modules/language-icons/icons/xh.svg": ct,
                "/node_modules/language-icons/icons/yi.svg": lt,
                "/node_modules/language-icons/icons/yo.svg": rt,
                "/node_modules/language-icons/icons/za.svg": at,
                "/node_modules/language-icons/icons/zh.svg": nt,
                "/node_modules/language-icons/icons/zu.svg": ot
            })[`/node_modules/language-icons/icons/${this.locale.split("-")[0]}.svg`],import.meta.url).href
        }
    },
    data() {
        return {
            isVersionOpen: !1,
            version: re.version,
            locale: this.$i18n.locale,
            locales: $e,
            browser: Je(),
            nodeEnv: "production",
            clickCounter: 0,
            defaultLocale: fe,
            useGameTranslations: !localStorage.getItem("locale-apponly"),
            notification: ""
        }
    },
    methods: {
        ...U(["toggleModal"]),
        announcement() {
            this.user.level === "special-tpi" ? this.toggleModal({
                name: "announcement"
            }) : this.toggleModal({
                name: "update"
            })
        },
        async updateLocale() {
            await Ua(this.locale),
            localStorage.setItem("locale", this.locale),
            this.$i18n.locale = this.locale,
            document.querySelector("html").setAttribute("lang", this.locale),
            this.locale !== this.defaultLocale ? this.notification = "translation" : this.notification === "translation" && (this.notification = "")
        },
        toggleNotification(e="") {
            this.notification === "translation" && !e && localStorage.setItem("locale", this.locale),
            this.notification = e
        },
        toggleTranslation() {
            this.useGameTranslations ? localStorage.removeItem("locale-apponly") : localStorage.setItem("locale-apponly", !0),
            Ua(this.locale, !0)
        }
    },
    mounted() {
        this.locale !== this.defaultLocale && !localStorage.getItem("locale") && this.toggleNotification("translation")
    }
}
  , em = {
    key: 0
}
  , sm = ["href"]
  , tm = {
    key: 1
}
  , im = ["href"]
  , om = {
    key: 0
}
  , nm = {
    class: "button-group"
}
  , am = ["href"]
  , rm = {
    class: "button secondary"
}
  , lm = ["data-tooltip"]
  , cm = {
    class: "version"
}
  , dm = {
    for: "locale"
}
  , um = ["value"]
  , gm = ["src"];
function mm(e, s, t, n, o, i) {
    var h;
    const l = k("font-awesome-icon")
      , g = k("i18n-t")
      , d = k("Timer");
    return r(),
    u("div", {
        id: "version",
        class: _({
            warning: e.newVersions || i.browserOutdated,
            alert: e.newVersions > 1,
            notification: o.notification
        })
    }, [e.appUpdate ? (r(),
    u("span", em, [a("b", null, c(e.$t("version.updating", [e.appUpdate])), 1), s[10] || (s[10] = v("Â  ", -1)), b(l, {
        icon: "exclamation-triangle"
    }), s[11] || (s[11] = a("br", null, null, -1))])) : e.newVersions || i.browserOutdated ? (r(),
    u("a", {
        key: 1,
        onClick: s[0] || (s[0] = m => o.notification = "update"),
        tabindex: "-1"
    }, [b(l, {
        icon: "exclamation-triangle"
    }), v(" " + c(e.$t("version.update")), 1), s[12] || (s[12] = a("br", null, null, -1))])) : A("", !0), o.notification ? (r(),
    u("span", {
        key: 2,
        class: "notification",
        onClick: s[5] || (s[5] = m => i.toggleNotification())
    }, [o.notification === "update" ? (r(),
    u(y, {
        key: 0
    }, [i.browserOutdated ? (r(),
    C(g, {
        key: 0,
        keypath: "version.warning_browser2",
        scope: "global"
    }, {
        default: T( () => [a("b", null, c(e.$t("version.warning_browser")), 1)]),
        _: 1
    })) : A("", !0), e.newVersions ? (r(),
    u(y, {
        key: 1
    }, [b(g, {
        keypath: "version.warning_update2",
        scope: "global"
    }, {
        default: T( () => [a("b", null, c(e.$t("version.warning_update")), 1), a("b", null, c(e.latestVersion), 1)]),
        _: 1
    }), s[13] || (s[13] = a("br", null, null, -1)), i.isApp && e.downloadUrl[0] ? (r(),
    u("a", {
        key: 0,
        class: "button",
        href: e.downloadUrl[0][1],
        target: "_blank"
    }, c(e.$t("version.download", [e.downloadUrl[0][0]])), 9, sm)) : (r(),
    u("span", tm, c(e.$t("version.reload")), 1))], 64)) : A("", !0)], 64)) : o.notification === "translation" ? (r(),
    u(y, {
        key: 1
    }, [v(c(e.$t("version.translation_disclaimer")) + " ", 1), a("p", null, [(r(!0),
    u(y, null, N(o.locales[o.locale].contributors, (m, p) => (r(),
    u(y, {
        key: m
    }, [a("a", {
        href: `https://translation.botc.app/user/${m}/`,
        target: "_blank",
        tabindex: "-1",
        onClick: s[1] || (s[1] = R( () => {}
        , ["stop"]))
    }, c(m), 9, im), v(c(p < o.locales[o.locale].contributors.length - 1 ? ", " : ""), 1)], 64))), 128))]), o.locales[o.locale].isGameTranslation && !o.locales[o.locale].isOfficial ? (r(),
    u("i", om, c(e.$t("version.translation_game")), 1)) : A("", !0), o.locales[o.locale].isGameTranslation ? (r(),
    u("label", {
        key: 1,
        for: "toggle",
        onClick: s[4] || (s[4] = R( () => {}
        , ["stop"]))
    }, [z(a("input", {
        type: "checkbox",
        checked: "checked",
        id: "toggle",
        "onUpdate:modelValue": s[2] || (s[2] = m => o.useGameTranslations = m),
        onChange: s[3] || (s[3] = (...m) => i.toggleTranslation && i.toggleTranslation(...m))
    }, null, 544), [[Ie, o.useGameTranslations]]), b(l, {
        icon: o.useGameTranslations ? "check-circle" : "circle"
    }, null, 8, ["icon"]), v(" " + c(e.$t("version.translation_content")), 1)])) : A("", !0), a("div", nm, [a("a", {
        class: "button primary",
        href: `https://translation.botc.app/projects/botc-app/-/${(h = o.locales[o.locale].link) != null ? h : o.locale}/`,
        target: "_blank",
        tabindex: "-1"
    }, c(e.$t("main-menu.translation")), 9, am), a("div", rm, c(e.$t("common.button_close")), 1)])], 64)) : A("", !0)])) : A("", !0), e.$route.name === "Grimoire" ? (r(),
    u(y, {
        key: 3
    }, [e.grimoire.mode !== "grimoire" || e.vote.nomination || e.isVideoWhisper ? (r(),
    C(d, {
        key: 0
    })) : A("", !0), a("b", {
        class: "phase",
        "data-tooltip": e.$t("version.character_distribution") + ": " + i.characterCount
    }, [!e.game.isRunning || !e.game.history.length ? (r(),
    u(y, {
        key: 0
    }, [v(c(e.$t("grimoire.phases.end")), 1)], 64)) : e.lastPhase ? e.isNight ? (r(),
    u(y, {
        key: 2
    }, [b(l, {
        icon: "cloud-moon"
    }), v(" " + c(e.$t("grimoire.phases.night", Math.ceil(e.game.phase / 2))) + " (" + c(e.$t("version.since", [e.$d(new Date(e.lastPhase.time), {
        hour: "numeric",
        minute: "numeric"
    })])) + ") ", 1)], 64)) : (r(),
    u(y, {
        key: 3
    }, [b(l, {
        icon: "sun"
    }), v(" " + c(e.$t("grimoire.phases.day", e.game.phase / 2)) + " (" + c(e.$t("version.since", [e.$d(new Date(e.lastPhase.time), {
        hour: "numeric",
        minute: "numeric"
    })])) + ") ", 1)], 64)) : (r(),
    u(y, {
        key: 1
    }, [v(c(e.$t("grimoire.phases.start")) + " (" + c(e.$t("version.since", [e.$d(new Date(e.game.history[0].time), {
        hour: "numeric",
        minute: "numeric"
    })])) + ") ", 1)], 64)), s[15] || (s[15] = a("br", null, null, -1)), b(l, {
        icon: "users"
    }), v(" " + c(e.$t("version.players_alive", [e.players.filter(m => {
        var p;
        return !m.isDead && ((p = m.role) == null ? void 0 : p.team) !== "traveller"
    }
    ).length, e.players.filter(m => {
        var p;
        return ((p = m.role) == null ? void 0 : p.team) !== "traveller"
    }
    ).length])) + " ", 1), e.travellers ? (r(),
    u(y, {
        key: 4
    }, [s[14] || (s[14] = a("br", null, null, -1)), b(l, {
        icon: "users",
        class: "traveller"
    }), v(" " + c(e.$t("version.travellers_alive", [e.players.filter(m => {
        var p;
        return !m.isDead && ((p = m.role) == null ? void 0 : p.team) === "traveller"
    }
    ).length, e.travellers])), 1)], 64)) : A("", !0)], 8, lm)], 64)) : A("", !0), a("div", cm, [a("span", {
        onClick: s[6] || (s[6] = (...m) => i.announcement && i.announcement(...m)),
        class: "changelog"
    }, c(e.$t("common.botc_online")) + " " + c(o.nodeEnv !== "production" ? o.nodeEnv : `v${o.version}`) + c(i.isApp ? "-app" : ""), 1), o.locale !== o.defaultLocale ? (r(),
    C(l, {
        key: 0,
        icon: "language",
        class: "language",
        onClick: s[7] || (s[7] = m => o.notification = o.notification === "translation" ? "" : "translation")
    })) : A("", !0), a("label", dm, [z(a("select", {
        name: "locale",
        "onUpdate:modelValue": s[8] || (s[8] = m => o.locale = m),
        id: "locale",
        onChange: s[9] || (s[9] = (...m) => i.updateLocale && i.updateLocale(...m)),
        tabindex: "-1"
    }, [(r(!0),
    u(y, null, N(Object.keys(o.locales), m => (r(),
    u("option", {
        key: `locale-${m}`,
        value: m
    }, c(o.locales[m].name) + " - " + c(m), 9, um))), 128))], 544), [[be, o.locale]]), a("img", {
        src: i.languageIcon,
        alt: ""
    }, null, 8, gm)])])], 2)
}
const hm = O(xg, [["render", mm], ["__scopeId", "data-v-0c8e317b"]])
  , pm = `Version 3.51.1 - Bugfixes

- ð fixed grimoire access request being visible to everyone rather than just the Storyteller

### Version 3.51.0 - Cackling Jacks and Blocking Lists

- ð added Cacklejack (Traveller): "Each day, choose a player: a different player changes character tonight."
- ð added the option to block other users in the app (blocking someone will hide their text messages, cosmetics and video chat and will show you a warning if you are about to be in the same session as them)
- ð streamlined the in-app notifications to use the same visual system
- ð added option to disable game content translations only (for when you prefer to only go half-Pirate)
- ð fixed player count info box in games with more than 15 players (thanks nij101)
- ð fixed "listen to yourself" toggle not being clickable in chat setup screen (thanks @mam8cc)
- ð fixed chroma key causing bluffs and NPC tabs to become black (thanks Ben)
- ð fixed a Townsfolk-only session mistakenly displaying as "Free for everyone" after being created (thanks spaxe2)
- ð moved ability tooltips on NPC selection window around to allow for smaller screen sizes (thanks @seth-tanner)
- ð fixed night signal Grimoire from not rendering properly on smaller screen sizes (thanks @amysoyka)
- ð session with a homebrew script can no longer be created with anything but "Veteran" difficulty (thanks graypockets)
- ð fixed "Create a Session" screen showing a negative ping sometimes (thanks meta5574)
- ð fixed Jinx display on detached character sheet (thanks meta5574)

### Version 3.50.1 - Those bloody Pirates again...

- ð private chat requests can now be sent to players that don't use a microphone
- ð fixed Pirate English causing some bloody troubles everywhere (thanks aggressivelymemeing & @Lowie375)
- ð fixed docked night sheets not overlaying game info on hover (thanks @violetcrestedwren)
- ð fixed "invisible" usernames becoming unchangeable (thanks Davy)

### Version 3.50.0 - Sowing discord

- ð added Pope (Loric): "There are duplicate good characters in play. They might also be bluffs."
- ð added Homebrew support for "good-duplicate" (type: "selection"), which allows a character, when selected, to duplicate any good character in the bag selection and bluff screen
- ð added link to app moderation policy to help & registration screens
- ð added Slovenian interface and Pirate English game content translations
- ð repositioned / resized night order sheet styles will now automatically apply to the other night sheet when switching directly between them
- ð updated night reminder text for most experimental characters to bring them more in line with the base 3 characters
- ð fixed team distribution calculation in Hindu games which end up with fewer than 4 non-Traveller players (thanks @h7x825pw65-sudo & overthemorrow)
- ð fixed long text from stopping seats being revealed in the Grim Reveal (thanks Connor & @tysonnickerson-maker)
- ð fixed condensed character sheet cut-off (thanks @JumboHACKER24)
- ð fixed a bug that caused some glitched app / background behaviour on older browsers (thanks @boofsly, @brendanhuysamenuk-cyber and a few others)
- ð stopped showing banshee hands while the vote was resetting after a player with more than 2 votes has voted (thanks scarlettg0417)
- ð replaced a few untranslated character names with the correct translations (thanks eliderad)
- ð made character tab jinx rendering more consistent with the other characters (thanks meta5574 & mcgigglie)
- ð fixed link to Pirate English translation portal (thanks _sivv)
- ð the resize corner will no longer be visible through ability tooltips on the NPC and bluffs tab (thanks patchworkscribe_3612)
- ð made colorblind mode affect text chat names once more (thanks terra.3)
- ð hovering over the bluffs / NPCs / text / chat tabs will now put them above the right side tabs (thanks @koem)
- ð removed element outline that showed up when pressing Enter on a focused tab (thanks graypockets)
- ð fixed warning / special ability rendering on the night signal pop-up (thanks nij101)
- ð fixed how homebrew icons are shown in the user stats panel (thanks mixcoatl)
- ð fixed night signal recipient selection not adhering to Grimoire offset (thanks @dhillman92)

### Version 3.49.0 - The circle of life

- ð added Hindu (Loric): "The first 4 players to die are immediately reincarnated as Travellers of the same alignment."
- ð added Pirate English interface translations, yarrrr!
- ð added zoom buttons to docked character sheet and separate drag-out button to improve usability
- ð when a night card is sent to multiple players, a Wraith now has a separate chance to be spotted by each of them (thanks brajsf)
- ð added separate Traveller count to bottom right info box, if there are Travellers in play
- ð improved NPC / Bluffs tab behaviour when dragged out
- ð fixed NPC window sizing issue if there's only one Loric / Fabled (thanks eliderad)
- ð fixed night sheet button (thanks eliderad)
- ð fixed grimoire background image tiling when the screen is a narrower aspect ratio than the image
- ð fixed Teensyville scripts being rendered in the wrong position (thanks meta5574)
- ð fixed tabs not being resizable on Safari / standalone Mac (thanks chasedcampus)
- ð fixed character shortcut not working properly when character sheet is opened in a separate window (thanks .prelle)
- ð fixed night signal player selection not adhering to Grimoire offset (thanks clumsyvulcan)
- ð fixed first night tutorial step opening an empty first night tab when dragged out (thanks arif_a)
- ð fixed tab dragging breaking when moving outside the app window (thanks rowlf_)
- ð selecting the "This is your Demon" night card will now include drunk or poisoned Demons (thanks triikstr)

### Version 3.48.1 - Interface Improvements

- ð character and night order sheets can now be dragged around, resized and toggled with a shortcut, as well as zoomed in 3 steps
- ð bluff and NPC tabs can also be resized dynamically now
- ð added translations for Spanish (Mexico)
- ð the grimoire / town square can now be moved left and right for improved layout customization
- ð removed "condensed" mode because the above changes made it redundant
- ð removed Linux standalone version until it supports voice / video chat properly
- ð added a shortcut button that allows a Storyteller to quickly add everyone as a recipient for a night signal message
- ð renamed nomination types "Zookeeper" to "Accusation & defense" and "Baker" to "Nominee focus"
- ð fixed character names being cut off on the character sheet (thanks vedamarie)
- ð fixed jinx sort order on the character sheet (thanks graypockets)
- ð non-waking characters can no longer be forced to show up on the night order, which caused subsequent issues (thanks sirmalle)
- ð character sheets that are opened in a separate browser window will now close properly when leaving the session (thanks amsaynz)
- ð fixed some homebrew image URLs not loading properly (thanks cezzbb)
- ð homebrew special night cards now show their proper name / text (thanks @yoyosource)

### Version 3.48.0 - The app update from outer space

- ð added Zenomancer (Loric): "One or more players each have a goal. When achieved, that player learns a piece of true info."
- ð added Japanese and Galician app interface translations
- ð improved accessibility around Grimoire requests (thanks dontrunoff)
- ð limited Homebrew token top leaves to 6 visible ones (even if the character has more than 6 reminder tokens)
- ð added better plural translation support for Slavic languages
- ð improved player menu position to allow nomination selection even on smaller screens
- ð fixed Korean / Chinese translations rendering vertically inverted on the pop-out character sheet window (thanks hydrodamalis)
- ð fixed a bug with Big Wig nominations not enabling properly (thanks tranquilotl)
- ð fixed an issue with homebrew content that contains special characters (thanks @RProxi)
- ð fixed tooltips on player nameplates and in voice chats (thanks @hursty3000 & darkfox9)
- ð fixed night order not working with off-script travellers and NPCs (thanks graypockets)
- ð running votes will now be paused if you are removed / remove yourself as the Storyteller (thanks graypockets)

### Version 3.47.4 - No more hidden votes

- ð fixed every vote being a hidden vote (thanks to the law degree lobby)

### Version 3.47.3 - More characters and a direct Script Tool link

- ð increased maximum number of characters on a single script to 200
- ð script download button now opens the official script tool with the script
- ð player / ST deafened icon will no longer be shown at night
- ð improved nomination selection for players close to top and bottom of the circle
- ð fixed base 3 character sheet order for real (thanks hegner00)
- ð made player overlay icons screen-reader friendly again (thanks dontrunoff)
- ð fixed character tab pop-out on Windows standalone (thanks @phoebecarr and coxy5)
- ð fixed being unable to select multiple players in some night signal instances (thanks @thmarth and .alanmichael)
- ð fixed being able / unable to remove some NPCs in specific circumstances (thanks tomozbot)
- ð homebrew abilities that contain special characters no longer break the app (thanks akipgamer)
- ð fixed camera disabled icon not using the appropriate color (thanks willow0510)
- ð fixed removing a player from a seat showing the wrong system text log (thanks sebaty5)
- ð fixed loading a script with Big Wig on it not setting the correct nomination type (thanks firecode)`
  , Am = {
    props: {
        name: {
            type: String,
            default: ""
        },
        tabs: {
            type: Array,
            default: () => []
        }
    },
    data() {
        return {
            isInsideClick: !1,
            tabIndex: this.$store.state.grimoire.tabs["modal-" + this.name] < this.tabs.length ? this.$store.state.grimoire.tabs["modal-" + this.name] : 0
        }
    },
    emits: ["close", "tabChange"],
    methods: {
        ...U(["setTab"]),
        close(e) {
            if (e.target.classList.contains("modal-backdrop")) {
                if (this.isInsideClick) {
                    this.isInsideClick = !1;
                    return
                }
                e.stopPropagation(),
                this.$emit("close")
            }
        },
        changeTab(e) {
            this.tabIndex !== e && (this.tabIndex = e,
            this.$emit("tabChange", e))
        }
    },
    mounted() {
        this.$emit("tabChange", this.tabIndex)
    },
    beforeUnmount() {
        document.getElementById("app").focus(),
        this.tabs.length && this.setTab({
            tab: "modal-" + this.name,
            value: this.tabIndex
        })
    }
}
  , bm = {
    key: 0,
    class: "header",
    id: "modal-title"
}
  , fm = {
    key: 1,
    class: "slot",
    id: "modal-description"
}
  , vm = {
    class: "slot tabbed",
    id: "modal-description"
}
  , ym = {
    class: "tabs",
    role: "menubar"
}
  , _m = ["onClick"];
function wm(e, s, t, n, o, i) {
    return r(),
    u("div", {
        class: "modal-backdrop",
        onClick: s[2] || (s[2] = (...l) => i.close && i.close(...l))
    }, [a("div", {
        class: "modal",
        role: "dialog",
        "aria-labelledby": "modal-title",
        "aria-describedby": "modal-description",
        onMousedown: s[0] || (s[0] = l => o.isInsideClick = !0),
        onMouseup: s[1] || (s[1] = l => o.isInsideClick = !1)
    }, [e.$slots.header ? (r(),
    u("div", bm, [Ce(e.$slots, "header")])) : A("", !0), t.tabs.length ? (r(),
    u(y, {
        key: 2
    }, [a("div", vm, [Ce(e.$slots, "tab-" + o.tabIndex)]), a("ul", ym, [(r(!0),
    u(y, null, N(t.tabs, (l, g) => (r(),
    u("li", {
        key: g,
        onClick: d => i.changeTab(g),
        class: _({
            active: o.tabIndex === g
        }),
        role: "button"
    }, c(l), 11, _m))), 128))])], 64)) : (r(),
    u("div", fm, [Ce(e.$slots, "default")]))], 32)])
}
const se = O(Am, [["render", wm]])
  , km = "/assets/gossip-DY4wKAxk.webp"
  , vl = [];
let Te = "";
const Bs = pm.replace(/\r\n/gi, `
`).split(`

### `);
for (; Bs.length > 0 && Bs[0].match(new RegExp(`^Version ${re.version.split(".").slice(0, 2).join("\\.")}`)); ) {
    const [e,s] = Bs.shift().split(`

`);
    vl.unshift(e.replace(/^Version /i, "")),
    Te = (Te ? "" : `new
`) + s + (Te.length ? `
` : "") + Te
}
const le = {};
let He = !1;
Te && Te.split(`
`).forEach(e => {
    var s;
    if (e === "new") {
        He = !0;
        return
    }
    switch ((s = e.match(/^- (.) /u)) == null ? void 0 : s[1]) {
    case "ð":
        le.features || (le.features = []),
        le.features.push({
            line: e.substring(4),
            bold: He
        });
        break;
    case "ð":
        le.changes || (le.changes = []),
        le.changes.push({
            line: e.substring(4),
            bold: He
        });
        break;
    case "ð":
        le.bugs || (le.bugs = []),
        le.bugs.push({
            line: e.substring(4),
            bold: He
        });
        break;
    default:
        le.other || (le.other = []),
        le.other.push({
            line: e.substring(4),
            bold: He
        });
        break
    }
}
);
const Cm = {
    components: {
        Modal: se
    },
    computed: M(["modal", "errors", "session", "chat"]),
    methods: {
        ...U(["toggleModal"]),
        closeModal() {
            this.chat.isNotAllowed && this.$store.commit("chat/toggleNotAllowed", !1),
            this.toggleModal(this.modal)
        }
    },
    data() {
        return {
            version: re.version,
            categories: {
                features: "ð " + this.$t("modals.update.feature"),
                changes: "ð " + this.$t("modals.update.general"),
                bugs: "ð " + this.$t("modals.update.bugfix"),
                other: this.$t("modals.update.other")
            },
            updated: le,
            titles: vl
        }
    }
}
  , Sm = {
    class: "content"
}
  , Pm = ["href"]
  , Tm = {
    class: "category"
};
function Im(e, s, t, n, o, i) {
    const l = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "update" ? (r(),
        C(l, {
            key: 0,
            class: "update",
            onClose: i.closeModal
        }, {
            default: T( () => [a("div", Sm, [a("aside", null, [a("div", null, [a("h3", null, c(e.$t("modals.update.title")), 1), (r(!0),
            u(y, null, N(o.titles, (g, d) => (r(),
            u("a", {
                key: d,
                tabindex: "-1",
                href: `https://github.com/ThePandemoniumInstitute/botc-release/releases/tag/v${g.match(/^(\d+\.\d+\.\d+)/)[1]}`,
                target: "_blank"
            }, c(g), 9, Pm))), 128))]), s[1] || (s[1] = a("img", {
                src: km,
                alt: "Announcement"
            }, null, -1)), a("div", {
                class: "button",
                role: "button",
                onClick: s[0] || (s[0] = (...g) => i.closeModal && i.closeModal(...g))
            }, c(e.$t("common.button_close")), 1)]), a("section", null, [(r(!0),
            u(y, null, N(o.updated, (g, d) => (r(),
            u("ul", {
                key: d
            }, [a("li", Tm, c(o.categories[d]), 1), (r(!0),
            u(y, null, N(g, ({line: h, bold: m}, p) => (r(),
            u("li", {
                key: p,
                class: _({
                    bold: m
                })
            }, c(h), 3))), 128))]))), 128))])])]),
            _: 1
        }, 8, ["onClose"])) : A("", !0)]),
        _: 1
    })
}
const Mm = O(Cm, [["render", Im], ["__scopeId", "data-v-7f7a2d3d"]])
  , La = async () => {
    var e;
    if (window.__TAURI__) {
        const s = await Wd()
          , t = await s.isFullscreen();
        await s.setFullscreen(!t)
    } else
        try {
            document.fullscreenElement ? document.exitFullscreen && await document.exitFullscreen() : (e = document.documentElement) != null && e.requestFullscreen && await document.documentElement.requestFullscreen()
        } catch {}
}
  , za = document.createElement("textarea")
  , Rm = e => (za.textContent = e,
za.innerHTML)
  , Ga = async e => {
    var t, n;
    if (!((n = (t = window.crypto) == null ? void 0 : t.subtle) != null && n.digest))
        return "";
    const s = await window.crypto.subtle.digest("SHA-256", new TextEncoder().encode(e));
    return Array.from(new Uint8Array(s)).map(o => o.toString(16).padStart(2, "0")).join("")
}
  , Rn = {
    components: {
        UpdateModal: Mm,
        Version: hm,
        Sounds: jg,
        MainMenu: bg,
        Gradients: wg
    },
    computed: {
        ...M(["grimoire", "session", "modal", "chat", "settings"]),
        ...M("user", ["user"]),
        ...D("user", ["isStoryteller"])
    },
    data() {
        return {
            shortcuts: {},
            history: [],
            pushToTalkGraceTimer: null,
            touchX: 0,
            touchY: 0,
            isFocused: document.hasFocus()
        }
    },
    provide() {
        return {
            isApp: !!window.__TAURI__,
            isTouchDevice: window.matchMedia("(hover: none)").matches,
            bindShortcut: (e, s, t="Grimoire") => {
                this.shortcuts[t] || (this.shortcuts[t] = {}),
                this.shortcuts[t][e] = s
            }
            ,
            triggerShortcut: e => {
                this.keydown({
                    key: e,
                    preventDefault: () => {}
                })
            }
            ,
            unbindShortcut: (e, s="Grimoire") => {
                this.shortcuts[s] || (this.shortcuts[s] = {}),
                delete this.shortcuts[s][e]
            }
            ,
            renderReminderHTML: e => Rm(String(e)).replace(/\*(.*?)\*/gi, "<b>$1</b>").replace(/:reminder:/gi, '<i class="reminder-token"></i>'),
            getSHA256Hash: Ga,
            toggleFullscreen: La
        }
    },
    methods: {
        ...U(["setMenuOpen", "toggleModal"]),
        closeMenu() {
            this.grimoire.menuOpen && this.setMenuOpen()
        },
        paste(e) {
            var s;
            if ((s = this.shortcuts.Grimoire) != null && s.paste) {
                const t = (e.clipboardData || window.clipboardData).getData("text");
                this.shortcuts.Grimoire.paste(t)
            }
        },
        keyup(e) {
            const {key: s} = e
              , {keybindings: t} = this.$store.state;
            if (s === void 0 || !s.toLocaleLowerCase)
                return;
            const n = s.toLocaleLowerCase();
            if (this.chat.audio.isPushToTalk && t.toggleAudioMuted.includes(n)) {
                if (this.chat.audio.isMuted)
                    return;
                this.pushToTalkGraceTimer && clearTimeout(this.pushToTalkGraceTimer),
                this.pushToTalkGraceTimer = setTimeout( () => {
                    this.$store.commit("chat/toggleAudioMuted", !0)
                }
                , 250),
                e == null || e.preventDefault()
            }
        },
        async keydown(e) {
            var d, h, m, p, f, P;
            const {key: s, ctrlKey: t, metaKey: n, altKey: o, target: i} = e
              , {keybindings: l} = this.$store.state;
            if (s === void 0 || !s.toLocaleLowerCase)
                return;
            const g = s.toLocaleLowerCase();
            if (!["select", "input", "textarea"].includes((d = i == null ? void 0 : i.tagName) == null ? void 0 : d.toLowerCase())) {
                if (g === "escape" && this.modal.name) {
                    if (this.modal.name === "dialogue" && ((h = this.modal.params) != null && h.isImportant))
                        return;
                    this.toggleModal(Object.assign({}, this.modal, {
                        name: ""
                    })),
                    document.getElementById("app").focus(),
                    e == null || e.preventDefault()
                }
                if (l.toggleFullscreen.includes(g))
                    try {
                        await La()
                    } catch {}
                if (this.$route.name === "Grimoire") {
                    if (this.chat.audio.isPushToTalk && this.$store.state.keybindings.toggleAudioMuted.includes(s.toLocaleLowerCase())) {
                        if (this.pushToTalkGraceTimer && clearTimeout(this.pushToTalkGraceTimer),
                        this.pushToTalkGraceTimer = null,
                        !this.chat.audio.isMuted)
                            return;
                        this.$store.commit("chat/toggleAudioMuted", !1),
                        e == null || e.preventDefault()
                    }
                    if (this.session.hook.name === "reveal-grimoire" && ![...l.toggleAudioMuted, ...l.toggleVideoMuted, ...l.modalSettings, ...l.modalShortcuts, ...l.leaveSession, ...l.toggleFullscreen, ...l.toggleAudioDeafened].includes(g) || this.grimoire.loadingState || t && g !== "control" || n && g !== "meta" || o && g !== "alt")
                        return;
                    if ((m = this.shortcuts.Grimoire) != null && m[g])
                        (p = this.shortcuts.Grimoire) == null || p[g](w => w(e)),
                        e == null || e.preventDefault();
                    else if (Object.values(l).flat().includes(g)) {
                        for (let w in l)
                            if (l[w].includes(g) && ((f = this.shortcuts.Grimoire) != null && f[w]) && ((P = this.shortcuts.Grimoire) == null ? void 0 : P[w](j => j(e))))
                                break;
                        e == null || e.preventDefault()
                    }
                    this.session.sessionId && (this.history.unshift(g),
                    this.history.splice(6),
                    await Ga(this.history.join(";")) === this.$store.state.session.code && this.$store.dispatch("openDialogue", {
                        type: "prompt",
                        title: "Welcome to the Royal Court",
                        placeholder: "Answer",
                        text: "Who shall we see today?",
                        minlength: 2,
                        maxlength: 50
                    }).then(B => {
                        this.$store.commit("session/togglePowerful", B)
                    }
                    ).catch( () => {}
                    ))
                } else if (this.shortcuts[this.$route.name]) {
                    if (t && g !== "control" || n && g !== "meta" || o && g !== "alt")
                        return;
                    if (this.shortcuts[this.$route.name][g])
                        this.shortcuts[this.$route.name][g](w => w(e)),
                        e == null || e.preventDefault();
                    else if (Object.values(l).flat().includes(g)) {
                        for (let w in l)
                            if (l[w].includes(g) && this.shortcuts[this.$route.name][w] && this.shortcuts[this.$route.name][w](j => j(e)))
                                break;
                        e == null || e.preventDefault()
                    }
                }
            }
        },
        touchstart(e) {
            var s, t;
            this.touchX = (s = e == null ? void 0 : e.touches[0]) == null ? void 0 : s.clientX,
            this.touchY = (t = e == null ? void 0 : e.touches[0]) == null ? void 0 : t.clientY
        },
        touchend(e) {
            var i, l, g, d, h, m, p, f, P, w, B, j, V, S;
            if (!this.touchX || !this.touchY || !this.$store.state.settings.game.isTouchSupport)
                return;
            const s = (i = e == null ? void 0 : e.changedTouches[0]) == null ? void 0 : i.clientX
              , t = (l = e == null ? void 0 : e.changedTouches[0]) == null ? void 0 : l.clientY
              , n = this.touchX - s
              , o = this.touchY - t;
            Math.abs(n) > Math.abs(o) ? n < -50 ? (d = (g = this.shortcuts[this.$route.name]) == null ? void 0 : g.swipeRight) == null || d.call(g, E => E(e)) : n > 50 && ((m = (h = this.shortcuts[this.$route.name]) == null ? void 0 : h.swipeLeft) == null || m.call(h, E => E(e))) : o < -50 ? ((f = (p = this.shortcuts[this.$route.name]) == null ? void 0 : p.swipeDown) == null || f.call(p, E => E(e)),
            (w = (P = this.shortcuts[this.$route.name]) == null ? void 0 : P.swipeDown2) == null || w.call(P, E => E(e))) : o > 50 && ((j = (B = this.shortcuts[this.$route.name]) == null ? void 0 : B.swipeUp) == null || j.call(B, E => E(e)),
            (S = (V = this.shortcuts[this.$route.name]) == null ? void 0 : V.swipeUp2) == null || S.call(V, E => E(e)))
        }
    }
}
  , Wa = () => {
    he(e => ({
        v4813c844: e.settings.general.colorblind
    }))
}
  , Fa = Rn.setup;
Rn.setup = Fa ? (e, s) => (Wa(),
Fa(e, s)) : Wa;
const Dm = {
    key: 0,
    id: "loading"
};
function Em(e, s, t, n, o, i) {
    const l = k("router-view")
      , g = k("MainMenu")
      , d = k("Version")
      , h = k("Gradients")
      , m = k("Sounds")
      , p = k("UpdateModal");
    return r(),
    u("div", {
        id: "app",
        onKeyup: s[0] || (s[0] = (...f) => i.keyup && i.keyup(...f)),
        onKeydown: s[1] || (s[1] = (...f) => i.keydown && i.keydown(...f)),
        onFocus: s[2] || (s[2] = f => o.isFocused = !0),
        onBlur: s[3] || (s[3] = f => o.isFocused = !1),
        onPaste: s[4] || (s[4] = (...f) => i.paste && i.paste(...f)),
        onTouchstartPassive: s[5] || (s[5] = (...f) => i.touchstart && i.touchstart(...f)),
        onTouchendPassive: s[6] || (s[6] = (...f) => i.touchend && i.touchend(...f)),
        onClick: s[7] || (s[7] = f => i.closeMenu()),
        tabindex: "0",
        class: _({
            "animations-disabled": e.settings.general.isAnimationsDisabled,
            "cosmetics-disabled": e.settings.general.isCosmeticsDisabled,
            colorblind: e.settings.general.colorblind,
            ["hook-" + e.session.hook.name]: e.session.hook.name,
            ["page-" + e.$route.name]: e.$route.name,
            "no-focus": !o.isFocused,
            "chroma-key": e.settings.advanced.chromaKey
        })
    }, [b(l), e.$route.name === "Grimoire" ? (r(),
    C(g, {
        key: 0
    })) : A("", !0), b(L, {
        name: "fade"
    }, {
        default: T( () => [e.grimoire.loadingState && ["Grimoire", "Lobby"].includes(e.$route.name) ? (r(),
        u("div", Dm, [s[8] || (s[8] = a("div", {
            class: "loader"
        }, null, -1)), v(" Loading " + c(e.grimoire.loadingState) + "... ", 1)])) : A("", !0)]),
        _: 1
    }), b(d), b(h), b(m), b(p)], 34)
}
const Nm = O(Rn, [["render", Em]])
  , Gs = "/assets/card-ability-kX4HjSAD.webp"
  , Ws = "/assets/card-bluffs-BlNMxv_e.webp"
  , Fs = "/assets/card-choice-DVpXheLk.webp"
  , Qs = "/assets/card-claim-Dxgc2vOa.webp"
  , Zs = "/assets/card-demon-C2p1QXYu.webp"
  , Xs = "/assets/card-minions-CQx0IJE3.webp"
  , Ks = "/assets/card-selected-DQML9A6z.webp"
  , Ys = "/assets/card-special-BYfhRwYM.webp"
  , Js = "/assets/card-you-qog5FTO7.webp"
  , Qa = "/assets/custom-CLofFTEi.webp"
  , Za = "data:image/webp;base64,UklGRuIOAABXRUJQVlA4WAoAAAAwAAAAgQAAgQAASUNDUDACAAAAAAIwQURCRQIQAABtbnRyUkdCIFhZWiAHzwAGAAMAAAAAAABhY3NwQVBQTAAAAABub25lAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLUFEQkUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApjcHJ0AAAA/AAAADJkZXNjAAABMAAAAGt3dHB0AAABnAAAABRia3B0AAABsAAAABRyVFJDAAABxAAAAA5nVFJDAAAB1AAAAA5iVFJDAAAB5AAAAA5yWFlaAAAB9AAAABRnWFlaAAACCAAAABRiWFlaAAACHAAAABR0ZXh0AAAAAENvcHlyaWdodCAxOTk5IEFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkAAAAZGVzYwAAAAAAAAARQWRvYmUgUkdCICgxOTk4KQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAGN1cnYAAAAAAAAAAQIzAABjdXJ2AAAAAAAAAAECMwAAY3VydgAAAAAAAAABAjMAAFhZWiAAAAAAAACcGAAAT6UAAAT8WFlaIAAAAAAAADSNAACgLAAAD5VYWVogAAAAAAAAJjEAABAvAAC+nEFMUEhtAgAAAZCj7fPaRrMY1CkWrefRAWwfIJxSqXUOO+dYkmXo3IfB0IXhBIZcQK2rWbY0/9/MYhERktxIciSJNlrtLTMrcl9A/4U044eV1un9Qzrh75qkD/enrUroz+gw50cJ5yiJ/Dl05YQFSsrAXlTPWajz6gtMS20Wrb2EJ+yzeP0Qy2qHndRZxVHYZWftFkDE7LQYQemSHXdZQvmq4i96hwzRoedQMGCQBoEzmwzUpiM1hqrmRIPBajjQZLiaLl61v3xgyD64+4d0/jsBwxbIrcADXANPyh4Dt+d+E9SyPRYZvKKEM3RnAhKGL8nNZwX5ee1osJP3cYBVtJrPsQ7HuWyxkrby6GjRyWGJ1bSUXVuPdmYvWVEvs3qnybuMHrOqHmecTelSFtgLde6Lc6ysuUwTGm0KWUTaRBm/o/0bs6yu2dyHMpVHtFCfcLptfbbFxwQqhggdfTrT3epzO91In9F0qT7pdBN9JtOxwv4msuAPWbASWrAbWLAjWnAqsOBkZMHp0IITsgVPCRY8KRnwtGjBE7MFUwMLJicGTI8smKBZMEU0YJJqwTTZgIm6BbcKBtysWHC7ZMANmwW3jAbctFpw22zAjbuF/+uAiuiKEijGFpNMe8j2SIg3wDXwpFCAKyC5NlFtkmQfMH0g2ZqgYwLtL02Sr4GmQS6qYamRmzax/iFXBTBL4iAgd3mHGA49clqMsQm6rnTp2mWJAIpdfxWjwq47uwWCadXRQ1xnlaAK+/L6IcG1JPxE314iyF5Uz6WcV18QbmWRx5ikTODN+VGubyWRP0cqmvHDSuv0/iH94Vpukj7cn7YqoT9D/4NEAFZQOCAWCgAAUC8AnQEqggCCAD5tMpRGpCMiISpVi1iADYloCHABkYRN/ZvyA7ojQfieSa46kgvHOfvPZ/T/UZ+k/+X7gHjIfqr7jvMB+33rJeij/F+oB/Yv+d1pvoIeXH7JX9f/5H7ee1RmrP949EXgV+0x7zkmJTgBex94/AB3b04lV3Na8oX7fvmmSYyBS73N3cvO41DwvTRSeHQ3Uxc3PufVHA1mNYM4uijFlM18jfxm/bwdTCDWKyr8ciG7ol8+/hhUbpejmONDiqztMd7vmMvzds9iL1KQYlXJ9+kjaqF/ujNu8l7q4VVEX0u2wHbQtJHrLqYKTMbTWYUY2QxxaKF3yWW2p9flOUy7j84EI9VIItjSrgQoNtFNy0z6ulmAdZiMEqxGZExR1/+N8UMYgyTsMQGIHRzY3kiIAaBkZkHuiOeBZAZjE4S7UO8xc6jEGIA3/lQeekKFGQAJhzv9dzIb8trf/1FrBErYdH5DyC+7qfdDd2JboPCpnv/gCC0OGKAfkRe8dfV4AP7k3RMBdTmiyXRT4HAcTqiorC3iLaY7q0fHPykXA/mNz4NDD0NOQolhhp/0f7Woqg5vfcSlAPNvMRSodRp+lULlyn8N+HIyVDYBPKZ+s/wUF4I4T5HpSK3coG4lljXMGyO/Zzv6FV2SKvFwMIPV9gApc/rTu5nUeabT8/uDnkk/IrJFafS/WvcZnLcvUVgkea/0IqQF9v+DtPBJglqY5kShf6kxqo23N/+bOU9XbBlPJ0qYttZhbLHdRztiujBBBW00ThohaAsLAzengpQ7IMkYCzEINWqDP1FC1WyzqXoRu4Ieu0jFqJ3TjoSyRHt+JDfl7Sws9EEEIM0mDTLGFM3DoeVForOX6CfRWbQIxxV3QDXH9ayVTh7O/I2d76BPuSN182L2w8vJcOOvLP/AQ9Ze8/XVSyOP8s3taSH5HEshF/kChKKnRBQLgYEfwi4RAVoCqspAqGHOA1+V01OIpqt552/b/wTmphkHrxCfK3CwMQR4RJhaMzYeIyGoRTUFEbF5eUNZ+hKiNnWHB67Pr3a7K+j3Nqek2BgF0MNLTZ70otioIZNZtX534aDwObKZi2dcDeR5f1CWHGmJHoG8XX7xlHO8fEC9v6CNLuphlWpIWb4UTfOcQgQXnYGUBMBGOUQJhrPFueUSrckxK7HfvQpvFuzyn4u3SVqC6wDy8s3lAtrNsXAU2BCp5NnpxU1PB1bK2T4XPcvjQkH1Q44M8+StlNv7fhqLZmpU8vkTN+WTWfMiE2uQPorrrGUFTClFQ5Q657QqjOw5RDQaXe5NbluYYC0JzNbHUG00IV4ORvbcst05DXT8Wl+cGoJn0cwFdFjxOxTVZThwVzcZ4AFGLlv73QMnThliyRHBB6JR7hvcX4idWtz9tCE0wM5/lyWELmHBt1xB2bGOLdqXeVFvOQ/Td+16yQ/GVjD5hhm7By0aqmp2KNhHyIVGODQXq9SPWeN7B4ZfbtikvXRZd2eMBKv7GA1ImKpklx33sUdAwAbfSFH+UglZW/OvC63llFHMN7oHmE+ws3Oql84g/i03UDfAvHQBVbt7rPKGmfkviIiBc2OlHh6vZoVYRsb6bvYYa5xAxjWqKAWQQLsMn7YbIf6KOOb6PSFdppOburIY/6BE0SCwRKL2qDxcn1fTHav7V4a2+q8NC/idoRVu09yCgd+cfRBsiOkFmHWn4GtqpzgIcs/TkbU2hjsgDNTBHn5xeRg6h0y1Itwq9gh89vxGt0mT12giXLfLofOM0ZpmJflgLS5vt/qxmaXs5Za1qaJPOsf4noGZsmkC3q2hoMZp/EBM9gRdgdVCFfifdTsNfTf4WLM4tWet61HJwtu6YpANlvj5fp3cF00iWMbCK2xCQ7aSHktRpFKUggUYjHPEA1bZxEycXw4MbNsiy4W0dojJXQobTJAydRU7Ns/z/Hbai4u5lnHrGtwGKAiDXoEEdRiXPITiA1JY6Mkcb8u3CNS/36c4sS3dqqNAtZmq6vRId/SsvILgbGCf8ngdAIbfwvBVuW9k1T0IJLXDbQ4l6QIexHKQCQbHp7U8RiMvEDtv5EjlcdF/Y7HkRoZYVn/N5rwLWqlBlxxLChFW+Nd/Qc//AXJDUgzqEzEy05Ypx63nqKcgjKL9LTRp+Jy+ScxwzevGvAeEcbYjrNOb/s+GopGncss0Le+xdU9bYN4iO/px9e63b4AiGe50SQnMf98sSZ3XilT5NkDZImfvix//ICkm+rS+Lj6mVB/WXA02YCl1+ASjUUCV/13MxXS+jU5AonNcQ5pM6CYr7MUCLOrU0C81J7BSoO7GH8RbOXN6SbZw23ailNgCf1WDaNl2SvHV3Xm3qrmUDzPgl+6hV2ZSgFwRf96GQa57W8QIPgWPOBQRBSH+Jt1F+vGOh0oSDMJKA0RkyhnXteG+xuF8vfflP3SSTHwTSVYE/WXkHjlyL53VxFRLICYc6Un/+KZWOVqf9hx5wFMx3kel0rUlay3zAsf5Zo0tF20y0c3QnIuwvHC8rbSRZzr11zBk226NxG/7g/6PNkSW4nIcHZL4gImR6XTq4u4riyuci8005YUX56PvXrVu8ynjSHktan87aqH0dqL+ysH8k5FNxs20awfTPXj26/mjod3hjJqJ8uWsnh24uKnDnlnf85AzCg5+M9/t7TzlPUGNn0Bsc3ubvV8TZkUSf+02GQkHFB5tE00Ab1vxKjiwQn0n7y/jsUctD2XzjN0eTiupxNHomaSS8i038t1lcugziDcunrBTNV/VcjA/w3Wq1WyhKxoEEOaxupL4h9nLX5Yxz6xVyBYYse7u2GewmH3RsbdfwdQzQ+uhmTL/hGr+/nh+WsEDeBmoFhP4Iu0XMVuZkjy2zN5r+rYoAxees9Fo/oAFlvPntjCQlacp9UfdHw622NmAKlmrFFnvkP8UT75JSr+rD1xz0ulVitqh/E2bToBB1qo1WGTCldPuYwiRhmMagV0/A5na9QWxUcSEf1z3qCNrTZ8CToFPFBlZypn1kPIZuHhgMDceGCzkWYlM2JN9lPnnxkbMb7Twxx3Rn3gjzcF7cPb0rESmz1a48YQDw8vTdh71GDS3Xej9cKj/VI/s9Ipr7H0jBoODMWSzz0tT7FvK4VCGIHVJWBfj3ZgP41x+9ux+y2dEPSCgm1JuRdFymg+NmCzXeh+e+z2D/zVHGNJIksSt0AEcspFNyXMSJEVM2rXKnCJ3l2OTAuGK3jv8se7vbeNq6jnVzFa0I6Z4FHLJDiFYuTzcLtU2QGpyd7HsJxgugT5Ds6mz6Biez3qDeRx9IIzhnSKToGf58JQcP5oZrvbKdczZv7qRyssosLN9CCkfaCE3t7q17SGTabsPEQtPo+OlvefS3JaMAvqla2WMHWhsMEfrb//IY//kcP//Hk4U+dIBvmohty/lfdpwdJxg+rR4ZQwAAAAAAAA="
  , Xa = "/assets/demon-info-B8oHUaMT.webp"
  , Ka = "/assets/demon_e-BE73nmRM.webp"
  , Ya = "/assets/demon_g-CSs6ZD66.webp"
  , Ja = "/assets/dusk-CLdDXnQC.webp"
  , $a = "/assets/evil-CDY3e2Qm.webp"
  , xa = "/assets/fabled-WyWuPk8w.webp"
  , er = "/assets/good-D9wGdnv9.webp"
  , sr = "/assets/loric-DAp9AMZR.webp"
  , tr = "/assets/minion-info-5qfuy8Qq.webp"
  , ir = "/assets/minion_e-lDFo-tEX.webp"
  , or = "/assets/minion_g-Cgm5WnSR.webp"
  , nr = "/assets/outsider_e-CgWWsKPC.webp"
  , ar = "/assets/outsider_g-BzhBt4on.webp"
  , rr = "/assets/townsfolk_e-CHxn-dgu.webp"
  , lr = "/assets/townsfolk_g-CKaS3yKc.webp"
  , cr = "/assets/traveller-CmR1gFU-.webp"
  , dr = "/assets/traveller_e-ezMTv16C.webp"
  , ur = "/assets/traveller_g-BNxDoGo0.webp"
  , gr = "/assets/x-CjTHptyP.webp"
  , Bm = "/assets/apprentice-Dq5aGiYi.webp"
  , Vm = "/assets/apprentice_e-BEpvFWvS.webp"
  , Om = "/assets/apprentice_g-qVS2q4bN.webp"
  , jm = "/assets/assassin_e-BDitHnVO.webp"
  , Um = "/assets/assassin_g-D_zJwNaF.webp"
  , Hm = "/assets/bishop-LYgE69Ju.webp"
  , qm = "/assets/bishop_e-CvwvjoUI.webp"
  , Lm = "/assets/bishop_g-DdZW0SpA.webp"
  , zm = "/assets/chambermaid_e-CdqkTS11.webp"
  , Gm = "/assets/chambermaid_g-DAtPnmSz.webp"
  , Wm = "/assets/courtier_e-DxjU0rGy.webp"
  , Fm = "/assets/courtier_g-8Fhu5KML.webp"
  , Qm = "/assets/devilsadvocate_e-6olcm7Cx.webp"
  , Zm = "/assets/devilsadvocate_g-DeyJHzxG.webp"
  , Xm = "/assets/exorcist_e-DoXc6R_z.webp"
  , Km = "/assets/exorcist_g-CiIkE1hM.webp"
  , Ym = "/assets/fool_e-CdlNFIsk.webp"
  , Jm = "/assets/fool_g-C-vzA630.webp"
  , $m = "/assets/gambler_e-Co0D5NyD.webp"
  , xm = "/assets/gambler_g-BJg931OP.webp"
  , eh = "/assets/godfather_e-CszxqtFl.webp"
  , sh = "/assets/godfather_g-BHOpUHNN.webp"
  , th = "/assets/goon_e-DmCcVOv-.webp"
  , ih = "/assets/goon_g-qCN1CxKh.webp"
  , oh = "/assets/gossip_e-DKOgldGS.webp"
  , nh = "/assets/gossip_g-0mo_0qnq.webp"
  , ah = "/assets/grandmother_e-BLCIA5TL.webp"
  , rh = "/assets/grandmother_g-CjEyeFLi.webp"
  , lh = "/assets/innkeeper_e-dzanyuqI.webp"
  , ch = "/assets/innkeeper_g-B_YjhWTM.webp"
  , dh = "/assets/judge-Df7wYZLu.webp"
  , uh = "/assets/judge_e-jGAdrE7z.webp"
  , gh = "/assets/judge_g-CJbFZ44x.webp"
  , mh = "/assets/lunatic_e-D53Boxpa.webp"
  , hh = "/assets/lunatic_g-Bz2ai2Da.webp"
  , ph = "/assets/mastermind_e-lwTDvV6G.webp"
  , Ah = "/assets/mastermind_g-BzBbXNuB.webp"
  , bh = "/assets/matron-D4Vegu5w.webp"
  , fh = "/assets/matron_e-i60IfjWL.webp"
  , vh = "/assets/matron_g-faTHHRCk.webp"
  , yh = "/assets/minstrel_e-Cv94nSeJ.webp"
  , _h = "/assets/minstrel_g-M5EHa7zy.webp"
  , wh = "/assets/moonchild_e-D-P3dKVK.webp"
  , kh = "/assets/moonchild_g-DKURQEzF.webp"
  , Ch = "/assets/pacifist_e-BDyZFmeQ.webp"
  , Sh = "/assets/pacifist_g-DAkM1DME.webp"
  , Ph = "/assets/po_e-BkxsM_xT.webp"
  , Th = "/assets/po_g-blqsHHpB.webp"
  , Ih = "/assets/professor_e-BpuIeGol.webp"
  , Mh = "/assets/professor_g-h2X7rvhv.webp"
  , Rh = "/assets/pukka_e-CmZzVHPM.webp"
  , Dh = "/assets/pukka_g-D7il5SFF.webp"
  , Eh = "/assets/sailor_e-DfZBdaxk.webp"
  , Nh = "/assets/sailor_g-MdYxQ8zf.webp"
  , Bh = "/assets/shabaloth_e-DsCO_Txn.webp"
  , Vh = "/assets/shabaloth_g-BUwNFN-9.webp"
  , Oh = "/assets/tealady_e-CZT3s07k.webp"
  , jh = "/assets/tealady_g-C6X-kuq2.webp"
  , Uh = "/assets/tinker_e-dpPUDqmq.webp"
  , Hh = "/assets/tinker_g-CS4VFqeN.webp"
  , qh = "/assets/voudon-CNiyV0sS.webp"
  , Lh = "/assets/voudon_e-D9qWXIyp.webp"
  , zh = "/assets/voudon_g-D-tbnf_D.webp"
  , Gh = "/assets/zombuul_e-DzySLzke.webp"
  , Wh = "/assets/zombuul_g-B4MTwk5-.webp"
  , Fh = "/assets/acrobat_e-BtZarrxs.webp"
  , Qh = "/assets/acrobat_g-ClaB0uN4.webp"
  , Zh = "/assets/alchemist_e-DjjClIsL.webp"
  , Xh = "/assets/alchemist_g-DtcrLn7_.webp"
  , Kh = "/assets/alhadikhia_e-D6XyyVmp.webp"
  , Yh = "/assets/alhadikhia_g-BggSDiOq.webp"
  , Jh = "/assets/alsaahir_e-DiydqcyG.webp"
  , $h = "/assets/alsaahir_g-CpjMnnMq.webp"
  , xh = "/assets/amnesiac_e-CEaf8TX1.webp"
  , ep = "/assets/amnesiac_g-1rV8CyUl.webp"
  , sp = "/assets/atheist_e-CHiIPNXQ.webp"
  , tp = "/assets/atheist_g-CQOMSxIU.webp"
  , ip = "/assets/balloonist_e-D2ByQ9TA.webp"
  , op = "/assets/balloonist_g-Dlfqy_E5.webp"
  , np = "/assets/banshee_e-8hOn5kSm.webp"
  , ap = "/assets/banshee_g-DJc6lJye.webp"
  , rp = "/assets/boffin_e-Bks9yuea.webp"
  , lp = "/assets/boffin_g-lws0h7cM.webp"
  , cp = "/assets/boomdandy_e-S13eahkU.webp"
  , dp = "/assets/boomdandy_g-DOTwgB8d.webp"
  , up = "/assets/bountyhunter_e-BhBaVK4W.webp"
  , gp = "/assets/bountyhunter_g-BCEfwrWL.webp"
  , mp = "/assets/cacklejack-DLjP2vpy.webp"
  , hp = "/assets/cacklejack_e-DIhvXgOD.webp"
  , pp = "/assets/cacklejack_g-D7trNfLk.webp"
  , Ap = "/assets/cannibal_e-PuVaqnSr.webp"
  , bp = "/assets/cannibal_g-eP3mwaD2.webp"
  , fp = "/assets/choirboy_e-CpElv2uq.webp"
  , vp = "/assets/choirboy_g-Dk5L9Lx_.webp"
  , yp = "/assets/cultleader_e-CXgWMt1A.webp"
  , _p = "/assets/cultleader_g-BYq1_U3R.webp"
  , wp = "/assets/damsel_e-fpsIFV1Z.webp"
  , kp = "/assets/damsel_g-NwMWC09c.webp"
  , Cp = "/assets/engineer_e-LUiXESUv.webp"
  , Sp = "/assets/engineer_g-N-nhrQAt.webp"
  , Pp = "/assets/farmer_e-BKzmeJOt.webp"
  , Tp = "/assets/farmer_g-aC9H7ek9.webp"
  , Ip = "/assets/fearmonger_e-RqyAUnj6.webp"
  , Mp = "/assets/fearmonger_g-WdnstOgT.webp"
  , Rp = "/assets/fisherman_e-Da2Y5IG7.webp"
  , Dp = "/assets/fisherman_g-D4SVpSql.webp"
  , Ep = "/assets/gangster-B_sTmUJn.webp"
  , Np = "/assets/gangster_e-DCxm-xho.webp"
  , Bp = "/assets/gangster_g-CA0UOV4w.webp"
  , Vp = "/assets/general_e-C4rC0GAq.webp"
  , Op = "/assets/general_g-BqvScIJc.webp"
  , jp = "/assets/gnome-BVlHOkWi.webp"
  , Up = "/assets/gnome_e-DTU6TQnj.webp"
  , Hp = "/assets/gnome_g-BpCqTusW.webp"
  , qp = "/assets/goblin_e-5zp-L7ts.webp"
  , Lp = "/assets/goblin_g-Dm3DHjuy.webp"
  , zp = "/assets/golem_e-BMGfUhmK.webp"
  , Gp = "/assets/golem_g-HC-xAVh8.webp"
  , Wp = "/assets/harpy_e-ChKTPCeL.webp"
  , Fp = "/assets/harpy_g-Bp6VIdav.webp"
  , Qp = "/assets/hatter_e-BMVaOuLf.webp"
  , Zp = "/assets/hatter_g-16CFZpfo.webp"
  , Xp = "/assets/heretic_e-EZ4S5b8y.webp"
  , Kp = "/assets/heretic_g-DKZZAGQ8.webp"
  , Yp = "/assets/hermit_e-CXzG3UkT.webp"
  , Jp = "/assets/hermit_g-BT8xmstw.webp"
  , $p = "/assets/highpriestess_e-Cl1icXV6.webp"
  , xp = "/assets/highpriestess_g-D0i0Myk4.webp"
  , eA = "/assets/huntsman_e-CN9kkQNR.webp"
  , sA = "/assets/huntsman_g-1Nv97uqA.webp"
  , tA = "/assets/kazali_e-Bhxi3sLd.webp"
  , iA = "/assets/kazali_g-BZsxV8YM.webp"
  , oA = "/assets/king_e-DuQcqpvF.webp"
  , nA = "/assets/king_g-CEMQO7k3.webp"
  , aA = "/assets/knight_e-DErJZl0C.webp"
  , rA = "/assets/knight_g-rWciCOvN.webp"
  , lA = "/assets/legion_e-DyzBzM4-.webp"
  , cA = "/assets/legion_g-B4S3Jf4H.webp"
  , dA = "/assets/leviathan_e-DvtMvt2q.webp"
  , uA = "/assets/leviathan_g-DnoVSKUH.webp"
  , gA = "/assets/lilmonsta_e-cdABFMUI.webp"
  , mA = "/assets/lilmonsta_g-DD3Lbp-C.webp"
  , hA = "/assets/lleech_e-DzN_r6Yd.webp"
  , pA = "/assets/lleech_g-CSTCwFJh.webp"
  , AA = "/assets/lordoftyphon_e-DbP_44G8.webp"
  , bA = "/assets/lordoftyphon_g-CHKJk_1t.webp"
  , fA = "/assets/lycanthrope_e-n_edx2Mg.webp"
  , vA = "/assets/lycanthrope_g-BGOyDOkb.webp"
  , yA = "/assets/magician_e-BMchX9vJ.webp"
  , _A = "/assets/magician_g-DXz3Ajt8.webp"
  , wA = "/assets/marionette_e-BVmqAITW.webp"
  , kA = "/assets/marionette_g-XJqVphtg.webp"
  , CA = "/assets/mezepheles_e-B7tfHUqC.webp"
  , SA = "/assets/mezepheles_g-DlDB5-jk.webp"
  , PA = "/assets/nightwatchman_e-DcwB8vOD.webp"
  , TA = "/assets/nightwatchman_g-CaasqmRn.webp"
  , IA = "/assets/noble_e-BFJBeujm.webp"
  , MA = "/assets/noble_g-B0vksP8B.webp"
  , RA = "/assets/ogre_e-k2lur_NF.webp"
  , DA = "/assets/ogre_g-B3Q_ybOi.webp"
  , EA = "/assets/ojo_e-BwP-O6LJ.webp"
  , NA = "/assets/ojo_g-jY2iz8BT.webp"
  , BA = "/assets/organgrinder_e-EGmGGCZJ.webp"
  , VA = "/assets/organgrinder_g-WFPK_p_x.webp"
  , OA = "/assets/pixie_e-Dknojw1x.webp"
  , jA = "/assets/pixie_g-B1xIo6Bx.webp"
  , UA = "/assets/plaguedoctor_e-DdVqxJ_g.webp"
  , HA = "/assets/plaguedoctor_g-DUqDeP9l.webp"
  , qA = "/assets/politician_e-CRiP_Thj.webp"
  , LA = "/assets/politician_g-CXCSDrvE.webp"
  , zA = "/assets/poppygrower_e-BPf4mjjt.webp"
  , GA = "/assets/poppygrower_g-BeRDzj2D.webp"
  , WA = "/assets/preacher_e-CjXiLHle.webp"
  , FA = "/assets/preacher_g-CpPb8fQI.webp"
  , QA = "/assets/princess_e-DDQtxFNX.webp"
  , ZA = "/assets/princess_g-BGsIJ79g.webp"
  , XA = "/assets/psychopath_e-CStA2Nbh.webp"
  , KA = "/assets/psychopath_g-YqeVVosZ.webp"
  , YA = "/assets/puzzlemaster_e-BeIjkcep.webp"
  , JA = "/assets/puzzlemaster_g-C7roEIMq.webp"
  , $A = "/assets/riot_e-DKD9x_C8.webp"
  , xA = "/assets/riot_g-B3TDQj13.webp"
  , eb = "/assets/shugenja_e-DQCYsHfD.webp"
  , sb = "/assets/shugenja_g-DAlTPOOn.webp"
  , tb = "/assets/snitch_e-yBlnGiGd.webp"
  , ib = "/assets/snitch_g-D_RNpbcY.webp"
  , ob = "/assets/steward_e-BJUqXXmp.webp"
  , nb = "/assets/steward_g-ASO14Teu.webp"
  , ab = "/assets/summoner_e-Ce5RiRwu.webp"
  , rb = "/assets/summoner_g-B3PLNqgM.webp"
  , lb = "/assets/villageidiot_e-D6AONnUX.webp"
  , cb = "/assets/villageidiot_g-CdZf6FkN.webp"
  , db = "/assets/vizier_e-CR5iBAo1.webp"
  , ub = "/assets/vizier_g-CKNiI-8C.webp"
  , gb = "/assets/widow_e-DGFTy37y.webp"
  , mb = "/assets/widow_g-BMAAZQVw.webp"
  , hb = "/assets/wizard_e-CkOtUevi.webp"
  , pb = "/assets/wizard_g-MV5lMPJf.webp"
  , Ab = "/assets/wraith_e-CRfpOd4V.webp"
  , bb = "/assets/wraith_g-DDErJKaT.webp"
  , fb = "/assets/xaan_e-CkIqEKvE.webp"
  , vb = "/assets/xaan_g-BtfiSj2N.webp"
  , yb = "/assets/yaggababble_e-rNTFzBKi.webp"
  , _b = "/assets/yaggababble_g-CPSh-7bE.webp"
  , wb = "/assets/zealot_e-DoDEvVGE.webp"
  , kb = "/assets/zealot_g-D94u8jin.webp"
  , Cb = "/assets/thebigbarnacle_e-Btw9LPGP.webp"
  , Sb = "/assets/angel-Ayuhu7Hq.webp"
  , Pb = "/assets/buddhist-BTncsaTX.webp"
  , Tb = "/assets/deusexfiasco-C-oc4vaU.webp"
  , Ib = "/assets/djinn-SYNTW9dK.webp"
  , Mb = "/assets/doomsayer-tGT5Bk_R.webp"
  , Rb = "/assets/duchess-CHpS7XMx.webp"
  , Db = "/assets/ferryman-B8DIdDH1.webp"
  , Eb = "/assets/fibbin-MpVC8JVg.webp"
  , Nb = "/assets/fiddler-DlAFGPhN.webp"
  , Bb = "/assets/hellslibrarian-DfbmTvS9.webp"
  , Vb = "/assets/revolutionary-D1FL8eUK.webp"
  , Ob = "/assets/sentinel-BaOVo1PE.webp"
  , jb = "/assets/spiritofivory-8gBtDAQc.webp"
  , Ub = "/assets/toymaker-DnUyVGxn.webp"
  , Hb = "/assets/bigwig-BSza_a7D.webp"
  , qb = "/assets/bootlegger-C4a2M4Iu.webp"
  , Lb = "/assets/gardener-DXERv7Nr.webp"
  , zb = "/assets/hindu-B0td_trJ.webp"
  , Gb = "/assets/pope-CXG7C3oM.webp"
  , Wb = "/assets/stormcatcher-CYdqWLOL.webp"
  , Fb = "/assets/tor-DkO8A08D.webp"
  , Qb = "/assets/zenomancer-C6zEtMpb.webp"
  , Zb = "/assets/artist_e-CpwoIhpV.webp"
  , Xb = "/assets/artist_g-CyRrA7cN.webp"
  , Kb = "/assets/barber_e-BJbMUslE.webp"
  , Yb = "/assets/barber_g-CP7mk8b9.webp"
  , Jb = "/assets/barista-9RUmOrIt.webp"
  , $b = "/assets/barista_e-dh62LsHj.webp"
  , xb = "/assets/barista_g-IYOwLzUb.webp"
  , ef = "/assets/bonecollector-CEqnpjbS.webp"
  , sf = "/assets/bonecollector_e-CIpytarz.webp"
  , tf = "/assets/bonecollector_g-DBlHdEjU.webp"
  , of = "/assets/butcher-COYeTS3-.webp"
  , nf = "/assets/butcher_e-BvZvHE-0.webp"
  , af = "/assets/butcher_g-BqDe54Mz.webp"
  , rf = "/assets/cerenovus_e-ARmVZpWA.webp"
  , lf = "/assets/cerenovus_g-Dks6rbpA.webp"
  , cf = "/assets/clockmaker_e-De0CuxuO.webp"
  , df = "/assets/clockmaker_g-z-gzmkzc.webp"
  , uf = "/assets/deviant-DLaJy91u.webp"
  , gf = "/assets/deviant_e-D0QU1Y2Y.webp"
  , mf = "/assets/deviant_g-Bbk8K2ZR.webp"
  , hf = "/assets/dreamer_e-9zGefVKW.webp"
  , pf = "/assets/dreamer_g-CjKsf0eE.webp"
  , Af = "/assets/eviltwin_e-yPqoVnXw.webp"
  , bf = "/assets/eviltwin_g-DVXfIL-n.webp"
  , ff = "/assets/fanggu_e-6DavSWxL.webp"
  , vf = "/assets/fanggu_g-Dwai_VtD.webp"
  , yf = "/assets/flowergirl_e-DJcVSLWX.webp"
  , _f = "/assets/flowergirl_g-C3oZV2PZ.webp"
  , wf = "/assets/harlot-aJaTZULk.webp"
  , kf = "/assets/harlot_e-CDyE0Kdh.webp"
  , Cf = "/assets/harlot_g-DfGUnLek.webp"
  , Sf = "/assets/juggler_e-BQQDYvGs.webp"
  , Pf = "/assets/juggler_g-CghN7Lp-.webp"
  , Tf = "/assets/klutz_e-C-CdPEop.webp"
  , If = "/assets/klutz_g-DRcV_Rgl.webp"
  , Mf = "/assets/mathematician_e-D-VneyvO.webp"
  , Rf = "/assets/mathematician_g-DiYoQRIl.webp"
  , Df = "/assets/mutant_e-COP-pfTP.webp"
  , Ef = "/assets/mutant_g-CUe36x-i.webp"
  , Nf = "/assets/nodashii_e-Dt8UO6rj.webp"
  , Bf = "/assets/nodashii_g-jI2LJQhL.webp"
  , Vf = "/assets/oracle_e-BgNZAuGG.webp"
  , Of = "/assets/oracle_g-HZdhcJUJ.webp"
  , jf = "/assets/philosopher_e-sc5zSJy2.webp"
  , Uf = "/assets/philosopher_g-DOk3eWqe.webp"
  , Hf = "/assets/pithag_e-C9pUiUjt.webp"
  , qf = "/assets/pithag_g-BJqrMoq3.webp"
  , Lf = "/assets/sage_e-BS8e_Ree.webp"
  , zf = "/assets/sage_g-BQUVfu9h.webp"
  , Gf = "/assets/savant_e-5neUO4oK.webp"
  , Wf = "/assets/savant_g-n6x1YgAZ.webp"
  , Ff = "/assets/seamstress_e-BfBRBNhv.webp"
  , Qf = "/assets/seamstress_g-B4RHsroR.webp"
  , Zf = "/assets/snakecharmer_e-D6CrPRGR.webp"
  , Xf = "/assets/snakecharmer_g-DYwjThVr.webp"
  , Kf = "/assets/sweetheart_e-Bm63hRzw.webp"
  , Yf = "/assets/sweetheart_g-CmqS74DM.webp"
  , Jf = "/assets/towncrier_e-BzUGp1JT.webp"
  , $f = "/assets/towncrier_g-D9dERfO2.webp"
  , xf = "/assets/vigormortis_e-0VJIslwJ.webp"
  , ev = "/assets/vigormortis_g-DP1UY2Jk.webp"
  , sv = "/assets/vortox_e-CI-Cd8aG.webp"
  , tv = "/assets/vortox_g-w20-Mdd8.webp"
  , iv = "/assets/witch_e-D4AS1R1Q.webp"
  , ov = "/assets/witch_g-CI6rg-Tb.webp"
  , nv = "/assets/baron_e-CH4q2C6-.webp"
  , av = "/assets/baron_g-DSaQcH7D.webp"
  , rv = "/assets/beggar-BpoW7fsL.webp"
  , lv = "/assets/beggar_e-C3_HD_se.webp"
  , cv = "/assets/beggar_g-Cn5PE4nQ.webp"
  , dv = "/assets/bureaucrat-C7wkPXRS.webp"
  , uv = "/assets/bureaucrat_e-Bmh-G0_a.webp"
  , gv = "/assets/bureaucrat_g-CyJZqBNe.webp"
  , mv = "/assets/butler_e-C2ho4G2f.webp"
  , hv = "/assets/butler_g-Cr36DpeC.webp"
  , pv = "/assets/chef_e-B3RO5GXN.webp"
  , Av = "/assets/chef_g-C3a3cGeP.webp"
  , bv = "/assets/drunk_e-bRjLB9FX.webp"
  , fv = "/assets/drunk_g--QNmv0ZY.webp"
  , vv = "/assets/empath_e-CWeYvCJ9.webp"
  , yv = "/assets/empath_g-vVEkU0cf.webp"
  , _v = "/assets/fortuneteller_e-BWljoXp7.webp"
  , wv = "/assets/fortuneteller_g-lQQzYvkg.webp"
  , kv = "/assets/gunslinger-wipgFlby.webp"
  , Cv = "/assets/gunslinger_e-DCPdRPrm.webp"
  , Sv = "/assets/gunslinger_g-CKzyQCHC.webp"
  , Pv = "/assets/imp_e-DNpveOPY.webp"
  , Tv = "/assets/imp_g-D-G7pJEY.webp"
  , Iv = "/assets/investigator_e-CR-lRqwj.webp"
  , Mv = "/assets/investigator_g-DWSOiA6Q.webp"
  , Rv = "/assets/librarian_e-DNYbXXNX.webp"
  , Dv = "/assets/librarian_g-Bvwb7yEa.webp"
  , Ev = "/assets/mayor_e-Bc2mKeJ3.webp"
  , Nv = "/assets/mayor_g-BQeJ8Z2E.webp"
  , Bv = "/assets/monk_e-OTOQUKVm.webp"
  , Vv = "/assets/monk_g-D4wNFA-b.webp"
  , Ov = "/assets/poisoner_e-Usf7TcoY.webp"
  , jv = "/assets/poisoner_g-DHNIHhxZ.webp"
  , Uv = "/assets/ravenkeeper_e-Yrx6NFvE.webp"
  , Hv = "/assets/ravenkeeper_g-Bg-yrUxj.webp"
  , qv = "/assets/recluse_e-BUtHsTp3.webp"
  , Lv = "/assets/recluse_g-DxMFqO0r.webp"
  , zv = "/assets/saint_e-CnQBC4rO.webp"
  , Gv = "/assets/saint_g-BU0hab0E.webp"
  , Wv = "/assets/scapegoat-rhlm_MDq.webp"
  , Fv = "/assets/scapegoat_e-BFRtmmYo.webp"
  , Qv = "/assets/scapegoat_g-CrL8fHff.webp"
  , Zv = "/assets/scarletwoman_e-BP5Fv_Ne.webp"
  , Xv = "/assets/scarletwoman_g-CM50XIwn.webp"
  , Kv = "/assets/slayer_e-4pQk5kJR.webp"
  , Yv = "/assets/slayer_g-BO_75tK_.webp"
  , Jv = "/assets/soldier_e-CvaeglsK.webp"
  , $v = "/assets/soldier_g-Baq_oQFs.webp"
  , xv = "/assets/spy_e-DU0tdGGe.webp"
  , ey = "/assets/spy_g-7hnV_AFT.webp"
  , sy = "/assets/thief-DWMyBS_x.webp"
  , ty = "/assets/thief_e-yPbPTo5i.webp"
  , iy = "/assets/thief_g-CPsEnUSQ.webp"
  , oy = "/assets/undertaker_e-DVB8aMO4.webp"
  , ny = "/assets/undertaker_g-sXYI7VS3.webp"
  , ay = "/assets/virgin_e-BB20SAPv.webp"
  , ry = "/assets/virgin_g-DfRSMLSj.webp"
  , ly = "/assets/washerwoman_e-TC3PgT2N.webp"
  , cy = "/assets/washerwoman_g-CVnYjPdR.webp"
  , Be = "/assets/logo-B1iScA0C.webp"
  , Se = "/assets/tpi-CjLIf2nx.webp"
  , Ve = "/assets/sb-DN76BlRu.webp"
  , dy = {
    name: "Banned",
    computed: {
        ...M("user", ["ban"])
    },
    data() {
        return {}
    },
    methods: {}
}
  , uy = {
    id: "banned"
}
  , gy = {
    class: "content"
};
function my(e, s, t, n, o, i) {
    const l = k("i18n-t");
    return r(),
    u("div", uy, [s[8] || (s[8] = a("div", {
        class: "header"
    }, [a("img", {
        src: Be,
        alt: "",
        class: "logo app"
    })], -1)), a("div", gy, [a("h4", null, c(e.$t("pages.banned.title")), 1), a("p", null, [b(l, {
        keypath: "pages.banned.description",
        scope: "global"
    }, {
        default: T( () => [a("b", null, c(e.$t("pages.banned.description_banned")), 1)]),
        _: 1
    }), e.ban.reason ? (r(),
    u(y, {
        key: 0
    }, [s[0] || (s[0] = a("br", null, null, -1)), v(" " + c(e.$t("pages.banned.reason")), 1), s[1] || (s[1] = a("br", null, null, -1)), a("b", null, c(e.ban.reason), 1), s[2] || (s[2] = a("br", null, null, -1))], 64)) : A("", !0), e.ban.expires ? (r(),
    u(y, {
        key: 1
    }, [v(c(e.$t("pages.banned.expires")), 1), s[3] || (s[3] = a("br", null, null, -1)), a("b", null, c(e.$d(new Date(e.ban.expires), {
        year: "numeric",
        month: "long",
        day: "numeric"
    })), 1), s[4] || (s[4] = a("br", null, null, -1)), v(" " + c(e.$t("pages.banned.expires2")), 1)], 64)) : (r(),
    u(y, {
        key: 2
    }, [v(c(e.$t("pages.banned.permanent")), 1)], 64)), s[6] || (s[6] = a("br", null, null, -1)), b(l, {
        keypath: "pages.banned.footer1",
        scope: "global"
    }, {
        default: T( () => [...s[5] || (s[5] = [a("a", {
            href: "mailto:support@botc.app",
            target: "_blank"
        }, "support@botc.app", -1)])]),
        _: 1
    }), s[7] || (s[7] = a("br", null, null, -1)), v(" " + c(e.$t("pages.banned.footer2")) + " ", 1), a("em", null, c(e.$t("pages.banned.footer3")), 1)])]), s[9] || (s[9] = a("div", {
        class: "authors"
    }, [a("img", {
        src: Se,
        alt: "",
        class: "logo tpi"
    }), a("img", {
        src: Ve,
        alt: "",
        class: "logo sb"
    })], -1))])
}
const hy = O(dy, [["render", my], ["__scopeId", "data-v-c29aa538"]])
  , py = {
    name: "Update",
    computed: {
        ...M("user", ["serverTimeDiff", "accessToken"]),
        ...M(["session"]),
        backRoute() {
            return this.accessToken ? this.session.sessionId ? {
                name: "Grimoire"
            } : {
                name: "Lobby"
            } : {
                name: "Login"
            }
        },
        diff() {
            return Math.round(this.serverTimeDiff / 6e4)
        }
    },
    data() {
        return {}
    },
    methods: {}
}
  , Ay = {
    id: "clock"
}
  , by = {
    class: "content"
}
  , fy = {
    href: "https://www.majorgeeks.com/content/page/synchronize_clock_with_an_internet_time_server.html",
    target: "_blank"
};
function vy(e, s, t, n, o, i) {
    const l = k("i18n-t");
    return r(),
    u("div", Ay, [s[1] || (s[1] = a("div", {
        class: "header"
    }, [a("img", {
        src: Be,
        alt: "",
        class: "logo app"
    })], -1)), a("div", by, [a("h4", null, c(e.$t("pages.clock.title")), 1), b(l, {
        keypath: "pages.clock.description",
        tag: "p",
        scope: "global"
    }, {
        default: T( () => [a("b", null, c(e.$t("pages.clock.description_mins", i.diff)), 1), a("a", fy, c(e.$t("pages.clock.description_online")), 1)]),
        _: 1
    }), a("button", {
        type: "button",
        class: "button",
        onClick: s[0] || (s[0] = g => e.$router.push(i.backRoute))
    }, c(e.$t("pages.clock.return")), 1)]), s[2] || (s[2] = a("div", {
        class: "authors"
    }, [a("img", {
        src: Se,
        alt: "",
        class: "logo tpi"
    }), a("img", {
        src: Ve,
        alt: "",
        class: "logo sb"
    })], -1))])
}
const yy = O(py, [["render", vy], ["__scopeId", "data-v-e6bee590"]])
  , Dn = "/assets/background1-BpU4ja-f.webp"
  , xe = "/assets/background1t-DHbud4pS.webp"
  , En = "/assets/background2-CgYNt1Ve.webp"
  , es = "/assets/background2t-DstAC8L3.webp"
  , Nn = "/assets/background3-BKXF5Trs.webp"
  , ss = "/assets/background3t-CbbHtzGF.webp"
  , Bn = "/assets/background4-Czm52619.webp"
  , ts = "/assets/background4t-CgR43iC3.webp"
  , Vn = "/assets/background5-C8rPTCyH.webp"
  , is = "/assets/background5t-BUIwLYe9.webp"
  , On = "/assets/background6-B64VUblt.webp"
  , os = "/assets/background6t-CtQxnilw.webp"
  , jn = "/assets/background1-C64aKIx0.webp"
  , ns = "/assets/background1t-DMtLDqmO.webp"
  , Un = "/assets/background2-DBkYNRkh.webp"
  , as = "/assets/background2t-C5uAKrl8.webp"
  , Hn = "/assets/background3-CoJic9Le.webp"
  , rs = "/assets/background3t-aFaeliYY.webp"
  , qn = "/assets/background4-BAO6WjXL.webp"
  , ls = "/assets/background4t-CF_Go9po.webp"
  , Ln = "/assets/background5-BbSbo6Gy.webp"
  , cs = "data:image/webp;base64,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"
  , zn = "/assets/background6-CoMsrMbU.webp"
  , ds = "data:image/webp;base64,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"
  , Gn = "/assets/background7-Cf2KQeVt.webp"
  , us = "data:image/webp;base64,UklGRjYHAABXRUJQVlA4WAoAAAAgAAAAvwAAXgAAVlA4IBgHAAAQIgCdASrAAF8APm0ylUekIyIlKHa6GKANiWkAzvLCX8O3p/GRVncBYFeEGkUx7+ktoI/tRU8OMigfl/ks4OxneuOnFAMUzPBGnHou7+7AxWV8MQquVD5UkYJ9ZvRlnGOa098lrA09zYAxqwxVEMGGNYebCl9zM5YGxN1wJJuiSCwSVyKlQniOqbyDpICQUPx1UTlp6eE7iGRn7XnfPvqvpdk0B4aE3eu32A8lJ55t5enLSs9bHUHFmsrk4P80tU81YvFwGCbCn9BAzCJvGrG+YAd2wWLgNNqqdfpSKfp3yqEP28raQ6jYIAq/WY2Rf20eB19jlcjipMX8STxWpYANNJsYqY6EnTna6t/+Sfa6LZ4uDwDuUT56kAD+/drM6Ou1Ejymh9+DwtOOFWfa8Xw2cICG9CNzk0+TPVazqRZUcoBrS2TvMyXfjpp4gOhXzeR39fGYKH1c387RJ0WFOB23HEh+VB/xbKjef6k8Kl1ISGN9OFe8LPHTI0GeZ//9tje3TJkheOgM5s6pp4iin3jWmX57Na0wETk1DrhZTgy31ziOgqGF2w/W2SLutUM98rvCD2KJas9NhCjv3FSvXUShePeGn1ghQ/1vqNMpBm8lTOoIdIOALJTyXAFOAky7RW2A0JXm8s8028HCkUBHlEEBAxsRaTqja+4RljR2hTe5HBYjIuo23JZuImNd0eOfxVKraApPVIlYB9URg5864BJAMen9JVrR7KVKfKDVA+UGutU8WEQ+1X1RiZOGhDFcbDnIzK4aVNRyN0+EROebEaK7/7XUDsnQBZFl3AUxZs4cEi3lVamm4ACMvVployNFW+zmlUC63w+D4lMwlAJwcIHL7u8vNgnAxRbrQ2hFx+DnZtQPuo0dk0kZD347z61h2dUB/1F/vh8DotKlcNWmCG4MKfUZbmnfloirYlYC/v8zlyAQjHw4PR2lvDtfaKbyTER9F5jYyifPQmQbVH3oldNlTzqNsgmSHGMxElfKfplt6NYkTDDKkGxM2XhVV0Ntme7l3fv3rIBdglHc1dDxk6EUjIxscLigYupjawM3axBOSVwLRmA3TyQt7r44f7NjWtXngwdEG6M2DR+pE8vwjTrROMoGbZIE9mU+8hFeJ6/dFX/rvrmdSjYpQHc1Y/sbWhKyc1pENkYwS3yS8E9c7L+cXMc6PCpo6h6cGxXENpmXshj6FoOAfnLoTA2RxAD7un51y0hnZwHyalgDdMiuWBJXplht0wBrQrXx79kyVaugJeki87Wd3v0BrIruBELpgYFgtGnh5mubZbTNg48pAuAqweCQHcyc+rZLVACCCZVW3sQduJtXFejcEaf2KXa1k77JhARUI+LODPG+zmPq/CEtjojbPTFZjU4EjA3JQCZAQROfP5DXw93Su9EEoLpRzsFvKfLZ1Cx9kguAajiMCWeP7VQyJlCcGr9OMOV1/dBd1PBo6gwnDhgwrIqXwZ41PkCCLWSmbQeSEdlcZy55bwy+vuK8v0Y5PeRArHgRosEGTuXns2aaWaoaKUYWRSS5WjMDJEXI1F21TG3S3b1WAfgz1Wz9UX0ioPYFU3tantmx0yfhbW1mlSEq+z0Wcgy8Ocl8fKRuXZ/ShXk27VjNoU54dsR6pEf26IGXgKp5ongnSl8cO5DLuanreLTkuvom4ZIfPyrulnpExq/66iGlp8OmCh72JPHq8VvPK7LeOtV4n3DkUrMJjwIhnE1T8wgsJHpfefTFY5qauaFAgKto+s3vb+TETRhjKuaikuQFVtazuEt9pghv53PpiyNQNXeoozzSZvXzjXY+bj0Xqq8wVZfUcuLAxr36gPJ5rFefjmvRHvM+FkP1Rg3POwHTR9sMzF/gb/I/7I6r82neSt16HHtNYMHwWlI395v93S8nVZsVVgIuHQw7De8QCtQO30sf1B336fKPSvCu6iMjy795gIeXBNnS9ZxkcDSHAo6HDXMCINuqKyFm/mzlb0XK8px07pnElVoYYSKVUam8W9KYzDqjM0utpVgcLNBIqm3N6nHPKg6VHJx7TLMWZWHVpXmQj08Ln6o+65oOzDF+/JiVaVtkPj2NeqlfvxYRoeIkFMqwm/9DWuB4pzCVc4MrzGQ3lnyroygfGLnsmw//a3yQtsgqTTHJ/3LEww4nAAqKNBd14rWiByZ4AyxPD3568bah7iHSVaK+i3uBw2txOAtceC+B8Aepkp89zadtfWVMImlUNuVe+sTo1vTPDIRVLPTIGMwhD5zkEUcgEVRM9ioSHAkFcrPauijx0yuplahBGpbRJlHgLmYiPU3WFNH3RhD/RtcIDn164M4H8yi9+PRN1/x4Xpn8YsLDDOVpU+ALIWgHl+8E8Yw7z2dAho/Yw10GVUWsy2JSQCKT3gK2iFPpvXb5pU41y3sHBvuvSdoarHjJsKE/kqP/QAAA"
  , Wn = "/assets/background8-BBIeE9c0.webp"
  , gs = "data:image/webp;base64,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"
  , Fn = "/assets/background1-CuyW2BLZ.webp"
  , ms = "/assets/background1t-aLs_Jl5I.webp"
  , Qn = "/assets/background2-K9_lN7Mc.webp"
  , hs = "/assets/background2t-CckmZ43o.webp"
  , Zn = "/assets/background3-DcqXQDdD.webp"
  , ps = "/assets/background3t-B7BHi4O8.webp"
  , Xn = "/assets/background4-X8jQb4tv.webp"
  , As = "/assets/background4t-DV1DfgFp.webp"
  , Kn = "/assets/background5-DGQcUGSF.webp"
  , bs = "/assets/background5t-SAesBd90.webp"
  , Yn = "/assets/background6-Bj2Pn2zr.webp"
  , fs = "/assets/background6t-BGYqtwtm.webp"
  , Jn = "/assets/background1-NUIA0OVV.webp"
  , vs = "/assets/background1t-BOuKVDN4.webp"
  , $n = "/assets/background2-DycZEMhJ.webp"
  , ys = "/assets/background2t-DOofBXDu.webp"
  , xn = "/assets/background3-Dw6DXljd.webp"
  , _s = "/assets/background3t-DrnWsxUb.webp"
  , ea = "/assets/background4-C7TzDZ7M.webp"
  , ws = "/assets/background4t-D26MBsn7.webp"
  , sa = "/assets/background5-CUu8vEFl.webp"
  , ks = "/assets/background5t-BmsArEO-.webp"
  , ta = "/assets/background6-Dsvfc9R4.webp"
  , Cs = "/assets/background6t-C_geWcN4.webp"
  , ia = "/assets/background-bJ1INm6Z.webp"
  , oa = "/assets/background1-C0iW8pNy.webp"
  , Ss = "/assets/background1t-C4I5Mxpb.webp"
  , na = "/assets/background2-vSWVpkv3.webp"
  , Ps = "/assets/background2t-8hTjdqtA.webp"
  , aa = "/assets/background3-CzcrM8e7.webp"
  , Ts = "/assets/background3t-BYZtXcQd.webp"
  , _y = {
    name: "Token",
    props: {
        role: {
            type: Object,
            default: () => ({})
        },
        alignment: {
            type: String,
            default: ""
        }
    },
    computed: {
        reminderLeaves() {
            return (this.role.reminders || []).length + (this.role.remindersGlobal || []).length
        },
        roleNameFontSize() {
            const e = this.$te(`roles.${this.role.id}.name`) ? this.$t(`roles.${this.role.id}.name`) : this.role.name;
            return e.length > 25 ? "70%" : e.length > 17 ? "80%" : e.length > 10 ? "90%" : "110%"
        },
        ...M(["grimoire", "edition", "settings"]),
        ...D(["roleIconURL"])
    },
    data() {
        return {}
    }
}
  , wy = ["aria-label"]
  , ky = {
    key: 1,
    class: "leaf-left"
}
  , Cy = {
    key: 2,
    class: "leaf-right"
}
  , Sy = {
    key: 4,
    class: "leaf-orange"
}
  , Py = {
    viewBox: "0 0 140 140",
    class: "name",
    "aria-hidden": "true"
}
  , Ty = ["font-size"]
  , Iy = {
    "xlink:href": "#circle-path"
}
  , My = {
    key: 5,
    class: "ability"
}
  , Ry = {
    key: 0,
    class: "alt-name"
}
  , Dy = {
    key: 1
}
  , Ey = {
    key: 2,
    class: "flavor"
};
function Ny(e, s, t, n, o, i) {
    var l, g;
    return r(),
    u("div", {
        class: _(["token", {
            ["role-" + t.role.id]: t.role.id,
            ["edition-" + (t.role.edition || e.edition.id)]: !0,
            ["team-" + t.role.team]: t.role.team,
            ["alignment-" + t.alignment]: t.alignment
        }]),
        role: "button",
        "aria-label": t.role.id && e.$te(`roles.${t.role.id}.name`) ? e.$t(`roles.${t.role.id}.name`) : (l = t.role.name) != null ? l : e.$t("grimoire.token")
    }, [t.role.id ? (r(),
    u("span", {
        key: 0,
        class: "icon",
        style: q({
            backgroundImage: `url(${e.roleIconURL(t.role, t.alignment)})`
        })
    }, null, 4)) : A("", !0), t.role.firstNight || t.role.firstNightReminder ? (r(),
    u("span", ky)) : A("", !0), t.role.otherNight || t.role.otherNightReminder ? (r(),
    u("span", Cy)) : A("", !0), i.reminderLeaves ? (r(),
    u("span", {
        key: 3,
        class: _(["leaf-top", ["leaf-top" + Math.min(i.reminderLeaves, 6)]])
    }, null, 2)) : A("", !0), t.role.setup ? (r(),
    u("span", Sy)) : A("", !0), (r(),
    u("svg", Py, [t.role.id ? (r(),
    u("text", {
        key: 0,
        x: "100%",
        "text-anchor": "middle",
        class: "label mozilla",
        "font-size": i.roleNameFontSize
    }, [a("textPath", Iy, c(e.$te(`roles.${t.role.id}.name`) ? e.$t(`roles.${t.role.id}.name`) : t.role.name), 1)], 8, Ty)) : A("", !0)])), t.role.ability ? (r(),
    u("div", My, [a("b", null, c(e.$te(`roles.${t.role.id}.name`) ? e.$t(`roles.${t.role.id}.name`) : t.role.name), 1), e.settings.game.isEnglishNames && e.$te(`roles.${t.role.id}.name`) && e.$t(`roles.${t.role.id}.name`) !== t.role.name ? (r(),
    u("span", Ry, " (" + c(t.role.name) + ")", 1)) : A("", !0), a("i", null, "â " + c(e.$t(`grimoire.${t.role.team}`)), 1), s[0] || (s[0] = a("br", null, null, -1)), v(" " + c(e.$te(`roles.${t.role.id}.ability`) ? e.$t(`roles.${t.role.id}.ability`) : t.role.ability) + " ", 1), t.role.id === "bootlegger" && ((g = e.edition.bootlegger) != null && g.length) ? (r(),
    u("ul", Dy, [(r(!0),
    u(y, null, N(e.edition.bootlegger, (d, h) => (r(),
    u("li", {
        key: h
    }, c(d), 1))), 128))])) : A("", !0), t.role.flavor ? (r(),
    u("div", Ey, c(e.$te(`roles.${t.role.id}.flavor`) ? e.$t(`roles.${t.role.id}.flavor`) : t.role.flavor), 1)) : A("", !0)])) : A("", !0)], 10, wy)
}
const ve = O(_y, [["render", Ny], ["__scopeId", "data-v-52a03550"]])
  , By = {
    name: "PlayerMenu",
    props: {
        player: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...M("players", ["players", "storytellers"]),
        ...M("user", ["user"]),
        ...M(["grimoire", "session", "vote", "chat", "roles", "game"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess"]),
        ...D("players", ["seatedPlayerMap", "playerName"]),
        ...D("game", ["isNight"]),
        ...D(["filterAbilities", "roleIconURL"]),
        index() {
            return this.players.indexOf(this.player)
        }
    },
    methods: {
        ...U(["setMenuOpen", "toggleModal"]),
        ...$("chat", ["requestWhisper", "followUser"]),
        ...$("user", ["promptUserUpdate"]),
        ...$("vote", ["nominatePlayer"]),
        changeCharacter() {
            const e = this.player;
            this.isStoryteller || e.role.team !== "traveller" ? this.toggleModal({
                name: "role",
                params: {
                    playerIndex: this.index
                }
            }) : this.changeAlignment()
        },
        changeAlignment() {
            const {id: e, team: s} = this.player.role;
            if (!e)
                return;
            let t;
            switch (this.player.alignment) {
            case "g":
                t = ["demon", "minion"].includes(s) ? null : "e";
                break;
            case "e":
                t = ["traveller", "townsfolk", "outsider"].includes(s) ? null : "g";
                break;
            default:
                t = ["townsfolk", "outsider"].includes(s) ? "e" : "g"
            }
            this.$store.commit("players/updatePlayer", {
                player: this.player,
                property: "alignment",
                value: t
            })
        },
        async emptySeat() {
            if (this.isStoryteller)
                if (this.game.isRunning)
                    try {
                        await this.$store.dispatch("openDialogue", {
                            type: "confirm",
                            title: ["player.menu.empty_title", [this.$t(...this.playerName(this.player))]],
                            text: "player.menu.empty_text"
                        }) && this.$store.dispatch("players/emptySeat", this.player)
                    } catch {}
                else
                    this.$store.dispatch("players/emptySeat", this.player)
        },
        useAbility(e) {
            var s, t;
            switch (e.name) {
            case "pointing":
                if (e.time === "night" && e.global) {
                    const n = this.players.filter( ({role: o, id: i, reminders: l, isDead: g}) => i && (o.team === e.global && !["marionette", "drunk", "lunatic"].includes(o.id) && !l.some( ({role: d}) => d === "alchemist") || e.global === "dead" && g)).map( ({id: o}) => o);
                    if (!n.length)
                        return;
                    this.$store.dispatch("session/startPointing", ["storyteller", ...n])
                } else
                    this.$store.dispatch("session/startPointing");
                break;
            case "open-eyes":
                this.$store.commit("players/openEyes", {
                    index: this.index,
                    value: (s = this.player.status) != null && s.includes("open-eyes") || (t = this.player.status) != null && t.includes("peek-eyes") ? !1 : "open-eyes"
                });
                break
            }
        }
    }
}
  , Vy = {
    key: 0,
    class: "menu"
}
  , Oy = ["onClick"];
function jy(e, s, t, n, o, i) {
    const l = k("font-awesome-icon");
    return r(),
    C(L, {
        name: "fold"
    }, {
        default: T( () => [e.grimoire.menuOpen === "p" + i.index ? (r(),
        u("ul", Vy, [e.isStoryteller ? (r(!0),
        u(y, {
            key: 0
        }, N([...e.filterAbilities(t.player, "ability"), ...e.filterAbilities(t.player, "player")], ({ability: g, role: d}, h) => (r(),
        u("li", {
            class: "special",
            key: h,
            onClick: m => i.useAbility(g)
        }, [b(l, {
            icon: "star"
        }), a("span", null, [v(c(e.$te(`roles.${d.id}.name`) ? e.$t(`roles.${d.id}.name`) : d.name) + ":", 1), s[6] || (s[6] = a("br", null, null, -1)), v(" " + c(e.$t(`grimoire.abilities.${g.name}`, g.name)), 1)])], 8, Oy))), 128)) : A("", !0), a("li", {
            onClick: s[0] || (s[0] = g => i.changeCharacter())
        }, [b(l, {
            icon: "theater-masks"
        }), v(" " + c(e.$t("player.menu.character")), 1)]), a("li", {
            class: _({
                disabled: !t.player.role.id
            }),
            onClick: s[1] || (s[1] = g => i.changeAlignment())
        }, [b(l, {
            icon: "yin-yang"
        }), v(" " + c(e.$t("player.menu.alignment")), 1)], 2), e.hasGrimoireAccess && (e.chat.audio.streams.has(t.player.id) || e.chat.following === t.player.id) ? (r(),
        u("li", {
            key: 1,
            onClick: s[2] || (s[2] = g => e.followUser(t.player.id))
        }, [e.chat.following !== t.player.id ? (r(),
        u(y, {
            key: 0
        }, [b(l, {
            icon: "link"
        }), v(" " + c(e.$t("player.menu.follow")), 1)], 64)) : (r(),
        u(y, {
            key: 1
        }, [b(l, {
            icon: "link-slash"
        }), v(" " + c(e.$t("player.menu.unfollow")), 1)], 64))])) : A("", !0), e.isStoryteller ? (r(),
        u(y, {
            key: 2
        }, [e.isNight ? (r(),
        u("li", {
            key: 0,
            onClick: s[3] || (s[3] = g => e.toggleModal({
                name: "signal",
                params: {
                    player: t.player
                }
            }))
        }, [b(l, {
            icon: "eye"
        }), v(" " + c(e.$t("player.menu.wake")), 1)])) : !e.vote.nomination && e.grimoire.mode !== "pointing" ? (r(),
        u("li", {
            key: 1,
            onClick: s[4] || (s[4] = g => e.nominatePlayer([i.index, i.index]))
        }, [b(l, {
            icon: "hand-point-right"
        }), v(" " + c(e.$t("player.menu.nominate")), 1)])) : A("", !0), t.player.id && e.session.sessionId ? (r(),
        u("li", {
            key: 2,
            onClick: s[5] || (s[5] = g => i.emptySeat())
        }, [b(l, {
            icon: "chair"
        }), v(" " + c(e.$t("player.menu.empty")), 1)])) : A("", !0)], 64)) : A("", !0)])) : A("", !0)]),
        _: 1
    })
}
const Uy = O(By, [["render", jy], ["__scopeId", "data-v-db2693b3"]])
  , Hy = "/assets/bugreporter-Jilx8avW.mp4"
  , qy = "/assets/bugreporter-BuoqQ1WR.webm"
  , Ly = "/assets/worldcup25-BHTbsf-H.mp4"
  , zy = "/assets/worldcup25-DQ8_m4si.webm"
  , Vs = {
    bugreporter: {
        overlay: !0
    },
    worldcup25: {
        loop: !0
    }
}
  , Gy = {
    name: "Emote",
    props: {
        playerId: {
            type: [String],
            required: !0
        }
    },
    computed: {
        ...D(["roleIconURL"]),
        ...M(["session", "vote"]),
        animation() {
            return Vs[this.name]
        },
        icon() {
            var e;
            return ((e = this.name) == null ? void 0 : e.startsWith("i-")) && this.name.substring(2)
        },
        role() {
            var e;
            return ((e = this.name) == null ? void 0 : e.startsWith("r-")) && this.name.substring(2)
        },
        raised() {
            return !this.vote.nomination && this.session.raisedHands.has(this.playerId)
        },
        name() {
            return this.session.raisedHands.get(this.playerId)
        },
        transitionStyle() {
            var e;
            return (e = Vs[this.name]) != null && e.overlay ? "emote-overlay" : "emote-peek"
        },
        emoteClasses() {
            return {
                [this.transitionStyle]: !0,
                [`emote-${this.name}`]: !0
            }
        },
        videoAttributes() {
            var e;
            return {
                loop: ((e = Vs[this.name]) == null ? void 0 : e.loop) || !1
            }
        }
    },
    methods: {
        videoUrl(e) {
            if (this.animation)
                return new URL(Object.assign({
                    "/src/assets/cosmetics/emotes/bugreporter-icon.webp": pl,
                    "/src/assets/cosmetics/emotes/bugreporter.mp4": Hy,
                    "/src/assets/cosmetics/emotes/bugreporter.webm": qy,
                    "/src/assets/cosmetics/emotes/worldcup25-icon.webp": Al,
                    "/src/assets/cosmetics/emotes/worldcup25.mp4": Ly,
                    "/src/assets/cosmetics/emotes/worldcup25.webm": zy
                })[`/src/assets/cosmetics/emotes/${this.name}.${e}`],import.meta.url).href
        }
    }
}
  , Wy = ["src"]
  , Fy = ["src"];
function Qy(e, s, t, n, o, i) {
    const l = k("font-awesome-icon");
    return r(),
    C(L, {
        name: i.transitionStyle
    }, {
        default: T( () => [i.raised ? (r(),
        u("div", {
            key: 0,
            class: _(["emote emote-raised", i.emoteClasses])
        }, [i.animation ? (r(),
        u("video", qs({
            key: 0,
            class: "emote-video",
            autoplay: "",
            muted: "",
            playsinline: ""
        }, i.videoAttributes), [a("source", {
            src: i.videoUrl("mp4"),
            type: "video/mp4;codecs=hvc1"
        }, null, 8, Wy), a("source", {
            src: i.videoUrl("webm"),
            type: "video/webm"
        }, null, 8, Fy)], 16)) : i.icon ? (r(),
        C(l, {
            key: 1,
            class: "emote-icon",
            icon: i.icon
        }, null, 8, ["icon"])) : i.role ? (r(),
        u("div", {
            key: 2,
            class: "emote-role",
            style: q({
                backgroundImage: `url(${e.roleIconURL(i.role)})`
            })
        }, null, 4)) : A("", !0)], 2)) : A("", !0)]),
        _: 1
    }, 8, ["name"])
}
const yl = O(Gy, [["render", Qy], ["__scopeId", "data-v-bd563f86"]])
  , Zy = {
    name: "PlayerOverlay",
    components: {
        Emote: yl
    },
    props: {
        player: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...M("players", ["players", "storytellers"]),
        ...M("user", ["user"]),
        ...M(["grimoire", "session", "chat", "vote"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess", "isSpectator", "getOpenEyes"]),
        ...D("players", ["seatedPlayerMap"]),
        ...D("session", ["pointedPlayers"]),
        ...D("game", ["isNight"]),
        ...D("chat", ["whispersAvailable", "textsAvailable", "isPrivateChat"]),
        ...D(["roleIconURL"]),
        playerIndex() {
            return this.players.indexOf(this.player)
        },
        userIndex() {
            return this.players.findIndex( ({id: e}) => e === this.user.id)
        },
        voteCount() {
            if (this.vote.isHidden && !this.hasGrimoireAccess)
                return "?";
            const {nomination: e, votes: s} = this.vote
              , t = this.players.length;
            let n = 0;
            const o = (this.playerIndex - 1 + t - e[1]) % t;
            for (let i = e[1]; i <= e[1] + o; i++)
                n += s[(i + 1) % t] || 0;
            return Math.round(n * 10) / 10
        },
        voteLocked() {
            const e = this.players.length;
            return this.vote.nomination ? (this.playerIndex - 1 + e - this.vote.nomination[1]) % e < this.vote.locked - 1 : !1
        },
        voteVisible() {
            return this.vote.nomination && (!this.vote.isHidden || this.hasGrimoireAccess || this.userIndex === this.playerIndex)
        },
        nominator() {
            var e;
            return parseInt((e = this.grimoire.menuOpen.match(/p(\d+)/)) == null ? void 0 : e.pop())
        },
        showNomination() {
            return this.isStoryteller && !this.isNight && !this.vote.nomination && this.grimoire.menuOpen !== "p" + this.playerIndex && this.grimoire.mode !== "pointing" && this.nominator > -1
        },
        showOpenEyes() {
            var e, s;
            return !this.isNight || this.player.id !== this.user.id && !this.hasGrimoireAccess || this.player.id === this.user.id && !this.getOpenEyes ? !1 : (e = this.player.status) != null && e.includes("open-eyes") ? "open-eyes" : (s = this.player.status) != null && s.includes("peek-eyes") ? "peek-eyes" : ""
        },
        signal() {
            const {signals: e} = this.session;
            return this.isNight && (this.hasGrimoireAccess || this.getOpenEyes === "open-eyes") && e[this.player.id] ? e[this.player.id].slice(-1).pop() : !1
        }
    },
    data() {
        return {
            pointingDelay: 500,
            pointingTimeout: !1
        }
    },
    methods: {
        ...U(["setMenuOpen", "toggleModal", "setTab"]),
        ...$("session", ["pointAtPlayer"]),
        ...$("chat", ["requestWhisper", "showTextTab"]),
        ...$("vote", ["nominatePlayer"])
    }
}
  , Xy = {
    class: "overlay"
}
  , Ky = {
    class: "mirror"
};
function Yy(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("Emote");
    return r(),
    u("div", Xy, [b(We, {
        name: "zoom"
    }, {
        default: T( () => [e.grimoire.playerSelectCallback ? (r(),
        C(l, {
            key: 0,
            class: _(["player-select", {
                empty: !t.player.id
            }]),
            icon: "user",
            "aria-label": e.$t("player.overlay.select"),
            "aria-hidden": "false",
            role: "button",
            onClick: s[0] || (s[0] = d => e.grimoire.playerSelectCallback(i.playerIndex))
        }, null, 8, ["class", "aria-label"])) : (r(),
        u(y, {
            key: 1
        }, [e.vote.markedPlayer === i.playerIndex ? (r(),
        C(l, {
            key: 0,
            class: "marked-for-execution",
            icon: "skull"
        })) : A("", !0), i.showOpenEyes ? (r(),
        C(l, {
            key: 1,
            icon: "eye",
            class: _(i.showOpenEyes),
            "aria-label": e.$t("player.overlay.eyes_open"),
            "aria-hidden": "false",
            role: "button"
        }, null, 8, ["class", "aria-label"])) : A("", !0), i.signal && i.signal.isInbound && !i.signal.isRead ? (r(),
        C(l, {
            key: 2,
            icon: i.signal.message.length === 1 && i.signal.message[0].id === "acknowledge" ? "thumbs-up" : "eye",
            class: "signal-received",
            "aria-label": e.$t("player.overlay.night_info_received"),
            "aria-hidden": "false",
            role: "button",
            onClick: s[1] || (s[1] = R(d => e.toggleModal({
                name: "signal",
                params: {
                    player: t.player
                }
            }), ["stop"]))
        }, null, 8, ["icon", "aria-label"])) : A("", !0), i.signal && (!i.signal.isInbound || i.signal.isRead) ? (r(),
        C(l, {
            key: 3,
            icon: i.signal.message.length === 1 && i.signal.message[0].id === "acknowledge" ? "thumbs-up" : "eye-slash",
            class: "signal-sent",
            "aria-label": e.$t("player.overlay.night_info_sent"),
            "aria-hidden": "false",
            role: "button",
            onClick: s[2] || (s[2] = R(d => e.toggleModal({
                name: "signal",
                params: {
                    player: t.player
                }
            }), ["stop"]))
        }, null, 8, ["icon", "aria-label"])) : A("", !0), i.voteVisible && !i.voteLocked && e.vote.votes[i.playerIndex] == 2 ? (r(),
        C(l, {
            key: 4,
            icon: "hand-paper",
            class: _(["vote up flipped", {
                secret: e.vote.isHidden
            }])
        }, null, 8, ["class"])) : A("", !0), i.voteVisible && !i.voteLocked && e.vote.votes[i.playerIndex] ? (r(),
        C(l, {
            key: 5,
            icon: "hand-paper",
            class: _(["vote up", {
                secret: e.vote.isHidden
            }])
        }, null, 8, ["class"])) : i.voteVisible && i.voteLocked && !e.vote.votes[i.playerIndex] ? (r(),
        C(l, {
            key: 6,
            icon: "times",
            class: _(["vote down", {
                secret: e.vote.isHidden
            }])
        }, null, 8, ["class"])) : i.voteVisible && i.voteLocked && e.vote.votes[i.playerIndex] ? (r(),
        u("span", {
            key: 7,
            class: _(["vote", {
                secret: e.vote.isHidden
            }])
        }, c(i.voteCount), 3)) : A("", !0), e.chat.isPrompt && e.whispersAvailable.has(t.player.id) ? (r(),
        C(l, {
            key: 8,
            icon: e.isPrivateChat(e.chat.channel) || e.isPrivateChat(e.chat.userChannels.get(t.player.id)) ? "user-plus" : "comments",
            class: "whisper voice",
            "aria-label": e.$t("player.menu.chat"),
            "aria-hidden": "false",
            role: "button",
            onClick: s[3] || (s[3] = d => e.requestWhisper(t.player))
        }, null, 8, ["icon", "aria-label"])) : A("", !0), e.chat.isPrompt && e.textsAvailable.has(t.player.id) ? (r(),
        C(l, {
            key: 9,
            icon: "envelope",
            class: "whisper text",
            "aria-label": e.$t("player.menu.whisper"),
            "aria-hidden": "false",
            role: "button",
            onClick: s[4] || (s[4] = d => e.showTextTab(t.player.id))
        }, null, 8, ["aria-label"])) : A("", !0), i.showNomination ? (r(),
        C(l, {
            key: 10,
            icon: i.nominator === i.playerIndex ? "arrows-to-dot" : "hand-point-right",
            class: "nominate",
            "aria-label": e.$t("player.overlay.nominate"),
            "aria-hidden": "false",
            role: "button",
            style: q({
                transform: i.nominator > -1 && i.nominator !== i.playerIndex ? `scale(${i.nominator > i.playerIndex ? -1 : 1}) rotateZ(${180 / e.players.length * (i.nominator + i.playerIndex)}deg)` : null
            }),
            onClick: s[5] || (s[5] = d => e.nominatePlayer([i.nominator, i.playerIndex]))
        }, null, 8, ["icon", "aria-label", "style"])) : A("", !0), e.grimoire.mode === "pointing" ? (r(),
        C(l, {
            key: 11,
            class: _(["pointing", {
                pointed: e.session.pointers[i.userIndex] === i.playerIndex,
                chosen: e.pointedPlayers.includes(i.playerIndex),
                locked: e.session.isPointing === "locked"
            }]),
            icon: parseInt(e.session.pointers[i.playerIndex]) >= 0 ? parseInt(e.session.pointers[i.playerIndex]) === i.playerIndex ? "arrows-to-dot" : "hand-point-right" : "times",
            "aria-label": e.$t("player.overlay.point"),
            "aria-hidden": "false",
            role: "button",
            style: q({
                transform: parseInt(e.session.pointers[i.playerIndex]) >= 0 && e.session.pointers[i.playerIndex] !== i.playerIndex ? `scale(${e.session.pointers[i.playerIndex] < i.playerIndex ? -1 : 1}) rotateZ(${180 / e.players.length * (e.session.pointers[i.playerIndex] + i.playerIndex)}deg)` : null
            }),
            onClick: s[6] || (s[6] = d => e.pointAtPlayer(i.playerIndex))
        }, null, 8, ["class", "icon", "aria-label", "style"])) : A("", !0)], 64))]),
        _: 1
    }), a("div", Ky, [t.player.id ? (r(),
    C(g, {
        key: 0,
        "player-id": t.player.id
    }, null, 8, ["player-id"])) : A("", !0)])])
}
const Jy = O(Zy, [["render", Yy], ["__scopeId", "data-v-d67d6416"]])
  , Ze = (e, s) => {
    var i, l;
    if (!e || Array.from(e.classList).includes("muted"))
        return;
    const t = (i = e.dataset.volume) != null ? i : 1
      , n = (l = e.dataset.userid) != null ? l : "";
    let o = Math.pow(10, s / 85) * 10;
    o <= 1 && (o = 0),
    o = Math.round(o * t * 15),
    (e.closest("li") || e).style.setProperty("--volume", o),
    window.whispersElem && window.whispersElem.style.setProperty(`--volume${n}`, o)
}
  , qe = (e, s) => {
    var n;
    if (!e || Array.from(e.classList).includes("muted"))
        return;
    const t = (n = e.dataset.userid) != null ? n : "";
    (e.closest("li") || e).style.setProperty(`--speaking${t}`, s ? 1 : 0),
    window.whispersElem && window.whispersElem.style.setProperty(`--speaking${t}`, s ? 1 : 0)
}
  , $y = {
    name: "ChatAudio",
    computed: {
        ...M(["chat", "session"]),
        ...M("user", ["user"]),
        ...D("game", ["isNight"]),
        stream() {
            return this.chat.audio.streams.get(this.userId)
        },
        muted() {
            var e, s;
            return this.isNight && this.userId !== this.user.id ? !1 : ((e = this.chat.usersMuted[this.userId]) == null ? void 0 : e.audio) || Object.values((s = this.chat.audio.volumes.get(this.userId)) != null ? s : {}).some(t => !t) || Number(this.chat.userOverrides.get("volume-" + this.userId)) === 0 || !1
        },
        silenced() {
            return Number(this.chat.userOverrides.get("volume-" + this.userId)) === 0
        },
        deafened() {
            var e;
            return this.isNight && this.userId !== this.user.id ? !1 : ((e = this.chat.usersDeafened[this.userId]) == null ? void 0 : e.audio) || this.userId === this.user.id && this.chat.audio.isDeafened
        },
        userVolume() {
            var e, s;
            return Object.values((e = this.chat.audio.volumes.get(this.userId)) != null ? e : {}).reduce( (t, n) => t * n, (s = this.chat.userOverrides.get("volume-" + this.userId)) != null ? s : 1)
        }
    },
    props: {
        userId: {
            type: String,
            default: ""
        }
    },
    data() {
        return {
            voiceLevel: 0,
            hark: null
        }
    },
    methods: {
        silenceUser() {
            const e = this.chat.userOverrides.get("volume-" + this.userId) === 0;
            this.$store.commit("chat/setUserOverride", {
                userId: this.userId,
                type: "volume",
                value: e ? !1 : 0
            })
        },
        initVolumeBar() {
            if (this.hark && (this.hark.stop(),
            this.hark = null,
            this.voiceLevel = 0),
            !this.stream || !this.stream.getAudioTracks()[0])
                return;
            this.hark = ul(this.stream, {
                play: !1,
                interval: 100,
                audioContext: this.chat.audio.context
            });
            const e = this.$refs.audioContainer;
            this.hark.on("volume_change", Ze.bind(this, e)),
            this.hark.on("speaking", () => qe(e, !0)),
            this.hark.on("stopped_speaking", () => qe(e, !1))
        }
    },
    beforeUnmount() {
        this.hark && this.hark.stop(),
        qe(this.$refs.audioContainer, !1),
        Ze(this.$refs.audioContainer, -100)
    },
    mounted() {
        this.$nextTick( () => {
            this.initVolumeBar()
        }
        )
    },
    watch: {
        stream() {
            this.stream ? this.$nextTick( () => this.initVolumeBar()) : (qe(this.$refs.audioContainer, !1),
            Ze(this.$refs.audioContainer, -100))
        },
        "chat.isNotAllowed"() {
            this.chat.isNotAllowed || this.initVolumeBar()
        },
        muted() {
            this.muted && (qe(this.$refs.audioContainer, !1),
            Ze(this.$refs.audioContainer, -100))
        }
    }
}
  , xy = {
    key: 0,
    class: "chat-audio"
}
  , e_ = ["data-volume", "data-userid", "title"];
function s_(e, s, t, n, o, i) {
    var g;
    const l = k("font-awesome-icon");
    return e.session.sessionId && t.userId && e.chat.isConnected && ((g = e.session.users.get(t.userId)) != null && g.isOnline) ? (r(),
    u("div", xy, [i.stream ? (r(),
    u("div", {
        key: 0,
        class: _(["audio", {
            muted: i.muted,
            silenced: i.silenced
        }]),
        "data-volume": i.userVolume,
        "data-userid": t.userId,
        ref: "audioContainer",
        onClick: s[0] || (s[0] = R( (...d) => i.silenceUser && i.silenceUser(...d), ["stop"])),
        title: i.muted ? e.$t("overlays.whisper.muted") : ""
    }, [i.deafened ? (r(),
    C(l, {
        key: 0,
        icon: "ear-deaf"
    })) : A("", !0), i.silenced ? (r(),
    C(l, {
        key: 1,
        icon: "volume-mute"
    })) : i.muted && e.chat.userChannels.get(t.userId) === e.chat.channel ? (r(),
    C(l, {
        key: 2,
        icon: "microphone-slash"
    })) : A("", !0)], 10, e_)) : e.chat.consumers.has(t.userId) || t.userId === e.user.id ? (r(),
    u("div", {
        key: 1,
        onClick: s[1] || (s[1] = R( () => {}
        , ["stop"]))
    }, [i.deafened ? (r(),
    C(l, {
        key: 0,
        icon: "ear-deaf"
    })) : (r(),
    C(l, {
        key: 1,
        icon: "headphones",
        title: e.$t("player.name.listening")
    }, null, 8, ["title"]))])) : A("", !0)])) : A("", !0)
}
const _l = O($y, [["render", s_], ["__scopeId", "data-v-e3bbe49d"]])
  , t_ = {
    name: "PlayerName",
    components: {
        ChatAudio: _l
    },
    props: {
        player: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...M(["grimoire", "session", "chat"]),
        ...M("players", ["players"]),
        ...M("user", ["user", "relations"]),
        ...D("game", ["isNight"]),
        ...D("players", ["playerName"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess"]),
        ...D("chat", ["hasAvatars"]),
        canChat() {
            return this.chat.isConnected && this.session.sessionId && this.player.id
        },
        playerUser() {
            return this.session.users.get(this.player.id) || {
                cosmetics: {},
                flags: []
            }
        },
        index() {
            return this.players.indexOf(this.player)
        },
        videoMuted() {
            var e;
            return this.chat.video.streams.get(this.player.id) && ((e = this.chat.usersMuted[this.player.id]) == null ? void 0 : e.video) && !this.isNight
        },
        relation() {
            return this.relations.get(this.player.id)
        }
    },
    data() {
        return {
            dragIndex: -1
        }
    },
    methods: {
        startDrag(e) {
            this.dragIndex = this.players.indexOf(this.player),
            e.dataTransfer.dropEffect = "move",
            e.dataTransfer.effectAllowed = "move",
            e.dataTransfer.setData("text/plain", ""),
            e.dataTransfer.setData("player", String(this.dragIndex)),
            setTimeout( () => this.$store.commit("setPlayerDragState", this.dragIndex), 100)
        },
        stopDrag() {
            this.dragIndex = -1,
            this.$store.commit("setPlayerDragState", this.dragIndex)
        },
        async changeName() {
            if (!(!this.isStoryteller || this.session.sessionId))
                try {
                    const e = await this.$store.dispatch("openDialogue", {
                        type: "prompt",
                        title: "player.name.seat_title",
                        placeholder: ["grimoire.seat", [this.index + 1]],
                        value: this.grimoire.seats[this.index],
                        text: "player.name.seat_text"
                    });
                    this.$store.commit("setSeatName", {
                        seat: this.index,
                        name: e
                    })
                } catch {}
        },
        async removePlayer() {
            if (this.isStoryteller)
                try {
                    let e = !0;
                    this.session.sessionId && this.player.id && (e = await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "player.name.remove_title",
                        text: ["player.name.remove_text", [this.index + 1, this.playerUser.username || this.playerUser.id]]
                    })),
                    e && this.$store.dispatch("players/removePlayers", [this.index])
                } catch {}
        }
    }
}
  , i_ = ["title", "draggable"]
  , o_ = {
    class: "name"
}
  , n_ = {
    key: 0,
    class: "pronouns"
}
  , a_ = {
    key: 1,
    class: "pronouns"
};
function r_(e, s, t, n, o, i) {
    var d, h, m, p, f;
    const l = k("font-awesome-icon")
      , g = k("ChatAudio");
    return r(),
    u("div", {
        class: _(["nameplate", {
            ["border-" + ((d = i.playerUser.cosmetics) == null ? void 0 : d.border)]: !!((h = i.playerUser.cosmetics) != null && h.border) && ((m = i.relation) == null ? void 0 : m.type) !== "block",
            ["level-" + i.playerUser.level]: !!i.playerUser.level,
            empty: e.session.sessionId && !t.player.id,
            ["relation-" + ((p = i.relation) == null ? void 0 : p.type)]: i.relation
        }]),
        style: q({
            "--speaking": `var(--speaking${t.player.id})`
        }),
        title: i.playerUser.pronouns,
        draggable: e.grimoire.mode === "gather",
        onClick: s[1] || (s[1] = P => i.changeName()),
        onDragstart: s[2] || (s[2] = P => i.startDrag(P)),
        onDragend: s[3] || (s[3] = P => i.stopDrag())
    }, [a("div", o_, [i.videoMuted ? (r(),
    C(l, {
        key: 0,
        class: _(["video", {
            silenced: e.chat.userOverrides.get("novideo-" + t.player.id) === 1,
            muted: e.chat.userOverrides.get("novideo-" + t.player.id) !== 1
        }]),
        icon: "video-slash",
        title: e.$t("overlays.whisper.video_muted")
    }, null, 8, ["class", "title"])) : A("", !0), b(g, {
        "user-id": t.player.id
    }, null, 8, ["user-id"]), e.chat.following === t.player.id && e.hasGrimoireAccess ? (r(),
    C(l, {
        key: 1,
        icon: "link",
        title: e.$t("player.name.follow")
    }, null, 8, ["title"])) : A("", !0), e.grimoire.mode === "gather" && e.isStoryteller ? (r(),
    C(l, {
        key: 2,
        icon: "arrows-alt",
        class: "move",
        title: e.$t("player.name.move")
    }, null, 8, ["title"])) : !e.hasAvatars && e.session.sessionId && t.player.id && !i.playerUser.isOnline ? (r(),
    C(l, {
        key: 3,
        icon: "user-slash",
        class: "offline",
        title: e.$t("player.name.offline")
    }, null, 8, ["title"])) : e.session.sessionId && t.player.id && i.playerUser.isOnline && i.canChat && !e.chat.consumers.has(t.player.id) && t.player.id !== e.user.id ? (r(),
    C(l, {
        key: 4,
        icon: "hourglass-half",
        class: "audio",
        title: e.$t("player.name.connecting")
    }, null, 8, ["title"])) : A("", !0), a("span", null, c(e.$t(...e.playerName(t.player))), 1), ((f = i.relation) == null ? void 0 : f.type) === "block" ? (r(),
    C(l, {
        key: 5,
        icon: "user-xmark",
        title: e.$t("player.name.blocked")
    }, null, 8, ["title"])) : A("", !0), e.grimoire.mode === "gather" && e.isStoryteller ? (r(),
    C(l, {
        key: 6,
        icon: "times-circle",
        class: "remove",
        title: e.$t("player.name.remove"),
        onClick: s[0] || (s[0] = R(P => i.removePlayer(), ["stop"]))
    }, null, 8, ["title"])) : A("", !0)]), i.playerUser.pronouns && e.session.sessionId ? (r(),
    u("div", n_, c(i.playerUser.pronouns), 1)) : !t.player.id && e.session.sessionId ? (r(),
    u("div", a_, c(e.$t("player.name.claim")), 1)) : A("", !0)], 46, i_)
}
const l_ = O(t_, [["render", r_], ["__scopeId", "data-v-be31cbc4"]])
  , ra = {
    name: "Reminder",
    props: {
        reminder: {
            type: Object,
            default: () => ({})
        }
    },
    computed: {
        ...D(["roleIconURL"]),
        ...M(["roles", "edition", "settings"]),
        id() {
            return this.reminder.name.replace(/[^a-z0-9]/gi, "").toLowerCase()
        },
        fontSize() {
            var s;
            if (this.reminder.role === "custom")
                return ((s = this.reminder.name) == null ? void 0 : s.length) > 10 ? "28px" : "30px";
            const e = this.$te(`reminders.${this.id}`) ? this.$t(`reminders.${this.id}`) : this.reminder.name || "";
            return e.length > 25 ? "18px" : e.length > 20 ? "20px" : e.length > 15 ? "22px" : e.length > 10 ? "24px" : "26px"
        },
        zoom() {
            return Math.round(100 * this.settings.general.reminderZoom) + "%"
        },
        classes() {
            var e, s, t, n;
            return {
                ["role-" + this.reminder.role]: this.reminder.role,
                ["team-" + ((e = this.roles.get(this.reminder.role)) == null ? void 0 : e.team)]: (s = this.roles.get(this.reminder.role)) == null ? void 0 : s.team,
                ["edition-" + (((t = this.roles.get(this.reminder.role)) == null ? void 0 : t.edition) || this.edition.id)]: ((n = this.roles.get(this.reminder.role)) == null ? void 0 : n.edition) || this.edition.id
            }
        }
    },
    data() {
        return {}
    }
}
  , mr = () => {
    he(e => ({
        v548a78f2: e.zoom
    }))
}
  , hr = ra.setup;
ra.setup = hr ? (e, s) => (mr(),
hr(e, s)) : mr;
const c_ = {
    key: 1,
    viewBox: "0 0 140 140",
    class: "text"
}
  , d_ = ["font-size"]
  , u_ = {
    "xlink:href": "#circle-path"
}
  , g_ = {
    key: 2,
    class: "text"
};
function m_(e, s, t, n, o, i) {
    return r(),
    u("div", {
        class: _(["reminder", i.classes])
    }, [t.reminder.role && (t.reminder.role !== "custom" || t.reminder.name.length < 15) ? (r(),
    u("span", {
        key: 0,
        class: "icon",
        style: q({
            backgroundImage: `url(${e.roleIconURL(t.reminder.role)})`
        })
    }, null, 4)) : A("", !0), t.reminder.role && (t.reminder.role !== "custom" || t.reminder.name.length < 15) ? (r(),
    u("svg", c_, [a("text", {
        x: "100%",
        "text-anchor": "middle",
        class: "label mozilla",
        "font-size": i.fontSize
    }, [a("textPath", u_, c(t.reminder.role !== "custom" && e.$te(`reminders.${i.id}`) ? e.$t(`reminders.${i.id}`) : t.reminder.name), 1)], 8, d_)])) : t.reminder.name ? (r(),
    u("span", g_, c(t.reminder.name), 1)) : A("", !0), Ce(e.$slots, "default", {}, void 0, !0)], 2)
}
const la = O(ra, [["render", m_], ["__scopeId", "data-v-17ef6734"]])
  , h_ = {
    name: "PlayerReminders",
    components: {
        Reminder: la
    },
    props: {
        player: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...M(["grimoire"]),
        ...M("players", ["storytellers", "players"]),
        ...D("players", ["playerName"]),
        isStoryteller() {
            return this.storytellers.includes(this.player)
        },
        playerIndex() {
            return this.isStoryteller ? this.storytellers.indexOf(this.player) * -1 - 1 : this.players.indexOf(this.player)
        }
    },
    data() {
        return {
            flipTimeout: !1
        }
    },
    methods: {
        ...U(["toggleModal", "toggleSavedReminder"]),
        ...U("players", ["updatePlayer", "updateStoryteller"]),
        removeReminder(e) {
            const s = [...this.player.reminders]
              , t = "reminders";
            s.splice(this.player.reminders.indexOf(e), 1),
            this.isStoryteller ? this.updateStoryteller({
                storyteller: this.player,
                property: t,
                value: s
            }) : this.updatePlayer({
                player: this.player,
                property: t,
                value: s
            })
        },
        flipReminder(e) {
            if (this.flipTimeout)
                return;
            this.flipTimeout = setTimeout( () => {
                this.flipTimeout = !1
            }
            , 500),
            e.isFlipped = !e.isFlipped;
            const s = "reminders"
              , t = this.player.reminders;
            this.isStoryteller ? this.updateStoryteller({
                storyteller: this.player,
                property: s,
                value: t
            }) : this.updatePlayer({
                player: this.player,
                property: s,
                value: t
            })
        },
        async editReminder(e) {
            const s = this.grimoire.savedReminders.includes(e.name);
            try {
                const {value: t, checkbox: n} = await this.$store.dispatch("openDialogue", {
                    type: "prompt",
                    title: "player.reminders.edit_title",
                    placeholder: "player.reminders.edit_placeholder",
                    value: e.name,
                    text: ["player.reminders.edit_text", [this.$t(...this.playerName(this.player))]],
                    checkbox: {
                        value: s,
                        label: "player.reminders.saved_favorite"
                    }
                });
                if (t && t !== e.name) {
                    s && n ? (this.toggleSavedReminder(e.name),
                    this.toggleSavedReminder(t)) : s && !n && this.toggleSavedReminder(e.name),
                    e.name = t;
                    const o = "reminders";
                    this.isStoryteller ? this.updateStoryteller({
                        storyteller: this.player,
                        property: o,
                        value: this.player.reminders
                    }) : this.updatePlayer({
                        player: this.player,
                        property: o,
                        value: this.player.reminders
                    })
                } else if (t === e.name && n !== s)
                    this.toggleSavedReminder(e.name);
                else if (!t)
                    return this.removeReminder(e)
            } catch {}
        }
    }
}
  , p_ = {
    class: "reminders",
    role: "list"
}
  , A_ = {
    class: "overlay"
};
function b_(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("Reminder");
    return r(),
    u("div", p_, [(r(!0),
    u(y, null, N(t.player.reminders, (d, h) => (r(),
    C(g, {
        key: h,
        reminder: d,
        class: _({
            flipped: d.isFlipped
        })
    }, {
        default: T( () => [a("div", A_, [d.role !== "custom" ? (r(),
        C(l, {
            key: 0,
            class: "flip",
            "aria-label": e.$t("player.reminders.flip", [d.name]),
            role: "button",
            onClick: R(m => i.flipReminder(d), ["stop"]),
            icon: "redo-alt"
        }, null, 8, ["aria-label", "onClick"])) : (r(),
        C(l, {
            key: 1,
            class: "save",
            role: "button",
            "aria-label": e.$t("player.reminders.edit", [d.name]),
            onClick: R(m => i.editReminder(d), ["stop"]),
            icon: "pen-to-square"
        }, null, 8, ["aria-label", "onClick"])), b(l, {
            class: "remove",
            "aria-label": e.$t("player.reminders.remove", [d.name]),
            role: "button",
            onClick: R(m => i.removeReminder(d), ["stop"]),
            icon: "trash-alt"
        }, null, 8, ["aria-label", "onClick"])])]),
        _: 2
    }, 1032, ["reminder", "class"]))), 128)), b(g, {
        class: "reminder add",
        role: "button",
        "aria-label": e.$t("player.reminders.add"),
        onClick: s[0] || (s[0] = R(d => e.toggleModal({
            name: "reminder",
            params: {
                playerIndex: i.playerIndex
            }
        }), ["stop"]))
    }, null, 8, ["aria-label"])])
}
const ca = O(h_, [["render", b_], ["__scopeId", "data-v-b6c5fcf9"]])
  , f_ = {
    name: "PlayerWhisper",
    props: {
        player: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...M(["chat"]),
        ...M("players", ["players"]),
        index() {
            return this.players.indexOf(this.player)
        },
        whisperIndicators() {
            return this.chat.textMessageIndicators.map( ({senderId: e, recipientId: s, length: t, msgId: n}) => ({
                senderId: e,
                length: t,
                msgId: n,
                prev: s === this.players[(this.index + this.players.length - 1) % this.players.length].id,
                next: s === this.players[(this.index + 1) % this.players.length].id
            })).filter( ({senderId: e, prev: s, next: t}) => e === this.player.id && (s || t))
        }
    },
    data() {
        return {}
    },
    methods: {}
}
  , v_ = {
    class: "whisper"
};
function y_(e, s, t, n, o, i) {
    const l = k("font-awesome-icon");
    return r(),
    u("div", v_, [(r(!0),
    u(y, null, N(i.whisperIndicators, ({msgId: g, prev: d, next: h, length: m}) => (r(),
    u("span", {
        key: g,
        class: _(["animation-critical", {
            prev: d,
            next: h
        }]),
        style: q({
            animationDuration: `${m / 250 * 3 + .5}s`,
            "--size": m / 250 * 2 + .75
        })
    }, [b(l, {
        icon: "envelope"
    })], 6))), 128))])
}
const __ = O(f_, [["render", y_], ["__scopeId", "data-v-6ba4b276"]])
  , pr = "/assets/avatar0-u1LxaXkZ.webp"
  , Ar = "/assets/avatar1-CIODRiLI.webp"
  , br = "/assets/avatar10-Ce5aMeqa.webp"
  , fr = "/assets/avatar11-D0soE0Fu.webp"
  , vr = "/assets/avatar12-CQBRBiyb.webp"
  , yr = "/assets/avatar13-Bpg0u82M.webp"
  , _r = "/assets/avatar14-h_wJnEaW.webp"
  , wr = "/assets/avatar15-B7bRtsAD.webp"
  , kr = "/assets/avatar16-u00HGBBf.webp"
  , Cr = "/assets/avatar17-amVAvnUE.webp"
  , Sr = "/assets/avatar18-BIZPKahS.webp"
  , Pr = "/assets/avatar19-Bbs0PuH3.webp"
  , Tr = "/assets/avatar2-DYXL9YFA.webp"
  , Ir = "/assets/avatar20-MD1WsuJ6.webp"
  , Mr = "/assets/avatar21-Bs2m13ni.webp"
  , Rr = "/assets/avatar22-Bq1IgAYY.webp"
  , Dr = "/assets/avatar23-BKNYnWO7.webp"
  , Er = "/assets/avatar24-D1bqdpeq.webp"
  , Nr = "/assets/avatar25-C0TghHJl.webp"
  , Br = "/assets/avatar26-BbpC9TVV.webp"
  , Vr = "/assets/avatar27-CnpM0r3p.webp"
  , Or = "/assets/avatar3-B2H-m15c.webp"
  , jr = "/assets/avatar4--Z7nPrzq.webp"
  , Ur = "/assets/avatar5-CMBaoxol.webp"
  , Hr = "/assets/avatar6-DfDkBP7R.webp"
  , qr = "/assets/avatar7-B6pbOZSY.webp"
  , Lr = "/assets/avatar8-BD4fLzfO.webp"
  , zr = "/assets/avatar9-BsG8Afot.webp"
  , Gr = "/assets/avatarworldcup25-BaNix0NU.webp"
  , w_ = {
    name: "PlayerAvatar",
    props: {
        user: {
            type: [Object, null],
            default: null
        },
        override: {
            type: [String, Number],
            default: void 0
        },
        frame: {
            type: Boolean,
            default: !0
        }
    },
    computed: {
        ...M("user", ["relations"]),
        ...M(["chat", "settings"]),
        isBlocked() {
            var e;
            return this.user ? ((e = this.relations.get(this.user.id)) == null ? void 0 : e.type) === "block" : !1
        },
        validatedAvatar() {
            var t, n, o, i;
            if (!this.user || this.chat.userOverrides.has("noavatar-" + this.user.id) || this.settings.general.isCosmeticsDisabled && this.override === void 0)
                return 0;
            const s = (n = this.override) != null ? n : (t = this.user.cosmetics) == null ? void 0 : t.avatar;
            return s ? Number(s) < 0 ? this.user.level ? s : 0 : isNaN(s) && !((i = (o = this.user.cosmetics) == null ? void 0 : o.avatars) != null && i.includes(s)) ? 0 : s : 0
        },
        avatarImageURL() {
            return this.isBlocked ? new URL("/assets/blocked-IXrgzNSB.webp",import.meta.url).href : typeof this.validatedAvatar != "number" ? new URL(Object.assign({
                "/src/assets/cosmetics/avatar0.webp": pr,
                "/src/assets/cosmetics/avatar1.webp": Ar,
                "/src/assets/cosmetics/avatar10.webp": br,
                "/src/assets/cosmetics/avatar11.webp": fr,
                "/src/assets/cosmetics/avatar12.webp": vr,
                "/src/assets/cosmetics/avatar13.webp": yr,
                "/src/assets/cosmetics/avatar14.webp": _r,
                "/src/assets/cosmetics/avatar15.webp": wr,
                "/src/assets/cosmetics/avatar16.webp": kr,
                "/src/assets/cosmetics/avatar17.webp": Cr,
                "/src/assets/cosmetics/avatar18.webp": Sr,
                "/src/assets/cosmetics/avatar19.webp": Pr,
                "/src/assets/cosmetics/avatar2.webp": Tr,
                "/src/assets/cosmetics/avatar20.webp": Ir,
                "/src/assets/cosmetics/avatar21.webp": Mr,
                "/src/assets/cosmetics/avatar22.webp": Rr,
                "/src/assets/cosmetics/avatar23.webp": Dr,
                "/src/assets/cosmetics/avatar24.webp": Er,
                "/src/assets/cosmetics/avatar25.webp": Nr,
                "/src/assets/cosmetics/avatar26.webp": Br,
                "/src/assets/cosmetics/avatar27.webp": Vr,
                "/src/assets/cosmetics/avatar3.webp": Or,
                "/src/assets/cosmetics/avatar4.webp": jr,
                "/src/assets/cosmetics/avatar5.webp": Ur,
                "/src/assets/cosmetics/avatar6.webp": Hr,
                "/src/assets/cosmetics/avatar7.webp": qr,
                "/src/assets/cosmetics/avatar8.webp": Lr,
                "/src/assets/cosmetics/avatar9.webp": zr,
                "/src/assets/cosmetics/avatarworldcup25.webp": Gr
            })[`/src/assets/cosmetics/avatar${this.validatedAvatar}.webp`],import.meta.url).href : this.validatedAvatar >= 0 ? new URL(Object.assign({
                "/src/assets/cosmetics/avatar0.webp": pr,
                "/src/assets/cosmetics/avatar1.webp": Ar,
                "/src/assets/cosmetics/avatar10.webp": br,
                "/src/assets/cosmetics/avatar11.webp": fr,
                "/src/assets/cosmetics/avatar12.webp": vr,
                "/src/assets/cosmetics/avatar13.webp": yr,
                "/src/assets/cosmetics/avatar14.webp": _r,
                "/src/assets/cosmetics/avatar15.webp": wr,
                "/src/assets/cosmetics/avatar16.webp": kr,
                "/src/assets/cosmetics/avatar17.webp": Cr,
                "/src/assets/cosmetics/avatar18.webp": Sr,
                "/src/assets/cosmetics/avatar19.webp": Pr,
                "/src/assets/cosmetics/avatar2.webp": Tr,
                "/src/assets/cosmetics/avatar20.webp": Ir,
                "/src/assets/cosmetics/avatar21.webp": Mr,
                "/src/assets/cosmetics/avatar22.webp": Rr,
                "/src/assets/cosmetics/avatar23.webp": Dr,
                "/src/assets/cosmetics/avatar24.webp": Er,
                "/src/assets/cosmetics/avatar25.webp": Nr,
                "/src/assets/cosmetics/avatar26.webp": Br,
                "/src/assets/cosmetics/avatar27.webp": Vr,
                "/src/assets/cosmetics/avatar3.webp": Or,
                "/src/assets/cosmetics/avatar4.webp": jr,
                "/src/assets/cosmetics/avatar5.webp": Ur,
                "/src/assets/cosmetics/avatar6.webp": Hr,
                "/src/assets/cosmetics/avatar7.webp": qr,
                "/src/assets/cosmetics/avatar8.webp": Lr,
                "/src/assets/cosmetics/avatar9.webp": zr,
                "/src/assets/cosmetics/avatarworldcup25.webp": Gr
            })[`/src/assets/cosmetics/avatar${this.validatedAvatar}.webp`],import.meta.url).href : `https://img.botc.app/avatars/${this.user.id}.webp?c${Number(this.validatedAvatar)}`
        },
        avatarStyle() {
            return this.user ? {
                backgroundImage: `url("${this.avatarImageURL}")`
            } : null
        }
    }
};
function k_(e, s, t, n, o, i) {
    return r(),
    u("div", {
        class: _(["player-avatar", {
            [`avatar-${i.validatedAvatar}`]: t.frame && !i.isBlocked,
            blocked: i.isBlocked
        }]),
        style: q(i.avatarStyle)
    }, [Ce(e.$slots, "default", {}, void 0, !0)], 6)
}
const da = O(w_, [["render", k_], ["__scopeId", "data-v-1742b8e7"]])
  , C_ = {
    name: "ChatVideo",
    components: {
        PlayerAvatar: da
    },
    computed: {
        ...M(["chat", "session", "settings"]),
        ...M("user", {
            self: "user",
            relations: "relations"
        }),
        ...D("players", ["seatedPlayerMap", "storytellerMap"]),
        ...D("game", ["isNight"]),
        ...D("user", ["hasGrimoireAccess"]),
        user() {
            return this.session.sessionId && this.userId && this.session.users.get(this.userId)
        },
        stream() {
            return this.chat.video.streams.get(this.userId)
        },
        hasVideo() {
            var s, t;
            const e = this.storytellerMap.has(this.userId);
            return !((s = this.session.users.get(this.userId)) != null && s.isOnline) || !this.stream || ((t = this.relations.get(this.userId)) == null ? void 0 : t.type) === "block" || this.chat.video.isDeafened || this.chat.video.isHidden && this.userId === this.self.id || this.settings.advanced.hasHiddenPrivateCams && this.chat.userChannels.get(this.userId) && this.chat.channel !== this.chat.userChannels.get(this.userId) ? !1 : this.chat.userChannels.get(this.userId) === this.chat.channel && this.chat.channel ? !0 : this.session.hook.name === "reveal-grimoire" && !e && this.settings.advanced.hasHiddenRevealCams ? !1 : !this.isNight
        },
        muted() {
            var e;
            return ((e = this.chat.usersMuted[this.userId]) == null ? void 0 : e.video) || this.chat.userOverrides.has("novideo-" + this.userId) || !1
        }
    },
    props: {
        userId: {
            type: String,
            default: ""
        }
    },
    data() {
        return {}
    },
    methods: {
        async play() {
            if (!(!this.stream || !this.$refs.video))
                try {
                    await this.$refs.video.play()
                } catch (e) {
                    if (e.name === "NotAllowedError" && !this.chat.isNotAllowed)
                        try {
                            this.$store.commit("chat/toggleNotAllowed", !0),
                            await this.$store.dispatch("openDialogue", {
                                type: "alert",
                                title: "modals.dialogue.error.video_title",
                                text: "modals.dialogue.error.video_text"
                            }),
                            this.$store.commit("chat/toggleNotAllowed", !1)
                        } catch {}
                }
        }
    },
    mounted() {
        this.$nextTick( () => {
            this.play()
        }
        )
    },
    watch: {
        stream() {
            this.$nextTick( () => this.play())
        },
        hasVideo() {
            this.hasVideo && this.$nextTick( () => this.play())
        },
        "chat.isNotAllowed"() {
            this.chat.isNotAllowed || this.play()
        }
    }
}
  , S_ = [".srcObject"];
function P_(e, s, t, n, o, i) {
    var g, d;
    const l = k("PlayerAvatar");
    return r(),
    C(l, {
        user: (g = i.user) != null && g.isOnline ? i.user : null,
        class: _(["chat-video", {
            dead: (d = e.seatedPlayerMap.get(t.userId)) == null ? void 0 : d.isDead,
            unclaimed: !t.userId,
            offline: i.user && !i.user.isOnline,
            local: !e.session.sessionId
        }])
    }, {
        default: T( () => [b(L, {
            name: "fade"
        }, {
            default: T( () => {
                var h;
                return [t.userId && e.chat.isConnected && i.hasVideo ? (r(),
                u("div", {
                    key: 0,
                    class: _(["video", {
                        muted: i.muted,
                        mirror: t.userId === e.self.id && !e.chat.video.isUnmirrored
                    }]),
                    ref: "videoContainer"
                }, [a("video", {
                    ".srcObject": (h = i.stream) != null && h.attach ? void 0 : i.stream,
                    autoplay: "",
                    muted: "",
                    disablePictureInPicture: "true",
                    disableremoteplayback: "true",
                    playsInline: "",
                    ref: "video"
                }, null, 40, S_)], 2)) : A("", !0)]
            }
            ),
            _: 1
        })]),
        _: 1
    }, 8, ["user", "class"])
}
const ua = O(C_, [["render", P_], ["__scopeId", "data-v-7fc92171"]])
  , ga = {
    components: {
        ChatVideo: ua,
        PlayerWhisper: __,
        PlayerReminders: ca,
        PlayerName: l_,
        PlayerOverlay: Jy,
        PlayerMenu: Uy,
        Token: ve
    },
    inject: ["renderReminderHTML"],
    props: {
        player: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...M("players", ["players", "claimedSeat"]),
        ...M("user", ["user"]),
        ...M(["grimoire", "session", "chat", "vote", "positions", "settings"]),
        ...D("players", ["nightOrder", "seatedPlayerMap"]),
        ...D("chat", ["hasAvatars", "isVideoWhisper", "channelColors"]),
        ...D("game", ["isNight"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess"]),
        index() {
            return this.players.indexOf(this.player)
        },
        isYou() {
            return this.session.sessionId && this.player.id && this.player.id === this.user.id
        },
        playerChannel() {
            return this.chat.userChannels.get(this.player.id) || ""
        },
        alignment() {
            var e, s;
            return this.session.hook.name === "reveal-grimoire" ? "" : this.player.alignment ? "alignment-" + this.player.alignment : ["minion", "demon"].includes((e = this.player.role) == null ? void 0 : e.team) ? "alignment-e" : ["townsfolk", "outsider"].includes((s = this.player.role) == null ? void 0 : s.team) ? "alignment-g" : ""
        },
        avatarZoom() {
            return this.settings.general.avatarZoom * 100 + "%"
        },
        isInChat() {
            var e, s;
            return this.chat.channel !== this.playerChannel && (this.chat.channel || ((e = this.session.users.get(this.player.id)) == null ? void 0 : e.isOnline)) && (this.chat.channel || !this.isNight) || this.chat.channel && this.isVideoWhisper && !((s = this.positions.whisper) != null && s.minimized)
        }
    },
    data() {
        return {
            isSwap: !1
        }
    },
    methods: {
        playerClick() {
            this.session.hook.name !== "reveal-grimoire" && (!this.isStoryteller && !this.player.id && !this.seatedPlayerMap.has(this.user.id) && !this.hasGrimoireAccess ? this.claimSeat() : this.hasGrimoireAccess ? this.setMenuOpen("p" + this.index) : this.$refs.player.changeCharacter())
        },
        toggleStatus() {
            if (this.isStoryteller) {
                if (this.session.hook.name === "reveal-grimoire") {
                    this.player.revealed || this.updatePlayer("revealed", !0);
                    return
                }
            } else {
                !this.player.id && !this.seatedPlayerMap.has(this.user.id) && this.claimSeat();
                return
            }
            this.vote.nomination && this.grimoire.isTownSquare || this.vote.locked > 0 || this.vote.isInProgress ? this.player.isDead && (this.player.isVoteless ? this.updatePlayer("isVoteless", !1) : this.updatePlayer("isVoteless", !0)) : this.grimoire.isTownSquare ? this.player.isDead ? this.player.isVoteless ? (this.updatePlayer("isVoteless", !1),
            this.updatePlayer("isDead", !1)) : this.updatePlayer("isVoteless", !0) : (this.updatePlayer("isDead", !0),
            this.removeReminders("Dead"),
            this.updatePlayer("isMarkedForDeath")) : this.isNight && this.session.sessionId ? (this.updatePlayer("isMarkedForDeath", !this.player.isMarkedForDeath),
            this.player.isMarkedForDeath && this.toggleModal({
                name: "reminder",
                params: {
                    playerIndex: this.index,
                    filter: this.player.isDead ? "alive" : "dead"
                }
            })) : (this.updatePlayer("isDead", !this.player.isDead),
            this.player.isDead ? this.removeReminders("Dead") : this.removeReminders("Alive"),
            this.updatePlayer("isMarkedForDeath"),
            this.player.isVoteless && this.updatePlayer("isVoteless", !1))
        },
        async claimSeat() {
            this.isStoryteller || this.claimedSeat === null && (this.players.some( ({id: e}) => e === this.user.id) || (this.chat.channel && this.$store.commit("chat/setChannel", ""),
            this.chat.textRecipient === "spectator" && this.$store.commit("chat/setTextRecipient", ""),
            this.$store.commit("players/claimSeat", this.index),
            this.user.username || this.$store.dispatch("user/promptUserUpdate", "username")))
        },
        removeReminders(e) {
            const {reminders: s} = this.player
              , t = n => n.name === e && (n.name !== "Dead" || n.role !== "shabaloth");
            s.some(t) && this.updatePlayer("reminders", s.filter(n => !t(n)))
        },
        updatePlayer(e, s) {
            const t = ["reminders", "alignment"];
            !this.isStoryteller && !t.includes(e) || this.player[e] !== s && (this.$store.commit("players/updatePlayer", {
                player: this.player,
                property: e,
                value: s
            }),
            e === "isDead" ? this.$store.dispatch("game/addHistory", {
                data: this.player.id || this.players.indexOf(this.player) + 1,
                type: this.player.isDead ? "death" : "revive"
            }) : e === "isVoteless" && this.player.isVoteless && this.$store.dispatch("game/addHistory", {
                data: this.player.id || this.players.indexOf(this.player) + 1,
                type: "vote"
            }))
        },
        ...U(["setMenuOpen", "toggleModal"])
    }
}
  , Wr = () => {
    he(e => ({
        v2a6dc9a7: e.avatarZoom
    }))
}
  , Fr = ga.setup;
ga.setup = Fr ? (e, s) => (Wr(),
Fr(e, s)) : Wr;
const T_ = {
    class: "nameplate-container"
}
  , I_ = ["aria-label"]
  , M_ = {
    key: 0,
    class: "flag-powerful"
}
  , R_ = {
    key: 0,
    class: "night-order first"
}
  , D_ = {
    key: 0
}
  , E_ = ["innerHTML"]
  , N_ = {
    key: 0,
    class: "night-order other"
}
  , B_ = {
    key: 0
}
  , V_ = ["innerHTML"]
  , O_ = ["aria-pressed", "title"];
function j_(e, s, t, n, o, i) {
    var w, B, j, V;
    const l = k("ChatVideo")
      , g = k("PlayerName")
      , d = k("Token")
      , h = k("font-awesome-icon")
      , m = k("PlayerOverlay")
      , p = k("PlayerMenu")
      , f = k("PlayerReminders")
      , P = k("PlayerWhisper");
    return r(),
    u("li", {
        class: _({
            "menu-open": e.grimoire.menuOpen === "p" + i.index,
            nominator: e.vote.nomination && e.vote.nomination[0] === i.index,
            nominee: e.vote.nomination && e.vote.nomination[1] === i.index,
            selected: e.vote.nomination && e.vote.selectedPlayer === i.index,
            "in-chat": i.isInChat,
            "in-whisper": e.chat.channel && e.chat.channel === i.playerChannel,
            "has-alignment": i.alignment,
            "stack-reminders": e.settings.game.stackReminderTokens || e.hasAvatars && e.settings.game.stackReminderTokens === null,
            [t.player.special]: t.player.id && t.player.special,
            ["id-" + t.player.id]: t.player.id,
            ["channel-" + e.channelColors.get(i.playerChannel)]: i.isInChat
        })
    }, [b(L, {
        name: "slide"
    }, {
        default: T( () => [e.hasAvatars ? (r(),
        C(l, {
            key: 0,
            "user-id": t.player.id,
            onClick: s[0] || (s[0] = R(S => e.grimoire.isTownSquare || e.vote.locked > 0 || e.vote.isInProgress ? i.toggleStatus() : i.playerClick(), ["stop"]))
        }, null, 8, ["user-id"])) : A("", !0)]),
        _: 1
    }), a("div", T_, [b(g, {
        player: t.player
    }, null, 8, ["player"])]), a("div", {
        class: _(["player", [{
            dead: t.player.isDead,
            "marked-for-death": e.isStoryteller && t.player.isMarkedForDeath,
            "no-vote": t.player.isVoteless,
            you: i.isYou,
            revealed: e.session.hook.name === "reveal-grimoire" && t.player.revealed,
            [i.alignment]: !e.settings.advanced.hasPublicTownSquare,
            ["team-" + t.player.role.team]: !!t.player.role.team
        }, (B = (w = e.session.users.get(t.player.id)) == null ? void 0 : w.flags) == null ? void 0 : B.map(S => "flag-" + S)]])
    }, [a("div", {
        class: "life",
        onClick: s[1] || (s[1] = S => i.toggleStatus()),
        "aria-label": e.$t("player.toggle_status")
    }, [(V = (j = e.session.users.get(t.player.id)) == null ? void 0 : j.flags) != null && V.includes("powerful") ? (r(),
    u("div", M_)) : A("", !0)], 8, I_), b(d, {
        role: t.player.role,
        alignment: t.player.alignment,
        onClick: s[2] || (s[2] = R(S => i.playerClick(), ["stop"]))
    }, null, 8, ["role", "alignment"]), b(L, {
        name: "fade"
    }, {
        default: T( () => {
            var S, E, I, Z;
            return [(E = e.nightOrder.get((S = t.player.role) == null ? void 0 : S.id)) != null && E.first && e.settings.game.isNightOrder && e.isNight && e.hasGrimoireAccess ? (r(),
            u("div", R_, [a("em", null, c((Z = e.nightOrder.get((I = t.player.role) == null ? void 0 : I.id)) == null ? void 0 : Z.first), 1), t.player.role.firstNightReminder ? (r(),
            u("div", D_, [a("aside", null, c(e.$t("grimoire.phases.first_night")), 1), a("span", {
                class: "reminder",
                innerHTML: i.renderReminderHTML(e.$te(`roles.${t.player.role.id}.first`) ? e.$t(`roles.${t.player.role.id}.first`) : t.player.role.firstNightReminder)
            }, null, 8, E_)])) : A("", !0)])) : A("", !0)]
        }
        ),
        _: 1
    }), b(L, {
        name: "fade"
    }, {
        default: T( () => {
            var S, E, I, Z;
            return [(E = e.nightOrder.get((S = t.player.role) == null ? void 0 : S.id)) != null && E.other && e.settings.game.isNightOrder && e.isNight && e.hasGrimoireAccess ? (r(),
            u("div", N_, [a("em", null, c((Z = e.nightOrder.get((I = t.player.role) == null ? void 0 : I.id)) == null ? void 0 : Z.other), 1), t.player.role.otherNightReminder ? (r(),
            u("div", B_, [a("aside", null, c(e.$t("grimoire.phases.other_nights")), 1), a("span", {
                class: "reminder",
                innerHTML: i.renderReminderHTML(e.$te(`roles.${t.player.role.id}.other`) ? e.$t(`roles.${t.player.role.id}.other`) : t.player.role.otherNightReminder)
            }, null, 8, V_)])) : A("", !0)])) : A("", !0)]
        }
        ),
        _: 1
    }), a("div", {
        class: "shroud",
        onClick: s[3] || (s[3] = S => i.toggleStatus()),
        "aria-pressed": t.player.isDead,
        role: "checkbox",
        title: t.player.isMarkedForDeath ? t.player.isDead ? e.$t("player.shroud_remove") : e.$t("player.shroud_add") : e.$t("grimoire.shroud")
    }, [e.isStoryteller && t.player.isMarkedForDeath ? (r(),
    C(h, {
        key: 0,
        icon: t.player.isDead ? "eye" : "eye-slash"
    }, null, 8, ["icon"])) : A("", !0)], 8, O_), b(m, {
        player: t.player
    }, null, 8, ["player"]), b(p, {
        ref: "player",
        player: t.player
    }, null, 8, ["player"])], 2), b(f, {
        player: t.player
    }, null, 8, ["player"]), b(P, {
        player: t.player
    }, null, 8, ["player"])], 2)
}
const U_ = O(ga, [["render", j_], ["__scopeId", "data-v-733fc988"]])
  , H_ = {
    components: {
        Token: ve,
        Modal: se
    },
    inject: ["isTouchDevice"],
    computed: {
        ...M(["modal", "roles", "session", "rolesAvailable", "definitions"]),
        ...M("players", ["players", "bluffs", "storytellers", "npcs"]),
        ...D("players", ["playerName"]),
        ...D("user", ["isStoryteller"]),
        availableTabs() {
            const e = [this.$t("modals.role.tab_character")];
            return this.isStoryteller && this.travellers.length && !this.storytellers.includes(this.user) && e.push(this.$t("modals.role.tab_traveller")),
            e
        },
        hasDuplicateGood() {
            return [...this.players.map(e => e.role), ...this.npcs].some(e => {
                var s;
                return (s = e == null ? void 0 : e.special) == null ? void 0 : s.some(t => t.type === "selection" && t.name === "good-duplicate")
            }
            )
        },
        availableRoles() {
            const {bluff: e} = this.modal.params
              , s = (o, i) => this.$te(`roles.${o.id}.${i}`) ? this.$t(`roles.${o.id}.${i}`) : o[i];
            let t = [], n;
            try {
                n = new RegExp(this.search.trim(),"i")
            } catch {}
            return this.roles.forEach(o => {
                if (this.definitions.PLAYER_TEAMS.includes(o.team) && !(o.team === "traveller" && !this.isStoryteller) && !(o.team === "traveller" && this.storytellers.includes(this.user)) && (this.user || e && (!["traveller", "minion", "demon"].includes(o.team) || !this.isStoryteller) && (this.hasDuplicateGood || (!this.isStoryteller || !this.players.some(i => i.role.id === o.id)) && !this.bluffs.includes(o)))) {
                    if (n !== "" && this.tab === 0 && !s(o, "name").match(n) && !s(o, "ability").match(n) && !s(o, "team").match(n))
                        return;
                    t.push(o)
                }
            }
            ),
            t.sort( (o, i) => this.sort.indexOf(i.team) - this.sort.indexOf(o.team)),
            t
        },
        rolesPage() {
            return this.availableRoles.length <= 35 ? this.availableRoles : this.availableRoles.slice(this.page * 35, this.page * 35 + 35)
        },
        travellers() {
            if (this.modal.params.bluff)
                return [];
            let e;
            try {
                e = new RegExp(this.search.trim(),"i")
            } catch {}
            return [...this.rolesAvailable].filter( ([s,t]) => t.team === "traveller" && !this.roles.has(s)).filter( ([,s]) => e === "" || this.tab === 0 || (this.$te(`roles.${s.id}.name`) ? this.$t(`roles.${s.id}.name`) : s.name).match(e) || (this.$te(`roles.${s.id}.ability`) ? this.$t(`roles.${s.id}.ability`) : s.ability).match(e) || this.$t(`grimoire.${s.team}`, s.team).match(e)).map( ([,s]) => s)
        },
        user() {
            return this.modal.params.playerIndex === void 0 ? !1 : this.modal.params.playerIndex >= 0 ? this.players[this.modal.params.playerIndex] : this.storytellers[this.modal.params.playerIndex * -1 - 1]
        }
    },
    data() {
        return {
            alignment: null,
            sort: ["demon", "minion", "outsider", "townsfolk"],
            page: 0,
            search: "",
            tab: 0
        }
    },
    methods: {
        ...U(["toggleModal"]),
        ...U("players", ["updatePlayer", "updateStoryteller"]),
        changeAlignment() {
            const e = [null, "g", "e"];
            this.alignment = e[(e.indexOf(this.alignment) + 1) % e.length]
        },
        keydown({key: e}) {
            const s = this.tab === 0 ? this.availableRoles : this.travellers;
            e === "Enter" && s.length === 1 ? this.setRole(s[0]) : e === "Escape" && (this.search ? this.search = "" : this.close())
        },
        setRole(e={}) {
            if (this.modal.params.bluff)
                this.$store.commit("players/setBluff", {
                    index: this.modal.params.bluff - 1,
                    bluff: e
                });
            else {
                const s = this.storytellers.includes(this.user);
                if (e.team === "traveller" && (!this.isStoryteller || s))
                    return this.toggleModal(this.modal);
                if (!this.isStoryteller && this.user.role.team === "traveller")
                    return this.toggleModal(this.modal);
                let t = "role"
                  , n = e;
                s ? this.updateStoryteller({
                    storyteller: this.user,
                    property: t,
                    value: n
                }) : this.updatePlayer({
                    player: this.user,
                    property: t,
                    value: n
                }),
                this.user.alignment !== this.alignment && (t = "alignment",
                n = this.alignment,
                s ? this.updateStoryteller({
                    storyteller: this.user,
                    property: t,
                    value: n
                }) : this.updatePlayer({
                    player: this.user,
                    property: t,
                    value: n
                }))
            }
            this.toggleModal(this.modal),
            this.alignment = null
        },
        close() {
            document.getElementById("app").focus(),
            this.toggleModal(this.modal),
            this.alignment = null
        },
        tabChange(e) {
            this.tab = e,
            this.search = "",
            this.page = 0,
            this.isTouchDevice || this.$nextTick( () => {
                var s, t;
                (s = this.$refs.search) == null || s.focus(),
                (t = this.$refs.search) == null || t.select()
            }
            )
        }
    }
}
  , q_ = ["placeholder"]
  , L_ = {
    class: "tokens"
}
  , z_ = {
    key: 0,
    class: "break"
}
  , G_ = ["onClick"]
  , W_ = {
    key: 0,
    class: "paging"
}
  , F_ = {
    key: 2,
    class: "paging"
}
  , Q_ = {
    class: "tokens"
}
  , Z_ = ["onClick"];
function X_(e, s, t, n, o, i) {
    const l = k("i18n-t")
      , g = k("Token")
      , d = k("font-awesome-icon")
      , h = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "role" && e.roles.size ? (r(),
        C(h, {
            key: 0,
            onClose: i.close,
            onTabChange: i.tabChange,
            class: "role",
            name: "role",
            tabs: i.availableTabs
        }, {
            header: T( () => [b(l, {
                keypath: "modals.role.title",
                tag: "div",
                class: "title",
                scope: "global"
            }, gl({
                _: 2
            }, [e.modal.params.bluff ? void 0 : {
                name: "alignment",
                fn: T( () => [a("span", {
                    class: _(["button", {
                        primary: o.alignment === "g",
                        secondary: o.alignment === "e"
                    }]),
                    onClick: s[0] || (s[0] = (...m) => i.changeAlignment && i.changeAlignment(...m))
                }, c(e.$t(`modals.role.title_alignment_${o.alignment || "r"}`)), 3)]),
                key: "0"
            }, e.isStoryteller && !i.user ? {
                name: "type",
                fn: T( () => [v(c(e.$t("modals.role.title_type_bluff")), 1)]),
                key: "1"
            } : {
                name: "type",
                fn: T( () => [v(c(e.$t("modals.role.title_type_character")), 1)]),
                key: "2"
            }, i.user ? {
                name: "target",
                fn: T( () => [b(l, {
                    keypath: "modals.role.title_target",
                    scope: "global"
                }, {
                    default: T( () => [a("b", null, c(e.$t(...e.playerName(i.user))), 1)]),
                    _: 1
                })]),
                key: "3"
            } : void 0]), 1024), z(a("input", {
                ref: "search",
                "onUpdate:modelValue": s[1] || (s[1] = m => o.search = m),
                placeholder: e.$t("common.button_search"),
                onKeydown: s[2] || (s[2] = R( (...m) => i.keydown && i.keydown(...m), ["stop"]))
            }, null, 40, q_), [[G, o.search]])]),
            "tab-0": T( () => [a("ul", L_, [(r(!0),
            u(y, null, N(i.rolesPage, (m, p) => (r(),
            u(y, {
                key: m.id
            }, [p && i.rolesPage[p - 1].team !== m.team && o.sort.indexOf(i.rolesPage[p - 1].team) > -1 ? (r(),
            u("li", z_)) : A("", !0), a("li", {
                class: _([m.team, {
                    player: e.players.some(f => f.role.id === m.id)
                }]),
                onClick: f => i.setRole(m)
            }, [b(g, {
                role: m,
                class: "top",
                alignment: o.alignment
            }, null, 8, ["role", "alignment"])], 10, G_)], 64))), 128)), s[6] || (s[6] = a("li", {
                class: "break"
            }, null, -1)), i.availableRoles.length > 35 ? (r(),
            u("li", W_, [o.page ? (r(),
            C(d, {
                key: 0,
                icon: "arrow-circle-left",
                onClick: s[3] || (s[3] = m => o.page -= 1)
            })) : A("", !0)])) : A("", !0), o.search ? A("", !0) : (r(),
            u("li", {
                key: 1,
                onClick: s[4] || (s[4] = m => i.setRole())
            }, [b(g)])), i.availableRoles.length > 35 ? (r(),
            u("li", F_, [o.page < Math.floor((i.availableRoles.length - 1) / 35) ? (r(),
            C(d, {
                key: 0,
                icon: "arrow-circle-right",
                onClick: s[5] || (s[5] = m => o.page += 1)
            })) : A("", !0)])) : A("", !0), !i.availableRoles.length && o.search ? (r(),
            C(l, {
                key: 3,
                tag: "li",
                keypath: "modals.role.error_character",
                class: "break",
                scope: "global"
            }, {
                default: T( () => [a("b", null, '"' + c(o.search) + '"', 1)]),
                _: 1
            })) : A("", !0)])]),
            "tab-1": T( () => [a("ul", Q_, [(r(!0),
            u(y, null, N(i.travellers, m => (r(),
            u("li", {
                class: _([m.team]),
                key: m.id,
                onClick: p => i.setRole(m)
            }, [b(g, {
                role: m,
                class: "top",
                alignment: o.alignment
            }, null, 8, ["role", "alignment"])], 10, Z_))), 128)), !i.travellers.length && o.search ? (r(),
            C(l, {
                key: 0,
                tag: "li",
                class: "break",
                keypath: "modals.role.error_traveller",
                scope: "global"
            }, {
                default: T( () => [a("b", null, '"' + c(o.search) + '"', 1)]),
                _: 1
            })) : A("", !0)])]),
            default: T( () => [s[7] || (s[7] = v("1 ", -1))]),
            _: 1
        }, 8, ["onClose", "onTabChange", "tabs"])) : A("", !0)]),
        _: 1
    })
}
const K_ = O(H_, [["render", X_], ["__scopeId", "data-v-e9b4f6ca"]])
  , ke = e => s => s.name === e.name && s.role === e.role
  , Y_ = {
    components: {
        Reminder: la,
        Modal: se
    },
    inject: ["isTouchDevice"],
    computed: {
        ...M(["modal", "grimoire", "roles", "session", "settings", "rolesAvailable"]),
        ...M("players", ["players", "storytellers", "npcs", "bluffs"]),
        ...D(["roleIconURL"]),
        ...D("players", ["playerName"]),
        ...D("user", ["isStoryteller"]),
        user() {
            return this.modal.params.playerIndex === void 0 ? !1 : this.modal.params.playerIndex >= 0 ? this.players[this.modal.params.playerIndex] : this.storytellers[this.modal.params.playerIndex * -1 - 1]
        },
        userReminders() {
            var e, s, t, n;
            return this.modal.params.playerIndex === void 0 ? [] : this.modal.params.playerIndex >= 0 ? (s = (e = this.players[this.modal.params.playerIndex]) == null ? void 0 : e.reminders) != null ? s : [] : (n = (t = this.storytellers[this.modal.params.playerIndex * -1 - 1]) == null ? void 0 : t.reminders) != null ? n : []
        },
        currentReminders() {
            let e = [], s;
            try {
                s = new RegExp(this.search.trim(),"i")
            } catch {}
            [...this.players, ...this.storytellers].forEach( ({role: n, isDead: o}) => {
                !n || !Array.isArray(n.reminders) || o && this.players.some(i => i.role.id === n.id && !i.isDead) || (e = [...e, ...n.reminders.map(i => ({
                    role: n.id,
                    name: i,
                    isDead: o
                }))])
            }
            ),
            this.bluffs.forEach(n => {
                !n || !n.reminders || (e = [...e, ...n.reminders.map(o => ({
                    role: n.id,
                    name: o
                }))])
            }
            ),
            this.roles.forEach(n => {
                Array.isArray(n.remindersGlobal) && (e = [...e, ...n.remindersGlobal.map(o => ({
                    role: n.id,
                    name: o
                }))])
            }
            ),
            this.npcs.forEach(n => {
                var o;
                (o = n.reminders) != null && o.length && (e = [...e, ...n.reminders.map(i => ({
                    role: n.id,
                    name: i
                }))])
            }
            ),
            e = e.filter( (n, o, i) => i.findIndex(ke(n)) === o && (!this.modal.params.filter || n.name.toLocaleLowerCase() === this.modal.params.filter.toLocaleLowerCase()) && !this.userReminders.some(ke(n))),
            this.modal.params.filter || (e.push({
                role: "good",
                name: "Good"
            }),
            e.push({
                role: "evil",
                name: "Evil"
            })),
            this.grimoire.savedReminders.forEach(n => {
                e.push({
                    role: "custom",
                    name: n,
                    isSaved: !0
                })
            }
            ),
            e.push({
                role: "custom",
                name: this.$t("modals.reminder.custom_note")
            });
            const t = n => {
                var d, h, m, p, f, P;
                const o = (h = (d = n.name) == null ? void 0 : d.replace(/[^a-z0-9]/gi, "").toLowerCase()) != null ? h : ""
                  , i = (p = (m = n.role) == null ? void 0 : m.replace(/[^a-z0-9]/gi, "").toLowerCase()) != null ? p : ""
                  , l = this.$te(`reminders.${o}`) ? this.$t(`reminders.${o}`) : (f = n.name) != null ? f : ""
                  , g = this.$te(`roles.${i}.name`) ? this.$t(`roles.${i}.name`) : (P = n.role) != null ? P : "";
                return l + " " + g
            }
            ;
            return e = e.filter(n => !s || this.tab !== 0 || t(n).match(s)),
            e.sort( (n, o) => {
                var i, l;
                return this.sort.indexOf((i = this.roles.get(o.role)) == null ? void 0 : i.team) - this.sort.indexOf((l = this.roles.get(n.role)) == null ? void 0 : l.team)
            }
            ),
            e
        },
        otherReminders() {
            let e = [], s;
            try {
                s = new RegExp(this.search.trim(),"i")
            } catch {}
            return this.roles.forEach(t => {
                this.players.some(n => n.role === t) || this.storytellers.some(n => n.role === t) || this.bluffs.some(n => n === t) || Array.isArray(t.reminders) && (e = [...e, ...t.reminders.map(n => ({
                    role: t.id,
                    name: n
                }))])
            }
            ),
            this.userReminders.length && (e = [...e, ...this.userReminders.filter(t => [...this.roles].some( ([n]) => n === t.role) || this.npcs.some( ({id: n}) => n === t.role))]),
            e = e.filter( (t, n, o) => o.findIndex(ke(t)) === n && (!s || this.tab === 0 || (t.name + " " + t.role).match(s))),
            e.sort( (t, n) => {
                var o, i;
                return this.sort.indexOf((o = this.roles.get(n.role)) == null ? void 0 : o.team) - this.sort.indexOf((i = this.roles.get(t.role)) == null ? void 0 : i.team)
            }
            ),
            e
        },
        otherRemindersSlice() {
            return this.otherReminders.slice(this.pageOther * 47, this.pageOther * 47 + 47)
        },
        currentRemindersSlice() {
            return this.currentReminders.slice(this.page * 47, this.page * 47 + 47)
        }
    },
    data() {
        return {
            sort: ["demon", "minion", "outsider", "townsfolk"],
            page: 0,
            pageOther: 0,
            search: "",
            tab: 0
        }
    },
    methods: {
        ...U(["toggleModal", "toggleSavedReminder"]),
        ...U("players", ["updatePlayer", "updateStoryteller"]),
        keydown({key: e}) {
            const s = this.tab === 0 ? this.currentReminders : this.otherReminders;
            e === "Enter" && s.length === 1 ? this.addReminder(s[0]) : e === "Escape" && (this.search ? this.search = "" : this.close())
        },
        close() {
            document.getElementById("app").focus(),
            this.toggleModal(this.modal),
            this.search = ""
        },
        async addReminder(e) {
            var o, i, l, g, d;
            if (!this.user)
                return this.toggleModal(this.modal);
            const s = this.storytellers.includes(this.user)
              , t = "reminders";
            let n;
            if (e.role === "custom") {
                const h = this.user;
                try {
                    let m = e.isSaved ? e.name : "";
                    if (!m) {
                        const {value: p, checkbox: f} = await this.$store.dispatch("openDialogue", {
                            type: "prompt",
                            title: "modals.reminder.custom_title",
                            placeholder: "modals.reminder.custom_note",
                            checkbox: {
                                value: !1,
                                label: "modals.reminder.custom_favorite"
                            },
                            text: ["modals.reminder.custom_text", [this.$t(...this.playerName(h))]]
                        });
                        m = p,
                        f && m && this.toggleSavedReminder(m)
                    }
                    m && (n = [...h.reminders, {
                        role: "custom",
                        name: m
                    }],
                    s ? this.updateStoryteller({
                        storyteller: h,
                        property: t,
                        value: n
                    }) : this.updatePlayer({
                        player: h,
                        property: t,
                        value: n
                    }),
                    this.toggleModal())
                } catch {
                    this.toggleModal(this.modal)
                }
            } else {
                const h = [...this.players.filter(w => {
                    var B;
                    return (B = w.reminders) == null ? void 0 : B.some(ke(e))
                }
                ), ...this.storytellers.filter(w => {
                    var B;
                    return (B = w.reminders) == null ? void 0 : B.some(ke(e))
                }
                )]
                  , m = this.roles.get(e.role) || this.npcs.find(w => w.id === e.role) || this.rolesAvailable.get(e.role) || {}
                  , p = ((o = m.reminders) == null ? void 0 : o.filter(w => w === e.name).length) || ((i = m.remindersGlobal) == null ? void 0 : i.filter(w => w === e.name).length) || 1
                  , f = this.players.filter(w => w.role === m).length || 1;
                if (h.map(w => w.reminders).flat().filter(ke(e)).length >= p * f && (this.isStoryteller || !this.settings.game.isPlayerDuplicates) && !["good", "evil"].includes(e.role)) {
                    const w = h[0] === this.user && h[1] ? h[1] : h[0];
                    w.reminders.splice(w.reminders.findIndex(ke(e)), 1),
                    h !== this.user && (this.storytellers.includes(w) ? this.updateStoryteller({
                        storyteller: w,
                        property: t,
                        value: w.reminders
                    }) : this.updatePlayer({
                        player: w,
                        property: t,
                        value: w.reminders
                    }))
                }
                n = [...((l = this.user) == null ? void 0 : l.reminders) || [], {
                    role: e.role,
                    name: e.name
                }],
                s ? this.updateStoryteller({
                    storyteller: this.user,
                    property: t,
                    value: n
                }) : this.updatePlayer({
                    player: this.user,
                    property: t,
                    value: n
                }),
                ["marionette", "alchemist"].includes(e.role) && (["townsfolk", "outsider"].includes((g = this.user) == null ? void 0 : g.role.team) && e.role === "marionette" ? this.updatePlayer({
                    player: this.user,
                    property: "alignment",
                    value: "e"
                }) : ((d = this.user) == null ? void 0 : d.role.team) === "minion" && e.role === "alchemist" && this.updatePlayer({
                    player: this.user,
                    property: "alignment",
                    value: "g"
                })),
                this.toggleModal(this.modal)
            }
        },
        tabChange(e) {
            this.tab = e,
            this.search = "",
            this.page = 0,
            this.pageOther = 0,
            this.isTouchDevice || this.$nextTick( () => {
                var s, t;
                (s = this.$refs.search) == null || s.focus(),
                (t = this.$refs.search) == null || t.select()
            }
            )
        }
    }
}
  , J_ = ["placeholder"]
  , $_ = {
    class: "reminders"
}
  , x_ = {
    key: 0,
    class: "paging left"
}
  , ew = {
    key: 0,
    class: "paging right"
}
  , sw = {
    class: "reminders"
}
  , tw = {
    key: 0,
    class: "paging left"
}
  , iw = {
    key: 0,
    class: "paging right"
};
function ow(e, s, t, n, o, i) {
    const l = k("i18n-t")
      , g = k("Reminder")
      , d = k("font-awesome-icon")
      , h = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "reminder" && i.user ? (r(),
        C(h, {
            key: 0,
            name: "reminders",
            onClose: s[6] || (s[6] = m => i.close()),
            onTabChange: i.tabChange,
            tabs: [e.$t("modals.reminder.tab1"), e.$t("modals.reminder.tab2")],
            id: "reminders"
        }, {
            header: T( () => [b(l, {
                tag: "div",
                keypath: "modals.reminder.title",
                class: "title",
                scope: "global"
            }, {
                default: T( () => [a("b", null, c(e.$t(...e.playerName(i.user))), 1)]),
                _: 1
            }), z(a("input", {
                ref: "search",
                "onUpdate:modelValue": s[0] || (s[0] = m => o.search = m),
                placeholder: e.$t("common.button_search"),
                onKeydown: s[1] || (s[1] = R( (...m) => i.keydown && i.keydown(...m), ["stop"]))
            }, null, 40, J_), [[G, o.search]])]),
            "tab-0": T( () => [a("ul", $_, [(r(!0),
            u(y, null, N(i.currentRemindersSlice, (m, p) => (r(),
            u(y, {
                key: p
            }, [a("li", null, [b(g, {
                reminder: m,
                class: _({
                    dead: m.isDead
                }),
                onClick: f => i.addReminder(m)
            }, null, 8, ["reminder", "class", "onClick"])]), i.currentReminders.length > i.currentRemindersSlice.length && p + 1 === i.currentRemindersSlice.length - i.currentRemindersSlice.length % 7 ? (r(),
            u("li", x_, [o.page ? (r(),
            C(d, {
                key: 0,
                icon: "arrow-circle-left",
                onClick: s[2] || (s[2] = f => o.page -= 1)
            })) : A("", !0)])) : A("", !0)], 64))), 128)), i.currentReminders.length > i.currentRemindersSlice.length ? (r(),
            u("li", ew, [o.page < Math.floor((i.currentReminders.length - 1) / 47) ? (r(),
            C(d, {
                key: 0,
                onClick: s[3] || (s[3] = m => o.page += 1),
                icon: "arrow-circle-right"
            })) : A("", !0)])) : A("", !0)])]),
            "tab-1": T( () => [a("ul", sw, [(r(!0),
            u(y, null, N(i.otherRemindersSlice, (m, p) => (r(),
            u(y, {
                key: p
            }, [i.otherReminders.length > i.otherRemindersSlice.length && p === i.otherRemindersSlice.length - i.otherRemindersSlice.length % 7 ? (r(),
            u("li", tw, [o.pageOther ? (r(),
            C(d, {
                key: 0,
                icon: "arrow-circle-left",
                onClick: s[4] || (s[4] = f => o.pageOther -= 1)
            })) : A("", !0)])) : A("", !0), a("li", null, [b(g, {
                reminder: m,
                class: _({
                    dead: m.isDead
                }),
                onClick: f => i.addReminder(m)
            }, null, 8, ["reminder", "class", "onClick"])])], 64))), 128)), i.otherReminders.length > i.otherRemindersSlice.length ? (r(),
            u("li", iw, [o.pageOther < Math.floor((i.otherReminders.length - 1) / 47) ? (r(),
            C(d, {
                key: 0,
                onClick: s[5] || (s[5] = m => o.pageOther += 1),
                icon: "arrow-circle-right"
            })) : A("", !0)])) : A("", !0)])]),
            _: 1
        }, 8, ["onTabChange", "tabs"])) : A("", !0)]),
        _: 1
    })
}
const nw = O(Y_, [["render", ow], ["__scopeId", "data-v-d75444e0"]])
  , aw = {
    components: {
        Reminder: la,
        Token: ve,
        Modal: se
    },
    computed: {
        ...M(["modal", "roles", "rolesAvailable", "session", "grimoire", "game", "definitions"]),
        ...M("players", ["players", "bluffs", "npcs", "storytellers"]),
        ...M("user", ["user"]),
        ...D(["roleIconURL", "filterAbilities"]),
        ...D("players", ["playerName", "seatedPlayerMap"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess", "getOpenEyes", "isSpectator"]),
        availableRoles() {
            const e = [];
            return this.roles.forEach(s => {
                this.definitions.NPC_TEAMS.includes(s.team) || s.team !== "traveller" && e.push(s)
            }
            ),
            this.players.forEach(s => {
                s.role.id && !e.includes(s.role) && e.push(s.role)
            }
            ),
            this.editPlayer < 0 && this.npcs.forEach(s => e.push(s)),
            e
        },
        playerAlignment() {
            var e, s, t, n, o, i;
            return (e = this.modal.params.player) != null && e.alignment ? ((s = this.modal.params.player) == null ? void 0 : s.alignment) === "g" ? "good" : "evil" : ["minion", "demon"].includes((n = (t = this.modal.params.player) == null ? void 0 : t.role) == null ? void 0 : n.team) ? "evil" : ["townsfolk", "outsider"].includes((i = (o = this.modal.params.player) == null ? void 0 : o.role) == null ? void 0 : i.team) ? "good" : ""
        },
        allRoles() {
            return new Map([...this.$store.state.npcs, ...this.rolesAvailable, ...this.roles])
        },
        canSignal() {
            var e;
            if (!this.$store.getters["game/isNight"])
                return !1;
            if (this.isStoryteller && this.modal.params.player) {
                const s = this.modal.params.player;
                return ((e = this.session.users.get(s.id)) == null ? void 0 : e.isOnline) && this.message.length
            } else if (this.seatedPlayerMap.has(this.user.id) && !this.modal.params.player)
                return (this.session.signals.storyteller || []).length;
            return !1
        },
        messageLog() {
            return (this.session.signals[(this.hasGrimoireAccess || this.getOpenEyes === "open-eyes") && this.modal.params.player ? this.modal.params.player.id : "storyteller"] || []).map( ({message: s, isInbound: t}) => ({
                message: s.map(n => [...this.signals, ...this.cards].find( ({id: o}) => n.id === o) || n),
                isInbound: t
            })).slice(this.hasGrimoireAccess ? -10 : -3)
        },
        bluffsVisible() {
            return this.players.length > 6 || this.npcs.some( ({id: e}) => e === "toymaker")
        },
        nightReminder() {
            const {player: e} = this.modal.params;
            return e != null && e.role ? e.role.firstNightReminder && this.game.phase <= 1 ? this.$te(`roles.${e.role.id}.first`) ? this.$t(`roles.${e.role.id}.first`) : e.role.firstNightReminder : e.role.otherNightReminder && this.game.phase > 1 ? this.$te(`roles.${e.role.id}.other`) ? this.$t(`roles.${e.role.id}.other`) : e.role.otherNightReminder : "" : ""
        },
        warning() {
            var s, t;
            const {player: e} = this.modal.params;
            return e ? ((s = e.role) == null ? void 0 : s.team) === "townsfolk" && this.players.some(n => {
                var o;
                return ((o = n.role) == null ? void 0 : o.id) === "vortox" && !n.isDead && !n.isMarkedForDeath
            }
            ) ? this.$t("modals.signal.warning_vortox") : (t = e.reminders) != null && t.some(n => n.name.match(/drunk|poisoned|marionette/i) && !n.isFlipped && n.role !== "custom") || [...this.players, ...this.storytellers].some( ({reminders: n}) => n.some(o => {
                var i, l;
                return o.role === "minstrel" && !o.isFlipped && ((i = e.role) == null ? void 0 : i.team) !== "traveller" && ((l = e.role) == null ? void 0 : l.id) !== "minstrel"
            }
            )) ? this.$t("modals.signal.warning_droison") : e.isDead || e.isMarkedForDeath ? this.$t("modals.signal.warning_dead") : "" : ""
        },
        specialSignals() {
            var s;
            const e = {
                player: [],
                card: [],
                other: []
            };
            return this.filterAbilities((s = this.modal.params.player) != null ? s : this.seatedPlayerMap.get(this.user.id), "signal").forEach( ({role: t, ability: n}) => {
                e[n.name] ? e[n.name].push({
                    role: t,
                    ability: n
                }) : e.other.push({
                    role: t,
                    ability: n
                })
            }
            ),
            e
        }
    },
    inject: ["renderReminderHTML"],
    data() {
        return {
            message: [],
            panel: "signal",
            playersCopy: [],
            storytellersCopy: [],
            bluffsCopy: [],
            editPlayer: -1,
            isEditable: !0,
            recipients: [],
            isSelectingPlayer: !1,
            selectedRoles: new Map,
            selectedPlayers: new Map,
            signals: [{
                id: "acknowledge",
                icon: "thumbs-up",
                player: !0
            }, {
                id: "yes",
                icon: "check-circle",
                player: !0
            }, {
                id: "no",
                icon: "times-circle",
                player: !0
            }, {
                id: "good",
                icon: "thumbs-up"
            }, {
                id: "neutral",
                icon: "hand-point-right",
                limit: "general"
            }, {
                id: "evil",
                icon: "thumbs-down"
            }, {
                id: "clockwise",
                icon: "rotate-right",
                limit: "shugenja"
            }, {
                id: "anticlockwise",
                icon: "rotate-left",
                limit: "shugenja"
            }, {
                id: "zero",
                icon: "square"
            }, {
                id: "one",
                icon: "dice-one"
            }, {
                id: "two",
                icon: "dice-two"
            }, {
                id: "three",
                icon: "dice-three"
            }, {
                id: "four",
                icon: "dice-four"
            }, {
                id: "five",
                icon: "dice-five"
            }],
            cards: [{
                id: "ability"
            }, {
                id: "choice"
            }, {
                id: "bluffs"
            }, {
                id: "demon"
            }, {
                id: "minions"
            }, {
                id: "you"
            }, {
                id: "claim"
            }, {
                id: "selected"
            }]
        }
    },
    methods: {
        ...U(["toggleModal", "setPlayerSelectCallback"]),
        getCardBackground(e) {
            return {
                backgroundImage: `url(${new URL(Object.assign({
                    "/src/assets/icons/card-ability.webp": Gs,
                    "/src/assets/icons/card-bluffs.webp": Ws,
                    "/src/assets/icons/card-choice.webp": Fs,
                    "/src/assets/icons/card-claim.webp": Qs,
                    "/src/assets/icons/card-demon.webp": Zs,
                    "/src/assets/icons/card-minions.webp": Xs,
                    "/src/assets/icons/card-selected.webp": Ks,
                    "/src/assets/icons/card-special.webp": Ys,
                    "/src/assets/icons/card-you.webp": Js
                })[`/src/assets/icons/card-${e}.webp`],import.meta.url).href})`
            }
        },
        messageAdd(e) {
            this.message.push(e),
            this.selectedRoles.clear(),
            this.selectedPlayers.clear()
        },
        messageRemove(e) {
            this.message.splice(e, 1),
            this.selectedRoles.clear(),
            this.selectedPlayers.clear()
        },
        messageClear() {
            this.message = [],
            this.selectedRoles.clear(),
            this.selectedPlayers.clear()
        },
        addCard(e) {
            var s, t, n, o;
            switch (this.messageAdd(e),
            e.id) {
            case "selected":
                this.panel = "role";
                break;
            case "you":
                this.playerAlignment && this.messageAdd(this.signals.find(i => i.id === this.playerAlignment)),
                (t = (s = this.modal.params.player) == null ? void 0 : s.role) != null && t.id ? this.messageAdd({
                    id: "role",
                    data: (o = (n = this.modal.params.player) == null ? void 0 : n.role) == null ? void 0 : o.id
                }) : this.panel = "role";
                break;
            case "claim":
                this.selectPlayer();
                break;
            case "bluffs":
                this.bluffs.forEach(i => {
                    i.id && this.messageAdd({
                        id: "role",
                        data: i.id
                    })
                }
                );
                break;
            case "demon":
                this.players.forEach( (i, l) => {
                    var g, d, h, m;
                    (((g = i.role) == null ? void 0 : g.team) === "demon" || ((h = (d = this.modal.params.player) == null ? void 0 : d.role) == null ? void 0 : h.team) !== "traveller" && ((m = i.role) == null ? void 0 : m.id) === "magician" && !i.reminders.some(p => ["drunk"].includes(p.role) || ["drunk", "poisoned"].includes(p.name.toLowerCase()))) && this.messageAdd({
                        id: "player",
                        data: l
                    })
                }
                );
                break;
            case "minions":
                this.players.forEach( (i, l) => {
                    var g, d, h, m, p;
                    (((g = i.role) == null ? void 0 : g.team) === "minion" || ((d = i.role) == null ? void 0 : d.id) === "magician" && !i.reminders.some(f => ["drunk"].includes(f.role) || ["drunk", "poisoned"].includes(f.name.toLowerCase()))) && (((h = i.role) == null ? void 0 : h.id) !== "marionette" || ((p = (m = this.modal.params.player) == null ? void 0 : m.role) == null ? void 0 : p.team) === "demon") && !i.reminders.some(f => ["drunk", "alchemist"].includes(f.role)) && this.messageAdd({
                        id: "player",
                        data: l
                    })
                }
                );
                break
            }
        },
        addRole(e) {
            var s;
            if (!e && this.editPlayer < 0) {
                this.panel = "signal";
                return
            }
            this.editPlayer > -1 ? (this.playersCopy[this.editPlayer].role = e,
            this.playersCopy[this.editPlayer].alignment = null,
            this.editPlayer = -1,
            this.panel = "show") : ((s = this.message.slice(-1).pop()) == null ? void 0 : s.id) === "bluffs" ? (this.selectedRoles.has(e) ? this.selectedRoles.delete(e) : this.selectedRoles.set(e, e),
            this.selectedRoles.size === 3 && ([...this.selectedRoles.keys()].forEach(t => {
                this.messageAdd({
                    id: "role",
                    data: t
                })
            }
            ),
            this.panel = "signal")) : (this.messageAdd({
                id: "role",
                data: e
            }),
            this.panel = "signal")
        },
        addRecipient(e) {
            const s = this.players[e];
            s.id && !this.recipients.includes(s.id) && s.id !== this.modal.params.player.id && this.recipients.push(s.id)
        },
        addPlayer(e) {
            var n, o;
            const s = (n = this.message.slice(-1).pop()) == null ? void 0 : n.id
              , t = ((o = ze[this.$store.getters["players/nonTravellers"]]) == null ? void 0 : o.minion) || 0;
            this.panel === "recipient" ? (this.addRecipient(e),
            this.selectPlayer("recipient")) : s === "minions" && t > 1 ? (this.selectedPlayers.has(e) ? this.selectedPlayers.delete(e) : this.selectedPlayers.set(e, e),
            this.selectedPlayers.size === t && ([...this.selectedPlayers.keys()].forEach(i => {
                this.messageAdd({
                    id: "player",
                    data: i
                })
            }
            ),
            this.selectPlayer())) : s === "claim" ? (this.messageAdd({
                id: "player",
                data: e
            }),
            this.isSelectingPlayer = !1,
            this.setPlayerSelectCallback(),
            this.panel = "role") : (this.messageAdd({
                id: "player",
                data: e
            }),
            this.selectPlayer())
        },
        selectPlayer(e="player", s=!1) {
            if (this.panel !== e)
                this.panel = e,
                this.isSelectingPlayer = !0,
                this.setPlayerSelectCallback(t => {
                    this.isSelectingPlayer ? this.addPlayer(t) : this.setPlayerSelectCallback()
                }
                );
            else {
                if (this.isSelectingPlayer && (this.isSelectingPlayer = !1,
                this.setPlayerSelectCallback()),
                s)
                    for (let t = 0; t < this.players.length; t++)
                        this.addRecipient(t);
                this.panel = "signal"
            }
        },
        async addCustom() {
            const e = Object.assign({}, this.modal.params, {
                skipClear: !0
            });
            try {
                const s = await this.$store.dispatch("openDialogue", {
                    type: "prompt",
                    title: "modals.signal.prompt_custom_title",
                    placeholder: "modals.signal.prompt_custom_placeholder",
                    text: `modals.signal.prompt_custom_${this.isStoryteller ? "st" : "player"}`
                });
                s && this.messageAdd({
                    id: "custom",
                    data: s
                })
            } catch {}
            this.toggleModal({
                name: "signal",
                params: e
            })
        },
        sendSignal() {
            if (!this.canSignal || !this.message.length)
                return;
            const e = {
                message: this.message,
                userIds: ["storyteller"]
            };
            this.isStoryteller && this.modal.params.player && e.userIds.push(this.modal.params.player.id),
            this.recipients.forEach(s => {
                var t;
                (t = this.session.users.get(s)) != null && t.isOnline && e.userIds.push(s)
            }
            ),
            this.$store.commit("session/addSignal", e),
            this.messageClear()
        },
        showSignal(e) {
            e.id === "grimoire" && (this.playersCopy = e.data.players,
            this.storytellersCopy = e.data.storytellers,
            this.bluffsCopy = e.data.bluffs,
            this.isEditable = !1,
            this.panel = "show")
        },
        useAbility(e) {
            switch (e.name) {
            case "grimoire":
                this.copyGrimoire();
                break
            }
        },
        getPlayerAlignment(e) {
            return e ? ["minion", "demon"].includes(e == null ? void 0 : e.role.team) && e.alignment !== "g" || e.alignment === "e" ? "evil" : ["townsfolk", "outsider"].includes(e == null ? void 0 : e.role.team) && e.alignment !== "g" || e.alignment === "g" ? "good" : "" : ""
        },
        copyGrimoire() {
            this.isStoryteller && (this.playersCopy = [],
            this.players.forEach(e => {
                const s = {
                    role: e.role.id,
                    ...e.alignment ? {
                        alignment: e.alignment
                    } : {},
                    reminders: []
                };
                e.reminders.forEach(t => {
                    t.role !== "custom" && s.reminders.push(t)
                }
                ),
                this.playersCopy.push(s)
            }
            ),
            this.storytellersCopy = [],
            this.storytellers.forEach(e => {
                if (!e.role.id && !e.reminders.length)
                    return;
                const s = {
                    role: e.role.id,
                    ...e.alignment ? {
                        alignment: e.alignment
                    } : {},
                    reminders: []
                };
                e.reminders.forEach(t => {
                    t.role !== "custom" && s.reminders.push(t)
                }
                ),
                this.storytellersCopy.push(s)
            }
            ),
            this.bluffsCopy = [],
            this.bluffsVisible && this.bluffs.forEach(e => {
                this.bluffsCopy.push(e.id)
            }
            ),
            this.isEditable = !0,
            this.panel = "show")
        },
        changeRole(e) {
            this.isEditable && (this.editPlayer = e,
            this.panel = "role")
        },
        removeReminder(e, s) {
            this.isEditable && e.reminders.splice(s, 1)
        },
        addGrimoire() {
            this.messageAdd({
                id: "grimoire",
                data: {
                    players: this.playersCopy,
                    storytellers: this.storytellersCopy,
                    bluffs: this.bluffsCopy
                }
            }),
            this.panel = "signal"
        }
    },
    watch: {
        "modal.name"() {
            this.modal.name === "signal" ? (this.messageLog.length && this.messageLog[this.messageLog.length - 1].isInbound && this.$store.commit("session/markSignalsAsRead", this.hasGrimoireAccess && this.modal.params.player ? this.modal.params.player.id : "storyteller"),
            this.panel = "signal",
            this.modal.params.skipClear || (this.message = [],
            this.recipients = [])) : this.isSelectingPlayer && (this.isSelectingPlayer = !1,
            this.setPlayerSelectCallback())
        }
    }
}
  , rw = {
    key: 0,
    class: "recipients"
}
  , lw = ["onClick"]
  , cw = {
    key: 0,
    class: "log"
}
  , dw = {
    key: 0
}
  , uw = ["onClick"]
  , gw = {
    key: 0,
    class: "new message"
}
  , mw = {
    key: 0
}
  , hw = ["onClick"]
  , pw = {
    class: "trash"
}
  , Aw = {
    key: 1,
    class: "signals"
}
  , bw = ["innerHTML"]
  , fw = {
    key: 1,
    class: "warning"
}
  , vw = ["onClick"]
  , yw = ["onClick"]
  , _w = ["onClick"]
  , ww = ["onClick"]
  , kw = ["onClick"]
  , Cw = {
    class: "short"
}
  , Sw = {
    key: 0,
    class: "players"
}
  , Pw = {
    class: "button-group"
}
  , Tw = {
    class: "roles"
}
  , Iw = {
    key: 0,
    class: "break"
}
  , Mw = ["onClick"]
  , Rw = {
    class: "button-group"
}
  , Dw = {
    class: "center"
}
  , Ew = {
    key: 0,
    class: "bluffs"
}
  , Nw = {
    key: 1,
    class: "storytellers"
}
  , Bw = {
    class: "reminders"
}
  , Vw = {
    key: 0,
    class: "reminders"
}
  , Ow = {
    class: "button-group"
};
function jw(e, s, t, n, o, i) {
    const l = k("i18n-t")
      , g = k("font-awesome-icon")
      , d = k("Token")
      , h = k("Reminder")
      , m = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "signal" ? (r(),
        C(m, {
            key: 0,
            onClose: s[11] || (s[11] = p => e.toggleModal(e.modal)),
            class: _(["signals", "panel-" + o.panel])
        }, {
            header: T( () => {
                var p;
                return [o.panel === "signal" && e.isStoryteller && e.modal.params.player ? (r(),
                u("div", rw, [b(l, {
                    keypath: "modals.signal.title",
                    scope: "global"
                }, {
                    default: T( () => [a("b", null, c(e.$t(...e.playerName(e.modal.params.player))), 1)]),
                    _: 1
                }), v(" " + c(o.recipients.length ? "+" : "") + " ", 1), (r(!0),
                u(y, null, N(o.recipients, (f, P) => {
                    var w;
                    return r(),
                    u("span", {
                        class: "recipient",
                        key: f,
                        onClick: B => o.recipients.splice(P, 1)
                    }, c(((w = e.session.users.get(f)) == null ? void 0 : w.username) || f), 9, lw)
                }
                ), 128)), b(g, {
                    onClick: s[0] || (s[0] = f => i.selectPlayer("recipient")),
                    icon: "user-plus"
                })])) : o.panel === "signal" && e.seatedPlayerMap.has(e.user.id) && !((p = e.modal.params.player) != null && p.id) ? (r(),
                u(y, {
                    key: 1
                }, [v(c(e.$t("modals.signal.title_st")), 1)], 64)) : o.panel === "signal" ? (r(),
                u(y, {
                    key: 2
                }, [v(c(e.$t("modals.signal.title_spec", [e.$t(...e.playerName(e.modal.params.player))])), 1)], 64)) : o.panel === "player" || o.panel === "recipient" ? (r(),
                u(y, {
                    key: 3
                }, [v(c(e.$t("modals.signal.title_player")), 1)], 64)) : o.panel === "role" ? (r(),
                u(y, {
                    key: 4
                }, [v(c(e.$t("modals.signal.title_character")), 1)], 64)) : o.panel === "show" ? (r(),
                u(y, {
                    key: 5
                }, [v(c(e.$t("modals.signal.grimoire")), 1)], 64)) : A("", !0)]
            }
            ),
            default: T( () => [o.panel === "signal" ? (r(),
            u(y, {
                key: 0
            }, [i.messageLog.length || o.message.length ? (r(),
            u("ul", cw, [b(We, {
                name: "list"
            }, {
                default: T( () => [(r(!0),
                u(y, null, N(i.messageLog, (p, f) => {
                    var P;
                    return r(),
                    u("li", {
                        key: f,
                        class: "message"
                    }, [a("b", {
                        class: _({
                            sent: !p.isInbound
                        })
                    }, [b(g, {
                        icon: "arrow-circle-" + (p.isInbound ? "left" : "right")
                    }, null, 8, ["icon"]), s[12] || (s[12] = v("Â  ", -1)), e.isStoryteller || !((P = e.modal.params.player) != null && P.id) ? (r(),
                    u(y, {
                        key: 0
                    }, [v(c(p.isInbound ? e.$t("modals.signal.received") : e.$t("modals.signal.sent")) + ": ", 1)], 64)) : (r(),
                    u(y, {
                        key: 1
                    }, [v(c(p.isInbound ? e.$t("modals.signal.player") : e.$t("modals.signal.storyteller")) + ": ", 1)], 64))], 2), a("p", null, [(r(!0),
                    u(y, null, N(p.message, (w, B) => {
                        var j, V, S;
                        return r(),
                        u(y, {
                            key: B
                        }, [!w.icon && B > 0 && !["custom", "role", "player", "seen"].includes(w.id) ? (r(),
                        u("hr", dw)) : A("", !0), a("div", {
                            class: _(w.icon ? "icon" : "card-" + w.id),
                            onClick: E => i.showSignal(w)
                        }, [w.id === "player" ? (r(),
                        u(y, {
                            key: 0
                        }, [b(g, {
                            icon: "user",
                            class: _(i.getPlayerAlignment(e.players[w.data]))
                        }, null, 8, ["class"]), v(" " + c(e.$t(...e.playerName(e.players[w.data]))), 1)], 64)) : w.id === "role" ? (r(),
                        u(y, {
                            key: 1
                        }, [i.allRoles.has(w.data) ? (r(),
                        u("span", {
                            key: 0,
                            class: "icon",
                            style: q({
                                backgroundImage: `url(${e.roleIconURL(i.allRoles.get(w.data))})`
                            })
                        }, null, 4)) : A("", !0), a("span", {
                            class: _((j = i.allRoles.get(w.data)) == null ? void 0 : j.team)
                        }, c(e.$te(`roles.${w.data}.name`) ? e.$t(`roles.${w.data}.name`) : (V = i.allRoles.get(w.data)) == null ? void 0 : V.name), 3)], 64)) : w.id === "custom" ? (r(),
                        u(y, {
                            key: 2
                        }, [b(g, {
                            icon: "comment-dots"
                        }), v(" " + c(w.data), 1)], 64)) : w.id === "grimoire" ? (r(),
                        u(y, {
                            key: 3
                        }, [b(g, {
                            icon: "book-dead"
                        }), v(" " + c(e.$t("modals.signal.grimoire")), 1)], 64)) : w.id === "seen" ? (r(),
                        u(y, {
                            key: 4
                        }, [b(g, {
                            icon: "eye",
                            class: _(i.getPlayerAlignment(e.players.find(E => E.id === w.data)))
                        }, null, 8, ["class"]), v(" " + c(e.$t("modals.signal.saw_this", [e.$t(...e.playerName({
                            id: w.data
                        }))])), 1)], 64)) : w.id === "special" ? (r(),
                        u(y, {
                            key: 5
                        }, [a("span", {
                            class: "icon",
                            style: q(i.getCardBackground(w.id))
                        }, null, 4), v(" " + c(((S = e.roles.get(w.role)) == null ? void 0 : S.name) + ":") + " " + c(w.description), 1)], 64)) : (r(),
                        u(y, {
                            key: 6
                        }, [w.icon ? (r(),
                        C(g, {
                            key: 0,
                            icon: w.icon
                        }, null, 8, ["icon"])) : (r(),
                        u("span", {
                            key: 1,
                            class: "icon",
                            style: q(i.getCardBackground(w.id))
                        }, null, 4)), v(" " + c(e.$t(`modals.signal.cards.${w.id}`)), 1)], 64))], 10, uw)], 64)
                    }
                    ), 128))])])
                }
                ), 128)), o.message.length ? (r(),
                u("li", gw, [a("b", null, [b(g, {
                    icon: "circle-plus"
                }), v(" " + c(e.isStoryteller ? e.$t("modals.signal.message") : e.$t("modals.signal.response")), 1)]), a("p", null, [(r(!0),
                u(y, null, N(o.message, (p, f) => {
                    var P, w, B;
                    return r(),
                    u(y, {
                        key: f
                    }, [!p.icon && f > 0 && !["custom", "role", "player", "seen"].includes(p.id) ? (r(),
                    u("hr", mw)) : A("", !0), a("div", {
                        class: _(p.icon ? "icon" : "card-" + p.id),
                        onClick: j => i.messageRemove(f)
                    }, [p.id === "player" ? (r(),
                    u(y, {
                        key: 0
                    }, [b(g, {
                        icon: "user",
                        class: _(i.getPlayerAlignment(e.players[p.data]))
                    }, null, 8, ["class"]), v(" " + c(e.$t(...e.playerName(e.players[p.data]))), 1)], 64)) : p.id === "role" ? (r(),
                    u(y, {
                        key: 1
                    }, [i.allRoles.has(p.data) ? (r(),
                    u("span", {
                        key: 0,
                        class: "icon",
                        style: q({
                            backgroundImage: `url(${e.roleIconURL(i.allRoles.get(p.data))})`
                        })
                    }, null, 4)) : A("", !0), a("span", {
                        class: _((P = i.allRoles.get(p.data)) == null ? void 0 : P.team)
                    }, c(e.$te(`roles.${p.data}.name`) ? e.$t(`roles.${p.data}.name`) : (w = i.allRoles.get(p.data)) == null ? void 0 : w.name), 3)], 64)) : p.id === "custom" ? (r(),
                    u(y, {
                        key: 2
                    }, [b(g, {
                        icon: "comment-dots"
                    }), v(" " + c(p.data), 1)], 64)) : p.id === "grimoire" ? (r(),
                    u(y, {
                        key: 3
                    }, [b(g, {
                        icon: "book-dead"
                    }), v(" " + c(e.$t("modals.signal.grimoire")), 1)], 64)) : p.id === "special" ? (r(),
                    u(y, {
                        key: 4
                    }, [a("span", {
                        class: "icon",
                        style: q(i.getCardBackground(p.id))
                    }, null, 4), v(" " + c(((B = e.roles.get(p.role)) == null ? void 0 : B.name) + ":") + " " + c(p.description), 1)], 64)) : (r(),
                    u(y, {
                        key: 5
                    }, [p.icon ? (r(),
                    C(g, {
                        key: 0,
                        icon: p.icon
                    }, null, 8, ["icon"])) : (r(),
                    u("span", {
                        key: 1,
                        class: "icon",
                        style: q(i.getCardBackground(p.id))
                    }, null, 4)), v(" " + c(p.role ? p.role + ":" : "") + " " + c(e.$t(`modals.signal.cards.${p.id}`)), 1)], 64))], 10, hw)], 64)
                }
                ), 128))]), a("div", pw, [b(g, {
                    onClick: s[1] || (s[1] = p => i.messageClear()),
                    icon: "trash-alt"
                })])])) : A("", !0)]),
                _: 1
            })])) : A("", !0), e.isStoryteller || i.canSignal ? (r(),
            u("ul", Aw, [i.nightReminder ? (r(),
            u("li", {
                key: 0,
                class: "reminder",
                innerHTML: i.renderReminderHTML(i.nightReminder)
            }, null, 8, bw)) : A("", !0), i.warning ? (r(),
            u("li", fw, [b(g, {
                icon: "exclamation-triangle"
            }), v(" " + c(i.warning), 1)])) : A("", !0), (r(!0),
            u(y, null, N(i.specialSignals.player, ({ability: p, role: f}, P) => (r(),
            u("li", {
                key: P,
                class: "signal player-special player-usable player-only",
                onClick: w => i.messageAdd({
                    id: "special",
                    icon: "star",
                    role: f.id,
                    description: p.value
                })
            }, [b(g, {
                icon: "star"
            }), v(" " + c(e.$te(`roles.${f.id}.name`) ? e.$t(`roles.${f.id}.name`) : f.name) + ": " + c(p.value), 1)], 8, vw))), 128)), (r(!0),
            u(y, null, N(o.signals.filter(p => {
                var f;
                return !p.limit || p.limit === ((f = e.modal.params.player) == null ? void 0 : f.role.id)
            }
            ), p => (r(),
            u("li", {
                key: p.id,
                class: _([{
                    "player-usable": p.player,
                    "player-only": p.playerOnly
                }, "signal"]),
                onClick: f => i.messageAdd(p)
            }, [b(g, {
                icon: p.icon
            }, null, 8, ["icon"]), v(" " + c(e.$t(`modals.signal.cards.${p.id}`)), 1)], 10, yw))), 128)), s[13] || (s[13] = a("li", {
                class: "break"
            }, null, -1)), a("li", {
                class: "signal player player-usable",
                onClick: s[2] || (s[2] = p => i.selectPlayer())
            }, [b(g, {
                icon: "user"
            }), v(" " + c(e.$t("modals.signal.player")), 1)]), a("li", {
                class: "signal character player-usable",
                onClick: s[3] || (s[3] = p => o.panel = "role")
            }, [b(g, {
                icon: "theater-masks"
            }), v(" " + c(e.$t("modals.signal.character")), 1)]), a("li", {
                class: "signal custom player-usable",
                onClick: s[4] || (s[4] = p => i.addCustom())
            }, [b(g, {
                icon: "comment-dots"
            }), v(" " + c(e.$t("modals.signal.custom")), 1)]), e.isStoryteller && e.modal.params.player ? (r(!0),
            u(y, {
                key: 2
            }, N(i.specialSignals.other, ({ability: p, role: f}, P) => (r(),
            u("li", {
                key: P,
                class: "special",
                onClick: w => i.useAbility(p)
            }, [b(g, {
                icon: "star"
            }), v(" " + c(e.$te(`roles.${f.id}.name`) ? e.$t(`roles.${f.id}.name`) : f.name) + ": " + c(e.$t(`grimoire.abilities.${p.name}`)), 1)], 8, _w))), 128)) : A("", !0), s[14] || (s[14] = a("li", {
                class: "break"
            }, null, -1)), (r(!0),
            u(y, null, N(i.specialSignals.card, ({role: p, ability: f}, P) => (r(),
            u("li", {
                key: P,
                class: _(["card card-special", {
                    included: o.message.some(w => w.id === "special" && w.description === f.value && w.role === p.id)
                }]),
                onClick: w => i.addCard({
                    id: "special",
                    role: p.id,
                    description: f.value
                })
            }, [a("span", {
                class: "icon",
                style: q(i.getCardBackground("special"))
            }, null, 4), v(" " + c(e.$te(`roles.${p.id}.name`) ? e.$t(`roles.${p.id}.name`) : p.name) + ": " + c(f.value), 1)], 10, ww))), 128)), (r(!0),
            u(y, null, N(o.cards, p => (r(),
            u("li", {
                key: p.id,
                class: _({
                    card: !0,
                    ["card-" + p.id]: !0,
                    included: o.message.includes(p)
                }),
                onClick: f => i.addCard(p)
            }, [a("span", {
                class: "icon",
                style: q(i.getCardBackground(p.id))
            }, null, 4), v(" " + c(e.$t(`modals.signal.cards.${p.id}`)), 1)], 10, kw))), 128))])) : A("", !0), a("div", {
                class: _(["button-group send", {
                    enabled: o.message.length
                }])
            }, [a("div", {
                class: _(["button primary", {
                    disabled: !i.canSignal
                }]),
                onClick: s[5] || (s[5] = p => i.sendSignal())
            }, c(e.$t("common.button_send")), 3)], 2)], 64)) : o.panel === "player" || o.panel === "recipient" ? (r(),
            u(y, {
                key: 1
            }, [a("p", Cw, c(e.$t("modals.signal.player_text")), 1), o.selectedPlayers.size ? (r(),
            u("div", Sw, [a("b", null, c(e.$t("modals.signal.selected_players")) + ":", 1), s[15] || (s[15] = v("Â  ", -1)), (r(!0),
            u(y, null, N(o.selectedPlayers, ([p]) => (r(),
            u("span", {
                key: p
            }, c(e.$t(...e.playerName(e.players[p]))), 1))), 128))])) : A("", !0), a("div", Pw, [o.panel === "recipient" ? (r(),
            u("span", {
                key: 0,
                class: "button primary",
                onClick: s[6] || (s[6] = p => i.selectPlayer(o.panel, !0))
            }, c(e.$t("modals.signal.select_everyone")), 1)) : A("", !0), a("span", {
                class: "button",
                onClick: s[7] || (s[7] = p => i.selectPlayer(o.panel))
            }, c(e.$t("common.button_cancel")), 1)])], 64)) : o.panel === "role" ? (r(),
            u(y, {
                key: 2
            }, [a("ul", Tw, [(r(!0),
            u(y, null, N(i.availableRoles, (p, f) => (r(),
            u(y, {
                key: p.id
            }, [f && i.availableRoles[f - 1].team !== p.team ? (r(),
            u("li", Iw)) : A("", !0), a("li", {
                class: _({
                    [p.team]: !0,
                    selected: o.selectedRoles.has(p.id)
                }),
                onClick: P => i.addRole(p.id)
            }, [p.id ? (r(),
            u("span", {
                key: 0,
                class: "icon",
                style: q({
                    backgroundImage: `url(${e.roleIconURL(p)})`
                })
            }, null, 4)) : A("", !0), v(" " + c(e.$te(`roles.${p.id}.name`) ? e.$t(`roles.${p.id}.name`) : p.name), 1)], 10, Mw)], 64))), 128))]), a("div", Rw, [a("span", {
                class: "button",
                onClick: s[8] || (s[8] = p => i.addRole())
            }, c(e.$t("common.button_cancel")), 1)])], 64)) : o.panel === "show" ? (r(),
            u(y, {
                key: 3
            }, [a("div", {
                class: _(["grimoire", {
                    static: !o.isEditable
                }])
            }, [a("div", Dw, [i.bluffsVisible ? (r(),
            u("div", Ew, [a("span", null, c(e.$t("modals.signal.bluffs")), 1), (r(!0),
            u(y, null, N(o.bluffsCopy, (p, f) => (r(),
            C(d, {
                key: f,
                role: i.allRoles.get(p)
            }, null, 8, ["role"]))), 128))])) : A("", !0), o.storytellersCopy.length ? (r(),
            u("div", Nw, [a("span", null, c(e.$t("modals.signal.storyteller", o.storytellersCopy.length)) + ": ", 1), a("ul", null, [(r(!0),
            u(y, null, N(o.storytellersCopy, (p, f) => (r(),
            u("li", {
                key: f
            }, [b(d, {
                role: i.allRoles.get(p.role),
                alignment: p.alignment
            }, null, 8, ["role", "alignment"]), a("div", Bw, [(r(!0),
            u(y, null, N(p.reminders, (P, w) => (r(),
            C(h, {
                key: w,
                reminder: P
            }, null, 8, ["reminder"]))), 128))])]))), 128))])])) : A("", !0)]), a("ul", {
                class: _(["circle", ["size-" + e.players.length]])
            }, [(r(!0),
            u(y, null, N(o.playersCopy, (p, f) => (r(),
            u("li", {
                key: f,
                style: q({
                    width: 9 + Math.round(100 / o.playersCopy.length) + "%"
                })
            }, [b(d, {
                onClick: P => i.changeRole(f),
                role: e.roles.get(p.role) || e.rolesAvailable.get(p.role),
                alignment: p.alignment
            }, null, 8, ["onClick", "role", "alignment"]), p.reminders ? (r(),
            u("div", Vw, [(r(!0),
            u(y, null, N(p.reminders, (P, w) => (r(),
            C(h, {
                key: w,
                reminder: P,
                onClick: B => i.removeReminder(p, w)
            }, null, 8, ["reminder", "onClick"]))), 128))])) : A("", !0)], 4))), 128))], 2)], 2), a("div", Ow, [o.isEditable ? (r(),
            u("span", {
                key: 0,
                class: "button primary",
                onClick: s[9] || (s[9] = (...p) => i.addGrimoire && i.addGrimoire(...p))
            }, c(e.$t("common.button_confirm")), 1)) : A("", !0), a("span", {
                class: "button",
                onClick: s[10] || (s[10] = p => o.panel = "signal")
            }, c(o.isEditable ? e.$t("common.button_cancel") : e.$t("common.button_close")), 1)])], 64)) : A("", !0)]),
            _: 1
        }, 8, ["class"])) : A("", !0)]),
        _: 1
    })
}
const Uw = O(aw, [["render", jw], ["__scopeId", "data-v-50d2ba18"]])
  , Hw = {
    components: {
        Modal: se
    },
    computed: {
        ...M(["modal"])
    },
    data() {
        return {
            input: "",
            title: "",
            unit: "minutes",
            checkbox: !1,
            confirmInterval: null,
            confirmTimer: 0
        }
    },
    methods: {
        ...U(["toggleModal"]),
        toggleUnit() {
            this.unit = this.unit === "minutes" ? "seconds" : "minutes"
        },
        confirm(e) {
            this.modal.params.resolve && this.modal.params.resolve(e),
            this.close()
        },
        cancel() {
            this.modal.params.isImportant || (this.modal.params.type === "alert" ? this.modal.params.resolve && this.modal.params.resolve() : this.modal.params.reject && this.modal.params.reject(),
            this.close())
        },
        submit() {
            this.input = String(this.input || "").trim(),
            !(this.input.length < this.modal.params.minlength) && (this.input.length > this.modal.params.maxlength || (this.modal.params.resolve && (this.modal.params.type === "timer" ? this.modal.params.resolve({
                title: this.title,
                value: this.unit === "minutes" ? this.input * 60 : this.input,
                checkbox: this.checkbox
            }) : this.modal.params.checkbox ? this.modal.params.resolve({
                value: this.input,
                checkbox: this.checkbox
            }) : this.modal.params.resolve(this.input)),
            this.close()))
        },
        close() {
            clearInterval(this.confirmInterval),
            document.getElementById("app").focus(),
            this.modal.params.isImportant = !1,
            this.toggleModal(Object.assign({}, this.modal, {
                name: ""
            }))
        },
        keydown({key: e}) {
            if (!(e === void 0 || !e.toLocaleLowerCase)) {
                if (e.toLocaleLowerCase() === "escape")
                    return this.cancel();
                if (!["prompt", "timer"].includes(this.modal.params.type))
                    switch (e.toLocaleLowerCase()) {
                    case "1":
                        this.$refs.button && this.$refs.button.click();
                        break;
                    case "2":
                        this.$refs.button2 && this.$refs.button2.click();
                        break;
                    case "3":
                        this.$refs.button3 && this.$refs.button3.click();
                        break
                    }
            }
        }
    },
    watch: {
        "modal.name"() {
            clearInterval(this.confirmInterval);
            const {name: e, params: s} = this.modal;
            e === "dialogue" ? s.type === "prompt" || s.type === "timer" ? (this.input = s.value,
            s.checkbox && (this.checkbox = s.checkbox.value),
            this.$nextTick( () => {
                this.$refs.input.focus(),
                this.$refs.input.select()
            }
            )) : s.type === "reveal" ? this.$nextTick( () => this.$refs.button3.focus()) : (s.type === "confirm" && s.timer && (this.confirmTimer = s.timer,
            this.confirmInterval = setInterval( () => {
                this.confirmTimer -= 1,
                this.confirmTimer <= 0 && (clearInterval(this.confirmInterval),
                this.confirm(!1))
            }
            , 1e3)),
            this.$nextTick( () => {
                this.$refs.button && this.$refs.button.focus()
            }
            )) : this.confirmTimer = 0
        }
    }
}
  , qw = {
    key: 0
}
  , Lw = {
    key: 1
}
  , zw = ["type", "required", "placeholder", "maxlength", "minlength"]
  , Gw = ["required", "placeholder", "maxlength", "minlength"]
  , Ww = {
    key: 2
}
  , Fw = ["required"]
  , Qw = {
    class: "button-group"
}
  , Zw = {
    type: "submit",
    ref: "button2",
    class: "button primary"
}
  , Xw = {
    class: "input"
}
  , Kw = ["step", "min", "max"]
  , Yw = ["placeholder"]
  , Jw = {
    class: "button-group"
}
  , $w = {
    type: "submit",
    ref: "button2",
    class: "button primary"
}
  , xw = {
    href: "https://bloodontheclocktower.com/terms-of-use",
    target: "_blank"
}
  , e1 = {
    href: "https://bloodontheclocktower.com/privacy-policy",
    target: "_blank"
}
  , s1 = {
    href: "https://bloodontheclocktower.com/cookie-policy",
    target: "_blank"
}
  , t1 = {
    class: "button-group"
}
  , i1 = ["disabled"]
  , o1 = {
    key: 0,
    class: "timer"
}
  , n1 = {
    class: "button-group"
}
  , a1 = {
    key: 6,
    class: "button-group"
}
  , r1 = {
    key: 7,
    class: "button-group"
};
function l1(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "dialogue" ? (r(),
        C(g, {
            key: 0,
            class: "dialogue",
            onClose: s[22] || (s[22] = d => i.cancel()),
            onKeydown: R(i.keydown, ["stop"])
        }, gl({
            default: T( () => [e.modal.params.text ? (r(),
            u("p", qw, c(Array.isArray(e.modal.params.text) ? e.$t(...e.modal.params.text) : e.$te(e.modal.params.text) ? e.$t(e.modal.params.text) : e.modal.params.text), 1)) : A("", !0), e.modal.params.pre ? (r(),
            u("pre", Lw, c(e.modal.params.pre), 1)) : A("", !0), e.modal.params.type === "prompt" ? (r(),
            u("form", {
                key: 2,
                onSubmit: s[4] || (s[4] = R(d => i.submit(), ["prevent"]))
            }, [e.modal.params.input !== "textarea" ? z((r(),
            u("input", {
                key: 0,
                type: e.modal.params.input || "text",
                step: "0.1",
                ref: "input",
                "onUpdate:modelValue": s[0] || (s[0] = d => o.input = d),
                required: !!e.modal.params.minlength,
                placeholder: e.modal.params.placeholder && (Array.isArray(e.modal.params.placeholder) ? e.$t(...e.modal.params.placeholder) : e.$t(e.modal.params.placeholder)),
                maxlength: e.modal.params.maxlength,
                minlength: e.modal.params.minlength
            }, null, 8, zw)), [[Fd, o.input]]) : z((r(),
            u("textarea", {
                key: 1,
                ref: "input",
                "onUpdate:modelValue": s[1] || (s[1] = d => o.input = d),
                required: !!e.modal.params.minlength,
                placeholder: e.modal.params.placeholder && (Array.isArray(e.modal.params.placeholder) ? e.$t(...e.modal.params.placeholder) : e.$t(e.modal.params.placeholder)),
                maxlength: e.modal.params.maxlength,
                minlength: e.modal.params.minlength
            }, null, 8, Gw)), [[G, o.input]]), e.modal.params.checkbox ? (r(),
            u("label", Ww, [z(a("input", {
                type: "checkbox",
                name: "checkbox",
                "onUpdate:modelValue": s[2] || (s[2] = d => o.checkbox = d),
                required: e.modal.params.checkbox.required
            }, null, 8, Fw), [[Ie, o.checkbox]]), b(l, {
                icon: o.checkbox ? "check-circle" : "circle"
            }, null, 8, ["icon"]), v(" " + c(e.$t(e.modal.params.checkbox.label)), 1)])) : A("", !0), a("div", Qw, [a("button", Zw, [b(l, {
                icon: "thumbs-up"
            }), v(" " + c(e.$t("common.button_confirm")), 1)], 512), a("button", {
                type: "button",
                ref: "button2",
                class: "button secondary",
                onClick: s[3] || (s[3] = d => i.cancel())
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + c(e.$t("common.button_cancel")), 1)], 512)])], 32)) : e.modal.params.type === "timer" ? (r(),
            u("form", {
                key: 3,
                onSubmit: s[12] || (s[12] = R(d => i.submit(), ["prevent"]))
            }, [a("div", Xw, [z(a("input", {
                type: "number",
                step: o.unit === "minutes" ? .1 : 1,
                min: o.unit === "minutes" ? .1 : 3,
                max: o.unit === "minutes" ? 60 : 3600,
                ref: "input",
                onKeydown: s[5] || (s[5] = R( (...d) => i.keydown && i.keydown(...d), ["stop"])),
                "onUpdate:modelValue": s[6] || (s[6] = d => o.input = d),
                placeholder: "10"
            }, null, 40, Kw), [[G, o.input]]), a("button", {
                type: "button",
                class: "button",
                onClick: s[7] || (s[7] = (...d) => i.toggleUnit && i.toggleUnit(...d))
            }, c(e.$t("modals.dialogue.unit_" + o.unit)), 1)]), z(a("input", {
                type: "text",
                onKeydown: s[8] || (s[8] = R( (...d) => i.keydown && i.keydown(...d), ["stop"])),
                "onUpdate:modelValue": s[9] || (s[9] = d => o.title = d),
                placeholder: e.$t("modals.dialogue.timer_title"),
                maxlength: "50"
            }, null, 40, Yw), [[G, o.title]]), a("label", null, [z(a("input", {
                type: "checkbox",
                name: "checkbox",
                "onUpdate:modelValue": s[10] || (s[10] = d => o.checkbox = d)
            }, null, 512), [[Ie, o.checkbox]]), b(l, {
                icon: o.checkbox ? "check-circle" : "circle"
            }, null, 8, ["icon"]), v(" " + c(e.$t("modals.dialogue.timer_paused")), 1)]), a("div", Jw, [a("button", $w, [b(l, {
                icon: "hourglass-half"
            }), v(" " + c(e.$t("modals.dialogue.timer_start")), 1)], 512), a("button", {
                type: "button",
                ref: "button2",
                class: "button secondary",
                onClick: s[11] || (s[11] = d => i.cancel())
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + c(e.$t("common.button_cancel")), 1)], 512)])], 32)) : e.modal.params.type === "terms" ? (r(),
            u(y, {
                key: 4
            }, [v(c(e.$t("modals.dialogue.terms")) + " ", 1), a("ul", null, [a("li", null, [a("a", xw, c(e.$t("common.terms_of_use")), 1)]), a("li", null, [a("a", e1, c(e.$t("common.privacy_policy")), 1)]), a("li", null, [a("a", s1, c(e.$t("common.cookie_policy")), 1)])]), a("label", null, [z(a("input", {
                type: "checkbox",
                "onUpdate:modelValue": s[13] || (s[13] = d => o.checkbox = d)
            }, null, 512), [[Ie, o.checkbox]]), b(l, {
                icon: o.checkbox ? "check-circle" : "circle"
            }, null, 8, ["icon"]), v(" " + c(e.$t("modals.dialogue.terms_confirm")), 1)]), a("div", t1, [a("button", {
                class: "button primary",
                ref: "button",
                disabled: !o.checkbox,
                onClick: s[14] || (s[14] = d => i.confirm(!0))
            }, [b(l, {
                icon: "thumbs-up"
            }), v(" " + c(e.$t("common.button_continue")), 1)], 8, i1), a("button", {
                class: "button secondary",
                ref: "button2",
                onClick: s[15] || (s[15] = d => i.confirm(!1))
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + c(e.$t("common.button_logout")), 1)], 512)])], 64)) : e.modal.params.type === "confirm" ? (r(),
            u(y, {
                key: 5
            }, [o.confirmTimer ? (r(),
            u("div", o1, [b(l, {
                icon: "exclamation-triangle"
            }), v(" " + c(e.$t("modals.dialogue.close_timer", {
                n: o.confirmTimer
            })), 1)])) : A("", !0), a("div", n1, [a("button", {
                class: "button primary",
                ref: "button",
                onClick: s[16] || (s[16] = d => i.confirm(!0))
            }, [b(l, {
                icon: "check-circle"
            }), v(" " + c(e.$t("modals.dialogue.button_yes")), 1)], 512), a("button", {
                class: "button secondary",
                ref: "button2",
                onClick: s[17] || (s[17] = d => i.confirm(!1))
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + c(e.$t("modals.dialogue.button_no")), 1)], 512)])], 64)) : e.modal.params.type === "reveal" ? (r(),
            u("div", a1, [a("button", {
                class: "button primary",
                ref: "button",
                onClick: s[18] || (s[18] = d => i.confirm(!0))
            }, [b(l, {
                icon: "thumbs-up"
            }), v(" " + c(e.$t("modals.dialogue.button_good")), 1)], 512), a("button", {
                class: "button secondary",
                ref: "button2",
                onClick: s[19] || (s[19] = d => i.confirm(!1))
            }, [b(l, {
                icon: "thumbs-down"
            }), v(" " + c(e.$t("modals.dialogue.button_evil")), 1)], 512), a("button", {
                class: "button",
                ref: "button3",
                onClick: s[20] || (s[20] = d => i.cancel())
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + c(e.$t("common.button_cancel")), 1)], 512)])) : (r(),
            u("div", r1, [a("button", {
                class: "button primary",
                ref: "button",
                onClick: s[21] || (s[21] = d => i.confirm())
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + c(e.$t("common.button_close")), 1)], 512)]))]),
            _: 2
        }, [e.modal.params.title ? {
            name: "header",
            fn: T( () => [v(c(Array.isArray(e.modal.params.title) ? e.$t(...e.modal.params.title) : e.$t(e.modal.params.title)), 1)]),
            key: "0"
        } : void 0]), 1032, ["onKeydown"])) : A("", !0)]),
        _: 1
    })
}
const ma = O(Hw, [["render", l1], ["__scopeId", "data-v-c2b7f2ca"]])
  , c1 = {
    components: {
        Modal: se
    },
    computed: {
        ...M(["modal"]),
        ...D("user", ["isStoryteller"]),
        rulesURL() {
            return this.isStoryteller ? "https://drive.google.com/file/d/1kyOY-4PmSnQNoH3axyq1cEjVZ2T3kmlm/preview#view=FitH" : "https://drive.google.com/file/d/189hxU8yl3-j-mnFiPUF5fOAh6yQDweLL/preview#view=FitH"
        }
    },
    methods: {
        ...U(["toggleModal"])
    }
}
  , d1 = ["src"];
function u1(e, s, t, n, o, i) {
    const l = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "rules" ? (r(),
        C(l, {
            key: 0,
            class: "rules",
            onClose: s[0] || (s[0] = g => e.toggleModal())
        }, {
            header: T( () => [v(c(e.$t("modals.rules.title")), 1)]),
            default: T( () => [a("iframe", {
                src: i.rulesURL,
                allow: "autoplay"
            }, null, 8, d1)]),
            _: 1
        })) : A("", !0)]),
        _: 1
    })
}
const g1 = O(c1, [["render", u1], ["__scopeId", "data-v-63d916c0"]])
  , m1 = {
    components: {
        Modal: se
    },
    computed: {
        ...M(["vote", "modal", "session"]),
        ...D("user", ["hasGrimoireAccess"])
    },
    data() {
        return {
            dtFormat: new Intl.DateTimeFormat(navigator.languages ? navigator.languages[0] : navigator.language,{
                hour: "numeric",
                minute: "numeric"
            })
        }
    },
    methods: {
        ...U(["toggleModal"]),
        ...U("vote", ["clearHistory"])
    }
}
  , h1 = {
    key: 0
}
  , p1 = {
    class: "phase"
}
  , A1 = {
    class: "voters"
};
function b1(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "vote-history" && (e.vote.history || e.hasGrimoireAccess) ? (r(),
        C(g, {
            key: 0,
            class: "vote-history",
            onClose: s[0] || (s[0] = d => e.toggleModal())
        }, {
            header: T( () => [v(c(e.$t("modals.votehistory.title")) + " ", 1), e.vote.history.length ? (r(),
            C(l, {
                key: 0,
                onClick: e.clearHistory,
                icon: "trash-alt",
                class: "clear",
                title: e.$t("modals.votehistory.clear")
            }, null, 8, ["onClick", "title"])) : A("", !0)]),
            default: T( () => [a("table", null, [a("thead", null, [a("tr", null, [a("td", null, c(e.$t("modals.votehistory.phase")), 1), a("td", null, c(e.$t("modals.votehistory.nominator")), 1), a("td", null, c(e.$t("modals.votehistory.nominee")), 1), a("td", null, c(e.$t("modals.votehistory.type")), 1), a("td", null, c(e.$t("modals.votehistory.votes")), 1), a("td", null, c(e.$t("modals.votehistory.majority")), 1), a("td", null, [b(l, {
                icon: "user-friends"
            }), v(" " + c(e.$t("modals.votehistory.voters")), 1)])])]), a("tbody", null, [(r(!0),
            u(y, null, N(e.vote.history, (d, h) => (r(),
            u(y, {
                key: h
            }, [!h || d.phase !== e.vote.history[h - 1].phase ? (r(),
            u("tr", h1, [a("td", p1, [d.phase ? (r(),
            u(y, {
                key: 1
            }, [v(c(e.$t(`grimoire.phases.${d.phase % 2 ? "night" : "day"}`, Math.ceil(d.phase / 2))), 1)], 64)) : (r(),
            u(y, {
                key: 0
            }, [v(c(e.$t("modals.votehistory.pregame")), 1)], 64))]), s[1] || (s[1] = a("td", {
                colspan: "6"
            }, null, -1))])) : A("", !0), a("tr", null, [a("td", null, c(o.dtFormat.format(d.timestamp)), 1), a("td", null, c(e.$t(...d.nominator)), 1), a("td", null, c(e.$t(...d.nominee)), 1), a("td", null, c(e.$t(`modals.votehistory.${d.type}`)), 1), a("td", null, c(d.votes), 1), a("td", null, [v(c(d.majority) + " ", 1), b(l, {
                icon: d.votes >= d.majority ? "check-circle" : "circle"
            }, null, 8, ["icon"])]), a("td", A1, [(r(!0),
            u(y, null, N(d.voters, ([m,p], f) => (r(),
            u("span", {
                key: f
            }, [v(c(e.$t(...m)) + " ", 1), p !== 1 ? (r(),
            u(y, {
                key: 0
            }, [v("(" + c(p) + ")", 1)], 64)) : A("", !0)]))), 128))])])], 64))), 128))])])]),
            _: 1
        })) : A("", !0)]),
        _: 1
    })
}
const f1 = O(m1, [["render", b1], ["__scopeId", "data-v-619f308a"]])
  , v1 = {
    components: {
        Token: ve,
        Modal: se
    },
    computed: {
        ...M(["modal", "npcs", "grimoire", "players", "definitions"]),
        ...D("user", ["isStoryteller"]),
        filteredNPCs() {
            const e = {};
            return this.npcs.forEach(s => {
                this.players.npcs.some(t => t.id === s.id) || (e[s.team] || (e[s.team] = []),
                e[s.team].push(s))
            }
            ),
            e
        },
        availableTabs() {
            const e = [];
            return this.definitions.NPC_TEAMS.forEach(s => {
                [...this.npcs].some( ([,t]) => t.team === s && !this.players.npcs.some(n => n.id === t.id)) && e.push(s)
            }
            ),
            e
        }
    },
    methods: {
        setNPC(e) {
            this.isStoryteller && (this.$store.commit("players/setNPC", {
                npc: e
            }),
            this.toggleModal(this.modal),
            this.setTab({
                tab: "npcs",
                value: !0
            }))
        },
        ...U(["toggleModal", "setTab"])
    }
}
  , y1 = {
    class: "tokens"
}
  , _1 = ["onClick"]
  , w1 = {
    class: "tokens"
}
  , k1 = ["onClick"];
function C1(e, s, t, n, o, i) {
    const l = k("Token")
      , g = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "npc" && i.availableTabs.length && e.isStoryteller ? (r(),
        C(g, {
            key: 0,
            onClose: s[0] || (s[0] = d => e.toggleModal(e.modal)),
            class: "npc",
            tabs: i.availableTabs.map(d => e.$t(`grimoire.${d}`, 2))
        }, {
            header: T( () => [v(c(e.$t("modals.npc.title")), 1)]),
            "tab-0": T( () => [a("ul", y1, [(r(!0),
            u(y, null, N(i.filteredNPCs[i.availableTabs[0]], d => (r(),
            u("li", {
                key: d.id,
                onClick: h => i.setNPC(d)
            }, [b(l, {
                role: d,
                class: "top"
            }, null, 8, ["role"])], 8, _1))), 128))])]),
            "tab-1": T( () => [a("ul", w1, [(r(!0),
            u(y, null, N(i.filteredNPCs[i.availableTabs[1]], d => (r(),
            u("li", {
                key: d.id,
                onClick: h => i.setNPC(d)
            }, [b(l, {
                role: d,
                class: "top"
            }, null, 8, ["role"])], 8, k1))), 128))])]),
            _: 1
        }, 8, ["tabs"])) : A("", !0)]),
        _: 1
    })
}
const S1 = O(v1, [["render", C1], ["__scopeId", "data-v-a1a182db"]])
  , ha = "/assets/logo-active-vWSLSz2M.webp"
  , Me = "/assets/logo-sheet-sczFT2x6.webp"
  , pa = "/assets/logo-Cvk6rQBD.webp"
  , Aa = "/assets/logo-active-DFblTCBY.webp"
  , ba = "/assets/logo-label-q983_f8F.webp"
  , Re = "/assets/logo-sheet-B0nzVvhl.webp"
  , fa = "/assets/logo-Dh6MJCdH.webp"
  , va = "/assets/logo-label-q983_f8F.webp"
  , De = "/assets/logo-sheet-B0nzVvhl.webp"
  , ya = "/assets/logo-active-C9GcuLvL.webp"
  , Ee = "/assets/logo-sheet-D4VPR8cb.webp"
  , _a = "/assets/logo-n5SKFmif.webp"
  , wa = "/assets/logo-KB4tGbUB.webp"
  , ka = "/assets/logo-active-BuHUu0O7.webp"
  , Ne = "/assets/logo-sheet-Bp7C3A9N.webp"
  , Ca = "/assets/logo-C9OJVjpP.webp"
  , P1 = "https://json-schema.org/draft/2020-12/schema"
  , T1 = "https://raw.githubusercontent.com/ThePandemoniumInstitute/botc-release/main/script-schema.json"
  , I1 = "array"
  , M1 = "Blood on the Clocktower Custom Script"
  , R1 = 5
  , D1 = 201
  , E1 = JSON.parse(`{"oneOf":[{"type":"object","title":"Script Character","required":["id","name","team","ability"],"additionalProperties":false,"properties":{"id":{"type":"string","title":"Character ID, alphanumeric lowercase","maxLength":50,"examples":["washerwoman","lilmonsta","fanggu"]},"name":{"type":"string","title":"Character name","maxLength":30,"examples":["Washer Woman","Lil' Monsta","Fang-Gu"]},"image":{"oneOf":[{"type":"string","format":"uri","title":"Character icon","examples":["https://i.imgur.com/character-icon.png"]},{"type":"array","title":"Set of character icon URLs","description":"For non-traveller characters, the icons should be regular alignment and flipped alignment, for travellers they should be unaligned, good alignment and evil alignment","minItems":1,"maxItems":3,"items":{"type":"string","format":"uri"},"examples":[["https://imgur.com/townsfolk.png","https://imgur.com/townsfolk_evil.png"],["https://imgur.com/minion.png","https://imgur.com/minion_good.png"],["https://imgur.com/traveller.png","https://imgur.com/traveller_good.png","https://imgur.com/traveller_evil.png"]]}]},"team":{"type":"string","title":"Character team","enum":["townsfolk","outsider","minion","demon","traveller","fabled","loric"]},"edition":{"type":"string","title":"The edition ID","maxLength":50,"examples":["tb","bmr","snv","fallofrome"]},"ability":{"type":"string","title":"Character ability","maxLength":250,"examples":["You start knowing that 1 of 2 players is a particular Townsfolk.","Each night, Minions choose who babysits Lil' Monsta's token & \\"is the Demon\\". A player dies each night*. [+1 Minion]","Each night*, choose a player: they die. The 1st Outsider this kills becomes an evil Fang Gu & you die instead. [+1 Outsider]"]},"flavor":{"type":"string","title":"Character flavor text","maxLength":500,"examples":["Bloodstains on a dinner jacket? No, this is cooking sherry. How careless.","Certainly madam, under normal circumstances, you may borrow the Codex Malificarium from the library vaults. However, you do not seem to be a member.","It is a fine night for a stroll, wouldn't you say, Mister Morozov? Or should I say... BARON Morozov?"]},"firstNight":{"type":"number","title":"First night wake-up priority. 0 means this character doesn't wake during the first night.","examples":[37,0,15]},"firstNightReminder":{"type":"string","title":"First night Storyteller reminder","maxLength":500,"examples":["Show the Townsfolk character token. Point to both the *TOWNSFOLK* and *WRONG* players.","Wake all Minions, allow them to choose a babysitter :reminder:",""]},"otherNight":{"type":"number","title":"Other nights wake-up priority. 0 means this character doesn't wake during other nights.","examples":[0,10,15]},"otherNightReminder":{"type":"string","title":"Other nights Storyteller reminder","maxLength":500,"examples":["","Wake all Minions, allow them to choose a babysitter :reminder: A player might die :reminder:","The Fang Gu chooses a player. :reminder: If they chose an Outsider (once only): Replace the Outsider token with the spare Fang Gu token. Put the Fang Gu to sleep. Wake the target. Show the *YOU ARE* and Fang Gu tokens & give a thumbs-down. :reminder:"]},"reminders":{"type":"array","maxItems":20,"default":[],"title":"Character reminder tokens","items":{"type":"string","maxLength":30,"examples":["Townsfolk","Wrong","Dead","Is The Demon"]}},"remindersGlobal":{"type":"array","maxItems":20,"default":[],"title":"Global character reminder tokens, which will be selectable even when the character is not in play.","items":{"type":"string","maxLength":25,"examples":["Drunk","Is The Philosopher"]}},"setup":{"type":"boolean","title":"Whether this character has a ability that is relevant for the game setup.","default":false},"jinxes":{"type":"array","title":"Jinxes with other characters on this script","items":{"type":"object","title":"An individual Jinx pair","required":["id","reason"],"properties":{"id":{"type":"string","title":"The ID of the other character this one is jinxed with.","maxLength":50,"examples":["spy","fanggu","lilmonsta"]},"reason":{"type":"string","title":"The Jinx explanation","maxLength":500,"examples":["If the Cannibal gains the Butler ability, the Cannibal learns this.","The Mathematician learns if the Lunatic attacks a different player(s) than the real Demon attacked."]}}}},"special":{"type":"array","title":"Special app integration features for this character","items":{"type":"object","title":"A special app integration feature","required":["name","type"],"properties":{"type":{"type":"string","title":"The integration type, where the feature will be used.","description":"Currently supported values are:\\n selection - during character selection,\\n signal - during night signaling,\\n ability - when clicking on the character token,\\n vote - during a vote,\\n reveal - at the end of the game, before characters are revealed,\\n player - an ability that can be initiated by the player","enum":["selection","ability","signal","vote","reveal","player"]},"name":{"type":"string","title":"The feature name reference","description":"This is a list of the currently implemented special features and will be growing over time.","enum":["grimoire","pointing","ghost-votes","distribute-roles","bag-disabled","bag-duplicate","good-duplicate","multiplier","hidden","replace-character","player","card","open-eyes"]},"value":{"oneOf":[{"type":"string","title":"Special ability text value","maxLength":50,"description":"The text value that will be used by the special ability."},{"type":"number","title":"Special ability number value","description":"The numeric value that will be used by the special ability."}]},"time":{"type":"string","title":"At which point during the game can the ability be used","enum":["pregame","day","night","firstNight","firstDay","otherNight","otherDay"]},"global":{"type":"string","title":"Global ability scope","description":"If it's a global ability that can be used without the character being in play, this property defines on which characters it can be used. This does not work on non-player characters, because they are not considered to be on the Script.","enum":["townsfolk","outsider","minion","demon","traveller","dead"]}},"examples":[{"type":"player","name":"open-eyes","time":"night"},{"type":"signal","name":"card","value":"This is a Custom ST Card"},{"type":"ability","name":"pointing","time":"night","global":"minion"},{"type":"vote","name":"multiplier","value":"3"}]}}},"examples":[{"id":"washerwoman","name":"Washerwoman","edition":"tb","team":"townsfolk","firstNightReminder":"Show the Townsfolk character token. Point to both the *TOWNSFOLK* and *WRONG* players.","otherNightReminder":"","reminders":["Townsfolk","Wrong"],"setup":false,"ability":"You start knowing that 1 of 2 players is a particular Townsfolk.","flavor":"Bloodstains on a dinner jacket? No, this is cooking sherry. How careless.","firstNight":37,"otherNight":0}]},{"type":"string","title":"Official character ID","maxLength":20,"description":"If you want to include official characters in the script, it is sufficient to provide their ID as a string","examples":["soldier","imp","washerwoman"]},{"type":"object","title":"Script Metadata","required":["id","name"],"properties":{"id":{"type":"string","title":"The ID property must be called '_meta' for the Script metadata object.","enum":["_meta"]},"name":{"type":"string","title":"The script name","maxLength":50,"examples":["Fall of Rome","My Custom Homebrew"]},"author":{"type":"string","title":"The script author","maxLength":50,"examples":["The Pandemonium Institute","Your Name"]},"logo":{"type":"string","format":"uri","maxLength":250,"title":"The script logo image","examples":["https://imgur.com/logo.png"]},"hideTitle":{"type":"boolean","title":"Whether the script title / author should be hidden on the app"},"background":{"type":"string","format":"uri","maxLength":250,"title":"The script background image","examples":["https://imgur.com/background.jpg"]},"almanac":{"type":"string","format":"uri","maxLength":250,"title":"A link to the script's almanac page","examples":["https://beardytas.com/garden-of-djinn/the-ballad-of-seat-7/"]},"bootlegger":{"type":"array","title":"A list of homebrew rules that are to be used for this script","description":"Any (optional) homebrew rules that should be shown on the character sheet can be listed here, up to a limit of 10.","maxItems":10,"items":{"type":"string","title":"A homebrew rule","examples":["If the Snake Charmer swaps with the Demon on the first night, they learn their Minions and Bluffs instead of the original Demon."]}},"firstNight":{"type":"array","title":"The relative First Night order of characters on this script.","description":"A custom first night order for this script can be provided in the form of an array here, with optional special entries for 'dusk', 'minioninfo', 'demoninfo' and 'dawn'.","maxItems":200,"items":{"type":"string","title":"Character ID of an on-script character in the first night order"},"examples":[["dusk","minioninfo","demoninfo","poisoner","spy","washerwoman","librarian","investigator","chef","empath","fortuneteller","butler","dawn"]]},"otherNight":{"type":"array","title":"The relative Other Nights order of characters on this script.","description":"A custom other night order for this script can be provided in the form of an array here, with optional special entries for 'dusk' and 'dawn'.","maxItems":200,"items":{"type":"string","title":"Character ID of an on-script character in the other night order"},"examples":[["dusk","poisoner","monk","spy","scarletwoman","imp","ravenkeeper","undertaker","empath","fortuneteller","butler","dawn"]]}},"examples":[{"id":"_meta","name":"Deadly Penance Day","author":"TPI","logo":"https://url.to/your/logo.png"}]},{"type":"object","title":"Official Character (deprecated)","deprecated":true,"required":["id"],"additionalProperties":false,"properties":{"id":{"type":"string","maxLength":20,"title":"Official character ID","examples":["soldier","imp","washerwoman"]}}}]}`)
  , N1 = {
    $schema: P1,
    $id: T1,
    type: I1,
    default: [],
    title: M1,
    minItems: R1,
    maxItems: D1,
    items: E1
}
  , B1 = [{
    id: "_meta",
    author: "Lau",
    name: "Boozling"
}, "noble", "pixie", "highpriestess", "balloonist", "fortuneteller", "oracle", "savant", "philosopher", "huntsman", "fisherman", "slayer", "sage", "cannibal", "drunk", "mutant", "damsel", "klutz", "golem", "baron", "cerenovus", "scarletwoman", "marionette", "nodashii", "fanggu", "imp"]
  , wl = new Qd;
Zd(wl);
const Qr = wl.compile(N1)
  , V1 = {
    components: {
        Modal: se
    },
    inject: ["bindShortcut", "unbindShortcut"],
    data() {
        return {
            isFileDrop: !1,
            isCustomEdition: !1,
            history: localStorage.getItem("custom-script-history"),
            limit: 512 * 1024,
            theme: {
                generic: -1
            },
            monthlyScript: B1
        }
    },
    computed: {
        ...M(["modal", "edition", "roles", "npcs", "editionsAvailable", "players", "grimoire", "session", "settings"]),
        ...D(["isHomebrew", "isJinxed"]),
        currentEditionId() {
            return this.edition.isOfficial ? this.edition.id : "custom"
        }
    },
    methods: {
        ...U(["toggleModal", "setTab"]),
        async clearGrimoire() {
            try {
                await this.$store.dispatch("openDialogue", {
                    type: "confirm",
                    title: "modals.edition.clear_title",
                    text: "modals.edition.clear_description"
                }) && this.$store.dispatch("players/clearRoles")
            } catch {} finally {
                this.toggleModal({
                    name: "edition"
                })
            }
        },
        getEditionLogo(e) {
            return new URL(Object.assign({
                "/src/assets/editions/bmr/logo-active.webp": ha,
                "/src/assets/editions/bmr/logo-sheet.webp": Me,
                "/src/assets/editions/bmr/logo.webp": pa,
                "/src/assets/editions/custom/logo-active.webp": Aa,
                "/src/assets/editions/custom/logo-label.webp": ba,
                "/src/assets/editions/custom/logo-sheet.webp": Re,
                "/src/assets/editions/custom/logo.webp": fa,
                "/src/assets/editions/homebrew/logo-label.webp": va,
                "/src/assets/editions/homebrew/logo-sheet.webp": De,
                "/src/assets/editions/snv/logo-active.webp": ya,
                "/src/assets/editions/snv/logo-sheet.webp": Ee,
                "/src/assets/editions/snv/logo.webp": _a,
                "/src/assets/editions/taf/logo.webp": wa,
                "/src/assets/editions/tb/logo-active.webp": ka,
                "/src/assets/editions/tb/logo-sheet.webp": Ne,
                "/src/assets/editions/tb/logo.webp": Ca
            })[`/src/assets/editions/${e}/logo${this.currentEditionId === e ? "-active" : ""}.webp`],import.meta.url).href
        },
        getEditionTheme(e, s) {
            return new URL(Object.assign({
                "/src/assets/editions/bmr/background1t.webp": xe,
                "/src/assets/editions/bmr/background2t.webp": es,
                "/src/assets/editions/bmr/background3t.webp": ss,
                "/src/assets/editions/bmr/background4t.webp": ts,
                "/src/assets/editions/bmr/background5t.webp": is,
                "/src/assets/editions/bmr/background6t.webp": os,
                "/src/assets/editions/custom/background1t.webp": ns,
                "/src/assets/editions/custom/background2t.webp": as,
                "/src/assets/editions/custom/background3t.webp": rs,
                "/src/assets/editions/custom/background4t.webp": ls,
                "/src/assets/editions/custom/background5t.webp": cs,
                "/src/assets/editions/custom/background6t.webp": ds,
                "/src/assets/editions/custom/background7t.webp": us,
                "/src/assets/editions/custom/background8t.webp": gs,
                "/src/assets/editions/snv/background1t.webp": ms,
                "/src/assets/editions/snv/background2t.webp": hs,
                "/src/assets/editions/snv/background3t.webp": ps,
                "/src/assets/editions/snv/background4t.webp": As,
                "/src/assets/editions/snv/background5t.webp": bs,
                "/src/assets/editions/snv/background6t.webp": fs,
                "/src/assets/editions/tb/background1t.webp": vs,
                "/src/assets/editions/tb/background2t.webp": ys,
                "/src/assets/editions/tb/background3t.webp": _s,
                "/src/assets/editions/tb/background4t.webp": ws,
                "/src/assets/editions/tb/background5t.webp": ks,
                "/src/assets/editions/tb/background6t.webp": Cs
            })[`/src/assets/editions/${e}/background${s}t.webp`],import.meta.url).href
        },
        getGenericTheme(e) {
            return new URL(Object.assign({
                "/src/assets/background1t.webp": Ss,
                "/src/assets/background2t.webp": Ps,
                "/src/assets/background3t.webp": Ts
            })[`/src/assets/background${e}t.webp`],import.meta.url).href
        },
        async checkNPCs(e=[]) {
            const s = this.npcs.get("bootlegger")
              , t = this.players.npcs.indexOf(s);
            if (this.isHomebrew) {
                if (t < 0 && (this.$store.commit("players/setNPC", {
                    npc: s
                }),
                this.setTab({
                    tab: "npcs",
                    value: !0
                }),
                !this.settings.general.isImageOptIn))
                    try {
                        await this.$store.dispatch("openDialogue", {
                            type: "alert",
                            title: "modals.edition.homebrew_title",
                            text: "modals.edition.homebrew_description"
                        })
                    } catch {}
            } else {
                const o = this.players.npcs.filter(i => i.id !== "bootlegger" && this.npcs.has(i.id));
                e.some( ({id: i}) => i === "bootlegger") && o.push(this.npcs.get("bootlegger")),
                o.length !== this.players.npcs.length && this.$store.commit("players/setNPC", {
                    npc: o
                })
            }
            const n = this.players.npcs.findIndex(o => o.id === "djinn");
            n > -1 && !this.isJinxed ? this.$store.commit("players/setNPC", {
                index: n
            }) : n < 0 && this.isJinxed && (this.$store.commit("players/setNPC", {
                npc: this.npcs.get("djinn")
            }),
            this.setTab({
                tab: "npcs",
                value: !0
            }))
        },
        checkSessionDifficulty() {
            var e;
            if (((e = this.edition.level) == null ? void 0 : e.toLowerCase()) !== "beginner" && (this.session.meta.tags.difficulty === 2 || this.session.meta.tags.difficulty === 0 && this.edition.id === "homebrew")) {
                const s = Object.assign({}, this.session.meta.tags);
                s.difficulty = this.edition.id === "homebrew" ? 1 : 0,
                this.$store.commit("session/updateMeta", {
                    tags: s
                })
            }
        },
        async selectEdition(e) {
            if (e.id === "custom") {
                this.isCustomEdition ? this.$refs.upload.click() : this.isCustomEdition = !0;
                return
            }
            this.isCustomEdition = !1;
            const s = this.theme[e.id] || this.theme.generic || 0;
            this.$store.dispatch("players/clearRoles", {
                clearNPCs: !0
            }),
            this.$store.commit("setEdition", {
                edition: e,
                theme: s
            }),
            await this.checkNPCs(),
            this.checkSessionDifficulty(),
            this.toggleModal(this.modal)
        },
        selectTheme(e, s) {
            this.theme = {
                [e.id]: s
            },
            this.currentEditionId !== e.id && e.id !== "generic" ? this.selectEdition(e) : (this.$store.commit("setTheme", {
                theme: s
            }),
            this.toggleModal(this.modal))
        },
        handleFileDrop(e) {
            if (this.isFileDrop = !1,
            e.dataTransfer.items) {
                for (let s = 0; s < e.dataTransfer.items.length; s++)
                    if (e.dataTransfer.items[s].kind === "file")
                        return this.handleUpload(e.dataTransfer.items[s].getAsFile())
            } else
                e.dataTransfer.files.length && this.handleUpload(e.dataTransfer.files[0])
        },
        async handlePaste(e) {
            if (this.modal.name === "edition")
                try {
                    if (e || (e = await navigator.clipboard.readText()),
                    e.length > this.limit) {
                        this.$store.dispatch("showError", ["modals.edition.error_size", ["modals.edition.error_size_text", [(e.length / (1024 * 1024)).toFixed(2), (this.limit / (1024 * 1024)).toFixed(2)]]]);
                        return
                    }
                    const s = JSON.parse(e);
                    await this.parseRoles(s)
                } catch {}
        },
        handleUpload(e) {
            var t;
            const s = ((t = this.$refs.upload) == null ? void 0 : t.files[0]) || e;
            if (s && s.size) {
                if (s.size > this.limit) {
                    this.$refs.upload && (this.$refs.upload.value = ""),
                    this.$store.dispatch("showError", ["modals.edition.error_size", ["modals.edition.error_size_text", [(s.size / (1024 * 1024)).toFixed(2), (this.limit / (1024 * 1024)).toFixed(2)]]]);
                    return
                }
                const n = new FileReader;
                n.addEventListener("load", async () => {
                    this.$refs.upload && (this.$refs.upload.value = "");
                    try {
                        const o = JSON.parse(n.result);
                        await this.parseRoles(o)
                    } catch (o) {
                        await this.$store.dispatch("openDialogue", {
                            type: "alert",
                            title: "modals.edition.error_custom",
                            text: o.message
                        }),
                        this.toggleModal(this.modal)
                    }
                }
                ),
                n.readAsText(s)
            }
        },
        async promptURL() {
            try {
                const e = await this.$store.dispatch("openDialogue", {
                    type: "prompt",
                    title: "modals.edition.custom_title",
                    placeholder: "modals.edition.custom_placeholder",
                    value: this.history,
                    text: "modals.edition.custom_text"
                });
                e ? await this.handleURL(e) : this.toggleModal(this.modal)
            } catch (e) {
                e && await this.$store.dispatch("openDialogue", {
                    type: "alert",
                    title: "modals.edition.error_custom",
                    text: e.message
                }),
                this.toggleModal(this.modal)
            }
        },
        async handleURL(e, s) {
            try {
                const t = await fetch(e);
                if (t && t.json) {
                    const n = await t.json();
                    await this.parseRoles(n, s),
                    this.roles.size && !this.edition.isOfficial && (localStorage.setItem("custom-script-history", e),
                    this.history = e)
                }
            } catch (t) {
                throw new Error(t.message)
            }
        },
        async parseRoles(e, s) {
            var g;
            if (!e || !e.length)
                return;
            if (e.forEach(d => {
                (d == null ? void 0 : d.team) === "traveler" && (d.team = "traveller")
            }
            ),
            e.filter(d => d.id !== "_meta").length > 200) {
                this.$store.dispatch("openDialogue", {
                    type: "alert",
                    title: "modals.edition.error_character",
                    text: "modals.edition.error_character_text"
                });
                return
            }
            if (!Qr(e))
                try {
                    await this.$store.dispatch("openDialogue", {
                        type: "alert",
                        title: "modals.edition.error_script",
                        text: "modals.edition.error_script_text",
                        pre: Qr.errors.map( ({instancePath: d, message: h, params: m}) => `${d} ${h} (${Object.values(m).join(", ")})`).join(`
`)
                    })
                } catch {}
            e = e.map(d => typeof d == "string" ? {
                id: d
            } : d);
            let n = s || this.theme.custom || this.theme.generic || 0;
            const o = e.findIndex( ({id: d}) => d === "_meta");
            let i = {};
            if (o > -1) {
                const d = S => (S == null ? void 0 : S.toLocaleLowerCase().replace(/[^a-z0-9]/g, "")) || ""
                  , {background: h, logo: m, author: p, name: f, firstNight: P, otherNight: w, hideTitle: B, bootlegger: j, almanac: V} = e.splice(o, 1).pop();
                i = {
                    background: h,
                    logo: m,
                    author: p,
                    name: f,
                    hideTitle: B,
                    bootlegger: j,
                    almanac: V,
                    firstNight: P == null ? void 0 : P.map(d),
                    otherNight: w == null ? void 0 : w.map(d)
                },
                n <= 0 && m && (n = 1)
            }
            if (this.$store.commit("setCustomRoles", e),
            e.some( ({id: d}) => !this.roles.has(d) && !this.npcs.has(d))) {
                const d = [];
                e.forEach( ({id: h}) => {
                    !this.roles.has(h) && !this.npcs.has(h) && d.push(h)
                }
                ),
                await this.$store.dispatch("openDialogue", {
                    type: "alert",
                    title: "modals.edition.error_custom",
                    text: ["modals.edition.error_loading", [d.join(", ")]]
                }),
                this.$store.commit("setEdition", {
                    edition: {
                        id: "tb"
                    }
                }),
                await this.checkNPCs();
                return
            }
            this.$store.dispatch("players/clearRoles", {
                clearNPCs: !0
            });
            const l = Object.assign({}, i, {
                isOfficial: !1
            });
            if (l.id = [...this.roles.values(), ...this.npcs.values()].some( ({isCustom: d}) => d) || (g = l.bootlegger) != null && g.length ? "homebrew" : "custom",
            this.$store.commit("setEdition", {
                edition: l,
                theme: n
            }),
            this.checkSessionDifficulty(),
            e.some( ({id: d}) => this.npcs.has(d))) {
                const d = [];
                e.forEach( ({id: h}) => {
                    this.npcs.has(h) && d.push(this.npcs.get(h))
                }
                ),
                this.$store.commit("players/setNPC", {
                    npc: d
                }),
                this.setTab({
                    tab: "npcs",
                    value: !0
                }),
                await this.checkNPCs(d)
            } else {
                const d = this.players.npcs.filter(h => !h.isCustom);
                d.length !== this.players.npcs.length && this.$store.commit("players/setNPC", {
                    npc: d
                }),
                await this.checkNPCs()
            }
            this.toggleModal(this.modal)
        }
    },
    watch: {
        "modal.name"() {
            this.modal.name === "edition" && (this.isFileDrop = !1,
            this.theme = {
                [this.grimoire.theme > 0 ? this.currentEditionId : "generic"]: this.grimoire.theme
            })
        }
    },
    mounted() {
        this.bindShortcut("paste", this.handlePaste.bind(this))
    },
    beforeUnmount() {
        this.unbindShortcut("paste")
    }
}
  , O1 = ["onClick"]
  , j1 = ["src"]
  , U1 = {
    class: "description"
}
  , H1 = {
    class: "footer"
}
  , q1 = {
    key: 1,
    class: "button-group"
}
  , L1 = {
    class: "button"
}
  , z1 = {
    key: 2,
    class: "themes"
}
  , G1 = ["src", "onClick"]
  , W1 = {
    class: "generic"
}
  , F1 = {
    class: "scripts"
}
  , Q1 = {
    class: "right"
}
  , Z1 = ["src", "onClick"];
function X1(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "edition" ? (r(),
        C(g, {
            key: 0,
            class: "editions",
            onClose: s[10] || (s[10] = d => e.toggleModal(e.modal)),
            onDrop: s[11] || (s[11] = R( () => {}
            , ["prevent"])),
            onDragover: s[12] || (s[12] = R( () => {}
            , ["prevent"])),
            onTouchstartPassive: s[13] || (s[13] = R( () => {}
            , ["stop"])),
            onTouchendPassive: s[14] || (s[14] = R( () => {}
            , ["stop"]))
        }, {
            default: T( () => {
                var d;
                return [b(L, {
                    name: "fade"
                }, {
                    default: T( () => [o.isFileDrop ? (r(),
                    u("div", {
                        key: 0,
                        class: "filedrop",
                        onDrop: s[0] || (s[0] = R(h => i.handleFileDrop(h), ["prevent"])),
                        onDragleave: s[1] || (s[1] = h => o.isFileDrop = !1)
                    }, [b(l, {
                        icon: "file-upload"
                    }), a("div", null, c(e.$t("modals.edition.upload_custom")), 1)], 32)) : A("", !0)]),
                    _: 1
                }), a("h3", null, c(e.$t("modals.edition.title")), 1), a("ul", {
                    class: "editions",
                    onDragenter: s[6] || (s[6] = R(h => o.isFileDrop = !0, ["prevent"]))
                }, [(r(!0),
                u(y, null, N(e.editionsAvailable, ([h,m]) => (r(),
                u("li", {
                    class: _(["edition", ["edition-" + h, i.currentEditionId === h ? "selected" : ""]]),
                    key: h,
                    onClick: p => i.selectEdition(m)
                }, [a("img", {
                    src: i.getEditionLogo(h),
                    alt: "",
                    class: "logo",
                    onDragstart: s[2] || (s[2] = R( () => {}
                    , ["prevent"]))
                }, null, 40, j1), a("div", U1, [a("h4", {
                    style: q({
                        color: m.color
                    })
                }, c(e.$t(`editions.${m.id}.name`)), 5), a("p", null, c(e.$t(`editions.${m.id}.description`)), 1), a("div", H1, [m.id !== "custom" || !o.isCustomEdition ? (r(),
                u(y, {
                    key: 0
                }, [a("b", null, c(e.$t("modals.edition.difficulty")), 1), v(" " + c(e.$t(`modals.edition.difficulty_${m.level}`)), 1)], 64)) : (r(),
                u("div", q1, [a("div", L1, [b(l, {
                    icon: "file-upload"
                }), v(" " + c(e.$t("modals.edition.button_upload")), 1)]), a("div", {
                    class: "paste button",
                    onClick: s[3] || (s[3] = R(p => i.handlePaste(), ["stop"]))
                }, [b(l, {
                    icon: "clipboard"
                }), v(" " + c(e.$t("modals.edition.button_paste")), 1)]), a("div", {
                    class: "button",
                    onClick: s[4] || (s[4] = R( (...p) => i.promptURL && i.promptURL(...p), ["stop"]))
                }, [b(l, {
                    icon: "link"
                }), v(" " + c(e.$t("modals.edition.button_url")), 1)])])), m.themes ? (r(),
                u("div", z1, [a("b", null, c(e.$t("modals.edition.theme")), 1), (r(!0),
                u(y, null, N(m.themes, p => (r(),
                u("img", {
                    class: _({
                        selected: o.theme[h] === p,
                        thumb: 1
                    }),
                    src: i.getEditionTheme(h, p),
                    key: p,
                    alt: "",
                    onClick: R(f => i.selectTheme(m, p), ["stop"]),
                    onDragstart: s[5] || (s[5] = R( () => {}
                    , ["prevent"]))
                }, null, 42, G1))), 128))])) : A("", !0)])])], 10, O1))), 128))], 32), a("input", {
                    type: "file",
                    ref: "upload",
                    accept: "application/json",
                    onChange: s[7] || (s[7] = h => i.handleUpload())
                }, null, 544), a("div", W1, [a("ul", F1, [a("li", null, [a("b", null, c(e.$t("modals.edition.monthly_script")), 1), a("div", {
                    class: "button primary",
                    onClick: s[8] || (s[8] = h => i.parseRoles(o.monthlyScript, Math.round(Math.random() * 11) - 3))
                }, c((d = o.monthlyScript.find( ({id: h}) => h === "_meta")) == null ? void 0 : d.name), 1)])]), a("div", {
                    class: "button",
                    onClick: s[9] || (s[9] = h => i.clearGrimoire())
                }, [b(l, {
                    icon: "trash-alt"
                }), v(" " + c(e.$t("modals.edition.button_clear")), 1)]), a("div", Q1, [a("div", null, [a("b", null, c(e.$t("modals.edition.theme_generic")), 1), (r(),
                u(y, null, N(3, h => a("img", {
                    class: _({
                        selected: o.theme.generic === -h,
                        thumb: 1
                    }),
                    src: i.getGenericTheme(h),
                    key: h,
                    alt: "",
                    onClick: m => i.selectTheme({
                        id: "generic"
                    }, -h)
                }, null, 10, Z1)), 64))])])])]
            }
            ),
            _: 1
        })) : A("", !0)]),
        _: 1
    })
}
const K1 = O(V1, [["render", X1], ["__scopeId", "data-v-857d2597"]])
  , Y1 = {
    components: {
        Token: ve,
        Modal: se
    },
    data() {
        return {
            game: ze,
            pages: {},
            rolesSent: !1,
            rolesShuffled: !1,
            evil: ["minion", "demon"],
            good: ["townsfolk", "outsider"]
        }
    },
    computed: {
        ...M(["roles", "modal", "session", "rolesSelected", "definitions"]),
        ...M("players", ["players", "npcs"]),
        ...D("players", ["nonTravellers"]),
        ...D("user", ["isStoryteller"]),
        rolesByTeam() {
            const e = {};
            return this.roles.forEach(s => {
                e[s.team] || (e[s.team] = []),
                e[s.team].push(s)
            }
            ),
            this.definitions.NPC_TEAMS.forEach(s => delete e[s]),
            delete e.traveller,
            this.rolesShuffled && Object.keys(e).forEach(s => {
                e[s] = e[s].map(t => [Math.random(), t]).sort( (t, n) => t[0] - n[0]).map(t => t[1])
            }
            ),
            e
        },
        hasDuplicateGood() {
            return [...this.rolesSelected.map(e => this.roles.get(e)), ...this.npcs].some(e => {
                var s;
                return (s = e == null ? void 0 : e.special) == null ? void 0 : s.some(t => t.type === "selection" && t.name === "good-duplicate")
            }
            )
        },
        hasSelectedSetupRoles() {
            return this.rolesSelected.some(e => {
                var s;
                return (s = this.roles.get(e)) == null ? void 0 : s.setup
            }
            )
        },
        hasGardener() {
            return this.npcs.some(e => e.id === "gardener")
        },
        hasTor() {
            return this.npcs.some(e => e.id === "tor")
        }
    },
    methods: {
        ...U(["toggleModal", "toggleRole"]),
        updateRoleSelection() {
            this.hasGardener && this.players.forEach(e => {
                e.role.id && !this.rolesSelected.includes(e.role.id) && e.role.team !== "traveller" && this.toggleRole(e.role)
            }
            )
        },
        selectRole(e, s) {
            var n;
            const t = this.rolesSelected.filter(o => e.id === o).length;
            s && (t >= 15 || t >= this.players.length) || (!((n = e.special) != null && n.some(o => o.type === "selection" && o.name === "bag-disabled")) || this.rolesSelected.includes("atheist") || this.rolesSelected.includes(e.id)) && this.toggleRole({
                id: e.id,
                add: s
            })
        },
        assignRoles() {
            if (this.nonTravellers && this.rolesSelected.length !== this.nonTravellers || this.rolesSent || this.session.hook.name)
                return;
            this.rolesSent = !0;
            const e = this.rolesSelected.filter(o => this.roles.has(o)).map(o => this.roles.get(o)).map(o => [Math.random(), o]).sort( (o, i) => o[0] - i[0]).map(o => o[1])
              , s = ({role: o}) => o === "revolutionary"
              , t = e.some( ({id: o}) => o === "lunatic");
            let n;
            this.players.filter(o => o.reminders.some(s)).forEach(o => {
                if (!e.length)
                    return;
                o.alignment = null;
                const i = ["lunatic"];
                if (n) {
                    const l = e.findIndex( ({team: g, id: d}) => i.includes(d) !== n.includes(g) && (!t || g !== "demon"));
                    l > -1 ? o.role = e.splice(l, 1).pop() : o.role = {}
                } else {
                    let l = e.pop();
                    l.team === "demon" && t && (e.unshift(l),
                    l = e.pop()),
                    n = i.includes(l.id) !== this.evil.includes(l.team) ? this.evil : this.good,
                    o.role = l
                }
            }
            ),
            this.players.filter(o => o.reminders.some(s) ? !1 : this.hasGardener && e.includes(o.role) ? (e.splice(e.indexOf(o.role), 1),
            !1) : !0).forEach(o => {
                o.role.team !== "traveller" && e.length && (o.role = e.pop(),
                o.alignment = null)
            }
            ),
            this.$store.commit("players/setRoles", this.players),
            this.hasGardener || this.$store.dispatch("game/distributeRoles"),
            this.toggleModal(this.modal)
        }
    },
    watch: {
        "modal.name"() {
            this.modal.name === "roles" && (this.rolesSent = !1,
            this.updateRoleSelection())
        },
        rolesByTeam() {
            this.pages = {}
        }
    }
}
  , J1 = ["onClick"]
  , $1 = ["data-tooltip"]
  , x1 = ["onClick"]
  , ek = ["onClick"]
  , sk = {
    key: 1,
    class: "buttons"
}
  , tk = {
    key: 0
}
  , ik = {
    class: "button-group"
}
  , ok = {
    key: 0,
    class: "warning"
};
function nk(e, s, t, n, o, i) {
    const l = k("i18n-t")
      , g = k("font-awesome-icon")
      , d = k("Token")
      , h = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.isStoryteller && e.modal.name === "roles" && e.players.length >= 5 ? (r(),
        C(h, {
            key: 0,
            class: "roles",
            onClose: s[4] || (s[4] = m => e.toggleModal(e.modal))
        }, {
            header: T( () => [b(l, {
                keypath: "modals.roles.title",
                scope: "global"
            }, {
                default: T( () => [a("b", null, c(e.nonTravellers) + " " + c(e.$t("modals.roles.title_players")), 1)]),
                _: 1
            }), e.rolesSelected.length ? (r(),
            C(g, {
                key: 0,
                onClick: s[0] || (s[0] = m => e.toggleRole()),
                icon: "trash-alt",
                class: "clear",
                title: e.$t("modals.roles.clear")
            }, null, 8, ["title"])) : A("", !0)]),
            default: T( () => [(r(!0),
            u(y, null, N(i.rolesByTeam, (m, p) => {
                var f, P, w, B, j;
                return r(),
                u("ul", {
                    class: _(["tokens", p]),
                    key: p
                }, [o.pages[p] > 0 ? (r(),
                u("li", {
                    key: 0,
                    class: "paging up",
                    onClick: V => o.pages[p] -= 1
                }, [b(g, {
                    icon: "arrow-circle-up"
                })], 8, J1)) : A("", !0), a("li", {
                    class: _(["count", {
                        done: e.rolesSelected.filter(V => m.some(S => S.id === V)).length === o.game[e.nonTravellers][p]
                    }]),
                    "data-tooltip": e.$t(`grimoire.${p}`, (f = o.game[e.nonTravellers][p]) != null ? f : 0)
                }, c(e.rolesSelected.filter(V => m.some(S => S.id === V)).length) + " / " + c((P = o.game[e.nonTravellers][p]) != null ? P : "?"), 11, $1), ((w = o.pages[p]) != null ? w : 0) < Math.floor((m.length - 1) / 7) - 1 ? (r(),
                u("li", {
                    key: 1,
                    class: "paging down",
                    onClick: V => {
                        var S;
                        return o.pages[p] = ((S = o.pages[p]) != null ? S : 0) + 1
                    }
                }, [b(g, {
                    icon: "arrow-circle-down"
                })], 8, x1)) : A("", !0), (r(!0),
                u(y, null, N(m.slice(((B = o.pages[p]) != null ? B : 0) * 7, ((j = o.pages[p]) != null ? j : 0) * 7 + 14), V => {
                    var S, E;
                    return r(),
                    u("li", {
                        class: _({
                            selected: e.rolesSelected.includes(V.id),
                            disabled: (S = V.special) == null ? void 0 : S.some(I => I.type === "selection" && I.name === "bag-disabled")
                        }),
                        key: V.id,
                        onClick: I => i.selectRole(V)
                    }, [b(d, {
                        role: V,
                        class: "top"
                    }, null, 8, ["role"]), V.setup ? (r(),
                    C(g, {
                        key: 0,
                        class: "warning",
                        icon: "exclamation-triangle"
                    })) : A("", !0), (E = V.special) != null && E.some(I => I.type === "selection" && I.name === "bag-duplicate") || o.good.includes(V.team) && i.hasDuplicateGood ? (r(),
                    u("div", sk, [b(g, {
                        icon: "minus-circle",
                        onClick: R(I => i.selectRole(V), ["stop"])
                    }, null, 8, ["onClick"]), e.rolesSelected.filter(I => V.id === I).length > 1 ? (r(),
                    u("span", tk, c(e.rolesSelected.filter(I => V.id === I).length), 1)) : A("", !0), b(g, {
                        icon: "plus-circle",
                        onClick: R(I => i.selectRole(V, !0), ["stop"])
                    }, null, 8, ["onClick"])])) : A("", !0)], 10, ek)
                }
                ), 128))], 2)
            }
            ), 128)), a("div", ik, [a("div", {
                class: _(["button primary", {
                    disabled: e.rolesSelected.length !== e.nonTravellers || e.session.hook.name
                }]),
                onClick: s[1] || (s[1] = (...m) => i.assignRoles && i.assignRoles(...m))
            }, [b(g, {
                icon: "theater-masks"
            }), s[5] || (s[5] = v("Â  ", -1)), e.session.sessionId && !i.hasGardener && !i.hasTor ? (r(),
            u(y, {
                key: 0
            }, [v(c(e.$t("modals.roles.button_distribute", [e.rolesSelected.length])), 1)], 64)) : (r(),
            u(y, {
                key: 1
            }, [v(c(e.$t("modals.roles.button_gardener", [e.rolesSelected.length])), 1)], 64))], 2), a("div", {
                class: "button",
                onClick: s[2] || (s[2] = m => o.rolesShuffled++)
            }, [b(g, {
                icon: "random"
            }), v(" " + c(e.$t("modals.roles.button_shuffle")), 1)]), a("div", {
                class: _(["button secondary", {
                    disabled: !o.rolesShuffled
                }]),
                onClick: s[3] || (s[3] = m => o.rolesShuffled = 0)
            }, [b(g, {
                icon: "undo"
            }), v(" " + c(e.$t("modals.roles.button_sort")), 1)], 2)]), i.hasSelectedSetupRoles ? (r(),
            u("div", ok, [b(g, {
                icon: "exclamation-triangle"
            }), a("span", null, c(e.$t("modals.roles.warning")), 1)])) : A("", !0)]),
            _: 1
        })) : A("", !0)]),
        _: 1
    })
}
const ak = O(Y1, [["render", nk], ["__scopeId", "data-v-fe64192a"]])
  , rk = ["enter"]
  , lk = ["1"]
  , ck = ["2"]
  , dk = ["3"]
  , uk = ["backspace"]
  , gk = [" "]
  , mk = [" "]
  , hk = ["t"]
  , pk = ["n"]
  , Ak = ["n"]
  , bk = ["c"]
  , fk = ["o"]
  , vk = ["q"]
  , yk = ["/"]
  , _k = ["u"]
  , wk = ["z"]
  , kk = ["r"]
  , Ck = ["g"]
  , Sk = ["f"]
  , Pk = ["v"]
  , Tk = ["d"]
  , Ik = ["."]
  , Mk = [","]
  , Rk = ["l"]
  , Dk = ["1"]
  , Ek = ["2"]
  , Nk = ["3"]
  , Bk = ["4"]
  , Vk = ["5"]
  , Ge = {
    toggleWhisper: rk,
    acceptChat1: lk,
    acceptChat2: ck,
    acceptChat3: dk,
    leaveChat: uk,
    castVote: gk,
    raiseHand: mk,
    toggleTownSquare: hk,
    toggleNight: pk,
    toggleNightSignal: Ak,
    toggleReference: bk,
    toggleNightOrder: fk,
    modalSettings: vk,
    modalShortcuts: yk,
    modalUsers: _k,
    setTimer: wk,
    attentionGong: kk,
    revealGrimoire: Ck,
    toggleFullscreen: Sk,
    toggleVoteHistory: Pk,
    toggleAudioDeafened: Tk,
    toggleAudioMuted: Ik,
    toggleVideoMuted: Mk,
    leaveSession: Rk,
    modeGather: Dk,
    toggleEdition: Ek,
    modalRules: Nk,
    toggleNPCs: Bk,
    toggleRoles: Vk
}
  , Is = "/assets/skull-BRKlHZep.webp"
  , Ms = "/assets/skull-DUUKiCc5.webp"
  , Rs = "/assets/skull-DHMkfNj5.webp"
  , Ds = "/assets/skull-DFNKB9VY.webp"
  , Es = "/assets/skull-DINexilz.webp"
  , Ok = {
    name: "User",
    components: {
        FontAwesomeIcon: hl,
        PlayerAvatar: da
    },
    props: {
        user: {
            type: Object,
            required: !0,
            default: () => ({})
        },
        stats: {
            type: Object,
            required: !0,
            default: () => ({})
        }
    },
    computed: {
        ...M(["editionsAvailable", "rolesAvailable", "session"]),
        ...M("user", {
            localUser: "user",
            accessToken: "accessToken",
            levels: "levels",
            relations: "relations"
        }),
        ...M("chat", ["userOverrides"]),
        ...D("players", ["seatedPlayerMap"]),
        ...D("user", ["isModerator"]),
        ...D(["roleIconURL"]),
        relation() {
            return this.relations.get(this.user.id)
        },
        isEditable() {
            return this.localUser.id === String(this.user.id)
        },
        availableAvatars() {
            var s, t, n;
            const e = [].concat((s = this.localUser.cosmetics) == null ? void 0 : s.avatars);
            ((t = this.localUser.cosmetics) == null ? void 0 : t.avatar) < 0 && e.unshift((n = this.localUser.cosmetics) == null ? void 0 : n.avatar);
            for (let o = 0; o <= 25; o++)
                e.push(o);
            return e
        },
        availableBorders() {
            var s, t;
            const e = [""];
            return this.localUser.level === "patreon-townsfolk" && e.push("townsfolk"),
            this.localUser.level === "patreon-minion" && e.push("townsfolk", "minion"),
            this.localUser.level === "patreon-demon" && e.push("townsfolk", "minion", "demon"),
            this.localUser.level === "special-tpi" && e.push("tpi"),
            this.localUser.level === "special-moderator" && e.push("moderator"),
            (s = this.localUser.flags) != null && s.includes("powerful") && e.push("rainbow", "progress"),
            (t = this.localUser.cosmetics) != null && t.borders && e.push(...this.localUser.cosmetics.borders),
            e
        },
        statsLabel() {
            var t, n, o, i;
            const e = (o = (n = this.newStats) != null ? n : (t = this.user.cosmetics) == null ? void 0 : t.stats) != null ? o : 0
              , s = (i = this.statsLabels[e]) != null ? i : {};
            return s.hidden = this.user.id === this.localUser.id ? e === 2 : e > 0,
            s
        },
        statsCalculated() {
            var g, d, h, m, p, f, P, w, B, j;
            const {storyteller: e, stEvilWins: s, player: t, playerWins: n, editions: o, roles: i, games: l} = this.stats;
            return l === void 0 || this.statsLabel.hidden && !this.isModerator ? {
                storyteller: "???",
                player: "???",
                edition: "",
                role: ""
            } : {
                storyteller: e,
                stEvilWins: s !== void 0 && e ? Math.round(100 * s / e) : void 0,
                player: t,
                playerWins: n !== void 0 && t ? Math.round(100 * n / t) : void 0,
                edition: (g = o[this.edition % o.length]) == null ? void 0 : g.id,
                editionTooltip: o.length ? [(d = o[this.edition % o.length]) == null ? void 0 : d.id, (h = o[this.edition % o.length]) == null ? void 0 : h.value] : void 0,
                editionIcon: new URL(Object.assign({
                    "/src/assets/editions/bmr/skull.webp": Is,
                    "/src/assets/editions/custom/skull.webp": Ms,
                    "/src/assets/editions/homebrew/skull.webp": Rs,
                    "/src/assets/editions/snv/skull.webp": Ds,
                    "/src/assets/editions/tb/skull.webp": Es
                })[`/src/assets/editions/${(p = (m = o[this.edition % o.length]) == null ? void 0 : m.id) != null ? p : "custom"}/skull.webp`],import.meta.url).href,
                role: (f = i[this.role % i.length]) == null ? void 0 : f.id,
                roleTooltip: i.length ? this.role % i.length + 1 + ". " + ((B = (w = this.rolesAvailable.get((P = i[this.role % i.length]) == null ? void 0 : P.id)) == null ? void 0 : w.name) != null ? B : this.$t("user.stats.homebrew")) + " x " + ((j = i[this.role % i.length]) == null ? void 0 : j.value) : void 0
            }
        }
    },
    data() {
        var e;
        return {
            isAvatarSelection: !1,
            newAvatar: null,
            newStats: void 0,
            newBorder: void 0,
            edition: 0,
            role: 0,
            volume: (e = this.$store.state.chat.userOverrides.get("volume-" + this.user.id)) != null ? e : 1,
            dtFormat: new Intl.DateTimeFormat(navigator.languages ? navigator.languages[0] : navigator.language,{
                dateStyle: "short",
                timeStyle: "short"
            }),
            statsLabels: [{
                name: "public",
                icon: "eye",
                class: "primary"
            }, {
                name: "private",
                icon: "lock"
            }, {
                name: "hidden",
                icon: "eye-slash",
                class: "secondary"
            }]
        }
    },
    methods: {
        stat: Xd,
        ...U(["toggleModal"]),
        ...U("chat", ["setUserOverride"]),
        ...$("user", ["promptUserUpdate"]),
        setAudioVolume(e, s) {
            this.volume = s != null ? s : this.volume,
            this.setUserOverride({
                userId: e.id,
                type: "volume",
                value: Number(this.volume) === 1 ? !1 : Number(this.volume)
            })
        },
        toggleAvatar() {
            this.isEditable && (this.isAvatarSelection = !0)
        },
        uploadAvatar() {
            var e, s;
            this.localUser.level && this.isEditable && ((e = this.localUser.flags) != null && e.includes("forced-avatar") || (s = this.$refs.avatar) == null || s.click())
        },
        async handleAvatarUpload() {
            var o;
            if (!this.localUser.level || !this.isEditable)
                return;
            const e = 1024 * 1024 * 5
              , s = (o = this.$refs.avatar) == null ? void 0 : o.files[0];
            if (!s)
                return;
            if (s.size > e) {
                this.$refs.avatar && (this.$refs.avatar.value = ""),
                this.$store.dispatch("showError", ["user.error_avatar_title", ["user.error_avatar_text", [(s.size / (1024 * 1024)).toFixed(1), (e / (1024 * 1024)).toFixed(1)]]]);
                return
            }
            const t = new FormData;
            t.append("avatar", s);
            const n = await this.$store.dispatch("user/uploadAvatar", t);
            this.$refs.avatar && (this.$refs.avatar.value = ""),
            n !== !1 && this.setCustomAvatar(n)
        },
        toggleStats() {
            var e, s, t;
            this.newStats = (((t = (s = this.newStats) != null ? s : (e = this.user.cosmetics) == null ? void 0 : e.stats) != null ? t : 0) + 1) % 3
        },
        setCustomAvatar(e) {
            this.newAvatar = e,
            this.isAvatarSelection = !1
        },
        setCustomBorder(e) {
            var o, i;
            const s = this.availableBorders
              , t = (i = this.newBorder) != null ? i : ((o = this.localUser.cosmetics) == null ? void 0 : o.border) || "";
            if (s.length <= 1 && !t)
                return;
            const n = s[(s.indexOf(t) + e + s.length) % s.length] || "";
            n !== t && s.indexOf(n) > -1 && (this.newBorder = n)
        },
        async changeUser(e) {
            var s, t;
            if (this.isEditable && !(e === "username" && ((s = this.localUser.flags) != null && s.includes("forced-username"))) && !(e === "pronouns" && ((t = this.localUser.flags) != null && t.includes("forced-pronouns"))))
                try {
                    await this.promptUserUpdate(e)
                } catch {} finally {
                    this.toggleModal({
                        name: "settings"
                    })
                }
        }
    },
    watch: {
        "user.id"() {
            var e;
            this.volume = (e = this.userOverrides.get("volume-" + this.user.id)) != null ? e : 1
        }
    },
    beforeUnmount() {
        var e, s, t, n;
        if (this.user.id === this.localUser.id) {
            const o = {}
              , {avatar: i, border: l, stats: g} = (e = this.localUser.cosmetics) != null ? e : {};
            ((s = this.newBorder) != null ? s : l) !== l && (o.border = this.newBorder,
            this.newBorder = void 0),
            ((t = this.newAvatar) != null ? t : i) !== i && (o.avatar = this.newAvatar,
            this.newAvatar = null),
            ((n = this.newStats) != null ? n : g) !== g && (o.stats = this.newStats,
            this.newStats = null),
            Object.keys(o).length && this.$store.dispatch("user/updateUser", o)
        }
    }
}
  , jk = {
    class: "preview"
}
  , Uk = ["title"]
  , Hk = {
    class: "profile"
}
  , qk = {
    class: "id"
}
  , Lk = {
    key: 0,
    class: "block"
}
  , zk = {
    key: 1
}
  , Gk = {
    key: 0
}
  , Wk = {
    key: 1
}
  , Fk = ["aria-checked"]
  , Qk = ["aria-checked"]
  , Zk = ["data-tooltip"]
  , Xk = ["data-tooltip"]
  , Kk = ["data-tooltip"]
  , Yk = {
    key: 0
}
  , Jk = {
    key: 1,
    class: "edition"
}
  , $k = ["src"]
  , xk = ["data-tooltip"]
  , e2 = {
    key: 0
}
  , s2 = {
    key: 1,
    class: "role"
}
  , t2 = {
    key: 2,
    class: "loading"
}
  , i2 = {
    key: 3,
    class: "warning"
}
  , o2 = {
    key: 1,
    class: "avatars"
};
function n2(e, s, t, n, o, i) {
    var h, m, p, f, P, w, B, j, V, S, E;
    const l = k("PlayerAvatar")
      , g = k("font-awesome-icon")
      , d = k("i18n-t");
    return o.isAvatarSelection ? (r(),
    u("div", o2, [e.localUser.id === t.user.id && e.localUser.level ? (r(),
    u("div", {
        key: 0,
        class: _(["custom avatar", {
            disabled: (S = e.localUser.flags) == null ? void 0 : S.includes("forced-avatar")
        }]),
        onClick: s[13] || (s[13] = (...I) => i.uploadAvatar && i.uploadAvatar(...I))
    }, [b(g, {
        icon: (E = e.localUser.flags) != null && E.includes("forced-avatar") ? "lock" : "file-upload"
    }, null, 8, ["icon"]), v(" " + c(e.$t("user.upload_avatar")), 1)], 2)) : A("", !0), (r(!0),
    u(y, null, N(i.availableAvatars, I => {
        var Z, H;
        return r(),
        C(l, {
            key: I,
            user: t.user,
            override: I,
            frame: !1,
            class: _(["avatar", {
                selected: ((H = o.newAvatar) != null ? H : (Z = e.localUser.cosmetics) == null ? void 0 : Z.avatar) === I
            }]),
            onClick: F => i.setCustomAvatar(I)
        }, null, 8, ["user", "override", "class", "onClick"])
    }
    ), 128)), a("input", {
        type: "file",
        ref: "avatar",
        accept: "image/png, image/jpeg, image/gif, image/webp",
        onChange: s[14] || (s[14] = I => i.handleAvatarUpload())
    }, null, 544)])) : (r(),
    u("div", {
        key: 0,
        class: _(["user", {
            edit: i.isEditable,
            ["relation-" + ((h = i.relation) == null ? void 0 : h.type)]: i.relation
        }])
    }, [a("div", jk, [b(l, {
        class: "avatar",
        user: t.user,
        override: o.newAvatar,
        onClick: i.toggleAvatar
    }, null, 8, ["user", "override", "onClick"]), a("div", {
        class: _(["nameplate", {
            ["border-" + ((p = o.newBorder) != null ? p : (m = t.user.cosmetics) == null ? void 0 : m.border)]: ((f = i.relation) == null ? void 0 : f.type) !== "block" && !!((w = o.newBorder) != null ? w : (P = t.user.cosmetics) != null && P.border),
            ["level-" + t.user.level]: !!t.user.level,
            custom: i.availableBorders.length > 1 || ((B = t.user.cosmetics) == null ? void 0 : B.border)
        }]),
        title: t.user.pronouns
    }, [a("div", {
        class: "name",
        onClick: s[0] || (s[0] = I => i.changeUser("username"))
    }, c((j = t.user.username) != null ? j : e.$t("common.unnamed_user")), 1), a("div", {
        class: _(["pronouns", {
            empty: !t.user.pronouns
        }]),
        onClick: s[1] || (s[1] = I => i.changeUser("pronouns"))
    }, c(t.user.pronouns || e.$t("user.pronouns")), 3), i.isEditable ? (r(),
    u("button", {
        key: 0,
        class: "button left",
        onClick: s[2] || (s[2] = R(I => i.setCustomBorder(-1), ["stop"]))
    }, [b(g, {
        icon: "arrow-circle-left"
    })])) : A("", !0), i.isEditable ? (r(),
    u("button", {
        key: 1,
        class: "button right",
        onClick: s[3] || (s[3] = R(I => i.setCustomBorder(1), ["stop"]))
    }, [b(g, {
        icon: "arrow-circle-right"
    })])) : A("", !0)], 10, Uk)]), a("ul", Hk, [a("li", qk, [a("span", null, c(e.$t("user.id")) + ":", 1), v(" " + c(t.user.id), 1)]), ((V = i.relation) == null ? void 0 : V.type) === "block" ? (r(),
    u("li", Lk, [a("span", null, c(e.$t("user.blocked")) + ":", 1), b(d, {
        keypath: "user.blocked_on_date_as_name",
        scope: "global"
    }, {
        default: T( () => {
            var I;
            return [a("b", null, c(e.$d(new Date(i.relation.createdAt), {
                dateStyle: "short"
            })), 1), a("b", null, c((I = i.relation.meta) == null ? void 0 : I.username), 1)]
        }
        ),
        _: 1
    })])) : A("", !0), t.user.createdAt ? (r(),
    u("li", zk, [a("span", null, c(e.$t("user.registration")) + ":", 1), v(" " + c(e.$d(new Date(t.user.createdAt), {
        dateStyle: "short",
        timeStyle: "short"
    })) + " ", 1), t.user.flags.includes("verified-phone") ? (r(),
    C(g, {
        key: 0,
        icon: "check-circle",
        class: "verified",
        title: e.$t("user.verified")
    }, null, 8, ["title"])) : A("", !0), t.user.flags.includes("newuser") ? (r(),
    C(g, {
        key: 1,
        icon: "seedling",
        class: "newuser",
        title: e.$t("user.new_user")
    }, null, 8, ["title"])) : A("", !0)])) : A("", !0), a("li", null, [a("span", null, c(e.$t("user.level")) + ":", 1), v(" " + c(e.$t(`common.account-levels.${t.user.level || "free"}`)) + " ", 1), e.levels.GROUP.includes(t.user.level) ? (r(),
    C(g, {
        key: 0,
        icon: "users",
        class: "group",
        title: e.$t("user.group_subscription")
    }, null, 8, ["title"])) : A("", !0)]), e.session.sessionId && e.seatedPlayerMap.has(t.user.id) || e.localUser.id === t.user.id ? (r(),
    u(y, {
        key: 2
    }, [a("li", {
        class: "toggle",
        onClick: s[7] || (s[7] = I => i.setAudioVolume(t.user, o.volume > 0 ? 0 : 1))
    }, [e.localUser.id === t.user.id ? (r(),
    u("span", Gk, c(e.$t("user.gain")) + ":", 1)) : (r(),
    u("span", Wk, c(e.$t("user.mic_volume")) + ":", 1)), z(a("input", {
        type: "range",
        onChange: s[4] || (s[4] = I => i.setAudioVolume(t.user)),
        onClick: s[5] || (s[5] = R( () => {}
        , ["stop"])),
        "onUpdate:modelValue": s[6] || (s[6] = I => o.volume = I),
        min: "0",
        max: "2",
        step: "0.1"
    }, null, 544), [[G, o.volume]]), v(" " + c(Math.round(o.volume * 100)) + "% ", 1), a("button", {
        class: _(["button", {
            primary: o.volume > 0
        }])
    }, [e.localUser.id === t.user.id ? (r(),
    C(g, {
        key: 0,
        icon: o.volume > 0 ? "microphone" : "microphone-slash"
    }, null, 8, ["icon"])) : (r(),
    C(g, {
        key: 1,
        icon: o.volume > 0 ? "volume-up" : "volume-mute"
    }, null, 8, ["icon"]))], 2)]), t.user.id !== e.localUser.id ? (r(),
    u("li", {
        key: 0,
        onClick: s[8] || (s[8] = I => e.setUserOverride({
            userId: t.user.id,
            type: "novideo"
        })),
        class: "toggle"
    }, [a("span", null, c(e.$t("user.camera_enabled")) + ":", 1), a("button", {
        class: _(["button", {
            primary: !e.userOverrides.has("novideo-" + t.user.id)
        }]),
        "aria-checked": !e.userOverrides.has("novideo-" + t.user.id)
    }, [b(g, {
        icon: e.userOverrides.has("novideo-" + t.user.id) ? "video-slash" : "video"
    }, null, 8, ["icon"])], 10, Fk)])) : A("", !0)], 64)) : A("", !0), t.user.id !== e.localUser.id ? (r(),
    u("li", {
        key: 3,
        onClick: s[9] || (s[9] = I => e.setUserOverride({
            userId: t.user.id,
            type: "noavatar"
        })),
        class: "toggle"
    }, [a("span", null, c(e.$t("user.avatar_enabled")) + ":", 1), a("button", {
        class: _(["button", {
            primary: !e.userOverrides.has("noavatar-" + t.user.id)
        }]),
        "aria-checked": !e.userOverrides.has("noavatar-" + t.user.id)
    }, [b(g, {
        icon: e.userOverrides.has("noavatar-" + t.user.id) ? "user-slash" : "user"
    }, null, 8, ["icon"])], 10, Qk)])) : A("", !0), a("li", null, [a("span", null, c(e.$t("user.statistics")) + ":", 1), i.isEditable ? (r(),
    u("button", {
        key: 0,
        class: _(["button", [i.statsLabel.class]]),
        onClick: s[10] || (s[10] = (...I) => i.toggleStats && i.toggleStats(...I))
    }, [b(g, {
        icon: i.statsLabel.icon
    }, null, 8, ["icon"]), v(" " + c(e.$t(`user.stats_${i.statsLabel.name}`)), 1)], 2)) : A("", !0), t.stats.games >= 0 || i.statsLabel.hidden ? (r(),
    u("div", {
        key: 1,
        class: _(["stats", {
            hidden: i.statsLabel.hidden,
            moderator: e.isModerator
        }])
    }, [a("span", {
        "data-tooltip": i.statsCalculated.stEvilWins !== void 0 ? e.$t("user.stats.st_evil_wins", [i.statsCalculated.stEvilWins]) : void 0
    }, [a("b", null, c(i.statsCalculated.storyteller), 1), v(" " + c(e.$t("user.stats.storyteller")), 1)], 8, Zk), a("span", {
        "data-tooltip": i.statsCalculated.playerWins !== void 0 ? e.$t("user.stats.player_wins", [i.statsCalculated.playerWins]) : void 0
    }, [a("b", null, c(i.statsCalculated.player), 1), v(" " + c(e.$t("user.stats.player")), 1)], 8, Xk), a("span", {
        "data-tooltip": i.statsCalculated.editionTooltip ? `${o.edition % t.stats.editions.length + 1}. ${e.$t(`editions.${i.statsCalculated.editionTooltip[0]}.name`)} x ${i.statsCalculated.editionTooltip[1]}` : void 0,
        class: "toggle",
        onClick: s[11] || (s[11] = I => o.edition++)
    }, [i.statsCalculated.edition ? (r(),
    u("b", Jk, [a("img", {
        src: i.statsCalculated.editionIcon,
        alt: ""
    }, null, 8, $k)])) : (r(),
    u("b", Yk, c(e.$t("user.stats.none")), 1)), v(" " + c(e.$t("user.stats.edition")), 1)], 8, Kk), a("span", {
        "data-tooltip": i.statsCalculated.roleTooltip,
        class: "toggle",
        onClick: s[12] || (s[12] = I => o.role++)
    }, [i.statsCalculated.role ? (r(),
    u("b", s2, [a("span", {
        class: "icon",
        style: q({
            backgroundImage: `url(${e.roleIconURL({
                id: i.statsCalculated.role
            })})`
        })
    }, null, 4)])) : (r(),
    u("b", e2, c(e.$t("user.stats.none")), 1)), v(" " + c(e.$t("user.stats.role")), 1)], 8, xk)], 2)) : t.stats.loading ? (r(),
    u("div", t2, c(e.$t("user.stats.loading")), 1)) : (r(),
    u("div", i2, c(e.$t("user.stats.warning")), 1))])])], 2))
}
const kl = O(Ok, [["render", n2], ["__scopeId", "data-v-f4641d4e"]])
  , a2 = {
    production: "https://botc.app/backend/"
}
  , Cl = a2.production
  , Sl = async e => {
    if (!e.ok) {
        let s = e.body;
        const t = e.headers.get("content-type");
        return t != null && t.includes("application/json") && (s = await e.json()),
        {
            error: new Error("HTTP Error " + e.status),
            status: e.status,
            body: s
        }
    }
    return await e.json()
}
  , ne = async (e="", s={}, t, n={}) => {
    var o;
    try {
        const i = await fetch(Cl + e, {
            method: (o = n.method) != null ? o : "POST",
            headers: {
                ...n.isFormData ? {} : {
                    "Content-Type": "application/json"
                },
                Authorization: t ? "Bearer " + t : null,
                "x-app-version": re.version
            },
            body: n.isFormData ? s : JSON.stringify(s)
        });
        return await Sl(i)
    } catch (i) {
        return {
            error: i
        }
    }
}
  , Oe = async (e="", s) => {
    try {
        const t = await fetch(Cl + e, {
            headers: {
                Authorization: s ? "Bearer " + s : null,
                "x-app-version": re.version
            }
        });
        return await Sl(t)
    } catch (t) {
        return {
            error: t
        }
    }
}
  , oe = (e, s="") => (t, n) => {
    n != null && (n.value === !0 || n.value === !1) ? s && t[s] ? t[s][e] = n.value : t[e] = n.value : n === !0 || n === !1 ? s && t[s] ? t[s][e] = n : t[e] = n : s && t[s] ? t[s][e] = !t[s][e] : t[e] = !t[e]
}
  , r2 = {
    name: "SettingsModal",
    components: {
        User: kl,
        Modal: se
    },
    inject: ["isTouchDevice"],
    computed: {
        ...M("user", ["user", "accessToken"]),
        ...M("players", ["npcs"]),
        ...M(["session", "chat", "modal", "grimoire", "edition", "vote", "keybindings", "settings"]),
        ...D("players", ["seatedPlayerMap"]),
        ...D("user", ["isStoryteller"]),
        canChat() {
            return this.session.sessionId && this.seatedPlayerMap.has(this.user.id)
        },
        canSetVoteSpeed() {
            return this.isStoryteller && !this.vote.isInProgress && this.vote.locked < 1
        }
    },
    data() {
        var t;
        const {user: e} = this.$store.state.user
          , {userOverrides: s} = this.$store.state.chat;
        return {
            patreonCallback: encodeURIComponent(window.location.origin),
            currentTab: 0,
            isLoading: !1,
            audioSelection: null,
            audioList: [],
            volume: (t = s.get("volume-" + e.id)) != null ? t : 1,
            soundVolume: this.$store.state.settings.general.soundVolume,
            sounds: In,
            soundEffectVolume: Object.fromEntries([...this.$store.state.settings.sounds]),
            voteSpeed: this.$store.state.vote.speed,
            avatarZoom: this.$store.state.settings.general.avatarZoom,
            zoom: this.$store.state.settings.general.tokenZoom,
            reminderZoom: this.$store.state.settings.general.reminderZoom,
            grimoireOffset: this.$store.state.settings.general.grimoireOffset,
            stats: {
                loading: !0
            },
            localUser: e,
            videoSelection: null,
            videoList: [],
            chroma: this.$store.state.settings.advanced.chromaKey || "#00B140",
            isRecording: !1,
            isRecordingExtra: !1,
            newBorder: void 0,
            isSoundSettings: !1,
            isAvatarSelection: !1,
            defaultLocale: fe,
            nominationTypes: ["regular", "focus", "phases"]
        }
    },
    methods: {
        ...U("chat", ["setVideoDevice", "setVideoPreference", "setAudioDevice", "setAudioPreference", "toggleVideoMuted", "toggleAutoGainControl", "toggleNoiseSuppression", "toggleEchoCancellation", "toggleAudioDeafened", "toggleVideoDeafened", "toggleVideoUnmirrored", "toggleVideoHidden"]),
        ...U(["toggleModal"]),
        ...U("settings", ["setAvatarZoom", "setTokenZoom", "setReminderZoom", "setGrimoireOffset", "toggleAnimationsDisabled", "toggleCosmeticsDisabled", "toggleImageOptIn", "toggleNightOrder", "toggleNightRequestPing", "togglePlayerBluffs", "togglePlayerNightOrder", "togglePlayerDuplicates", "togglePositioningDisabled", "toggleTutorialDisabled", "toggleEnglishNames", "toggleStackReminderTokens", "toggleNightStatic", "toggleTouchSupport", "toggleHiddenTownSquareCams", "toggleHiddenPrivateCams", "toggleHiddenRevealCams", "togglePublicTownSquare", "setChromaKey"]),
        updateTab(e) {
            this.currentTab = e,
            this.isAvatarSelection = !1,
            this.isSoundSettings = !1,
            e === 1 ? Oe(`user/${this.user.id}`, this.accessToken).then( ({stats: s, user: t}) => {
                this.stats = s,
                this.localUser = t
            }
            ) : e === 2 && (this.volume = this.$store.state.chat.userOverrides.has("volume-" + this.user.id) ? this.$store.state.chat.userOverrides.get("volume-" + this.user.id) : 1,
            this.listDevices().catch( () => {}
            ))
        },
        logout() {
            this.$store.dispatch("user/logout"),
            this.toggleModal({
                name: "settings"
            })
        },
        async listDevices() {
            var e, s;
            if (!this.isLoading) {
                if (this.isLoading = !0,
                !this.videoList.length)
                    try {
                        const t = await navigator.mediaDevices.getUserMedia({
                            video: !0
                        });
                        t && t.getTracks().forEach(n => n.stop())
                    } catch {}
                if (!this.audioList.length)
                    try {
                        const t = await navigator.mediaDevices.getUserMedia({
                            audio: !0
                        });
                        t && t.getTracks().forEach(n => n.stop())
                    } catch {}
                try {
                    const t = await navigator.mediaDevices.enumerateDevices();
                    this.audioSelection = (e = this.audioSelection) != null ? e : this.chat.audio.preference,
                    this.videoSelection = (s = this.videoSelection) != null ? s : this.chat.video.preference,
                    t.some(n => n.kind === "audioinput") && (this.audioList = []),
                    t.some(n => n.kind === "videoinput") && (this.videoList = []),
                    t.forEach(n => {
                        switch (n.kind) {
                        case "audioinput":
                            this.audioSelection === null && (this.audioSelection = n.deviceId),
                            this.audioList.push(n);
                            break;
                        case "videoinput":
                            this.videoSelection === null && (this.videoSelection = n.deviceId),
                            this.videoList.push(n);
                            break
                        }
                    }
                    )
                } catch {}
                this.isLoading = !1,
                this.checkChatPermission()
            }
        },
        changePreference(e) {
            if (e === "audio")
                this.setAudioPreference(this.audioSelection),
                this.canChat && this.setAudioDevice(this.audioSelection);
            else {
                const s = this.chat.video.device || this.chat.video.preference === this.chat.video.device;
                this.setVideoPreference(this.videoSelection),
                this.canChat && s && this.setVideoDevice(this.videoSelection)
            }
        },
        checkChatPermission() {
            if (!this.canChat) {
                this.chat.audio.device && this.setAudioDevice(),
                this.chat.video.device && this.setVideoDevice();
                return
            }
            !this.chat.audio.device && this.audioSelection && (this.chat.audio.preference !== this.audioSelection && this.$store.commit("chat/toggleAudioMuted", !0),
            this.setAudioDevice(this.audioSelection)),
            !this.chat.video.device && this.videoSelection === this.chat.video.preference && this.setVideoDevice(this.videoSelection)
        },
        deafen(e) {
            e === "audio" ? (this.chat.isNotAllowed && this.$store.commit("chat/toggleNotAllowed", !1),
            this.toggleAudioDeafened(),
            this.chat.audio.isDeafened && !this.chat.audio.isMuted && this.toggleAudioMuted()) : (this.toggleVideoDeafened(),
            this.chat.video.isDeafened && !this.chat.video.isMuted && this.toggleVideoMuted())
        },
        setAudioVolume() {
            this.$store.commit("chat/setUserOverride", {
                userId: this.user.id,
                type: "volume",
                value: Number(this.volume) === 1 ? !1 : Number(this.volume)
            })
        },
        setSoundVolume(e) {
            e ? (this.$store.commit("settings/setSoundEffectVolume", {
                id: e,
                value: this.soundEffectVolume[e]
            }),
            this.$store.commit("removeSound", {
                name: e
            }),
            this.$store.commit("playSound", e)) : this.$store.commit("settings/setSoundVolume", this.soundVolume)
        },
        async setBackground() {
            try {
                const e = await this.$store.dispatch("openDialogue", {
                    type: "prompt",
                    title: "modals.settings.background_title",
                    placeholder: "modals.settings.background_placeholder",
                    value: this.grimoire.background,
                    text: "modals.settings.background_text"
                });
                this.$store.commit("settings/setBackground", e)
            } catch {} finally {
                this.toggleModal({
                    name: "settings"
                })
            }
        },
        async imageOptIn() {
            if (this.settings.general.isImageOptIn)
                return this.toggleImageOptIn();
            try {
                const e = await this.$store.dispatch("openDialogue", {
                    type: "confirm",
                    title: "modals.settings.image_title",
                    text: "modals.settings.image_text"
                });
                this.toggleImageOptIn(e)
            } catch {} finally {
                this.toggleModal({
                    name: "settings"
                })
            }
        },
        setVotingSpeed() {
            this.canSetVoteSpeed && this.voteSpeed >= 500 && this.voteSpeed <= 1e4 && this.$store.commit("vote/setVotingSpeed", this.voteSpeed)
        },
        toggleNominationType() {
            if (this.vote.locked > 0 || this.vote.isInProgress || this.npcs.some(s => s.id === "bigwig"))
                return;
            const e = (this.nominationTypes.indexOf(this.vote.nominationType) + 1) % this.nominationTypes.length;
            this.$store.commit("vote/setNominationType", this.nominationTypes[e]),
            this.vote.nomination && (this.vote.nominationType === "phases" && this.vote.locked === 0 ? this.$store.commit("vote/lockVote", -3) : this.vote.locked < -1 && this.$store.commit("vote/lockVote", 0))
        },
        setColorblindMode(e) {
            this.$store.commit("settings/setColorblind", (8 + this.settings.general.colorblind + e) % 8)
        },
        setChroma(e) {
            e && this.settings.advanced.chromaKey ? this.setChromaKey("") : this.setChromaKey(this.chroma)
        },
        async setCustomCSS() {
            try {
                let {value: e, checkbox: s} = await this.$store.dispatch("openDialogue", {
                    type: "prompt",
                    title: "modals.settings.css_title",
                    input: "textarea",
                    text: "modals.settings.css_text",
                    placeholder: "https://url.to/custom.css / body { color: red; }",
                    value: this.settings.advanced.customCSS,
                    checkbox: {
                        label: "modals.settings.css_confirm",
                        value: !!this.settings.advanced.customCSS,
                        required: !0
                    }
                });
                s || !e ? (e.trim().match(/^https?:\/\//i) && (e = await (await fetch(e.trim())).text()),
                this.$store.commit("settings/setCustomCSS", e),
                await this.toggleCustomCSS(!0)) : this.toggleModal({
                    name: "settings"
                })
            } catch {}
        },
        toggleSetup() {
            this.$store.commit("chat/toggleAudioMuted", !0),
            this.$store.commit("chat/toggleVideoMuted", !0),
            this.toggleModal({
                name: "setup"
            })
        },
        async toggleCustomCSS(e) {
            if (this.$store.commit("settings/toggleCustomCSS", e),
            this.settings.advanced.customCSSEnabled) {
                try {
                    await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "modals.settings.css_apply",
                        text: "modals.settings.css_confirm2",
                        timer: 10
                    }) || this.$store.commit("settings/toggleCustomCSS", !1)
                } catch {
                    this.$store.commit("settings/toggleCustomCSS", !1)
                }
                this.toggleModal({
                    name: "settings"
                })
            }
        },
        toggleWhispers() {
            this.isStoryteller && this.$store.commit("session/toggleWhispers")
        },
        togglePushToTalk() {
            this.$store.commit("chat/togglePushToTalk"),
            this.chat.audio.isPushToTalk && !this.chat.audio.isMuted && this.$store.commit("chat/toggleAudioMuted")
        },
        toggleAudioMuted() {
            this.chat.audio.isPushToTalk || !this.chat.audio.device || this.$store.commit("chat/toggleAudioMuted")
        },
        recordShortcut(e, s) {
            this.isRecordingExtra = s != null ? s : !1,
            this.isRecording = e,
            this.$nextTick( () => {
                this.$refs.shortcut.focus()
            }
            )
        },
        cancelShortcut() {
            this.isRecording = !1,
            this.$nextTick( () => {
                document.getElementById("app").focus()
            }
            )
        },
        async resetShortcuts() {
            try {
                await this.$store.dispatch("openDialogue", {
                    type: "confirm",
                    title: "modals.settings.shortcut_reset",
                    text: "modals.settings.shortcut_reset_confirm"
                }) && this.$store.commit("setKeybindings", Ge)
            } catch {}
            this.toggleModal({
                name: "settings"
            })
        },
        keyup(e) {
            var t, n;
            let s = (t = e.key) == null ? void 0 : t.toLocaleLowerCase();
            if ((s === void 0 || s === "unidentified") && (s = (n = e.target.value) == null ? void 0 : n.toLocaleLowerCase()),
            s !== void 0) {
                if (s !== "escape")
                    if (this.isRecordingExtra) {
                        if (this.keybindings[this.isRecording].includes(s))
                            return this.cancelShortcut();
                        this.keybindings[this.isRecording].push(s)
                    } else
                        this.keybindings[this.isRecording] = [s];
                else
                    this.keybindings[this.isRecording] = [...Ge[this.isRecording]];
                this.$store.commit("setKeybindings", this.keybindings),
                this.cancelShortcut()
            }
        }
    },
    beforeMount() {
        var e;
        this.listDevices(),
        (e = navigator.mediaDevices) != null && e.ondevicechange && (navigator.mediaDevices.ondevicechange = this.listDevices.bind(this))
    },
    beforeUnmount() {
        var e;
        (e = navigator.mediaDevices) != null && e.ondevicechange && (navigator.mediaDevices.ondevicechange = null)
    },
    watch: {
        "session.sessionId"() {
            this.session.sessionId && this.listDevices()
        },
        canChat() {
            this.checkChatPermission()
        },
        "vote.speed"() {
            this.voteSpeed = this.vote.speed
        }
    }
}
  , l2 = {
    key: 0
}
  , c2 = {
    key: 0
}
  , d2 = {
    id: "general-avatar"
}
  , u2 = {
    class: "right"
}
  , g2 = {
    id: "general-token"
}
  , m2 = {
    class: "right"
}
  , h2 = {
    id: "general-reminder"
}
  , p2 = {
    class: "right"
}
  , A2 = {
    id: "general-offset"
}
  , b2 = {
    class: "right"
}
  , f2 = {
    id: "general-colorblind"
}
  , v2 = {
    class: "button-group"
}
  , y2 = {
    id: "general-background"
}
  , _2 = {
    id: "general-cosmetics"
}
  , w2 = ["aria-pressed"]
  , k2 = {
    id: "general-animations"
}
  , C2 = ["aria-pressed"]
  , S2 = {
    id: "general-custom"
}
  , P2 = ["aria-pressed"]
  , T2 = {
    id: "general-tabs"
}
  , I2 = ["aria-pressed"]
  , M2 = {
    id: "general-sound"
}
  , R2 = {
    class: "right"
}
  , D2 = {
    key: 1
}
  , E2 = {
    id: "sound-general"
}
  , N2 = {
    class: "right"
}
  , B2 = ["id"]
  , V2 = ["onUpdate:modelValue", "onChange", "aria-labelledby"]
  , O2 = {
    class: "right"
}
  , j2 = {
    href: "https://www.patreon.com/botconline",
    target: "_blank"
}
  , U2 = {
    class: "button-group"
}
  , H2 = ["href"]
  , q2 = {
    class: "button",
    href: "https://bloodontheclocktower.com/account",
    target: "_blank"
}
  , L2 = {
    id: "chat-microphone"
}
  , z2 = {
    value: ""
}
  , G2 = ["value"]
  , W2 = ["aria-label", "aria-pressed"]
  , F2 = {
    id: "chat-gain"
}
  , Q2 = {
    class: "right"
}
  , Z2 = {
    id: "chat-autogain"
}
  , X2 = ["aria-pressed"]
  , K2 = {
    id: "chat-noise"
}
  , Y2 = ["aria-pressed"]
  , J2 = {
    id: "chat-echo"
}
  , $2 = ["aria-pressed"]
  , x2 = {
    id: "chat-ptt"
}
  , e0 = ["aria-pressed"]
  , s0 = {
    id: "chat-deafen"
}
  , t0 = ["aria-pressed"]
  , i0 = {
    id: "chat-camera"
}
  , o0 = {
    value: ""
}
  , n0 = ["value"]
  , a0 = ["disabled"]
  , r0 = ["aria-label", "aria-pressed"]
  , l0 = {
    id: "chat-camfeeds"
}
  , c0 = ["aria-pressed"]
  , d0 = {
    id: "chat-hide"
}
  , u0 = ["aria-pressed"]
  , g0 = {
    id: "chat-mirror"
}
  , m0 = ["aria-pressed"]
  , h0 = {
    id: "game-tutorial"
}
  , p0 = ["aria-pressed"]
  , A0 = {
    id: "game-english"
}
  , b0 = ["aria-pressed"]
  , f0 = {
    id: "game-stack"
}
  , v0 = ["aria-pressed"]
  , y0 = {
    id: "game-nightorder"
}
  , _0 = ["aria-pressed"]
  , w0 = {
    id: "game-bluffs"
}
  , k0 = ["aria-pressed"]
  , C0 = {
    id: "game-duplicate"
}
  , S0 = ["aria-pressed"]
  , P0 = {
    id: "game-chatsound"
}
  , T0 = ["aria-pressed"]
  , I0 = {
    id: "game-waking"
}
  , M0 = ["aria-pressed"]
  , R0 = {
    key: 0
}
  , D0 = {
    id: "game-votetime"
}
  , E0 = {
    class: "right"
}
  , N0 = ["data-tooltip"]
  , B0 = {
    id: "game-nomination"
}
  , V0 = {
    id: "game-whisper"
}
  , O0 = ["aria-pressed"]
  , j0 = {
    class: "shortcuts"
}
  , U0 = ["onClick"]
  , H0 = ["id"]
  , q0 = ["aria-labelledby"]
  , L0 = ["data-tooltip"]
  , z0 = {
    class: "button secondary",
    role: "button"
}
  , G0 = {
    key: 0,
    class: "overlay"
}
  , W0 = {
    id: "advanced-clouds"
}
  , F0 = ["aria-pressed"]
  , Q0 = {
    id: "advanced-alignment"
}
  , Z0 = ["aria-pressed"]
  , X0 = {
    id: "advanced-avatars"
}
  , K0 = ["aria-pressed"]
  , Y0 = {
    id: "advanced-chatcams"
}
  , J0 = ["aria-pressed"]
  , $0 = {
    id: "advanced-grimcams"
}
  , x0 = ["aria-pressed"]
  , eC = {
    class: "toggle"
}
  , sC = {
    for: "chroma"
}
  , tC = ["aria-label"]
  , iC = ["aria-pressed"]
  , oC = {
    class: "toggle"
}
  , nC = {
    for: "css"
}
  , aC = ["aria-label"]
  , rC = ["aria-pressed"];
function lC(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("User")
      , d = k("i18n-t")
      , h = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "settings" ? (r(),
        C(h, {
            key: 0,
            id: "settings",
            name: "settings",
            onClose: s[68] || (s[68] = m => e.toggleModal(e.modal)),
            onTabChange: i.updateTab,
            tabs: [e.$t("modals.settings.tab_general"), e.$t("modals.settings.tab_user"), e.$t("modals.settings.tab_chat"), e.$t("modals.settings.tab_game"), e.$t("modals.settings.tab_shortcuts"), e.$t("modals.settings.tab_advanced")]
        }, {
            header: T( () => [o.isAvatarSelection ? (r(),
            u(y, {
                key: 0
            }, [v(c(e.$t("modals.settings.title_avatar")), 1)], 64)) : o.isSoundSettings ? (r(),
            u(y, {
                key: 1
            }, [v(c(e.$t("modals.settings.title_sound")), 1)], 64)) : (r(),
            u(y, {
                key: 2
            }, [v(c(e.$t("modals.settings.title")), 1)], 64))]),
            "tab-0": T( () => [o.isSoundSettings ? (r(),
            u("ul", D2, [a("li", null, [a("span", E2, c(e.$t("modals.settings.setting_general_volume")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[19] || (s[19] = m => o.soundVolume = m),
                onChange: s[20] || (s[20] = m => i.setSoundVolume()),
                min: "0",
                max: "1",
                step: "0.1",
                "aria-label": "sound-general"
            }, null, 544), [[G, o.soundVolume, void 0, {
                number: !0
            }]]), a("span", N2, c(Math.round(o.soundVolume * 100)) + "%", 1)]), (r(!0),
            u(y, null, N(o.sounds, m => (r(),
            u("li", {
                key: m
            }, [a("span", {
                id: "sound-" + m
            }, c(e.$t(`modals.settings.sounds.${m}`)), 9, B2), z(a("input", {
                type: "range",
                "onUpdate:modelValue": p => o.soundEffectVolume[m] = p,
                onChange: p => i.setSoundVolume(m),
                min: "0",
                max: "1",
                step: "0.1",
                "aria-labelledby": "sound-" + m
            }, null, 40, V2), [[G, o.soundEffectVolume[m], void 0, {
                number: !0
            }]]), a("span", O2, c(Math.round(o.soundEffectVolume[m] * 100)) + "%", 1)]))), 128)), a("li", null, [a("div", {
                class: "button",
                onClick: s[21] || (s[21] = m => o.isSoundSettings = !1)
            }, c(e.$t("common.button_close")), 1)])])) : (r(),
            u("ul", l2, [e.session.sessionId ? (r(),
            u("li", c2, [a("span", d2, c(e.$t("modals.settings.setting_avatar_size")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[0] || (s[0] = m => o.avatarZoom = m),
                onChange: s[1] || (s[1] = m => e.setAvatarZoom(o.avatarZoom)),
                min: "0.5",
                max: "3",
                step: "0.1",
                "aria-labelledby": "general-avatar"
            }, null, 544), [[G, o.avatarZoom, void 0, {
                number: !0
            }]]), a("span", u2, c(Math.round(o.avatarZoom * 100)) + "%", 1)])) : A("", !0), a("li", null, [a("span", g2, c(e.$t("modals.settings.setting_zoom")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[2] || (s[2] = m => o.zoom = m),
                onChange: s[3] || (s[3] = m => e.setTokenZoom(o.zoom)),
                min: "-10",
                max: "15",
                step: "1",
                "aria-labelledby": "general-token"
            }, null, 544), [[G, o.zoom, void 0, {
                number: !0
            }]]), a("span", m2, c(Math.round(100 + o.zoom * 10)) + "%", 1)]), a("li", null, [a("span", h2, c(e.$t("modals.settings.setting_reminder_zoom")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[4] || (s[4] = m => o.reminderZoom = m),
                onChange: s[5] || (s[5] = m => e.setReminderZoom(o.reminderZoom)),
                min: "0.5",
                max: "3",
                step: "0.1",
                "aria-labelledby": "general-reminder"
            }, null, 544), [[G, o.reminderZoom, void 0, {
                number: !0
            }]]), a("span", p2, c(Math.round(o.reminderZoom * 100)) + "%", 1)]), a("li", null, [a("span", A2, c(e.$t("modals.settings.setting_grimoire_offset")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[6] || (s[6] = m => o.grimoireOffset = m),
                onChange: s[7] || (s[7] = m => e.setGrimoireOffset(o.grimoireOffset)),
                min: "-90",
                max: "90",
                step: "5",
                "aria-labelledby": "general-offset"
            }, null, 544), [[G, o.grimoireOffset, void 0, {
                number: !0
            }]]), a("span", b2, c(o.grimoireOffset) + "%", 1)]), a("li", null, [a("span", f2, c(e.$t("modals.settings.setting_colorblind", [e.settings.general.colorblind])), 1), a("div", v2, [a("button", {
                class: "button",
                onClick: s[8] || (s[8] = R(m => i.setColorblindMode(-1), ["stop"])),
                "aria-labelledby": "general-colorblind"
            }, [b(l, {
                icon: "arrow-circle-left"
            })]), a("button", {
                class: "button",
                onClick: s[9] || (s[9] = R(m => i.setColorblindMode(1), ["stop"])),
                "aria-labelledby": "general-colorblind"
            }, [b(l, {
                icon: "arrow-circle-right"
            })])])]), a("li", {
                class: "toggle",
                onClick: s[10] || (s[10] = (...m) => i.setBackground && i.setBackground(...m))
            }, [a("span", y2, c(e.$t("modals.settings.setting_background")), 1), a("button", {
                class: _(["button", {
                    primary: e.grimoire.background
                }]),
                "aria-labelledby": "general-background"
            }, [b(l, {
                icon: "image"
            })], 2)]), a("li", {
                class: "toggle",
                onClick: s[11] || (s[11] = (...m) => e.toggleCosmeticsDisabled && e.toggleCosmeticsDisabled(...m))
            }, [a("span", _2, c(e.$t("modals.settings.setting_cosmetics")), 1), a("button", {
                class: _(["button", {
                    primary: !e.settings.general.isCosmeticsDisabled
                }]),
                "aria-labelledby": "general-cosmetics",
                "aria-pressed": !e.settings.general.isCosmeticsDisabled
            }, [b(l, {
                icon: e.settings.general.isCosmeticsDisabled ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, w2)]), a("li", {
                class: "toggle",
                onClick: s[12] || (s[12] = (...m) => e.toggleAnimationsDisabled && e.toggleAnimationsDisabled(...m))
            }, [a("span", k2, c(e.$t("modals.settings.setting_animations")), 1), a("button", {
                class: _(["button", {
                    primary: !e.settings.general.isAnimationsDisabled
                }]),
                "aria-labelledby": "general-animations",
                "aria-pressed": !e.settings.general.isAnimationsDisabled
            }, [b(l, {
                icon: e.settings.general.isAnimationsDisabled ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, C2)]), a("li", {
                class: "toggle",
                onClick: s[13] || (s[13] = (...m) => i.imageOptIn && i.imageOptIn(...m))
            }, [a("span", S2, c(e.$t("modals.settings.setting_homebrew")), 1), a("button", {
                class: _(["button", {
                    primary: e.settings.general.isImageOptIn
                }]),
                "aria-pressed": e.settings.general.isImageOptIn,
                "aria-labelledby": "general-custom"
            }, [b(l, {
                icon: e.settings.general.isImageOptIn ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, P2)]), a("li", {
                class: "toggle",
                onClick: s[14] || (s[14] = (...m) => e.togglePositioningDisabled && e.togglePositioningDisabled(...m))
            }, [a("span", T2, c(e.$t("modals.settings.setting_positioning")), 1), a("button", {
                class: _(["button", {
                    primary: !e.settings.general.isPositioningDisabled
                }]),
                "aria-pressed": !e.settings.general.isPositioningDisabled,
                "aria-labelledby": "general-tabs"
            }, [b(l, {
                icon: e.settings.general.isPositioningDisabled ? "circle" : "arrows-alt"
            }, null, 8, ["icon"])], 10, I2)]), a("li", {
                class: "toggle",
                onClick: s[18] || (s[18] = m => o.isSoundSettings = !0)
            }, [a("span", M2, c(e.$t("modals.settings.setting_volume")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[15] || (s[15] = m => o.soundVolume = m),
                onClick: s[16] || (s[16] = R( () => {}
                , ["stop"])),
                onChange: s[17] || (s[17] = R(m => i.setSoundVolume(), ["stop"])),
                min: "0",
                max: "1",
                step: "0.1",
                "aria-labelledby": "general-sound"
            }, null, 544), [[G, o.soundVolume, void 0, {
                number: !0
            }]]), a("span", R2, c(Math.round(o.soundVolume * 100)) + "%", 1), a("button", {
                class: _(["button", {
                    primary: [...e.settings.sounds].some( ([,m]) => m !== 1)
                }]),
                "aria-label": "Individual Sound Effects"
            }, [b(l, {
                icon: "cog"
            })], 2)])]))]),
            "tab-1": T( () => {
                var m;
                return [b(g, {
                    user: o.localUser,
                    stats: o.stats
                }, null, 8, ["user", "stats"]), e.user.level ? A("", !0) : (r(),
                C(d, {
                    key: 0,
                    tag: "p",
                    keypath: "modals.settings.patreon_perks",
                    scope: "global"
                }, {
                    default: T( () => [a("a", j2, c(e.$t("modals.settings.patreon_perks2")), 1)]),
                    _: 1
                })), a("div", U2, [a("a", {
                    class: "button primary",
                    href: `https://www.patreon.com/oauth2/authorize?response_type=code&client_id=b1XNd9IVV8Qn7Z5eXx3a2cEz0W8aaZq6UBM8y8L4vryXBTmdw15zA0ly1xCUIMdW&redirect_uri=${o.patreonCallback}&state=${e.user.id}`
                }, c(e.user.patreonId ? e.$t("modals.settings.patreon_update") : e.$t("modals.settings.patreon_link")), 9, H2), (m = e.user.flags) != null && m.includes("verified-phone") ? A("", !0) : (r(),
                u("a", {
                    key: 0,
                    class: "button primary",
                    onClick: s[22] || (s[22] = p => e.toggleModal({
                        name: "verification"
                    }))
                }, c(e.$t("modals.settings.button_verify")), 1)), a("a", q2, c(e.$t("modals.settings.button_edit")), 1), a("div", {
                    class: "button secondary",
                    onClick: s[23] || (s[23] = (...p) => i.logout && i.logout(...p))
                }, c(e.$t("common.button_logout")), 1)])]
            }
            ),
            "tab-2": T( () => [a("ul", null, [a("li", null, [a("span", L2, [a("b", null, c(e.$t("modals.settings.setting_microphone")), 1)]), z(a("select", {
                "onUpdate:modelValue": s[24] || (s[24] = m => o.audioSelection = m),
                onChange: s[25] || (s[25] = m => i.changePreference("audio")),
                "aria-labelledby": "chat-microphone"
            }, [a("option", z2, c(e.$t("modals.settings.option_disabled")), 1), (r(!0),
            u(y, null, N(o.audioList, (m, p) => (r(),
            u("option", {
                key: p,
                value: m.deviceId
            }, c(m.label || e.$t("modals.settings.setting_audio_unnamed") + " " + p), 9, G2))), 128))], 544), [[be, o.audioSelection]]), a("button", {
                onClick: s[26] || (s[26] = m => i.toggleAudioMuted()),
                class: _(["button", {
                    secondary: e.chat.audio.device && e.chat.audio.isMuted,
                    primary: e.chat.audio.device && !e.chat.audio.isMuted,
                    disabled: !e.chat.audio.device || e.chat.audio.isPushToTalk
                }]),
                "aria-label": e.$t("modals.settings.setting_mute_audio"),
                "aria-pressed": e.chat.audio.isMuted
            }, [b(l, {
                icon: e.chat.audio.isMuted ? "microphone-slash" : "microphone"
            }, null, 8, ["icon"])], 10, W2)]), a("li", null, [a("span", F2, c(e.$t("modals.settings.setting_gain")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[27] || (s[27] = m => o.volume = m),
                onChange: s[28] || (s[28] = (...m) => i.setAudioVolume && i.setAudioVolume(...m)),
                min: "0",
                max: "2",
                step: "0.1",
                "aria-labelledby": "chat-gain"
            }, null, 544), [[G, o.volume, void 0, {
                number: !0
            }]]), a("span", Q2, c(Math.round(o.volume * 100)) + "%", 1)]), a("li", {
                class: "toggle",
                onClick: s[29] || (s[29] = m => e.toggleAutoGainControl())
            }, [a("span", Z2, c(e.$t("modals.settings.setting_auto_gain")), 1), a("button", {
                class: _(["button", {
                    primary: e.chat.audio.isAutoGainControl
                }]),
                "aria-pressed": e.chat.audio.isAutoGainControl,
                "aria-labelledby": "chat-autogain"
            }, [b(l, {
                icon: e.chat.audio.isAutoGainControl ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, X2)]), a("li", {
                class: "toggle",
                onClick: s[30] || (s[30] = m => e.toggleNoiseSuppression())
            }, [a("span", K2, c(e.$t("modals.settings.setting_noise_suppression")), 1), a("button", {
                class: _(["button", {
                    primary: e.chat.audio.isNoiseSuppression
                }]),
                "aria-pressed": e.chat.audio.isNoiseSuppression,
                "aria-labelledby": "chat-noise"
            }, [b(l, {
                icon: e.chat.audio.isNoiseSuppression ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, Y2)]), a("li", {
                class: "toggle",
                onClick: s[31] || (s[31] = m => e.toggleEchoCancellation())
            }, [a("span", J2, c(e.$t("modals.settings.setting_echo_cancellation")), 1), a("button", {
                class: _(["button", {
                    primary: e.chat.audio.isEchoCancellation
                }]),
                "aria-pressed": e.chat.audio.isEchoCancellation,
                "aria-labelledby": "chat-echo"
            }, [b(l, {
                icon: e.chat.audio.isEchoCancellation ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, $2)]), a("li", {
                class: "toggle",
                onClick: s[32] || (s[32] = m => i.togglePushToTalk())
            }, [a("span", x2, c(e.$t("modals.settings.setting_ptt")), 1), a("button", {
                class: _(["button", {
                    primary: e.chat.audio.isPushToTalk
                }]),
                "aria-pressed": e.chat.audio.isPushToTalk,
                "aria-labelledby": "chat-ptt"
            }, [b(l, {
                icon: e.chat.audio.isPushToTalk ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, e0)]), a("li", {
                class: "toggle",
                onClick: s[33] || (s[33] = m => i.deafen("audio"))
            }, [a("span", s0, c(e.$t("modals.settings.setting_audio_deafen")), 1), a("button", {
                class: _(["button", {
                    primary: !e.chat.audio.isDeafened
                }]),
                "aria-pressed": !e.chat.audio.isDeafened,
                "aria-labelledby": "chat-deafen"
            }, [b(l, {
                icon: e.chat.audio.isDeafened ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, t0)]), a("li", null, [a("span", i0, [a("b", null, c(e.$t("modals.settings.setting_camera")), 1)]), z(a("select", {
                "onUpdate:modelValue": s[34] || (s[34] = m => o.videoSelection = m),
                onChange: s[35] || (s[35] = m => i.changePreference("video")),
                "aria-labelledby": "chat-camera"
            }, [a("option", o0, c(e.$t("modals.settings.option_disabled")), 1), (r(!0),
            u(y, null, N(o.videoList, (m, p) => (r(),
            u("option", {
                key: p,
                value: m.deviceId
            }, c(m.label || e.$t("modals.settings.setting_video_unnamed") + " " + p), 9, n0))), 128))], 544), [[be, o.videoSelection]]), e.chat.video.device ? (r(),
            u("button", {
                key: 1,
                class: _(["button", e.chat.video.isMuted ? "secondary" : "primary"]),
                "aria-label": e.$t("modals.settings.setting_mute_video"),
                "aria-pressed": e.chat.video.isMuted,
                onClick: s[37] || (s[37] = m => e.toggleVideoMuted())
            }, [b(l, {
                icon: e.chat.video.isMuted ? "video-slash" : "video"
            }, null, 8, ["icon"])], 10, r0)) : (r(),
            u("button", {
                key: 0,
                class: "button",
                onClick: s[36] || (s[36] = m => i.changePreference("video")),
                disabled: !i.canChat || !o.videoList.length || !o.videoSelection
            }, [b(l, {
                icon: "video"
            })], 8, a0))]), a("li", {
                class: "toggle",
                onClick: s[38] || (s[38] = m => i.deafen("video"))
            }, [a("span", l0, c(e.$t("modals.settings.setting_video_deafen")), 1), a("button", {
                class: _(["button", {
                    primary: !e.chat.video.isDeafened
                }]),
                "aria-pressed": !e.chat.video.isDeafened,
                "aria-labelledby": "chat-camfeeds"
            }, [b(l, {
                icon: e.chat.video.isDeafened ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, c0)]), e.chat.video.isDeafened ? A("", !0) : (r(),
            u("li", {
                key: 0,
                class: "toggle",
                onClick: s[39] || (s[39] = m => e.toggleVideoHidden())
            }, [a("span", d0, c(e.$t("modals.settings.setting_video_hidden")), 1), a("button", {
                class: _(["button", {
                    primary: e.chat.video.isHidden
                }]),
                "aria-pressed": e.chat.video.isHidden,
                "aria-labelledby": "chat-hide"
            }, [b(l, {
                icon: e.chat.video.isHidden ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, u0)])), !e.chat.video.isDeafened && !e.chat.video.isHidden ? (r(),
            u("li", {
                key: 1,
                class: "toggle",
                onClick: s[40] || (s[40] = m => e.toggleVideoUnmirrored())
            }, [a("span", g0, c(e.$t("modals.settings.setting_video_mirrored")), 1), a("button", {
                class: _(["button", {
                    primary: !e.chat.video.isUnmirrored
                }]),
                "aria-pressed": !e.chat.video.isUnmirrored,
                "aria-labelledby": "chat-mirror"
            }, [b(l, {
                icon: e.chat.video.isUnmirrored ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, m0)])) : A("", !0), a("li", null, [a("span", null, [a("b", null, c(e.$t("modals.settings.setup")), 1)]), a("div", {
                class: "button secondary",
                onClick: s[41] || (s[41] = (...m) => i.toggleSetup && i.toggleSetup(...m)),
                role: "button",
                "aria-label": "Run Chat Setup"
            }, c(e.$t("modals.settings.button_setup")), 1)])])]),
            "tab-3": T( () => [a("ul", null, [a("li", {
                class: "toggle",
                onClick: s[42] || (s[42] = (...m) => e.toggleTutorialDisabled && e.toggleTutorialDisabled(...m))
            }, [a("span", h0, c(e.$t("modals.settings.setting_tutorial")), 1), a("button", {
                class: _(["button", {
                    primary: !e.settings.game.isTutorialDisabled
                }]),
                "aria-pressed": !e.settings.game.isTutorialDisabled,
                "aria-labelledby": "game-tutorial"
            }, [b(l, {
                icon: e.settings.game.isTutorialDisabled ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, p0)]), e.$i18n.locale !== o.defaultLocale ? (r(),
            u("li", {
                key: 0,
                class: "toggle",
                onClick: s[43] || (s[43] = m => e.toggleEnglishNames())
            }, [a("span", A0, c(e.$t("modals.settings.setting_english")), 1), a("button", {
                class: _(["button", {
                    primary: e.settings.game.isEnglishNames
                }]),
                "aria-pressed": e.settings.game.isEnglishNames,
                "aria-labelledby": "game-english"
            }, [b(l, {
                icon: e.settings.game.isEnglishNames ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, b0)])) : A("", !0), a("li", {
                class: "toggle",
                onClick: s[44] || (s[44] = m => e.toggleStackReminderTokens())
            }, [a("span", f0, c(e.$t("modals.settings.setting_reminders")), 1), a("button", {
                class: _(["button", {
                    primary: e.settings.game.stackReminderTokens !== null
                }]),
                "aria-pressed": e.settings.game.stackReminderTokens !== null,
                "aria-labelledby": "game-stack"
            }, [e.settings.game.stackReminderTokens === !0 ? (r(),
            u(y, {
                key: 0
            }, [v(c(e.$t("modals.settings.setting_reminders_always")), 1)], 64)) : e.settings.game.stackReminderTokens === !1 ? (r(),
            u(y, {
                key: 1
            }, [v(c(e.$t("modals.settings.setting_reminders_never")), 1)], 64)) : (r(),
            u(y, {
                key: 2
            }, [v(c(e.$t("modals.settings.setting_reminders_auto")), 1)], 64))], 10, v0)]), e.isStoryteller ? (r(),
            u(y, {
                key: 2
            }, [a("li", {
                class: "toggle",
                onClick: s[49] || (s[49] = (...m) => e.toggleNightOrder && e.toggleNightOrder(...m))
            }, [a("span", I0, c(e.$t("modals.settings.setting_st_night")), 1), a("button", {
                class: _(["button", {
                    primary: e.settings.game.isNightOrder
                }]),
                "aria-pressed": e.settings.game.isNightOrder,
                "aria-labelledby": "game-waking"
            }, [b(l, {
                icon: e.settings.game.isNightOrder ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, M0)]), e.vote.locked <= 0 && !e.vote.isInProgress ? (r(),
            u("li", R0, [a("span", D0, c(e.$t("modals.settings.setting_st_vote")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[50] || (s[50] = m => o.voteSpeed = m),
                onChange: s[51] || (s[51] = (...m) => i.setVotingSpeed && i.setVotingSpeed(...m)),
                min: "500",
                max: "4000",
                step: "100",
                "aria-labelledby": "game-votetime"
            }, null, 544), [[G, o.voteSpeed, void 0, {
                number: !0
            }]]), a("span", E0, c((o.voteSpeed / 1e3).toFixed(2)) + "s", 1)])) : A("", !0), e.vote.locked <= 0 && !e.vote.isInProgress ? (r(),
            u("li", {
                key: 1,
                class: "toggle",
                "data-tooltip": e.$t(`modals.settings.nomination.${e.vote.nominationType}.text`),
                onClick: s[52] || (s[52] = (...m) => i.toggleNominationType && i.toggleNominationType(...m))
            }, [a("span", B0, c(e.$t("modals.settings.setting_st_nomination")), 1), a("button", {
                class: _(["button", {
                    primary: e.vote.nominationType !== "regular"
                }]),
                "aria-labelledby": "game-nomination"
            }, c(e.$t(`modals.settings.nomination.${e.vote.nominationType}.title`)), 3)], 8, N0)) : A("", !0), a("li", {
                onClick: s[53] || (s[53] = (...m) => i.toggleWhispers && i.toggleWhispers(...m))
            }, [a("span", V0, c(e.$t("modals.settings.setting_st_whisper")), 1), a("button", {
                class: _(["button", {
                    primary: !e.session.isWhispersDisabled,
                    disabled: !e.isStoryteller
                }]),
                "aria-pressed": !e.session.isWhispersDisabled,
                "aria-labelledby": "game-whisper"
            }, [b(l, {
                icon: e.session.isWhispersDisabled ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, O0)])], 64)) : (r(),
            u(y, {
                key: 1
            }, [a("li", {
                class: "toggle",
                onClick: s[45] || (s[45] = (...m) => e.togglePlayerNightOrder && e.togglePlayerNightOrder(...m))
            }, [a("span", y0, c(e.$t("modals.settings.setting_player_night")), 1), a("button", {
                class: _(["button", {
                    primary: e.settings.game.isPlayerNightOrder
                }]),
                "aria-pressed": e.settings.game.isPlayerNightOrder,
                "aria-labelledby": "game-nightorder"
            }, [b(l, {
                icon: e.settings.game.isPlayerNightOrder ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, _0)]), a("li", {
                class: "toggle",
                onClick: s[46] || (s[46] = (...m) => e.togglePlayerBluffs && e.togglePlayerBluffs(...m))
            }, [a("span", w0, c(e.$t("modals.settings.setting_player_bluffs")), 1), a("button", {
                class: _(["button", {
                    primary: e.settings.game.isPlayerBluffs
                }]),
                "aria-pressed": e.settings.game.isPlayerBluffs,
                "aria-labelledby": "game-bluffs"
            }, [b(l, {
                icon: e.settings.game.isPlayerBluffs ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, k0)]), a("li", {
                class: "toggle",
                onClick: s[47] || (s[47] = (...m) => e.togglePlayerDuplicates && e.togglePlayerDuplicates(...m))
            }, [a("span", C0, c(e.$t("modals.settings.setting_player_reminders")), 1), a("button", {
                class: _(["button", {
                    primary: e.settings.game.isPlayerDuplicates
                }]),
                "aria-pressed": e.settings.game.isPlayerDuplicates,
                "aria-labelledby": "game-duplicate"
            }, [b(l, {
                icon: e.settings.game.isPlayerDuplicates ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, S0)]), a("li", {
                class: "toggle",
                onClick: s[48] || (s[48] = (...m) => e.toggleNightRequestPing && e.toggleNightRequestPing(...m))
            }, [a("span", P0, c(e.$t("modals.settings.setting_player_sound")), 1), a("button", {
                class: _(["button", {
                    primary: e.settings.game.isNightRequestPing
                }]),
                "aria-pressed": e.settings.game.isNightRequestPing,
                "aria-labelledby": "game-chatsound"
            }, [b(l, {
                icon: e.settings.game.isNightRequestPing ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, T0)])], 64))])]),
            "tab-4": T( () => [a("ul", j0, [(r(!0),
            u(y, null, N(e.keybindings, (m, p) => (r(),
            u("li", {
                key: p,
                onClick: f => i.recordShortcut(p)
            }, [a("span", {
                id: "shortcut-" + p
            }, c(e.$t(`modals.settings.shortcuts.${p}`)), 9, H0), (r(!0),
            u(y, null, N(m, f => (r(),
            u("em", {
                role: "button",
                "aria-labelledby": "shortcut-" + p,
                key: f
            }, c(f.trim()), 9, q0))), 128)), b(l, {
                onClick: R(f => i.recordShortcut(p, !0), ["stop"]),
                icon: "plus-circle",
                role: "button",
                "aria-label": e.$t("modals.settings.shortcut_add")
            }, null, 8, ["onClick", "aria-label"])], 8, U0))), 128)), i.isTouchDevice ? (r(),
            u("li", {
                key: 0,
                onClick: s[54] || (s[54] = m => e.toggleTouchSupport()),
                "data-tooltip": e.$t("modals.settings.shortcut_touch_text")
            }, [a("span", null, c(e.$t("modals.settings.shortcut_touch")), 1), b(l, {
                icon: e.settings.game.isTouchSupport ? "check-circle" : "circle",
                role: "checkbox",
                "aria-pressed": e.settings.game.isTouchSupport
            }, null, 8, ["icon", "aria-pressed"])], 8, L0)) : A("", !0), a("li", {
                onClick: s[55] || (s[55] = m => i.resetShortcuts())
            }, [a("div", z0, c(e.$t("modals.settings.shortcut_reset")), 1)])]), o.isRecording ? (r(),
            u("div", G0, [b(d, {
                keypath: "modals.settings.shortcut_record",
                scope: "global"
            }, {
                default: T( () => [a("b", null, c(e.$t(`modals.settings.shortcuts.${o.isRecording}`)), 1)]),
                _: 1
            }), a("input", {
                ref: "shortcut",
                type: "text",
                onKeyup: s[56] || (s[56] = R( (...m) => i.keyup && i.keyup(...m), ["stop"])),
                onBlur: s[57] || (s[57] = (...m) => i.cancelShortcut && i.cancelShortcut(...m))
            }, null, 544), a("small", null, c(e.$t("modals.settings.shortcut_escape")), 1)])) : A("", !0)]),
            "tab-5": T( () => [a("ul", null, [a("li", {
                class: "toggle",
                onClick: s[58] || (s[58] = (...m) => e.toggleNightStatic && e.toggleNightStatic(...m))
            }, [a("span", W0, c(e.$t("modals.settings.setting_clouds")), 1), a("button", {
                class: _(["button", {
                    primary: !e.settings.advanced.hasNightStatic
                }]),
                "aria-pressed": !e.settings.advanced.hasNightStatic,
                "aria-labelledby": "advanced-clouds"
            }, [b(l, {
                icon: e.settings.advanced.hasNightStatic ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, F0)]), a("li", {
                class: "toggle",
                onClick: s[59] || (s[59] = (...m) => e.togglePublicTownSquare && e.togglePublicTownSquare(...m))
            }, [a("span", Q0, c(e.$t("modals.settings.setting_alignment")), 1), a("button", {
                class: _(["button", {
                    primary: !e.settings.advanced.hasPublicTownSquare
                }]),
                "aria-pressed": !e.settings.advanced.hasPublicTownSquare,
                "aria-labelledby": "advanced-alignment"
            }, [b(l, {
                icon: e.settings.advanced.hasPublicTownSquare ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, Z0)]), a("li", {
                class: "toggle",
                onClick: s[60] || (s[60] = (...m) => e.toggleHiddenTownSquareCams && e.toggleHiddenTownSquareCams(...m))
            }, [a("span", X0, c(e.$t("modals.settings.setting_avatars")), 1), a("button", {
                class: _(["button", {
                    primary: !e.settings.advanced.hasHiddenTownSquareCams
                }]),
                "aria-pressed": !e.settings.advanced.hasHiddenTownSquareCams,
                "aria-labelledby": "advanced-avatars"
            }, [b(l, {
                icon: e.settings.advanced.hasHiddenTownSquareCams ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, K0)]), e.isStoryteller ? (r(),
            u("li", {
                key: 0,
                class: "toggle",
                onClick: s[61] || (s[61] = (...m) => e.toggleHiddenPrivateCams && e.toggleHiddenPrivateCams(...m))
            }, [a("span", Y0, c(e.$t("modals.settings.setting_private_cams")), 1), a("button", {
                class: _(["button", {
                    primary: !e.settings.advanced.hasHiddenPrivateCams
                }]),
                "aria-pressed": !e.settings.advanced.hasHiddenPrivateCams,
                "aria-labelledby": "advanced-chatcams"
            }, [b(l, {
                icon: e.settings.advanced.hasHiddenPrivateCams ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, J0)])) : A("", !0), a("li", {
                class: "toggle",
                onClick: s[62] || (s[62] = (...m) => e.toggleHiddenRevealCams && e.toggleHiddenRevealCams(...m))
            }, [a("span", $0, c(e.$t("modals.settings.setting_reveal")), 1), a("button", {
                class: _(["button", {
                    primary: !e.settings.advanced.hasHiddenRevealCams
                }]),
                "aria-pressed": !e.settings.advanced.hasHiddenRevealCams,
                "aria-labelledby": "advanced-grimcams"
            }, [b(l, {
                icon: e.settings.advanced.hasHiddenRevealCams ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, x0)]), a("li", eC, [a("label", sC, c(e.$t("modals.settings.setting_chroma")), 1), z(a("input", {
                onChange: s[63] || (s[63] = m => i.setChroma()),
                type: "color",
                class: "button",
                "onUpdate:modelValue": s[64] || (s[64] = m => o.chroma = m),
                "aria-label": e.$t("modals.settings.setting_chroma_label")
            }, null, 40, tC), [[G, o.chroma]]), a("button", {
                id: "chroma",
                class: _(["button", {
                    primary: e.settings.advanced.chromaKey
                }]),
                "aria-pressed": e.settings.advanced.chromaKey,
                onClick: s[65] || (s[65] = m => i.setChroma(!0))
            }, [b(l, {
                icon: e.settings.advanced.chromaKey ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, iC)]), a("li", oC, [a("label", nC, c(e.$t("modals.settings.setting_css")), 1), a("button", {
                id: "css",
                class: _(["button", {
                    primary: e.settings.advanced.customCSS
                }]),
                onClick: s[66] || (s[66] = R(m => i.setCustomCSS(), ["stop"])),
                "aria-label": e.$t("modals.settings.setting_css_label")
            }, [b(l, {
                icon: "file-code"
            })], 10, aC), a("button", {
                class: _(["button", {
                    primary: e.settings.advanced.customCSSEnabled
                }]),
                "aria-pressed": e.settings.advanced.customCSSEnabled,
                onClick: s[67] || (s[67] = m => i.toggleCustomCSS())
            }, [b(l, {
                icon: e.settings.advanced.customCSSEnabled ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, rC)])])]),
            _: 1
        }, 8, ["onTabChange", "tabs"])) : A("", !0)]),
        _: 1
    })
}
const Pl = O(r2, [["render", lC], ["__scopeId", "data-v-6d446e16"]])
  , cC = "/assets/app-icon-CG9GQKA7.webp"
  , dC = {
    components: {
        Modal: se
    },
    computed: M(["modal", "session"]),
    data() {
        return {
            version: re.version,
            recoding: !1
        }
    },
    methods: {
        ...U(["toggleModal"]),
        startReplay() {
            const e = Na();
            e && (e.flush(),
            this.recoding = !0)
        },
        stopReplay() {
            const e = Na();
            e && (e.stop(),
            this.recoding = !1)
        }
    }
}
  , uC = {
    class: "content"
}
  , gC = {
    href: "https://feedback.botc.app/",
    target: "_blank"
}
  , mC = {
    href: "mailto:support@botc.app",
    target: "_blank"
}
  , hC = {
    href: "https://bloodontheclocktower.com/account",
    target: "_blank"
}
  , pC = {
    href: "https://bloodontheclocktower.com/products/blood-on-the-clocktower-the-game",
    target: "_blank"
}
  , AC = {
    key: 0,
    class: "recording"
}
  , bC = {
    key: 1,
    class: "recording"
}
  , fC = {
    href: "https://bloodontheclocktower.com/terms-of-use",
    target: "_blank"
}
  , vC = {
    href: "https://bloodontheclocktower.com/pages/digital-moderation-policy",
    target: "_blank"
}
  , yC = {
    href: "https://bloodontheclocktower.com/privacy-policy",
    target: "_blank"
}
  , _C = {
    href: "https://bloodontheclocktower.com/cookie-policy",
    target: "_blank"
}
  , wC = {
    class: "footer"
};
function kC(e, s, t, n, o, i) {
    const l = k("i18n-t")
      , g = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "help" ? (r(),
        C(g, {
            key: 0,
            class: "help",
            onClose: s[2] || (s[2] = d => e.toggleModal(e.modal))
        }, {
            default: T( () => [s[13] || (s[13] = a("div", {
                class: "header"
            }, [a("img", {
                src: cC,
                alt: "",
                class: "logo app"
            })], -1)), a("div", uC, [b(l, {
                keypath: "modals.help.welcome",
                scope: "global"
            }, {
                default: T( () => [a("em", null, c(e.$t("common.title")), 1)]),
                _: 1
            }), s[10] || (s[10] = a("br", null, null, -1)), v(" " + c(e.$t("modals.help.text1", {
                version: o.version
            })) + " ", 1), s[11] || (s[11] = a("br", null, null, -1)), b(l, {
                keypath: "modals.help.text2",
                scope: "global"
            }, {
                default: T( () => [a("a", gC, c(e.$t("modals.help.link_0")), 1), a("a", mC, c(e.$t("modals.help.link_1")), 1), a("a", hC, c(e.$t("modals.help.link_2")), 1), a("a", pC, c(e.$t("modals.help.link_3")), 1)]),
                _: 1
            }), s[12] || (s[12] = a("br", null, null, -1)), o.recoding ? (r(),
            u("div", bC, [v(c(e.$t("modals.help.session_debug2")) + " ", 1), s[4] || (s[4] = a("br", null, null, -1)), a("div", {
                class: "button secondary",
                onClick: s[1] || (s[1] = (...d) => i.stopReplay && i.stopReplay(...d))
            }, c(e.$t("modals.help.button_stop")), 1)])) : (r(),
            u("div", AC, [v(c(e.$t("modals.help.session_debug")) + " ", 1), s[3] || (s[3] = a("br", null, null, -1)), a("div", {
                class: "button primary",
                onClick: s[0] || (s[0] = (...d) => i.startReplay && i.startReplay(...d))
            }, c(e.$t("modals.help.button_send")), 1)])), a("small", null, [v(c(e.$t("modals.dialogue.terms")), 1), s[5] || (s[5] = a("br", null, null, -1)), a("a", fC, c(e.$t("common.terms_of_use")), 1), s[6] || (s[6] = v(", ", -1)), a("a", vC, c(e.$t("common.moderation_policy")), 1), s[7] || (s[7] = v(", ", -1)), a("a", yC, c(e.$t("common.privacy_policy")), 1), s[8] || (s[8] = v(" & ", -1)), a("a", _C, c(e.$t("common.cookie_policy")), 1), s[9] || (s[9] = v(". ", -1))]), a("div", wC, c(e.$t("common.trademark")), 1)]), s[14] || (s[14] = a("div", {
                class: "authors"
            }, [a("img", {
                src: Se,
                alt: "",
                class: "logo tpi"
            }), a("img", {
                src: Ve,
                alt: "",
                class: "logo sb"
            })], -1))]),
            _: 1
        })) : A("", !0)]),
        _: 1
    })
}
const Tl = O(dC, [["render", kC], ["__scopeId", "data-v-4f3d691e"]])
  , CC = {
    name: "StorytellerOverlay",
    components: {
        Emote: yl
    },
    props: {
        storyteller: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...M(["chat"]),
        ...D(["roleIconURL"]),
        ...D("game", ["isNight"]),
        ...D("chat", ["whispersAvailable", "textsAvailable", "isPrivateChat"])
    },
    data() {
        return {}
    },
    methods: {
        ...$("chat", ["requestWhisper", "showTextTab"])
    }
}
  , SC = {
    class: "overlay"
};
function PC(e, s, t, n, o, i) {
    const l = k("Emote")
      , g = k("font-awesome-icon");
    return r(),
    u("div", SC, [t.storyteller.id ? (r(),
    C(l, {
        key: 0,
        "player-id": t.storyteller.id
    }, null, 8, ["player-id"])) : A("", !0), b(L, {
        name: "zoom"
    }, {
        default: T( () => [e.chat.isPrompt && e.whispersAvailable.has(t.storyteller.id) ? (r(),
        C(g, {
            key: 0,
            icon: e.isPrivateChat(e.chat.channel) && !e.isNight ? "user-plus" : "comments",
            class: "whisper",
            title: e.$t("player.menu.chat"),
            onClick: s[0] || (s[0] = R(d => e.requestWhisper(t.storyteller), ["stop"]))
        }, null, 8, ["icon", "title"])) : A("", !0)]),
        _: 1
    }), b(L, {
        name: "zoom"
    }, {
        default: T( () => [e.chat.isPrompt && e.textsAvailable.has(t.storyteller.id) ? (r(),
        C(g, {
            key: 0,
            icon: "envelope",
            class: "whisper text",
            title: e.$t("player.menu.whisper"),
            onClick: s[1] || (s[1] = R(d => e.showTextTab(t.storyteller.id), ["stop"]))
        }, null, 8, ["title"])) : A("", !0)]),
        _: 1
    })])
}
const TC = O(CC, [["render", PC], ["__scopeId", "data-v-af7d1b40"]])
  , Sa = {
    name: "Storyteller",
    inject: ["renderReminderHTML"],
    components: {
        StorytellerOverlay: TC,
        ChatAudio: _l,
        ChatVideo: ua,
        PlayerReminders: ca,
        Token: ve
    },
    computed: {
        ...M(["session", "chat", "grimoire", "vote", "positions", "settings"]),
        ...M("players", ["storytellers", "players"]),
        ...M("user", ["user", "relations"]),
        ...D("user", ["isStoryteller", "isSpectator", "hasGrimoireAccess"]),
        ...D("chat", ["isVideoWhisper", "whispersAvailable", "textsAvailable"]),
        ...D("game", ["isNight"]),
        ...D("players", ["nightOrder", "playerName"]),
        ...D(["roleIconURL"]),
        activeSTs() {
            return this.storytellers.filter(e => e.id).slice(0, this.session.sessionId ? void 0 : 1)
        },
        avatarZoom() {
            return this.settings.general.avatarZoom
        }
    },
    data() {
        return {}
    },
    methods: {
        ...U(["setTab", "toggleModal", "setMenuOpen"]),
        ...$("chat", ["requestWhisper", "followUser", "showTextTab"]),
        removeStoryteller(e) {
            this.isStoryteller && this.$store.commit("players/removeStoryteller", e),
            this.setMenuOpen()
        },
        requestGrimoire() {
            var e, s, t;
            if (this.isSpectator && !((e = this.session.users.get(this.user.id)) != null && e.grimoireAccess) && !(this.session.meta.isPublic && ((s = this.session.meta.tags) == null ? void 0 : s.grimoire) === 2)) {
                if (this.session.meta.isPublic && !this.user.level && ((t = this.user.flags) != null && t.includes("newuser")))
                    return this.$store.dispatch("openDialogue", {
                        type: "alert",
                        title: "storyteller.prompt_grim_title",
                        text: "storyteller.prompt_grim_text"
                    });
                this.$store.commit("user/requestGrimoire", {
                    status: 1
                })
            }
        }
    }
}
  , Zr = () => {
    he(e => ({
        v2f00bd04: e.avatarZoom
    }))
}
  , Xr = Sa.setup;
Sa.setup = Xr ? (e, s) => (Zr(),
Xr(e, s)) : Zr;
const IC = ["onClick"]
  , MC = {
    key: 0,
    class: "night-order first"
}
  , RC = {
    key: 0
}
  , DC = ["innerHTML"]
  , EC = {
    key: 0,
    class: "night-order other"
}
  , NC = {
    key: 0
}
  , BC = ["innerHTML"]
  , VC = ["title"]
  , OC = {
    class: "name"
}
  , jC = {
    key: 0,
    class: "pronouns"
}
  , UC = {
    key: 0,
    class: "menu"
}
  , HC = ["onClick"]
  , qC = ["onClick"]
  , LC = ["onClick"]
  , zC = ["onClick"]
  , GC = ["onClick"]
  , WC = ["onClick"];
function FC(e, s, t, n, o, i) {
    const l = k("ChatVideo")
      , g = k("Token")
      , d = k("PlayerReminders")
      , h = k("StorytellerOverlay")
      , m = k("font-awesome-icon")
      , p = k("ChatAudio");
    return r(),
    u(y, null, [a("h1", null, c(e.$t("storyteller.title")), 1), e.players.length || e.session.sessionId ? (r(),
    C(We, {
        key: 0,
        name: "list",
        tag: "ul",
        role: "list",
        class: "storytellers"
    }, {
        default: T( () => [(r(!0),
        u(y, null, N(i.activeSTs, (f, P) => {
            var w, B, j, V, S, E, I, Z, H, F, K, Y, ie, x, de, ae, Fe, Qe;
            return r(),
            u("li", {
                class: _(["storyteller", [{
                    "in-chat": !e.isNight && (e.chat.userChannels.get(f.id) || "") !== e.chat.channel || e.chat.channel && e.isVideoWhisper && !((w = e.positions.whisper) != null && w.minimized),
                    "in-whisper": e.chat.channel && e.chat.channel === (e.chat.userChannels.get(f.id) || ""),
                    "has-role": !e.grimoire.isTownSquare && ((B = f.role) == null ? void 0 : B.id),
                    "menu-open": e.grimoire.menuOpen === "s" + P,
                    ["id-" + f.id]: f.id,
                    ["relation-" + ((j = e.relations.get(f.id)) == null ? void 0 : j.type)]: e.relations.has(f.id)
                }, (S = (V = e.session.users.get(f.id)) == null ? void 0 : V.flags) == null ? void 0 : S.map(J => "flag-" + J)]]),
                key: P,
                onClick: R(J => e.setMenuOpen("s" + P), ["stop"])
            }, [b(l, {
                "user-id": f.id
            }, null, 8, ["user-id"]), b(g, {
                role: f.role,
                alignment: f.alignment
            }, null, 8, ["role", "alignment"]), b(L, {
                name: "fade"
            }, {
                default: T( () => {
                    var J, te, ce, Ue;
                    return [(te = e.nightOrder.get((J = f.role) == null ? void 0 : J.id)) != null && te.first && e.settings.game.isNightOrder && e.isNight && e.hasGrimoireAccess ? (r(),
                    u("div", MC, [a("em", null, c((Ue = e.nightOrder.get((ce = f.role) == null ? void 0 : ce.id)) == null ? void 0 : Ue.first), 1), f.role.firstNightReminder ? (r(),
                    u("div", RC, [a("aside", null, c(e.$t("grimoire.phases.first_night")), 1), a("span", {
                        class: "reminder",
                        innerHTML: i.renderReminderHTML(e.$te(`roles.${f.role.id}.first`) ? e.$t(`roles.${f.role.id}.first`) : f.role.firstNightReminder)
                    }, null, 8, DC)])) : A("", !0)])) : A("", !0)]
                }
                ),
                _: 2
            }, 1024), b(L, {
                name: "fade"
            }, {
                default: T( () => {
                    var J, te, ce, Ue;
                    return [(te = e.nightOrder.get((J = f.role) == null ? void 0 : J.id)) != null && te.other && e.settings.game.isNightOrder && e.isNight && e.hasGrimoireAccess ? (r(),
                    u("div", EC, [a("em", null, c((Ue = e.nightOrder.get((ce = f.role) == null ? void 0 : ce.id)) == null ? void 0 : Ue.other), 1), f.role.otherNightReminder ? (r(),
                    u("div", NC, [a("aside", null, c(e.$t("grimoire.phases.other_nights")), 1), a("span", {
                        class: "reminder",
                        innerHTML: i.renderReminderHTML(e.$te(`roles.${f.role.id}.other`) ? e.$t(`roles.${f.role.id}.other`) : f.role.otherNightReminder)
                    }, null, 8, BC)])) : A("", !0)])) : A("", !0)]
                }
                ),
                _: 2
            }, 1024), b(d, {
                player: f
            }, null, 8, ["player"]), b(h, {
                storyteller: f
            }, null, 8, ["storyteller"]), a("div", {
                class: _(["nameplate", {
                    ["border-" + ((I = (E = e.session.users.get(f.id)) == null ? void 0 : E.cosmetics) == null ? void 0 : I.border)]: !!((H = (Z = e.session.users.get(f.id)) == null ? void 0 : Z.cosmetics) != null && H.border) && ((F = e.relations.get(f.id)) == null ? void 0 : F.type) !== "block",
                    ["level-" + ((K = e.session.users.get(f.id)) == null ? void 0 : K.level)]: !!((Y = e.session.users.get(f.id)) != null && Y.level)
                }]),
                title: (ie = e.session.users.get(f.id)) == null ? void 0 : ie.pronouns,
                style: q({
                    "--speaking": `var(--speaking${f.id})`
                })
            }, [a("div", OC, [e.session.sessionId ? (r(),
            u(y, {
                key: 0
            }, [e.chat.following === f.id && e.hasGrimoireAccess ? (r(),
            C(m, {
                key: 0,
                icon: "link",
                title: e.$t("storyteller.following")
            }, null, 8, ["title"])) : A("", !0), (x = e.session.users.get(f.id)) != null && x.isOnline ? !e.chat.consumers.has(f.id) && f.id !== e.user.id ? (r(),
            C(m, {
                key: 2,
                icon: "hourglass-half",
                class: "audio",
                title: e.$t("storyteller.connecting")
            }, null, 8, ["title"])) : A("", !0) : (r(),
            C(m, {
                key: 1,
                icon: "user-slash",
                class: "offline",
                title: e.$t("storyteller.offline")
            }, null, 8, ["title"]))], 64)) : A("", !0), !e.isNight && e.chat.video.streams.get(f.id) && ((de = e.chat.usersMuted[f.id]) != null && de.video) ? (r(),
            C(m, {
                key: 1,
                class: _(["video muted", {
                    silenced: e.chat.userOverrides.get("novideo-" + f.id) === 0
                }]),
                icon: "video-slash",
                title: e.$t("overlays.whisper.video_muted")
            }, null, 8, ["class", "title"])) : A("", !0), b(p, {
                "user-id": f.id
            }, null, 8, ["user-id"]), a("span", null, c(e.$t(...e.playerName(f))), 1), ((ae = e.relations.get(f.id)) == null ? void 0 : ae.type) === "block" ? (r(),
            C(m, {
                key: 2,
                icon: "user-xmark",
                title: e.$t("player.name.blocked")
            }, null, 8, ["title"])) : A("", !0)]), (Fe = e.session.users.get(f.id)) != null && Fe.pronouns ? (r(),
            u("div", jC, c((Qe = e.session.users.get(f.id)) == null ? void 0 : Qe.pronouns), 1)) : A("", !0)], 14, VC), b(L, {
                name: "fold"
            }, {
                default: T( () => {
                    var J, te;
                    return [e.grimoire.menuOpen === "s" + P ? (r(),
                    u("ul", UC, [a("li", {
                        onClick: ce => e.toggleModal({
                            name: "role",
                            params: {
                                playerIndex: P * -1 - 1
                            }
                        })
                    }, [b(m, {
                        icon: "theater-masks"
                    }), v(" " + c(e.$t("player.menu.character")), 1)], 8, HC), a("li", {
                        onClick: ce => e.toggleModal({
                            name: "reminder",
                            params: {
                                playerIndex: P * -1 - 1
                            }
                        })
                    }, [b(m, {
                        icon: "plus-circle"
                    }), v(" " + c(e.$t("player.reminders.add")), 1)], 8, qC), e.whispersAvailable.has(f.id) ? (r(),
                    u("li", {
                        key: 0,
                        onClick: ce => e.requestWhisper(f)
                    }, [b(m, {
                        icon: "comments"
                    }), v(" " + c(e.$t("player.menu.chat")), 1)], 8, LC)) : A("", !0), e.textsAvailable.has(f.id) ? (r(),
                    u("li", {
                        key: 1,
                        onClick: ce => e.showTextTab(f.id)
                    }, [b(m, {
                        icon: "envelope"
                    }), v(" " + c(e.$t("player.menu.whisper")), 1)], 8, zC)) : A("", !0), e.isStoryteller && e.session.sessionId ? (r(),
                    u("li", {
                        key: 2,
                        onClick: R(ce => i.removeStoryteller(f), ["stop"])
                    }, [b(m, {
                        icon: "times-circle"
                    }), v(" " + c(e.$t("storyteller.remove")), 1)], 8, GC)) : A("", !0), e.isSpectator ? (r(),
                    u("li", {
                        key: 3,
                        class: _({
                            disabled: ((J = e.session.users.get(e.user.id)) == null ? void 0 : J.grimoireAccess) || e.session.meta.isPublic && ((te = e.session.meta.tags) == null ? void 0 : te.grimoire) === 2
                        }),
                        onClick: s[0] || (s[0] = ce => i.requestGrimoire())
                    }, [b(m, {
                        icon: "book-dead"
                    }), v(" " + c(e.$t("storyteller.request_grim")), 1)], 2)) : A("", !0), e.hasGrimoireAccess && f.id !== e.user.id ? (r(),
                    u("li", {
                        key: 4,
                        onClick: ce => e.followUser(f.id)
                    }, [e.chat.following !== f.id ? (r(),
                    u(y, {
                        key: 0
                    }, [b(m, {
                        icon: "link"
                    }), v(" " + c(e.$t("storyteller.follow")), 1)], 64)) : (r(),
                    u(y, {
                        key: 1
                    }, [b(m, {
                        icon: "link-slash"
                    }), v(" " + c(e.$t("storyteller.unfollow")), 1)], 64))], 8, WC)) : A("", !0)])) : A("", !0)]
                }
                ),
                _: 2
            }, 1024)], 10, IC)
        }
        ), 128))]),
        _: 1
    })) : A("", !0)], 64)
}
const QC = O(Sa, [["render", FC], ["__scopeId", "data-v-5a841094"]])
  , Pa = {
    props: {
        name: {
            type: String,
            required: !0,
            default: ""
        },
        isDraggable: {
            type: Boolean,
            default: !0
        }
    },
    inject: ["setDropHandler"],
    computed: {
        ...M(["settings", "positions"]),
        left() {
            var e, s;
            return (s = (e = this.positions[this.name]) == null ? void 0 : e.x) != null ? s : 0
        },
        top() {
            var e, s;
            return (s = (e = this.positions[this.name]) == null ? void 0 : e.y) != null ? s : 0
        },
        draggable() {
            return !this.settings.general.isPositioningDisabled && (this.isDraggable || !!this.positions[this.name])
        }
    },
    data() {
        return {
            dragging: !1,
            resizeTimer: null,
            resizeObserver: new ResizeObserver(this.handleResize.bind(this)),
            isObserving: !1
        }
    },
    emits: ["dragged"],
    methods: {
        ...U(["setPosition"]),
        handleResize() {
            if (this.resizeTimer)
                return;
            const {container: e} = this.$refs;
            e != null && e.style.width && !e.style.containerType ? e.style.containerType = "size" : !(e != null && e.style.width) && (e != null && e.style.containerType) && e.style.removeProperty("container-type"),
            this.resizeTimer = setTimeout( () => {
                if (this.positions[this.name] && e) {
                    const s = this.positions[this.name] || {};
                    e.style.width ? (s.width = e.style.width,
                    s.height = e.style.height) : (delete s.width,
                    delete s.height),
                    this.setPosition({
                        name: this.name,
                        value: s
                    })
                }
                this.resizeTimer = !1
            }
            , 500)
        },
        startDrag(e) {
            this.draggable && e.target.getBoundingClientRect && (this.setDropHandler(this.stopDrag.bind(this)),
            e.dataTransfer.dropEffect = "move",
            e.dataTransfer.effectAllowed = "move",
            e.dataTransfer.setData("text/plain", ""),
            this.dragging = {
                x: e.target.getBoundingClientRect().x - e.x,
                y: e.target.getBoundingClientRect().y - e.y,
                offsetHeight: e.target.offsetHeight,
                offsetWidth: e.target.offsetWidth
            })
        },
        stopDrag(e) {
            var t, n;
            if (!this.draggable || !this.dragging)
                return;
            const s = this.positions[this.name] || {};
            s.x = Math.min(Math.max(2, Math.round(this.dragging.x + e.x)), window.innerWidth - this.dragging.offsetWidth - 2) + "px",
            s.y = Math.min(Math.max(0, Math.round(this.dragging.y + e.y)), window.innerHeight - this.dragging.offsetHeight) + "px",
            s.width = (t = s.width) != null ? t : this.dragging.offsetWidth + "px",
            s.height = (n = s.height) != null ? n : this.dragging.offsetHeight + "px",
            this.dragging = !1,
            this.setPosition({
                name: this.name,
                value: s
            }),
            this.$emit("dragged")
        },
        observeSize() {
            this.isObserving || this.$refs.container && (this.isObserving = !0,
            this.resizeObserver.observe(this.$refs.container, {
                box: "border-box"
            }))
        }
    },
    mounted() {
        this.observeSize()
    },
    beforeUnmount() {
        this.resizeObserver.disconnect(),
        this.isObserving = !1
    }
}
  , Kr = () => {
    he(e => ({
        v0e7b7167: e.left,
        v72ad7816: e.top
    }))
}
  , Yr = Pa.setup;
Pa.setup = Yr ? (e, s) => (Kr(),
Yr(e, s)) : Kr;
const ZC = ["id", "draggable"]
  , XC = {
    key: 0
};
function KC(e, s, t, n, o, i) {
    var l, g, d, h, m;
    return r(),
    u("div", {
        class: _(["container", {
            hidden: (l = e.positions[t.name]) == null ? void 0 : l.hidden,
            positioned: e.positions[t.name],
            locked: e.settings.general.isPositioningDisabled,
            dragging: o.dragging,
            draggable: i.draggable
        }]),
        role: "tabpanel",
        id: `tab-${t.name}`,
        ref: "container",
        draggable: i.draggable,
        onTouchstartPassive: s[0] || (s[0] = R( () => {}
        , ["stop"])),
        onTouchendPassive: s[1] || (s[1] = R( () => {}
        , ["stop"])),
        onDragstart: s[2] || (s[2] = p => i.startDrag(p)),
        onDragend: s[3] || (s[3] = p => i.stopDrag(p)),
        style: q({
            left: (g = e.positions[t.name]) == null ? void 0 : g.x,
            top: (d = e.positions[t.name]) == null ? void 0 : d.y,
            width: (h = e.positions[t.name]) == null ? void 0 : h.width,
            height: (m = e.positions[t.name]) == null ? void 0 : m.height
        }),
        tabindex: "-1"
    }, [a("section", null, [Ce(e.$slots, "default", {}, void 0, !0)]), e.$slots.footer ? (r(),
    u("footer", XC, [Ce(e.$slots, "footer", {}, void 0, !0)])) : A("", !0)], 46, ZC)
}
const je = O(Pa, [["render", KC], ["__scopeId", "data-v-0bf6319c"]])
  , YC = {
    name: "ChatTab",
    components: {
        Tab: je
    },
    inject: ["bindShortcut", "unbindShortcut"],
    computed: {
        ...M("players", ["players"]),
        ...M("user", ["user"]),
        ...M(["session", "chat", "grimoire", "edition", "game", "vote", "positions", "keybindings", "settings"]),
        ...D("players", ["seatedPlayerMap", "storytellerMap", "playerName"]),
        ...D("game", ["isNight"]),
        ...D("chat", ["isVideoWhisper", "isPrivateChat", "isPublicChat", "channelColors"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess", "isSpectator"]),
        channels() {
            const e = this.edition.isOfficial ? this.edition.id : "custom";
            return Array(5).fill(0).map( (s, t) => this.$t(`tabs.chat.channels.${e}_${t}`))
        },
        isPlayer() {
            return this.seatedPlayerMap.has(this.user.id) && !this.isStoryteller
        },
        playersInChannels() {
            const e = new Map;
            return this.channels.forEach( (s, t) => {
                e.set(`public-${t}`, [])
            }
            ),
            this.chat.userChannels.forEach( (s, t) => {
                var o;
                const n = this.session.users.get(t);
                this.isPublicChat(s) && (n != null && n.isOnline) && ((o = e.get(s)) == null || o.push(n))
            }
            ),
            e.forEach( (s, t) => {
                s.some( ({id: n}) => this.seatedPlayerMap.has(n)) || e.delete(t),
                s.sort(this.channelSort)
            }
            ),
            e
        },
        playersInWhispers() {
            const e = {};
            return this.chat.userChannels.forEach( (s, t) => {
                const n = this.session.users.get(t);
                if (this.isPrivateChat(s) && (n != null && n.isOnline)) {
                    if (e[s] || (e[s] = []),
                    this.isPlayer && !this.seatedPlayerMap.has(n.id) && e[s].some(o => !this.seatedPlayerMap.has(o.id)))
                        return;
                    e[s].push(n)
                }
            }
            ),
            this.isNight && !this.hasGrimoireAccess && Object.keys(e).forEach(s => {
                e[s].some( ({id: t}) => t === this.user.id) || delete e[s]
            }
            ),
            Object.keys(e).filter(s => e[s].some( ({id: t}) => this.seatedPlayerMap.has(t))).sort( (s, t) => e[s].some( ({id: n}) => n === this.user.id) ? -1 : e[t].some( ({id: n}) => n === this.user.id) ? 1 : 0).map(s => ({
                channel: s,
                players: e[s].sort(this.channelSort)
            }))
        },
        whisperQueue() {
            const e = [];
            return this.isSpectator ? e : (this.chat.whisperTo.forEach( (s, t) => {
                this.seatedPlayerMap.has(t) && e.push({
                    isIncoming: !1,
                    id: t,
                    channel: s
                })
            }
            ),
            this.chat.whisperFrom.forEach( (s, t) => {
                this.seatedPlayerMap.has(t) && e.push({
                    isIncoming: !0,
                    id: t,
                    channel: s
                })
            }
            ),
            e.map( ({id: s, isIncoming: t, channel: n}) => {
                var o;
                return {
                    channel: n,
                    isIncoming: t,
                    user: (o = this.session.users.get(s)) != null ? o : {
                        id: s,
                        username: "a user"
                    },
                    icon: [this.chat.channel, this.chat.userChannels.get(s)].includes(n) && (!this.isNight || this.isStoryteller) ? "user-plus" : t ? "arrow-circle-left" : "arrow-circle-right"
                }
            }
            ))
        }
    },
    data() {
        return {}
    },
    methods: {
        ...U(["setTab", "setPosition", "chat/togglePrompt"]),
        ...U("chat", ["togglePrompt"]),
        toggleChannel(e="") {
            !e && !this.chat.channel || !this.hasGrimoireAccess && this.isPrivateChat(e) || (this.chat.following && this.$store.commit("chat/setFollowing", ""),
            this.$store.commit("chat/setChannel", this.chat.channel === e ? "" : e))
        },
        acceptRequest(e) {
            if (this.whisperQueue[e]) {
                const {user: s, channel: t} = this.whisperQueue[e];
                return this.$store.commit("chat/setWhisperTo", {
                    id: s.id,
                    channel: t
                }),
                !0
            }
        },
        cancelRequest(e) {
            if (this.whisperQueue[e]) {
                const {isIncoming: s, user: t} = this.whisperQueue[e];
                s ? this.$store.commit("chat/removeWhisperFrom", t) : this.$store.commit("chat/removeWhisperTo", t)
            }
        },
        channelSort(e, s) {
            if (this.seatedPlayerMap.has(e.id))
                if (this.seatedPlayerMap.has(s.id)) {
                    if (this.user.id === e.id)
                        return -1;
                    if (this.user.id === s.id)
                        return 1
                } else
                    return -1;
            else
                return 1;
            return 0
        },
        toggleChat() {
            if (this.positions.chat) {
                if (this.settings.general.isPositioningDisabled)
                    return;
                this.setPosition({
                    name: "chat"
                }),
                this.setTab({
                    tab: "chat",
                    value: !0
                })
            } else
                this.setTab({
                    tab: "chat",
                    value: !this.grimoire.tabs.chat
                })
        },
        resetPosition() {
            var s;
            const e = (s = this.positions.whisper) == null ? void 0 : s.minimized;
            this.setPosition({
                name: "whisper",
                value: {
                    minimized: e
                }
            })
        }
    },
    mounted() {
        this.bindShortcut("acceptChat1", () => this.acceptRequest(0)),
        this.bindShortcut("acceptChat2", () => this.acceptRequest(1)),
        this.bindShortcut("acceptChat3", () => this.acceptRequest(2)),
        this.bindShortcut("leaveChat", () => this.toggleChannel())
    },
    beforeUnmount() {
        this.unbindShortcut("leaveChat"),
        this.unbindShortcut("acceptChat1"),
        this.unbindShortcut("acceptChat2"),
        this.unbindShortcut("acceptChat3")
    }
}
  , JC = {
    role: "list"
}
  , $C = {
    class: "title"
}
  , xC = ["aria-label", "onClick"]
  , eS = {
    class: "name"
}
  , sS = {
    key: 0,
    class: "shortcut"
}
  , tS = ["aria-label"]
  , iS = {
    class: "title"
}
  , oS = ["onClick"]
  , nS = ["onClick", "aria-label"]
  , aS = {
    class: "title"
}
  , rS = ["title"]
  , lS = ["title"]
  , cS = {
    key: 0,
    class: "info"
}
  , dS = {
    key: 1,
    class: "info"
}
  , uS = {
    key: 2,
    class: "prompt"
};
function gS(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("Tab");
    return r(),
    C(L, {
        name: "slide"
    }, {
        default: T( () => {
            var d, h;
            return [e.session.sessionId ? (r(),
            u("aside", {
                key: 0,
                class: _(["tab", {
                    open: e.grimoire.tabs.chat && !e.positions.chat
                }])
            }, [!e.positions.chat || !e.settings.general.isPositioningDisabled ? (r(),
            u("div", {
                key: 0,
                class: "label",
                role: "heading",
                onClick: s[0] || (s[0] = m => i.toggleChat())
            }, [v(c(e.$t("tabs.chat.title")) + " ", 1), e.isVideoWhisper && ((d = e.positions.whisper) != null && d.x) && ((h = e.positions.whisper) != null && h.minimized) ? (r(),
            C(l, {
                key: 0,
                icon: "arrows-to-dot",
                onClick: R(i.resetPosition, ["stop"]),
                title: e.$t("tabs.chat.reset_position"),
                class: "reset"
            }, null, 8, ["onClick", "title"])) : e.chat.channel ? (r(),
            C(l, {
                key: 1,
                icon: "microphone"
            })) : A("", !0), e.chat.whisperFrom.size && i.whisperQueue.length ? (r(),
            C(l, {
                key: 2,
                icon: "arrow-circle-left",
                class: "primary"
            })) : A("", !0), e.chat.whisperTo.size && i.whisperQueue.length ? (r(),
            C(l, {
                key: 3,
                icon: "arrow-circle-right"
            })) : A("", !0)])) : A("", !0), b(g, {
                name: "chat",
                draggable: !e.settings.general.isPositioningDisabled && (e.grimoire.tabs.chat || !!e.positions.chat),
                onDragged: s[4] || (s[4] = m => e.setTab({
                    tab: "chat"
                }))
            }, {
                footer: T( () => [b(L, {
                    name: "fade"
                }, {
                    default: T( () => [!e.isNight && !e.chat.isPrompt && !e.isSpectator && !e.vote.nomination ? (r(),
                    u("div", {
                        key: 0,
                        class: "button",
                        onClick: s[3] || (s[3] = (...m) => e.togglePrompt && e.togglePrompt(...m))
                    }, c(e.$t("tabs.chat.request_private")), 1)) : A("", !0)]),
                    _: 1
                })]),
                default: T( () => [a("ul", JC, [b(We, {
                    name: "whisper"
                }, {
                    default: T( () => [i.whisperQueue.length ? (r(),
                    u("li", {
                        key: 0,
                        class: _(["whisper requests", {
                            incoming: i.whisperQueue.some( ({isIncoming: m}) => m)
                        }])
                    }, [a("div", $C, [a("b", null, c(e.$t("tabs.chat.requests")), 1)]), (r(!0),
                    u(y, null, N(i.whisperQueue, (m, p) => (r(),
                    u("div", {
                        key: p,
                        class: "request",
                        "aria-live": "assertive",
                        "aria-label": e.$t(`tabs.chat.${m.isIncoming ? "accept" : "cancel"}_request`, [e.$t(...e.playerName(m.user))]),
                        onClick: R(f => m.isIncoming ? i.acceptRequest(p) : i.cancelRequest(p), ["stop"])
                    }, [b(l, {
                        icon: m.icon,
                        title: m.isIncoming ? e.$t("tabs.chat.incoming") : e.$t("tabs.chat.outgoing"),
                        class: _({
                            incoming: m.isIncoming
                        })
                    }, null, 8, ["icon", "title", "class"]), a("span", eS, c(e.$t(...e.playerName(m.user))), 1), m.isIncoming && p < 3 ? (r(),
                    u("em", sS, c(e.keybindings["acceptChat" + (p + 1)][0]), 1)) : A("", !0), m.isIncoming ? (r(),
                    C(l, {
                        key: 1,
                        icon: "check-circle",
                        class: "accept",
                        "aria-label": e.$t("tabs.chat.accept"),
                        role: "button"
                    }, null, 8, ["aria-label"])) : A("", !0), b(l, {
                        icon: "times-circle",
                        class: "cancel",
                        "aria-label": e.$t("tabs.chat.cancel"),
                        role: "button",
                        onClick: R(f => i.cancelRequest(p), ["stop"])
                    }, null, 8, ["aria-label", "onClick"])], 8, xC))), 128))], 2)) : A("", !0), i.playersInWhispers.length || e.isPrivateChat(e.chat.channel) ? (r(),
                    u("li", {
                        key: 1,
                        class: _(["whisper list", {
                            active: e.isPrivateChat(e.chat.channel),
                            joinable: e.hasGrimoireAccess
                        }]),
                        onClick: s[1] || (s[1] = R(m => i.toggleChannel(), ["stop"])),
                        "aria-label": e.$t("tabs.chat.leave_private")
                    }, [a("div", iS, [a("b", null, c(e.$t("tabs.chat.chats")), 1), b(l, {
                        icon: "sign-out-alt",
                        class: "leave",
                        title: "Leave room",
                        role: "button"
                    })]), (r(!0),
                    u(y, null, N(i.playersInWhispers, ({players: m, channel: p}) => (r(),
                    u("div", {
                        key: p,
                        class: _(["channel", {
                            ["channel-" + e.channelColors.get(p)]: e.channelColors.has(p)
                        }]),
                        role: "button",
                        onClick: R(f => i.toggleChannel(e.hasGrimoireAccess ? p : ""), ["stop"])
                    }, [(r(!0),
                    u(y, null, N(m, (f, P) => (r(),
                    u("span", {
                        class: _(["name", {
                            you: f.id === e.user.id,
                            storyteller: e.storytellerMap.has(f.id),
                            spectator: !e.seatedPlayerMap.has(f.id)
                        }]),
                        key: P
                    }, [e.seatedPlayerMap.has(f.id) ? (r(),
                    u(y, {
                        key: 1
                    }, [e.chat.following === f.id ? (r(),
                    C(l, {
                        key: 0,
                        icon: "link",
                        title: e.$t("tabs.chat.following")
                    }, null, 8, ["title"])) : A("", !0), v(" " + c(e.$t(...e.playerName(f))), 1)], 64)) : (r(),
                    C(l, {
                        key: 0,
                        icon: "eye",
                        title: i.isPlayer ? e.$t("tabs.chat.spectator") : e.$t(...e.playerName(f))
                    }, null, 8, ["title"]))], 2))), 128))], 10, oS))), 128))], 10, tS)) : A("", !0), !e.isNight && !e.vote.nomination ? (r(!0),
                    u(y, {
                        key: 2
                    }, N(i.channels, (m, p) => (r(),
                    u("li", {
                        key: p,
                        onClick: R(f => i.toggleChannel(`public-${p}`), ["stop"]),
                        "aria-label": `Join/Leave ${m}`,
                        class: _(["channel", {
                            active: e.chat.channel === `public-${p}`
                        }])
                    }, [a("div", aS, [a("b", null, c(m), 1), b(l, {
                        icon: "sign-out-alt",
                        class: "leave",
                        title: e.$t("tabs.chat.leave_room"),
                        role: "button"
                    }, null, 8, ["title"])]), (r(!0),
                    u(y, null, N(i.playersInChannels.get(`public-${p}`), (f, P) => (r(),
                    u("span", {
                        class: _(["name", {
                            you: f.id === e.user.id,
                            storyteller: e.storytellerMap.has(f.id),
                            spectator: !e.seatedPlayerMap.has(f.id)
                        }]),
                        key: P
                    }, [e.seatedPlayerMap.has(f.id) ? (r(),
                    u(y, {
                        key: 1
                    }, [e.chat.following === f.id && e.isStoryteller ? (r(),
                    u("span", {
                        key: 0,
                        title: e.$t("tabs.chat.following")
                    }, [b(l, {
                        icon: "link"
                    })], 8, lS)) : A("", !0), v(" " + c(e.$t(...e.playerName(f))), 1)], 64)) : (r(),
                    u("span", {
                        key: 0,
                        title: e.$t(...e.playerName(f))
                    }, [b(l, {
                        icon: "eye"
                    })], 8, rS))], 2))), 128))], 10, nS))), 128)) : (r(),
                    u(y, {
                        key: 3
                    }, [e.vote.nomination ? (r(),
                    u("li", cS, c(e.$t("tabs.chat.nomination")), 1)) : (r(),
                    u("li", dS, c(e.$t("tabs.chat.night")), 1)), e.isPublicChat(e.chat.channel) ? (r(),
                    u("li", uS, [a("div", {
                        class: "button",
                        onClick: s[2] || (s[2] = R(m => i.toggleChannel(), ["stop"]))
                    }, [b(l, {
                        icon: "sign-out-alt",
                        class: "leave",
                        title: e.$t("tabs.chat.leave_room"),
                        role: "button"
                    }, null, 8, ["title"]), v(" " + c(e.$t("tabs.chat.leave_room")), 1)])])) : A("", !0)], 64))]),
                    _: 1
                })])]),
                _: 1
            }, 8, ["draggable"])], 2)) : A("", !0)]
        }
        ),
        _: 1
    })
}
const mS = O(YC, [["render", gS], ["__scopeId", "data-v-17440300"]])
  , hS = {
    name: "NPCsTab",
    components: {
        Tab: je,
        Token: ve
    },
    computed: {
        ...M("players", ["npcs", "players"]),
        ...M(["session", "grimoire", "positions", "settings"]),
        ...D("user", ["isStoryteller"]),
        ...D("players", ["nightOrder"]),
        ...D("game", ["hasGardener", "isNight"]),
        ...D(["isHomebrew", "isJinxed", "filterAbilities"]),
        npcSorted() {
            return [...this.npcs].sort( (e, s) => e.team.localeCompare(s.team))
        },
        npcClasses() {
            return [...this.npcs].sort( (e, s) => e.team.localeCompare(s.team)).map( ({id: e}, s) => {
                const t = {};
                return this.grimoire.menuOpen === "n" + s && (t["menu-open"] = !0),
                e === "bootlegger" && this.isHomebrew && (t.disabled = !0),
                e === "djinn" && this.isJinxed && (t.disabled = !0),
                e === "gardener" && this.hasGardener && (t.disabled = !0),
                t
            }
            )
        }
    },
    inject: ["renderReminderHTML"],
    data() {
        return {
            isRightSide: !1,
            isVisible: !1
        }
    },
    methods: {
        ...U(["toggleModal", "setTab", "setMenuOpen", "setPosition"]),
        removeNPC(e) {
            if (this.setMenuOpen(),
            !!this.isStoryteller) {
                if (this.npcClasses[e].disabled)
                    return !1;
                this.$store.commit("players/setNPC", {
                    index: this.npcs.indexOf(this.npcSorted[e])
                }),
                !this.npcs.length && this.grimoire.tabs.npcs && this.setTab({
                    tab: "npcs"
                })
            }
        },
        toggleNPCs() {
            if (this.positions.npcs) {
                if (this.settings.general.isPositioningDisabled)
                    return;
                this.setPosition({
                    name: "npcs"
                }),
                this.setTab({
                    tab: "npcs",
                    value: !0
                }),
                this.isRightSide = !1
            } else
                this.setTab({
                    tab: "npcs",
                    value: !this.grimoire.tabs.npcs
                })
        },
        toggleMenu(e) {
            this.isStoryteller && this.setMenuOpen("n" + e)
        },
        useAbility(e) {
            if (this.isStoryteller) {
                switch (e.name) {
                case "distribute-roles":
                    this.$store.dispatch("game/distributeRoles");
                    break;
                case "ghost-votes":
                    this.players.forEach(s => {
                        s.isVoteless && this.$store.commit("players/updatePlayer", {
                            player: s,
                            property: "isVoteless",
                            value: !1
                        })
                    }
                    );
                    break;
                case "pointing":
                    if (e.time === "night" && e.global) {
                        const s = this.players.filter( ({role: t, id: n, reminders: o, isDead: i}) => n && (t.team === e.global && !["marionette", "drunk", "lunatic"].includes(t.id) && !o.some( ({role: l}) => l === "alchemist") || e.global === "dead" && i)).map( ({id: t}) => t);
                        if (!s.length)
                            return;
                        this.$store.dispatch("session/startPointing", ["storyteller", ...s])
                    } else
                        this.$store.dispatch("session/startPointing")
                }
                this.setMenuOpen()
            }
        },
        checkScreenSide() {
            this.positions.npcs && this.setTab({
                tab: "npcs"
            }),
            this.isRightSide = this.positions.npcs && parseInt(this.positions.npcs.x, 10) > window.innerWidth / 2
        }
    },
    beforeMount() {
        this.checkScreenSide()
    }
}
  , pS = {
    class: "tokens"
}
  , AS = {
    key: 0
}
  , bS = ["innerHTML"]
  , fS = {
    key: 0
}
  , vS = ["innerHTML"]
  , yS = {
    key: 0,
    class: "menu"
}
  , _S = ["onClick"]
  , wS = ["onClick"];
function kS(e, s, t, n, o, i) {
    const l = k("Token")
      , g = k("font-awesome-icon")
      , d = k("Tab");
    return r(),
    C(L, {
        name: "slide"
    }, {
        default: T( () => [e.npcs.length ? (r(),
        u("aside", {
            key: 0,
            class: _(["tab", {
                open: e.grimoire.tabs.npcs && !e.positions.npcs,
                "is-visible": o.isVisible || e.grimoire.menuOpen.match(/^n/)
            }])
        }, [!e.positions.npcs || !e.settings.general.isPositioningDisabled ? (r(),
        u("div", {
            key: 0,
            class: "label",
            role: "heading",
            onClick: s[0] || (s[0] = (...h) => i.toggleNPCs && i.toggleNPCs(...h))
        }, c(e.$t("tabs.npcs.title")), 1)) : A("", !0), b(d, {
            name: "npcs",
            draggable: !e.settings.general.isPositioningDisabled && (e.grimoire.tabs.npcs || !!e.positions.npcs),
            onDragged: s[3] || (s[3] = h => i.checkScreenSide())
        }, {
            default: T( () => [a("ul", pS, [(r(!0),
            u(y, null, N(i.npcSorted, (h, m) => (r(),
            u("li", {
                key: h.id,
                class: _(i.npcClasses[m]),
                onMouseenter: s[1] || (s[1] = p => o.isVisible = !0),
                onMouseleave: s[2] || (s[2] = p => o.isVisible = !1)
            }, [b(l, {
                class: _({
                    right: o.isRightSide
                }),
                onClick: R(p => i.toggleMenu(m), ["stop"]),
                role: h
            }, null, 8, ["class", "onClick", "role"]), b(L, {
                name: "fade"
            }, {
                default: T( () => {
                    var p, f;
                    return [(p = e.nightOrder.get(h.id)) != null && p.first && e.settings.game.isNightOrder && e.isNight ? (r(),
                    u("div", {
                        key: 0,
                        class: _(["night-order first", {
                            right: o.isRightSide
                        }])
                    }, [a("em", null, c((f = e.nightOrder.get(h.id)) == null ? void 0 : f.first), 1), h.firstNightReminder ? (r(),
                    u("div", AS, [a("aside", null, c(e.$t("grimoire.phases.first_night")), 1), a("span", {
                        class: "reminder",
                        innerHTML: i.renderReminderHTML(e.$te(`roles.${h.id}.first`) ? e.$t(`roles.${h.id}.first`) : h.firstNightReminder)
                    }, null, 8, bS)])) : A("", !0)], 2)) : A("", !0)]
                }
                ),
                _: 2
            }, 1024), b(L, {
                name: "fade"
            }, {
                default: T( () => {
                    var p, f;
                    return [(p = e.nightOrder.get(h.id)) != null && p.other && e.settings.game.isNightOrder && e.isNight ? (r(),
                    u("div", {
                        key: 0,
                        class: _(["night-order other", {
                            right: o.isRightSide
                        }])
                    }, [a("em", null, c((f = e.nightOrder.get(h.id)) == null ? void 0 : f.other), 1), h.otherNightReminder ? (r(),
                    u("div", fS, [a("aside", null, c(e.$t("grimoire.phases.other_nights")), 1), a("span", {
                        class: "reminder",
                        innerHTML: i.renderReminderHTML(e.$te(`roles.${h.id}.other`) ? e.$t(`roles.${h.id}.other`) : h.otherNightReminder)
                    }, null, 8, vS)])) : A("", !0)], 2)) : A("", !0)]
                }
                ),
                _: 2
            }, 1024), b(L, {
                name: "fold"
            }, {
                default: T( () => {
                    var p;
                    return [e.grimoire.menuOpen === "n" + m ? (r(),
                    u("ul", yS, [(r(!0),
                    u(y, null, N(e.filterAbilities({
                        role: h
                    }, "ability"), (f, P) => (r(),
                    u("li", {
                        key: P,
                        onClick: R(w => i.useAbility(f.ability), ["stop"]),
                        class: "special"
                    }, [b(g, {
                        icon: "star"
                    }), a("span", null, [v(c(e.$te(`roles.${f.role.id}.name`) ? e.$t(`roles.${f.role.id}.name`) : f.role.name) + ":", 1), s[4] || (s[4] = a("br", null, null, -1)), v(" " + c(e.$t(`grimoire.abilities.${f.ability.name}`)), 1)])], 8, _S))), 128)), a("li", {
                        onClick: R(f => i.removeNPC(m), ["stop"]),
                        class: _({
                            disabled: (p = i.npcClasses[m]) == null ? void 0 : p.disabled
                        })
                    }, [b(g, {
                        icon: "trash-alt"
                    }), v(" " + c(e.$t(`tabs.npcs.remove_${h.team}`)), 1)], 10, wS)])) : A("", !0)]
                }
                ),
                _: 2
            }, 1024)], 34))), 128))])]),
            _: 1
        }, 8, ["draggable"])], 2)) : A("", !0)]),
        _: 1
    })
}
const CS = O(hS, [["render", kS], ["__scopeId", "data-v-4d3f2b71"]])
  , SS = {
    name: "BluffsTab",
    components: {
        Tab: je,
        Token: ve
    },
    inject: ["setDropHandler"],
    computed: {
        ...M("players", ["players", "bluffs", "npcs", "storytellers"]),
        ...M("user", ["user"]),
        ...M(["session", "grimoire", "positions", "settings"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess"]),
        ...D("players", ["seatedPlayerMap"]),
        bluffsVisible() {
            var e, s;
            return this.seatedPlayerMap.has(this.user.id) && this.settings.game.isPlayerBluffs && !this.isStoryteller || this.isStoryteller && this.players.length <= 7 && this.players.find(t => {
                var n;
                return ["snitch", "summoner"].includes((n = t.role) == null ? void 0 : n.id)
            }
            ) ? !0 : (this.players.length > 6 || this.npcs.some( ({id: t}) => t === "toymaker")) && (this.isStoryteller || this.hasGrimoireAccess || ((s = (e = this.players.find(t => t.id === this.user.id)) == null ? void 0 : e.role) == null ? void 0 : s.team) === "demon")
        }
    },
    data() {
        return {
            isRightSide: !1,
            isVisible: !1
        }
    },
    methods: {
        ...U(["toggleModal", "setTab", "setPosition"]),
        toggleBluffs() {
            if (this.positions.bluffs) {
                if (this.settings.general.isPositioningDisabled)
                    return;
                this.setPosition({
                    name: "bluffs"
                }),
                this.setTab({
                    tab: "bluffs",
                    value: !0
                })
            } else
                this.setTab({
                    tab: "bluffs",
                    value: !this.grimoire.tabs.bluffs
                })
        },
        checkScreenSide() {
            this.positions.bluffs && this.setTab({
                tab: "bluffs"
            }),
            this.isRightSide = this.positions.bluffs && parseInt(this.positions.bluffs.x, 10) > window.innerWidth / 2
        }
    },
    beforeMount() {
        this.checkScreenSide()
    }
};
function PS(e, s, t, n, o, i) {
    const l = k("Token")
      , g = k("Tab");
    return r(),
    C(L, {
        name: "slide"
    }, {
        default: T( () => [i.bluffsVisible ? (r(),
        u("aside", {
            key: 0,
            class: _(["tab", {
                open: e.grimoire.tabs.bluffs,
                "is-visible": o.isVisible
            }])
        }, [!e.positions.bluffs || !e.settings.general.isPositioningDisabled ? (r(),
        u("div", {
            key: 0,
            class: "label",
            role: "heading",
            onClick: s[0] || (s[0] = d => i.toggleBluffs())
        }, c(e.$t("tabs.bluffs.title")), 1)) : A("", !0), b(g, {
            name: "bluffs",
            draggable: !e.settings.general.isPositioningDisabled && (e.grimoire.tabs.bluffs || !!e.positions.bluffs),
            onDragged: s[3] || (s[3] = d => i.checkScreenSide())
        }, {
            default: T( () => [a("ul", null, [(r(),
            u(y, null, N(3, d => a("li", {
                key: d,
                onMouseenter: s[1] || (s[1] = h => o.isVisible = !0),
                onMouseleave: s[2] || (s[2] = h => o.isVisible = !1)
            }, [b(l, {
                role: e.bluffs[d - 1],
                class: _({
                    right: o.isRightSide
                }),
                onClick: R(h => e.toggleModal({
                    name: "role",
                    params: {
                        bluff: d
                    }
                }), ["stop"])
            }, null, 8, ["role", "class", "onClick"])], 32)), 64))])]),
            _: 1
        }, 8, ["draggable"])], 2)) : A("", !0)]),
        _: 1
    })
}
const TS = O(SS, [["render", PS], ["__scopeId", "data-v-4ceb0c97"]])
  , Il = "/assets/firstnight-CQnGctKP.webp"
  , Ml = "data:image/webp;base64,UklGRkAMAABXRUJQVlA4WAoAAAAwAAAAZQIAZQIASUNDUDACAAAAAAIwQURCRQIQAABtbnRyUkdCIFhZWiAHzwAGAAMAAAAAAABhY3NwQVBQTAAAAABub25lAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLUFEQkUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApjcHJ0AAAA/AAAADJkZXNjAAABMAAAAGt3dHB0AAABnAAAABRia3B0AAABsAAAABRyVFJDAAABxAAAAA5nVFJDAAAB1AAAAA5iVFJDAAAB5AAAAA5yWFlaAAAB9AAAABRnWFlaAAACCAAAABRiWFlaAAACHAAAABR0ZXh0AAAAAENvcHlyaWdodCAxOTk5IEFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkAAAAZGVzYwAAAAAAAAARQWRvYmUgUkdCICgxOTk4KQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAGN1cnYAAAAAAAAAAQIzAABjdXJ2AAAAAAAAAAECMwAAY3VydgAAAAAAAAABAjMAAFhZWiAAAAAAAACcGAAAT6UAAAT8WFlaIAAAAAAAADSNAACgLAAAD5VYWVogAAAAAAAAJjEAABAvAAC+nEFMUEicAgAAAZAFSbJpW3Pvs23btm3btm0bX7Zt27Zt2/Y+Z66x9/rqh46ICRD6n/6n/+l/+p/+p//pf/qf/qf/6X/6n/6n/+l/+p/+p//pf/qf/qf/6X/6n/6n/+l/+p/+p//pf/qf/qf/6X/6n/6n/+l/+p/+p///gR8aYFJmrbB5w4App/uFR5Z8+tOtfn89u7gQpsRtd0QDOzdLnyRYEq72mkePNEg/dI0MJG0OWBr0zxb2zw8iKzS4rc2DYgDIVrXjkwZJoCNE7lGP1aZPf9YAjfD1x3c4pnb+NaFG5LhgkahFyS7H1YFvHp9qny4mTCTa/sOljnXpzYtVJKqIJzjEqXhLHf9d737W6SFhoWa/MZceP3WpKfc3SQMKatxP1o+V6QHG9+cdS8bkiYwvfl5Zmw0OjgwYMd08qt9H1iiXBwberS8STkQk62nz+P7cqyAGlMgg/oYaZiTVH1vrRACAgOe+ZCRVvXE6BxRIhEWGUv36eVIcIJAQLT8aSlVdnkAgUuaesdw5oUBSL/9uqJ/RsECk+CszDRI4LPjNFF/f6JPjn26rpfqqZ0g8kIEm+LayXbFsUSWuSGxp9n5BDEHEKNPcDltWM4R4SgA9IgoohhrqoItD8nkITIavedZyxoqSkQUs016x3+FekQUwo0+y1etzE2KGFNAc9t02m0qnFuSs5bbF/VoCn3PssDie4GfokcG2s7xgaLaLwbI5hsBo1t1PgsrankuQ1CNE4tI7vwbq+dHxaUIJniYdf/7hK7X8sL4c65VIcDVZyvotV8zZOiG30P/0P/1P/9P/9D/9T//T//Q//U//0//0P/1P/9P/9D/9T//T//Q//U//0//0P/1P/9P/9D/9T//T//Q//U//0//0P/1P/9P/9P8/WAFWUDggRgcAAJB0AJ0BKmYCZgI+bTaXSaQioiEgVAjAgA2JaW7hd2EaU9iQDsY/uXhPXNVh95cqyyhxE6SCar5BtQfdOQg2ALcrcz0BGXqbCgFuVuZ6AjL1NhQC3K3M9ARl6mwoBblbmegIy9TYUAtytzPQEZepsKAW5W5noCMvU2FALcrcz0BGXqbCgFuVuZ6AjL1NhQC3K3M9ARl6mwoBblbmegIy9TYUAtytzPQEZepsKAW5W5noCMvU2FALcrcz0BGXqbCgFuVuZ6AjL1NhQC3K3M9ARl6mwoBblbmegIy9TYUAtytzPQEZepsKAW5W5noCMvU2FALcrcz0BGXqbCgFuVuZ6AjL1NhQC3K3M9ARl6mwoBblbmegIy9TYUAtytzPQEZepsKAW5W5noCMvU2FALcrcz0BGXqbCgFuVuZ6AjL1NhQC3K3M9ARl6mwoBblbmegIy9TYUAtytzPQEZepsKAW5W5noCMvU2FALcrcz0BGXqbCgFuVuZ6AjLjrWfWxiJ+QgzaFmnEsoho8Grmt9YDMq7G89VOK71zJjO7YEaq+IVfEKviFXxCr4hV8Qq+IVfEKviFXxCr4hV8Qq+IVfEKvhrSQyNdFH+kBVhB4Y8F8GcIFjXYDNeC4CGc5aon/RMcB6dk5nqmfMfFU4r7b+gSpFG+NNKXy15TYEaq+IVfEKviFXxCr4hV8Qq+IVfEKviFXxCr4hV8Qq+FThtNX81zYy12LcIoQUZ2aB4qH3Lt5ps5nYKBGqviFXxCr4hV8Qq+IVfEKviFXxCr4hV8Qq+IVfEKviFXxCqzYj7UT9u6Z3dM7umd3TO7pnd0zu6Z3dM7umd3TO7pnd0zu6Z3dM7umd3TO7inm8rcz0BGXqbCgFuVuZ6AjL1NhQC3K3M9ARl6mwoBblbmegIy9TYUAtytzPQEZepsKAW5W5noCMvU2FALcrcz0BGXqbCgFuVuZ6AjL1NhQC3K3M9ARl6mwoBblbmegIy9TYUAtytzPQEZepsKAW5W5noCMvU2FALcrcz0BGXqbCgFuVuZ6AjL1NhQC3K3M9ARl6mwoBblbmegIy9TYUAtytzPQEZepsKAW5W5noCMvU2FALcrcz0BGXqbCgFuVuZ6AjL1NhQC3K3M9ARl6mwoBblbmegIy9TYUAtytzPQEZepsKAW5W5noCMvU2FALcrcz0BGXqbCgFuVuZ6AjL1NhQC3K3M9ARl6mwoBblbmegIy9TYUAtytzPQEZepsKAW5W5noCMvU2FAIgAP7/7hwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgffSwtI05kIxY241FajgGx/zT72mI8sCCN4T7RCDIWE48SEe0ClHW+qwS0TVKKE1nSfPxJCVfJwNpXBGjuoNiZXl9b2WQMSzGlvBPSGXObsqET3z+9u6zO+Mi/25jyErvNbFT+LgOdcqF1XN6FnV11l4QHyoMK96Hf/LPQB6Kf2zJdb6pQ0yy8ArBiBRyjTUtGZVCKTB88ayYFYnNokM8lqLbIYkR9lSGQaBnUUyaLRxvb97iMOKVSk9fOvhpdp8S/bCAbqAohPNG7YBdp3370mH3XrRkliZDw65BHnj5ofvC3zRCtIFssg2q0rMPu64vY4r6qtLQh6EPQh6EPQh6EPQh6EPQh6EOQxmnR2WLPoDS+xfIaRhTUrKdWnlA5aqGyJ40P7Xd+IQIjTP2/vt3RhztcLde75ahp2HiINC3OlidnJpch0nAXkDnaCJq9SjO0bHmaOD4fww/0doLRyv0FX476o5GQu8bz4S1obtM3EkhzvYrp1D1/ixP6Lr8aZ4UP/BOFtQ2HirLclHcUA/3P77iopfME/ykfjguSy2MVtptY2e9j0XsEBgaL6JLv/6V+n6ZZ2+s2urqBA3ih3thRrTotMYb1IsAK7l5sMa28Qvr0d1OvejcOtJ3wE5Rpxf+s0+4bKV69qkTT7PtqqOUkov8rmY3xXZMmUCp3/YXIw+Apfx4LFl/CMqG8h5nXGS+7/NlALobFC+25dqRDqsms/qnyxir3V3eCocQC8ulmXo3cPUTkMyg5c2bfUvLDfFjWDEzJVreysbDGLfnSA9DqLbiIdeaJrKMsoh4MOGWJw+86l+gskOyIo5IE+kcJuWRa2k5mb5rB5rja4AN/ldTbIoy4lhxXZVM/Wn/63kPbAgAABYdaQ8WwTLDMApV3tddFe8he5nr8Vozk8Ffh5JX9XRVv0TXCvQ4ia3RZiO+PbeSApnvhhh/Jc7uRZVBXOQ1exFQ/tQu4TKddiBicKiyIMtNezJ/j3Yo0PTAnUU/EXYmeyjELI6MyTUmqG5tf4fz2EqHMea5/+e6/0dL//LpIbOPwD0GYH4ht61cXK76a8dW30146tvprx1bfTXjq2+mvHVt9NeOrb6a8dW30146tvprx1bfTXjq2+mvHVt9NeOrb6a8dW30146tvprxsgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
  , Rl = "/assets/leaf-orange-418HATSf.webp"
  , Dl = "data:image/webp;base64,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"
  , El = "data:image/webp;base64,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"
  , Nl = "data:image/webp;base64,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"
  , Bl = "data:image/webp;base64,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"
  , Vl = "/assets/leaf-top4-DaH0V5hE.webp"
  , Ol = "/assets/leaf-top5-DyrDgGGV.webp"
  , jl = "/assets/othernight-UoZCooCu.webp"
  , $s = "/assets/sheet-bottom-B8o9Qwul.webp"
  , Ul = "/assets/sheet-ZV_08gY3.webp"
  , Hl = "/assets/token-BqDQdWeO.webp"
  , ql = "/assets/firstnight-741QXSRJ.webp"
  , Ll = "data:image/webp;base64,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"
  , zl = "/assets/leaf-orange-418HATSf.webp"
  , Gl = "data:image/webp;base64,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"
  , Wl = "data:image/webp;base64,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"
  , Fl = "data:image/webp;base64,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"
  , Ql = "/assets/leaf-top3-C9BTCwAz.webp"
  , Zl = "/assets/leaf-top4-BUjlPdzY.webp"
  , Xl = "/assets/leaf-top5-BEXNsf9Y.webp"
  , Kl = "/assets/leaf-top6-rjk2XTrD.webp"
  , Yl = "/assets/othernight-D0NIKU2A.webp"
  , xs = "/assets/sheet-bottom-DPvgolac.webp"
  , Jl = "/assets/sheet-CXPnUsUN.webp"
  , $l = "/assets/token-VPG3jS-a.webp"
  , xl = "/assets/firstnight-741QXSRJ.webp"
  , ec = "data:image/webp;base64,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"
  , sc = "/assets/leaf-orange-418HATSf.webp"
  , tc = "data:image/webp;base64,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"
  , ic = "data:image/webp;base64,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"
  , oc = "data:image/webp;base64,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"
  , nc = "/assets/leaf-top3-C9BTCwAz.webp"
  , ac = "/assets/leaf-top4-BUjlPdzY.webp"
  , rc = "/assets/leaf-top5-BEXNsf9Y.webp"
  , lc = "/assets/leaf-top6-rjk2XTrD.webp"
  , cc = "/assets/othernight-D0NIKU2A.webp"
  , et = "/assets/sheet-bottom-DPvgolac.webp"
  , dc = "/assets/sheet-CXPnUsUN.webp"
  , uc = "/assets/token-CTCszbdB.webp"
  , gc = "/assets/firstnight-CN7yUWuG.webp"
  , mc = "data:image/webp;base64,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"
  , hc = "/assets/leaf-orange-418HATSf.webp"
  , pc = "data:image/webp;base64,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"
  , Ac = "data:image/webp;base64,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"
  , bc = "/assets/leaf-top2-sRAyOA8-.webp"
  , fc = "/assets/leaf-top3-CBtDOqhc.webp"
  , vc = "/assets/leaf-top4-2k84E7uc.webp"
  , yc = "/assets/leaf-top5-Bc-Gdmm0.webp"
  , _c = "/assets/leaf-top6-CJMCb2p8.webp"
  , wc = "/assets/leaf-top7-BwX55vT7.webp"
  , kc = "/assets/othernight-D1vk2275.webp"
  , st = "/assets/sheet-bottom-BpeJZ1aT.webp"
  , Cc = "/assets/sheet-DG3cIEIJ.webp"
  , Sc = "/assets/token-DRfx6YVD.webp"
  , Pc = "data:image/webp;base64,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"
  , Tc = "/assets/leaf-orange-418HATSf.webp"
  , Ic = "data:image/webp;base64,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"
  , Mc = "data:image/webp;base64,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"
  , Rc = "/assets/leaf-top2-Brn4XVVn.webp"
  , Dc = "/assets/leaf-top3-D8scAOLC.webp"
  , Ec = "/assets/leaf-top4-O8IBBccu.webp"
  , Nc = "/assets/token-BeVpitSA.webp"
  , Bc = "/assets/firstnight-CCAxafk_.webp"
  , Vc = "data:image/webp;base64,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"
  , Oc = "/assets/leaf-orange-418HATSf.webp"
  , jc = "data:image/webp;base64,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"
  , Uc = "data:image/webp;base64,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"
  , Hc = "/assets/leaf-top2-CSOaDkz9.webp"
  , qc = "/assets/leaf-top3-BygOvTRs.webp"
  , Lc = "/assets/leaf-top4-Barq9aua.webp"
  , zc = "/assets/leaf-top5-Bg2URR_T.webp"
  , Gc = "/assets/othernight-CEystKCV.webp"
  , tt = "/assets/sheet-bottom-UbaLRZcD.webp"
  , Wc = "/assets/sheet-C8MRSCHO.webp"
  , Fc = "/assets/token-D8iljfum.webp"
  , Qc = "/assets/app-icon-CG9GQKA7.webp"
  , Zc = "/assets/bigwig-3vDwfauH.webp"
  , Xc = "/assets/butterfly-EBqpuH6L.webp"
  , Kc = "/assets/card-blue-kXD022m_.webp"
  , Yc = "/assets/card-brown-COX7dS9S.webp"
  , Jc = "/assets/card-green-CZ3QqHJ-.webp"
  , $c = "/assets/card-orange-CCQqfh88.webp"
  , xc = "/assets/card-purple-BzGRM6Av.webp"
  , ed = "/assets/card-red-DumJ01TW.webp"
  , sd = "/assets/clock-hour-4OZZ2IsM.webp"
  , td = "/assets/clock-minute-C8-oSdzR.webp"
  , id = "/assets/clock-second-DxRb4kLT.webp"
  , od = "/assets/clock_back-DYcKUv9A.webp"
  , nd = "/assets/clock_circle-D9aDMLwo.webp"
  , ad = "/assets/clock_cog1-BFsWJmN-.webp"
  , rd = "/assets/clock_cog2-CDec-14_.webp"
  , ld = "data:image/webp;base64,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"
  , cd = "/assets/clouds-CpjqM-gf.webp"
  , dd = "/assets/death-BHZe2Aua.webp"
  , ud = "/assets/demon-C7R1ydjC.webp"
  , gd = "data:image/webp;base64,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"
  , md = "/assets/gossip-DY4wKAxk.webp"
  , hd = "/assets/gstone-VWw9KNFF.webp"
  , pd = "/assets/life-BUG528sL.webp"
  , Ad = "data:image/webp;base64,UklGRt4EAABXRUJQVlA4WAoAAAAQAAAAHwMADAAAQUxQSMUBAAABGTVtGzDKH/6IOyhE9D8J5QpJkiQptpPVgx92/y9J0opWfBCdUsfQaZhZ86ar8kHTtJgjJsCB20iKlGW4uzTdIxD+1760rrnjyKADjvI8T61MJiszz1OeUsrzlAIQQgCJS04c6vRCvAnABwBvTLa8srLFvEBbJm8EqBBFW8L7MwAg2kFpA0FbBBBASqmIGdVInFOIUr+IaNxzlwNfyJKAAGYmgLZ8RBFEFGEIhKD4vcBkhyniI68CPVGKV4PZOw888CVhjPk8CFKmCqSoSuiKRP2wG6K2k2g4VOAiGkYV5aqsEsZQmeCXAImGk1chQ8YYMN5uUZOXnnjlmdp07rtuD3yLFgoalqIKxj9QJiI+ULmZjhR6g7RpqLtMoqhZCOq4UD0/RUU9mhcURIoWN21+kIXJqxpVoE4LRnlxBxizcNapwkwZQ5UCImNoccK95d1asogo9IYAEK1PXnmFoPZywWUXHOsANEb79o0GvU6v1+o4ouHk2slxRLKQnlKzj8B84AX/CmQMKUOxAIRXHpEiCgRAGQr2ZidtVFhKZWDnEAkYolQdTHLsQo/i/BOIfJpJLEm8IRAJvxymrHHKzGv5Efx3cQEAVlA4IPICAAAQEwCdASogAw0APm0sj0YkJ6EktRF6WPANiWdAnuBSO64FrLg0L2oDJVfEAVIP+Y91j6fqv3dAH/Hej/eK5Q8gsAhAPg+C8nSRKwHI0K9BWdDAvFqDGYW1u7+g2WF81jMf164jxu22D7T+Jj1hPzk64jxlnuDfuqxDTCuS2Fdhr0oeCvf6IRYOe4774r4my376fIsnB9QVUfW9+hgObl+3wAD+/K0cAZ48H9n6W90/oViGFeecg8fE1wINLD3TmpeFLm/teiUiOYrXpoP0kvbiic0gB7r5FI70iQdHMuRBqCMcqa2fHc63LEwwW7ZxoPKLFsHtRx5DG83eh0cBffizHo1YQ8nWRRDgYJsbkWGVkMdoRaUsjvc9x5xqSbUtjUlQxF3NIyqzAv4Fx9nOaRQfDBOxeTx7O+W1/cxM1oyDOXhdrPartSGvqbKZnmBSA6rfiO31lILB0CY0Xi8hxU/vo4Hgu+5ZuTHvynv6fW2vvANNEOwNBH4vN4n0gNbxj4ZJWZMUd84MkhtdrjXLubN5Vr0mDB12EidZG3JeU3e/6AhvTc/8ejrOeMaD9PBz9M6bgNHlwmIUjIl10iJe/2OJ8OYBn+31HFTJfKHNMG4c5M2uVsE3QTgreizE1ZplfXicfEz0RAE6ur/rkdolP0jOiCrk0XmUEUBuIu+j/ycGU95H76J2y0b6mrWq4mVYNZrb9fDHl6n0S9S9GfPCCN3afRfBxIuKwNoyKRWeXa+BVB/z/L9Ay8ltFHZPWvp+Bj1FlEP99y1cu55gKvqeNSd/iJC0TEv3+FfkxpC8qlbrSn/fQ09DlhNrkXBDsk3F1cTi84nr0LM2Kx2JrCnG9cL2oRRHKoL5Ec5w4wlHuSyNo2wrRC8S3zwA5ON8uv2BzMP9Q5MbLmR9UQjODHsVRDSsQeAS1sdWgTvSnPVXQCuFC7TtA9SWJu3sTOTlgBUwFYXDdOag5SoLYKZDhStE6BzjW+wTBpWKII5nGgguP/e2B+wA"
  , bd = "/assets/loading-dSz7mDOD.webp"
  , fd = "/assets/logo-B1iScA0C.webp"
  , vd = "/assets/night-wkWV6s70.webp"
  , yd = "data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1200'%20height='762'%20viewBox='0%200%206000%203810'%3e%3cpath%20fill='%236d2380'%20d='M0%200h6000v3810H0z'/%3e%3cpath%20fill='%232c58a4'%20d='M0%200h6000v3175H0z'/%3e%3cpath%20fill='%2378b82a'%20d='M0%200h6000v2540H0z'/%3e%3cpath%20fill='%23efe524'%20d='M0%200h6000v1905H0z'/%3e%3cpath%20fill='%23f28917'%20d='M0%200h6000v1270H0z'/%3e%3cpath%20fill='%23e22016'%20d='M0%200h6000v635H0z'/%3e%3cpath%20d='M0%200h1577l1764%201905-1764%201905H0z'/%3e%3cpath%20fill='%23945516'%20d='M0%200h1209l1764%201905-1764%201905H0z'/%3e%3cpath%20fill='%237bcce5'%20d='M0%200h844l1764%201905L844%203810H0z'/%3e%3cpath%20fill='%23f4aec8'%20d='M0%200h477l1764%201905L477%203810H0z'/%3e%3cpath%20fill='%23fff'%20d='M0%200h111l1763%201905L111%203810H0z'/%3e%3cpath%20fill='%23fdd817'%20d='m0%20278%201507%201627L0%203532z'/%3e%3ccircle%20cx='556'%20cy='1905'%20r='404'%20fill='none'%20stroke='%2366338b'%20stroke-width='95'/%3e%3c/svg%3e"
  , _d = "/assets/puck-D7lu7Al4.webp"
  , wd = "data:image/webp;base64,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"
  , kd = "/assets/sb-DN76BlRu.webp"
  , Cd = "/assets/shroud-VicSzD1a.webp"
  , Sd = "/assets/towninfo-DYodGRbv.webp"
  , Pd = "/assets/tpi-CjLIf2nx.webp"
  , Td = "/assets/traveller-cKw3P72F.webp"
  , Id = "/assets/vote-CIIY1W5t.webp"
  , Ta = {
    components: {
        Tab: je
    },
    inject: ["renderReminderHTML"],
    computed: {
        ...M(["roles", "rolesAvailable", "edition", "grimoire", "session", "positions", "settings", "definitions"]),
        ...M("players", ["players", "npcs", "storytellers"]),
        ...M("user", ["user"]),
        ...D(["roleIconURL"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess"]),
        ...D("players", ["playerName"]),
        ...D("game", ["isNight"]),
        rolesFirstNight() {
            const e = [{
                role: this.$store.getters.specialRoles.dusk
            }, {
                role: this.$store.getters.specialRoles.dawn
            }];
            return (this.players.length > 6 || this.npcs.some(s => s.id === "toymaker")) && !this.npcs.some(s => s.id === "tor") && e.push({
                role: this.$store.getters.specialRoles.minioninfo,
                players: this.players.filter(s => s.role.team === "minion")
            }, {
                role: this.$store.getters.specialRoles.demoninfo,
                players: this.players.filter(s => s.role.team === "demon")
            }),
            this.roles.forEach(s => {
                const t = [...this.storytellers.filter(n => n.role.id === s.id), ...this.players.filter(n => n.role.id === s.id)];
                s.id && s.firstNight && this.definitions.PLAYER_TEAMS.includes(s.team) && (s.team !== "traveller" || t.length) && e.push({
                    role: s,
                    players: t
                })
            }
            ),
            this.players.forEach(s => {
                var t, n;
                !this.roles.has(s.role.id) && ((t = s.role) == null ? void 0 : t.team) === "traveller" && ((n = s.role) != null && n.firstNight) && e.push({
                    role: s.role,
                    players: [s]
                })
            }
            ),
            this.npcs.filter( ({firstNight: s}) => s).forEach(s => {
                e.push({
                    role: s,
                    players: this.players.filter(t => t.reminders.some(n => n.role === s.id))
                })
            }
            ),
            e.sort( (s, t) => {
                var n, o;
                return ((n = this.edition.firstNight) != null && n.includes(s.role.id) ? this.edition.firstNight.indexOf(s.role.id) : s.role.firstNight - 1) - ((o = this.edition.firstNight) != null && o.includes(t.role.id) ? this.edition.firstNight.indexOf(t.role.id) : t.role.firstNight - 1)
            }
            ),
            e
        },
        rolesOtherNight() {
            const e = [{
                role: this.$store.getters.specialRoles.dusk
            }, {
                role: this.$store.getters.specialRoles.dawn
            }];
            return this.roles.forEach(s => {
                const t = [...this.storytellers.filter(n => n.role.id === s.id), ...this.players.filter(n => n.role.id === s.id)];
                [{
                    role: "cannibal",
                    reminder: "lunch"
                }, {
                    role: "pixie",
                    reminder: "has ability"
                }].forEach( ({role: n, reminder: o}) => {
                    const i = this.players.filter(l => {
                        var g;
                        return ((g = l.role) == null ? void 0 : g.id) === n
                    }
                    );
                    i.length && t.some(l => l.reminders.some(g => g.role === n && g.name.match(RegExp(o, "i")))) && t.push(...i)
                }
                ),
                s.otherNight && this.definitions.PLAYER_TEAMS.includes(s.team) && (s.team !== "traveller" || t.length) && e.push({
                    role: s,
                    players: t
                })
            }
            ),
            this.players.forEach(s => {
                var t, n;
                !this.roles.has(s.role.id) && ((t = s.role) == null ? void 0 : t.team) === "traveller" && ((n = s.role) != null && n.otherNight) && e.push({
                    role: s.role,
                    players: [s]
                })
            }
            ),
            this.npcs.filter( ({otherNight: s}) => s).forEach(s => {
                e.push({
                    role: s,
                    players: this.players.filter(t => t.reminders.some(n => n.role === s.id))
                })
            }
            ),
            e.sort( (s, t) => {
                var n, o;
                return ((n = this.edition.otherNight) != null && n.includes(s.role.id) ? this.edition.otherNight.indexOf(s.role.id) : s.role.otherNight - 1) - ((o = this.edition.otherNight) != null && o.includes(t.role.id) ? this.edition.otherNight.indexOf(t.role.id) : t.role.otherNight - 1)
            }
            ),
            e
        },
        sheetLogo() {
            return new URL(Object.assign({
                "/src/assets/editions/bmr/logo-sheet.webp": Me,
                "/src/assets/editions/custom/logo-sheet.webp": Re,
                "/src/assets/editions/homebrew/logo-sheet.webp": De,
                "/src/assets/editions/snv/logo-sheet.webp": Ee,
                "/src/assets/editions/tb/logo-sheet.webp": Ne
            })[`/src/assets/editions/${this.edition.id}/logo-sheet.webp`],import.meta.url).href
        }
    },
    data() {
        return {
            tokensFirst: {},
            tokensOther: {},
            zoom: parseInt(localStorage.getItem("night-zoom"), 10) || 0
        }
    },
    methods: {
        ...U(["setRightSideTabState", "toggleModal", "setPosition"]),
        setZoom(e) {
            e && (this.zoom = Math.min(Math.max(-3, this.zoom + e), 1),
            this.zoom ? localStorage.setItem("night-zoom", String(this.zoom)) : localStorage.removeItem("night-zoom"))
        },
        toggleSheet(e) {
            const s = e === "firstnight" ? "othernight" : "firstnight"
              , t = this.positions[e];
            t.hidden = !0;
            const n = Object.assign({}, this.positions[e]);
            n.hidden = !1,
            this.$store.commit("setPosition", {
                name: e,
                value: t
            }),
            this.$store.commit("setPosition", {
                name: s,
                value: n
            }),
            this.grimoire.rightSideTabState.match(new RegExp(`^${s}-`)) && this.$store.commit("setRightSideTabState", "")
        },
        bgImage(e, s=!0) {
            if (this.edition.id)
                return s ? "url(" + new URL(Object.assign({
                    "/src/assets/editions/bmr/background1.webp": Dn,
                    "/src/assets/editions/bmr/background1t.webp": xe,
                    "/src/assets/editions/bmr/background2.webp": En,
                    "/src/assets/editions/bmr/background2t.webp": es,
                    "/src/assets/editions/bmr/background3.webp": Nn,
                    "/src/assets/editions/bmr/background3t.webp": ss,
                    "/src/assets/editions/bmr/background4.webp": Bn,
                    "/src/assets/editions/bmr/background4t.webp": ts,
                    "/src/assets/editions/bmr/background5.webp": Vn,
                    "/src/assets/editions/bmr/background5t.webp": is,
                    "/src/assets/editions/bmr/background6.webp": On,
                    "/src/assets/editions/bmr/background6t.webp": os,
                    "/src/assets/editions/bmr/firstnight.webp": Il,
                    "/src/assets/editions/bmr/leaf-left.webp": Ml,
                    "/src/assets/editions/bmr/leaf-orange.webp": Rl,
                    "/src/assets/editions/bmr/leaf-right.webp": Dl,
                    "/src/assets/editions/bmr/leaf-top1.webp": El,
                    "/src/assets/editions/bmr/leaf-top2.webp": Nl,
                    "/src/assets/editions/bmr/leaf-top3.webp": Bl,
                    "/src/assets/editions/bmr/leaf-top4.webp": Vl,
                    "/src/assets/editions/bmr/leaf-top5.webp": Ol,
                    "/src/assets/editions/bmr/logo-active.webp": ha,
                    "/src/assets/editions/bmr/logo-sheet.webp": Me,
                    "/src/assets/editions/bmr/logo.webp": pa,
                    "/src/assets/editions/bmr/othernight.webp": jl,
                    "/src/assets/editions/bmr/sheet-bottom.webp": $s,
                    "/src/assets/editions/bmr/sheet.webp": Ul,
                    "/src/assets/editions/bmr/skull.webp": Is,
                    "/src/assets/editions/bmr/token.webp": Hl,
                    "/src/assets/editions/custom/background1.webp": jn,
                    "/src/assets/editions/custom/background1t.webp": ns,
                    "/src/assets/editions/custom/background2.webp": Un,
                    "/src/assets/editions/custom/background2t.webp": as,
                    "/src/assets/editions/custom/background3.webp": Hn,
                    "/src/assets/editions/custom/background3t.webp": rs,
                    "/src/assets/editions/custom/background4.webp": qn,
                    "/src/assets/editions/custom/background4t.webp": ls,
                    "/src/assets/editions/custom/background5.webp": Ln,
                    "/src/assets/editions/custom/background5t.webp": cs,
                    "/src/assets/editions/custom/background6.webp": zn,
                    "/src/assets/editions/custom/background6t.webp": ds,
                    "/src/assets/editions/custom/background7.webp": Gn,
                    "/src/assets/editions/custom/background7t.webp": us,
                    "/src/assets/editions/custom/background8.webp": Wn,
                    "/src/assets/editions/custom/background8t.webp": gs,
                    "/src/assets/editions/custom/firstnight.webp": ql,
                    "/src/assets/editions/custom/leaf-left.webp": Ll,
                    "/src/assets/editions/custom/leaf-orange.webp": zl,
                    "/src/assets/editions/custom/leaf-right.webp": Gl,
                    "/src/assets/editions/custom/leaf-top1.webp": Wl,
                    "/src/assets/editions/custom/leaf-top2.webp": Fl,
                    "/src/assets/editions/custom/leaf-top3.webp": Ql,
                    "/src/assets/editions/custom/leaf-top4.webp": Zl,
                    "/src/assets/editions/custom/leaf-top5.webp": Xl,
                    "/src/assets/editions/custom/leaf-top6.webp": Kl,
                    "/src/assets/editions/custom/logo-active.webp": Aa,
                    "/src/assets/editions/custom/logo-label.webp": ba,
                    "/src/assets/editions/custom/logo-sheet.webp": Re,
                    "/src/assets/editions/custom/logo.webp": fa,
                    "/src/assets/editions/custom/othernight.webp": Yl,
                    "/src/assets/editions/custom/sheet-bottom.webp": xs,
                    "/src/assets/editions/custom/sheet.webp": Jl,
                    "/src/assets/editions/custom/skull.webp": Ms,
                    "/src/assets/editions/custom/token.webp": $l,
                    "/src/assets/editions/homebrew/firstnight.webp": xl,
                    "/src/assets/editions/homebrew/leaf-left.webp": ec,
                    "/src/assets/editions/homebrew/leaf-orange.webp": sc,
                    "/src/assets/editions/homebrew/leaf-right.webp": tc,
                    "/src/assets/editions/homebrew/leaf-top1.webp": ic,
                    "/src/assets/editions/homebrew/leaf-top2.webp": oc,
                    "/src/assets/editions/homebrew/leaf-top3.webp": nc,
                    "/src/assets/editions/homebrew/leaf-top4.webp": ac,
                    "/src/assets/editions/homebrew/leaf-top5.webp": rc,
                    "/src/assets/editions/homebrew/leaf-top6.webp": lc,
                    "/src/assets/editions/homebrew/logo-label.webp": va,
                    "/src/assets/editions/homebrew/logo-sheet.webp": De,
                    "/src/assets/editions/homebrew/othernight.webp": cc,
                    "/src/assets/editions/homebrew/sheet-bottom.webp": et,
                    "/src/assets/editions/homebrew/sheet.webp": dc,
                    "/src/assets/editions/homebrew/skull.webp": Rs,
                    "/src/assets/editions/homebrew/token.webp": uc,
                    "/src/assets/editions/snv/background1.webp": Fn,
                    "/src/assets/editions/snv/background1t.webp": ms,
                    "/src/assets/editions/snv/background2.webp": Qn,
                    "/src/assets/editions/snv/background2t.webp": hs,
                    "/src/assets/editions/snv/background3.webp": Zn,
                    "/src/assets/editions/snv/background3t.webp": ps,
                    "/src/assets/editions/snv/background4.webp": Xn,
                    "/src/assets/editions/snv/background4t.webp": As,
                    "/src/assets/editions/snv/background5.webp": Kn,
                    "/src/assets/editions/snv/background5t.webp": bs,
                    "/src/assets/editions/snv/background6.webp": Yn,
                    "/src/assets/editions/snv/background6t.webp": fs,
                    "/src/assets/editions/snv/firstnight.webp": gc,
                    "/src/assets/editions/snv/leaf-left.webp": mc,
                    "/src/assets/editions/snv/leaf-orange.webp": hc,
                    "/src/assets/editions/snv/leaf-right.webp": pc,
                    "/src/assets/editions/snv/leaf-top1.webp": Ac,
                    "/src/assets/editions/snv/leaf-top2.webp": bc,
                    "/src/assets/editions/snv/leaf-top3.webp": fc,
                    "/src/assets/editions/snv/leaf-top4.webp": vc,
                    "/src/assets/editions/snv/leaf-top5.webp": yc,
                    "/src/assets/editions/snv/leaf-top6.webp": _c,
                    "/src/assets/editions/snv/leaf-top7.webp": wc,
                    "/src/assets/editions/snv/logo-active.webp": ya,
                    "/src/assets/editions/snv/logo-sheet.webp": Ee,
                    "/src/assets/editions/snv/logo.webp": _a,
                    "/src/assets/editions/snv/othernight.webp": kc,
                    "/src/assets/editions/snv/sheet-bottom.webp": st,
                    "/src/assets/editions/snv/sheet.webp": Cc,
                    "/src/assets/editions/snv/skull.webp": Ds,
                    "/src/assets/editions/snv/token.webp": Sc,
                    "/src/assets/editions/taf/leaf-left.webp": Pc,
                    "/src/assets/editions/taf/leaf-orange.webp": Tc,
                    "/src/assets/editions/taf/leaf-right.webp": Ic,
                    "/src/assets/editions/taf/leaf-top1.webp": Mc,
                    "/src/assets/editions/taf/leaf-top2.webp": Rc,
                    "/src/assets/editions/taf/leaf-top3.webp": Dc,
                    "/src/assets/editions/taf/leaf-top4.webp": Ec,
                    "/src/assets/editions/taf/logo.webp": wa,
                    "/src/assets/editions/taf/token.webp": Nc,
                    "/src/assets/editions/tb/background1.webp": Jn,
                    "/src/assets/editions/tb/background1t.webp": vs,
                    "/src/assets/editions/tb/background2.webp": $n,
                    "/src/assets/editions/tb/background2t.webp": ys,
                    "/src/assets/editions/tb/background3.webp": xn,
                    "/src/assets/editions/tb/background3t.webp": _s,
                    "/src/assets/editions/tb/background4.webp": ea,
                    "/src/assets/editions/tb/background4t.webp": ws,
                    "/src/assets/editions/tb/background5.webp": sa,
                    "/src/assets/editions/tb/background5t.webp": ks,
                    "/src/assets/editions/tb/background6.webp": ta,
                    "/src/assets/editions/tb/background6t.webp": Cs,
                    "/src/assets/editions/tb/firstnight.webp": Bc,
                    "/src/assets/editions/tb/leaf-left.webp": Vc,
                    "/src/assets/editions/tb/leaf-orange.webp": Oc,
                    "/src/assets/editions/tb/leaf-right.webp": jc,
                    "/src/assets/editions/tb/leaf-top1.webp": Uc,
                    "/src/assets/editions/tb/leaf-top2.webp": Hc,
                    "/src/assets/editions/tb/leaf-top3.webp": qc,
                    "/src/assets/editions/tb/leaf-top4.webp": Lc,
                    "/src/assets/editions/tb/leaf-top5.webp": zc,
                    "/src/assets/editions/tb/logo-active.webp": ka,
                    "/src/assets/editions/tb/logo-sheet.webp": Ne,
                    "/src/assets/editions/tb/logo.webp": Ca,
                    "/src/assets/editions/tb/othernight.webp": Gc,
                    "/src/assets/editions/tb/sheet-bottom.webp": tt,
                    "/src/assets/editions/tb/sheet.webp": Wc,
                    "/src/assets/editions/tb/skull.webp": Es,
                    "/src/assets/editions/tb/token.webp": Fc
                })[`/src/assets/editions/${this.edition.id}/${e}`],import.meta.url).href + ")" : "url(" + new URL(Object.assign({
                    "/src/assets/app-icon.webp": Qc,
                    "/src/assets/background.webp": ia,
                    "/src/assets/background1.webp": oa,
                    "/src/assets/background1t.webp": Ss,
                    "/src/assets/background2.webp": na,
                    "/src/assets/background2t.webp": Ps,
                    "/src/assets/background3.webp": aa,
                    "/src/assets/background3t.webp": Ts,
                    "/src/assets/bigwig.webp": Zc,
                    "/src/assets/butterfly.webp": Xc,
                    "/src/assets/card-blue.webp": Kc,
                    "/src/assets/card-brown.webp": Yc,
                    "/src/assets/card-green.webp": Jc,
                    "/src/assets/card-orange.webp": $c,
                    "/src/assets/card-purple.webp": xc,
                    "/src/assets/card-red.webp": ed,
                    "/src/assets/clock-hour.webp": sd,
                    "/src/assets/clock-minute.webp": td,
                    "/src/assets/clock-second.webp": id,
                    "/src/assets/clock_back.webp": od,
                    "/src/assets/clock_circle.webp": nd,
                    "/src/assets/clock_cog1.webp": ad,
                    "/src/assets/clock_cog2.webp": rd,
                    "/src/assets/clock_cogcap.webp": ld,
                    "/src/assets/clouds.webp": cd,
                    "/src/assets/death.webp": dd,
                    "/src/assets/demon.webp": ud,
                    "/src/assets/gavel.webp": gd,
                    "/src/assets/gossip.webp": md,
                    "/src/assets/gstone.webp": hd,
                    "/src/assets/life.webp": pd,
                    "/src/assets/line.webp": Ad,
                    "/src/assets/loading.webp": bd,
                    "/src/assets/logo.webp": fd,
                    "/src/assets/night.webp": vd,
                    "/src/assets/progress.svg": yd,
                    "/src/assets/puck.webp": _d,
                    "/src/assets/reminder.webp": wd,
                    "/src/assets/sb.webp": kd,
                    "/src/assets/shroud.webp": Cd,
                    "/src/assets/towninfo.webp": Sd,
                    "/src/assets/tpi.webp": Pd,
                    "/src/assets/traveller.webp": Td,
                    "/src/assets/vote.webp": Id
                })[`/src/assets/${e}`],import.meta.url).href + ")"
        },
        sheetImage() {
            if (this.edition.id)
                return new URL(Object.assign({
                    "/src/assets/editions/bmr/logo-sheet.webp": Me,
                    "/src/assets/editions/custom/logo-sheet.webp": Re,
                    "/src/assets/editions/homebrew/logo-sheet.webp": De,
                    "/src/assets/editions/snv/logo-sheet.webp": Ee,
                    "/src/assets/editions/tb/logo-sheet.webp": Ne
                })[`/src/assets/editions/${this.edition.id}/logo-sheet.webp`],import.meta.url).href
        },
        toggleTab(e, s=!1) {
            if (this.positions[e] && !s)
                return;
            const {rightSideTabState: t} = this.$store.state.grimoire;
            if (this.positions[e])
                if (this.settings.general.isPositioningDisabled) {
                    const n = this.positions[e];
                    n.hidden = !n.hidden,
                    this.setPosition({
                        name: e,
                        value: n
                    })
                } else
                    this.setPosition({
                        name: e
                    }),
                    this.setRightSideTabState(e + "-mid");
            else
                t === e + "-open" ? this.setRightSideTabState("") : t === e + "-mid" ? this.setRightSideTabState(e + "-open") : this.setRightSideTabState(e + "-mid")
        },
        closeTab(e) {
            this.grimoire.rightSideTabState === e + "-open" && this.$store.commit("setRightSideTabState", "")
        },
        dragOut(e) {
            const {left: s, top: t} = this.$refs[e].getBoundingClientRect();
            this.setPosition({
                name: e,
                value: {
                    x: Math.round(s != null ? s : 0) + "px",
                    y: Math.round(t != null ? t : 0) + "px"
                }
            }),
            this.closeTab(e)
        },
        wake(e) {
            !this.isNight || !this.isStoryteller || this.storytellers.includes(e) || this.toggleModal({
                name: "signal",
                params: {
                    player: e
                }
            })
        }
    },
    watch: {
        "grimoire.mode"(e) {
            e === "firstnight" && !this.positions.firstnight && this.setRightSideTabState("firstnight-mid")
        },
        "session.hook"(e) {
            e.name === "distribute-roles" && (this.tokensFirst = {},
            this.tokensOther = {})
        }
    }
}
  , Jr = () => {
    he(e => ({
        v126d8463: e.zoom
    }))
}
  , $r = Ta.setup;
Ta.setup = $r ? (e, s) => (Jr(),
$r(e, s)) : Jr;
const IS = ["onClick"]
  , MS = {
    class: "name"
}
  , RS = ["onClick"]
  , DS = ["innerHTML"]
  , ES = ["src"]
  , NS = {
    class: "button-group"
}
  , BS = ["title"]
  , VS = ["title"]
  , OS = ["onClick"]
  , jS = {
    class: "name"
}
  , US = ["onClick"]
  , HS = ["innerHTML"]
  , qS = ["src"]
  , LS = {
    class: "button-group"
}
  , zS = ["title"]
  , GS = ["title"];
function WS(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("Tab");
    return r(),
    u(y, null, [(e.hasGrimoireAccess || e.settings.game.isPlayerNightOrder) && e.edition.id ? (r(),
    u("aside", qs({
        key: 0
    }, e.$attrs, {
        class: ["night-order other tab", {
            open: e.grimoire.rightSideTabState === "othernight-open",
            mid: e.grimoire.rightSideTabState === "othernight-mid",
            positioned: e.positions.othernight && !e.positions.othernight.hidden
        }],
        ref: "othernight"
    }), [a("div", {
        class: "label",
        role: "heading",
        onClick: s[0] || (s[0] = d => i.toggleTab("othernight", !0))
    }, c(e.$t("grimoire.phases.other_nights")), 1), b(g, {
        name: "othernight",
        onClick: s[5] || (s[5] = d => i.toggleTab("othernight")),
        onDragged: s[6] || (s[6] = d => i.closeTab("othernight")),
        "is-draggable": e.grimoire.rightSideTabState === "othernight-open",
        style: q({
            backgroundImage: i.bgImage("sheet.webp")
        })
    }, {
        footer: T( () => [a("div", NS, [e.positions.othernight ? (r(),
        u("div", {
            key: 1,
            onClick: s[2] || (s[2] = R(d => i.toggleSheet("othernight"), ["stop"])),
            class: "button secondary",
            title: e.$t("tabs.night.toggle")
        }, [v(c(e.$t("grimoire.phases.other_nights")) + " ", 1), b(l, {
            icon: "cloud-moon"
        })], 8, VS)) : (r(),
        u("div", {
            key: 0,
            class: "button",
            onClick: s[1] || (s[1] = R(d => i.dragOut("othernight"), ["stop"])),
            title: e.$t("tabs.night.popout")
        }, [b(l, {
            icon: "window-restore"
        })], 8, BS)), e.positions.othernight ? (r(),
        u(y, {
            key: 2
        }, [a("div", {
            class: _([{
                disabled: o.zoom <= -3
            }, "button zoom"]),
            onClick: s[3] || (s[3] = R(d => i.setZoom(-1), ["stop"]))
        }, [b(l, {
            icon: "magnifying-glass-minus"
        })], 2), a("div", {
            class: _([{
                disabled: o.zoom >= 1
            }, "button zoom"]),
            onClick: s[4] || (s[4] = R(d => i.setZoom(1), ["stop"]))
        }, [b(l, {
            icon: "magnifying-glass-plus"
        })], 2)], 64)) : A("", !0)])]),
        default: T( () => [a("ul", {
            style: q({
                backgroundImage: i.bgImage("othernight.webp")
            })
        }, [(r(!0),
        u(y, null, N(i.rolesOtherNight, ({role: d, players: h=[]}) => {
            var m;
            return r(),
            u("li", {
                key: d.id,
                class: _(["team-" + ((m = d.team) != null ? m : "special"), "role-" + d.id])
            }, [a("span", {
                class: _(["token", {
                    visible: o.tokensOther[d.id] === void 0 ? h.length || e.definitions.NPC_TEAMS.includes(d.team) : o.tokensOther[d.id]
                }]),
                onClick: R(p => o.tokensOther[d.id] = o.tokensOther[d.id] === void 0 ? !(h.length || e.definitions.NPC_TEAMS.includes(d.team)) : !o.tokensOther[d.id], ["stop"])
            }, null, 10, IS), a("span", {
                class: "icon",
                style: q({
                    backgroundImage: d.team ? `url(${e.roleIconURL(d)})` : null
                })
            }, null, 4), a("span", MS, [v(c(e.$te(`roles.${d.id}.name`) ? e.$t(`roles.${d.id}.name`) : d.name), 1), s[14] || (s[14] = a("br", null, null, -1)), (r(!0),
            u(y, null, N(h, (p, f) => (r(),
            u("small", {
                key: f,
                class: _({
                    dead: p.isDead
                }),
                onClick: R(P => i.wake(p), ["stop"])
            }, [e.isNight && !e.storytellers.includes(p) && e.isStoryteller ? (r(),
            C(l, {
                key: 0,
                icon: "eye"
            })) : A("", !0), v(" " + c(e.$t(...e.playerName(p))), 1)], 10, RS))), 128))]), d.otherNightReminder ? (r(),
            u("span", {
                key: 0,
                class: "reminder",
                innerHTML: i.renderReminderHTML(e.$te(`roles.${d.id}.other`) ? e.$t(`roles.${d.id}.other`) : d.otherNightReminder)
            }, null, 8, DS)) : A("", !0)], 2)
        }
        ), 128))], 4), a("img", {
            src: i.sheetLogo,
            alt: "Logo",
            class: "logo"
        }, null, 8, ES)]),
        _: 1
    }, 8, ["is-draggable", "style"])], 16)) : A("", !0), (e.hasGrimoireAccess || e.settings.game.isPlayerNightOrder) && e.edition.id ? (r(),
    u("aside", qs({
        key: 1
    }, e.$attrs, {
        class: ["night-order first tab", {
            open: e.grimoire.rightSideTabState === "firstnight-open",
            mid: e.grimoire.rightSideTabState === "firstnight-mid",
            positioned: e.positions.firstnight && !e.positions.firstnight.hidden
        }],
        ref: "firstnight"
    }), [a("div", {
        class: "label",
        role: "heading",
        onClick: s[7] || (s[7] = d => i.toggleTab("firstnight", !0))
    }, c(e.$t("grimoire.phases.first_night")), 1), b(g, {
        name: "firstnight",
        onClick: s[12] || (s[12] = d => i.toggleTab("firstnight")),
        onDragged: s[13] || (s[13] = d => i.closeTab("firstnight")),
        "is-draggable": e.grimoire.rightSideTabState === "firstnight-open",
        style: q({
            backgroundImage: i.bgImage("sheet.webp")
        })
    }, {
        footer: T( () => [a("div", LS, [e.positions.firstnight ? (r(),
        u("div", {
            key: 1,
            onClick: s[9] || (s[9] = R(d => i.toggleSheet("firstnight"), ["stop"])),
            class: "button primary",
            title: e.$t("tabs.night.toggle")
        }, [v(c(e.$t("grimoire.phases.first_night")) + " ", 1), b(l, {
            icon: "cloud-moon"
        })], 8, GS)) : (r(),
        u("div", {
            key: 0,
            class: "button",
            onClick: s[8] || (s[8] = R(d => i.dragOut("firstnight"), ["stop"])),
            title: e.$t("tabs.night.popout")
        }, [b(l, {
            icon: "window-restore"
        })], 8, zS)), e.positions.firstnight ? (r(),
        u(y, {
            key: 2
        }, [a("div", {
            class: _([{
                disabled: o.zoom <= -3
            }, "button zoom"]),
            onClick: s[10] || (s[10] = R(d => i.setZoom(-1), ["stop"]))
        }, [b(l, {
            icon: "magnifying-glass-minus"
        })], 2), a("div", {
            class: _([{
                disabled: o.zoom >= 1
            }, "button zoom"]),
            onClick: s[11] || (s[11] = R(d => i.setZoom(1), ["stop"]))
        }, [b(l, {
            icon: "magnifying-glass-plus"
        })], 2)], 64)) : A("", !0)])]),
        default: T( () => [a("ul", {
            style: q({
                backgroundImage: i.bgImage("firstnight.webp")
            })
        }, [(r(!0),
        u(y, null, N(i.rolesFirstNight, ({role: d, players: h=[]}) => {
            var m;
            return r(),
            u("li", {
                key: d.id,
                class: _(["team-" + ((m = d.team) != null ? m : "special"), "role-" + d.id])
            }, [a("span", {
                class: _(["token", {
                    visible: o.tokensFirst[d.id] === void 0 ? h.length || e.definitions.NPC_TEAMS.includes(d.team) : o.tokensFirst[d.id]
                }]),
                onClick: R(p => o.tokensFirst[d.id] = o.tokensFirst[d.id] === void 0 ? !(h.length || e.definitions.NPC_TEAMS.includes(d.team)) : !o.tokensFirst[d.id], ["stop"])
            }, null, 10, OS), a("span", {
                class: "icon",
                style: q({
                    backgroundImage: d.team ? `url(${e.roleIconURL(d)})` : null
                })
            }, null, 4), a("span", jS, [v(c(e.$te(`roles.${d.id}.name`) ? e.$t(`roles.${d.id}.name`) : d.name), 1), s[15] || (s[15] = a("br", null, null, -1)), (r(!0),
            u(y, null, N(h, (p, f) => (r(),
            u("small", {
                key: f,
                class: _({
                    dead: p.isDead
                }),
                onClick: R(P => i.wake(p), ["stop"])
            }, [e.isNight && !e.storytellers.includes(p) && e.isStoryteller ? (r(),
            C(l, {
                key: 0,
                icon: "eye"
            })) : A("", !0), v(" " + c(e.$t(...e.playerName(p))), 1)], 10, US))), 128))]), d.firstNightReminder ? (r(),
            u("span", {
                key: 0,
                class: "reminder",
                innerHTML: i.renderReminderHTML(e.$te(`roles.${d.id}.first`) ? e.$t(`roles.${d.id}.first`) : d.firstNightReminder)
            }, null, 8, HS)) : A("", !0)], 2)
        }
        ), 128))], 4), a("img", {
            src: i.sheetImage(),
            alt: "",
            class: "logo"
        }, null, 8, qS)]),
        _: 1
    }, 8, ["is-draggable", "style"])], 16)) : A("", !0)], 64)
}
const FS = O(Ta, [["render", WS], ["__scopeId", "data-v-43749579"]])
  , Ia = {
    components: {
        Tab: je
    },
    inject: ["isApp"],
    computed: {
        ...M(["roles", "edition", "grimoire", "settings", "definitions", "positions"]),
        ...M("players", ["npcs"]),
        ...D(["roleIconURL"]),
        jinxes() {
            const e = [];
            return this.roles.forEach(s => {
                s.jinxes && s.jinxes.length && s.jinxes.forEach( ({id: t, reason: n}) => {
                    this.roles.get(t) && e.push({
                        id: [t, s.id].sort( (o, i) => o.localeCompare(i)).join("-"),
                        first: s,
                        second: this.roles.get(t),
                        reason: n
                    })
                }
                )
            }
            ),
            e
        },
        rolesGrouped() {
            const e = {};
            return this.roles.forEach(s => {
                e[s.team] || (e[s.team] = []),
                e[s.team].push(s)
            }
            ),
            this.definitions.NPC_TEAMS.forEach(s => delete e[s]),
            delete e.traveller,
            e
        },
        sheetLogo() {
            return new URL(Object.assign({
                "/src/assets/editions/bmr/logo-sheet.webp": Me,
                "/src/assets/editions/custom/logo-sheet.webp": Re,
                "/src/assets/editions/homebrew/logo-sheet.webp": De,
                "/src/assets/editions/snv/logo-sheet.webp": Ee,
                "/src/assets/editions/tb/logo-sheet.webp": Ne
            })[`/src/assets/editions/${this.edition.id}/logo-sheet.webp`],import.meta.url).href
        },
        sheetImage() {
            if (this.edition.id)
                return new URL(Object.assign({
                    "/src/assets/editions/bmr/sheet-bottom.webp": $s,
                    "/src/assets/editions/custom/sheet-bottom.webp": xs,
                    "/src/assets/editions/homebrew/sheet-bottom.webp": et,
                    "/src/assets/editions/snv/sheet-bottom.webp": st,
                    "/src/assets/editions/tb/sheet-bottom.webp": tt
                })[`/src/assets/editions/${this.edition.id}/sheet-bottom.webp`],import.meta.url).href
        }
    },
    data() {
        return {
            wikiURL: "https://wiki.bloodontheclocktower.com/",
            hasDPIPSupport: "documentPictureInPicture"in window,
            isPoppedOut: !1,
            pipWindow: null,
            zoom: parseInt(localStorage.getItem("character-zoom"), 10) || 0
        }
    },
    methods: {
        ...U(["setPosition"]),
        async downloadScript() {
            const e = this.$store.getters.editionExport
              , s = JSON.stringify([{
                ...e.edition,
                id: "_meta"
            }, ...e.roles.filter( ({team: g}) => !this.definitions.NPC_TEAMS.includes(g)), ...e.npcs.filter(g => !["bootlegger", "djinn"].includes(g.id))], void 0, 2)
              , t = new Blob([s],{
                type: "application/json"
            }).stream()
              , o = await (await new Response(t.pipeThrough(new CompressionStream("gzip"))).blob()).arrayBuffer()
              , i = window.btoa(String.fromCharCode(...new Uint8Array(o)))
              , l = `https://script.bloodontheclocktower.com/?script=${encodeURIComponent(i)}`;
            try {
                window.open(l, "_blank")
            } catch (g) {
                this.$store.dispatch("showError", ["tabs.character.error_save", g])
            }
        },
        dragOut() {
            const {left: e, top: s} = this.$refs.sheet.getBoundingClientRect();
            this.setPosition({
                name: "character",
                value: {
                    x: Math.round(e != null ? e : 0) + "px",
                    y: Math.round(s != null ? s : 0) + "px"
                }
            })
        },
        async popOut() {
            if (!this.hasDPIPSupport || window.documentPictureInPicture.window)
                return;
            const e = this.$refs.sheet.querySelector(".container");
            try {
                this.pipWindow = await window.documentPictureInPicture.requestWindow({
                    width: this.$refs.sheet.clientWidth,
                    height: this.$refs.sheet.clientHeight + 200
                }),
                this.closeTab(),
                [...document.styleSheets].forEach(s => {
                    try {
                        const t = [...s.cssRules].map(o => o.cssText).join("")
                          , n = document.createElement("style");
                        n.textContent = t,
                        this.pipWindow.document.head.appendChild(n)
                    } catch {
                        const n = document.createElement("link");
                        n.rel = "stylesheet",
                        n.type = s.type,
                        n.media = s.media,
                        n.href = s.href,
                        this.pipWindow.document.head.appendChild(n)
                    }
                }
                ),
                this.pipWindow.document.body.classList.add("picture-in-picture"),
                this.pipWindow.document.body.append(e),
                this.pipWindow.document.title = "character",
                this.pipWindow.document.documentElement.lang = document.documentElement.lang,
                this.isPoppedOut = !0,
                this.setZoom(),
                this.pipWindow.addEventListener("pagehide", () => {
                    var s;
                    this.isPoppedOut = !1,
                    (s = this.$refs.sheet) == null || s.append(e),
                    this.pipWindow = null
                }
                )
            } catch (s) {
                this.$store.dispatch("showError", ["tabs.character.error_popout", String(s)])
            }
        },
        setZoom(e) {
            e && (this.zoom = Math.min(Math.max(-3, this.zoom + e), 0),
            this.zoom ? localStorage.setItem("character-zoom", String(this.zoom)) : localStorage.removeItem("character-zoom")),
            this.pipWindow && this.pipWindow.document.body.style.setProperty("--sheet-zoom", this.zoom)
        },
        bgImage(e, s=!0) {
            return s ? "url(" + new URL(Object.assign({
                "/src/assets/editions/bmr/background1.webp": Dn,
                "/src/assets/editions/bmr/background1t.webp": xe,
                "/src/assets/editions/bmr/background2.webp": En,
                "/src/assets/editions/bmr/background2t.webp": es,
                "/src/assets/editions/bmr/background3.webp": Nn,
                "/src/assets/editions/bmr/background3t.webp": ss,
                "/src/assets/editions/bmr/background4.webp": Bn,
                "/src/assets/editions/bmr/background4t.webp": ts,
                "/src/assets/editions/bmr/background5.webp": Vn,
                "/src/assets/editions/bmr/background5t.webp": is,
                "/src/assets/editions/bmr/background6.webp": On,
                "/src/assets/editions/bmr/background6t.webp": os,
                "/src/assets/editions/bmr/firstnight.webp": Il,
                "/src/assets/editions/bmr/leaf-left.webp": Ml,
                "/src/assets/editions/bmr/leaf-orange.webp": Rl,
                "/src/assets/editions/bmr/leaf-right.webp": Dl,
                "/src/assets/editions/bmr/leaf-top1.webp": El,
                "/src/assets/editions/bmr/leaf-top2.webp": Nl,
                "/src/assets/editions/bmr/leaf-top3.webp": Bl,
                "/src/assets/editions/bmr/leaf-top4.webp": Vl,
                "/src/assets/editions/bmr/leaf-top5.webp": Ol,
                "/src/assets/editions/bmr/logo-active.webp": ha,
                "/src/assets/editions/bmr/logo-sheet.webp": Me,
                "/src/assets/editions/bmr/logo.webp": pa,
                "/src/assets/editions/bmr/othernight.webp": jl,
                "/src/assets/editions/bmr/sheet-bottom.webp": $s,
                "/src/assets/editions/bmr/sheet.webp": Ul,
                "/src/assets/editions/bmr/skull.webp": Is,
                "/src/assets/editions/bmr/token.webp": Hl,
                "/src/assets/editions/custom/background1.webp": jn,
                "/src/assets/editions/custom/background1t.webp": ns,
                "/src/assets/editions/custom/background2.webp": Un,
                "/src/assets/editions/custom/background2t.webp": as,
                "/src/assets/editions/custom/background3.webp": Hn,
                "/src/assets/editions/custom/background3t.webp": rs,
                "/src/assets/editions/custom/background4.webp": qn,
                "/src/assets/editions/custom/background4t.webp": ls,
                "/src/assets/editions/custom/background5.webp": Ln,
                "/src/assets/editions/custom/background5t.webp": cs,
                "/src/assets/editions/custom/background6.webp": zn,
                "/src/assets/editions/custom/background6t.webp": ds,
                "/src/assets/editions/custom/background7.webp": Gn,
                "/src/assets/editions/custom/background7t.webp": us,
                "/src/assets/editions/custom/background8.webp": Wn,
                "/src/assets/editions/custom/background8t.webp": gs,
                "/src/assets/editions/custom/firstnight.webp": ql,
                "/src/assets/editions/custom/leaf-left.webp": Ll,
                "/src/assets/editions/custom/leaf-orange.webp": zl,
                "/src/assets/editions/custom/leaf-right.webp": Gl,
                "/src/assets/editions/custom/leaf-top1.webp": Wl,
                "/src/assets/editions/custom/leaf-top2.webp": Fl,
                "/src/assets/editions/custom/leaf-top3.webp": Ql,
                "/src/assets/editions/custom/leaf-top4.webp": Zl,
                "/src/assets/editions/custom/leaf-top5.webp": Xl,
                "/src/assets/editions/custom/leaf-top6.webp": Kl,
                "/src/assets/editions/custom/logo-active.webp": Aa,
                "/src/assets/editions/custom/logo-label.webp": ba,
                "/src/assets/editions/custom/logo-sheet.webp": Re,
                "/src/assets/editions/custom/logo.webp": fa,
                "/src/assets/editions/custom/othernight.webp": Yl,
                "/src/assets/editions/custom/sheet-bottom.webp": xs,
                "/src/assets/editions/custom/sheet.webp": Jl,
                "/src/assets/editions/custom/skull.webp": Ms,
                "/src/assets/editions/custom/token.webp": $l,
                "/src/assets/editions/homebrew/firstnight.webp": xl,
                "/src/assets/editions/homebrew/leaf-left.webp": ec,
                "/src/assets/editions/homebrew/leaf-orange.webp": sc,
                "/src/assets/editions/homebrew/leaf-right.webp": tc,
                "/src/assets/editions/homebrew/leaf-top1.webp": ic,
                "/src/assets/editions/homebrew/leaf-top2.webp": oc,
                "/src/assets/editions/homebrew/leaf-top3.webp": nc,
                "/src/assets/editions/homebrew/leaf-top4.webp": ac,
                "/src/assets/editions/homebrew/leaf-top5.webp": rc,
                "/src/assets/editions/homebrew/leaf-top6.webp": lc,
                "/src/assets/editions/homebrew/logo-label.webp": va,
                "/src/assets/editions/homebrew/logo-sheet.webp": De,
                "/src/assets/editions/homebrew/othernight.webp": cc,
                "/src/assets/editions/homebrew/sheet-bottom.webp": et,
                "/src/assets/editions/homebrew/sheet.webp": dc,
                "/src/assets/editions/homebrew/skull.webp": Rs,
                "/src/assets/editions/homebrew/token.webp": uc,
                "/src/assets/editions/snv/background1.webp": Fn,
                "/src/assets/editions/snv/background1t.webp": ms,
                "/src/assets/editions/snv/background2.webp": Qn,
                "/src/assets/editions/snv/background2t.webp": hs,
                "/src/assets/editions/snv/background3.webp": Zn,
                "/src/assets/editions/snv/background3t.webp": ps,
                "/src/assets/editions/snv/background4.webp": Xn,
                "/src/assets/editions/snv/background4t.webp": As,
                "/src/assets/editions/snv/background5.webp": Kn,
                "/src/assets/editions/snv/background5t.webp": bs,
                "/src/assets/editions/snv/background6.webp": Yn,
                "/src/assets/editions/snv/background6t.webp": fs,
                "/src/assets/editions/snv/firstnight.webp": gc,
                "/src/assets/editions/snv/leaf-left.webp": mc,
                "/src/assets/editions/snv/leaf-orange.webp": hc,
                "/src/assets/editions/snv/leaf-right.webp": pc,
                "/src/assets/editions/snv/leaf-top1.webp": Ac,
                "/src/assets/editions/snv/leaf-top2.webp": bc,
                "/src/assets/editions/snv/leaf-top3.webp": fc,
                "/src/assets/editions/snv/leaf-top4.webp": vc,
                "/src/assets/editions/snv/leaf-top5.webp": yc,
                "/src/assets/editions/snv/leaf-top6.webp": _c,
                "/src/assets/editions/snv/leaf-top7.webp": wc,
                "/src/assets/editions/snv/logo-active.webp": ya,
                "/src/assets/editions/snv/logo-sheet.webp": Ee,
                "/src/assets/editions/snv/logo.webp": _a,
                "/src/assets/editions/snv/othernight.webp": kc,
                "/src/assets/editions/snv/sheet-bottom.webp": st,
                "/src/assets/editions/snv/sheet.webp": Cc,
                "/src/assets/editions/snv/skull.webp": Ds,
                "/src/assets/editions/snv/token.webp": Sc,
                "/src/assets/editions/taf/leaf-left.webp": Pc,
                "/src/assets/editions/taf/leaf-orange.webp": Tc,
                "/src/assets/editions/taf/leaf-right.webp": Ic,
                "/src/assets/editions/taf/leaf-top1.webp": Mc,
                "/src/assets/editions/taf/leaf-top2.webp": Rc,
                "/src/assets/editions/taf/leaf-top3.webp": Dc,
                "/src/assets/editions/taf/leaf-top4.webp": Ec,
                "/src/assets/editions/taf/logo.webp": wa,
                "/src/assets/editions/taf/token.webp": Nc,
                "/src/assets/editions/tb/background1.webp": Jn,
                "/src/assets/editions/tb/background1t.webp": vs,
                "/src/assets/editions/tb/background2.webp": $n,
                "/src/assets/editions/tb/background2t.webp": ys,
                "/src/assets/editions/tb/background3.webp": xn,
                "/src/assets/editions/tb/background3t.webp": _s,
                "/src/assets/editions/tb/background4.webp": ea,
                "/src/assets/editions/tb/background4t.webp": ws,
                "/src/assets/editions/tb/background5.webp": sa,
                "/src/assets/editions/tb/background5t.webp": ks,
                "/src/assets/editions/tb/background6.webp": ta,
                "/src/assets/editions/tb/background6t.webp": Cs,
                "/src/assets/editions/tb/firstnight.webp": Bc,
                "/src/assets/editions/tb/leaf-left.webp": Vc,
                "/src/assets/editions/tb/leaf-orange.webp": Oc,
                "/src/assets/editions/tb/leaf-right.webp": jc,
                "/src/assets/editions/tb/leaf-top1.webp": Uc,
                "/src/assets/editions/tb/leaf-top2.webp": Hc,
                "/src/assets/editions/tb/leaf-top3.webp": qc,
                "/src/assets/editions/tb/leaf-top4.webp": Lc,
                "/src/assets/editions/tb/leaf-top5.webp": zc,
                "/src/assets/editions/tb/logo-active.webp": ka,
                "/src/assets/editions/tb/logo-sheet.webp": Ne,
                "/src/assets/editions/tb/logo.webp": Ca,
                "/src/assets/editions/tb/othernight.webp": Gc,
                "/src/assets/editions/tb/sheet-bottom.webp": tt,
                "/src/assets/editions/tb/sheet.webp": Wc,
                "/src/assets/editions/tb/skull.webp": Es,
                "/src/assets/editions/tb/token.webp": Fc
            })[`/src/assets/editions/${this.edition.id}/${e}`],import.meta.url).href + ")" : "url(" + new URL(Object.assign({
                "/src/assets/app-icon.webp": Qc,
                "/src/assets/background.webp": ia,
                "/src/assets/background1.webp": oa,
                "/src/assets/background1t.webp": Ss,
                "/src/assets/background2.webp": na,
                "/src/assets/background2t.webp": Ps,
                "/src/assets/background3.webp": aa,
                "/src/assets/background3t.webp": Ts,
                "/src/assets/bigwig.webp": Zc,
                "/src/assets/butterfly.webp": Xc,
                "/src/assets/card-blue.webp": Kc,
                "/src/assets/card-brown.webp": Yc,
                "/src/assets/card-green.webp": Jc,
                "/src/assets/card-orange.webp": $c,
                "/src/assets/card-purple.webp": xc,
                "/src/assets/card-red.webp": ed,
                "/src/assets/clock-hour.webp": sd,
                "/src/assets/clock-minute.webp": td,
                "/src/assets/clock-second.webp": id,
                "/src/assets/clock_back.webp": od,
                "/src/assets/clock_circle.webp": nd,
                "/src/assets/clock_cog1.webp": ad,
                "/src/assets/clock_cog2.webp": rd,
                "/src/assets/clock_cogcap.webp": ld,
                "/src/assets/clouds.webp": cd,
                "/src/assets/death.webp": dd,
                "/src/assets/demon.webp": ud,
                "/src/assets/gavel.webp": gd,
                "/src/assets/gossip.webp": md,
                "/src/assets/gstone.webp": hd,
                "/src/assets/life.webp": pd,
                "/src/assets/line.webp": Ad,
                "/src/assets/loading.webp": bd,
                "/src/assets/logo.webp": fd,
                "/src/assets/night.webp": vd,
                "/src/assets/progress.svg": yd,
                "/src/assets/puck.webp": _d,
                "/src/assets/reminder.webp": wd,
                "/src/assets/sb.webp": kd,
                "/src/assets/shroud.webp": Cd,
                "/src/assets/towninfo.webp": Sd,
                "/src/assets/tpi.webp": Pd,
                "/src/assets/traveller.webp": Td,
                "/src/assets/vote.webp": Id
            })[`/src/assets/${e}`],import.meta.url).href + ")"
        },
        toggleTab(e) {
            var t;
            if (this.positions.character && (e != null && e.target.closest(".container.positioned")) || (t = e == null ? void 0 : e.target.closest("body")) != null && t.classList.contains("picture-in-picture") || (e == null ? void 0 : e.target.tagName) === "A" && (e != null && e.target.hasAttribute("target")))
                return;
            this.isPoppedOut && window.documentPictureInPicture.window.close();
            let s = this.grimoire.rightSideTabState;
            if (s === "character-open" ? s = "" : s === "character-mid" ? s = "character-open" : s = "character-mid",
            this.positions.character)
                if (this.settings.general.isPositioningDisabled) {
                    const n = this.positions.character;
                    n.hidden = !n.hidden,
                    this.setPosition({
                        name: "character",
                        value: n
                    })
                } else
                    this.setPosition({
                        name: "character"
                    }),
                    s === "character-open" && (s = "");
            this.$store.commit("setRightSideTabState", s)
        },
        closeTab() {
            this.grimoire.rightSideTabState === "character-open" && this.$store.commit("setRightSideTabState", "")
        },
        async scrollTo(e, s) {
            const t = this.jinxes.findIndex(n => n.first.id === e && n.second.id === s);
            t < 0 || (this.grimoire.rightSideTabState !== "character-open" && !this.isPoppedOut && (this.$store.commit("setRightSideTabState", "character-open"),
            await new Promise(n => setTimeout(n, 350))),
            this.$refs.jinxes[t].scrollIntoView({
                behavior: "smooth"
            }))
        }
    },
    beforeUnmount() {
        this.isPoppedOut && (window.documentPictureInPicture.window.close(),
        this.pipWindow = null)
    }
}
  , xr = () => {
    he(e => ({
        v67f138d7: e.zoom
    }))
}
  , el = Ia.setup;
Ia.setup = el ? (e, s) => (xr(),
el(e, s)) : xr;
const QS = ["src"]
  , ZS = ["href"]
  , XS = {
    key: 1,
    class: "team bootlegger"
}
  , KS = {
    class: "bootlegger"
}
  , YS = ["href"]
  , JS = {
    class: "role"
}
  , $S = ["title"]
  , xS = {
    key: 0,
    class: "alt-name"
}
  , eP = {
    key: 1,
    class: "jinxes"
}
  , sP = ["onClick"]
  , tP = {
    class: "ability"
}
  , iP = {
    key: 2,
    class: "team jinxes"
}
  , oP = {
    class: "role"
}
  , nP = {
    class: "name"
}
  , aP = {
    class: "ability"
}
  , rP = {
    class: "hint"
}
  , lP = ["src"]
  , cP = {
    class: "button-group"
}
  , dP = ["title"]
  , uP = ["title"]
  , gP = ["aria-label", "title"];
function mP(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("Tab");
    return e.edition.id ? (r(),
    u("aside", {
        key: 0,
        class: _(["character tab", {
            [e.grimoire.rightSideTabState]: !e.positions.character,
            positioned: e.positions.character,
            popout: o.pipWindow
        }]),
        ref: "sheet",
        onTouchstartPassive: s[6] || (s[6] = R( () => {}
        , ["stop"])),
        onTouchendPassive: s[7] || (s[7] = R( () => {}
        , ["stop"]))
    }, [a("div", {
        class: "label",
        onClick: s[0] || (s[0] = (...d) => i.toggleTab && i.toggleTab(...d)),
        role: "tab"
    }, c(e.$t("tabs.characters.title")), 1), b(g, {
        name: "character",
        onClick: i.toggleTab,
        onDragged: i.closeTab,
        "is-draggable": e.grimoire.rightSideTabState === "character-open",
        style: q({
            backgroundImage: i.bgImage("sheet.webp")
        })
    }, {
        footer: T( () => [a("div", cP, [!o.isPoppedOut && !e.positions.character ? (r(),
        u("div", {
            key: 0,
            class: "button popout",
            onClick: s[1] || (s[1] = R( (...d) => i.dragOut && i.dragOut(...d), ["stop"])),
            title: e.$t("tabs.character.popout")
        }, [b(l, {
            icon: "arrows-alt"
        })], 8, dP)) : A("", !0), !o.isPoppedOut && !e.positions.character && o.hasDPIPSupport ? (r(),
        u("div", {
            key: 1,
            class: "button popout",
            onClick: s[2] || (s[2] = R( (...d) => i.popOut && i.popOut(...d), ["stop"])),
            title: e.$t("tabs.character.popout_window")
        }, [b(l, {
            icon: "window-restore"
        })], 8, uP)) : A("", !0), a("div", {
            class: _([{
                disabled: o.zoom <= -3
            }, "button"]),
            onClick: s[3] || (s[3] = R(d => i.setZoom(-1), ["stop"]))
        }, [b(l, {
            icon: "magnifying-glass-minus"
        })], 2), a("div", {
            class: _([{
                disabled: o.zoom >= 0
            }, "button"]),
            onClick: s[4] || (s[4] = R(d => i.setZoom(1), ["stop"]))
        }, [b(l, {
            icon: "magnifying-glass-plus"
        })], 2), e.edition.isOfficial ? A("", !0) : (r(),
        u("div", {
            key: 2,
            onClick: s[5] || (s[5] = R( (...d) => i.downloadScript && i.downloadScript(...d), ["stop"])),
            class: "button",
            role: "link",
            "aria-label": e.$t("tabs.character.download"),
            title: e.$t("tabs.character.download")
        }, [b(l, {
            icon: "download"
        })], 8, gP))])]),
        default: T( () => {
            var d;
            return [a("img", {
                src: i.sheetLogo,
                alt: "",
                class: "logo"
            }, null, 8, QS), !e.edition.isOfficial && e.edition.name ? (r(),
            u("a", {
                key: 0,
                class: _(["title", {
                    active: e.edition.almanac
                }]),
                href: e.edition.almanac,
                target: "_blank",
                tabindex: "-1"
            }, [v(c(e.edition.name) + " " + c(e.edition.author ? e.$t("overlays.towninfo.script_by", [e.edition.author]) : "") + " ", 1), e.edition.almanac ? (r(),
            C(l, {
                key: 0,
                icon: "book"
            })) : A("", !0)], 10, ZS)) : A("", !0), (d = e.edition.bootlegger) != null && d.length ? (r(),
            u("div", XS, [s[8] || (s[8] = a("aside", null, null, -1)), a("ul", KS, [(r(!0),
            u(y, null, N(e.edition.bootlegger, (h, m) => (r(),
            u("li", {
                key: m
            }, [a("span", {
                class: "icon",
                style: q({
                    backgroundImage: `url(${e.roleIconURL("bootlegger")})`
                })
            }, null, 4), v(" " + c(h), 1)]))), 128))])])) : A("", !0), (r(!0),
            u(y, null, N(i.rolesGrouped, (h, m) => (r(),
            u("div", {
                key: m,
                class: _(["team", m])
            }, [a("aside", null, c(e.$t(`grimoire.${m}`, 2)), 1), a("ul", null, [(r(!0),
            u(y, null, N(h, (p, f) => (r(),
            u("li", {
                class: _(["team-" + m, "role-" + p.id, {
                    second: f >= h.length / 2
                }]),
                key: p.id
            }, [p.id ? (r(),
            u("span", {
                key: 0,
                class: "icon",
                style: q({
                    backgroundImage: `url(${e.roleIconURL(p)})`
                })
            }, null, 4)) : A("", !0), p.isCustom ? A("", !0) : (r(),
            u("a", {
                key: 1,
                class: "almanac",
                href: o.wikiURL + encodeURIComponent(p.name),
                target: "_blank",
                tabindex: "-1"
            }, [b(l, {
                icon: "book"
            })], 8, YS)), a("div", JS, [a("div", {
                class: "name",
                title: e.$te(`roles.${p.id}.name`) ? e.$t(`roles.${p.id}.name`) : p.name
            }, [v(c(e.$te(`roles.${p.id}.name`) ? e.$t(`roles.${p.id}.name`) : p.name) + " ", 1), e.settings.game.isEnglishNames && e.$te(`roles.${p.id}.name`) && e.$t(`roles.${p.id}.name`) !== p.name ? (r(),
            u("span", xS, " (" + c(p.name) + ") ", 1)) : A("", !0), p.jinxes && p.jinxes.filter( ({id: P}) => e.roles.has(P)).length ? (r(),
            u("div", eP, [(r(!0),
            u(y, null, N(p.jinxes.filter( ({id: P}) => e.roles.has(P)), (P, w) => (r(),
            u("small", {
                onClick: R(B => i.scrollTo(p.id, P.id), ["stop"]),
                key: w,
                class: "icon",
                style: q({
                    backgroundImage: `url(${e.roleIconURL(P.id)})`
                })
            }, null, 12, sP))), 128))])) : A("", !0)], 8, $S), a("span", tP, c(e.$te(`roles.${p.id}.ability`) ? e.$t(`roles.${p.id}.ability`) : p.ability), 1)])], 2))), 128))])], 2))), 128)), i.jinxes.length ? (r(),
            u("div", iP, [a("aside", null, c(e.$t("tabs.character.jinxes")), 1), a("ul", null, [(r(!0),
            u(y, null, N(i.jinxes, (h, m) => (r(),
            u("li", {
                class: _(["jinx", {
                    second: m >= i.jinxes.length / 2
                }]),
                key: m,
                ref_for: !0,
                ref: "jinxes"
            }, [a("span", {
                class: "icon",
                style: q({
                    backgroundImage: `url(${e.roleIconURL(h.first)})`
                })
            }, null, 4), a("span", {
                class: "icon",
                style: q({
                    backgroundImage: `url(${e.roleIconURL(h.second)})`
                })
            }, null, 4), a("div", oP, [a("div", nP, [a("span", {
                class: _(h.first.team)
            }, c(e.$te(`roles.${h.first.id}.name`) ? e.$t(`roles.${h.first.id}.name`) : h.first.name), 3), s[9] || (s[9] = v(" & ", -1)), a("span", {
                class: _(h.second.team)
            }, c(e.$te(`roles.${h.second.id}.name`) ? e.$t(`roles.${h.second.id}.name`) : h.second.name), 3)]), a("span", aP, c(e.$te(`jinxes.${h.id}`) ? e.$t(`jinxes.${h.id}`) : h.reason), 1)])], 2))), 128))])])) : A("", !0), a("div", rP, [a("img", {
                src: i.sheetImage,
                alt: ""
            }, null, 8, lP), a("span", null, "*" + c(e.$t("tabs.character.other_nights")), 1)])]
        }
        ),
        _: 1
    }, 8, ["onClick", "onDragged", "is-draggable", "style"])], 34)) : A("", !0)
}
const hP = O(Ia, [["render", mP], ["__scopeId", "data-v-7ba9405d"]])
  , pP = {
    name: "TextTab",
    components: {
        Tab: je
    },
    computed: {
        ...M(["roles"]),
        ...M("players", ["players", "storytellers"]),
        ...M("user", ["user", "relations"]),
        ...M("chat", ["textRecipient", "textMessages", "channel", "userChannels"]),
        ...M(["session", "grimoire", "positions", "settings"]),
        ...D("user", ["isStoryteller", "isSpectator", "hasGrimoireAccess", "isModerator"]),
        ...D("players", ["seatedPlayerMap", "storytellerMap"]),
        promptIcon() {
            return this.textRecipient === "spectator" ? "eye" : this.textRecipient === "system" ? "bullhorn" : this.textRecipient && !this.seatedPlayerMap.has(this.textRecipient) ? "eye" : this.textRecipient ? "envelope" : this.seatedPlayerMap.has(this.user.id) ? "users" : "eye"
        },
        promptDisabled() {
            return this.textRecipient === "private" || this.textRecipient === "system" || this.textRecipient === "" && this.isSpectator && !this.isModerator
        },
        promptPlaceholder() {
            var e;
            return this.textRecipient === "spectator" ? this.$t("tabs.text.prompt_spectator") : this.textRecipient === "private" ? this.$t("tabs.text.prompt_private") : this.textRecipient === "system" ? this.$t("tabs.text.prompt_system") : this.textRecipient ? this.$t("tabs.text.prompt_user", [((e = this.session.users.get(this.textRecipient)) == null ? void 0 : e.username) || this.textRecipient]) : this.textRecipient && !this.seatedPlayerMap.has(this.textRecipient) ? this.$t("tabs.text.prompt_spectator") : this.$t("tabs.text.prompt_public")
        },
        messages() {
            return this.textMessages.filter( ({senderId: e, recipientId: s, isSystem: t}) => this.textRecipient === "system" ? t : s === this.textRecipient && ["spectator", ""].includes(this.textRecipient) && !t || this.textRecipient === "private" && e !== this.user.id && ![this.user.id, "spectator", ""].includes(s) && !t || e === this.user.id && s === this.textRecipient && !t ? !0 : s === this.user.id && e === this.textRecipient).map(e => {
                var s, t, n, o, i, l, g, d, h, m, p;
                return {
                    recipient: ((s = this.session.users.get(e.recipientId)) == null ? void 0 : s.username) || e.recipientId,
                    sender: ((t = this.session.users.get(e.senderId)) == null ? void 0 : t.username) || e.senderId,
                    senderBorder: "border-" + ((o = (n = this.session.users.get(e.senderId)) == null ? void 0 : n.cosmetics) == null ? void 0 : o.border),
                    senderTeam: "team-" + ((l = (i = this.seatedPlayerMap.get(e.senderId)) == null ? void 0 : i.role) == null ? void 0 : l.team),
                    senderAlignment: "align-" + ((g = this.seatedPlayerMap.get(e.senderId)) == null ? void 0 : g.alignment),
                    recipientTeam: "team-" + ((h = (d = this.seatedPlayerMap.get(e.recipientId)) == null ? void 0 : d.role) == null ? void 0 : h.team),
                    recipientAlignment: "align-" + ((m = this.seatedPlayerMap.get(e.recipientId)) == null ? void 0 : m.alignment),
                    recipientId: e.recipientId,
                    senderId: e.senderId,
                    msgId: e.msgId,
                    message: e.message,
                    time: e.time,
                    isSystem: e.isSystem,
                    isHidden: e.isHidden,
                    isBlocked: ((p = this.relations.get(e.senderId)) == null ? void 0 : p.type) === "block"
                }
            }
            )
        },
        defaultRecipients() {
            var o, i;
            const e = this.session.users
              , s = this.players.length
              , t = [];
            t.push(...this.storytellers.filter(l => {
                var g;
                return l.id !== this.user.id && ((g = e.get(l.id)) == null ? void 0 : g.isOnline)
            }
            ).map(l => l.id));
            const n = this.players.findIndex(l => l.id === this.user.id);
            if (n > -1) {
                const l = this.players[(s + n - 1) % s].id;
                (o = e.get(l)) != null && o.isOnline && t.push(l);
                const g = this.players[(s + n + 1) % s].id;
                (i = e.get(g)) != null && i.isOnline && t.push(g)
            }
            return t.push(""),
            (this.isStoryteller || this.isSpectator) && t.push("spectator"),
            this.hasGrimoireAccess && t.push("private"),
            t.push("system"),
            t
        },
        recipients() {
            const e = [...this.defaultRecipients];
            this.pinnedTabs.forEach(t => {
                var n;
                (n = this.session.users.get(t)) != null && n.isOnline && e.unshift(t)
            }
            ),
            this.seatedPlayerMap.has(this.user.id) && (this.textMessages.forEach( ({recipientId: t, senderId: n, time: o}) => {
                var i;
                e.includes(t) || n !== this.user.id && t === this.user.id && !e.includes(n) && o >= ((i = this.lastRead[n]) != null ? i : 0) && e.unshift(n)
            }
            ),
            e.includes(this.textRecipient) || e.unshift(this.textRecipient));
            const s = new Map;
            return e.forEach(t => {
                s.set(t, this.textMessages.filter(n => n.time >= (this.lastRead[t] || 0) && (n.recipientId === t && n.senderId === this.user.id && !n.isSystem || n.recipientId === this.user.id && n.senderId === t && !n.isSystem || t === "private" && n.recipientId !== this.user.id && n.senderId !== this.user.id && !["spectator", ""].includes(n.recipientId) || t === "system" && n.isSystem || n.recipientId === t && ["spectator", ""].includes(t) && !n.isSystem)).length || 0)
            }
            ),
            s
        },
        isMessageDisabled() {
            var e;
            if (!this.message)
                return !0;
            if (this.textRecipient === "spectator")
                return !this.isSpectator && !this.isStoryteller;
            if (this.textRecipient) {
                if (!this.seatedPlayerMap.has(this.textRecipient) && !this.isStoryteller || !((e = this.session.users.get(this.textRecipient)) != null && e.isOnline))
                    return !0;
                if (this.isStoryteller || this.storytellerMap.has(this.textRecipient))
                    return !1;
                if (this.session.isWhispersDisabled || !this.seatedPlayerMap.has(this.user.id) || !this.$store.getters["game/isNight"] && !this.defaultRecipients.includes(this.textRecipient) || this.$store.getters["game/isNight"] && !this.defaultRecipients.includes(this.textRecipient) && ![...this.roles].some( ([,s]) => {
                    var t;
                    return (t = s.special) == null ? void 0 : t.some(n => n.type === "player" && n.name === "open-eyes")
                }
                ) || (this.userChannels.get(this.textRecipient) || this.channel) && !this.$store.getters["game/isNight"])
                    return !0
            } else if (this.channel && !this.$store.getters["game/isNight"] && !this.isStoryteller || this.isSpectator && !this.isModerator)
                return !0;
            return !1
        },
        unreadWhispers() {
            if (this.grimoire.tabs.text || this.positions.text)
                return 0;
            const e = this.textMessages.filter( ({time: s, recipientId: t, senderId: n}) => t === this.user.id && s >= (this.lastRead[n] || 0) && (this.storytellerMap.has(n) || this.isStoryteller || Math.abs(this.players.findIndex( ({id: o}) => o === n) - this.players.findIndex( ({id: o}) => o === this.user.id)) % (this.players.length - 2) === 1)).length;
            return e > 9 ? "â" : e
        },
        unreadMessages() {
            if (this.grimoire.tabs.text || this.positions.text)
                return 0;
            const e = this.textMessages.filter( ({time: s, recipientId: t, senderId: n, isSystem: o}) => s >= this.lastRead[""] && !o && !t && n !== this.user.id || (this.isSpectator || this.isStoryteller) && s >= this.lastRead.spectator && t === "spectator" && n !== this.user.id || this.hasGrimoireAccess && s > this.lastRead.private && !["spectator", ""].includes(t) && t !== this.user.id && n !== this.user.id).length;
            return e > 9 ? "â" : e
        }
    },
    data() {
        return {
            isScrolled: !1,
            lastRead: {
                "": 0,
                private: 0,
                spectator: 0,
                previousTab: this.$store.state.chat.textRecipient
            },
            message: "",
            pinnedTabs: new Set
        }
    },
    methods: {
        ...U(["setTab", "setPosition"]),
        ...U("chat", ["setTextRecipient"]),
        toggleRecipient(e=1) {
            const s = [...this.recipients.keys()].filter(n => !["private", "system"].includes(n) && (!this.isSpectator || n !== ""))
              , t = s.length;
            t > 1 && s.indexOf(this.textRecipient) >= 0 ? this.setTextRecipient(s[(t + s.indexOf(this.textRecipient) + e) % t]) : this.setTextRecipient("")
        },
        pinTab() {
            this.pinnedTabs.has(this.textRecipient) ? this.pinnedTabs.delete(this.textRecipient) : this.pinnedTabs.add(this.textRecipient)
        },
        setRecipient(e) {
            e !== this.user.id && e !== -1 && (this.isSpectator && !this.storytellerMap.has(e) || !this.isStoryteller && !this.seatedPlayerMap.has(e) || !this.isStoryteller && this.seatedPlayerMap.has(e) && Math.abs(this.players.findIndex( ({id: s}) => s === e) - this.players.findIndex( ({id: s}) => s === this.user.id)) % (this.players.length - 2) !== 1 || this.setTextRecipient(e))
        },
        keydown(e) {
            var t;
            switch ((t = e.key) == null ? void 0 : t.toLocaleLowerCase()) {
            case "arrowup":
                this.toggleRecipient(1);
                break;
            case "arrowdown":
                this.toggleRecipient(-1);
                break;
            case "escape":
                this.setTab({
                    tab: "text",
                    value: !1
                });
                break
            }
        },
        sendMessage() {
            !this.message || this.isMessageDisabled || (this.$store.dispatch("chat/textMessage", {
                recipientId: this.textRecipient,
                message: this.message
            }),
            this.message = "",
            this.$refs.chat.scrollTop = this.$refs.chat.scrollHeight)
        },
        toggleText() {
            if (this.grimoire.tabs.text && (this.lastRead[this.textRecipient] = Date.now()),
            this.positions.text) {
                if (this.settings.general.isPositioningDisabled)
                    return;
                this.setPosition({
                    name: "text"
                }),
                this.setTab({
                    tab: "text",
                    value: !0
                })
            } else
                this.setTab({
                    tab: "text",
                    value: !this.grimoire.tabs.text
                });
            this.$refs.chat.scrollTop = this.$refs.chat.scrollHeight,
            this.isScrolled = !1
        },
        observeScroll() {
            this.$refs.chat ? this.isScrolled = this.$refs.chat.scrollTop + this.$refs.chat.clientHeight < this.$refs.chat.scrollHeight - 10 : this.isScrolled = !1
        }
    },
    watch: {
        messages() {
            this.observeScroll(),
            this.$nextTick( () => {
                const e = this.textMessages[this.textMessages.length - 1];
                this.messages.length && this.$refs.chat && !this.isScrolled && (this.textRecipient === e.recipientId || e.senderId === this.user.id || e.senderId === this.textRecipient && e.recipientId === this.user.id || this.textRecipient === "system" && e.isSystem || this.textRecipient === "private" && e.recipientId !== this.user.id && e.senderId !== this.user.id && !["spectator", ""].includes(e.recipientId)) && (this.$refs.chat.scrollTop = this.$refs.chat.scrollHeight)
            }
            )
        },
        textRecipient() {
            (this.grimoire.tabs.text || this.positions.text) && (this.lastRead[this.lastRead.previousTab] = Date.now(),
            this.lastRead.previousTab = this.textRecipient,
            document.activeElement !== this.$refs.message && this.$nextTick( () => {
                var e;
                return (e = this.$refs.message) == null ? void 0 : e.focus()
            }
            ),
            this.$nextTick( () => {
                this.$refs.chat && (this.$refs.chat.scrollTop = this.$refs.chat.scrollHeight,
                this.isScrolled = !1)
            }
            ))
        },
        "grimoire.tabs.text"() {
            this.grimoire.tabs.text ? this.$nextTick( () => {
                var e;
                return (e = this.$refs.message) == null ? void 0 : e.focus()
            }
            ) : document.getElementById("app").focus()
        }
    }
}
  , AP = {
    key: 0
}
  , bP = {
    key: 1,
    class: "secondary"
}
  , fP = {
    class: "tabs",
    role: "list"
}
  , vP = ["onClick", "aria-live", "aria-label"]
  , yP = ["checked"]
  , _P = {
    class: "name"
}
  , wP = ["onClick", "title"]
  , kP = {
    class: "to"
}
  , CP = ["onClick", "title"]
  , SP = {
    key: 1,
    class: "message"
}
  , PP = {
    key: 0,
    class: "hidden"
}
  , TP = {
    key: 1,
    class: "hidden"
}
  , IP = {
    key: 2,
    class: "message"
}
  , MP = {
    key: 3,
    class: "message"
}
  , RP = {
    key: 4,
    class: "message"
}
  , DP = {
    key: 5,
    class: "message"
}
  , EP = {
    key: 6,
    class: "message"
}
  , NP = {
    key: 7,
    class: "message"
}
  , BP = ["placeholder", "disabled"]
  , VP = ["disabled"];
function OP(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("Tab");
    return r(),
    C(L, {
        name: "slide"
    }, {
        default: T( () => [e.session.sessionId ? (r(),
        u("aside", {
            key: 0,
            class: _(["tab", {
                open: e.grimoire.tabs.text && !e.positions.text
            }])
        }, [!e.positions.text || !e.settings.general.isPositioningDisabled ? (r(),
        u("div", {
            key: 0,
            class: "label",
            role: "heading",
            onClick: s[0] || (s[0] = (...d) => i.toggleText && i.toggleText(...d))
        }, [v(c(e.$t("tabs.text.title")) + " ", 1), i.unreadWhispers ? (r(),
        u("em", AP, c(i.unreadWhispers), 1)) : A("", !0), i.unreadMessages ? (r(),
        u("em", bP, c(i.unreadMessages), 1)) : A("", !0)])) : A("", !0), b(g, {
            name: "text",
            "is-draggable": !e.settings.general.isPositioningDisabled && (e.grimoire.tabs.text || !!e.positions.text),
            onDragged: s[9] || (s[9] = d => e.setTab({
                tab: "text"
            }))
        }, {
            default: T( () => [a("ul", fP, [(r(!0),
            u(y, null, N([...i.recipients.keys()], d => {
                var h, m;
                return r(),
                u("li", {
                    key: d,
                    class: _({
                        active: e.textRecipient === d
                    }),
                    onClick: p => e.setTextRecipient(d),
                    "aria-live": i.recipients.get(d) ? "assertive" : "",
                    "aria-label": e.$t("tabs.text.tooltip", [i.recipients.get(d), ((h = e.session.users.get(d)) == null ? void 0 : h.username) || e.$t(`tabs.text.channels.${d || "public"}`) || d])
                }, [d === "spectator" ? (r(),
                C(l, {
                    key: 0,
                    icon: "eye"
                })) : d === "system" ? (r(),
                C(l, {
                    key: 1,
                    icon: "bullhorn"
                })) : d === "" ? (r(),
                C(l, {
                    key: 2,
                    icon: "users"
                })) : e.storytellerMap.has(d) ? (r(),
                C(l, {
                    key: 3,
                    icon: "crown"
                })) : e.seatedPlayerMap.has(d) || d === "private" ? (r(),
                C(l, {
                    key: 4,
                    icon: "envelope"
                })) : (r(),
                C(l, {
                    key: 5,
                    icon: "eye"
                })), a("span", {
                    class: _({
                        system: ["", "private", "spectator", "system"].includes(d)
                    })
                }, c(((m = e.session.users.get(d)) == null ? void 0 : m.username) || e.$t(`tabs.text.channels.${d || "public"}`, d)), 3), a("em", null, c(i.recipients.get(d) || ""), 1)], 10, vP)
            }
            ), 128))]), s[10] || (s[10] = a("div", {
                class: "spacer"
            }, null, -1)), a("div", {
                ref: "chat",
                class: _(["messages", {
                    scrolled: o.isScrolled
                }]),
                onScroll: s[2] || (s[2] = (...d) => i.observeScroll && i.observeScroll(...d))
            }, [(r(!0),
            u(y, null, N(i.messages, d => {
                var h, m, p, f;
                return r(),
                u("label", {
                    draggable: "false",
                    onDragstart: s[1] || (s[1] = R( () => {}
                    , ["prevent"])),
                    key: d.msgId,
                    class: _({
                        read: d.time < o.lastRead[e.textRecipient],
                        whisper: d.recipientId && d.recipientId !== "spectator",
                        incoming: d.recipientId === e.user.id,
                        outgoing: d.senderId === e.user.id,
                        blocked: d.isBlocked,
                        spectator: d.senderId && (!e.seatedPlayerMap.has(d.senderId) || d.recipientId === "spectator")
                    })
                }, [d.isBlocked ? (r(),
                u("input", {
                    key: 0,
                    type: "checkbox",
                    tabindex: "-1",
                    "aria-hidden": "true",
                    checked: !d.isBlocked
                }, null, 8, yP)) : A("", !0), a("span", _P, [d.isSystem ? (r(),
                C(l, {
                    key: 0,
                    icon: "bullhorn"
                })) : A("", !0), e.storytellerMap.has(d.senderId) ? (r(),
                C(l, {
                    key: 1,
                    icon: "crown"
                })) : A("", !0), !e.seatedPlayerMap.has(d.senderId) && d.senderId ? (r(),
                C(l, {
                    key: 2,
                    icon: "eye"
                })) : A("", !0), d.senderId ? (r(),
                u("b", {
                    key: 3,
                    class: _([d.senderTeam, d.senderAlignment, d.senderBorder, {
                        self: d.senderId === e.user.id
                    }]),
                    onClick: P => i.setRecipient(d.senderId),
                    title: d.sender
                }, c(d.sender), 11, wP)) : A("", !0), e.textRecipient === "private" ? (r(),
                u(y, {
                    key: 4
                }, [a("span", kP, c(e.$t("tabs.text.message_to")), 1), e.storytellerMap.has(d.recipientId) ? (r(),
                C(l, {
                    key: 0,
                    icon: "crown"
                })) : A("", !0), a("b", {
                    class: _([d.recipientTeam, d.recipientAlignment]),
                    onClick: P => i.setRecipient(d.recipientId),
                    title: d.recipient
                }, c(d.recipient), 11, CP)], 64)) : A("", !0), d.senderId ? (r(),
                u(y, {
                    key: 5
                }, [v(":")], 64)) : A("", !0)]), d.isSystem ? ["start"].includes(d.message.type) ? (r(),
                u("span", IP, c(e.$t(`tabs.text.system.${d.message.type}`)), 1)) : ["seat_claim", "seat_empty", "seat_vacate"].includes(d.message.type) ? (r(),
                u("span", MP, c(e.$t(`tabs.text.system.${d.message.type}`, [((m = e.session.users.get(d.message.data[0])) == null ? void 0 : m.username) || d.message.data[0], d.message.data[1]])), 1)) : d.message.type === "signal" ? (r(),
                u("span", RP, c(e.$t("tabs.text.system.signal", [((p = e.session.users.get(d.message.data[0])) == null ? void 0 : p.username) || d.message.data[0], d.message.data[1] === "storyteller" ? e.$t("grimoire.storytellers") : d.message.data[1]])), 1)) : d.message.type === "phase" ? (r(),
                u("span", DP, c(e.$t("tabs.text.system.phase", [e.$t(`grimoire.phases.${d.message.data % 2 ? "night" : "day"}`, Math.ceil(d.message.data / 2))])), 1)) : d.message.type === "end" ? (r(),
                u("span", EP, c(e.$t(`tabs.text.system.end_${d.message.data.isEvilWin ? "evil" : "good"}`)), 1)) : (r(),
                u("span", NP, c(e.$t(`tabs.text.system.${d.message.type}`, d.message.data < 21 ? [e.$t("grimoire.seat", [d.message.data])] : [((f = e.session.users.get(d.message.data)) == null ? void 0 : f.username) || d.message.data])), 1)) : (r(),
                u("span", SP, [v(c(d.message) + " ", 1), d.isHidden ? (r(),
                u("em", PP, " (" + c(e.$t("tabs.text.message_blocked")) + ") ", 1)) : A("", !0), ((h = e.relations.get(d.senderId)) == null ? void 0 : h.type) === "block" ? (r(),
                u("em", TP, " (" + c(e.$t("tabs.text.sender_blocked")) + ") ", 1)) : A("", !0)]))], 34)
            }
            ), 128))], 34), a("form", {
                class: "prompt",
                onClick: s[7] || (s[7] = R( () => {}
                , ["stop"])),
                onSubmit: s[8] || (s[8] = R( (...d) => i.sendMessage && i.sendMessage(...d), ["prevent"]))
            }, [a("span", {
                class: "recipient",
                onClick: s[3] || (s[3] = d => i.toggleRecipient())
            }, [b(l, {
                icon: i.promptIcon
            }, null, 8, ["icon"])]), z(a("input", {
                type: "text",
                name: "message",
                ref: "message",
                "onUpdate:modelValue": s[4] || (s[4] = d => o.message = d),
                placeholder: i.promptPlaceholder,
                maxlength: "250",
                autocomplete: "off",
                onKeydown: s[5] || (s[5] = R( (...d) => i.keydown && i.keydown(...d), ["stop"])),
                disabled: i.promptDisabled
            }, null, 40, BP), [[G, o.message]]), a("button", {
                class: _(["button", {
                    primary: !i.isMessageDisabled
                }]),
                type: "submit",
                disabled: i.isMessageDisabled
            }, [b(l, {
                icon: "paper-plane"
            })], 10, VP), !i.defaultRecipients.includes(e.textRecipient) || o.pinnedTabs.has(e.textRecipient) ? (r(),
            u("button", {
                key: 0,
                class: _(["button", {
                    secondary: o.pinnedTabs.has(e.textRecipient)
                }]),
                type: "button",
                title: "Pin this chat to stay open",
                onClick: s[6] || (s[6] = d => i.pinTab())
            }, [b(l, {
                icon: "thumbtack"
            })], 2)) : A("", !0)], 32)]),
            _: 1
        }, 8, ["is-draggable"])], 2)) : A("", !0)]),
        _: 1
    })
}
const jP = O(pP, [["render", OP], ["__scopeId", "data-v-e8a74480"]])
  , UP = {
    name: "SessionMeta",
    computed: {
        ...M("user", ["user", "levels"]),
        ...M(["session", "chat", "edition"]),
        ...D("session", ["boostDuration"]),
        ...D("user", ["isStoryteller"]),
        ...D("chat", ["chatServerPreference"]),
        languageIcon() {
            return new URL(Object.assign({
                "/node_modules/language-icons/icons/aa.svg": Tn,
                "/node_modules/language-icons/icons/ab.svg": Pn,
                "/node_modules/language-icons/icons/ae.svg": Sn,
                "/node_modules/language-icons/icons/af.svg": Cn,
                "/node_modules/language-icons/icons/ak.svg": kn,
                "/node_modules/language-icons/icons/am.svg": wn,
                "/node_modules/language-icons/icons/an.svg": _n,
                "/node_modules/language-icons/icons/ar.svg": yn,
                "/node_modules/language-icons/icons/as.svg": vn,
                "/node_modules/language-icons/icons/av.svg": fn,
                "/node_modules/language-icons/icons/ay.svg": bn,
                "/node_modules/language-icons/icons/az.svg": An,
                "/node_modules/language-icons/icons/ba.svg": pn,
                "/node_modules/language-icons/icons/be.svg": hn,
                "/node_modules/language-icons/icons/bg.svg": mn,
                "/node_modules/language-icons/icons/bh.svg": gn,
                "/node_modules/language-icons/icons/bi.svg": un,
                "/node_modules/language-icons/icons/bm.svg": dn,
                "/node_modules/language-icons/icons/bn.svg": cn,
                "/node_modules/language-icons/icons/bo.svg": ln,
                "/node_modules/language-icons/icons/br.svg": rn,
                "/node_modules/language-icons/icons/bs.svg": an,
                "/node_modules/language-icons/icons/ca.svg": nn,
                "/node_modules/language-icons/icons/ce.svg": on,
                "/node_modules/language-icons/icons/ch.svg": tn,
                "/node_modules/language-icons/icons/co.svg": sn,
                "/node_modules/language-icons/icons/cr.svg": en,
                "/node_modules/language-icons/icons/cs.svg": xo,
                "/node_modules/language-icons/icons/cu.svg": $o,
                "/node_modules/language-icons/icons/cv.svg": Jo,
                "/node_modules/language-icons/icons/cy.svg": Yo,
                "/node_modules/language-icons/icons/da.svg": Ko,
                "/node_modules/language-icons/icons/de.svg": Xo,
                "/node_modules/language-icons/icons/dv.svg": Zo,
                "/node_modules/language-icons/icons/dz.svg": Qo,
                "/node_modules/language-icons/icons/ee.svg": Fo,
                "/node_modules/language-icons/icons/el.svg": Wo,
                "/node_modules/language-icons/icons/en.svg": Go,
                "/node_modules/language-icons/icons/eo.svg": zo,
                "/node_modules/language-icons/icons/es.svg": Lo,
                "/node_modules/language-icons/icons/et.svg": qo,
                "/node_modules/language-icons/icons/eu.svg": Ho,
                "/node_modules/language-icons/icons/fa.svg": Uo,
                "/node_modules/language-icons/icons/ff.svg": jo,
                "/node_modules/language-icons/icons/fi.svg": Oo,
                "/node_modules/language-icons/icons/fj.svg": Vo,
                "/node_modules/language-icons/icons/fo.svg": Bo,
                "/node_modules/language-icons/icons/fr.svg": No,
                "/node_modules/language-icons/icons/fy.svg": Eo,
                "/node_modules/language-icons/icons/ga.svg": Do,
                "/node_modules/language-icons/icons/gd.svg": Ro,
                "/node_modules/language-icons/icons/gl.svg": Mo,
                "/node_modules/language-icons/icons/gn.svg": Io,
                "/node_modules/language-icons/icons/gu.svg": To,
                "/node_modules/language-icons/icons/gv.svg": Po,
                "/node_modules/language-icons/icons/ha.svg": So,
                "/node_modules/language-icons/icons/he.svg": Co,
                "/node_modules/language-icons/icons/hi.svg": ko,
                "/node_modules/language-icons/icons/ho.svg": wo,
                "/node_modules/language-icons/icons/hr.svg": _o,
                "/node_modules/language-icons/icons/ht.svg": yo,
                "/node_modules/language-icons/icons/hu.svg": vo,
                "/node_modules/language-icons/icons/hy.svg": fo,
                "/node_modules/language-icons/icons/hz.svg": bo,
                "/node_modules/language-icons/icons/ia.svg": Ao,
                "/node_modules/language-icons/icons/id.svg": po,
                "/node_modules/language-icons/icons/ie.svg": ho,
                "/node_modules/language-icons/icons/ig.svg": mo,
                "/node_modules/language-icons/icons/ii.svg": go,
                "/node_modules/language-icons/icons/ik.svg": uo,
                "/node_modules/language-icons/icons/io.svg": co,
                "/node_modules/language-icons/icons/is.svg": lo,
                "/node_modules/language-icons/icons/it.svg": ro,
                "/node_modules/language-icons/icons/iu.svg": ao,
                "/node_modules/language-icons/icons/ja.svg": no,
                "/node_modules/language-icons/icons/jv.svg": oo,
                "/node_modules/language-icons/icons/ka.svg": io,
                "/node_modules/language-icons/icons/kg.svg": to,
                "/node_modules/language-icons/icons/ki.svg": so,
                "/node_modules/language-icons/icons/kj.svg": eo,
                "/node_modules/language-icons/icons/kk.svg": xi,
                "/node_modules/language-icons/icons/kl.svg": $i,
                "/node_modules/language-icons/icons/km.svg": Ji,
                "/node_modules/language-icons/icons/kn.svg": Yi,
                "/node_modules/language-icons/icons/ko.svg": Ki,
                "/node_modules/language-icons/icons/kr.svg": Xi,
                "/node_modules/language-icons/icons/ks.svg": Zi,
                "/node_modules/language-icons/icons/ku.svg": Qi,
                "/node_modules/language-icons/icons/kv.svg": Fi,
                "/node_modules/language-icons/icons/kw.svg": Wi,
                "/node_modules/language-icons/icons/ky.svg": Gi,
                "/node_modules/language-icons/icons/la.svg": zi,
                "/node_modules/language-icons/icons/lb.svg": Li,
                "/node_modules/language-icons/icons/lg.svg": qi,
                "/node_modules/language-icons/icons/li.svg": Hi,
                "/node_modules/language-icons/icons/ln.svg": Ui,
                "/node_modules/language-icons/icons/lo.svg": ji,
                "/node_modules/language-icons/icons/lt.svg": Oi,
                "/node_modules/language-icons/icons/lu.svg": Vi,
                "/node_modules/language-icons/icons/lv.svg": Bi,
                "/node_modules/language-icons/icons/mg.svg": Ni,
                "/node_modules/language-icons/icons/mh.svg": Ei,
                "/node_modules/language-icons/icons/mi.svg": Di,
                "/node_modules/language-icons/icons/mk.svg": Ri,
                "/node_modules/language-icons/icons/ml.svg": Mi,
                "/node_modules/language-icons/icons/mn.svg": Ii,
                "/node_modules/language-icons/icons/mr.svg": Ti,
                "/node_modules/language-icons/icons/ms.svg": Pi,
                "/node_modules/language-icons/icons/mt.svg": Si,
                "/node_modules/language-icons/icons/my.svg": Ci,
                "/node_modules/language-icons/icons/na.svg": ki,
                "/node_modules/language-icons/icons/nb.svg": wi,
                "/node_modules/language-icons/icons/nd.svg": _i,
                "/node_modules/language-icons/icons/ne.svg": yi,
                "/node_modules/language-icons/icons/ng.svg": vi,
                "/node_modules/language-icons/icons/nl.svg": fi,
                "/node_modules/language-icons/icons/nn.svg": bi,
                "/node_modules/language-icons/icons/no.svg": Ai,
                "/node_modules/language-icons/icons/nr.svg": pi,
                "/node_modules/language-icons/icons/nv.svg": hi,
                "/node_modules/language-icons/icons/ny.svg": mi,
                "/node_modules/language-icons/icons/oc.svg": gi,
                "/node_modules/language-icons/icons/oj.svg": ui,
                "/node_modules/language-icons/icons/om.svg": di,
                "/node_modules/language-icons/icons/or.svg": ci,
                "/node_modules/language-icons/icons/os.svg": li,
                "/node_modules/language-icons/icons/pa.svg": ri,
                "/node_modules/language-icons/icons/pi.svg": ai,
                "/node_modules/language-icons/icons/pl.svg": ni,
                "/node_modules/language-icons/icons/ps.svg": oi,
                "/node_modules/language-icons/icons/pt.svg": ii,
                "/node_modules/language-icons/icons/qu.svg": ti,
                "/node_modules/language-icons/icons/rm.svg": si,
                "/node_modules/language-icons/icons/rn.svg": ei,
                "/node_modules/language-icons/icons/ro.svg": xt,
                "/node_modules/language-icons/icons/ru.svg": $t,
                "/node_modules/language-icons/icons/rw.svg": Jt,
                "/node_modules/language-icons/icons/sa.svg": Yt,
                "/node_modules/language-icons/icons/sc.svg": Kt,
                "/node_modules/language-icons/icons/sd.svg": Xt,
                "/node_modules/language-icons/icons/se.svg": Zt,
                "/node_modules/language-icons/icons/sg.svg": Qt,
                "/node_modules/language-icons/icons/si.svg": Ft,
                "/node_modules/language-icons/icons/sk.svg": Wt,
                "/node_modules/language-icons/icons/sl.svg": Gt,
                "/node_modules/language-icons/icons/sm.svg": zt,
                "/node_modules/language-icons/icons/sn.svg": Lt,
                "/node_modules/language-icons/icons/so.svg": qt,
                "/node_modules/language-icons/icons/sq.svg": Ht,
                "/node_modules/language-icons/icons/sr.svg": Ut,
                "/node_modules/language-icons/icons/ss.svg": jt,
                "/node_modules/language-icons/icons/st.svg": Ot,
                "/node_modules/language-icons/icons/su.svg": Vt,
                "/node_modules/language-icons/icons/sv.svg": Bt,
                "/node_modules/language-icons/icons/sw.svg": Nt,
                "/node_modules/language-icons/icons/ta.svg": Et,
                "/node_modules/language-icons/icons/te.svg": Dt,
                "/node_modules/language-icons/icons/tg.svg": Rt,
                "/node_modules/language-icons/icons/th.svg": Mt,
                "/node_modules/language-icons/icons/ti.svg": It,
                "/node_modules/language-icons/icons/tk.svg": Tt,
                "/node_modules/language-icons/icons/tl.svg": Pt,
                "/node_modules/language-icons/icons/tn.svg": St,
                "/node_modules/language-icons/icons/to.svg": Ct,
                "/node_modules/language-icons/icons/tr.svg": kt,
                "/node_modules/language-icons/icons/ts.svg": wt,
                "/node_modules/language-icons/icons/tt.svg": _t,
                "/node_modules/language-icons/icons/tw.svg": yt,
                "/node_modules/language-icons/icons/ty.svg": vt,
                "/node_modules/language-icons/icons/ug.svg": ft,
                "/node_modules/language-icons/icons/uk.svg": bt,
                "/node_modules/language-icons/icons/ur.svg": At,
                "/node_modules/language-icons/icons/uz.svg": pt,
                "/node_modules/language-icons/icons/ve.svg": ht,
                "/node_modules/language-icons/icons/vi.svg": mt,
                "/node_modules/language-icons/icons/vo.svg": gt,
                "/node_modules/language-icons/icons/wa.svg": ut,
                "/node_modules/language-icons/icons/wo.svg": dt,
                "/node_modules/language-icons/icons/xh.svg": ct,
                "/node_modules/language-icons/icons/yi.svg": lt,
                "/node_modules/language-icons/icons/yo.svg": rt,
                "/node_modules/language-icons/icons/za.svg": at,
                "/node_modules/language-icons/icons/zh.svg": nt,
                "/node_modules/language-icons/icons/zu.svg": ot
            })[`/node_modules/language-icons/icons/${this.session.meta.language}.svg`],import.meta.url).href
        },
        chatServers() {
            return [...this.chat.servers].map( ([,e]) => e).sort( (e, s) => this.chatServerPreference.indexOf(e.host) - this.chatServerPreference.indexOf(s.host))
        }
    },
    emits: ["change"],
    data() {
        return {
            serverDropdown: !1,
            availableLanguages: Ls.getAllCodes().map(e => [e, e + " - " + Ls.getNativeName(e)]),
            sessionName: this.$store.state.session.sessionId || Math.round(Math.random() * 1e5).toString(),
            created: "",
            createdTimer: null,
            copied: !1
        }
    },
    methods: {
        ...U("session", ["updateMeta"]),
        toggle(e, s=!1) {
            var n;
            if (this.session.sessionId && !this.isStoryteller)
                return;
            const t = Object.assign({}, this.session.meta.tags);
            s ? t[e] = !t[e] : t[e] = (((n = t[e]) != null ? n : 0) + 1) % 3,
            this.updateMeta({
                tags: t
            }),
            this.checkDifficulty()
        },
        checkDifficulty() {
            var s;
            let e = this.session.meta.tags.difficulty;
            if (e !== 1 && this.edition.id === "homebrew" ? e = 1 : e === 2 && ((s = this.edition.level) == null ? void 0 : s.toLowerCase()) !== "beginner" && (e = 0),
            e !== this.session.meta.tags.difficulty) {
                const t = Object.assign({}, this.session.meta.tags);
                t.difficulty = e,
                this.updateMeta({
                    tags: t
                })
            }
        },
        async togglePublic() {
            if (this.session.sessionId && !this.session.meta.isPublic)
                try {
                    await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "session.prompt_public_title",
                        text: "session.prompt_public_text"
                    }) && this.updateMeta({
                        isPublic: !this.session.meta.isPublic
                    })
                } catch {} finally {
                    this.$store.commit("toggleModal", {
                        name: "users"
                    })
                }
            else
                this.updateMeta({
                    isPublic: !this.session.meta.isPublic
                })
        },
        changeServer(e) {
            var s;
            if (!(this.session.sessionId && !this.isStoryteller))
                if (this.session.sessionId) {
                    if (this.session.meta.chatServer === e.host || ((s = e.health) == null ? void 0 : s.users) >= 200)
                        return;
                    this.$store.commit("chat/changeServer", e.host)
                } else
                    this.updateMeta({
                        chatServer: e.host
                    })
        },
        copySessionUrl() {
            if (!this.session.sessionId)
                return;
            const e = "https://botc.app/join/" + encodeURIComponent(this.session.sessionId);
            navigator.clipboard.writeText(e),
            this.copied = !0,
            setTimeout( () => this.copied = !1, 2e3)
        },
        updateCreateTime() {
            if (this.created = "",
            clearTimeout(this.createdTimer),
            this.session.meta.createdAt) {
                const e = Math.round((Date.now() - new Date(this.session.meta.createdAt).getTime()) / 6e4);
                e > 60 && (this.created = Math.floor(e / 60) + "h "),
                this.created += e % 60 + "min",
                this.createdTimer = setTimeout( () => this.updateCreateTime(), 60 * 1e3)
            }
        }
    },
    beforeMount() {
        this.session.sessionId || (this.checkDifficulty(),
        !this.chatServerPreference[0] !== this.session.meta.chatServer && this.updateMeta({
            chatServer: this.chatServerPreference[0]
        })),
        this.updateCreateTime()
    },
    beforeUnmount() {
        clearTimeout(this.createdTimer)
    },
    watch: {
        "session.meta.createdAt"() {
            this.updateCreateTime()
        }
    }
}
  , HP = {
    class: "meta"
}
  , qP = {
    class: "col"
}
  , LP = {
    key: 0
}
  , zP = {
    key: 1
}
  , GP = ["placeholder", "disabled", "title"]
  , WP = {
    for: "language"
}
  , FP = ["disabled"]
  , QP = ["value", "selected"]
  , ZP = ["src"]
  , XP = {
    class: "dropdown"
}
  , KP = ["title"]
  , YP = {
    key: 0,
    class: "servers"
}
  , JP = ["onClick"]
  , $P = ["title"]
  , xP = ["value", "disabled"]
  , eT = ["value", "disabled"]
  , sT = ["title"]
  , tT = ["title"]
  , iT = {
    href: "https://www.patreon.com/botconline",
    target: "_blank"
}
  , oT = {
    class: "tags"
}
  , nT = ["title", "onClick"]
  , aT = ["aria-label"]
  , rT = ["aria-valuetext"]
  , lT = ["aria-valuetext"]
  , cT = ["aria-valuetext"]
  , dT = ["title"]
  , uT = {
    id: "streaming-check"
}
  , gT = {
    key: 0,
    "aria-pressed": "true",
    "aria-labelledby": "streaming-check"
}
  , mT = {
    key: 1,
    "aria-pressed": "false",
    "aria-labelledby": "streaming-check"
};
function hT(e, s, t, n, o, i) {
    var g, d, h, m, p, f, P, w, B, j, V, S;
    const l = k("font-awesome-icon");
    return r(),
    u("div", HP, [a("div", qP, [e.session.sessionId ? (r(),
    u("h4", LP, c(e.$t("session.title_current")) + ":", 1)) : (r(),
    u("h4", zP, c(e.$t("session.title_create")) + ":", 1)), (r(),
    C(Kd(e.session.sessionId ? "div" : "label"), {
        class: "label"
    }, {
        default: T( () => [a("span", null, c(e.$t("session.session_name")) + ":", 1), z(a("input", {
            required: "",
            name: "sessionName",
            minlength: "3",
            maxlength: "20",
            pattern: "^[^ ].*?[^ ]$",
            placeholder: e.$t("session.name_placeholder"),
            "onUpdate:modelValue": s[0] || (s[0] = E => o.sessionName = E),
            disabled: !!e.session.sessionId,
            title: o.created ? e.$t("session.created", [o.created, e.session.meta.owner.username]) : ""
        }, null, 8, GP), [[G, o.sessionName]]), e.session.sessionId ? (r(),
        C(l, {
            key: 0,
            icon: o.copied ? "check-circle" : "copy",
            onClick: i.copySessionUrl,
            title: e.$t("session.copy")
        }, null, 8, ["icon", "onClick", "title"])) : A("", !0)]),
        _: 1
    })), a("label", WP, [a("span", null, c(e.$t("session.language")) + ":", 1), a("select", {
        name: "language",
        id: "language",
        onChange: s[1] || (s[1] = E => e.updateMeta({
            language: E.target.value
        })),
        disabled: !!e.session.sessionId && !e.isStoryteller
    }, [(r(!0),
    u(y, null, N(o.availableLanguages, ([E,I]) => (r(),
    u("option", {
        key: E,
        value: E,
        selected: e.session.meta.language === E
    }, c(I), 9, QP))), 128))], 40, FP), a("img", {
        src: i.languageIcon,
        alt: ""
    }, null, 8, ZP)]), a("div", {
        class: "label",
        onClick: s[2] || (s[2] = E => o.serverDropdown = !o.serverDropdown)
    }, [a("span", null, c(e.$t("session.server")), 1), a("div", XP, [v(c(((g = e.chat.servers.get(e.session.meta.chatServer)) == null ? void 0 : g.name) || e.session.meta.chatServer) + " (" + c((m = (h = (d = e.chat.servers.get(e.session.meta.chatServer)) == null ? void 0 : d.health) == null ? void 0 : h.latency) != null ? m : "?") + "ms) ", 1), a("span", {
        class: "status",
        style: q({
            backgroundColor: (f = (p = e.chat.servers.get(e.session.meta.chatServer)) == null ? void 0 : p.health) == null ? void 0 : f.color
        }),
        title: e.$t("session.server_stats", [(B = (w = (P = e.chat.servers.get(e.session.meta.chatServer)) == null ? void 0 : P.health) == null ? void 0 : w.users) != null ? B : "?", (S = (V = (j = e.chat.servers.get(e.session.meta.chatServer)) == null ? void 0 : j.health) == null ? void 0 : V.load) != null ? S : "?"])
    }, null, 12, KP)]), b(L, {
        name: "fold"
    }, {
        default: T( () => [o.serverDropdown ? (r(),
        u("table", YP, [a("thead", null, [a("tr", null, [a("td", null, c(e.$t("session.server_name")), 1), a("td", null, [b(l, {
            icon: "wifi",
            title: "Server status"
        }), b(l, {
            icon: "signal",
            title: "Latency"
        })]), a("td", null, [b(l, {
            icon: "users",
            title: "Users"
        })])])]), a("tbody", null, [(r(!0),
        u(y, null, N(i.chatServers, E => {
            var I, Z, H, F, K, Y, ie, x;
            return r(),
            u("tr", {
                key: E.host,
                class: _({
                    selected: E.host === e.session.meta.chatServer,
                    disabled: ((I = E.health) == null ? void 0 : I.users) >= 200
                }),
                onClick: de => i.changeServer(E)
            }, [a("td", null, c(E.name), 1), a("td", null, [E.health ? (r(),
            u("span", {
                key: 0,
                class: "status",
                style: q({
                    backgroundColor: E.health.color
                }),
                title: e.$t("session.server_stats", [(H = (Z = E.health) == null ? void 0 : Z.users) != null ? H : "?", (F = E.health.load) != null ? F : "?"])
            }, null, 12, $P)) : A("", !0), v(" " + c((Y = (K = E.health) == null ? void 0 : K.latency) != null ? Y : "?") + "ms ", 1)]), a("td", null, c((x = (ie = E.health) == null ? void 0 : ie.users) != null ? x : "?"), 1)], 10, JP)
        }
        ), 128))])])) : A("", !0)]),
        _: 1
    })]), a("label", {
        class: _({
            "switch-1": e.session.meta.isPublic,
            "switch-2": !e.session.meta.isPublic
        })
    }, [a("span", null, c(e.$t("session.visibility")) + ":", 1), a("input", {
        type: "checkbox",
        name: "isPublic",
        value: e.session.meta.isPublic,
        disabled: !!e.session.sessionId && !e.isStoryteller,
        onChange: s[3] || (s[3] = (...E) => i.togglePublic && i.togglePublic(...E))
    }, null, 40, xP), a("em", null, [v(c(e.session.meta.isPublic ? e.$t("session.visibility_public") : e.$t("session.visibility_private")) + " ", 1), e.session.ping > 0 ? (r(),
    u(y, {
        key: 0
    }, [v(" (" + c(e.session.ping) + "ms) ", 1)], 64)) : A("", !0)]), b(l, {
        icon: e.session.meta.isPublic ? "lock-open" : "lock"
    }, null, 8, ["icon"])], 2), a("label", {
        class: _({
            "switch-1": e.levels.GROUP.includes(e.user.level),
            "switch-2": e.levels.SINGLE.includes(e.user.level)
        })
    }, [a("span", null, c(e.$t("session.access")) + ":", 1), a("input", {
        type: "checkbox",
        name: "isLocked",
        value: e.session.meta.tags.locked,
        disabled: !e.session.sessionId || !e.isStoryteller,
        onChange: s[4] || (s[4] = E => i.toggle("locked", !0))
    }, null, 40, eT), e.session.meta.tags.locked ? (r(),
    u("em", {
        key: 0,
        title: e.$t("session.locked_text")
    }, c(e.$t("session.locked")), 9, sT)) : e.levels.GROUP.includes(e.user.level) || e.boostDuration() ? (r(),
    u("em", {
        key: 1,
        title: e.$t("session.open_text")
    }, c(e.$t("session.free")), 9, tT)) : (r(),
    u(y, {
        key: 2
    }, [a("em", null, c(e.$t("session.subscription_needed")), 1), a("a", iT, [b(l, {
        title: "More info",
        icon: "info-circle"
    })])], 64)), e.session.sessionId ? (r(),
    C(l, {
        key: 3,
        title: e.$t(`session.${e.session.meta.tags.locked ? "locked" : "open"}_text`),
        icon: e.session.meta.tags.locked ? "lock" : "lock-open"
    }, null, 8, ["title", "icon"])) : A("", !0)], 2)]), a("div", {
        class: _(["col", {
            closed: !e.session.meta.isPublic
        }])
    }, [a("h4", null, c(e.$t("session.tags")) + ":", 1), a("ul", oT, [(r(),
    u(y, null, N(["difficulty", "cameras", "travellers", "grimoire"], E => a("li", {
        key: E,
        title: e.$t(`common.session-tags.${E}.title`),
        class: _(["switch-" + e.session.meta.tags[E]]),
        onClick: I => i.toggle(E)
    }, [a("span", {
        role: "button",
        "aria-label": e.$t(`common.session-tags.${E}.title`)
    }, c(e.$t(`common.session-tags.${E}.label`)) + ": ", 9, aT), e.session.meta.tags[E] ? e.session.meta.tags[E] === 1 ? (r(),
    u("em", {
        key: 1,
        role: "spinbutton",
        "aria-valuetext": e.$t(`common.session-tags.${E}.value_1`)
    }, c(e.$t(`common.session-tags.${E}.value_1`)), 9, lT)) : e.session.meta.tags[E] === 2 ? (r(),
    u("em", {
        key: 2,
        role: "spinbutton",
        "aria-valuetext": e.$t(`common.session-tags.${E}.value_2`)
    }, c(e.$t(`common.session-tags.${E}.value_2`)), 9, cT)) : A("", !0) : (r(),
    u("em", {
        key: 0,
        role: "spinbutton",
        "aria-valuetext": e.$t(`common.session-tags.${E}.value_0`)
    }, c(e.$t(`common.session-tags.${E}.value_0`)), 9, rT))], 10, nT)), 64)), a("li", {
        title: e.$t("common.session-tags.streaming.title"),
        class: _({
            "switch-1": e.session.meta.tags.streaming,
            "switch-2": !e.session.meta.tags.streaming
        }),
        onClick: s[5] || (s[5] = E => i.toggle("streaming", !0))
    }, [a("span", uT, c(e.$t("common.session-tags.streaming.label")) + ":", 1), e.session.meta.tags.streaming ? (r(),
    u("em", gT, c(e.$t("common.session-tags.streaming.value_1")), 1)) : (r(),
    u("em", mT, c(e.$t("common.session-tags.streaming.value_0")), 1))], 10, dT)])], 2)])
}
const Md = O(UP, [["render", hT]])
  , pT = {
    components: {
        SessionMeta: Md,
        Modal: se
    },
    computed: {
        ...M(["session", "chat", "modal", "game"]),
        ...M("players", ["players", "storytellers", "storytellerRequests"]),
        ...M("user", ["levels", "user", "relations"]),
        ...D("players", ["storytellerMap"]),
        ...D("user", ["isStoryteller"]),
        users() {
            const e = []
              , s = []
              , t = [];
            return this.session.users.forEach(n => {
                var o;
                n.chat = "",
                n.relation = (o = this.relations.get(n.id)) == null ? void 0 : o.type,
                n.username = n.username || "",
                Number(this.chat.userOverrides.get("volume-" + n.id)) === 0 && (n.chat = "microphone-slash"),
                this.storytellerMap.has(n.id) ? (n.class = "storyteller",
                e.push(n)) : this.players.some( ({id: i}) => i === n.id) ? (n.class = "player",
                s.push(n)) : n.isOnline && (n.class = "spectator",
                t.push(n))
            }
            ),
            e.sort( (n, o) => n.username.localeCompare(o.username)),
            s.sort( (n, o) => n.username.localeCompare(o.username)),
            t.sort( (n, o) => n.username.localeCompare(o.username)),
            [...e, ...s, ...t]
        },
        userCounts() {
            return {
                storyteller: this.users.filter(e => e.class === "storyteller").length,
                player: this.users.filter(e => e.class === "player").length,
                spectator: this.users.filter(e => e.class === "spectator").length
            }
        }
    },
    data() {
        return {}
    },
    methods: {
        ...U(["toggleModal"]),
        grantGrimoireAccess(e, s) {
            if (!this.isStoryteller || e.grimoireAccess < 1)
                return;
            const t = s != null ? s : e.grimoireAccess === 3 ? 2 : 3;
            this.$store.commit("user/requestGrimoire", {
                id: e.id,
                status: t
            })
        },
        showUser(e) {
            this.toggleModal({
                name: "user",
                params: {
                    userId: e,
                    isFromUsers: !0
                }
            })
        }
    }
}
  , AT = {
    class: "users"
}
  , bT = {
    key: 0,
    class: "break"
}
  , fT = ["onClick"]
  , vT = {
    class: "label"
}
  , yT = ["data-tooltip"]
  , _T = {
    class: "icons"
}
  , wT = ["data-tooltip", "aria-label"]
  , kT = ["aria-label", "data-tooltip"]
  , CT = ["aria-label", "data-tooltip"]
  , ST = ["aria-label", "data-tooltip"]
  , PT = ["data-tooltip", "aria-label"]
  , TT = ["data-tooltip", "aria-label"]
  , IT = ["data-tooltip", "aria-label"]
  , MT = ["data-tooltip", "aria-label"]
  , RT = ["data-tooltip", "aria-label"]
  , DT = {
    class: "notification"
}
  , ET = {
    key: 0,
    "aria-live": "polite"
};
function NT(e, s, t, n, o, i) {
    const l = k("SessionMeta")
      , g = k("font-awesome-icon")
      , d = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "users" && e.session.sessionId ? (r(),
        C(d, {
            key: 0,
            class: "users",
            onClose: s[0] || (s[0] = h => e.toggleModal(e.modal))
        }, {
            header: T( () => [b(l)]),
            default: T( () => [a("ul", AT, [(r(!0),
            u(y, null, N(i.users, (h, m) => {
                var p, f, P, w, B;
                return r(),
                u(y, {
                    key: h.id
                }, [!m || i.users[m - 1].class !== h.class ? (r(),
                u("li", bT, c(e.$t(`modals.users.type_${h.class}`, i.userCounts[h.class])), 1)) : A("", !0), a("li", {
                    class: _({
                        [h.class]: !0,
                        ["level-" + h.level]: h.level,
                        ["id-" + h.id]: h.id,
                        ["relation-" + h.relation]: h.relation,
                        ["border-" + ((p = h.cosmetics) == null ? void 0 : p.border)]: !!((f = h.cosmetics) != null && f.border) && h.relation !== "block",
                        offline: !h.isOnline,
                        you: h.id === e.user.id
                    }),
                    onClick: j => i.showUser(h.id)
                }, [a("div", vT, [a("span", {
                    class: "name",
                    "data-tooltip": h.username + (h.pronouns ? " (" + h.pronouns + ")" : "") || null
                }, c(h.username.substring(0, 50) || e.$t("common.unnamed_user")), 9, yT), a("span", _T, [h.relation === "block" ? (r(),
                u("span", {
                    key: 0,
                    "data-tooltip": e.$t("player.name.blocked"),
                    "aria-label": e.$t("player.name.blocked")
                }, [b(g, {
                    icon: "user-xmark"
                })], 8, wT)) : A("", !0), (P = h.flags) != null && P.includes("newuser") ? (r(),
                u("span", {
                    key: 1,
                    "aria-label": e.$t("modals.users.new_user"),
                    "data-tooltip": e.$t("modals.users.new_user")
                }, [b(g, {
                    class: "newuser",
                    icon: "seedling"
                })], 8, kT)) : A("", !0), h.isOnline ? e.levels.GROUP.includes(h.level) ? (r(),
                u("span", {
                    key: 3,
                    "aria-label": e.$t("modals.users.group_sub"),
                    "data-tooltip": e.$t("modals.users.group_sub")
                }, [b(g, {
                    class: "group",
                    icon: "users"
                })], 8, ST)) : A("", !0) : (r(),
                u("span", {
                    key: 2,
                    "aria-label": e.$t("modals.users.offline"),
                    "data-tooltip": e.$t("modals.users.offline")
                }, [b(g, {
                    class: "offline",
                    icon: "user-slash"
                })], 8, CT)), h.level === "special-tpi" && ((w = h.cosmetics) == null ? void 0 : w.border) === "tpi" ? (r(),
                u("span", {
                    key: 4,
                    "data-tooltip": e.$t("modals.users.official_tpi"),
                    "aria-label": e.$t("modals.users.official_tpi")
                }, [b(g, {
                    class: "tpi",
                    icon: "star"
                })], 8, PT)) : A("", !0), h.level === "special-moderator" && ((B = h.cosmetics) == null ? void 0 : B.border) === "moderator" ? (r(),
                u("span", {
                    key: 5,
                    "data-tooltip": e.$t("modals.users.official_mod"),
                    "aria-label": e.$t("modals.users.official_mod")
                }, [b(g, {
                    class: "moderator",
                    icon: "gavel"
                })], 8, TT)) : A("", !0), h.grimoireAccess === 3 ? (r(),
                u("span", {
                    key: 6,
                    "data-tooltip": e.$t("modals.users.grim_access"),
                    "aria-label": e.$t("modals.users.grim_access")
                }, [b(g, {
                    icon: "book-dead"
                })], 8, IT)) : A("", !0), e.storytellerRequests.includes(h.id) ? (r(),
                u("span", {
                    key: 7,
                    "data-tooltip": e.$t("modals.users.st_requested"),
                    "aria-label": e.$t("modals.users.st_requested")
                }, [b(g, {
                    icon: "crown"
                })], 8, MT)) : A("", !0), h.chat ? (r(),
                u("span", {
                    key: 8,
                    "data-tooltip": e.$t("modals.users.chat_connection"),
                    "aria-label": e.$t("modals.users.chat_connection")
                }, [b(g, {
                    icon: h.chat
                }, null, 8, ["icon"])], 8, RT)) : A("", !0)])]), a("div", DT, [h.grimoireAccess === 1 && e.isStoryteller ? (r(),
                u("div", ET, [b(g, {
                    icon: "book-dead"
                }), v(" " + c(e.$t("modals.users.grim_access")) + " ", 1), b(g, {
                    icon: "check-circle",
                    class: "primary",
                    onClick: R(j => i.grantGrimoireAccess(h, 3), ["stop"]),
                    "aria-hidden": "false",
                    role: "button",
                    "aria-label": e.$t("common.button_confirm")
                }, null, 8, ["onClick", "aria-label"]), b(g, {
                    icon: "times-circle",
                    class: "secondary",
                    onClick: R(j => i.grantGrimoireAccess(h, 2), ["stop"]),
                    "aria-hidden": "false",
                    role: "button",
                    "aria-label": e.$t("common.button_cancel")
                }, null, 8, ["onClick", "aria-label"])])) : A("", !0)])], 10, fT)], 64)
            }
            ), 128))])]),
            _: 1
        })) : A("", !0)]),
        _: 1
    })
}
const BT = O(pT, [["render", NT], ["__scopeId", "data-v-72800ff5"]])
  , VT = {
    components: {
        Modal: se
    },
    computed: {
        ...M(["modal", "session"]),
        ...M("user", ["user"])
    },
    data() {
        return {
            title: "",
            text: "",
            sessionName: ""
        }
    },
    watch: {
        "modal.name"() {
            this.modal.name === "announcement" && this.session.sessionId && (this.sessionName = this.session.sessionId)
        }
    },
    methods: {
        ...U(["toggleModal"]),
        async submit() {
            try {
                this.close(),
                await this.$store.dispatch("user/announce", {
                    title: this.title,
                    text: this.text,
                    sessionName: this.sessionName
                }),
                this.title = "",
                this.text = ""
            } catch (e) {
                this.$store.dispatch("showError", ["modals.announcement.error", e])
            }
        },
        close() {
            document.getElementById("app").focus(),
            this.toggleModal()
        }
    }
}
  , OT = ["placeholder"]
  , jT = ["placeholder"]
  , UT = ["placeholder"]
  , HT = {
    class: "button-group"
}
  , qT = {
    tabindex: "-1",
    type: "submit",
    class: "button primary"
};
function LT(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "announcement" && e.user.level === "special-tpi" ? (r(),
        C(g, {
            key: 0,
            class: "announcement",
            onClose: s[5] || (s[5] = d => i.close())
        }, {
            header: T( () => [v(c(e.$t("modals.announcement.title")), 1)]),
            default: T( () => [a("p", null, c(e.$t("modals.announcement.description")), 1), a("form", {
                onSubmit: s[4] || (s[4] = R(d => i.submit(), ["prevent"]))
            }, [z(a("input", {
                type: "text",
                "onUpdate:modelValue": s[0] || (s[0] = d => o.title = d),
                required: "",
                placeholder: e.$t("modals.announcement.input_title")
            }, null, 8, OT), [[G, o.title]]), s[6] || (s[6] = a("br", null, null, -1)), z(a("textarea", {
                ref: "input",
                "onUpdate:modelValue": s[1] || (s[1] = d => o.text = d),
                required: "",
                placeholder: e.$t("modals.announcement.input_text")
            }, null, 8, jT), [[G, o.text]]), s[7] || (s[7] = a("br", null, null, -1)), z(a("input", {
                type: "text",
                "onUpdate:modelValue": s[2] || (s[2] = d => o.sessionName = d),
                placeholder: e.$t("modals.announcement.input_session")
            }, null, 8, UT), [[G, o.sessionName]]), a("div", HT, [a("button", qT, [b(l, {
                icon: "check-circle"
            }), v(" " + c(e.$t("common.button_send")), 1)]), a("button", {
                tabindex: "-1",
                type: "button",
                class: "button secondary",
                onClick: s[3] || (s[3] = d => i.close())
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + c(e.$t("common.button_cancel")), 1)])])], 32)]),
            _: 1
        })) : A("", !0)]),
        _: 1
    })
}
const Rd = O(VT, [["render", LT], ["__scopeId", "data-v-dc9f7d16"]])
  , zT = {
    name: "ModerationModal",
    components: {
        Modal: se,
        PlayerAvatar: da
    },
    computed: {
        ...M(["session", "grimoire", "modal"]),
        ...M("user", ["user", "accessToken"]),
        ...D("user", ["isModerator"])
    },
    data() {
        return {
            query: "",
            users: [],
            stats: null,
            bans: [],
            dirty: [],
            userEdit: null,
            count: 0,
            offset: 0,
            pageSize: 10,
            userBan: {
                id: "",
                reason: "",
                expires: ""
            },
            dtFormat: new Intl.DateTimeFormat(navigator.languages ? navigator.languages[0] : navigator.language,{
                dateStyle: "short",
                timeStyle: "short"
            }),
            isLoading: !1,
            flags: {
                newuser: "New User",
                "tos-agreed": "Agreed to ToS",
                "verified-email": "Verified E-Mail",
                "verified-phone": "Verified Phone Number",
                powerful: "Rainbow Unlock",
                "forced-username": "Locked Username",
                "forced-pronouns": "Locked Pronouns",
                "forced-avatar": "Locked Avatar",
                "forced-private": "Banned from Public Games",
                banned: "Banned"
            },
            avatarsSelected: [],
            avatars: {
                worldcup25: "World Cup 25"
            },
            borders: {
                deusexfiasco: "Deus ex Fiasco",
                worldcup25: "World Cup 25"
            },
            emotes: {
                bugreporter: "Bug Reporter",
                worldcup25: "World Cup 25"
            }
        }
    },
    methods: {
        ...$("session", ["join"]),
        ...U(["toggleModal"]),
        async search(e=0) {
            this.isLoading = !0,
            this.userEdit = null;
            const {count: s, rows: t} = await ne("moderator/search", {
                query: this.query,
                offset: e
            }, this.accessToken);
            this.offset = e,
            this.users = t || [],
            this.count = s,
            this.isLoading = !1
        },
        async getUser() {
            var n;
            if (!this.modal.params.userId)
                return;
            this.isLoading = !0,
            this.users = [],
            this.dirty = [];
            const {user: e={}, bans: s=[], stats: t} = await Oe(`moderator/${this.modal.params.userId}`, this.accessToken);
            this.userBan = {
                id: ((n = s == null ? void 0 : s.find(o => o.userIds.includes(e.id))) == null ? void 0 : n.id) || "",
                reason: "",
                expires: ""
            },
            this.userEdit = e,
            this.bans = s,
            this.stats = t,
            this.userEdit && !this.userEdit.cosmetics && (this.userEdit.cosmetics = {}),
            this.isLoading = !1
        },
        async saveUser() {
            if (!this.modal.params.userId || !this.dirty.length)
                return;
            (await ne(`moderator/${this.modal.params.userId}`, {
                user: Object.fromEntries(this.dirty.map(s => [s, this.userEdit[s]])),
                ban: this.userBan
            }, this.accessToken)).success && this.toggleModal(this.modal)
        },
        setDirty(e) {
            this.dirty.includes(e.target.name) || this.dirty.push(e.target.name)
        },
        clear(e) {
            delete this.userEdit.cosmetics[e],
            this.dirty.includes("cosmetics") || this.dirty.push("cosmetics")
        },
        toggleFlag(e) {
            this.userEdit.flags || (this.userEdit.flags = []),
            this.userEdit.flags.includes(e) ? this.userEdit.flags.splice(this.userEdit.flags.indexOf(e), 1) : this.userEdit.flags.push(e)
        },
        async joinSession(e) {
            this.session.sessionId || (await this.join(e),
            this.toggleModal(this.modal))
        },
        goBack() {
            this.session.sessionId ? this.toggleModal(this.modal) : this.modal.params.userId = ""
        }
    },
    watch: {
        "modal.name"() {
            this.modal.name === "moderation" && (this.modal.params.userId ? this.getUser() : this.$nextTick( () => this.$refs.search.focus()))
        },
        "modal.params.userId"() {
            this.modal.name === "moderation" && (this.modal.params.userId ? this.getUser() : this.search())
        }
    }
}
  , GT = {
    id: "moderation"
}
  , WT = ["disabled"]
  , FT = {
    key: 0
}
  , QT = ["onClick"]
  , ZT = ["data-tooltip"]
  , XT = ["disabled"]
  , KT = ["disabled"]
  , YT = {
    class: "options"
}
  , JT = ["checked", "onChange"]
  , $T = {
    key: 0
}
  , xT = {
    class: "ban"
}
  , eI = ["value", "title"]
  , sI = {
    key: 0
}
  , tI = ["value", "selected"]
  , iI = ["value", "selected"]
  , oI = ["value", "selected"]
  , nI = {
    key: 0
}
  , aI = {
    key: 1
}
  , rI = {
    key: 2
}
  , lI = {
    key: 3
}
  , cI = {
    key: 4
}
  , dI = {
    key: 0
}
  , uI = {
    key: 1,
    class: "edition"
}
  , gI = {
    key: 0
}
  , mI = {
    key: 1,
    class: "role"
}
  , hI = {
    class: "button-group"
};
function pI(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("PlayerAvatar")
      , d = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "moderation" && e.isModerator ? (r(),
        C(d, {
            key: 0,
            class: "moderation",
            onClose: s[23] || (s[23] = h => e.toggleModal(e.modal))
        }, {
            default: T( () => {
                var h, m, p, f, P, w, B, j, V;
                return [a("div", GT, [a("div", {
                    class: _(["content", {
                        loading: o.isLoading
                    }])
                }, [e.modal.params.userId ? (r(),
                u(y, {
                    key: 1
                }, [a("h4", null, "User Moderation: " + c(e.modal.params.userId), 1), o.userEdit ? (r(),
                u("form", {
                    key: 0,
                    id: "user",
                    onChange: s[21] || (s[21] = (...S) => i.setDirty && i.setDirty(...S)),
                    onSubmit: s[22] || (s[22] = R(S => i.saveUser(), ["prevent"])),
                    autocomplete: "off"
                }, [a("section", null, [a("label", null, [s[28] || (s[28] = a("span", null, "Username:", -1)), z(a("input", {
                    type: "text",
                    placeholder: "Username",
                    name: "username",
                    "onUpdate:modelValue": s[4] || (s[4] = S => o.userEdit.username = S),
                    required: "",
                    minlength: "3",
                    autocomplete: "false"
                }, null, 512), [[G, o.userEdit.username]])]), a("label", null, [s[29] || (s[29] = a("span", null, "Pronouns:", -1)), z(a("input", {
                    type: "text",
                    placeholder: "Pronouns",
                    name: "pronouns",
                    "onUpdate:modelValue": s[5] || (s[5] = S => o.userEdit.pronouns = S)
                }, null, 512), [[G, o.userEdit.pronouns]])]), a("label", null, [s[30] || (s[30] = a("span", null, "Email:", -1)), z(a("input", {
                    type: "email",
                    placeholder: "Username",
                    name: "email",
                    "onUpdate:modelValue": s[6] || (s[6] = S => o.userEdit.email = S),
                    disabled: e.user.level !== "special-tpi",
                    required: ""
                }, null, 8, XT), [[G, o.userEdit.email]])]), a("label", null, [s[32] || (s[32] = a("span", null, "Level:", -1)), z(a("select", {
                    "onUpdate:modelValue": s[7] || (s[7] = S => o.userEdit.level = S),
                    disabled: e.user.level !== "special-tpi",
                    name: "level"
                }, [...s[31] || (s[31] = [a("option", {
                    value: ""
                }, "None", -1), a("option", {
                    value: "patreon-townsfolk"
                }, " Patreon: Townsfolk ", -1), a("option", {
                    value: "patreon-minion"
                }, "Patreon: Minion", -1), a("option", {
                    value: "patreon-demon"
                }, "Patreon: Demon", -1), a("option", {
                    value: "special-free"
                }, "Special: Free", -1), a("option", {
                    value: "special-moderator"
                }, " Special: Moderator ", -1), a("option", {
                    value: "special-tpi"
                }, "Special: TPI", -1)])], 8, KT), [[be, o.userEdit.level]])]), a("div", null, [s[33] || (s[33] = a("span", null, "Flags:", -1)), a("div", YT, [(r(!0),
                u(y, null, N(o.flags, (S, E) => {
                    var I, Z;
                    return r(),
                    u("label", {
                        key: E,
                        class: _({
                            checked: (I = o.userEdit.flags) == null ? void 0 : I.includes(E)
                        })
                    }, [v(c(S) + " ", 1), a("input", {
                        type: "checkbox",
                        name: "flags",
                        checked: (Z = o.userEdit.flags) == null ? void 0 : Z.includes(E),
                        onChange: H => i.toggleFlag(E)
                    }, null, 40, JT)], 2)
                }
                ), 128))])]), (h = o.userEdit.flags) != null && h.includes("banned") ? (r(),
                u("div", $T, [s[38] || (s[38] = a("span", null, "Banned:", -1)), a("div", xT, [z(a("select", {
                    required: "",
                    "onUpdate:modelValue": s[8] || (s[8] = S => o.userBan.id = S),
                    name: "flags"
                }, [s[34] || (s[34] = a("option", {
                    value: ""
                }, "Select Reason", -1)), (r(!0),
                u(y, null, N(o.bans, S => (r(),
                u("option", {
                    key: S.id,
                    value: S.id,
                    title: S.reason
                }, c(S.reason.substring(0, 30)) + c(S.reason.length > 30 ? "..." : "") + " " + c(S.expires ? `(until ${o.dtFormat.format(new Date(S.expires))})` : ""), 9, eI))), 128)), s[35] || (s[35] = a("option", {
                    value: "-1"
                }, "New Reason", -1))], 512), [[be, o.userBan.id]]), o.userBan.id === "-1" ? (r(),
                u("div", sI, [a("label", null, [s[36] || (s[36] = v(" Reason: ", -1)), z(a("input", {
                    type: "text",
                    placeholder: "reason",
                    required: "",
                    "onUpdate:modelValue": s[9] || (s[9] = S => o.userBan.reason = S)
                }, null, 512), [[G, o.userBan.reason]])]), a("label", null, [s[37] || (s[37] = v(" Expires in: ", -1)), z(a("input", {
                    type: "number",
                    placeholder: "hours",
                    "onUpdate:modelValue": s[10] || (s[10] = S => o.userBan.expires = S)
                }, null, 512), [[G, o.userBan.expires]])])])) : A("", !0)])])) : A("", !0)]), a("section", null, [a("label", null, [s[39] || (s[39] = a("span", null, "Avatar:", -1)), z(a("input", {
                    type: "number",
                    placeholder: "Avatar",
                    name: "cosmetics",
                    "onUpdate:modelValue": s[11] || (s[11] = S => o.userEdit.cosmetics.avatar = S)
                }, null, 512), [[G, o.userEdit.cosmetics.avatar, void 0, {
                    number: !0
                }]])]), a("label", null, [s[40] || (s[40] = a("span", null, "Nameplate:", -1)), z(a("input", {
                    type: "text",
                    placeholder: "Nameplate",
                    name: "cosmetics",
                    "onUpdate:modelValue": s[12] || (s[12] = S => o.userEdit.cosmetics.border = S)
                }, null, 512), [[G, o.userEdit.cosmetics.border, void 0, {
                    number: !0
                }]])]), a("label", null, [a("span", null, [v(" Special Avatars: " + c(((m = o.userEdit.cosmetics.avatars) == null ? void 0 : m.length) || "") + " ", 1), (p = o.userEdit.cosmetics.avatars) != null && p.length ? (r(),
                C(l, {
                    key: 0,
                    icon: "trash-alt",
                    onClick: s[13] || (s[13] = R(S => i.clear("avatars"), ["stop"]))
                })) : A("", !0)]), z(a("select", {
                    name: "cosmetics",
                    multiple: "",
                    "onUpdate:modelValue": s[14] || (s[14] = S => o.userEdit.cosmetics.avatars = S)
                }, [(r(!0),
                u(y, null, N(Object.keys(o.avatars), S => {
                    var E;
                    return r(),
                    u("option", {
                        key: S,
                        value: S,
                        selected: (E = o.userEdit.cosmetics.avatars) == null ? void 0 : E.includes(S)
                    }, c(o.avatars[S]), 9, tI)
                }
                ), 128))], 512), [[be, o.userEdit.cosmetics.avatars]])]), a("label", null, [a("span", null, [v(" Special Nameplates: " + c(((f = o.userEdit.cosmetics.borders) == null ? void 0 : f.length) || "") + " ", 1), (P = o.userEdit.cosmetics.borders) != null && P.length ? (r(),
                C(l, {
                    key: 0,
                    icon: "trash-alt",
                    onClick: s[15] || (s[15] = R(S => i.clear("borders"), ["stop"]))
                })) : A("", !0)]), z(a("select", {
                    name: "cosmetics",
                    multiple: "",
                    "onUpdate:modelValue": s[16] || (s[16] = S => o.userEdit.cosmetics.borders = S)
                }, [(r(!0),
                u(y, null, N(Object.keys(o.borders), S => {
                    var E;
                    return r(),
                    u("option", {
                        key: S,
                        value: S,
                        selected: (E = o.userEdit.cosmetics.borders) == null ? void 0 : E.includes(S)
                    }, c(o.borders[S]), 9, iI)
                }
                ), 128))], 512), [[be, o.userEdit.cosmetics.borders]])]), a("label", null, [a("span", null, [v(" Special Emotes: " + c(((w = o.userEdit.cosmetics.emotes) == null ? void 0 : w.length) || "") + " ", 1), (B = o.userEdit.cosmetics.emotes) != null && B.length ? (r(),
                C(l, {
                    key: 0,
                    icon: "trash-alt",
                    onClick: s[17] || (s[17] = R(S => i.clear("emotes"), ["stop"]))
                })) : A("", !0)]), z(a("select", {
                    name: "cosmetics",
                    multiple: "",
                    "onUpdate:modelValue": s[18] || (s[18] = S => o.userEdit.cosmetics.emotes = S)
                }, [(r(!0),
                u(y, null, N(Object.keys(o.emotes), S => {
                    var E;
                    return r(),
                    u("option", {
                        key: S,
                        value: S,
                        selected: (E = o.userEdit.cosmetics.emotes) == null ? void 0 : E.includes(S)
                    }, c(o.emotes[S]), 9, oI)
                }
                ), 128))], 512), [[be, o.userEdit.cosmetics.emotes]])])]), a("section", null, [o.userEdit.patreonId ? (r(),
                u("label", nI, [s[41] || (s[41] = a("span", null, "Patreon ID:", -1)), a("b", null, c(o.userEdit.patreonId), 1)])) : A("", !0), a("label", null, [s[42] || (s[42] = a("span", null, "Registered:", -1)), a("b", null, c(o.dtFormat.format(new Date(o.userEdit.createdAt))), 1)]), a("label", null, [s[43] || (s[43] = a("span", null, "Avatar:", -1)), b(g, {
                    user: o.userEdit,
                    class: "avatar"
                }, null, 8, ["user"])]), a("label", null, [s[44] || (s[44] = a("span", null, "Last Login:", -1)), a("b", null, c(o.dtFormat.format(new Date(((j = o.userEdit.Tokens[0]) == null ? void 0 : j.createdAt) || o.userEdit.updatedAt))), 1)]), o.userEdit.Tokens.length ? (r(),
                u("label", aI, [s[45] || (s[45] = a("span", null, "Last Online:", -1)), a("b", null, c(o.dtFormat.format(new Date(o.userEdit.Tokens[0].updatedAt))), 1)])) : A("", !0), o.userEdit.Tokens.length ? (r(),
                u("label", rI, [s[46] || (s[46] = a("span", null, "Last Version:", -1)), a("b", null, c(o.userEdit.Tokens[0].version), 1)])) : A("", !0), o.userEdit.Tokens.length ? (r(),
                u("label", lI, [s[47] || (s[47] = a("span", null, "Last IP:", -1)), a("b", null, c(o.userEdit.Tokens[0].ip), 1)])) : A("", !0), o.userEdit.Tokens.length ? (r(),
                u("label", cI, [s[48] || (s[48] = a("span", null, "Last User Agent:", -1)), a("small", null, c(o.userEdit.Tokens[0].agent), 1)])) : A("", !0), (V = o.stats) != null && V.games ? (r(),
                u(y, {
                    key: 5
                }, [a("label", null, [a("span", null, c(e.$t("user.stats.storyteller")), 1), a("b", null, c(o.stats.storyteller), 1)]), a("label", null, [a("span", null, c(e.$t("user.stats.player")), 1), a("b", null, c(o.stats.player), 1)]), a("label", null, [a("span", null, c(e.$t("user.stats.edition")), 1), o.stats.editions.length ? (r(),
                u("b", uI, c(o.stats.editions[0].id) + ": " + c(o.stats.editions[0].value), 1)) : (r(),
                u("b", dI, c(e.$t("user.stats.none")), 1))]), a("label", null, [a("span", null, c(e.$t("user.stats.role")), 1), o.stats.roles.length ? (r(),
                u("b", mI, c(o.stats.roles[0].id) + ": " + c(o.stats.roles[0].value), 1)) : (r(),
                u("b", gI, c(e.$t("user.stats.none")), 1))])], 64)) : A("", !0), o.userEdit.SessionName ? (r(),
                u("label", {
                    key: 6,
                    onClick: s[19] || (s[19] = S => i.joinSession(o.userEdit.SessionName)),
                    class: _({
                        clickable: !e.session.sessionId
                    })
                }, [s[49] || (s[49] = a("span", null, "Current Session:", -1)), a("small", null, c(o.userEdit.SessionName), 1)], 2)) : A("", !0)]), a("div", hI, [a("button", {
                    type: "submit",
                    class: _(["button", {
                        disabled: !o.dirty.length,
                        primary: o.dirty.length
                    }])
                }, " Save ", 2), a("button", {
                    onClick: s[20] || (s[20] = S => i.goBack()),
                    class: "button"
                }, "Back")])], 32)) : A("", !0)], 64)) : (r(),
                u(y, {
                    key: 0
                }, [s[26] || (s[26] = a("h4", null, "User Moderation: Search", -1)), s[27] || (s[27] = v(' Enter User ID, name, email or IP to search for. "%" is a wildcard. ', -1)), a("form", {
                    id: "search",
                    onSubmit: s[1] || (s[1] = R(S => i.search(), ["prevent"]))
                }, [z(a("input", {
                    type: "text",
                    placeholder: "query",
                    "onUpdate:modelValue": s[0] || (s[0] = S => o.query = S),
                    ref: "search"
                }, null, 512), [[G, o.query]]), a("button", {
                    type: "submit",
                    class: "button",
                    disabled: !o.query
                }, " Search ", 8, WT)], 32), o.users.length ? (r(),
                u("table", FT, [s[24] || (s[24] = a("thead", null, [a("tr", null, [a("th", null, "ID"), a("th", null, "Username"), a("th", null, "Pronouns"), a("th", null, "Email"), a("th", null, "Level"), a("th", null, "Flags"), a("th", null, "Cosmetics"), a("th", null, "Registered"), a("th", null, "Last Login"), a("th", null, "Last IP"), a("th", null, "Last User Agent"), a("th", null, "Last App Version")])], -1)), a("tbody", null, [(r(!0),
                u(y, null, N(o.users, S => {
                    var E, I, Z, H, F;
                    return r(),
                    u("tr", {
                        key: S.id,
                        onClick: K => e.modal.params.userId = S.id
                    }, [a("td", null, c(S.id), 1), a("td", null, c(S.username), 1), a("td", null, c(S.pronouns), 1), a("td", null, c(S.email), 1), a("td", null, c(S.level), 1), a("td", null, c(S.flags.join(", ")), 1), a("td", null, [(r(!0),
                    u(y, null, N(S.cosmetics, (K, Y) => (r(),
                    u("div", {
                        key: Y
                    }, c(Y) + ": " + c(K), 1))), 128))]), a("td", null, c(o.dtFormat.format(new Date(S.createdAt))), 1), a("td", null, c(S.Tokens.length && o.dtFormat.format(new Date((E = S.Tokens[0]) == null ? void 0 : E.createdAt)) || ""), 1), a("td", null, c(S.Tokens.length && ((I = S.Tokens[0]) == null ? void 0 : I.ip) || ""), 1), a("td", {
                        class: "short",
                        "data-tooltip": (Z = S.Tokens[0]) == null ? void 0 : Z.agent
                    }, c(S.Tokens.length && ((H = S.Tokens[0]) == null ? void 0 : H.agent.substring(0, 20)) || ""), 9, ZT), a("td", null, c(S.Tokens.length && ((F = S.Tokens[0]) == null ? void 0 : F.version) || ""), 1)], 8, QT)
                }
                ), 128))])])) : A("", !0), o.count && o.count > o.users.length ? (r(),
                u(y, {
                    key: 1
                }, [o.offset ? (r(),
                u("button", {
                    key: 0,
                    class: "button",
                    onClick: s[2] || (s[2] = S => i.search(o.offset - o.pageSize))
                }, [b(l, {
                    icon: "arrow-circle-left"
                })])) : A("", !0), v(" Page " + c(1 + o.offset / o.pageSize) + " of " + c(Math.ceil(o.count / o.pageSize)) + " ", 1), o.offset + o.pageSize < o.count ? (r(),
                u("button", {
                    key: 1,
                    class: "button",
                    onClick: s[3] || (s[3] = S => i.search(o.offset + o.pageSize))
                }, [b(l, {
                    icon: "arrow-circle-right"
                })])) : A("", !0), s[25] || (s[25] = a("br", null, null, -1))], 64)) : A("", !0)], 64))], 2)])]
            }
            ),
            _: 1
        })) : A("", !0)]),
        _: 1
    })
}
const Dd = O(zT, [["render", pI], ["__scopeId", "data-v-99c84f2f"]])
  , AI = {
    name: "UserModal",
    components: {
        User: kl,
        Modal: se
    },
    computed: {
        ...M(["modal", "session", "players", "game"]),
        ...M("user", {
            accessToken: "accessToken",
            localUser: "user",
            relations: "relations"
        }),
        ...D("user", ["isStoryteller", "isModerator"]),
        ...D("players", ["seatedPlayerMap", "storytellerMap"]),
        grimoireAccess() {
            var e, s;
            return (s = (e = this.session.users.get(this.user.id)) == null ? void 0 : e.grimoireAccess) != null ? s : 0
        },
        isBlocked() {
            var e;
            return ((e = this.relations.get(this.user.id)) == null ? void 0 : e.type) === "block"
        }
    },
    data() {
        return {
            user: {
                loading: !0
            },
            isBlocking: !1,
            stats: {}
        }
    },
    methods: {
        ...U(["toggleModal"]),
        async loadUser() {
            if (this.modal.name === "user" && (this.user = {
                loading: !0
            },
            this.stats = {},
            this.modal.params.userId)) {
                const {user: e, stats: s} = await Oe(`user/${this.modal.params.userId}`, this.accessToken);
                this.user = e != null ? e : {
                    error: !0
                },
                this.stats = s != null ? s : {}
            }
        },
        toggleGrimoireAccess() {
            this.isStoryteller && (this.grimoireAccess < 1 || this.$store.commit("user/requestGrimoire", {
                id: this.user.id,
                status: this.grimoireAccess === 3 ? 2 : 3
            }))
        },
        async toggleCoST() {
            const e = this.storytellerMap.get(this.user.id);
            if (e)
                this.$store.commit("players/removeStoryteller", e);
            else if (this.user.id === this.localUser.id)
                this.$store.commit("players/addStoryteller", this.user);
            else if (this.players.storytellerRequests.includes(this.user.id))
                this.$store.commit("players/requestStoryteller", this.user);
            else
                try {
                    await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "modals.user.button_add_st",
                        text: ["modals.user.prompt_st", [this.user.username || this.user.id]]
                    }) && this.$store.commit("players/requestStoryteller", this.user)
                } catch {} finally {
                    this.toggleModal({
                        name: "user",
                        params: {
                            userId: this.user.id
                        }
                    })
                }
        },
        async kickUser() {
            try {
                await this.$store.dispatch("openDialogue", {
                    type: "confirm",
                    title: "modals.user.button_kick_user",
                    text: ["modals.user.prompt_kick", [this.user.username || this.user.id]]
                }) && this.$store.commit("session/kickUser", this.user.id)
            } catch {} finally {
                this.toggleModal({
                    name: "user",
                    params: {
                        userId: this.user.id
                    }
                })
            }
        },
        async blockUser() {
            try {
                this.isBlocking = !0,
                this.$store.dispatch("user/blockUser", this.user.id)
            } catch {} finally {
                this.isBlocking = !1
            }
        },
        moderate() {
            this.isModerator && this.toggleModal({
                name: "moderation",
                params: {
                    userId: this.user.id
                }
            })
        },
        closeModal() {
            this.modal.params.isFromUsers ? this.toggleModal({
                name: "users"
            }) : this.toggleModal(this.modal)
        }
    },
    beforeMount() {
        return this.loadUser()
    },
    watch: {
        "modal.params.userId"() {
            return this.loadUser()
        }
    }
}
  , bI = {
    class: "loader"
}
  , fI = {
    class: "content"
}
  , vI = {
    key: 1,
    class: "error"
}
  , yI = {
    class: "button-group"
};
function _I(e, s, t, n, o, i) {
    const l = k("User")
      , g = k("font-awesome-icon")
      , d = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "user" && e.modal.params.userId ? (r(),
        C(d, {
            key: 0,
            class: "user",
            onClose: i.closeModal
        }, {
            default: T( () => {
                var h, m, p;
                return [a("div", {
                    id: "user",
                    class: _({
                        loading: (h = o.user) == null ? void 0 : h.loading
                    })
                }, [a("div", bI, c(e.$t("modals.user.loading")), 1), a("div", fI, [a("h4", null, c(e.$t("modals.user.title")), 1), o.user.error ? (r(),
                u("div", vI, [b(g, {
                    icon: "exclamation-triangle"
                }), v(" " + c(e.$t("modals.user.error")), 1)])) : (r(),
                C(l, {
                    key: 0,
                    stats: o.stats,
                    user: o.user
                }, null, 8, ["stats", "user"])), a("div", yI, [e.session.users.has(o.user.id) ? (r(),
                u(y, {
                    key: 0
                }, [e.isStoryteller || e.isModerator ? (r(),
                u("div", {
                    key: 0,
                    class: _(["button", [e.storytellerMap.has(o.user.id) ? "secondary" : "primary"]]),
                    onClick: s[0] || (s[0] = f => i.toggleCoST())
                }, [b(g, {
                    icon: "crown"
                }), e.storytellerMap.has(o.user.id) ? (r(),
                u(y, {
                    key: 0
                }, [v(c(e.$t("modals.user.button_remove_st")), 1)], 64)) : e.players.storytellerRequests.includes(o.user.id) ? (r(),
                u(y, {
                    key: 1
                }, [v(c(e.$t("modals.user.button_cancel_st")), 1)], 64)) : (r(),
                u(y, {
                    key: 2
                }, [v(c(e.$t("modals.user.button_add_st")), 1)], 64))], 2)) : A("", !0), e.isStoryteller && i.grimoireAccess > 0 && ((m = e.session.users.get(o.user.id)) != null && m.isOnline) && !e.seatedPlayerMap.has(o.user.id) ? (r(),
                u("div", {
                    key: 1,
                    class: "button",
                    onClick: s[1] || (s[1] = f => i.toggleGrimoireAccess())
                }, [b(g, {
                    icon: "book-dead"
                }), v(" " + c(i.grimoireAccess === 3 ? e.$t("modals.user.grimoire_access_revoke") : e.$t("modals.user.grimoire_access_grant")), 1)])) : A("", !0), o.user.id !== e.localUser.id ? (r(),
                u("div", {
                    key: 2,
                    class: _(["button secondary", {
                        disabled: o.isBlocking
                    }]),
                    onClick: s[2] || (s[2] = f => i.blockUser())
                }, [b(g, {
                    icon: "user-xmark"
                }), v(" " + c(e.$t(`modals.user.button_${i.isBlocked ? "un" : ""}block_user`)), 1)], 2)) : A("", !0), (e.isStoryteller || e.isModerator) && o.user.id !== e.localUser.id && ((p = e.session.users.get(o.user.id)) != null && p.isOnline) ? (r(),
                u("div", {
                    key: 3,
                    class: "button secondary",
                    onClick: s[3] || (s[3] = f => i.kickUser())
                }, [b(g, {
                    icon: "user-slash"
                }), v(" " + c(e.$t("modals.user.button_kick_user")), 1)])) : A("", !0)], 64)) : A("", !0), e.isModerator ? (r(),
                u("div", {
                    key: 1,
                    class: "button secondary",
                    onClick: s[4] || (s[4] = f => i.moderate())
                }, [b(g, {
                    icon: "gavel"
                }), v(" " + c(e.$t("modals.user.button_mod_user")), 1)])) : A("", !0), a("div", {
                    class: "button",
                    onClick: s[5] || (s[5] = (...f) => i.closeModal && i.closeModal(...f))
                }, [b(g, {
                    icon: "times-circle"
                }), v(" " + c(e.$t("common.button_close")), 1)])])])], 2)]
            }
            ),
            _: 1
        }, 8, ["onClose"])) : A("", !0)]),
        _: 1
    })
}
const Ed = O(AI, [["render", _I], ["__scopeId", "data-v-4604da84"]])
  , Os = JSON.parse(`[{"name":"Afghanistan","prefix":"+93","emoji":"ð¦ð«","code":"AF","timezone":"Asia/Kabul"},{"name":"Aland Islands","prefix":"+358","emoji":"ð¦ð½","code":"AX","timezone":"Europe/Mariehamn"},{"name":"Albania","prefix":"+355","emoji":"ð¦ð±","code":"AL","timezone":"Europe/Tirane"},{"name":"Algeria","prefix":"+213","emoji":"ð©ð¿","code":"DZ","timezone":"Africa/Algiers"},{"name":"AmericanSamoa","prefix":"+1684","emoji":"ð¦ð¸","code":"AS","timezone":"Pacific/Pago_Pago"},{"name":"Andorra","prefix":"+376","emoji":"ð¦ð©","code":"AD","timezone":"Europe/Andorra"},{"name":"Angola","prefix":"+244","emoji":"ð¦ð´","code":"AO","timezone":"Africa/Luanda"},{"name":"Anguilla","prefix":"+1264","emoji":"ð¦ð®","code":"AI","timezone":"America/Anguilla"},{"name":"Antarctica","prefix":"+672","emoji":"ð¦ð¶","code":"AQ","timezone":"Antarctica/McMurdo"},{"name":"Antigua and Barbuda","prefix":"+1268","emoji":"ð¦ð¬","code":"AG","timezone":"America/Antigua"},{"name":"Argentina","prefix":"+54","emoji":"ð¦ð·","code":"AR","timezone":"America/Argentina/Buenos_Aires"},{"name":"Armenia","prefix":"+374","emoji":"ð¦ð²","code":"AM","timezone":"Asia/Yerevan"},{"name":"Aruba","prefix":"+297","emoji":"ð¦ð¼","code":"AW","timezone":"America/Aruba"},{"name":"Australia","prefix":"+61","emoji":"ð¦ðº","code":"AU","timezone":"Australia/Sydney"},{"name":"Austria","prefix":"+43","emoji":"ð¦ð¹","code":"AT","timezone":"Europe/Vienna"},{"name":"Azerbaijan","prefix":"+994","emoji":"ð¦ð¿","code":"AZ","timezone":"Asia/Baku"},{"name":"Bahamas","prefix":"+1242","emoji":"ð§ð¸","code":"BS","timezone":"America/Nassau"},{"name":"Bahrain","prefix":"+973","emoji":"ð§ð­","code":"BH","timezone":"Asia/Bahrain"},{"name":"Bangladesh","prefix":"+880","emoji":"ð§ð©","code":"BD","timezone":"Asia/Dhaka"},{"name":"Barbados","prefix":"+1246","emoji":"ð§ð§","code":"BB","timezone":"America/Barbados"},{"name":"Belarus","prefix":"+375","emoji":"ð§ð¾","code":"BY","timezone":"Europe/Minsk"},{"name":"Belgium","prefix":"+32","emoji":"ð§ðª","code":"BE","timezone":"Europe/Brussels"},{"name":"Belize","prefix":"+501","emoji":"ð§ð¿","code":"BZ","timezone":"America/Belize"},{"name":"Benin","prefix":"+229","emoji":"ð§ð¯","code":"BJ","timezone":"Africa/Porto-Novo"},{"name":"Bermuda","prefix":"+1441","emoji":"ð§ð²","code":"BM","timezone":"Atlantic/Bermuda"},{"name":"Bhutan","prefix":"+975","emoji":"ð§ð¹","code":"BT","timezone":"Asia/Thimphu"},{"name":"Bolivia, Plurinational State of","prefix":"+591","emoji":"ð§ð´","code":"BO","timezone":"America/La_Paz"},{"name":"Bosnia and Herzegovina","prefix":"+387","emoji":"ð§ð¦","code":"BA","timezone":"Europe/Sarajevo"},{"name":"Botswana","prefix":"+267","emoji":"ð§ð¼","code":"BW","timezone":"Africa/Gaborone"},{"name":"Brazil","prefix":"+55","emoji":"ð§ð·","code":"BR","timezone":"America/Sao_Paulo"},{"name":"British Indian Ocean Territory","prefix":"+246","emoji":"ð®ð´","code":"IO","timezone":"Indian/Chagos"},{"name":"Brunei Darussalam","prefix":"+673","emoji":"ð§ð³","code":"BN","timezone":"Asia/Brunei"},{"name":"Bulgaria","prefix":"+359","emoji":"ð§ð¬","code":"BG","timezone":"Europe/Sofia"},{"name":"Burkina Faso","prefix":"+226","emoji":"ð§ð«","code":"BF","timezone":"Africa/Ouagadougou"},{"name":"Burundi","prefix":"+257","emoji":"ð§ð®","code":"BI","timezone":"Africa/Bujumbura"},{"name":"Cambodia","prefix":"+855","emoji":"ð°ð­","code":"KH","timezone":"Asia/Phnom_Penh"},{"name":"Cameroon","prefix":"+237","emoji":"ð¨ð²","code":"CM","timezone":"Africa/Douala"},{"name":"Canada","prefix":"+1","emoji":"ð¨ð¦","code":"CA","timezone":"America/Toronto"},{"name":"Cape Verde","prefix":"+238","emoji":"ð¨ð»","code":"CV","timezone":"Atlantic/Cape_Verde"},{"name":"Cayman Islands","prefix":"+345","emoji":"ð°ð¾","code":"KY","timezone":"America/Cayman"},{"name":"Central African Republic","prefix":"+236","emoji":"ð¨ð«","code":"CF","timezone":"Africa/Bangui"},{"name":"Chad","prefix":"+235","emoji":"ð¹ð©","code":"TD","timezone":"Africa/Ndjamena"},{"name":"Chile","prefix":"+56","emoji":"ð¨ð±","code":"CL","timezone":"America/Santiago"},{"name":"China","prefix":"+86","emoji":"ð¨ð³","code":"CN","timezone":"Asia/Shanghai"},{"name":"Christmas Island","prefix":"+61","emoji":"ð¨ð½","code":"CX","timezone":"Indian/Christmas"},{"name":"Cocos (Keeling) Islands","prefix":"+61","emoji":"ð¨ð¨","code":"CC","timezone":"Indian/Cocos"},{"name":"Colombia","prefix":"+57","emoji":"ð¨ð´","code":"CO","timezone":"America/Bogota"},{"name":"Comoros","prefix":"+269","emoji":"ð°ð²","code":"KM","timezone":"Indian/Comoro"},{"name":"Congo","prefix":"+242","emoji":"ð¨ð¬","code":"CG","timezone":"Africa/Brazzaville"},{"name":"Congo, The Democratic Republic of the Congo","prefix":"+243","emoji":"ð¨ð©","code":"CD","timezone":"Africa/Kinshasa"},{"name":"Cook Islands","prefix":"+682","emoji":"ð¨ð°","code":"CK","timezone":"Pacific/Rarotonga"},{"name":"Costa Rica","prefix":"+506","emoji":"ð¨ð·","code":"CR","timezone":"America/Costa_Rica"},{"name":"Cote d'Ivoire","prefix":"+225","emoji":"ð¨ð®","code":"CI","timezone":"Africa/Abidjan"},{"name":"Croatia","prefix":"+385","emoji":"ð­ð·","code":"HR","timezone":"Europe/Zagreb"},{"name":"Cuba","prefix":"+53","emoji":"ð¨ðº","code":"CU","timezone":"America/Havana"},{"name":"Cyprus","prefix":"+357","emoji":"ð¨ð¾","code":"CY","timezone":"Asia/Nicosia"},{"name":"Czech Republic","prefix":"+420","emoji":"ð¨ð¿","code":"CZ","timezone":"Europe/Prague"},{"name":"Denmark","prefix":"+45","emoji":"ð©ð°","code":"DK","timezone":"Europe/Copenhagen"},{"name":"Djibouti","prefix":"+253","emoji":"ð©ð¯","code":"DJ","timezone":"Africa/Djibouti"},{"name":"Dominica","prefix":"+1767","emoji":"ð©ð²","code":"DM","timezone":"America/Dominica"},{"name":"Dominican Republic","prefix":"+1849","emoji":"ð©ð´","code":"DO","timezone":"America/Santo_Domingo"},{"name":"Ecuador","prefix":"+593","emoji":"ðªð¨","code":"EC","timezone":"America/Guayaquil"},{"name":"Egypt","prefix":"+20","emoji":"ðªð¬","code":"EG","timezone":"Africa/Cairo"},{"name":"El Salvador","prefix":"+503","emoji":"ð¸ð»","code":"SV","timezone":"America/El_Salvador"},{"name":"Equatorial Guinea","prefix":"+240","emoji":"ð¬ð¶","code":"GQ","timezone":"Africa/Malabo"},{"name":"Eritrea","prefix":"+291","emoji":"ðªð·","code":"ER","timezone":"Africa/Asmara"},{"name":"Estonia","prefix":"+372","emoji":"ðªðª","code":"EE","timezone":"Europe/Tallinn"},{"name":"Ethiopia","prefix":"+251","emoji":"ðªð¹","code":"ET","timezone":"Africa/Addis_Ababa"},{"name":"Falkland Islands (Malvinas)","prefix":"+500","emoji":"ð«ð°","code":"FK","timezone":"Atlantic/Stanley"},{"name":"Faroe Islands","prefix":"+298","emoji":"ð«ð´","code":"FO","timezone":"Atlantic/Faroe"},{"name":"Fiji","prefix":"+679","emoji":"ð«ð¯","code":"FJ","timezone":"Pacific/Fiji"},{"name":"Finland","prefix":"+358","emoji":"ð«ð®","code":"FI","timezone":"Europe/Helsinki"},{"name":"France","prefix":"+33","emoji":"ð«ð·","code":"FR","timezone":"Europe/Paris"},{"name":"French Guiana","prefix":"+594","emoji":"ð¬ð«","code":"GF","timezone":"America/Cayenne"},{"name":"French Polynesia","prefix":"+689","emoji":"ðµð«","code":"PF","timezone":"Pacific/Tahiti"},{"name":"Gabon","prefix":"+241","emoji":"ð¬ð¦","code":"GA","timezone":"Africa/Libreville"},{"name":"Gambia","prefix":"+220","emoji":"ð¬ð²","code":"GM","timezone":"Africa/Banjul"},{"name":"Georgia","prefix":"+995","emoji":"ð¬ðª","code":"GE","timezone":"Asia/Tbilisi"},{"name":"Germany","prefix":"+49","emoji":"ð©ðª","code":"DE","timezone":"Europe/Berlin"},{"name":"Ghana","prefix":"+233","emoji":"ð¬ð­","code":"GH","timezone":"Africa/Accra"},{"name":"Gibraltar","prefix":"+350","emoji":"ð¬ð®","code":"GI","timezone":"Europe/Gibraltar"},{"name":"Greece","prefix":"+30","emoji":"ð¬ð·","code":"GR","timezone":"Europe/Athens"},{"name":"Greenland","prefix":"+299","emoji":"ð¬ð±","code":"GL","timezone":"America/Godthab"},{"name":"Grenada","prefix":"+1473","emoji":"ð¬ð©","code":"GD","timezone":"America/Grenada"},{"name":"Guadeloupe","prefix":"+590","emoji":"ð¬ðµ","code":"GP","timezone":"America/Guadeloupe"},{"name":"Guam","prefix":"+1671","emoji":"ð¬ðº","code":"GU","timezone":"Pacific/Guam"},{"name":"Guatemala","prefix":"+502","emoji":"ð¬ð¹","code":"GT","timezone":"America/Guatemala"},{"name":"Guernsey","prefix":"+44","emoji":"ð¬ð¬","code":"GG","timezone":"Europe/Guernsey"},{"name":"Guinea","prefix":"+224","emoji":"ð¬ð³","code":"GN","timezone":"Africa/Conakry"},{"name":"Guinea-Bissau","prefix":"+245","emoji":"ð¬ð¼","code":"GW","timezone":"Africa/Bissau"},{"name":"Guyana","prefix":"+592","emoji":"ð¬ð¾","code":"GY","timezone":"America/Guyana"},{"name":"Haiti","prefix":"+509","emoji":"ð­ð¹","code":"HT","timezone":"America/Port-au-Prince"},{"name":"Holy See (Vatican City State)","prefix":"+379","emoji":"ð»ð¦","code":"VA","timezone":"Europe/Vatican"},{"name":"Honduras","prefix":"+504","emoji":"ð­ð³","code":"HN","timezone":"America/Tegucigalpa"},{"name":"Hong Kong","prefix":"+852","emoji":"ð­ð°","code":"HK","timezone":"Asia/Hong_Kong"},{"name":"Hungary","prefix":"+36","emoji":"ð­ðº","code":"HU","timezone":"Europe/Budapest"},{"name":"Iceland","prefix":"+354","emoji":"ð®ð¸","code":"IS","timezone":"Atlantic/Reykjavik"},{"name":"India","prefix":"+91","emoji":"ð®ð³","code":"IN","timezone":"Asia/Kolkata"},{"name":"Indonesia","prefix":"+62","emoji":"ð®ð©","code":"ID","timezone":"Asia/Jakarta"},{"name":"Iran, Islamic Republic of Persian Gulf","prefix":"+98","emoji":"ð®ð·","code":"IR","timezone":"Asia/Tehran"},{"name":"Iraq","prefix":"+964","emoji":"ð®ð·","code":"IQ","timezone":"Asia/Baghdad"},{"name":"Ireland","prefix":"+353","emoji":"ð®ðª","code":"IE","timezone":"Europe/Dublin"},{"name":"Isle of Man","prefix":"+44","emoji":"ð®ð²","code":"IM","timezone":"Europe/Isle_of_Man"},{"name":"Israel","prefix":"+972","emoji":"ð®ð±","code":"IL","timezone":"Asia/Jerusalem"},{"name":"Italy","prefix":"+39","emoji":"ð®ð¹","code":"IT","timezone":"Europe/Rome"},{"name":"Jamaica","prefix":"+1876","emoji":"ð¯ð²","code":"JM","timezone":"America/Jamaica"},{"name":"Japan","prefix":"+81","emoji":"ð¯ðµ","code":"JP","timezone":"Asia/Tokyo"},{"name":"Jersey","prefix":"+44","emoji":"ð¯ðª","code":"JE","timezone":"Europe/Jersey"},{"name":"Jordan","prefix":"+962","emoji":"ð¯ð´","code":"JO","timezone":"Asia/Amman"},{"name":"Kazakhstan","prefix":"+77","emoji":"ð°ð¿","code":"KZ","timezone":"Asia/Almaty"},{"name":"Kenya","prefix":"+254","emoji":"ð°ðª","code":"KE","timezone":"Africa/Nairobi"},{"name":"Kiribati","prefix":"+686","emoji":"ð°ð®","code":"KI","timezone":"Pacific/Tarawa"},{"name":"Korea, Democratic People's Republic of Korea","prefix":"+850","emoji":"ð°ðµ","code":"KP","timezone":"Asia/Pyongyang"},{"name":"Korea, Republic of South Korea","prefix":"+82","emoji":"ð°ð·","code":"KR","timezone":"Asia/Seoul"},{"name":"Kuwait","prefix":"+965","emoji":"ð°ð¼","code":"KW","timezone":"Asia/Kuwait"},{"name":"Kyrgyzstan","prefix":"+996","emoji":"ð°ð¬","code":"KG","timezone":"Asia/Bishkek"},{"name":"Laos","prefix":"+856","emoji":"ð±ð¦","code":"LA","timezone":"Asia/Vientiane"},{"name":"Latvia","prefix":"+371","emoji":"ð±ð»","code":"LV","timezone":"Europe/Riga"},{"name":"Lebanon","prefix":"+961","emoji":"ð±ð§","code":"LB","timezone":"Asia/Beirut"},{"name":"Lesotho","prefix":"+266","emoji":"ð±ð¸","code":"LS","timezone":"Africa/Maseru"},{"name":"Liberia","prefix":"+231","emoji":"ð±ð·","code":"LR","timezone":"Africa/Monrovia"},{"name":"Libyan Arab Jamahiriya","prefix":"+218","emoji":"ð±ð¾","code":"LY","timezone":"Africa/Tripoli"},{"name":"Liechtenstein","prefix":"+423","emoji":"ð±ð®","code":"LI","timezone":"Europe/Vaduz"},{"name":"Lithuania","prefix":"+370","emoji":"ð±ð¹","code":"LT","timezone":"Europe/Vilnius"},{"name":"Luxembourg","prefix":"+352","emoji":"ð±ðº","code":"LU","timezone":"Europe/Luxembourg"},{"name":"Macao","prefix":"+853","emoji":"ð²ð´","code":"MO","timezone":"Asia/Macau"},{"name":"Macedonia","prefix":"+389","emoji":"ð²ð°","code":"MK","timezone":"Europe/Skopje"},{"name":"Madagascar","prefix":"+261","emoji":"ð²ð¬","code":"MG","timezone":"Indian/Antananarivo"},{"name":"Malawi","prefix":"+265","emoji":"ð²ð¼","code":"MW","timezone":"Africa/Blantyre"},{"name":"Malaysia","prefix":"+60","emoji":"ð²ð¾","code":"MY","timezone":"Asia/Kuala_Lumpur"},{"name":"Maldives","prefix":"+960","emoji":"ð²ð»","code":"MV","timezone":"Indian/Maldives"},{"name":"Mali","prefix":"+223","emoji":"ð²ð±","code":"ML","timezone":"Africa/Bamako"},{"name":"Malta","prefix":"+356","emoji":"ð²ð¹","code":"MT","timezone":"Europe/Malta"},{"name":"Marshall Islands","prefix":"+692","emoji":"ð²ð­","code":"MH","timezone":"Pacific/Majuro"},{"name":"Martinique","prefix":"+596","emoji":"ð²ð¶","code":"MQ","timezone":"America/Martinique"},{"name":"Mauritania","prefix":"+222","emoji":"ð²ð·","code":"MR","timezone":"Africa/Nouakchott"},{"name":"Mauritius","prefix":"+230","emoji":"ð²ðº","code":"MU","timezone":"Indian/Mauritius"},{"name":"Mayotte","prefix":"+262","emoji":"ð¾ð¹","code":"YT","timezone":"Indian/Mayotte"},{"name":"Mexico","prefix":"+52","emoji":"ð²ð½","code":"MX","timezone":"America/Mexico_City"},{"name":"Micronesia, Federated States of Micronesia","prefix":"+691","emoji":"ð«ð²","code":"FM","timezone":"Pacific/Chuuk"},{"name":"Moldova","prefix":"+373","emoji":"ð²ð©","code":"MD","timezone":"Europe/Chisinau"},{"name":"Monaco","prefix":"+377","emoji":"ð²ð¨","code":"MC","timezone":"Europe/Monaco"},{"name":"Mongolia","prefix":"+976","emoji":"ð²ð³","code":"MN","timezone":"Asia/Ulaanbaatar"},{"name":"Montenegro","prefix":"+382","emoji":"ð²ðª","code":"ME","timezone":"Europe/Podgorica"},{"name":"Montserrat","prefix":"+1664","emoji":"ð²ð¸","code":"MS","timezone":"America/Montserrat"},{"name":"Morocco","prefix":"+212","emoji":"ð²ð¦","code":"MA","timezone":"Africa/Casablanca"},{"name":"Mozambique","prefix":"+258","emoji":"ð²ð¿","code":"MZ","timezone":"Africa/Maputo"},{"name":"Myanmar","prefix":"+95","emoji":"ð²ð²","code":"MM","timezone":"Asia/Yangon"},{"name":"Namibia","emoji":"ð³ð¦","prefix":"+264","code":"NA","timezone":"Africa/Windhoek"},{"name":"Nauru","prefix":"+674","emoji":"ð³ð·","code":"NR","timezone":"Pacific/Nauru"},{"name":"Nepal","prefix":"+977","emoji":"ð³ðµ","code":"NP","timezone":"Asia/Kathmandu"},{"name":"Netherlands","prefix":"+31","emoji":"ð³ð±","code":"NL","timezone":"Europe/Amsterdam"},{"name":"Netherlands Antilles","prefix":"+599","emoji":"ð§ð¶","code":"AN","timezone":"America/Curacao"},{"name":"New Caledonia","prefix":"+687","emoji":"ð³ð¨","code":"NC","timezone":"Pacific/Noumea"},{"name":"New Zealand","prefix":"+64","emoji":"ð³ð¿","code":"NZ","timezone":"Pacific/Auckland"},{"name":"Nicaragua","prefix":"+505","emoji":"ð³ð®","code":"NI","timezone":"America/Managua"},{"name":"Niger","prefix":"+227","emoji":"ð³ðª","code":"NE","timezone":"Africa/Niamey"},{"name":"Nigeria","prefix":"+234","emoji":"ð³ð¬","code":"NG","timezone":"Africa/Lagos"},{"name":"Niue","prefix":"+683","emoji":"ð³ðº","code":"NU","timezone":"Pacific/Niue"},{"name":"Norfolk Island","prefix":"+672","emoji":"ð³ð«","code":"NF","timezone":"Pacific/Norfolk"},{"name":"Northern Mariana Islands","prefix":"+1670","emoji":"ð²ðµ","code":"MP","timezone":"Pacific/Saipan"},{"name":"Norway","prefix":"+47","emoji":"ð³ð´","code":"NO","timezone":"Europe/Oslo"},{"name":"Oman","prefix":"+968","emoji":"ð´ð²","code":"OM","timezone":"Asia/Muscat"},{"name":"Pakistan","prefix":"+92","emoji":"ðµð°","code":"PK","timezone":"Asia/Karachi"},{"name":"Palau","prefix":"+680","emoji":"ðµð¼","code":"PW","timezone":"Pacific/Palau"},{"name":"Palestinian Territory, Occupied","prefix":"+970","emoji":"ðµð¸","code":"PS","timezone":"Asia/Hebron"},{"name":"Panama","prefix":"+507","emoji":"ðµð¦","code":"PA","timezone":"America/Panama"},{"name":"Papua New Guinea","prefix":"+675","emoji":"ðµð¬","code":"PG","timezone":"Pacific/Port_Moresby"},{"name":"Paraguay","prefix":"+595","emoji":"ðµð¾","code":"PY","timezone":"America/Asuncion"},{"name":"Peru","prefix":"+51","emoji":"ðµðª","code":"PE","timezone":"America/Lima"},{"name":"Philippines","prefix":"+63","emoji":"ðµð­","code":"PH","timezone":"Asia/Manila"},{"name":"Pitcairn","prefix":"+872","emoji":"ðµð³","code":"PN","timezone":"Pacific/Pitcairn"},{"name":"Poland","prefix":"+48","emoji":"ðµð±","code":"PL","timezone":"Europe/Warsaw"},{"name":"Portugal","prefix":"+351","emoji":"ðµð¹","code":"PT","timezone":"Europe/Lisbon"},{"name":"Puerto Rico","prefix":"+1939","emoji":"ðµð·","code":"PR","timezone":"America/Puerto_Rico"},{"name":"Qatar","prefix":"+974","emoji":"ð¶ð¦","code":"QA","timezone":"Asia/Qatar"},{"name":"Romania","prefix":"+40","emoji":"ð·ð´","code":"RO","timezone":"Europe/Bucharest"},{"name":"Russia","prefix":"+7","emoji":"ð·ðº","code":"RU","timezone":"Europe/Kaliningrad"},{"name":"Rwanda","prefix":"+250","emoji":"ð·ð¼","code":"RW","timezone":"Africa/Kigali"},{"name":"Reunion","prefix":"+262","emoji":"ð·ðª","code":"RE","timezone":"Indian/Reunion"},{"name":"Saint Barthelemy","prefix":"+590","emoji":"ð§ð±","code":"BL","timezone":"America/St_Barthelemy"},{"name":"Saint Helena, Ascension and Tristan Da Cunha","prefix":"+290","emoji":"ð¸ð­","code":"SH","timezone":"Atlantic/St_Helena"},{"name":"Saint Kitts and Nevis","prefix":"+1869","emoji":"ð°ð³","code":"KN","timezone":"America/St_Kitts"},{"name":"Saint Lucia","prefix":"+1758","emoji":"ð±ð¨","code":"LC","timezone":"America/St_Lucia"},{"name":"Saint Martin","prefix":"+590","emoji":"ð²ð«","code":"MF","timezone":"America/Marigot"},{"name":"Saint Pierre and Miquelon","prefix":"+508","emoji":"ðµð²","code":"PM","timezone":"America/Miquelon"},{"name":"Saint Vincent and the Grenadines","prefix":"+1784","emoji":"ð»ð¨","code":"VC","timezone":"America/St_Vincent"},{"name":"Samoa","prefix":"+685","emoji":"ð¼ð¸","code":"WS","timezone":"Pacific/Apia"},{"name":"San Marino","prefix":"+378","emoji":"ð¸ð²","code":"SM","timezone":"Europe/San_Marino"},{"name":"Sao Tome and Principe","prefix":"+239","emoji":"ð¸ð¹","code":"ST","timezone":"Africa/Sao_Tome"},{"name":"Saudi Arabia","prefix":"+966","emoji":"ð¸ð¦","code":"SA","timezone":"Asia/Riyadh"},{"name":"Senegal","prefix":"+221","emoji":"ð¸ð³","code":"SN","timezone":"Africa/Dakar"},{"name":"Serbia","prefix":"+381","emoji":"ð·ð¸","code":"RS","timezone":"Europe/Belgrade"},{"name":"Seychelles","prefix":"+248","emoji":"ð¸ð¨","code":"SC","timezone":"Indian/Mahe"},{"name":"Sierra Leone","prefix":"+232","emoji":"ð¸ð±","code":"SL","timezone":"Africa/Freetown"},{"name":"Singapore","prefix":"+65","emoji":"ð¸ð¬","code":"SG","timezone":"Asia/Singapore"},{"name":"Slovakia","prefix":"+421","emoji":"ð¸ð°","code":"SK","timezone":"Europe/Bratislava"},{"name":"Slovenia","prefix":"+386","emoji":"ð¸ð®","code":"SI","timezone":"Europe/Ljubljana"},{"name":"Solomon Islands","prefix":"+677","emoji":"ð¸ð§","code":"SB","timezone":"Pacific/Guadalcanal"},{"name":"Somalia","prefix":"+252","emoji":"ð¸ð´","code":"SO","timezone":"Africa/Mogadishu"},{"name":"South Africa","prefix":"+27","emoji":"ð¿ð¦","code":"ZA","timezone":"Africa/Johannesburg"},{"name":"South Sudan","prefix":"+211","emoji":"ð¸ð¸","code":"SS","timezone":"Africa/Juba"},{"name":"South Georgia and the South Sandwich Islands","prefix":"+500","emoji":"ð¬ð¸","code":"GS","timezone":"Atlantic/South_Georgia"},{"name":"Spain","prefix":"+34","emoji":"ðªð¸","code":"ES","timezone":"Europe/Madrid"},{"name":"Sri Lanka","prefix":"+94","emoji":"ð±ð°","code":"LK","timezone":"Asia/Colombo"},{"name":"Sudan","prefix":"+249","emoji":"ð¸ð©","code":"SD","timezone":"Africa/Khartoum"},{"name":"Suriname","prefix":"+597","emoji":"ð¸ð·","code":"SR","timezone":"America/Paramaribo"},{"name":"Svalbard and Jan Mayen","prefix":"+47","emoji":"ð¸ð¯","code":"SJ","timezone":"Arctic/Longyearbyen"},{"name":"Swaziland","prefix":"+268","emoji":"ð¸ð¿","code":"SZ","timezone":"Africa/Mbabane"},{"name":"Sweden","prefix":"+46","emoji":"ð¸ðª","code":"SE","timezone":"Europe/Stockholm"},{"name":"Switzerland","prefix":"+41","emoji":"ð¨ð­","code":"CH","timezone":"Europe/Zurich"},{"name":"Syrian Arab Republic","prefix":"+963","emoji":"ð¸ð¾","code":"SY","timezone":"Asia/Damascus"},{"name":"Taiwan","prefix":"+886","emoji":"ð¹ð¼","code":"TW","timezone":"Asia/Taipei"},{"name":"Tajikistan","prefix":"+992","emoji":"ð¹ð¯","code":"TJ","timezone":"Asia/Dushanbe"},{"name":"Tanzania, United Republic of Tanzania","prefix":"+255","emoji":"ð¹ð¿","code":"TZ","timezone":"Africa/Dar_es_Salaam"},{"name":"Thailand","prefix":"+66","emoji":"ð¹ð­","code":"TH","timezone":"Asia/Bangkok"},{"name":"Timor-Leste","prefix":"+670","emoji":"ð¹ð±","code":"TL","timezone":"Asia/Dili"},{"name":"Togo","prefix":"+228","emoji":"ð¹ð¬","code":"TG","timezone":"Africa/Lome"},{"name":"Tokelau","prefix":"+690","emoji":"ð¹ð°","code":"TK","timezone":"Pacific/Fakaofo"},{"name":"Tonga","prefix":"+676","emoji":"ð¹ð´","code":"TO","timezone":"Pacific/Tongatapu"},{"name":"Trinidad and Tobago","prefix":"+1868","emoji":"ð¹ð¹","code":"TT","timezone":"America/Port_of_Spain"},{"name":"Tunisia","prefix":"+216","emoji":"ð¹ð³","code":"TN","timezone":"Africa/Tunis"},{"name":"Turkey","prefix":"+90","emoji":"ð¹ð·","code":"TR","timezone":"Europe/Istanbul"},{"name":"Turkmenistan","prefix":"+993","emoji":"ð¹ð²","code":"TM","timezone":"Asia/Ashgabat"},{"name":"Turks and Caicos Islands","prefix":"+1649","emoji":"ð¹ð¨","code":"TC","timezone":"America/Grand_Turk"},{"name":"Tuvalu","prefix":"+688","emoji":"ð¹ð»","code":"TV","timezone":"Pacific/Funafuti"},{"name":"Uganda","prefix":"+256","emoji":"ðºð¬","code":"UG","timezone":"Africa/Kampala"},{"name":"Ukraine","prefix":"+380","emoji":"ðºð¦","code":"UA","timezone":"Europe/Kiev"},{"name":"United Arab Emirates","prefix":"+971","emoji":"ð¦ðª","code":"AE","timezone":"Asia/Dubai"},{"name":"United Kingdom","prefix":"+44","emoji":"ð¬ð§","code":"GB","timezone":"Europe/London"},{"name":"United States","prefix":"+1","emoji":"ðºð¸","code":"US","timezone":"America/New_York"},{"name":"Uruguay","prefix":"+598","emoji":"ðºð¾","code":"UY","timezone":"America/Montevideo"},{"name":"Uzbekistan","prefix":"+998","emoji":"ðºð¿","code":"UZ","timezone":"Asia/Samarkand"},{"name":"Vanuatu","prefix":"+678","emoji":"ð»ðº","code":"VU","timezone":"Pacific/Efate"},{"name":"Venezuela, Bolivarian Republic of Venezuela","prefix":"+58","emoji":"ð»ðª","code":"VE","timezone":"America/Caracas"},{"name":"Vietnam","prefix":"+84","emoji":"ð»ð³","code":"VN","timezone":"Asia/Ho_Chi_Minh"},{"name":"Virgin Islands, British","prefix":"+1284","emoji":"ð»ð¬","code":"VG","timezone":"America/Tortola"},{"name":"Virgin Islands, U.S.","prefix":"+1340","emoji":"ð»ð®","code":"VI","timezone":"America/St_Thomas"},{"name":"Wallis and Futuna","prefix":"+681","emoji":"ð¼ð«","code":"WF","timezone":"Pacific/Wallis"},{"name":"Yemen","prefix":"+967","emoji":"ð¾ðª","code":"YE","timezone":"Asia/Aden"},{"name":"Zambia","prefix":"+260","emoji":"ð¿ð²","code":"ZM","timezone":"Africa/Lusaka"},{"name":"Zimbabwe","prefix":"+263","emoji":"ð¿ð¼","code":"ZW","timezone":"Africa/Harare"}]`)
  , wI = {
    components: {
        Modal: se
    },
    computed: {
        ...M(["modal"]),
        ...M("user", ["accessToken", "user"]),
        isVerified() {
            var e;
            return this.user ? (e = this.user.flags) == null ? void 0 : e.includes("verified-phone") : !1
        }
    },
    data() {
        var t, n, o;
        let e = ""
          , s = ((t = Os.find(i => i.timezone === Intl.DateTimeFormat().resolvedOptions().timeZone)) == null ? void 0 : t.code) || "+1";
        try {
            s = (n = localStorage.getItem("phone-prefix")) != null ? n : s,
            e = (o = localStorage.getItem("phone-number")) != null ? o : e
        } catch {}
        return {
            prefix: s,
            phone: e,
            code: "",
            isSent: !!localStorage.getItem("phone-number"),
            loading: !1,
            error: null,
            phoneCodes: Os
        }
    },
    methods: {
        ...U(["toggleModal"]),
        cleanPhone() {
            this.phone = this.phone.replace(/[^\d]/gi, "").replace(/^0+/gi, "")
        },
        reset() {
            localStorage.removeItem("phone-prefix"),
            localStorage.removeItem("phone-number"),
            this.phone = "",
            this.isSent = !1,
            this.code = ""
        },
        async submit() {
            var t, n;
            this.cleanPhone(),
            this.loading = !0,
            this.error = null;
            const e = (n = (t = Os.find(o => o.code === this.prefix)) == null ? void 0 : t.prefix) != null ? n : "+1"
              , s = await ne("verify", {
                type: "phone",
                prefix: e,
                phone: this.phone,
                code: this.code
            }, this.accessToken);
            this.loading = !1,
            s.success ? this.isSent ? (localStorage.removeItem("phone-prefix"),
            localStorage.removeItem("phone-number"),
            this.isVerified || this.$store.commit("user/updateUser", {
                flags: [...this.user.flags, "verified-phone"]
            })) : (localStorage.setItem("phone-prefix", this.prefix),
            localStorage.setItem("phone-number", this.phone),
            this.isSent = !0) : (this.error = s.status,
            this.error === "restart" || this.error === 404 ? this.reset() : this.code = "")
        },
        close() {
            document.getElementById("app").focus(),
            this.toggleModal({
                name: "verification"
            })
        }
    }
}
  , kI = {
    key: 0
}
  , CI = {
    key: 1
}
  , SI = {
    key: 2
}
  , PI = {
    key: 3,
    class: "error"
}
  , TI = ["title"]
  , II = ["value"]
  , MI = ["disabled"]
  , RI = {
    key: 0
}
  , DI = {
    class: "button-group"
}
  , EI = ["disabled"]
  , NI = ["disabled"]
  , BI = {
    key: 5,
    class: "button-group"
};
function VI(e, s, t, n, o, i) {
    const l = k("i18n-t")
      , g = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "verification" ? (r(),
        C(g, {
            key: 0,
            class: _(["verification", {
                loading: o.loading
            }]),
            onClose: s[8] || (s[8] = d => i.close())
        }, {
            header: T( () => [v(c(e.$t("modals.verification.title")), 1)]),
            default: T( () => [s[12] || (s[12] = a("div", {
                class: "loader"
            }, null, -1)), i.isVerified ? (r(),
            u("p", kI, c(e.$t("modals.verification.success")), 1)) : o.isSent ? (r(),
            u("p", SI, c(e.$t("modals.verification.code_sent")), 1)) : (r(),
            u("p", CI, [a("b", null, c(e.$t("modals.verification.text_title")), 1), s[9] || (s[9] = a("br", null, null, -1)), b(l, {
                keypath: "modals.verification.text_body",
                scope: "global"
            }, {
                default: T( () => [a("b", null, c(e.$t("modals.verification.text_body2")), 1)]),
                _: 1
            }), s[10] || (s[10] = a("br", null, null, -1)), a("b", null, c(e.$t("modals.verification.text_footer")), 1)])), o.error ? (r(),
            u("div", PI, [o.error === 403 && o.isSent ? (r(),
            C(l, {
                key: 0,
                keypath: "modals.verification.error_403",
                scope: "global"
            }, {
                default: T( () => [...s[11] || (s[11] = [a("a", {
                    href: "mailto:support@botc.app",
                    target: "_blank"
                }, "support@botc.app", -1)])]),
                _: 1
            })) : o.error === "cooldown" ? (r(),
            u(y, {
                key: 1
            }, [v(c(e.$t("modals.verification.error_cooldown", [10])), 1)], 64)) : o.error === 429 && !o.isSent ? (r(),
            u(y, {
                key: 2
            }, [v(c(e.$t("pages.verification.error_429", [60])), 1)], 64)) : o.error === 429 && o.isSent ? (r(),
            u(y, {
                key: 3
            }, [v(c(e.$t("pages.verification.error_429", [10])), 1)], 64)) : o.error === 402 ? (r(),
            u(y, {
                key: 4
            }, [v(c(e.$t("modals.verification.error_402")), 1)], 64)) : o.error === 404 ? (r(),
            u(y, {
                key: 5
            }, [v(c(e.$t("modals.verification.error_404")), 1)], 64)) : o.error === "restart" ? (r(),
            u(y, {
                key: 6
            }, [v(c(e.$t("modals.verification.error_restart")), 1)], 64)) : o.error === "pending" && o.isSent ? (r(),
            u(y, {
                key: 7
            }, [v(c(e.$t("modals.verification.error_pending")), 1)], 64)) : o.error === "assigned" || String(o.error).match(/^Value is already assigned/i) ? (r(),
            u(y, {
                key: 8
            }, [v(c(e.$t("modals.verification.error_assigned")), 1)], 64)) : (r(),
            u(y, {
                key: 9
            }, [v(c(e.$t("modals.verification.error_other", [o.error])), 1)], 64))])) : A("", !0), i.isVerified ? (r(),
            u("div", BI, [a("button", {
                type: "button",
                class: "button primary",
                onClick: s[7] || (s[7] = d => i.close())
            }, c(e.$t("common.button_close")), 1)])) : (r(),
            u("form", {
                key: 4,
                onSubmit: s[6] || (s[6] = R(d => i.submit(), ["prevent"]))
            }, [a("label", null, [a("b", null, c(e.$t("modals.verification.phone")) + ":", 1), z(a("select", {
                "onUpdate:modelValue": s[0] || (s[0] = d => o.prefix = d),
                required: "",
                title: e.$t("modals.verification.country_code")
            }, [(r(!0),
            u(y, null, N(o.phoneCodes, d => (r(),
            u("option", {
                key: d.code,
                value: d.code
            }, c(d.name) + " (" + c(d.prefix) + ") ", 9, II))), 128))], 8, TI), [[be, o.prefix]]), z(a("input", {
                type: "tel",
                "onUpdate:modelValue": s[1] || (s[1] = d => o.phone = d),
                pattern: "\\d{1,14}",
                onChange: s[2] || (s[2] = (...d) => i.cleanPhone && i.cleanPhone(...d)),
                placeholder: "123 456 7890",
                required: "",
                disabled: o.isSent || o.loading
            }, null, 40, MI), [[G, o.phone]])]), o.isSent ? (r(),
            u("label", RI, [a("b", null, c(e.$t("modals.verification.code")) + ":", 1), z(a("input", {
                type: "text",
                "onUpdate:modelValue": s[3] || (s[3] = d => o.code = d),
                minlength: "6",
                maxlength: "6",
                placeholder: "123456",
                required: ""
            }, null, 512), [[G, o.code]])])) : A("", !0), a("div", DI, [a("button", {
                type: "submit",
                class: "button primary",
                disabled: o.loading
            }, c(e.$t("common.button_confirm")), 9, EI), o.isSent ? (r(),
            u("button", {
                key: 0,
                type: "button",
                class: "button secondary",
                onClick: s[4] || (s[4] = d => i.reset()),
                disabled: o.loading
            }, c(e.$t("modals.verification.button_reset")), 9, NI)) : A("", !0), a("button", {
                type: "button",
                class: "button",
                onClick: s[5] || (s[5] = d => i.close())
            }, c(e.$t("common.button_cancel")), 1)])], 32))]),
            _: 1
        }, 8, ["class"])) : A("", !0)]),
        _: 1
    })
}
const Ma = O(wI, [["render", VI], ["__scopeId", "data-v-cb2c4723"]])
  , OI = {
    audio: !1,
    video: {
        width: {
            min: 320,
            ideal: 480
        },
        height: {
            min: 320,
            ideal: 480
        },
        aspectRatio: 1
    }
}
  , jI = [{
    rid: "q",
    maxBitrate: 5e5,
    scaleResolutionDownBy: 4,
    scalabilityMode: "L1T3"
}, {
    rid: "h",
    maxBitrate: 1e6,
    scaleResolutionDownBy: 2,
    scalabilityMode: "L1T3"
}, {
    rid: "f",
    maxBitrate: 5e6,
    scaleResolutionDownBy: 1,
    scalabilityMode: "L1T3"
}]
  , Nd = {
    videoConstraints: OI,
    videoEncoding: jI
};
class UI {
    constructor(s) {
        this._store = s,
        this._socket = null,
        this._server = "",
        this._isConnectingStreams = {},
        this._isReconnectCooldown = !1,
        this._suggestServerTimer = null,
        this._producerTransport = null,
        this._consumerTransport = null,
        this._device = null,
        this._audioCtx = null,
        this._audioCtxTimeout = null,
        this._consumers = new Map,
        this._consumersGain = new Map,
        this._producers = new Map,
        this._producerGain = null,
        this._producerLabel = new Map,
        this._getAudioCtx()
    }
    _getAudioCtx() {
        if (!this._audioCtx) {
            const s = window.AudioContext || window.webkitAudioContext || !1;
            if (!s)
                return;
            this._audioCtx = new s,
            this._store.state.chat.audio.context || this._store.commit("chat/setAudioContext", this._audioCtx)
        }
        return clearTimeout(this._audioCtxTimeout),
        this._audioCtxTimeout = setTimeout(this._checkAudioCtx.bind(this), 200),
        this._audioCtx
    }
    _checkAudioCtx() {
        const {chat: s, user: t} = this._store.state;
        this._audioCtx.state === "suspended" && !s.isNotAllowed && (this._store.commit("chat/toggleNotAllowed", !0),
        t.notifications.some(n => n.type === "audioNotAllowed") || this._store.commit("user/addNotification", {
            type: "audioNotAllowed"
        }),
        s.audio.isDeafened || this._store.commit("chat/toggleAudioDeafened", !0))
    }
    async resumeAudioCtx() {
        var s;
        this._audioCtx || this._getAudioCtx();
        try {
            await this._audioCtx.resume(),
            (s = this._socket) != null && s.connected && this._socket.emit("getProducers"),
            this._store.state.user.notifications.some(t => t.type === "audioNotAllowed") && this._store.commit("user/removeNotification", {
                type: "audioNotAllowed"
            })
        } catch {}
        this._checkAudioCtx()
    }
    async _fixAudioStream(s) {
        try {
            const t = new Audio;
            t.autoplay = !0,
            t.muted = !0,
            t.srcObject = s,
            await t.play()
        } catch {}
    }
    async _sleep(s=1e3) {
        return new Promise(t => setTimeout(t, s))
    }
    async connect() {
        var o;
        const {session: s, user: t, chat: n} = this._store.state;
        !s.isConnected || !s.sessionId || !t.accessToken || !s.meta.chatServer || s.meta.chatServer === this._server && n.isConnected || (((o = this._socket) != null && o.connected || n.isConnected || n.isReconnecting) && await this.disconnect(),
        this._store.state.chat.isReconnecting || this._store.commit("chat/toggleReconnecting", !0),
        this._server = s.meta.chatServer,
        this._socket = ml(this._server === "local" ? "ws://localhost:3016" : `wss://chat-${this._server}.botc.app`, {
            auth: i => i({
                token: this._store.state.user.accessToken
            })
        }),
        this._socket.request = (i, l={}) => new Promise( (g, d) => {
            this._socket.emit(i, l, h => {
                h.error ? d(new Error(h.error)) : g(h)
            }
            )
        }
        ),
        this._socket.on("connect", this.onConnect.bind(this)),
        this._socket.on("reconnect", this.onConnect.bind(this)),
        this._socket.on("disconnect", this.onDisconnect.bind(this)),
        this._socket.on("connect_error", this.onConnectionError.bind(this)))
    }
    async onConnect() {
        try {
            const {session: s, user: t, chat: n} = this._store.state;
            clearTimeout(this._suggestServerTimer),
            this._store.commit("chat/setStream", {
                type: "audio"
            }),
            this._store.commit("chat/setStream", {
                type: "video"
            }),
            this._store.commit("chat/toggleConsumer"),
            this._store.commit("chat/clearUserChannels"),
            this._store.commit("chat/setChannel", ""),
            this.initSockets(),
            await this.createRoom(s.sessionId),
            await this.join(t.user.id, s.sessionId, n.channel),
            this._store.state.chat.isReconnecting && this._store.commit("chat/toggleReconnecting", !1),
            this._store.commit("chat/toggleConnected", !0),
            await this.connectStreams()
        } catch (s) {
            X(s)
        }
    }
    async disconnect() {
        var s;
        if (this._server = "",
        !!this._socket) {
            try {
                await this.closeProducer("audio"),
                await this.closeProducer("video")
            } catch {}
            if (this._store.commit("chat/setStream", {
                type: "audio"
            }),
            this._store.commit("chat/setStream", {
                type: "video"
            }),
            this._store.commit("chat/toggleConsumer"),
            this._consumerTransport && !this._consumerTransport.closed && this._consumerTransport.close(),
            this._producerTransport && !this._producerTransport.closed && this._producerTransport.close(),
            this._store.state.chat.channel && this._store.commit("chat/setChannel", ""),
            (s = this._socket) != null && s.connected)
                try {
                    await this._socket.request("exitRoom")
                } catch {}
            try {
                this._socket.disconnect(),
                this._socket.removeAllListeners()
            } catch {}
            this._socket = null
        }
    }
    async onDisconnect(s) {
        this._store.state.chat.isConnected && (this._store.commit("chat/toggleConnected", !1),
        this._store.commit("chat/clearUserChannels"));
        try {
            await this.closeProducer("audio"),
            await this.closeProducer("video")
        } catch {}
        if (this._consumerTransport && !this._consumerTransport.closed && this._consumerTransport.close(),
        this._producerTransport && !this._producerTransport.closed && this._producerTransport.close(),
        s !== "io server disconnect" && s !== "io client disconnect") {
            if (s)
                try {
                    this._store.dispatch("openDialogue", {
                        type: "alert",
                        title: "modals.dialogue.error.chat_title",
                        text: ["modals.dialogue.error.chat_text", [s]]
                    })
                } catch {}
            this._store.state.chat.isReconnecting || this._store.commit("chat/toggleReconnecting", !0),
            clearTimeout(this._suggestServerTimer),
            this._suggestServerTimer = setTimeout(async () => {
                var g, d;
                const {isReconnecting: t, isConnected: n, servers: o} = this._store.state.chat
                  , {sessionId: i, meta: l} = this._store.state.session;
                if (this._store.getters["user/isStoryteller"] && t && !n && i)
                    try {
                        const h = this._store.getters["chat/chatServerPreference"]
                          , m = h[0] === l.chatServer ? h[1] : h[0];
                        await this._store.dispatch("openDialogue", {
                            type: "confirm",
                            title: "modals.dialogue.prompt.chat_title",
                            text: ["modals.dialogue.prompt.chat_text", [((g = o.get(l.chatServer)) == null ? void 0 : g.name) || l.chatServer, ((d = o.get(m)) == null ? void 0 : d.name) || m]]
                        }) && this._store.state.session.meta.chatServer !== m && this._store.commit("chat/changeServer", m)
                    } catch {}
            }
            , Math.round(30 + Math.random() * 30) * 1e3)
        } else
            this._store.state.chat.isReconnecting && this._store.commit("chat/toggleReconnecting", !1)
    }
    onConnectionError({message: s}) {
        if (!this._store.state.chat.isReconnecting) {
            if (s && s !== "transport close") {
                const t = s === "xhr poll error" ? "modals.dialogue.error.chat2_text" : s;
                this._store.dispatch("openDialogue", {
                    type: "alert",
                    title: "modals.dialogue.error.chat2_title",
                    text: t
                }).catch( () => {}
                )
            }
            this.onDisconnect().catch( () => {}
            )
        }
    }
    async createRoom(s) {
        if (this._socket)
            try {
                await this._socket.request("createRoom", {
                    roomId: s
                })
            } catch {}
    }
    async join(s, t, n) {
        if (this._socket)
            try {
                await this._socket.request("join", {
                    userId: s,
                    roomId: t,
                    channel: n,
                    audioPaused: this._store.state.chat.audio.isDeafened,
                    videoPaused: this._store.state.chat.video.isDeafened
                });
                const o = await this._socket.request("getRouterRtpCapabilities");
                this._device = await this.loadDevice(o)
            } catch {}
    }
    async connectStreams(s) {
        if (this._socket && !this._isConnectingStreams[s || "any"]) {
            this._isConnectingStreams[s || "any"] = !0;
            try {
                await this.initTransports(),
                (!s || s === "consumer") && (this._store.state.chat.isNotAllowed || this._socket.emit("getProducers")),
                (!s || s === "producer") && (this._store.state.chat.audio.device && await this.produce("audio"),
                this._store.state.chat.video.device && await this.produce("video"),
                this._socket.emit("getConsumers"))
            } catch {} finally {
                this._isConnectingStreams[s || "any"] = !1
            }
        }
    }
    async loadDevice(s) {
        let t;
        try {
            const n = {};
            window.__TAURI__ && await Yd() === "macos" && (n.handlerName = "Safari12"),
            t = await Jd.Device.factory(n)
        } catch (n) {
            n.name === "UnsupportedError" && alert("Browser not supported")
        }
        return s.headerExtensions = s.headerExtensions.filter(n => n.uri !== "urn:3gpp:video-orientation"),
        await t.load({
            routerRtpCapabilities: s,
            preferLocalCodecsOrder: !0
        }),
        t
    }
    async initTransports() {
        if (!this._producerTransport || this._producerTransport.closed) {
            const s = await this._socket.request("createWebRtcTransport", {
                forceTcp: !1,
                rtpCapabilities: this._device.rtpCapabilities
            });
            if (s.error)
                throw new Error(s.error);
            this._producerTransport = this._device.createSendTransport(s),
            this._producerTransport.on("connect", async ({dtlsParameters: t}, n, o) => {
                try {
                    const i = await this._socket.request("connectTransport", {
                        dtlsParameters: t,
                        transportId: s.id
                    });
                    n(i)
                } catch (i) {
                    o(i)
                }
            }
            ),
            this._producerTransport.on("produce", async ({kind: t, rtpParameters: n}, o, i) => {
                try {
                    const {producerId: l} = await this._socket.request("produce", {
                        producerTransportId: this._producerTransport.id,
                        kind: t,
                        rtpParameters: n,
                        paused: this._store.state.chat.audio.isMuted && t === "audio" || this._store.state.chat.video.isMuted && t === "video"
                    });
                    o({
                        id: l
                    })
                } catch (l) {
                    i(l)
                }
            }
            ),
            this._producerTransport.on("connectionstatechange", t => {
                switch (t) {
                case "connecting":
                    break;
                case "connected":
                    break;
                case "failed":
                    this._producerTransport.close();
                    break
                }
            }
            )
        }
        if (!this._consumerTransport || this._consumerTransport.closed) {
            const s = await this._socket.request("createWebRtcTransport", {
                forceTcp: !1
            });
            if (s.error)
                return;
            this._consumerTransport = this._device.createRecvTransport(s),
            this._consumerTransport.on("connect", async ({dtlsParameters: t}, n, o) => {
                try {
                    const i = await this._socket.request("connectTransport", {
                        transportId: this._consumerTransport.id,
                        dtlsParameters: t
                    });
                    n(i)
                } catch (i) {
                    o(i)
                }
            }
            ),
            this._consumerTransport.on("connectionstatechange", async t => {
                switch (t) {
                case "connecting":
                    break;
                case "connected":
                    break;
                case "failed":
                    this._consumerTransport.close();
                    break
                }
            }
            )
        }
    }
    initSockets() {
        this._socket && (this._socket.removeAllListeners("consumerClosed"),
        this._socket.on("consumerClosed", ({consumerId: s}) => this.closeConsumer(s)),
        this._socket.removeAllListeners("producerPaused"),
        this._socket.on("producerPaused", ({consumerId: s}) => {
            if (this._consumers.has(s)) {
                const {consumer: t, userId: n, kind: o} = this._consumers.get(s);
                t.pause(),
                this._store.commit("chat/toggleMuted", {
                    userId: n,
                    kind: o,
                    isMuted: !0
                })
            }
        }
        ),
        this._socket.removeAllListeners("producerResumed"),
        this._socket.on("producerResumed", ({consumerId: s}) => {
            if (this._consumers.has(s)) {
                const {consumer: t, userId: n, kind: o} = this._consumers.get(s)
                  , {channel: i, userChannels: l, video: g, audio: d} = this._store.state.chat
                  , h = l.get(n) || "";
                (o === "audio" && h === i && !d.isDeafened || o === "video" && (!this._store.getters["game/isNight"] || h === i) && !g.isDeafened) && t.resume(),
                this._store.commit("chat/toggleMuted", {
                    userId: n,
                    kind: o,
                    isMuted: !1
                })
            }
        }
        ),
        this._socket.removeAllListeners("newProducers"),
        this._socket.on("newProducers", async s => {
            if (this._store.state.chat.isNotAllowed)
                return;
            if ((await Promise.allSettled(s.filter( ({userId: n}) => n !== this._store.state.user.user.id).map( ({producerId: n, userId: o, channel: i, producerSocketId: l}) => (this.updateChannel(o, i),
            this.consume(n, o, l))))).some(n => n.status === "rejected" && !String(n.reason).match(/reconnecting/))) {
                await this._sleep(.5);
                for (let n = 0; n < s.length; n++) {
                    const {producerId: o, userId: i, channel: l, producerSocketId: g} = s[n];
                    if (![...this._consumers].some( ([,d]) => d.producerId === o))
                        try {
                            this._socket && (await this.consume(o, i, g),
                            this.updateChannel(i, l))
                        } catch (d) {
                            const h = /router cannot consume producer|(consumer|producer) with id .*? not found|channel request handler with id .*? not found|invalidstateerror/i;
                            if (!String(d).match(h) && !this._isReconnectCooldown) {
                                this._isReconnectCooldown = !0,
                                setTimeout( () => {
                                    this._isReconnectCooldown = !1
                                }
                                , 30 * 1e3),
                                await this.disconnect(),
                                await this._sleep(.5),
                                await this.connect();
                                return
                            }
                        }
                }
            }
        }
        ),
        this._socket.removeAllListeners("newConsumers"),
        this._socket.on("newConsumers", s => {
            s.forEach( ({userId: t, channel: n, audioPaused: o, videoPaused: i}) => {
                t && (this.updateChannel(t, n),
                this._store.commit("chat/toggleConsumer", {
                    userId: t,
                    value: !0
                }),
                this._store.commit("chat/toggleDeafened", {
                    userId: t,
                    kind: "audio",
                    isDeafened: o
                }),
                this._store.commit("chat/toggleDeafened", {
                    userId: t,
                    kind: "video",
                    isDeafened: i
                }))
            }
            )
        }
        ),
        this._socket.removeAllListeners("consumerJoined"),
        this._socket.on("consumerJoined", ({userId: s, channel: t, audioPaused: n, videoPaused: o}) => {
            s && (this.updateChannel(s, t),
            this._store.commit("chat/toggleConsumer", {
                userId: s
            }),
            this._store.commit("chat/toggleDeafened", {
                userId: s,
                kind: "audio",
                isDeafened: n
            }),
            this._store.commit("chat/toggleDeafened", {
                userId: s,
                kind: "video",
                isDeafened: o
            }))
        }
        ),
        this._socket.removeAllListeners("consumerLeft"),
        this._socket.on("consumerLeft", s => {
            s && this._store.commit("chat/toggleConsumer", {
                userId: s,
                value: !1
            })
        }
        ),
        this._socket.removeAllListeners("channelChange"),
        this._socket.on("channelChange", ({userId: s, channel: t}) => {
            s && this.updateChannel(s, t)
        }
        ),
        this._socket.removeAllListeners("consumersPaused"),
        this._socket.on("consumersPaused", ({kind: s, userId: t}) => {
            t && this._store.commit("chat/toggleDeafened", {
                userId: t,
                kind: s,
                isDeafened: !0
            })
        }
        ),
        this._socket.removeAllListeners("consumersResumed"),
        this._socket.on("consumersResumed", ({kind: s, userId: t}) => {
            t && this._store.commit("chat/toggleDeafened", {
                userId: t,
                kind: s,
                isDeafened: !1
            })
        }
        ))
    }
    async produce(s, t=null) {
        var p;
        const {audio: n, video: o, isConnected: i, userOverrides: l} = this._store.state.chat
          , {session: g, user: d} = this._store.state
          , h = s === "audio";
        if (!i || !g.isConnected || !this._producerTransport)
            return;
        if (this._producerTransport.closed)
            try {
                await this.initTransports()
            } catch {
                return
            }
        let m;
        if (h)
            try {
                m = await navigator.mediaDevices.getUserMedia(Bd(this._store.state.chat, t || n.device))
            } catch {}
        else {
            if (!this._device.canProduce("video"))
                return;
            try {
                m = await navigator.mediaDevices.getUserMedia(Vd(t || o.device))
            } catch {}
        }
        if (m) {
            this._producerLabel.has(s) && await this.closeProducer(s);
            try {
                const f = {};
                if (h) {
                    const w = this._getAudioCtx()
                      , B = w.createGain();
                    B.gain.value = (p = l.get("volume-" + d.user.id)) != null ? p : 1;
                    const j = w.createMediaStreamDestination();
                    w.createMediaStreamSource(m).connect(B),
                    B.connect(j),
                    this._producerGain = B,
                    f.track = j.stream.getAudioTracks()[0],
                    f.codecOptions = {
                        opusStereo: !0,
                        opusDtx: !0,
                        opusFec: !0,
                        opusNack: !0
                    }
                } else
                    f.track = m.getVideoTracks()[0],
                    f.encodings = Nd.videoEncoding,
                    f.codecOptions = {
                        videoGoogleStartBitrate: 1e3
                    },
                    this._device.rtpCapabilities.codecs.find(w => w.kind === "video").mimeType.toLowerCase() === "video/vp9" && (f.encodings = [{
                        maxBitrate: 5e6,
                        scalabilityMode: "L3T3_KEY"
                    }]);
                const P = await this._producerTransport.produce(f);
                this._producers.set(P.id, P),
                this._producerLabel.set(s, P.id),
                this.canProduce(s) || this.pauseProducer(s),
                this._store.commit("chat/setStream", {
                    userId: this._store.state.user.user.id,
                    stream: m,
                    type: s
                }),
                P.on("trackended", () => this.closeProducer(s, P.id)),
                P.on("transportclose", () => this.closeProducer(s, P.id)),
                P.on("close", () => this.closeProducer(s, P.id))
            } catch (f) {
                f === "no transport" && (this._producerTransport.close(),
                await this._sleep(),
                await this.connectStreams("producer"))
            }
        }
    }
    async closeProducer(s, t) {
        var l;
        if (!t && !this._producerLabel.has(s))
            return;
        const n = t || this._producerLabel.get(s);
        try {
            await this._socket.emitWithAck("producerClosed", {
                producerId: n
            })
        } catch {}
        if ((l = this._producers.get(n)) == null || l.close(),
        this._producers.delete(n),
        t && this._producerLabel.get(s) !== t)
            return;
        this._producerLabel.delete(s);
        const {user: o} = this._store.state.user
          , i = this._store.state.chat[s].streams.get(o.id);
        i && i.getTracks().forEach(g => {
            g.stop()
        }
        ),
        s === "audio" && this._producerGain && (this._producerGain.disconnect(),
        this._producerGain = null),
        this._store.commit("chat/setStream", {
            userId: o.id,
            type: s
        })
    }
    async consume(s, t, n) {
        const {consumer: o, stream: i, kind: l, error: g, producerPaused: d, gainFilter: h} = await this.getConsumeStream(s, n, t);
        if (!o)
            throw new Error("ConsumeStream error for " + s + ": " + g);
        this._consumers.set(o.id, {
            consumer: o,
            userId: t,
            kind: l,
            producerId: s,
            gainFilter: h
        }),
        this._store.commit("chat/setStream", {
            userId: t,
            stream: i,
            type: l
        }),
        this._store.commit("chat/toggleMuted", {
            userId: t,
            kind: l,
            isMuted: d
        }),
        o.on("trackended", () => this.closeConsumer(o.id)),
        o.on("transportclose", () => this.closeConsumer(o.id))
    }
    async getConsumeStream(s, t, n) {
        var o;
        if (!this._device)
            throw new Error("device not initialized");
        if ((!this._consumerTransport || this._consumerTransport.closed) && await this.initTransports(),
        !this._consumerTransport)
            throw new Error("transport not initialized");
        try {
            const {rtpCapabilities: i} = this._device
              , {video: l, audio: g, userOverrides: d} = this._store.state.chat
              , {id: h, kind: m, rtpParameters: p, producerPaused: f, error: P} = await this._socket.request("consume", {
                rtpCapabilities: i,
                consumerTransportId: this._consumerTransport.id,
                producerId: s,
                producerSocketId: t
            });
            if (!h)
                return {
                    error: P
                };
            const w = await this._consumerTransport.consume({
                id: h,
                producerId: s,
                kind: m,
                rtpParameters: p,
                codecOptions: {}
            })
              , {consumerPaused: B} = await this._socket.request("ready", {
                consumerId: w.id,
                producerSocketId: t,
                kind: m
            });
            f || B || m === "audio" && g.isDeafened || m === "video" && l.isDeafened ? w.pause() : this._store.getters["players/seatedPlayerMap"].has(n) || w.pause();
            const j = new MediaStream([w.track]);
            if (j.consumerId = w.id,
            m === "audio") {
                this._consumersGain.has(n) && this._consumersGain.get(n).disconnect();
                const V = this._getAudioCtx()
                  , S = V.createMediaStreamSource(j)
                  , E = V.createGain();
                E.gain.value = (o = d.get("volume-" + n)) != null ? o : 1,
                S.connect(E),
                E.connect(V.destination),
                this._consumersGain.set(n, E),
                this.updateVolume(n),
                this._store.state.chat.isNotAllowed || this._fixAudioStream(j).catch( () => {}
                )
            }
            return {
                consumer: w,
                stream: j,
                kind: m,
                producerPaused: f
            }
        } catch (i) {
            throw i === "no transport" ? (this._consumerTransport.close(),
            await this._sleep(),
            await this.connectStreams("consumer"),
            new Error("consumer transport closed, reconnecting...")) : i
        }
    }
    closeConsumer(s) {
        if (!this._consumers.has(s))
            return;
        const {consumer: t, userId: n, kind: o} = this._consumers.get(s);
        o === "audio" && this._consumersGain.has(n) && (this._consumersGain.get(n).disconnect(),
        this._consumersGain.delete(n)),
        t.close(),
        this._consumers.delete(s);
        const i = this._store.state.chat[o].streams.get(n);
        i && i.consumerId === s && (i.getTracks().forEach(l => {
            l.stop()
        }
        ),
        this._store.commit("chat/setStream", {
            userId: n,
            type: o
        }))
    }
    canProduce(s) {
        return W.currentRoute.value.name !== "Grimoire" || !this._store.state.chat.isConnected || !this._store.getters["players/seatedPlayerMap"].has(this._store.state.user.user.id) || !this._producerLabel.has(s) || this._store.state.chat[s].isMuted ? !1 : s !== "video" || !this._store.getters["game/isNight"] || !!this._store.state.chat.channel
    }
    pauseProducer(s) {
        var i;
        if (!this._store.state.chat.isConnected || !this._producerLabel.has(s))
            return;
        const t = this._store.state.user.user.id;
        (i = this._store.state.chat.usersMuted[t]) != null && i[s] || this._store.commit("chat/toggleMuted", {
            userId: t,
            kind: s,
            isMuted: !0
        });
        const n = this._producerLabel.get(s)
          , o = this._producers.get(n);
        !o || o.paused || (o.pause(),
        this._socket && this._socket.emit("producerPaused", {
            producerId: n
        }))
    }
    resumeProducer(s) {
        var i;
        if (!this.canProduce(s))
            return;
        const t = this._store.state.user.user.id;
        (i = this._store.state.chat.usersMuted[t]) != null && i[s] && this._store.commit("chat/toggleMuted", {
            userId: t,
            kind: s,
            isMuted: !1
        });
        const n = this._producerLabel.get(s)
          , o = this._producers.get(n);
        !o || !o.paused || (o.resume(),
        this._socket && this._socket.emit("producerResumed", {
            producerId: n
        }))
    }
    pauseConsumers(s) {
        this._store.state.chat.isConnected && (this._socket && this._socket.emit("consumersPaused", s),
        this._consumers.forEach( ({consumer: t, kind: n}) => {
            n === s && t.pause()
        }
        ))
    }
    resumeConsumers(s) {
        if (!this._store.state.chat.isConnected)
            return;
        const {channel: t, userChannels: n} = this._store.state.chat;
        this._consumers.forEach( ({consumer: o, kind: i, userId: l}) => {
            s === "audio" && (n.get(l) || "") !== t || i === s && o.resume()
        }
        ),
        this._socket && this._socket.emit("consumersResumed", s)
    }
    updateChannel(s, t) {
        const {channel: n, userChannels: o, audio: i, video: l} = this._store.state.chat
          , {user: g} = this._store.state.user
          , d = this._store.getters["players/seatedPlayerMap"]
          , h = this._store.getters["players/storytellerMap"]
          , m = this._store.getters["chat/isPrivateChat"]
          , p = this._store.getters["chat/isPublicChat"]
          , f = this._store.getters["game/isNight"];
        s === g.id && t !== n && this._store.commit("chat/setChannel", t);
        const P = o.get(s) || "";
        o.get(s) !== t && this._store.commit("chat/setUserChannel", {
            userId: s,
            value: t
        }),
        this._consumers.forEach(w => {
            if (!(w.kind !== "audio" && !f && !w.consumer.paused)) {
                if ((o.get(w.userId) || "") !== this._store.state.chat.channel)
                    w.consumer.paused || w.consumer.pause();
                else if (w.consumer.paused) {
                    if (w.kind === "audio" && i.isDeafened || w.kind === "video" && l.isDeafened)
                        return;
                    w.consumer.resume()
                }
            }
        }
        ),
        d.has(s) && !h.has(s) && P !== t && (p(n) && P === n ? this._store.commit("playSound", "chatLeave") : p(n) && t === n ? this._store.commit("playSound", "chatJoin") : !n && p(P) && s === g.id ? this._store.commit("playSound", "chatLeave") : m(n) && t === n && s !== g.id && this._store.commit("playSound", "privateJoin"))
    }
    updateVolume(s) {
        var i;
        const {userOverrides: t, audio: n} = this._store.state.chat;
        let o = (i = t.get("volume-" + s)) != null ? i : 1;
        if (s === this._store.state.user.user.id) {
            if (!this._producerGain)
                return;
            this._producerGain.gain.setValueAtTime(o, this._getAudioCtx().currentTime)
        } else {
            if (!this._consumersGain.has(s) || (n.volumes.has(s) && (o = Object.values(n.volumes.get(s)).reduce( (l, g) => g * l, o)),
            this._consumersGain.get(s).gain.value === o))
                return;
            this._consumersGain.get(s).gain.setValueAtTime(o, this._getAudioCtx().currentTime)
        }
    }
    handleChannelChange(s) {
        if (!this._socket)
            return;
        const {user: t} = this._store.state.user;
        this._socket.emit("channelChange", s),
        this.updateChannel(t.id, s),
        this.canProduce("video") ? this.resumeProducer("video") : this.pauseProducer("video")
    }
}
function Bd(e, s=null) {
    const {isAutoGainControl: t, isEchoCancellation: n, isNoiseSuppression: o} = (e == null ? void 0 : e.audio) || {}
      , i = {
        audio: {
            echoCancellation: n != null ? n : !0,
            noiseSuppression: o != null ? o : !0,
            autoGainControl: t != null ? t : !0,
            channelCount: 1
        },
        video: !1
    };
    return s && (i.audio.deviceId = {
        exact: s
    }),
    i
}
function Vd(e=null) {
    const s = structuredClone(Nd.videoConstraints);
    return e && (s.video.deviceId = {
        exact: e
    }),
    s
}
const HI = e => {
    const s = new UI(e);
    e.subscribe(async ({type: t, payload: n}, o) => {
        const {session: i} = o;
        switch (t) {
        case "session/updateMeta":
        case "session/toggleConnected":
            if (t === "session/updateMeta" && !(n != null && n.chatServer))
                return;
            i.meta.chatServer && i.isConnected ? await s.connect() : await s.disconnect();
            break;
        case "chat/setChannel":
            s.handleChannelChange(n);
            break;
        case "chat/setAudioDevice":
            n ? await s.produce("audio", n) : await s.closeProducer("audio");
            break;
        case "chat/toggleAutoGainControl":
        case "chat/toggleEchoCancellation":
        case "chat/toggleNoiseSuppression":
            o.chat.audio.device && await s.produce("audio", n);
            break;
        case "chat/setVideoDevice":
            n ? await s.produce("video", n) : await s.closeProducer("video");
            break;
        case "chat/toggleAudioMuted":
            o.chat.audio.isMuted ? s.pauseProducer("audio") : s.resumeProducer("audio");
            break;
        case "chat/toggleVideoMuted":
            o.chat.video.isMuted ? s.pauseProducer("video") : s.resumeProducer("video");
            break;
        case "game/setPhase":
        case "game/setHistory":
            s.canProduce("video") ? s.resumeProducer("video") : s.pauseProducer("video");
            break;
        case "chat/toggleVideoDeafened":
            o.chat.video.isDeafened ? s.pauseConsumers("video") : s.resumeConsumers("video");
            break;
        case "chat/toggleAudioDeafened":
            o.chat.audio.isDeafened ? s.pauseConsumers("audio") : s.resumeConsumers("audio");
            break;
        case "chat/setUserOverride":
        case "chat/setVolume":
            (t === "chat/setVolume" || n.type === "volume") && s.updateVolume(n.userId);
            break;
        case "chat/toggleNotAllowed":
            n === !1 && await s.resumeAudioCtx();
            break
        }
    }
    ),
    W.afterEach( (t, n) => {
        t.name === "Grimoire" ? (s.resumeProducer("audio"),
        s.resumeProducer("video")) : n.name === "Grimoire" && (e.state.chat.audio.isMuted || e.commit("chat/toggleAudioMuted"),
        e.state.chat.video.isMuted || e.commit("chat/toggleVideoMuted"))
    }
    )
}
  , qI = {
    name: "SetupModal",
    components: {
        Modal: se
    },
    computed: {
        ...M("user", ["user"]),
        ...M(["session", "modal", "chat"]),
        ...D("players", ["seatedPlayerMap"]),
        canChat() {
            return !this.session.sessionId || this.seatedPlayerMap.has(this.user.id)
        }
    },
    data() {
        return {
            error: "",
            isRunning: !1,
            audioFeedback: !1,
            steps: [],
            videoDevices: [],
            audioDevices: [],
            audioStream: null,
            videoStream: null,
            hark: null,
            voiceLevel: 0,
            videoSelect: 0,
            audioSelect: 0,
            browser: Je()
        }
    },
    methods: {
        ...U("chat", ["setVideoDevice", "setAudioDevice"]),
        ...U(["toggleModal"]),
        getIcon(e) {
            return e.success ? "check-circle" : e.error ? "times-circle" : "circle"
        },
        resetHark() {
            this.hark && (this.hark.stop(),
            this.hark = null,
            this.voiceLevel = 0)
        },
        async selectAudio(e) {
            if (this.audioSelect === e)
                this.audioSelect = -1,
                this.resetHark(),
                this.setAudioDevice(null),
                this.audioStream = null;
            else {
                if (this.audioSelect = e,
                !this.audioDevices[e])
                    return;
                const {deviceId: s} = this.audioDevices[e];
                await this.captureAudio(s) && this.canChat && this.setAudioDevice(s)
            }
        },
        async selectVideo(e) {
            if (this.videoSelect === e)
                this.videoSelect = -1,
                this.setVideoDevice(null),
                this.videoStream = null;
            else {
                this.videoSelect = e;
                const {deviceId: s} = this.videoDevices[e];
                if (s)
                    try {
                        await this.captureVideo(s) && this.canChat && this.setVideoDevice(s)
                    } catch {}
            }
        },
        async captureAudio(e) {
            this.error = "";
            try {
                this.audioStream = await navigator.mediaDevices.getUserMedia(Bd(this.chat, e))
            } catch (s) {
                return this.error = s,
                !1
            }
            return this.audioStream && this.audioStream.getAudioTracks()[0] ? (this.resetHark(),
            this.hark = ul(this.audioStream, {
                play: !1
            }),
            this.hark.on("volume_change", s => {
                var n, o;
                let t = Math.pow(10, s / 85) * 10;
                t <= 1 && (t = 0),
                t = String(Math.round(t * 15)),
                t !== ((n = this.$refs.video) == null ? void 0 : n.style.getPropertyValue("--volume")) && ((o = this.$refs.video) == null || o.style.setProperty("--volume", t))
            }
            ),
            this.canChat && this.audioDevices.length && this.setAudioDevice(this.audioDevices[0].deviceId),
            !0) : !1
        },
        async captureVideo(e) {
            this.error = "";
            try {
                this.videoStream = await navigator.mediaDevices.getUserMedia(Vd(e))
            } catch (s) {
                return this.error = s,
                !1
            }
            return !!this.videoStream
        },
        reset() {
            var e, s;
            this.resetHark(),
            this.steps = [],
            this.videoDevices = [],
            this.audioDevices = [],
            (e = this.audioStream) == null || e.getTracks().forEach(t => t.stop()),
            (s = this.videoStream) == null || s.getTracks().forEach(t => t.stop()),
            this.audioStream = null,
            this.videoStream = null,
            this.videoSelect = 0,
            this.audioSelect = 0
        },
        async start() {
            var t;
            this.isRunning = !0,
            this.reset();
            let e;
            if (!["Firefox", "Safari"].includes((t = this.browser) == null ? void 0 : t.browser.name)) {
                let n = {
                    cam: !1,
                    mic: !1
                };
                const o = {
                    description: this.$t("modals.setup.mic_query")
                };
                this.steps.push(o);
                try {
                    const l = await navigator.permissions.query({
                        name: "microphone"
                    });
                    l.state === "granted" ? (n.mic = !0,
                    o.success = !0) : l.state !== "prompt" && (o.error = this.$t("modals.setup.mic_blocked"))
                } catch (l) {
                    o.error = l
                }
                const i = {
                    description: this.$t("modals.setup.cam_query")
                };
                this.steps.push(i);
                try {
                    const l = await navigator.permissions.query({
                        name: "camera"
                    });
                    l.state === "granted" ? (n.cam = !0,
                    i.success = !0) : l.state !== "prompt" && (i.error = this.$t("modals.setup.cam_blocked"))
                } catch (l) {
                    i.error = l
                }
            }
            const s = {
                description: this.$t("modals.setup.mic_cam_query")
            };
            this.steps.push(s);
            try {
                e = await navigator.mediaDevices.getUserMedia({
                    audio: !0,
                    video: !0
                }),
                e ? s.success = !0 : s.error = this.$t("modals.setup.mic_cam_blocked")
            } catch (n) {
                s.error = n
            }
            if (!e) {
                const n = {
                    description: this.$t("modals.setup.mic_only")
                };
                this.steps.push(n);
                try {
                    e = await navigator.mediaDevices.getUserMedia({
                        audio: !0
                    }),
                    e.getTracks().forEach(o => o.stop()),
                    e ? n.success = !0 : n.error = this.$t("modals.setup.mic_blocked")
                } catch (o) {
                    n.error = o
                }
            }
            if (e) {
                const n = {
                    description: this.$t("modals.setup.get_devices")
                };
                this.steps.push(n);
                try {
                    (await navigator.mediaDevices.enumerateDevices()).forEach(i => {
                        i.kind === "audioinput" ? this.audioDevices.push(i) : i.kind === "videoinput" && this.videoDevices.push(i)
                    }
                    ),
                    this.audioDevices.length || this.videoDevices.length ? n.success = !0 : n.error = this.$t("modals.setup.no_devices")
                } catch (o) {
                    n.error = o
                }
            }
            if (this.audioDevices.length) {
                const n = {
                    description: this.$t("modals.setup.capture_audio")
                };
                this.steps.push(n);
                try {
                    await this.captureAudio(this.audioDevices[0].deviceId) ? n.success = !0 : n.error = this.$t("modals.setup.audio_error")
                } catch (o) {
                    n.error = o
                }
            }
            if (this.videoDevices.length) {
                const n = {
                    description: this.$t("modals.setup.capture_video")
                };
                this.steps.push(n);
                try {
                    await this.captureVideo(this.videoDevices[0].deviceId) ? (this.canChat && this.setVideoDevice(this.videoDevices[0].deviceId),
                    n.success = !0) : n.error = this.$t("modals.setup.video_error")
                } catch (o) {
                    n.error = o
                }
            }
            this.isRunning = !1
        },
        close() {
            this.reset(),
            document.getElementById("app").focus(),
            this.toggleModal({
                name: "settings"
            })
        }
    }
}
  , LI = {
    key: 0
}
  , zI = {
    class: "steps"
}
  , GI = {
    class: "result"
}
  , WI = {
    key: 0
}
  , FI = {
    key: 1,
    class: "stream"
}
  , QI = {
    class: "video",
    ref: "video"
}
  , ZI = [".srcObject"]
  , XI = [".srcObject"]
  , KI = {
    key: 0
}
  , YI = ["onClick"]
  , JI = {
    key: 1
}
  , $I = ["onClick"]
  , xI = {
    key: 2,
    class: "error"
}
  , e4 = {
    class: "button-group"
}
  , s4 = ["disabled"];
function t4(e, s, t, n, o, i) {
    const l = k("i18n-t")
      , g = k("font-awesome-icon")
      , d = k("Modal");
    return r(),
    C(L, {
        name: "fade"
    }, {
        default: T( () => [e.modal.name === "setup" ? (r(),
        C(d, {
            key: 0,
            class: "setup",
            onClose: s[3] || (s[3] = h => i.close())
        }, {
            header: T( () => [v(c(e.$t("modals.setup.title")), 1)]),
            default: T( () => {
                var h, m, p;
                return [b(l, {
                    tag: "p",
                    keypath: "modals.setup.text",
                    scope: "global"
                }, {
                    default: T( () => [a("b", null, c(e.$t("modals.setup.start")), 1)]),
                    _: 1
                }), o.browser ? (r(),
                u("b", LI, c(e.$t("modals.setup.browser")) + " " + c((h = o.browser.browser) == null ? void 0 : h.name) + " " + c((m = o.browser.browser) == null ? void 0 : m.version) + " " + c((p = o.browser.os) == null ? void 0 : p.name), 1)) : A("", !0), a("ul", zI, [(r(!0),
                u(y, null, N(o.steps, (f, P) => (r(),
                u("li", {
                    key: P
                }, [a("span", null, c(e.$t("modals.setup.step", [P + 1])) + " " + c(f.description), 1), a("div", GI, [b(g, {
                    icon: i.getIcon(f)
                }, null, 8, ["icon"])]), f.error ? (r(),
                u("p", WI, c(f.error), 1)) : A("", !0)]))), 128))]), o.audioDevices.length || o.videoDevices.length ? (r(),
                u("div", FI, [a("div", QI, [o.videoStream ? (r(),
                u("video", {
                    key: 0,
                    ".srcObject": o.videoStream,
                    autoplay: ""
                }, null, 40, ZI)) : (r(),
                C(g, {
                    key: 1,
                    icon: "video-slash"
                })), a("label", {
                    onClick: s[0] || (s[0] = f => o.audioFeedback = !o.audioFeedback)
                }, [b(g, {
                    icon: o.audioFeedback ? "circle-check" : "circle"
                }, null, 8, ["icon"]), a("span", null, c(e.$t("modals.setup.self_listen")), 1)]), o.audioFeedback && o.audioStream ? (r(),
                u("audio", {
                    key: 2,
                    ".srcObject": o.audioStream,
                    autoplay: ""
                }, null, 40, XI)) : A("", !0)], 512), a("div", null, [o.videoDevices.length ? (r(),
                u("ul", KI, [a("li", null, [a("b", null, c(e.$t("modals.setup.video_devices")), 1)]), (r(!0),
                u(y, null, N(o.videoDevices, (f, P) => (r(),
                u("li", {
                    key: P,
                    class: _({
                        active: o.videoSelect === P
                    }),
                    onClick: w => i.selectVideo(P)
                }, [v(c(f.label || f.deviceId || e.$t("modals.setup.video_unnamed")) + " ", 1), b(g, {
                    icon: o.videoSelect === P ? "check-circle" : "circle"
                }, null, 8, ["icon"])], 10, YI))), 128))])) : A("", !0), o.audioDevices.length ? (r(),
                u("ul", JI, [a("li", null, [a("b", null, c(e.$t("modals.setup.audio_devices")), 1)]), (r(!0),
                u(y, null, N(o.audioDevices, (f, P) => (r(),
                u("li", {
                    key: P,
                    class: _({
                        active: o.audioSelect === P
                    }),
                    onClick: w => i.selectAudio(P)
                }, [v(c(f.label || f.deviceId || e.$t("modals.setup.audio_unnamed")) + " ", 1), b(g, {
                    icon: o.audioSelect === P ? "check-circle" : "circle"
                }, null, 8, ["icon"])], 10, $I))), 128))])) : A("", !0), o.error ? (r(),
                u("p", xI, c(o.error), 1)) : A("", !0)])])) : A("", !0), a("div", e4, [a("button", {
                    type: "button",
                    disabled: o.isRunning,
                    class: "button primary",
                    onClick: s[1] || (s[1] = (...f) => i.start && i.start(...f))
                }, c(o.steps.length ? e.$t("modals.setup.button_rerun") : e.$t("modals.setup.button_start")), 9, s4), a("button", {
                    type: "button",
                    class: "button",
                    onClick: s[2] || (s[2] = f => i.close())
                }, c(e.$t("common.button_close")), 1)])]
            }
            ),
            _: 1
        })) : A("", !0)]),
        _: 1
    })
}
const Od = O(qI, [["render", t4], ["__scopeId", "data-v-f07e3dae"]])
  , i4 = {
    computed: {
        ...M(["session"]),
        ...D("game", ["isNight"])
    },
    data() {
        return {}
    },
    mounted() {
        this.session.hook.name === "attention-gong" && this.$store.commit("playSound", "attentionGong")
    }
}
  , o4 = {
    id: "attention"
}
  , n4 = {
    viewBox: "0 0 140 140",
    class: "text"
}
  , a4 = {
    x: "0%",
    class: "label mozilla"
}
  , r4 = {
    key: 0,
    "xlink:href": "#circle-path",
    textLength: "377"
}
  , l4 = {
    key: 1,
    "xlink:href": "#circle-path",
    textLength: "377"
};
function c4(e, s, t, n, o, i) {
    return r(),
    u("div", o4, [(r(),
    u("svg", n4, [a("text", a4, [e.isNight ? (r(),
    u("textPath", r4, c(e.$t("overlays.attention.attention")) + "Â  " + c(e.$t("overlays.attention.attention")) + "Â  ", 1)) : (r(),
    u("textPath", l4, c(e.$t("overlays.attention.return")) + "Â Â  ", 1))])]))])
}
const d4 = O(i4, [["render", c4], ["__scopeId", "data-v-b0afea63"]])
  , u4 = "data:image/webp;base64,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"
  , g4 = {
    computed: {
        ...M(["session", "grimoire", "players", "keybindings", "settings"]),
        ...D("game", ["hasGardener"]),
        ...D("user", ["isStoryteller"]),
        hasGardener() {
            return this.players.npcs.some( ({id: e}) => e === "gardener")
        }
    },
    methods: {
        ...U(["setGrimoireMode"]),
        ...U("settings", ["toggleTutorialDisabled"]),
        ...$("game", ["distributeRoles"]),
        beginFirstNight() {
            this.$store.dispatch("game/togglePhase"),
            this.setGrimoireMode("grimoire")
        }
    }
}
  , m4 = {
    class: "overlay",
    id: "first-night"
}
  , h4 = {
    key: 0
}
  , p4 = {
    class: "shortcut"
}
  , A4 = ["checked"];
function b4(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("i18n-t");
    return r(),
    u("div", m4, [a("h4", null, [a("span", null, c(e.$t("overlays.firstnight.title")), 1), b(l, {
        icon: "times-circle",
        onClick: s[0] || (s[0] = R(d => e.setGrimoireMode("grimoire"), ["stop"]))
    })]), i.hasGardener && !i.hasGardener ? (r(),
    C(g, {
        key: 0,
        scope: "global",
        keypath: "overlays.firstnight.gardener_text"
    }, {
        default: T( () => [a("div", {
            class: _(["button", {
                disabled: e.session.hook.name
            }]),
            onClick: s[1] || (s[1] = d => e.distributeRoles())
        }, c(e.$t("overlays.firstnight.gardener_button")), 3)]),
        _: 1
    })) : (r(),
    u(y, {
        key: 1
    }, [b(g, {
        keypath: "overlays.firstnight.reminders",
        scope: "global"
    }, {
        default: T( () => [...s[4] || (s[4] = [a("img", {
            src: u4,
            alt: "Reminder token"
        }, null, -1)])]),
        _: 1
    }), s[6] || (s[6] = a("br", null, null, -1)), e.players.players.length > 6 ? (r(),
    u("span", h4, [v(c(e.$t("overlays.firstnight.bluffs")) + " ", 1), s[5] || (s[5] = a("br", null, null, -1))])) : A("", !0), a("div", {
        class: "button",
        onClick: s[2] || (s[2] = d => i.beginFirstNight())
    }, [a("em", p4, c(e.keybindings.toggleNight[0].trim()), 1), v(" " + c(e.$t("overlays.firstnight.button_begin")), 1)])], 64)), a("label", null, [a("input", {
        type: "checkbox",
        checked: !e.settings.game.isTutorialDisabled,
        onChange: s[3] || (s[3] = (...d) => e.toggleTutorialDisabled && e.toggleTutorialDisabled(...d))
    }, null, 40, A4), b(l, {
        icon: e.settings.game.isTutorialDisabled ? "circle" : "check-circle"
    }, null, 8, ["icon"]), v(" " + c(e.$t("modals.settings.setting_tutorial")), 1)])])
}
const f4 = O(g4, [["render", b4], ["__scopeId", "data-v-0e90414c"]])
  , v4 = {
    computed: {
        ...M("players", ["players"]),
        ...M(["session", "grimoire", "vote", "keybindings", "settings"]),
        ...D("user", ["isStoryteller"]),
        ...D("players", ["playerName"])
    },
    data() {
        return {
            showSwap: [],
            showMove: []
        }
    },
    methods: {
        ...U(["setGrimoireMode"]),
        ...U("settings", ["toggleTutorialDisabled"]),
        addPlayer() {
            !this.isStoryteller || this.players.length >= 20 || this.$store.dispatch("players/addPlayer")
        },
        async randomizeSeatings() {
            if (!(!this.isStoryteller || this.vote.nomination))
                try {
                    if (await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "overlays.gatherplayers.shuffle_title",
                        text: "overlays.gatherplayers.shuffle_text"
                    })) {
                        const s = this.players.map( (t, n) => [Math.random(), n]).sort( (t, n) => t[0] - n[0]).map(t => t[1]);
                        this.$store.dispatch("players/movePlayers", s)
                    }
                } catch {}
        },
        clearEmpty() {
            if (!this.isStoryteller || this.vote.nomination)
                return;
            const e = [];
            this.players.forEach( (s, t) => {
                var n;
                (n = this.session.users.get(s.id)) != null && n.isOnline || e.push(t)
            }
            ),
            this.$store.dispatch("players/removePlayers", e)
        },
        async clearPlayers() {
            if (!(!this.isStoryteller || this.vote.nomination))
                try {
                    await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "overlays.gatherplayers.clear_title",
                        text: "overlays.gatherplayers.clear_text"
                    }) && (this.$store.dispatch("game/end"),
                    this.$store.commit("players/clearPlayers"))
                } catch {}
        },
        movePlayer(e, s) {
            const t = Number(e.dataTransfer.getData("player"));
            if (this.showMove = [],
            !Number.isInteger(t) || !Number.isInteger(s) || !this.isStoryteller || this.vote.nomination)
                return;
            const n = Array.from(this.players.keys());
            n.splice(t < s + 1 ? s : s + 1, 0, n.splice(t, 1)[0]),
            this.$store.dispatch("players/movePlayers", n)
        },
        swapPlayer(e, s) {
            const t = Number(e.dataTransfer.getData("player"));
            if (this.showSwap = [],
            !Number.isInteger(t) || !Number.isInteger(s) || !this.isStoryteller || this.vote.nomination)
                return;
            const n = Array.from(this.players.keys());
            n[t] = s,
            n[s] = t,
            this.$store.dispatch("players/movePlayers", n)
        },
        selectEdition() {
            this.$store.commit("toggleModal", {
                name: "edition"
            }),
            this.$store.commit("setGrimoireMode", "rules")
        }
    }
}
  , y4 = {
    id: "gather"
}
  , _4 = {
    key: 0,
    class: "textbox"
}
  , w4 = {
    class: "shortcut"
}
  , k4 = ["checked"]
  , C4 = {
    class: "button-group"
}
  , S4 = {
    class: "button-group"
}
  , P4 = {
    key: 0
}
  , T4 = ["onDragenter", "onDrop", "onDragleave"]
  , I4 = ["onDragenter", "onDrop", "onDragleave"];
function M4(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("i18n-t");
    return r(),
    u("div", y4, [e.settings.game.isTutorialDisabled ? A("", !0) : (r(),
    u("div", _4, [a("h4", null, [a("span", null, c(e.$t("overlays.gatherplayers.title")), 1), b(l, {
        icon: "times-circle",
        onClick: s[0] || (s[0] = R(d => e.setGrimoireMode("grimoire"), ["stop"]))
    })]), v(" " + c(e.$t("overlays.gatherplayers.text")) + " ", 1), e.players.length >= 7 ? (r(),
    C(g, {
        key: 0,
        keypath: "overlays.gatherplayers.text2",
        scope: "global"
    }, {
        default: T( () => [a("div", {
            class: "button",
            onClick: s[1] || (s[1] = d => i.selectEdition())
        }, [a("em", w4, c(e.keybindings.toggleEdition[0].trim()), 1), v(" " + c(e.$t("overlays.gatherplayers.button_select")), 1)])]),
        _: 1
    })) : (r(),
    u(y, {
        key: 1
    }, [v(c(e.$t("overlays.gatherplayers.warning")), 1)], 64)), a("label", null, [a("input", {
        type: "checkbox",
        checked: !e.settings.game.isTutorialDisabled,
        onChange: s[2] || (s[2] = (...d) => e.toggleTutorialDisabled && e.toggleTutorialDisabled(...d))
    }, null, 40, k4), b(l, {
        icon: e.settings.game.isTutorialDisabled ? "circle" : "check-circle"
    }, null, 8, ["icon"]), v(" " + c(e.$t("modals.settings.setting_tutorial")), 1)])])), a("div", C4, [a("div", {
        class: _(["button primary", {
            disabled: e.players.length >= 20
        }]),
        onClick: s[3] || (s[3] = (...d) => i.addPlayer && i.addPlayer(...d))
    }, [b(l, {
        icon: "plus-circle"
    }), v(" " + c(e.$t("overlays.gatherplayers.button_add")), 1)], 2), a("div", {
        class: "button secondary",
        onClick: s[4] || (s[4] = (...d) => i.randomizeSeatings && i.randomizeSeatings(...d))
    }, [b(l, {
        icon: "dice"
    }), v(" " + c(e.$t("overlays.gatherplayers.button_shuffle")), 1)])]), a("div", S4, [e.session.sessionId ? (r(),
    u("div", {
        key: 0,
        class: "button",
        onClick: s[5] || (s[5] = (...d) => i.clearEmpty && i.clearEmpty(...d))
    }, [b(l, {
        icon: "trash-alt"
    }), v(" " + c(e.$t("overlays.gatherplayers.button_clear")), 1)])) : A("", !0), a("div", {
        class: "button",
        onClick: s[6] || (s[6] = (...d) => i.clearPlayers && i.clearPlayers(...d))
    }, [b(l, {
        icon: "trash-alt"
    }), v(" " + c(e.$t("overlays.gatherplayers.button_clearall")), 1)])]), b(L, {
        name: "fade"
    }, {
        default: T( () => [e.grimoire.playerDragState > -1 ? (r(),
        u("ul", {
            key: 0,
            class: _(["drop circle", ["size-" + e.players.length]])
        }, [(r(!0),
        u(y, null, N(e.players, (d, h) => (r(),
        u("li", {
            key: h,
            class: _({
                swap: o.showSwap[h],
                move: o.showMove[h]
            })
        }, [e.grimoire.playerDragState !== h ? (r(),
        u("div", P4, [b(l, {
            class: "move",
            icon: "arrow-circle-right"
        }), e.grimoire.playerDragState !== (h === e.players.length - 1 ? 0 : h + 1) ? (r(),
        u("div", {
            key: 0,
            class: "after",
            onDragenter: R(m => o.showMove[h] = 1, ["prevent"]),
            onDragover: s[7] || (s[7] = R( () => {}
            , ["prevent"])),
            onDrop: m => i.movePlayer(m, h),
            onDragleave: m => o.showMove[h] = 0
        }, c(e.$t("overlays.gatherplayers.move", [e.$t(...e.playerName(d))])), 41, T4)) : A("", !0), b(l, {
            class: "swap",
            icon: "exchange-alt"
        }), a("div", {
            class: "name",
            onDragenter: R(m => o.showSwap[h] = 1, ["prevent"]),
            onDragover: s[8] || (s[8] = R( () => {}
            , ["prevent"])),
            onDrop: m => i.swapPlayer(m, h),
            onDragleave: m => o.showSwap[h] = 0
        }, c(e.$t("overlays.gatherplayers.swap", [e.$t(...e.playerName(d))])), 41, I4)])) : A("", !0)], 2))), 128))], 2)) : A("", !0)]),
        _: 1
    })])
}
const R4 = O(v4, [["render", M4], ["__scopeId", "data-v-a930d6e8"]])
  , D4 = {
    computed: {
        ...M("players", ["players"]),
        ...M("user", ["user"]),
        ...M(["session", "grimoire"]),
        ...D("session", ["pointedPlayers"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess", "isSpectator"]),
        ...D("game", ["isNight"]),
        ...D("players", ["playerName"]),
        userPoint() {
            const e = this.players.findIndex( ({id: s}) => s === this.user.id);
            return this.session.pointers[e]
        }
    },
    data() {
        return {
            pointingTimer: null
        }
    },
    methods: {
        ...U(["setGrimoireMode"]),
        countdown() {
            this.session.isPointing !== "countdown" && (this.$store.commit("session/setPointingState", "countdown"),
            this.pointingTimer = setTimeout( () => {
                this.$store.commit("session/setPointingState", "locked")
            }
            , 4e3))
        },
        close() {
            this.session.isPointing === "countdown" && (clearInterval(this.pointingTimer),
            this.$store.commit("session/setPointingState", "locked")),
            this.setGrimoireMode("grimoire")
        }
    },
    watch: {
        "grimoire.mode"() {
            this.grimoire.mode !== "pointing" && clearTimeout(this.pointingTimer)
        },
        "session.isPointing"() {
            this.session.isPointing === "countdown" ? this.isNight || this.$store.commit("playSound", "countdown") : this.$store.commit("removeSound", {
                name: "countdown"
            })
        }
    }
}
  , E4 = {
    class: "overlay",
    id: "pointing"
}
  , N4 = {
    key: 0
}
  , B4 = {
    key: 1
}
  , V4 = {
    key: 0
}
  , O4 = {
    class: "secondary"
}
  , j4 = {
    key: 1
}
  , U4 = {
    key: 2,
    class: "button-group"
}
  , H4 = {
    key: 0,
    class: "countdown"
}
  , q4 = {
    class: "animation-critical"
};
function L4(e, s, t, n, o, i) {
    const l = k("font-awesome-icon");
    return r(),
    u("div", E4, [a("div", null, [e.session.isPointing === "locked" || e.hasGrimoireAccess ? (r(),
    u(y, {
        key: 0
    }, [v(c(e.session.isPointing === "locked" ? e.$t("overlays.pointing.title_locked", e.pointedPlayers.length) : e.$t("overlays.pointing.title_open", e.pointedPlayers.length)) + " ", 1), e.pointedPlayers.length ? (r(),
    u("span", N4, [(r(!0),
    u(y, null, N(e.pointedPlayers, g => (r(),
    u("b", {
        key: g
    }, c(e.$t(...e.playerName(e.players[g]))), 1))), 128))])) : (r(),
    u("span", B4, c(e.$t("overlays.pointing.nobody")), 1))], 64)) : A("", !0)]), !e.isStoryteller && e.players[i.userPoint] ? (r(),
    u("div", V4, [v(c(e.$t("overlays.pointing.you_pointed")) + " ", 1), a("b", O4, c(e.$t(...e.playerName(e.players[i.userPoint]))), 1)])) : !e.isStoryteller && !e.isSpectator && e.session.isPointing !== "locked" ? (r(),
    u("div", j4, c(e.$t("overlays.pointing.prompt")), 1)) : e.isStoryteller ? (r(),
    u("div", U4, [a("div", {
        class: _(["button primary", {
            disabled: e.session.isPointing === "countdown"
        }]),
        onClick: s[0] || (s[0] = (...g) => i.countdown && i.countdown(...g))
    }, [b(l, {
        icon: "stopwatch"
    }), v(" " + c(e.$t("overlays.pointing.button_countdown")), 1)], 2), a("div", {
        class: "button",
        onClick: s[1] || (s[1] = (...g) => i.close && i.close(...g))
    }, [b(l, {
        icon: "times-circle"
    }), v(" " + c(e.$t("common.button_close")), 1)])])) : A("", !0), b(L, {
        name: "blur"
    }, {
        default: T( () => [e.session.isPointing === "countdown" ? (r(),
        u("div", H4, [s[2] || (s[2] = a("span", {
            class: "animation-critical"
        }, "3", -1)), s[3] || (s[3] = a("span", {
            class: "animation-critical"
        }, "2", -1)), s[4] || (s[4] = a("span", {
            class: "animation-critical"
        }, "1", -1)), a("span", q4, c(e.$t("overlays.pointing.countdown_freeze")), 1)])) : A("", !0)]),
        _: 1
    })])
}
const z4 = O(D4, [["render", L4], ["__scopeId", "data-v-61f33cda"]])
  , Ra = {
    computed: {
        ...M(["session", "grimoire"]),
        ...M("players", ["players", "storytellers"]),
        ...D("user", ["isStoryteller"]),
        isEvilWin() {
            return !!this.session.hook.params
        },
        isPlayersRevealed() {
            return this.players.every( ({revealed: e}) => e)
        },
        announcementSize() {
            return this.$t(`overlays.reveal.${this.isEvilWin ? "evil" : "good"}`).length
        }
    },
    data() {
        return {
            revealTimeouts: []
        }
    },
    methods: {
        revealGameResult() {
            var e;
            (e = this.storytellers[0]) != null && e.revealed || this.$store.commit("players/updateStoryteller", {
                property: "revealed",
                value: !0
            })
        },
        revealPlayers(e=100) {
            this.clearRevealTimeouts(),
            this.players.filter( ({revealed: s}) => !s).forEach( (s, t) => {
                this.revealTimeouts.push(setTimeout( () => {
                    s.revealed || (this.$store.commit("players/updatePlayer", {
                        player: s,
                        property: "revealed",
                        value: !0
                    }),
                    this.isPlayersRevealed && this.clearRevealTimeouts())
                }
                , e * t))
            }
            )
        },
        clearRevealTimeouts() {
            this.revealTimeouts.forEach(e => clearTimeout(e)),
            this.revealTimeouts = []
        }
    },
    beforeUnmount() {
        this.clearRevealTimeouts()
    }
}
  , sl = () => {
    he(e => ({
        c7bf9514: e.announcementSize
    }))
}
  , tl = Ra.setup;
Ra.setup = tl ? (e, s) => (sl(),
tl(e, s)) : sl;
const G4 = {
    key: 0
}
  , W4 = {
    key: 1
}
  , F4 = {
    key: 0,
    class: "info overlay"
}
  , Q4 = {
    class: "button-group"
};
function Z4(e, s, t, n, o, i) {
    var g, d, h;
    const l = k("i18n-t");
    return r(),
    u("div", {
        id: "reveal",
        class: _({
            "game-result": (g = e.storytellers[0]) == null ? void 0 : g.revealed
        })
    }, [b(l, {
        scope: "global",
        tag: "div",
        keypath: "overlays.reveal.result",
        class: _(["result", {
            evil: i.isEvilWin
        }])
    }, {
        default: T( () => [i.isEvilWin ? (r(),
        u("b", G4, c(e.$t("overlays.reveal.evil")), 1)) : (r(),
        u("b", W4, c(e.$t("overlays.reveal.good")), 1))]),
        _: 1
    }, 8, ["class"]), !o.revealTimeouts.length && !i.isPlayersRevealed && e.isStoryteller ? (r(),
    u("div", F4, [a("h4", null, c(e.$t("overlays.reveal.title")), 1), v(" " + c(e.$t("overlays.reveal.text")) + " ", 1), a("div", Q4, [a("div", {
        class: _(["button", {
            disabled: (d = e.storytellers[0]) == null ? void 0 : d.revealed,
            primary: !((h = e.storytellers[0]) != null && h.revealed)
        }]),
        onClick: s[0] || (s[0] = m => i.revealGameResult())
    }, c(e.$t("overlays.reveal.button_result")), 3), a("div", {
        class: "button secondary",
        onClick: s[1] || (s[1] = m => i.revealPlayers(1e3))
    }, c(e.$t("overlays.reveal.button_remaining")), 1), a("div", {
        class: "button",
        onClick: s[2] || (s[2] = m => i.revealPlayers())
    }, c(e.$t("common.button_cancel")), 1)])])) : A("", !0)], 2)
}
const X4 = O(Ra, [["render", Z4], ["__scopeId", "data-v-2d35607a"]])
  , K4 = {
    computed: {
        ...M(["keybindings", "settings"]),
        ...M("players", ["players"])
    },
    methods: {
        ...U(["setGrimoireMode", "toggleModal"]),
        ...U("settings", ["toggleTutorialDisabled"]),
        characters() {
            this.toggleModal({
                name: "roles"
            }),
            this.setGrimoireMode("firstnight")
        }
    }
}
  , Y4 = {
    class: "overlay",
    id: "rules"
}
  , J4 = {
    class: "shortcut"
}
  , $4 = ["checked"];
function x4(e, s, t, n, o, i) {
    const l = k("font-awesome-icon")
      , g = k("i18n-t");
    return r(),
    u("div", Y4, [a("h4", null, [a("span", null, c(e.$t("overlays.rules.title")), 1), b(l, {
        icon: "times-circle",
        onClick: s[0] || (s[0] = R(d => e.setGrimoireMode("grimoire"), ["stop"]))
    })]), b(g, {
        keypath: "overlays.rules.text",
        scope: "global"
    }, {
        default: T( () => [a("div", {
            class: "button",
            onClick: s[1] || (s[1] = d => i.characters())
        }, [a("em", J4, c(e.keybindings.toggleRoles[0].trim()), 1), v(" " + c(e.$t("overlays.rules.button_select")), 1)])]),
        _: 1
    }), s[3] || (s[3] = a("br", null, null, -1)), v(" " + c(e.$t("overlays.rules.text2")) + " ", 1), a("label", null, [a("input", {
        type: "checkbox",
        checked: !e.settings.game.isTutorialDisabled,
        onChange: s[2] || (s[2] = (...d) => e.toggleTutorialDisabled && e.toggleTutorialDisabled(...d))
    }, null, 40, $4), b(l, {
        icon: e.settings.game.isTutorialDisabled ? "circle" : "check-circle"
    }, null, 8, ["icon"]), v(" " + c(e.$t("modals.settings.setting_tutorial")), 1)])])
}
const eM = O(K4, [["render", x4], ["__scopeId", "data-v-24c029fc"]])
  , sM = {
    components: {
        Timer: fl
    },
    computed: {
        ...M(["edition", "grimoire", "keybindings", "game", "settings"]),
        ...M("players", ["players"]),
        ...D("user", ["isStoryteller"]),
        ...D("chat", ["isVideoWhisper"]),
        ...D("game", ["isNight", "lastPhase"]),
        backgroundImage() {
            return this.edition.isOfficial || this.grimoire.theme <= 0 ? null : this.edition.logo && this.settings.general.isImageOptIn ? `url(${this.edition.logo})` : this.edition.name && !this.edition.hideTitle ? `url(${new URL("/assets/logo-label-q983_f8F.webp",import.meta.url).href})` : `url(${new URL("/assets/logo-Dh6MJCdH.webp",import.meta.url).href})`
        },
        teams() {
            const {players: e} = this.$store.state.players
              , s = this.$store.getters["players/nonTravellers"]
              , t = e.filter(o => o.isDead !== !0 && o.role.team !== "traveller").length
              , n = e.filter(o => o.isDead !== !0 && o.role.team === "traveller").length;
            return {
                ...ze[s],
                traveller: e.length - s,
                nonTravellers: s,
                alive: t,
                aliveTravellers: n,
                votes: t + n + e.filter(o => o.isDead === !0 && o.isVoteless !== !0).length
            }
        }
    },
    methods: {
        ...U(["toggleTownSquare"]),
        gatherPlayers() {
            !this.isStoryteller || this.players.length >= 20 || this.$store.commit("setGrimoireMode", "gather")
        }
    }
}
  , tM = {
    key: 0,
    class: "tutorial"
}
  , iM = {
    class: "shortcut"
}
  , oM = {
    key: 1,
    class: "meta"
}
  , nM = {
    key: 3,
    class: "box"
}
  , aM = {
    key: 0,
    class: "phase"
}
  , rM = ["title"]
  , lM = ["title"]
  , cM = {
    class: "townsfolk"
}
  , dM = {
    class: "townsfolk"
}
  , uM = {
    class: "minion"
}
  , gM = {
    class: "minion"
}
  , mM = {
    class: "outsider"
}
  , hM = {
    class: "outsider"
}
  , pM = {
    class: "demon"
}
  , AM = {
    class: "demon"
};
function bM(e, s, t, n, o, i) {
    var h, m, p, f, P, w, B, j;
    const l = k("i18n-t")
      , g = k("Timer")
      , d = k("font-awesome-icon");
    return r(),
    u("div", {
        class: _(["town-info", {
            "few-players": e.players.length < 5
        }])
    }, [i.backgroundImage ? (r(),
    u("div", {
        key: 0,
        class: "edition",
        style: q({
            backgroundImage: i.backgroundImage
        })
    }, null, 4)) : A("", !0), b(L, {
        name: "fade"
    }, {
        default: T( () => [e.players.length < 5 && e.grimoire.mode !== "gather" ? (r(),
        u("div", tM, [b(l, {
            keypath: "overlays.towninfo.title",
            scope: "global"
        }, {
            default: T( () => [a("b", null, c(e.$t("common.title")), 1)]),
            _: 1
        }), s[2] || (s[2] = a("br", null, null, -1)), e.isStoryteller ? (r(),
        C(l, {
            key: 0,
            keypath: "overlays.towninfo.text_st",
            scope: "global"
        }, {
            default: T( () => [a("div", {
                class: "button",
                onClick: s[0] || (s[0] = (...V) => i.gatherPlayers && i.gatherPlayers(...V))
            }, [a("em", iM, c(e.keybindings.modeGather[0].trim()), 1), v(" " + c(e.$t("overlays.towninfo.button_gather")), 1)])]),
            _: 1
        })) : (r(),
        u(y, {
            key: 1
        }, [v(c(e.$t("overlays.towninfo.text_player")), 1)], 64))])) : A("", !0)]),
        _: 1
    }), !e.edition.isOfficial && e.edition.name && e.grimoire.theme > 0 && (!e.edition.hideTitle || !e.settings.general.isImageOptIn) ? (r(),
    u("span", oM, c(e.edition.name) + " " + c(e.edition.author ? e.$t("overlays.towninfo.script_by", [e.edition.author]) : ""), 1)) : A("", !0), e.grimoire.mode === "grimoire" && !e.isVideoWhisper ? (r(),
    C(g, {
        key: 2
    })) : A("", !0), e.players.length >= 5 ? (r(),
    u("div", nM, [e.game.isRunning && e.game.history.length ? (r(),
    u("b", aM, [e.lastPhase ? e.isNight ? (r(),
    u(y, {
        key: 1
    }, [b(d, {
        icon: "cloud-moon"
    }), v(" " + c(e.$t("grimoire.phases.night", Math.ceil(e.game.phase / 2))), 1)], 64)) : (r(),
    u(y, {
        key: 2
    }, [b(d, {
        icon: "sun"
    }), v(" " + c(e.$t("grimoire.phases.day", e.game.phase / 2)), 1)], 64)) : (r(),
    u(y, {
        key: 0
    }, [v(c(e.$t("grimoire.phases.start")), 1)], 64))])) : A("", !0), a("table", null, [a("tbody", null, [a("tr", null, [a("td", null, c(e.$t("grimoire.players")), 1), a("td", null, [v(c(i.teams.nonTravellers) + " ", 1), i.teams.traveller ? (r(),
    u("span", {
        key: 0,
        class: "travellers",
        title: e.$t("grimoire.traveller", i.teams.traveller)
    }, " + " + c(i.teams.traveller), 9, rM)) : A("", !0)]), a("td", null, c(e.$t("overlays.towninfo.alive")), 1), a("td", null, [v(c(i.teams.alive) + " ", 1), i.teams.aliveTravellers ? (r(),
    u("span", {
        key: 0,
        class: "travellers",
        title: e.$t("grimoire.traveller", i.teams.traveller)
    }, " + " + c(i.teams.aliveTravellers), 9, lM)) : A("", !0)])]), e.players.length >= 5 ? (r(),
    u(y, {
        key: 0
    }, [a("tr", null, [a("td", cM, c(e.$t("grimoire.townsfolk", (h = i.teams.townsfolk) != null ? h : 0)), 1), a("td", dM, c((m = i.teams.townsfolk) != null ? m : "?"), 1), a("td", uM, c(e.$t("grimoire.minion", (p = i.teams.minion) != null ? p : 0)), 1), a("td", gM, c((f = i.teams.minion) != null ? f : "?"), 1)]), a("tr", null, [a("td", mM, c(e.$t("grimoire.outsider", (P = i.teams.outsider) != null ? P : 0)), 1), a("td", hM, c((w = i.teams.outsider) != null ? w : "?"), 1), a("td", pM, c(e.$t("grimoire.demon", (B = i.teams.demon) != null ? B : 0)), 1), a("td", AM, c((j = i.teams.demon) != null ? j : "?"), 1)])], 64)) : A("", !0)])]), e.grimoire.isTownSquare ? (r(),
    C(l, {
        key: 1,
        scope: "global",
        keypath: "overlays.towninfo.return",
        tag: "p",
        onClick: s[1] || (s[1] = V => e.toggleTownSquare())
    }, {
        default: T( () => [a("b", null, c(e.keybindings.toggleTownSquare[0].trim()), 1)]),
        _: 1
    })) : A("", !0)])) : A("", !0)], 2)
}
const fM = O(sM, [["render", bM], ["__scopeId", "data-v-931a37aa"]])
  , vM = {
    inject: ["bindShortcut", "unbindShortcut"],
    computed: {
        ...M("players", ["players", "npcs", "storytellers"]),
        ...M("user", ["user"]),
        ...M(["grimoire", "vote", "keybindings", "rolesAvailable"]),
        ...D("players", ["alive", "playerName"]),
        ...D("user", ["isStoryteller"]),
        isBigWig() {
            return this.vote.nominationType === "bigwig" && !this.vote.isInProgress
        },
        isPhases() {
            return !this.vote.isInProgress && this.vote.nominationType === "phases" && this.vote.locked < -1
        },
        isVoudon() {
            return this.players.some(e => e.role.id === "voudon" && !e.isDead)
        },
        majority() {
            return Math.ceil(this.nominee.role.team === "traveller" ? this.players.length / 2 : this.players.filter( ({isDead: e}) => !e).length / 2)
        },
        voteTally() {
            return this.vote.votes.reduce( (e, s) => e + s, 0)
        },
        nominator() {
            return this.players[this.vote.nomination[0]] || {
                role: {},
                id: null
            }
        },
        nominatorStyle() {
            const e = this.players.length
              , s = this.vote.nomination[0];
            return {
                transform: `rotate(${Math.round(s / e * 360)}deg)`,
                transitionDuration: this.vote.speed - 100 + "ms"
            }
        },
        nominee() {
            return this.players[this.vote.nomination[1]] || {
                role: {},
                id: null
            }
        },
        nomineeStyleStatic() {
            const e = this.players.length
              , t = 360 * this.vote.nomination[1] / e;
            return {
                transform: `rotate(${Math.round(t)}deg)`,
                transitionDuration: this.vote.speed - 100 + "ms"
            }
        },
        nomineeStyleMoving() {
            const e = this.players.length
              , s = this.vote.nomination[1]
              , t = Math.max(this.vote.locked, 0)
              , n = 360 * (s + Math.min(t, e)) / e;
            return {
                transform: `rotate(${Math.round(n)}deg)`,
                transitionDuration: this.vote.speed - 100 + "ms"
            }
        },
        player() {
            return this.players.find(e => e.id === this.user.id) || {
                role: {}
            }
        },
        currentVote() {
            const e = this.players.findIndex(s => s.id === this.user.id);
            return e >= 0 ? this.vote.votes[e] : void 0
        },
        currentPlayer() {
            if (!this.vote.isInProgress)
                return this.players[this.vote.nomination[1]];
            const e = Math.max(this.vote.locked, 0);
            return this.players[(this.vote.nomination[1] + e) % this.players.length]
        },
        canVote() {
            var n;
            if (this.isStoryteller || !this.vote.nomination || !this.player.id || this.player.isVoteless && this.nominee.role.team !== "traveller" && ((n = this.player.role) == null ? void 0 : n.id) !== "banshee" && !this.currentVote)
                return !1;
            const e = this.players.length;
            return (this.players.indexOf(this.player) - 1 + e - this.vote.nomination[1]) % e >= Math.max(this.vote.locked, 0) - 1
        },
        secretVoteRole() {
            var e;
            return this.nominee.role.team === "traveller" ? !1 : (e = [...this.players, ...this.storytellers, ...this.npcs.map(s => ({
                role: s
            }))].find( ({role: s}) => {
                var t;
                return (t = s.special) == null ? void 0 : t.some(n => n.type === "vote" && n.name === "hidden")
            }
            )) == null ? void 0 : e.role
        }
    },
    data() {
        return {
            voteTimeout: !1,
            isSelectingPlayer: !1,
            voteDelay: 500
        }
    },
    methods: {
        ...$("vote", ["setMarkedPlayer"]),
        ...U("vote", ["setSelectedPlayer"]),
        ...U(["setPlayerSelectCallback"]),
        nextPhase() {
            this.vote.locked === -3 ? this.$store.commit("vote/lockVote", -2) : this.vote.locked === -2 && this.$store.commit("vote/lockVote", 0)
        },
        selectPlayer() {
            this.isSelectingPlayer ? (this.isSelectingPlayer = !1,
            this.setPlayerSelectCallback()) : (this.isSelectingPlayer = !0,
            this.setPlayerSelectCallback(e => {
                this.setPlayerSelectCallback(),
                this.isSelectingPlayer && (this.isSelectingPlayer = !1,
                this.setSelectedPlayer(e))
            }
            ))
        },
        toggleHidden() {
            this.vote.isInProgress || this.vote.locked > 0 || this.$store.commit("vote/toggleIsHidden", !this.vote.isHidden)
        },
        startCountdown() {
            this.$store.commit("vote/lockVote", -1),
            this.$store.commit("vote/toggleVoteInProgress", !0),
            this.$store.commit("vote/setVoteTimer", setInterval( () => {
                this.startLockingVotes()
            }
            , 4e3))
        },
        start() {
            this.$store.commit("vote/lockVote", 0),
            this.$store.commit("vote/toggleVoteInProgress", !0),
            this.$store.commit("vote/setVoteTimer", setInterval( () => {
                this.vote.nomination && this.startLockingVotes()
            }
            , 1e3))
        },
        startLockingVotes() {
            this.$store.commit("vote/lockVote", 1),
            this.$store.commit("vote/setVoteTimer", setInterval( () => {
                this.vote.nomination && (this.$store.commit("vote/lockVote"),
                this.vote.locked > this.players.length && (this.$store.commit("vote/setVoteTimer"),
                this.$store.commit("vote/toggleVoteInProgress", !1)))
            }
            , this.vote.speed))
        },
        pause() {
            this.vote.voteTimer && this.vote.voteTimer !== "paused" && this.vote.locked >= 1 ? this.$store.commit("vote/setVoteTimer", "paused") : this.vote.voteTimer === "paused" && this.$store.commit("vote/setVoteTimer", setInterval( () => {
                this.$store.commit("vote/lockVote"),
                this.vote.locked > this.players.length && (this.$store.commit("vote/setVoteTimer"),
                this.$store.commit("vote/toggleVoteInProgress", !1))
            }
            , this.vote.speed))
        },
        stop() {
            this.$store.commit("vote/setVoteTimer"),
            this.$store.commit("vote/lockVote", 0),
            this.setSelectedPlayer(-1),
            this.$store.commit("vote/toggleVoteInProgress", !1)
        },
        finish() {
            this.$store.commit("vote/setVoteTimer"),
            this.$store.dispatch("vote/addLogEntry"),
            this.$store.commit("vote/nomination")
        },
        castVote(e) {
            if (!this.canVote)
                return !1;
            const s = this.players.findIndex(t => t.id === this.user.id);
            e === void 0 && (e = this.vote.votes[s] ? 0 : 1),
            s >= 0 && this.vote.votes[s] !== e && !this.voteTimeout && (this.voteTimeout = !0,
            this.$store.commit("vote/castVote", {
                index: s,
                value: e
            }),
            setTimeout( () => {
                this.voteTimeout = !1
            }
            , this.voteDelay))
        },
        markPlayer() {
            var e;
            this.vote.isHidden || this.vote.isInProgress || (((e = this.nominee.role) == null ? void 0 : e.team) !== "traveller" && this.setMarkedPlayer(),
            this.finish())
        },
        async setHighscore() {
            if (this.isStoryteller)
                try {
                    const e = await this.$store.dispatch("openDialogue", {
                        type: "prompt",
                        title: "overlays.vote.highscore_title",
                        placeholder: "overlays.vote.highscore_placeholder",
                        value: this.vote.highscore,
                        text: "overlays.vote.highscore_text"
                    });
                    this.$store.commit("vote/setHighscore", Math.abs(Number(e) || 0))
                } catch {}
        }
    },
    mounted() {
        this.bindShortcut("castVote", () => {
            if (!this.isStoryteller && this.vote.nomination)
                return this.castVote(),
                !0;
            if (this.vote.nomination)
                return this.markPlayer(),
                !0
        }
        ),
        this.bindShortcut("swipeUp2", () => this.castVote(!0)),
        this.bindShortcut("swipeDown2", () => this.castVote(!1))
    },
    beforeUnmount() {
        this.unbindShortcut("castVote"),
        this.unbindShortcut("swipeUp2"),
        this.unbindShortcut("swipeDown2"),
        this.isSelectingPlayer && (this.isSelectingPlayer = !1,
        this.setPlayerSelectCallback())
    },
    watch: {
        "vote.nomination"() {
            this.vote.nomination || this.$store.commit("vote/setVoteTimer")
        },
        "vote.isInProgress"() {
            this.vote.isInProgress || this.$store.commit("vote/setVoteTimer")
        },
        "vote.locked"() {
            const e = (this.vote.nomination[1] + this.vote.locked - 1) % this.players.length;
            this.vote.locked === -1 ? this.$store.commit("playSound", "countdown") : this.vote.locked === 0 ? this.$store.commit("removeSound", {
                name: "countdown"
            }) : this.vote.locked > 0 && this.vote.locked <= this.players.length ? (this.vote.votes[e] && this.vote.locked > 1 && !this.vote.isHidden && this.$store.commit("playSound", "voteCast"),
            this.vote.speed < 1e3 ? this.$store.commit("playSound", "voteTickShort") : this.$store.commit("playSound", "voteTick")) : this.vote.locked === this.players.length + 1 && this.vote.votes[e] && !this.vote.isHidden && this.$store.commit("playSound", "voteCast")
        }
    }
}
  , yM = {
    id: "vote"
}
  , _M = {
    class: "clock"
}
  , wM = {
    class: "arrows"
}
  , kM = ["aria-live", "aria-label"]
  , CM = {
    class: "overlay"
}
  , SM = {
    key: 0
}
  , PM = {
    key: 3,
    class: "majority"
}
  , TM = {
    class: "majority"
}
  , IM = {
    key: 1
}
  , MM = {
    class: "majority"
}
  , RM = {
    class: "majority"
}
  , DM = {
    class: "majority"
}
  , EM = {
    key: 4
}
  , NM = {
    key: 0
}
  , BM = {
    class: "button-group"
}
  , VM = {
    class: "button-group"
}
  , OM = {
    class: "warning"
}
  , jM = {
    class: "button-group"
}
  , UM = {
    key: 0,
    class: "countdown"
}
  , HM = {
    class: "animation-critical"
};
function qM(e, s, t, n, o, i) {
    var d, h;
    const l = k("font-awesome-icon")
      , g = k("i18n-t");
    return r(),
    u("div", yM, [a("div", _M, [s[14] || (s[14] = a("div", {
        class: "background"
    }, [a("span", {
        class: "ring"
    })], -1)), a("div", wM, [a("span", {
        class: "nominator animation-critical",
        style: q(i.nominatorStyle)
    }, null, 4), a("span", {
        class: "nominee-static animation-critical",
        style: q(i.nomineeStyleStatic)
    }, null, 4), a("span", {
        class: "nominee-moving animation-critical",
        style: q(i.nomineeStyleMoving),
        "aria-live": e.vote.locked >= 0 && e.vote.isInProgress ? "assertive" : "",
        "aria-label": e.$t("overlays.vote.pointing", [e.$t(...e.playerName(i.currentPlayer))])
    }, null, 12, kM)])]), a("div", CM, [i.isBigWig && e.vote.selectedPlayer >= 0 ? (r(),
    u("div", SM, [v(c(e.$t("overlays.vote.defense_attorney")) + ": ", 1), a("b", null, c(e.$t(...e.playerName(e.players[e.vote.selectedPlayer]))), 1), e.isStoryteller && e.vote.selectedPlayer >= 0 ? (r(),
    C(l, {
        key: 0,
        icon: "trash-alt",
        class: "icon",
        onClick: s[0] || (s[0] = m => e.setSelectedPlayer(-1)),
        "aria-hidden": "false",
        "aria-label": e.$t("overlays.vote.button_clear_selection")
    }, null, 8, ["aria-label"])) : A("", !0)])) : A("", !0), i.isBigWig && e.vote.selectedPlayer < 0 && (e.isStoryteller || i.nominee.id === e.user.id) ? (r(),
    u(y, {
        key: 1
    }, [v(c(e.$t("overlays.vote.choose_defense_attorney")), 1)], 64)) : i.isPhases ? (r(),
    u(y, {
        key: 2
    }, [v(c(e.vote.locked === -3 ? e.$t("overlays.vote.accusation") : e.$t("overlays.vote.defense")) + ": ", 1), a("b", null, c(e.vote.locked === -3 ? e.$t(...e.playerName(e.players[e.vote.nomination[0]])) : e.$t(...e.playerName(e.players[e.vote.nomination[1]]))), 1)], 64)) : (r(),
    u("div", PM, [i.isVoudon && i.nominee.role.team !== "traveller" ? (r(),
    u(y, {
        key: 0
    }, [e.vote.highscore ? (r(),
    C(g, {
        key: 0,
        scope: "global",
        tag: "span",
        keypath: "overlays.vote.votes",
        plural: e.vote.highscore
    }, {
        default: T( () => [a("b", null, c(Math.round(e.vote.highscore * 10) / 10), 1), a("b", TM, c(Math.round(e.vote.highscore * 10 + 10) / 10), 1)]),
        _: 1
    }, 8, ["plural"])) : (r(),
    u("span", IM, c(e.$t("overlays.vote.no_majority")), 1))], 64)) : i.nominee.role.team === "traveller" || e.vote.highscore < i.majority ? (r(),
    C(g, {
        key: 1,
        scope: "global",
        keypath: "overlays.vote.majority",
        plural: i.majority
    }, {
        default: T( () => [a("b", MM, c(i.majority), 1)]),
        _: 1
    }, 8, ["plural"])) : (r(),
    C(g, {
        key: 2,
        scope: "global",
        keypath: "overlays.vote.votes",
        plural: Math.round(e.vote.highscore * 10) / 10
    }, {
        default: T( () => [a("b", RM, c(Math.round(e.vote.highscore * 10) / 10), 1), a("b", DM, c(Math.round(e.vote.highscore * 10 + 10) / 10), 1)]),
        _: 1
    }, 8, ["plural"])), e.isStoryteller && i.nominee.role.team !== "traveller" ? (r(),
    C(l, {
        key: 3,
        class: "icon",
        icon: "pen-to-square",
        onClick: s[1] || (s[1] = m => i.setHighscore()),
        "aria-hidden": "false",
        "aria-label": e.$t("overlays.vote.button_set_highscore")
    }, null, 8, ["aria-label"])) : A("", !0)])), !e.isStoryteller && e.vote.isHidden ? (r(),
    u("div", EM, [b(l, {
        icon: "star",
        class: "special"
    }), v(" " + c(e.$t("overlays.vote.secret")), 1)])) : A("", !0), e.isStoryteller ? (r(),
    u(y, {
        key: 5
    }, [i.secretVoteRole ? (r(),
    u("label", NM, [b(l, {
        icon: "star",
        class: "special"
    }), a("input", {
        type: "checkbox",
        onChange: s[2] || (s[2] = (...m) => i.toggleHidden && i.toggleHidden(...m))
    }, null, 32), v(" " + c(i.secretVoteRole.name) + ": " + c(e.$t("overlays.vote.secret_vote")) + " ", 1), b(l, {
        icon: e.vote.isHidden ? "check-circle" : "circle"
    }, null, 8, ["icon"])])) : A("", !0), a("div", BM, [i.isBigWig && e.vote.selectedPlayer < 0 ? (r(),
    u("div", {
        key: 0,
        class: _(["button", {
            primary: !o.isSelectingPlayer
        }]),
        onClick: s[3] || (s[3] = m => i.selectPlayer())
    }, [b(l, {
        icon: "user"
    }), v(" " + c(o.isSelectingPlayer ? e.$t("common.button_cancel") : e.$t("overlays.vote.button_select_player")), 1)], 2)) : i.isPhases ? (r(),
    u("div", {
        key: 1,
        class: "button primary",
        onClick: s[4] || (s[4] = (...m) => i.nextPhase && i.nextPhase(...m))
    }, [b(l, {
        icon: "volume-up"
    }), v(" " + c(e.vote.locked === -3 ? e.$t("overlays.vote.button_defense") : e.$t("overlays.vote.button_chat")), 1)])) : e.vote.isInProgress ? (r(),
    u(y, {
        key: 3
    }, [a("div", {
        class: _(["button primary", {
            disabled: !e.vote.voteTimer || e.vote.locked < 1
        }]),
        onClick: s[7] || (s[7] = (...m) => i.pause && i.pause(...m))
    }, [b(l, {
        icon: e.vote.voteTimer === "paused" ? "play-circle" : "pause-circle"
    }, null, 8, ["icon"]), v(" " + c(e.vote.voteTimer === "paused" ? e.$t("overlays.vote.button_resume") : e.$t("overlays.vote.button_pause")), 1)], 2), a("div", {
        class: "button secondary",
        onClick: s[8] || (s[8] = m => i.stop())
    }, [b(l, {
        icon: "redo-alt"
    }), v(" " + c(e.$t("overlays.vote.button_reset")), 1)])], 64)) : (r(),
    u(y, {
        key: 2
    }, [a("div", {
        class: "button primary",
        onClick: s[5] || (s[5] = m => i.startCountdown())
    }, [b(l, {
        icon: "stopwatch"
    }), v(" " + c(e.$t("overlays.vote.button_countdown")), 1)]), a("div", {
        class: "button secondary",
        onClick: s[6] || (s[6] = m => i.start())
    }, [b(l, {
        icon: e.vote.locked > 0 ? "redo-alt" : "play-circle"
    }, null, 8, ["icon"]), v(" " + c(e.vote.locked > 0 ? e.$t("overlays.vote.button_restart") : e.$t("overlays.vote.button_start")), 1)])], 64))]), a("div", VM, [i.nominee.role.team !== "traveller" ? (r(),
    u("div", {
        key: 0,
        class: _(["button mark", {
            disabled: e.vote.isHidden || e.vote.isInProgress
        }]),
        onClick: s[9] || (s[9] = m => i.markPlayer())
    }, [b(l, {
        icon: "skull"
    }), v(" " + c(e.vote.locked > e.players.length && i.voteTally === e.vote.highscore && e.vote.markedPlayer > -1 && i.voteTally ? e.$t("overlays.vote.button_mark_remove") : e.$t("overlays.vote.button_mark")), 1)], 2)) : A("", !0), a("div", {
        class: "button",
        onClick: s[10] || (s[10] = m => i.finish())
    }, [b(l, {
        icon: "times-circle"
    }), v(" " + c(e.$t("common.button_close")), 1)])])], 64)) : i.canVote ? (r(),
    u(y, {
        key: 6
    }, [a("div", OM, [b(l, {
        icon: "warning"
    }), v(" " + c(e.$t("overlays.vote.warning_shortcuts")), 1)]), a("div", jM, [a("div", {
        class: _(["button primary", {
            disabled: !i.currentVote || o.voteTimeout
        }]),
        onClick: s[11] || (s[11] = m => i.castVote(0))
    }, [b(l, {
        icon: "hand"
    }), v(" " + c(e.$t("overlays.vote.button_hand_down")), 1)], 2), a("div", {
        class: _(["button secondary", {
            disabled: i.currentVote && i.currentVote !== 2 || o.voteTimeout
        }]),
        onClick: s[12] || (s[12] = m => i.castVote(1))
    }, [b(l, {
        icon: "hand"
    }), v(" " + c(e.$t("overlays.vote.button_hand_up")), 1)], 2), i.player.isDead && ((d = i.player.role) == null ? void 0 : d.id) === "banshee" && ((h = i.nominee.role) == null ? void 0 : h.team) !== "traveller" ? (r(),
    u("div", {
        key: 0,
        class: _(["button secondary", {
            disabled: i.currentVote === 2 || o.voteTimeout
        }]),
        onClick: s[13] || (s[13] = m => i.castVote(2))
    }, [b(l, {
        icon: "hand"
    }), b(l, {
        icon: "hand"
    }), v(" " + c(e.$t("overlays.vote.button_hand_up")), 1)], 2)) : A("", !0)])], 64)) : A("", !0)]), b(L, {
        name: "blur"
    }, {
        default: T( () => [e.vote.isInProgress && e.vote.locked === -1 ? (r(),
        u("div", UM, [s[15] || (s[15] = a("span", {
            class: "animation-critical"
        }, "3", -1)), s[16] || (s[16] = a("span", {
            class: "animation-critical"
        }, "2", -1)), s[17] || (s[17] = a("span", {
            class: "animation-critical"
        }, "1", -1)), a("span", HM, c(e.$t("overlays.vote.countdown_go")), 1)])) : A("", !0)]),
        _: 1
    })])
}
const LM = O(vM, [["render", qM], ["__scopeId", "data-v-3437a078"]])
  , zM = {
    name: "WhisperOverlay",
    components: {
        PlayerReminders: ca,
        ChatVideo: ua,
        Token: ve
    },
    inject: ["setDropHandler"],
    computed: {
        ...M(["chat", "positions"]),
        ...M("players", ["players", "storytellers"]),
        ...M("user", ["user"]),
        ...M("session", ["users"]),
        ...D("players", ["seatedPlayerMap", "storytellerMap"]),
        usersInWhisper() {
            return [...this.users].filter( ([e]) => {
                var s;
                return this.chat.userChannels.get(e) === this.chat.channel && this.seatedPlayerMap.has(e) && ((s = this.users.get(e)) == null ? void 0 : s.isOnline)
            }
            ).sort( ([e]) => this.chat.video.streams.get(e) ? 1 : -1).map( ([e]) => this.seatedPlayerMap.get(e))
        }
    },
    data() {
        return {
            dragging: !1
        }
    },
    methods: {
        ...U(["toggleModal", "setPosition"]),
        changeCharacter(e) {
            var t;
            if (((t = e.role) == null ? void 0 : t.team) === "traveller")
                return;
            const s = this.storytellers.includes(e) ? this.storytellers.indexOf(e) * -1 - 1 : this.players.indexOf(e);
            this.toggleModal({
                name: "role",
                params: {
                    playerIndex: s
                }
            })
        },
        startDrag(e) {
            e.target.getBoundingClientRect && (e.dataTransfer.dropEffect = "move",
            e.dataTransfer.effectAllowed = "move",
            e.dataTransfer.setData("text/plain", ""),
            this.dragging = {
                x: e.target.getBoundingClientRect().x - e.x,
                y: e.target.getBoundingClientRect().y - e.y,
                offsetHeight: e.target.offsetHeight,
                offsetWidth: e.target.offsetWidth
            },
            this.setDropHandler(this.stopDrag.bind(this)))
        },
        stopDrag(e) {
            const s = this.positions.whisper || {};
            s.x = Math.min(Math.max(0, Math.round(this.dragging.x + e.x)), window.innerWidth - this.dragging.offsetWidth) + "px",
            s.y = Math.min(Math.max(0, Math.round(this.dragging.y + e.y)), window.innerHeight - this.dragging.offsetHeight) + "px",
            this.setPosition({
                name: "whisper",
                value: s
            }),
            this.dragging = !1
        },
        toggleMinimized() {
            const e = this.positions.whisper || {};
            e.minimized = !e.minimized,
            this.setPosition({
                name: "whisper",
                value: e
            })
        }
    },
    beforeMount() {
        this.$nextTick( () => {
            window.whispersElem = this.$refs.whispers
        }
        )
    },
    beforeUnmount() {
        window.whispersElem = null
    }
}
  , GM = ["draggable"]
  , WM = {
    key: 0,
    class: "shroud"
}
  , FM = {
    class: "name"
};
function QM(e, s, t, n, o, i) {
    var m, p, f, P, w, B, j, V;
    const l = k("ChatVideo")
      , g = k("font-awesome-icon")
      , d = k("PlayerReminders")
      , h = k("Token");
    return r(),
    u("ul", {
        id: "whispers",
        ref: "whispers",
        onClick: s[0] || (s[0] = (...S) => i.toggleMinimized && i.toggleMinimized(...S)),
        class: _({
            small: (m = e.positions.whisper) == null ? void 0 : m.minimized,
            dragging: o.dragging,
            positioned: ((p = e.positions.whisper) == null ? void 0 : p.minimized) && ((f = e.positions.whisper) == null ? void 0 : f.x),
            crowded: i.usersInWhisper.length > 6
        }),
        draggable: (P = e.positions.whisper) == null ? void 0 : P.minimized,
        onDragstart: s[1] || (s[1] = R(S => i.startDrag(S), ["stop"])),
        style: q({
            left: (w = e.positions.whisper) != null && w.minimized ? (B = e.positions.whisper) == null ? void 0 : B.x : void 0,
            top: (j = e.positions.whisper) != null && j.minimized ? (V = e.positions.whisper) == null ? void 0 : V.y : void 0
        })
    }, [(r(!0),
    u(y, null, N(i.usersInWhisper, (S, E) => {
        var I, Z, H, F, K, Y, ie, x, de;
        return r(),
        u("li", {
            key: S.id,
            class: _(["video", [{
                storyteller: e.storytellerMap.has(S.id),
                dead: S.isDead,
                "no-vote": S.isVoteless
            }, (Z = (I = e.users.get(S.id)) == null ? void 0 : I.flags) == null ? void 0 : Z.map(ae => "flag-" + ae), "id-" + S.id]]),
            style: q({
                zIndex: 20 - E,
                "--speaking": `var(--speaking${S.id})`,
                "--volume": `var(--volume${S.id})`
            })
        }, [b(l, {
            "user-id": S.id
        }, null, 8, ["user-id"]), S.isDead ? (r(),
        u("div", WM)) : A("", !0), a("span", FM, [e.chat.video.streams.get(S.id) && ((H = e.chat.usersMuted[S.id]) != null && H.video) ? (r(),
        C(g, {
            key: 0,
            class: _({
                silenced: e.chat.userOverrides.get("novideo-" + S.id) === 0
            }),
            icon: "video-slash",
            title: e.$t("overlays.whisper.video_muted")
        }, null, 8, ["class", "title"])) : A("", !0), (F = e.chat.usersDeafened[S.id]) != null && F.audio || S.id === e.user.id && e.chat.audio.isDeafened ? (r(),
        C(g, {
            key: 1,
            icon: "ear-deaf"
        })) : A("", !0), e.chat.audio.streams.get(S.id) && ((K = e.chat.usersMuted[S.id]) != null && K.audio || e.chat.userOverrides.get("volume-" + S.id) === 0) ? (r(),
        C(g, {
            key: 2,
            class: _({
                silenced: e.chat.userOverrides.get("volume-" + S.id) === 0
            }),
            icon: "microphone-slash",
            title: e.$t("overlays.whisper.muted")
        }, null, 8, ["class", "title"])) : A("", !0), v(" " + c(((Y = e.users.get(S.id)) == null ? void 0 : Y.username) || e.$t("common.unnamed_user")) + " " + c((ie = e.users.get(S.id)) != null && ie.pronouns ? "(" + ((x = e.users.get(S.id)) == null ? void 0 : x.pronouns) + ")" : ""), 1)]), b(d, {
            player: S
        }, null, 8, ["player"]), b(h, {
            onClick: R(ae => i.changeCharacter(S), ["stop"]),
            role: S.role,
            class: _({
                "has-role": (de = S.role) == null ? void 0 : de.id
            }),
            alignment: S.alignment
        }, null, 8, ["onClick", "role", "class", "alignment"])], 6)
    }
    ), 128))], 46, GM)
}
const ZM = O(zM, [["render", QM], ["__scopeId", "data-v-460d86ac"]])
  , XM = {
    computed: {
        ...M("players", ["players"]),
        ...M("user", ["user"]),
        ...D("game", ["hasGardener"]),
        ...D("players", ["seatedPlayerMap"]),
        ...D("user", ["isStoryteller", "getOpenEyes"]),
        player() {
            var e;
            return (e = this.seatedPlayerMap.get(this.user.id)) != null ? e : {}
        },
        abilities() {
            var e, s, t;
            return (t = (s = (e = this.player.role) == null ? void 0 : e.special) == null ? void 0 : s.filter(n => n.type === "player" && n.time === "night").map(n => n.name)) != null ? t : []
        }
    },
    data() {
        return {
            loading: !1
        }
    },
    methods: {
        openEyes(e) {
            var t, n, o;
            if (e && ((t = this.player.status) != null && t.includes(e)) || !e && !((n = this.player.status) != null && n.includes("open-eyes")) && !((o = this.player.status) != null && o.includes("peek-eyes")) || this.loading)
                return;
            this.loading = !0;
            const s = this.players.indexOf(this.player);
            s < 0 || (this.$store.commit("players/openEyes", {
                index: s,
                value: e
            }),
            e && (this.$store.commit("chat/setTextRecipient", "system"),
            this.$store.commit("setTab", {
                tab: "text",
                value: 1
            })))
        }
    },
    watch: {
        getOpenEyes() {
            this.loading = !1
        }
    }
}
  , KM = {
    class: "overlay",
    id: "night-action"
}
  , YM = {
    key: 0,
    class: "ability"
}
  , JM = ["data-tooltip"]
  , $M = {
    class: "button-group"
};
function xM(e, s, t, n, o, i) {
    const l = k("i18n-t");
    return r(),
    u("div", KM, [i.abilities.includes("open-eyes") ? (r(),
    u("div", YM, [b(l, {
        keypath: "overlays.nightaction.open-eyes.text",
        scope: "global"
    }, {
        default: T( () => [a("b", {
            "data-tooltip": e.$t(`overlays.nightaction.open-eyes.tooltip_${String(e.getOpenEyes)}`)
        }, c(e.$t(`overlays.nightaction.open-eyes.state_${String(e.getOpenEyes)}`)), 9, JM)]),
        _: 1
    }), a("div", $M, [a("div", {
        class: _(["button primary", {
            disabled: e.getOpenEyes === "open-eyes" || o.loading
        }]),
        onClick: s[0] || (s[0] = g => i.openEyes("open-eyes"))
    }, c(e.$t("overlays.nightaction.open-eyes.button_open")), 3), a("div", {
        class: _(["button secondary", {
            disabled: e.getOpenEyes === "peek-eyes" || o.loading
        }]),
        onClick: s[1] || (s[1] = g => i.openEyes("peek-eyes"))
    }, c(e.$t("overlays.nightaction.open-eyes.button_peek")), 3), a("div", {
        class: _(["button", {
            disabled: !e.getOpenEyes || o.loading
        }]),
        onClick: s[2] || (s[2] = g => i.openEyes(!1))
    }, c(e.$t("overlays.nightaction.open-eyes.button_close")), 3)])])) : A("", !0)])
}
const eR = O(XM, [["render", xM], ["__scopeId", "data-v-312b1633"]])
  , sR = {
    components: {
        NightActionOverlay: eR,
        WhisperOverlay: ZM,
        VoteOverlay: LM,
        TownInfoOverlay: fM,
        RulesOverlay: eM,
        RevealOverlay: X4,
        PointingOverlay: z4,
        GatherPlayersOverlay: R4,
        FirstNightOverlay: f4,
        AttentionOverlay: d4
    },
    computed: {
        ...M(["session", "grimoire", "vote"]),
        ...D("user", ["isStoryteller", "hasNightAction"]),
        ...D("chat", ["isVideoWhisper"])
    },
    data() {
        return {}
    }
};
function tR(e, s, t, n, o, i) {
    const l = k("AttentionOverlay")
      , g = k("FirstNightOverlay")
      , d = k("GatherPlayersOverlay")
      , h = k("RulesOverlay")
      , m = k("PointingOverlay")
      , p = k("RevealOverlay")
      , f = k("VoteOverlay")
      , P = k("NightActionOverlay")
      , w = k("TownInfoOverlay")
      , B = k("WhisperOverlay");
    return r(),
    u(y, null, [b(L, {
        name: "blur"
    }, {
        default: T( () => [e.session.hook.name === "attention-gong" ? (r(),
        C(l, {
            key: 0
        })) : A("", !0)]),
        _: 1
    }), b(L, {
        name: "fade"
    }, {
        default: T( () => [e.isStoryteller && e.grimoire.mode === "firstnight" ? (r(),
        C(g, {
            key: 0
        })) : e.isStoryteller && e.grimoire.mode === "gather" ? (r(),
        C(d, {
            key: 1
        })) : e.isStoryteller && e.grimoire.mode === "rules" ? (r(),
        C(h, {
            key: 2
        })) : e.grimoire.mode === "pointing" ? (r(),
        C(m, {
            key: 3
        })) : e.grimoire.mode === "reveal" ? (r(),
        C(p, {
            key: 4
        })) : e.vote.nomination ? (r(),
        C(f, {
            key: 5
        })) : e.hasNightAction ? (r(),
        C(P, {
            key: 6
        })) : (r(),
        C(w, {
            key: 7
        }))]),
        _: 1
    }), b(L, {
        name: "fade"
    }, {
        default: T( () => [e.isVideoWhisper ? (r(),
        C(B, {
            key: 0
        })) : A("", !0)]),
        _: 1
    })], 64)
}
const iR = O(sR, [["render", tR]])
  , Da = {
    components: {
        NPCModal: S1,
        Overlays: iR,
        SetupModal: Od,
        VerificationModal: Ma,
        UserModal: Ed,
        ModerationModal: Dd,
        AnnouncementModal: Rd,
        UsersModal: BT,
        TextTab: jP,
        CharacterTab: hP,
        NightOrderTab: FS,
        BluffsTab: TS,
        NPCsTab: CS,
        ChatTab: mS,
        Storyteller: QC,
        HelpModal: Tl,
        SettingsModal: Pl,
        SignalModal: Uw,
        Player: U_,
        RoleModal: K_,
        ReminderModal: nw,
        DialogueModal: ma,
        RulesModal: g1,
        VoteHistoryModal: f1,
        EditionModal: K1,
        RolesModal: ak
    },
    computed: {
        ...M(["grimoire", "session", "edition", "vote", "settings"]),
        ...M("players", ["players"]),
        ...M("user", ["user"]),
        ...D("user", ["isStoryteller"]),
        ...D("game", ["isNight"]),
        ...D("chat", ["hasAvatars"]),
        getBackground() {
            const {theme: e} = this.grimoire
              , {background: s, isImageOptIn: t} = this.settings.general;
            return this.settings.advanced.chromaKey ? {
                backgroundColor: this.settings.advanced.chromaKey
            } : s ? {
                backgroundImage: `url(${s})`
            } : this.edition.background && t ? {
                backgroundImage: `url(${this.edition.background})`
            } : e ? e > 0 ? {
                backgroundImage: `url(${new URL(Object.assign({
                    "/src/assets/editions/bmr/background1.webp": Dn,
                    "/src/assets/editions/bmr/background1t.webp": xe,
                    "/src/assets/editions/bmr/background2.webp": En,
                    "/src/assets/editions/bmr/background2t.webp": es,
                    "/src/assets/editions/bmr/background3.webp": Nn,
                    "/src/assets/editions/bmr/background3t.webp": ss,
                    "/src/assets/editions/bmr/background4.webp": Bn,
                    "/src/assets/editions/bmr/background4t.webp": ts,
                    "/src/assets/editions/bmr/background5.webp": Vn,
                    "/src/assets/editions/bmr/background5t.webp": is,
                    "/src/assets/editions/bmr/background6.webp": On,
                    "/src/assets/editions/bmr/background6t.webp": os,
                    "/src/assets/editions/custom/background1.webp": jn,
                    "/src/assets/editions/custom/background1t.webp": ns,
                    "/src/assets/editions/custom/background2.webp": Un,
                    "/src/assets/editions/custom/background2t.webp": as,
                    "/src/assets/editions/custom/background3.webp": Hn,
                    "/src/assets/editions/custom/background3t.webp": rs,
                    "/src/assets/editions/custom/background4.webp": qn,
                    "/src/assets/editions/custom/background4t.webp": ls,
                    "/src/assets/editions/custom/background5.webp": Ln,
                    "/src/assets/editions/custom/background5t.webp": cs,
                    "/src/assets/editions/custom/background6.webp": zn,
                    "/src/assets/editions/custom/background6t.webp": ds,
                    "/src/assets/editions/custom/background7.webp": Gn,
                    "/src/assets/editions/custom/background7t.webp": us,
                    "/src/assets/editions/custom/background8.webp": Wn,
                    "/src/assets/editions/custom/background8t.webp": gs,
                    "/src/assets/editions/snv/background1.webp": Fn,
                    "/src/assets/editions/snv/background1t.webp": ms,
                    "/src/assets/editions/snv/background2.webp": Qn,
                    "/src/assets/editions/snv/background2t.webp": hs,
                    "/src/assets/editions/snv/background3.webp": Zn,
                    "/src/assets/editions/snv/background3t.webp": ps,
                    "/src/assets/editions/snv/background4.webp": Xn,
                    "/src/assets/editions/snv/background4t.webp": As,
                    "/src/assets/editions/snv/background5.webp": Kn,
                    "/src/assets/editions/snv/background5t.webp": bs,
                    "/src/assets/editions/snv/background6.webp": Yn,
                    "/src/assets/editions/snv/background6t.webp": fs,
                    "/src/assets/editions/tb/background1.webp": Jn,
                    "/src/assets/editions/tb/background1t.webp": vs,
                    "/src/assets/editions/tb/background2.webp": $n,
                    "/src/assets/editions/tb/background2t.webp": ys,
                    "/src/assets/editions/tb/background3.webp": xn,
                    "/src/assets/editions/tb/background3t.webp": _s,
                    "/src/assets/editions/tb/background4.webp": ea,
                    "/src/assets/editions/tb/background4t.webp": ws,
                    "/src/assets/editions/tb/background5.webp": sa,
                    "/src/assets/editions/tb/background5t.webp": ks,
                    "/src/assets/editions/tb/background6.webp": ta,
                    "/src/assets/editions/tb/background6t.webp": Cs
                })[`/src/assets/editions/${this.edition.isOfficial ? this.edition.id : "custom"}/background${e}.webp`],import.meta.url).href})`
            } : {
                backgroundImage: `url(${new URL(Object.assign({
                    "/src/assets/background.webp": ia,
                    "/src/assets/background1.webp": oa,
                    "/src/assets/background1t.webp": Ss,
                    "/src/assets/background2.webp": na,
                    "/src/assets/background2t.webp": Ps,
                    "/src/assets/background3.webp": aa,
                    "/src/assets/background3t.webp": Ts
                })[`/src/assets/background${-e}.webp`],import.meta.url).href})`
            } : {
                backgroundImage: `url(${new URL("/assets/background1-C0iW8pNy.webp",import.meta.url).href})`
            }
        },
        offset() {
            return this.settings.general.grimoireOffset || "0%"
        },
        zoom() {
            let e;
            return this.players.length < 7 ? e = 18 + this.settings.general.tokenZoom : this.players.length <= 10 ? e = 16 + this.settings.general.tokenZoom : this.players.length <= 15 ? e = 14 + this.settings.general.tokenZoom : e = 12 + this.settings.general.tokenZoom,
            `min(${e}vw,${e}vh)`
        },
        scale() {
            return this.players.length < 7 ? (18 + this.settings.general.tokenZoom) / 18 : this.players.length <= 10 ? (16 + this.settings.general.tokenZoom) / 16 : this.players.length <= 15 ? (14 + this.settings.general.tokenZoom) / 14 : (12 + this.settings.general.tokenZoom) / 12
        }
    },
    data() {
        return {
            dropHandler: () => {}
        }
    },
    provide() {
        return {
            setDropHandler: e => {
                this.dropHandler = e
            }
        }
    },
    methods: {
        ...U(["toggleModal", "setGrimoireMode"]),
        doDrop(e) {
            this.dropHandler(e),
            this.dropHandler = () => {}
        },
        backgroundError() {
            this.$store.commit("settings/setBackground", "")
        }
    }
}
  , il = () => {
    he(e => ({
        v676cc2c3: e.zoom,
        f4796f4c: e.scale,
        v2bff0783: e.offset
    }))
}
  , ol = Da.setup;
Da.setup = ol ? (e, s) => (il(),
ol(e, s)) : il;
const oR = ["src"]
  , nR = ["src"]
  , aR = {
    id: "left"
};
function rR(e, s, t, n, o, i) {
    const l = k("Player")
      , g = k("Overlays")
      , d = k("Storyteller")
      , h = k("ChatTab")
      , m = k("TextTab")
      , p = k("NPCsTab")
      , f = k("BluffsTab")
      , P = k("CharacterTab")
      , w = k("NightOrderTab")
      , B = k("HelpModal")
      , j = k("ReminderModal")
      , V = k("RoleModal")
      , S = k("SignalModal")
      , E = k("EditionModal")
      , I = k("NPCModal")
      , Z = k("RolesModal")
      , H = k("VoteHistoryModal")
      , F = k("RulesModal")
      , K = k("DialogueModal")
      , Y = k("SettingsModal")
      , ie = k("UsersModal")
      , x = k("UserModal")
      , de = k("AnnouncementModal")
      , ae = k("ModerationModal")
      , Fe = k("VerificationModal")
      , Qe = k("SetupModal");
    return r(),
    u("div", {
        id: "grimoire",
        onDragover: s[2] || (s[2] = R( () => {}
        , ["prevent"])),
        onDragenter: s[3] || (s[3] = R( () => {}
        , ["prevent"])),
        onDrop: s[4] || (s[4] = R( (...J) => i.doDrop && i.doDrop(...J), ["prevent"])),
        class: _([{
            [e.grimoire.mode]: e.grimoire.mode !== "grimoire",
            townsquare: e.grimoire.isTownSquare || e.vote.locked > 0 || e.vote.isInProgress,
            storyteller: e.isStoryteller,
            player: e.players.some( ({id: J}) => J === e.user.id),
            vote: e.vote.nomination,
            ["nomination-" + e.vote.nominationType]: e.vote.nomination && e.vote.nominationType !== "regular",
            session: e.session.sessionId,
            loading: e.grimoire.loadingState,
            night: e.isNight,
            "has-avatars": e.hasAvatars
        }])
    }, [a("div", {
        id: "center",
        style: q(i.getBackground)
    }, [e.settings.general.background && !e.settings.advanced.chromaKey ? (r(),
    u(y, {
        key: 0
    }, [e.settings.general.background.match(/\.(mp4|webm)$/i) ? (r(),
    u("video", {
        key: 0,
        id: "background",
        onError: s[0] || (s[0] = J => i.backgroundError()),
        src: e.settings.general.background,
        autoplay: "",
        loop: ""
    }, null, 40, oR)) : (r(),
    u("img", {
        key: 1,
        id: "background-check",
        src: e.settings.general.background,
        onError: s[1] || (s[1] = J => i.backgroundError()),
        alt: ""
    }, null, 40, nR))], 64)) : A("", !0), b(L, {
        name: "fade"
    }, {
        default: T( () => [(e.isNight || e.session.hook.name === "reveal-grimoire") && !e.settings.advanced.chromaKey ? (r(),
        u("div", {
            key: 0,
            class: _(["night-backdrop", {
                static: e.settings.advanced.hasNightStatic
            }])
        }, null, 2)) : A("", !0)]),
        _: 1
    }), a("h1", null, c(e.grimoire.isTownSquare ? "Town Square" : "Grimoire"), 1), b(L, {
        name: "fade"
    }, {
        default: T( () => [e.grimoire.loadingState ? A("", !0) : (r(),
        u("ul", {
            key: 0,
            class: _(["circle", ["size-" + e.players.length]]),
            role: "list"
        }, [(r(!0),
        u(y, null, N(e.players, (J, te) => (r(),
        C(l, {
            key: J.id || te,
            player: J,
            class: _({
                right: te < Math.floor(e.players.length / 2) && te > 0,
                left: te > Math.ceil(e.players.length / 2),
                top: te < e.players.length / 4 || te > e.players.length * .75,
                bottom: te > e.players.length / 4 && te < e.players.length * .75
            })
        }, null, 8, ["player", "class"]))), 128))], 2))]),
        _: 1
    }), b(g)], 4), a("div", aR, [b(d), b(h), b(m), b(p), b(f)]), b(P), b(w), b(B), b(j), b(V), b(S), b(E), b(I), b(Z), b(H), b(F), b(K), b(Y), b(ie), b(x), b(de), b(ae), b(Fe), b(Qe)], 34)
}
const lR = O(Da, [["render", rR]])
  , cR = {
    components: {
        AnnouncementModal: Rd,
        VerificationModal: Ma,
        UserModal: Ed,
        ModerationModal: Dd,
        HelpModal: Tl,
        SessionMeta: Md,
        SettingsModal: Pl,
        DialogueModal: ma,
        SetupModal: Od
    },
    inject: ["bindShortcut", "unbindShortcut", "isApp"],
    computed: {
        ...M("user", ["user", "levels", "accessToken", "relations"]),
        ...M(["session", "editionsAvailable", "grimoire", "chat", "npcs", "definitions", "rolesAvailable"]),
        ...D(["roleIconURL"]),
        ...D("user", ["isModerator"]),
        isSubscribed() {
            return !!this.user.level && (!this.user.expires || this.user.expires > Date.now())
        },
        sessions() {
            return this.sessionsList.filter(e => this.showPrivate || e.isPublic).sort( (e, s) => {
                var t, n;
                if (e.isPublic !== s.isPublic)
                    return e.isPublic ? -1 : 1;
                switch (this.sortColumn) {
                case "name":
                    return e.name > s.name ? this.sortAsc : -1 * this.sortAsc;
                case "language":
                    return e.language > s.language ? this.sortAsc : -1 * this.sortAsc;
                case "storytellers":
                    return ((t = e.usersAll.find(o => {
                        var i;
                        return o.id === ((i = e.storytellers[0]) == null ? void 0 : i.id)
                    }
                    )) == null ? void 0 : t.username) > ((n = s.usersAll.find(o => {
                        var i;
                        return o.id === ((i = s.storytellers[0]) == null ? void 0 : i.id)
                    }
                    )) == null ? void 0 : n.username) ? this.sortAsc : -1 * this.sortAsc;
                case "players":
                    return (e.players.length - e.players.filter(o => e.usersAll.some(i => i.id === o.id && i.isOnline)).length - (s.players.length - s.players.filter(o => s.usersAll.some(i => i.id === o.id && i.isOnline)).length) || s.players.length - e.players.length) * this.sortAsc * -1;
                case "script":
                    return e.edition.id === s.edition.id ? e.edition.name > s.edition.name ? this.sortAsc : -1 * this.sortAsc : e.edition.id > s.edition.id ? this.sortAsc : -1 * this.sortAsc;
                case "phase":
                default:
                    return ((e.isRunning ? e.phase : -1) - (s.isRunning ? s.phase : -1)) * this.sortAsc
                }
            }
            ).map(e => {
                var s, t, n;
                return Object.assign({}, e, {
                    count: e.usersAll.filter(o => o.isOnline).length,
                    blocked: e.usersAll.some(o => {
                        var i;
                        return ((i = this.relations.get(o.id)) == null ? void 0 : i.type) === "block"
                    }
                    ),
                    disabled: e.usersAll.filter(o => o.isOnline).length >= 25 && !e.players.some(o => o.id === this.user.id) && !e.storytellers.some(o => o.id === this.user.id) && !this.isModerator || !this.user.level && !e.boostDuration || e.isPublic && ((s = this.user.flags) == null ? void 0 : s.includes("forced-private")) || e.isPublic && !((t = this.user.flags) != null && t.includes("verified-phone")) && !this.user.level,
                    editionIcon: new URL(Object.assign({
                        "/src/assets/editions/bmr/skull.webp": Is,
                        "/src/assets/editions/custom/skull.webp": Ms,
                        "/src/assets/editions/homebrew/skull.webp": Rs,
                        "/src/assets/editions/snv/skull.webp": Ds,
                        "/src/assets/editions/tb/skull.webp": Es
                    })[`/src/assets/editions/${(n = e.edition.id) != null ? n : "custom"}/skull.webp`],import.meta.url).href,
                    languageName: Ls.getName(e.language),
                    phaseIcon: e.isRunning ? e.phase ? e.phase % 2 ? "cloud-moon" : "sun" : "cloud" : "hourglass-half",
                    phase: e.isRunning ? e.phase ? e.phase % 2 ? this.$t("grimoire.phases.night", {
                        n: Math.ceil(e.phase / 2)
                    }) : this.$t("grimoire.phases.day", {
                        n: Math.ceil(e.phase / 2)
                    }) : this.$t("grimoire.phases.start") : this.$t("grimoire.phases.end"),
                    seats: e.players.filter(o => e.usersAll.some(i => i.id === o.id && i.isOnline)).length + " / " + e.players.length,
                    languageIcon: new URL(Object.assign({
                        "/node_modules/language-icons/icons/aa.svg": Tn,
                        "/node_modules/language-icons/icons/ab.svg": Pn,
                        "/node_modules/language-icons/icons/ae.svg": Sn,
                        "/node_modules/language-icons/icons/af.svg": Cn,
                        "/node_modules/language-icons/icons/ak.svg": kn,
                        "/node_modules/language-icons/icons/am.svg": wn,
                        "/node_modules/language-icons/icons/an.svg": _n,
                        "/node_modules/language-icons/icons/ar.svg": yn,
                        "/node_modules/language-icons/icons/as.svg": vn,
                        "/node_modules/language-icons/icons/av.svg": fn,
                        "/node_modules/language-icons/icons/ay.svg": bn,
                        "/node_modules/language-icons/icons/az.svg": An,
                        "/node_modules/language-icons/icons/ba.svg": pn,
                        "/node_modules/language-icons/icons/be.svg": hn,
                        "/node_modules/language-icons/icons/bg.svg": mn,
                        "/node_modules/language-icons/icons/bh.svg": gn,
                        "/node_modules/language-icons/icons/bi.svg": un,
                        "/node_modules/language-icons/icons/bm.svg": dn,
                        "/node_modules/language-icons/icons/bn.svg": cn,
                        "/node_modules/language-icons/icons/bo.svg": ln,
                        "/node_modules/language-icons/icons/br.svg": rn,
                        "/node_modules/language-icons/icons/bs.svg": an,
                        "/node_modules/language-icons/icons/ca.svg": nn,
                        "/node_modules/language-icons/icons/ce.svg": on,
                        "/node_modules/language-icons/icons/ch.svg": tn,
                        "/node_modules/language-icons/icons/co.svg": sn,
                        "/node_modules/language-icons/icons/cr.svg": en,
                        "/node_modules/language-icons/icons/cs.svg": xo,
                        "/node_modules/language-icons/icons/cu.svg": $o,
                        "/node_modules/language-icons/icons/cv.svg": Jo,
                        "/node_modules/language-icons/icons/cy.svg": Yo,
                        "/node_modules/language-icons/icons/da.svg": Ko,
                        "/node_modules/language-icons/icons/de.svg": Xo,
                        "/node_modules/language-icons/icons/dv.svg": Zo,
                        "/node_modules/language-icons/icons/dz.svg": Qo,
                        "/node_modules/language-icons/icons/ee.svg": Fo,
                        "/node_modules/language-icons/icons/el.svg": Wo,
                        "/node_modules/language-icons/icons/en.svg": Go,
                        "/node_modules/language-icons/icons/eo.svg": zo,
                        "/node_modules/language-icons/icons/es.svg": Lo,
                        "/node_modules/language-icons/icons/et.svg": qo,
                        "/node_modules/language-icons/icons/eu.svg": Ho,
                        "/node_modules/language-icons/icons/fa.svg": Uo,
                        "/node_modules/language-icons/icons/ff.svg": jo,
                        "/node_modules/language-icons/icons/fi.svg": Oo,
                        "/node_modules/language-icons/icons/fj.svg": Vo,
                        "/node_modules/language-icons/icons/fo.svg": Bo,
                        "/node_modules/language-icons/icons/fr.svg": No,
                        "/node_modules/language-icons/icons/fy.svg": Eo,
                        "/node_modules/language-icons/icons/ga.svg": Do,
                        "/node_modules/language-icons/icons/gd.svg": Ro,
                        "/node_modules/language-icons/icons/gl.svg": Mo,
                        "/node_modules/language-icons/icons/gn.svg": Io,
                        "/node_modules/language-icons/icons/gu.svg": To,
                        "/node_modules/language-icons/icons/gv.svg": Po,
                        "/node_modules/language-icons/icons/ha.svg": So,
                        "/node_modules/language-icons/icons/he.svg": Co,
                        "/node_modules/language-icons/icons/hi.svg": ko,
                        "/node_modules/language-icons/icons/ho.svg": wo,
                        "/node_modules/language-icons/icons/hr.svg": _o,
                        "/node_modules/language-icons/icons/ht.svg": yo,
                        "/node_modules/language-icons/icons/hu.svg": vo,
                        "/node_modules/language-icons/icons/hy.svg": fo,
                        "/node_modules/language-icons/icons/hz.svg": bo,
                        "/node_modules/language-icons/icons/ia.svg": Ao,
                        "/node_modules/language-icons/icons/id.svg": po,
                        "/node_modules/language-icons/icons/ie.svg": ho,
                        "/node_modules/language-icons/icons/ig.svg": mo,
                        "/node_modules/language-icons/icons/ii.svg": go,
                        "/node_modules/language-icons/icons/ik.svg": uo,
                        "/node_modules/language-icons/icons/io.svg": co,
                        "/node_modules/language-icons/icons/is.svg": lo,
                        "/node_modules/language-icons/icons/it.svg": ro,
                        "/node_modules/language-icons/icons/iu.svg": ao,
                        "/node_modules/language-icons/icons/ja.svg": no,
                        "/node_modules/language-icons/icons/jv.svg": oo,
                        "/node_modules/language-icons/icons/ka.svg": io,
                        "/node_modules/language-icons/icons/kg.svg": to,
                        "/node_modules/language-icons/icons/ki.svg": so,
                        "/node_modules/language-icons/icons/kj.svg": eo,
                        "/node_modules/language-icons/icons/kk.svg": xi,
                        "/node_modules/language-icons/icons/kl.svg": $i,
                        "/node_modules/language-icons/icons/km.svg": Ji,
                        "/node_modules/language-icons/icons/kn.svg": Yi,
                        "/node_modules/language-icons/icons/ko.svg": Ki,
                        "/node_modules/language-icons/icons/kr.svg": Xi,
                        "/node_modules/language-icons/icons/ks.svg": Zi,
                        "/node_modules/language-icons/icons/ku.svg": Qi,
                        "/node_modules/language-icons/icons/kv.svg": Fi,
                        "/node_modules/language-icons/icons/kw.svg": Wi,
                        "/node_modules/language-icons/icons/ky.svg": Gi,
                        "/node_modules/language-icons/icons/la.svg": zi,
                        "/node_modules/language-icons/icons/lb.svg": Li,
                        "/node_modules/language-icons/icons/lg.svg": qi,
                        "/node_modules/language-icons/icons/li.svg": Hi,
                        "/node_modules/language-icons/icons/ln.svg": Ui,
                        "/node_modules/language-icons/icons/lo.svg": ji,
                        "/node_modules/language-icons/icons/lt.svg": Oi,
                        "/node_modules/language-icons/icons/lu.svg": Vi,
                        "/node_modules/language-icons/icons/lv.svg": Bi,
                        "/node_modules/language-icons/icons/mg.svg": Ni,
                        "/node_modules/language-icons/icons/mh.svg": Ei,
                        "/node_modules/language-icons/icons/mi.svg": Di,
                        "/node_modules/language-icons/icons/mk.svg": Ri,
                        "/node_modules/language-icons/icons/ml.svg": Mi,
                        "/node_modules/language-icons/icons/mn.svg": Ii,
                        "/node_modules/language-icons/icons/mr.svg": Ti,
                        "/node_modules/language-icons/icons/ms.svg": Pi,
                        "/node_modules/language-icons/icons/mt.svg": Si,
                        "/node_modules/language-icons/icons/my.svg": Ci,
                        "/node_modules/language-icons/icons/na.svg": ki,
                        "/node_modules/language-icons/icons/nb.svg": wi,
                        "/node_modules/language-icons/icons/nd.svg": _i,
                        "/node_modules/language-icons/icons/ne.svg": yi,
                        "/node_modules/language-icons/icons/ng.svg": vi,
                        "/node_modules/language-icons/icons/nl.svg": fi,
                        "/node_modules/language-icons/icons/nn.svg": bi,
                        "/node_modules/language-icons/icons/no.svg": Ai,
                        "/node_modules/language-icons/icons/nr.svg": pi,
                        "/node_modules/language-icons/icons/nv.svg": hi,
                        "/node_modules/language-icons/icons/ny.svg": mi,
                        "/node_modules/language-icons/icons/oc.svg": gi,
                        "/node_modules/language-icons/icons/oj.svg": ui,
                        "/node_modules/language-icons/icons/om.svg": di,
                        "/node_modules/language-icons/icons/or.svg": ci,
                        "/node_modules/language-icons/icons/os.svg": li,
                        "/node_modules/language-icons/icons/pa.svg": ri,
                        "/node_modules/language-icons/icons/pi.svg": ai,
                        "/node_modules/language-icons/icons/pl.svg": ni,
                        "/node_modules/language-icons/icons/ps.svg": oi,
                        "/node_modules/language-icons/icons/pt.svg": ii,
                        "/node_modules/language-icons/icons/qu.svg": ti,
                        "/node_modules/language-icons/icons/rm.svg": si,
                        "/node_modules/language-icons/icons/rn.svg": ei,
                        "/node_modules/language-icons/icons/ro.svg": xt,
                        "/node_modules/language-icons/icons/ru.svg": $t,
                        "/node_modules/language-icons/icons/rw.svg": Jt,
                        "/node_modules/language-icons/icons/sa.svg": Yt,
                        "/node_modules/language-icons/icons/sc.svg": Kt,
                        "/node_modules/language-icons/icons/sd.svg": Xt,
                        "/node_modules/language-icons/icons/se.svg": Zt,
                        "/node_modules/language-icons/icons/sg.svg": Qt,
                        "/node_modules/language-icons/icons/si.svg": Ft,
                        "/node_modules/language-icons/icons/sk.svg": Wt,
                        "/node_modules/language-icons/icons/sl.svg": Gt,
                        "/node_modules/language-icons/icons/sm.svg": zt,
                        "/node_modules/language-icons/icons/sn.svg": Lt,
                        "/node_modules/language-icons/icons/so.svg": qt,
                        "/node_modules/language-icons/icons/sq.svg": Ht,
                        "/node_modules/language-icons/icons/sr.svg": Ut,
                        "/node_modules/language-icons/icons/ss.svg": jt,
                        "/node_modules/language-icons/icons/st.svg": Ot,
                        "/node_modules/language-icons/icons/su.svg": Vt,
                        "/node_modules/language-icons/icons/sv.svg": Bt,
                        "/node_modules/language-icons/icons/sw.svg": Nt,
                        "/node_modules/language-icons/icons/ta.svg": Et,
                        "/node_modules/language-icons/icons/te.svg": Dt,
                        "/node_modules/language-icons/icons/tg.svg": Rt,
                        "/node_modules/language-icons/icons/th.svg": Mt,
                        "/node_modules/language-icons/icons/ti.svg": It,
                        "/node_modules/language-icons/icons/tk.svg": Tt,
                        "/node_modules/language-icons/icons/tl.svg": Pt,
                        "/node_modules/language-icons/icons/tn.svg": St,
                        "/node_modules/language-icons/icons/to.svg": Ct,
                        "/node_modules/language-icons/icons/tr.svg": kt,
                        "/node_modules/language-icons/icons/ts.svg": wt,
                        "/node_modules/language-icons/icons/tt.svg": _t,
                        "/node_modules/language-icons/icons/tw.svg": yt,
                        "/node_modules/language-icons/icons/ty.svg": vt,
                        "/node_modules/language-icons/icons/ug.svg": ft,
                        "/node_modules/language-icons/icons/uk.svg": bt,
                        "/node_modules/language-icons/icons/ur.svg": At,
                        "/node_modules/language-icons/icons/uz.svg": pt,
                        "/node_modules/language-icons/icons/ve.svg": ht,
                        "/node_modules/language-icons/icons/vi.svg": mt,
                        "/node_modules/language-icons/icons/vo.svg": gt,
                        "/node_modules/language-icons/icons/wa.svg": ut,
                        "/node_modules/language-icons/icons/wo.svg": dt,
                        "/node_modules/language-icons/icons/xh.svg": ct,
                        "/node_modules/language-icons/icons/yi.svg": lt,
                        "/node_modules/language-icons/icons/yo.svg": rt,
                        "/node_modules/language-icons/icons/za.svg": at,
                        "/node_modules/language-icons/icons/zh.svg": nt,
                        "/node_modules/language-icons/icons/zu.svg": ot
                    })[`/node_modules/language-icons/icons/${e.language}.svg`],import.meta.url).href,
                    spectators: e.usersAll.filter(o => ![...e.players, ...e.storytellers].some(i => i.id === o.id) && o.isOnline)
                })
            }
            )
        },
        sessionUsers() {
            return this.sessions.reduce( (e, s) => e + s.usersAll.filter(t => t.isOnline).length, 0)
        }
    },
    data() {
        return {
            updateTimer: null,
            tab: "list",
            selected: {},
            loading: !1,
            sessionsList: [],
            page: 0,
            pageSize: 10,
            sortColumn: "phase",
            sortAsc: 1,
            showPrivate: !1,
            isCreating: !1
        }
    },
    methods: {
        ...U(["toggleModal"]),
        ...$("session", ["join", "create"]),
        ...$("user", ["logout"]),
        async joinSession(e) {
            var s, t;
            if (e.disabled) {
                e.isPublic && !((s = this.user.flags) != null && s.includes("verified-phone")) && !this.user.level && this.toggleModal({
                    name: "verification"
                });
                return
            }
            if (!((t = this.user.flags) != null && t.includes("newuser") && e.npcs.some(n => n.id === "bootlegger") && !await this.$store.dispatch("openDialogue", {
                type: "confirm",
                title: this.$t("pages.lobby.bootlegger_title"),
                text: this.$t("pages.lobby.bootlegger_warning")
            })))
                return this.join(e.name)
        },
        async createSession() {
            if (this.isSubscribed && !this.isCreating)
                if (this.tab !== "create")
                    this.server = this.$store.getters["chat/chatServerPreference"][0],
                    this.tab = "create";
                else {
                    const e = new FormData(this.$refs.createForm);
                    if (!e.get("sessionName"))
                        return;
                    const s = e.get("sessionName").trim().toLocaleLowerCase();
                    if (s.length < 3)
                        return;
                    this.isCreating = !0,
                    await this.create(s),
                    this.isCreating = !1
                }
        },
        async play() {
            if (this.isSubscribed)
                return this.$store.dispatch("session/cleanGamestate"),
                this.$store.dispatch("players/becomeStoryteller"),
                W.replace({
                    name: "Grimoire"
                })
        },
        settings() {
            return this.toggleModal({
                name: "settings"
            })
        },
        help() {
            return this.toggleModal({
                name: "help"
            })
        },
        async quit() {
            await dl(0)
        },
        togglePrivate() {
            this.showPrivate = !this.showPrivate,
            this.page = 0
        },
        sortBy(e) {
            this.sortColumn === e ? this.sortAsc *= -1 : (this.sortColumn = e,
            this.sortAsc = 1)
        },
        async updateSessions() {
            if (!this.loading) {
                clearTimeout(this.updateTimer),
                this.loading = !0;
                try {
                    const e = await Oe("sessions", this.accessToken);
                    this.sessionsList = e != null && e.length ? e : []
                } catch {}
                this.sessionsList.length <= this.page * this.pageSize && (this.page = 0),
                this.updateTimer = setTimeout(this.updateSessions.bind(this), 30 * 1e3),
                this.loading = !1
            }
        },
        showUser(e) {
            e && this.toggleModal({
                name: "user",
                params: {
                    userId: e
                }
            })
        }
    },
    beforeMount() {
        this.accessToken && this.updateSessions(),
        this.bindShortcut("modalSettings", () => this.settings(), "Lobby"),
        this.bindShortcut("c", () => this.createSession(), "Lobby"),
        this.bindShortcut("l", () => this.play(), "Lobby"),
        this.bindShortcut("j", () => this.join(), "Lobby"),
        this.bindShortcut("escape", () => this.tab = "list", "Lobby")
    },
    beforeUnmount() {
        clearTimeout(this.updateTimer),
        this.unbindShortcut("modalSettings", "Lobby"),
        this.unbindShortcut("c", "Lobby"),
        this.unbindShortcut("l", "Lobby"),
        this.unbindShortcut("j", "Lobby"),
        this.unbindShortcut("escape", "Lobby")
    },
    watch: {
        "grimoire.loadingState"() {
            if (this.grimoire.loadingState === "" && this.accessToken) {
                const e = decodeURIComponent(window.location.hash.substring(1)) || this.session.sessionId;
                e ? this.join(e) : this.updateSessions()
            }
        }
    }
}
  , dR = {
    id: "lobby"
}
  , uR = {
    key: 0,
    class: "list"
}
  , gR = {
    class: "left"
}
  , mR = {
    class: "right"
}
  , hR = {
    key: 0,
    class: "loader"
}
  , pR = {
    class: "container"
}
  , AR = {
    class: "list"
}
  , bR = {
    key: 0
}
  , fR = {
    key: 0
}
  , vR = {
    colspan: "7"
}
  , yR = {
    key: 0
}
  , _R = {
    key: 1
}
  , wR = ["onClick"]
  , kR = {
    rowspan: "2"
}
  , CR = ["onClick"]
  , SR = ["src", "alt", "title"]
  , PR = ["src", "alt"]
  , TR = {
    key: 0
}
  , IR = {
    class: "storyteller"
}
  , MR = ["onClick"]
  , RR = {
    class: "players"
}
  , DR = {
    class: "tags"
}
  , ER = ["title"]
  , NR = ["title"]
  , BR = ["title"]
  , VR = ["title"]
  , OR = ["title"]
  , jR = ["title"]
  , UR = ["onClick"]
  , HR = {
    colspan: "6"
}
  , qR = {
    key: 0
}
  , LR = {
    key: 1
}
  , zR = ["title"]
  , GR = {
    key: 2
}
  , WR = ["title"]
  , FR = {
    key: 3,
    class: "players"
}
  , QR = ["onClick"]
  , ZR = {
    key: 4,
    class: "spectators"
}
  , XR = ["onClick"]
  , KR = {
    key: 1,
    class: "warning"
}
  , YR = {
    href: "https://www.patreon.com/botconline",
    target: "_blank"
}
  , JR = {
    href: "https://www.patreon.com/botconline",
    target: "_blank"
}
  , $R = {
    class: "button-group"
}
  , xR = {
    key: 4,
    class: "gap"
}
  , eD = {
    key: 5,
    class: "pagination"
}
  , sD = {
    key: 1
}
  , tD = {
    class: "button-group"
};
function iD(e, s, t, n, o, i) {
    var V, S, E;
    const l = k("i18n-t")
      , g = k("font-awesome-icon")
      , d = k("SessionMeta")
      , h = k("DialogueModal")
      , m = k("SettingsModal")
      , p = k("ModerationModal")
      , f = k("HelpModal")
      , P = k("UserModal")
      , w = k("VerificationModal")
      , B = k("SetupModal")
      , j = k("AnnouncementModal");
    return r(),
    u("div", dR, [a("main", {
        class: _(o.tab)
    }, [o.tab === "list" ? (r(),
    u("section", uR, [a("header", null, [a("span", gR, [b(l, {
        keypath: "pages.lobby.welcome",
        scope: "global"
    }, {
        default: T( () => [a("b", null, c(e.$t("common.botc_online")), 1)]),
        _: 1
    }), s[21] || (s[21] = a("br", null, null, -1)), i.isSubscribed ? (r(),
    u(y, {
        key: 0
    }, [v(c(e.$t("pages.lobby.subscription")) + ": ", 1), a("b", null, c(e.$t("common.account-levels." + e.user.level, "unknown")), 1)], 64)) : A("", !0)]), s[23] || (s[23] = a("img", {
        src: Be,
        alt: "",
        class: "logo app"
    }, null, -1)), a("span", mR, [b(l, {
        keypath: "pages.lobby.stats",
        scope: "global"
    }, {
        default: T( () => [a("b", null, c(i.sessionUsers), 1), a("b", null, c(i.sessions.length), 1), o.showPrivate ? A("", !0) : (r(),
        u(y, {
            key: 0
        }, [v(c(e.$t("pages.lobby.stats_public")), 1)], 64))]),
        _: 1
    }), s[22] || (s[22] = a("br", null, null, -1)), i.sessions.length !== o.sessionsList.length || o.showPrivate ? (r(),
    u("label", {
        key: 0,
        onClick: s[0] || (s[0] = (...I) => i.togglePrivate && i.togglePrivate(...I))
    }, [b(g, {
        icon: o.showPrivate ? "check-circle" : "circle"
    }, null, 8, ["icon"]), v(" " + c(e.$t("pages.lobby.show_private")), 1)])) : A("", !0)])]), o.loading ? (r(),
    u("div", hR, c(e.$t("pages.lobby.updating")), 1)) : A("", !0), a("div", pR, [a("table", AR, [i.sessions.length ? (r(),
    u("thead", bR, [a("tr", null, [a("td", {
        onClick: s[1] || (s[1] = I => i.sortBy("name")),
        class: _({
            ["sort-" + (o.sortAsc > 0 ? "asc" : "desc")]: o.sortColumn === "name"
        })
    }, c(e.$t("pages.lobby.game")), 3), a("td", {
        onClick: s[2] || (s[2] = I => i.sortBy("language")),
        class: _({
            ["sort-" + (o.sortAsc > 0 ? "asc" : "desc")]: o.sortColumn === "language"
        })
    }, [b(g, {
        icon: "language",
        title: e.$t("pages.lobby.language")
    }, null, 8, ["title"])], 2), a("td", {
        onClick: s[3] || (s[3] = I => i.sortBy("script")),
        class: _({
            ["sort-" + (o.sortAsc > 0 ? "asc" : "desc")]: o.sortColumn === "script"
        })
    }, c(e.$t("pages.lobby.script")), 3), a("td", {
        onClick: s[4] || (s[4] = I => i.sortBy("storytellers")),
        class: _({
            ["sort-" + (o.sortAsc > 0 ? "asc" : "desc")]: o.sortColumn === "storytellers"
        })
    }, c(e.$t("pages.lobby.storyteller")), 3), a("td", {
        onClick: s[5] || (s[5] = I => i.sortBy("players")),
        class: _({
            ["sort-" + (o.sortAsc > 0 ? "asc" : "desc")]: o.sortColumn === "players"
        })
    }, c(e.$t("pages.lobby.players")), 3), a("td", {
        onClick: s[6] || (s[6] = I => i.sortBy("phase")),
        class: _({
            ["sort-" + (o.sortAsc > 0 ? "asc" : "desc")]: o.sortColumn === "phase"
        })
    }, c(e.$t("pages.lobby.phase")), 3), s[24] || (s[24] = a("td", null, "Tags", -1))])])) : A("", !0), a("tbody", null, [i.sessions.length ? A("", !0) : (r(),
    u("tr", fR, [a("td", vR, [o.loading ? (r(),
    u("b", yR, c(e.$t("pages.lobby.loading")), 1)) : (r(),
    u("b", _R, c(e.$t("pages.lobby.no_games")), 1)), s[25] || (s[25] = a("br", null, null, -1)), !o.loading && i.isSubscribed ? (r(),
    u("button", {
        key: 2,
        class: "button primary",
        onClick: s[7] || (s[7] = I => i.createSession())
    }, c(e.$t("pages.lobby.create_game")), 1)) : A("", !0)])])), (r(!0),
    u(y, null, N(i.sessions.slice(o.page * o.pageSize, o.page * o.pageSize + o.pageSize), I => {
        var Z;
        return r(),
        u(y, {
            key: I.name
        }, [a("tr", {
            onClick: H => o.selected[I.name] = !o.selected[I.name],
            class: _([{
                selected: o.selected[I.name],
                blocked: I.blocked
            }, "summary"])
        }, [a("td", kR, [a("div", {
            class: _(["button primary", {
                disabled: I.disabled
            }]),
            onClick: R(H => i.joinSession(I), ["stop"])
        }, [v(c(I.name) + " ", 1), I.isPublic ? A("", !0) : (r(),
        C(g, {
            key: 0,
            icon: "lock"
        })), I.blocked ? (r(),
        C(g, {
            key: 1,
            icon: "exclamation-triangle"
        })) : A("", !0)], 10, CR)]), a("td", null, [a("img", {
            src: I.languageIcon,
            alt: I.language,
            title: I.languageName
        }, null, 8, SR)]), a("td", {
            class: _(["edition", "edition-" + I.edition.id])
        }, [a("img", {
            src: I.editionIcon,
            alt: I.edition.id
        }, null, 8, PR), a("span", {
            style: q({
                color: (Z = e.editionsAvailable.get(I.edition.id)) == null ? void 0 : Z.color
            })
        }, c(e.$t(`editions.${I.edition.id}.name`)), 5), !I.edition.isOfficial && I.edition.name ? (r(),
        u("div", TR, c(I.edition.name) + " " + c(I.edition.author ? e.$t("pages.lobby.edition_by", I.edition) : ""), 1)) : A("", !0)], 2), a("td", IR, [(r(!0),
        u(y, null, N(I.storytellers, (H, F) => {
            var K, Y, ie;
            return r(),
            u("span", {
                key: H.id,
                onClick: R(x => i.showUser(H.id), ["stop"]),
                class: _({
                    blocked: ((K = e.relations.get(H.id)) == null ? void 0 : K.type) === "block"
                })
            }, [(Y = I.usersAll.find(x => x.id === H.id)) != null && Y.isOnline ? A("", !0) : (r(),
            C(g, {
                key: 0,
                icon: "user-slash"
            })), v(" " + c((ie = I.usersAll.find(x => x.id === H.id)) == null ? void 0 : ie.username) + c(F + 1 < I.storytellers.length ? ", " : ""), 1)], 10, MR)
        }
        ), 128))]), a("td", RR, [v(c(I.seats) + " ", 1), I.spectators.length ? (r(),
        u(y, {
            key: 0
        }, [s[26] || (s[26] = a("br", null, null, -1)), v(c(I.spectators.length) + " ", 1), b(g, {
            icon: "eye",
            title: e.$t("pages.lobby.spectators")
        }, null, 8, ["title"])], 64)) : A("", !0)]), a("td", null, [b(g, {
            icon: I.phaseIcon
        }, null, 8, ["icon"]), v(" " + c(I.phase), 1)]), a("td", DR, [I.tags.difficulty ? (r(),
        u("span", {
            key: 0,
            class: _(["switch-" + I.tags.difficulty]),
            title: e.$t("common.session-tags.difficulty.title")
        }, [b(g, {
            icon: "star"
        }), v(" " + c(e.$t("common.session-tags.difficulty.label")) + ": " + c(e.$t("common.session-tags.difficulty.value_" + I.tags.difficulty)), 1)], 10, ER)) : A("", !0), I.tags.cameras ? (r(),
        u("span", {
            key: 1,
            class: _(["switch-" + I.tags.cameras]),
            title: e.$t("common.session-tags.cameras.title")
        }, [b(g, {
            icon: "video"
        }), v(" " + c(e.$t("common.session-tags.cameras.label")) + ": " + c(e.$t("common.session-tags.cameras.value_" + I.tags.cameras)), 1)], 10, NR)) : A("", !0), I.tags.travellers ? (r(),
        u("span", {
            key: 2,
            class: _(["switch-" + I.tags.travellers]),
            title: e.$t("common.session-tags.travellers.title")
        }, [b(g, {
            icon: "theater-masks"
        }), v(" " + c(e.$t("common.session-tags.travellers.label")) + ": " + c(e.$t("common.session-tags.travellers.value_" + I.tags.travellers)), 1)], 10, BR)) : A("", !0), I.tags.grimoire ? (r(),
        u("span", {
            key: 3,
            class: _(["switch-" + I.tags.grimoire]),
            title: e.$t("common.session-tags.grimoire.title")
        }, [b(g, {
            icon: "book-dead"
        }), v(" " + c(e.$t("common.session-tags.grimoire.label")) + ": " + c(e.$t("common.session-tags.grimoire.value_" + I.tags.grimoire)), 1)], 10, VR)) : A("", !0), I.tags.streaming ? (r(),
        u("span", {
            key: 4,
            class: "switch-1",
            title: e.$t("common.session-tags.streaming.title")
        }, [b(g, {
            icon: "eye"
        }), v(" " + c(e.$t("common.session-tags.streaming.label")), 1)], 8, OR)) : A("", !0), I.boostDuration ? A("", !0) : (r(),
        u("span", {
            key: 5,
            class: "switch-2",
            title: e.$t("common.session-tags.subscription.title")
        }, [b(g, {
            icon: "lock"
        }), v(" " + c(e.$t("common.session-tags.subscription.label")), 1)], 8, jR))])], 10, wR), a("tr", {
            class: "details",
            onClick: H => o.selected[I.name] = !o.selected[I.name]
        }, [a("td", HR, [a("ul", null, [!I.edition.isOfficial && I.edition.name ? (r(),
        u("li", qR, [a("b", null, c(e.$t("pages.lobby.script")) + ": ", 1), v(" " + c(I.edition.name) + " " + c(I.edition.author ? e.$t("pages.lobby.edition_by", I.edition) : ""), 1)])) : A("", !0), I.edition.isOfficial ? A("", !0) : (r(),
        u("li", LR, [a("b", null, c(e.$t("pages.lobby.characters")) + ": ", 1), (r(!0),
        u(y, null, N(I.roles.filter(H => {
            var F, K;
            return ![...e.definitions.NPC_TEAMS, "traveller"].includes((K = H.team) != null ? K : (F = e.rolesAvailable.get(H.id)) == null ? void 0 : F.team)
        }
        ), H => {
            var F;
            return r(),
            u("span", {
                class: "icon",
                key: H.id,
                style: q({
                    backgroundImage: `url(${e.roleIconURL(H)})`
                }),
                title: H.name || (e.$te(`roles.${H.id}.name`) ? e.$t(`roles.${H.id}.name`) : (F = e.rolesAvailable.get(H.id)) == null ? void 0 : F.name)
            }, null, 12, zR)
        }
        ), 128))])), I.npcs.length ? (r(),
        u("li", GR, [a("b", null, c(e.$t("pages.lobby.npcs")) + ": ", 1), (r(!0),
        u(y, null, N(I.npcs, H => {
            var F;
            return r(),
            u("span", {
                class: "icon",
                key: H.id,
                style: q({
                    backgroundImage: `url(${e.roleIconURL(H)})`
                }),
                title: H.name || (e.$te(`roles.${H.id}.name`) ? e.$t(`roles.${H.id}.name`) : (F = e.npcs.get(H.id)) == null ? void 0 : F.name)
            }, null, 12, WR)
        }
        ), 128))])) : A("", !0), I.players.length ? (r(),
        u("li", FR, [a("b", null, c(e.$t("pages.lobby.players")) + ": ", 1), (r(!0),
        u(y, null, N(I.players, (H, F) => {
            var K, Y, ie, x, de;
            return r(),
            u("span", {
                key: F,
                class: _(["player", {
                    dead: H.isDead,
                    blocked: ((K = e.relations.get(H.id)) == null ? void 0 : K.type) === "block",
                    voteless: H.isVoteless,
                    empty: !H.id || !((Y = I.usersAll.find(ae => ae.id === H.id)) != null && Y.isOnline)
                }]),
                onClick: R(ae => i.showUser(H.id), ["stop"])
            }, [H.id && !((ie = I.usersAll.find(ae => ae.id === H.id)) != null && ie.isOnline) ? (r(),
            C(g, {
                key: 0,
                icon: "user-slash"
            })) : A("", !0), v(" " + c((de = (x = I.usersAll.find(ae => ae.id === H.id)) == null ? void 0 : x.username) != null ? de : e.$t("grimoire.seat", [F + 1])) + c(F + 1 < I.players.length ? ", " : ""), 1)], 10, QR)
        }
        ), 128))])) : A("", !0), I.spectators.length ? (r(),
        u("li", ZR, [a("b", null, c(e.$t("pages.lobby.spectators")) + ":", 1), (r(!0),
        u(y, null, N(I.spectators, (H, F) => {
            var K;
            return r(),
            u("span", {
                key: F,
                onClick: R(Y => i.showUser(H.id), ["stop"]),
                class: _({
                    blocked: ((K = e.relations.get(H.id)) == null ? void 0 : K.type) === "block"
                })
            }, c(H.username), 11, XR)
        }
        ), 128))])) : A("", !0)])])], 8, UR)], 64)
    }
    ), 128))])])]), (V = e.user.flags) != null && V.includes("forced-private") ? (r(),
    u("p", KR, [a("b", null, c(e.$t("pages.lobby.forced_private")), 1)])) : A("", !0), !i.isSubscribed && ((S = e.user.flags) != null && S.includes("verified-phone")) ? (r(),
    C(l, {
        key: 2,
        tag: "p",
        scope: "global",
        keypath: "pages.lobby.free_tier_unverified"
    }, {
        default: T( () => [a("b", null, c(e.$t("pages.lobby.free_tier_free")), 1), a("a", YR, c(e.$t("pages.lobby.free_tier_patreon")), 1)]),
        _: 1
    })) : !i.isSubscribed && e.user.id ? (r(),
    C(l, {
        key: 3,
        tag: "p",
        scope: "global",
        keypath: "pages.lobby.free_tier_verified"
    }, {
        default: T( () => [a("b", null, c(e.$t("pages.lobby.free_tier_free")), 1), a("b", null, c(e.$t("pages.lobby.free_tier_verify")), 1), a("a", JR, c(e.$t("pages.lobby.free_tier_patreon")), 1)]),
        _: 1
    })) : A("", !0), a("nav", $R, [e.user.id && !e.user.level && !((E = e.user.flags) != null && E.includes("verified-phone")) ? (r(),
    u("button", {
        key: 0,
        class: "button primary",
        onClick: s[8] || (s[8] = I => e.toggleModal({
            name: "verification"
        }))
    }, c(e.$t("pages.lobby.button_verify")), 1)) : A("", !0), i.isSubscribed ? (r(),
    u("button", {
        key: 1,
        class: "button primary",
        onClick: s[9] || (s[9] = I => i.createSession())
    }, c(e.$t("pages.lobby.button_create_game")), 1)) : A("", !0), i.isSubscribed ? (r(),
    u("button", {
        key: 2,
        class: "button primary",
        onClick: s[10] || (s[10] = I => i.play())
    }, c(e.$t("pages.lobby.button_local_play")), 1)) : A("", !0), e.user.id ? (r(),
    u("button", {
        key: 3,
        class: "button secondary",
        onClick: s[11] || (s[11] = I => e.join())
    }, c(e.$t("pages.lobby.button_join_game")), 1)) : A("", !0), e.user.id ? (r(),
    u("button", {
        key: 4,
        class: "button",
        onClick: s[12] || (s[12] = I => i.settings())
    }, c(e.$t("pages.lobby.button_settings")), 1)) : A("", !0), e.isModerator ? (r(),
    u("button", {
        key: 5,
        class: "button",
        onClick: s[13] || (s[13] = I => e.toggleModal({
            name: "moderation"
        }))
    }, c(e.$t("pages.lobby.button_mod")), 1)) : A("", !0), a("button", {
        class: "button",
        onClick: s[14] || (s[14] = I => i.help())
    }, c(e.$t("pages.lobby.button_help")), 1), i.isApp ? (r(),
    u("button", {
        key: 6,
        class: "button",
        onClick: s[15] || (s[15] = I => i.quit())
    }, c(e.$t("pages.lobby.button_quit")), 1)) : (r(),
    u("button", {
        key: 7,
        class: "button",
        onClick: s[16] || (s[16] = I => e.logout())
    }, c(e.$t("common.button_logout")), 1))]), o.pageSize < i.sessions.length ? (r(),
    u("div", xR)) : A("", !0), o.pageSize < i.sessions.length ? (r(),
    u("div", eD, [o.page ? (r(),
    u("button", {
        key: 0,
        class: "button",
        onClick: s[17] || (s[17] = I => o.page -= 1)
    }, [b(g, {
        icon: "arrow-circle-left"
    })])) : A("", !0), v(" " + c(e.$t("pages.lobby.page", {
        page: o.page + 1,
        total: Math.ceil(i.sessions.length / o.pageSize)
    })) + " ", 1), o.page + 1 < Math.ceil(i.sessions.length / o.pageSize) ? (r(),
    u("button", {
        key: 1,
        class: "button",
        onClick: s[18] || (s[18] = I => o.page += 1)
    }, [b(g, {
        icon: "arrow-circle-right"
    })])) : A("", !0)])) : A("", !0)])) : A("", !0), o.tab === "create" ? (r(),
    u("section", sD, [a("form", {
        onSubmit: s[20] || (s[20] = R( (...I) => i.createSession && i.createSession(...I), ["prevent"])),
        ref: "createForm"
    }, [b(d), a("nav", tD, [a("button", {
        type: "submit",
        class: _(["button primary", {
            disabled: !i.isSubscribed || o.isCreating
        }])
    }, c(e.$t("pages.lobby.button_create_game")), 3), a("button", {
        class: "button",
        type: "button",
        onClick: s[19] || (s[19] = I => o.tab = "list")
    }, c(e.$t("common.button_cancel")), 1)])], 544)])) : A("", !0)], 2), s[27] || (s[27] = a("div", {
        class: "break"
    }, null, -1)), s[28] || (s[28] = a("footer", null, [a("img", {
        src: Se,
        class: "logo",
        alt: ""
    }), a("img", {
        src: Ve,
        alt: "",
        class: "logo sb"
    })], -1)), b(h), b(m), b(p), b(f), b(P), b(w), b(B), b(j)])
}
const oD = O(cR, [["render", iD], ["__scopeId", "data-v-f7fe4b4d"]])
  , nD = {
    components: {
        VueTurnstile: $d
    },
    computed: {
        ...M("user", ["user"]),
        siteKey() {
            return "0x4AAAAAABMWdc6b3NE8DX1D"
        },
        isTauriHost() {
            return window.location.origin === "tauri://localhost"
        }
    },
    data() {
        return {
            email: "",
            password: "",
            passwordConfirm: "",
            acceptsMarketing: !1,
            acceptsTerms: !1,
            username: "",
            error: "",
            notification: "",
            mode: "login",
            loading: !1,
            token: "",
            iframeListener: null
        }
    },
    methods: {
        async submit() {
            var e;
            if (!this.loading) {
                if (this.error = "",
                this.notification = "",
                this.mode === "register" && this.passwordConfirm !== this.password) {
                    this.error = this.$t("pages.login.error_password");
                    return
                }
                if (!this.token) {
                    this.error = this.$t("pages.login.error_captcha");
                    return
                }
                this.loading = !0;
                try {
                    this.mode === "register" ? await this.$store.dispatch("user/register", {
                        email: this.email,
                        password: this.password,
                        acceptsMarketing: this.acceptsMarketing,
                        username: this.username,
                        captcha: this.token
                    }) : await this.$store.dispatch("user/login", {
                        email: this.email,
                        password: this.password,
                        captcha: this.token
                    }),
                    this.user.flags && !this.user.flags.includes("verified-email") ? this.$router.replace({
                        name: "Verification",
                        hash: decodeURIComponent(window.location.hash)
                    }) : (e = history.state) != null && e.returnRoute ? this.$router.replace({
                        name: history.state.returnRoute,
                        params: history.state.returnParams
                    }) : this.$router.replace({
                        name: "Lobby",
                        hash: decodeURIComponent(window.location.hash)
                    })
                } catch (s) {
                    this.password = "",
                    this.passwordConfirm = "",
                    s.cause === "CUSTOMER_DISABLED" ? (this.notification = s.message,
                    this.mode = "login") : this.error = s.message,
                    this.reloadCaptcha()
                } finally {
                    this.loading = !1
                }
            }
        },
        async recover() {
            if (!(this.loading || !this.email || !this.token)) {
                this.error = "",
                this.notification = "",
                this.loading = !0;
                try {
                    await this.$store.dispatch("user/recover", {
                        email: this.email,
                        captcha: this.token
                    }),
                    this.notification = this.$t("pages.login.password_reset")
                } catch (e) {
                    this.error = e.message
                } finally {
                    this.loading = !1
                }
            }
        },
        reloadCaptcha() {
            var e;
            this.$router.currentRoute.value.name === "Login" && ((e = this.$refs.turnstile) == null || e.reset())
        }
    },
    beforeMount() {
        this.iframeListener = e => {
            e.origin === "https://botc.app" && (this.token = e.data)
        }
        ,
        this.isTauriHost && window.addEventListener("message", this.iframeListener)
    },
    beforeUnmount() {
        var e;
        this.isTauriHost ? window.removeEventListener("message", this.iframeListener) : (e = this.$refs.turnstile) == null || e.remove()
    }
}
  , aD = {
    id: "login"
}
  , rD = {
    class: "content"
}
  , lD = ["placeholder", "title"]
  , cD = ["placeholder", "title", "autocomplete"]
  , dD = ["placeholder", "title"]
  , uD = ["placeholder", "title"]
  , gD = {
    key: 3,
    class: "turnstile",
    src: "https://botc.app/turnstile.html"
}
  , mD = {
    key: 4,
    for: "accepts-terms"
}
  , hD = {
    href: "https://bloodontheclocktower.com/terms-of-use",
    target: "_blank"
}
  , pD = {
    href: "https://bloodontheclocktower.com/pages/digital-moderation-policy",
    target: "_blank"
}
  , AD = {
    href: "https://bloodontheclocktower.com/privacy-policy",
    target: "_blank"
}
  , bD = {
    href: "https://bloodontheclocktower.com/cookie-policy",
    target: "_blank"
}
  , fD = {
    key: 5,
    for: "accepts-marketing"
}
  , vD = {
    class: "button-group"
}
  , yD = ["type", "disabled"]
  , _D = ["disabled"]
  , wD = ["type", "disabled"]
  , kD = {
    key: 0,
    class: "error"
}
  , CD = {
    key: 1,
    class: "notification"
}
  , SD = {
    class: "footer"
};
function PD(e, s, t, n, o, i) {
    const l = k("vue-turnstile")
      , g = k("font-awesome-icon")
      , d = k("i18n-t");
    return r(),
    u("div", aD, [s[14] || (s[14] = a("div", {
        class: "header"
    }, [a("img", {
        src: Be,
        alt: "",
        class: "logo app"
    })], -1)), a("div", rD, [v(c(e.$t("pages.login.title")), 1), s[13] || (s[13] = a("br", null, null, -1)), v(" " + c(e.$t("pages.login.description")) + " ", 1), a("form", {
        onSubmit: s[11] || (s[11] = R( (...h) => i.submit && i.submit(...h), ["prevent"])),
        class: _({
            loading: o.loading
        })
    }, [z(a("input", {
        placeholder: e.$t("pages.login.email"),
        title: e.$t("pages.login.email"),
        name: "email",
        type: "email",
        "onUpdate:modelValue": s[0] || (s[0] = h => o.email = h),
        required: "",
        autocomplete: "username"
    }, null, 8, lD), [[G, o.email]]), z(a("input", {
        placeholder: e.$t("pages.login.password"),
        title: e.$t("pages.login.password"),
        name: "password",
        type: "password",
        "onUpdate:modelValue": s[1] || (s[1] = h => o.password = h),
        minlength: "6",
        required: "",
        autocomplete: o.mode === "register" ? "new-password" : "current-password"
    }, null, 8, cD), [[G, o.password]]), o.mode === "register" ? z((r(),
    u("input", {
        key: 0,
        placeholder: e.$t("pages.login.password_confirm"),
        title: e.$t("pages.login.password_confirm"),
        name: "password-confirm",
        type: "password",
        "onUpdate:modelValue": s[2] || (s[2] = h => o.passwordConfirm = h),
        class: _({
            error: o.passwordConfirm !== o.password
        }),
        minlength: "6",
        required: "",
        autocomplete: "new-password"
    }, null, 10, dD)), [[G, o.passwordConfirm]]) : A("", !0), o.mode === "register" ? z((r(),
    u("input", {
        key: 1,
        placeholder: e.$t("pages.login.username"),
        title: e.$t("pages.login.username"),
        name: "username",
        type: "text",
        "onUpdate:modelValue": s[3] || (s[3] = h => o.username = h),
        minlength: "3",
        maxlength: "150",
        required: "",
        autocomplete: "nickname"
    }, null, 8, uD)), [[G, o.username]]) : A("", !0), i.isTauriHost ? (r(),
    u("iframe", gD)) : (r(),
    C(l, {
        key: 2,
        class: "turnstile",
        "site-key": i.siteKey,
        size: "flexible",
        modelValue: o.token,
        "onUpdate:modelValue": s[4] || (s[4] = h => o.token = h),
        ref: "turnstile",
        onExpired: s[5] || (s[5] = h => i.reloadCaptcha())
    }, null, 8, ["site-key", "modelValue"])), o.mode === "register" ? (r(),
    u("label", mD, [z(a("input", {
        id: "accepts-terms",
        name: "acceptsTerms",
        type: "checkbox",
        "onUpdate:modelValue": s[6] || (s[6] = h => o.acceptsTerms = h),
        required: ""
    }, null, 512), [[Ie, o.acceptsTerms]]), b(g, {
        icon: o.acceptsTerms ? "check-circle" : "circle"
    }, null, 8, ["icon"]), b(d, {
        keypath: "pages.login.accept_policies",
        scope: "global"
    }, {
        default: T( () => [a("a", hD, c(e.$t("common.terms_of_use")), 1), a("a", pD, c(e.$t("common.moderation_policy")), 1), a("a", AD, c(e.$t("common.privacy_policy")), 1), a("a", bD, c(e.$t("common.cookie_policy")), 1)]),
        _: 1
    })])) : A("", !0), o.mode === "register" ? (r(),
    u("label", fD, [z(a("input", {
        type: "checkbox",
        id: "accepts-marketing",
        name: "acceptsMarketing",
        "onUpdate:modelValue": s[7] || (s[7] = h => o.acceptsMarketing = h)
    }, null, 512), [[Ie, o.acceptsMarketing]]), b(g, {
        icon: o.acceptsMarketing ? "check-circle" : "circle"
    }, null, 8, ["icon"]), v(" " + c(e.$t("pages.login.subscribe")), 1)])) : A("", !0), a("div", vD, [a("button", {
        class: "button primary",
        type: o.mode === "login" ? "submit" : "button",
        disabled: !o.token || o.loading || !!o.passwordConfirm,
        onClick: s[8] || (s[8] = h => o.mode = "login")
    }, c(e.$t("pages.login.login")), 9, yD), a("button", {
        class: "button",
        type: "button",
        onClick: s[9] || (s[9] = (...h) => i.recover && i.recover(...h)),
        disabled: o.loading || !o.email || !o.token
    }, c(e.$t("pages.login.recover_password")), 9, _D), a("button", {
        class: "button secondary",
        type: o.mode === "login" ? "button" : "submit",
        onClick: s[10] || (s[10] = h => o.mode = "register"),
        disabled: !o.token || o.loading || o.mode === "register" && !o.acceptsTerms
    }, c(e.$t("pages.login.register")), 9, wD)]), s[12] || (s[12] = a("div", {
        class: "loader"
    }, null, -1))], 34), o.error ? (r(),
    u("div", kD, [b(g, {
        icon: "exclamation-triangle"
    }), v(" " + c(o.error), 1)])) : A("", !0), o.notification ? (r(),
    u("div", CD, c(o.notification), 1)) : A("", !0), a("div", SD, c(e.$t("common.trademark")), 1)]), s[15] || (s[15] = a("footer", null, [a("img", {
        src: Se,
        alt: ""
    }), a("img", {
        src: Ve,
        class: "sb",
        alt: ""
    })], -1))])
}
const TD = O(nD, [["render", PD], ["__scopeId", "data-v-06b561b2"]])
  , ID = {
    inject: ["isApp"],
    name: "Update",
    computed: {
        ...M("user", ["latestVersion", "newVersions", "downloadUrl"])
    },
    data() {
        return {
            version: re.version
        }
    },
    methods: {}
}
  , MD = {
    id: "update"
}
  , RD = {
    class: "content"
}
  , DD = ["href"]
  , ED = {
    key: 1
};
function ND(e, s, t, n, o, i) {
    const l = k("i18n-t");
    return r(),
    u("div", MD, [s[2] || (s[2] = a("div", {
        class: "header"
    }, [a("img", {
        src: Be,
        alt: "",
        class: "logo app"
    })], -1)), a("div", RD, [a("h4", null, c(e.$t("pages.update.title")), 1), a("p", null, [b(l, {
        keypath: "pages.update.description",
        scope: "global"
    }, {
        default: T( () => [a("b", null, "v" + c(o.version), 1), a("b", null, c(e.latestVersion), 1)]),
        _: 1
    }), s[1] || (s[1] = a("br", null, null, -1)), i.isApp ? (r(!0),
    u(y, {
        key: 0
    }, N(e.downloadUrl, ([g,d]) => (r(),
    u("a", {
        href: d,
        key: g,
        target: "_blank"
    }, [v(c(e.$t("pages.update.download", {
        label: g
    })), 1), s[0] || (s[0] = a("br", null, null, -1))], 8, DD))), 128)) : (r(),
    u("span", ED, c(e.$t("pages.update.reload")), 1))])]), s[3] || (s[3] = a("div", {
        class: "authors"
    }, [a("img", {
        src: Se,
        alt: "",
        class: "logo tpi"
    }), a("img", {
        src: Ve,
        alt: "",
        class: "logo sb"
    })], -1))])
}
const BD = O(ID, [["render", ND], ["__scopeId", "data-v-343df6f2"]])
  , VD = {
    computed: {
        ...M("user", ["accessToken", "user"])
    },
    data() {
        var e;
        return {
            code: (e = new Proxy(new URLSearchParams(window.location.search),{
                get: (s, t) => s.get(t)
            })) == null ? void 0 : e.code,
            loading: !1,
            error: "",
            notification: ""
        }
    },
    methods: {
        ...$("user", ["logout"]),
        async submit() {
            if (!this.loading) {
                this.error = "",
                this.notification = "",
                this.loading = !0;
                try {
                    const e = await ne("verify", {
                        type: "email",
                        code: this.code
                    }, this.accessToken);
                    e.success ? (this.$store.commit("user/updateUser", {
                        flags: [...this.user.flags, "verified-email"]
                    }),
                    this.$router.replace({
                        name: "Lobby",
                        hash: decodeURIComponent(window.location.hash)
                    })) : this.error = e.status
                } catch (e) {
                    this.code = "",
                    this.error = e.message
                } finally {
                    this.loading = !1
                }
            }
        },
        async reset() {
            this.code = "",
            this.error = "",
            this.notification = "";
            const e = await ne("verify", {
                type: "email"
            }, this.accessToken);
            e.success ? this.notification = this.$t("pages.verification.email_success") : this.error = e.status
        }
    },
    watch: {
        accessToken() {
            var e;
            this.accessToken && ((e = this.user.flags) != null && e.includes("verified-email") ? this.$router.replace({
                name: "Lobby"
            }) : this.code && this.submit())
        }
    }
}
  , OD = {
    id: "verification"
}
  , jD = {
    class: "content"
}
  , UD = {
    key: 0,
    class: "notification"
}
  , HD = {
    key: 1,
    class: "error"
}
  , qD = ["title"]
  , LD = {
    class: "button-group"
}
  , zD = {
    class: "button primary",
    type: "submit"
};
function GD(e, s, t, n, o, i) {
    const l = k("font-awesome-icon");
    return r(),
    u("div", OD, [s[6] || (s[6] = a("div", {
        class: "header"
    }, [a("img", {
        src: Be,
        alt: "",
        class: "logo app"
    })], -1)), a("div", jD, [v(c(e.$t("pages.verification.description")) + " ", 1), a("a", {
        href: "https://bloodontheclocktower.com/account/edit",
        target: "_blank",
        onClick: s[0] || (s[0] = (...g) => e.logout && e.logout(...g))
    }, c(e.$t("pages.verification.link")), 1), o.notification ? (r(),
    u("div", UD, c(o.notification), 1)) : A("", !0), o.error ? (r(),
    u("div", HD, [b(l, {
        icon: "exclamation-triangle"
    }), o.error === 429 && !o.code ? (r(),
    u(y, {
        key: 0
    }, [v(c(e.$t("pages.verification.error_429", [60])), 1)], 64)) : o.error === 429 && o.code ? (r(),
    u(y, {
        key: 1
    }, [v(c(e.$t("pages.verification.error_429", [10])), 1)], 64)) : o.error === "wrong" ? (r(),
    u(y, {
        key: 2
    }, [v(c(e.$t("pages.verification.error_wrong")), 1)], 64)) : o.error === 403 ? (r(),
    u(y, {
        key: 3
    }, [v(c(e.$t("modals.dialogue.error.unauthorized")), 1)], 64)) : o.error === 400 ? (r(),
    u(y, {
        key: 4
    }, [v(c(e.$t("pages.verification.error_disposable")), 1)], 64)) : o.error === 404 ? (r(),
    u(y, {
        key: 5
    }, [v(c(e.$t("pages.verification.error_verified")), 1)], 64)) : (r(),
    u(y, {
        key: 6
    }, [v(c(o.error), 1)], 64))])) : A("", !0), a("form", {
        onSubmit: s[4] || (s[4] = R( (...g) => i.submit && i.submit(...g), ["prevent"])),
        class: _({
            loading: o.loading
        })
    }, [z(a("input", {
        placeholder: "123456",
        name: "code",
        type: "text",
        pattern: "\\d+",
        "onUpdate:modelValue": s[1] || (s[1] = g => o.code = g),
        title: e.$t("pages.verification.code"),
        minlength: "6",
        maxlength: "6",
        required: ""
    }, null, 8, qD), [[G, o.code]]), a("div", LD, [a("button", zD, c(e.$t("common.button_confirm")), 1), a("button", {
        class: "button",
        type: "button",
        onClick: s[2] || (s[2] = (...g) => i.reset && i.reset(...g))
    }, c(e.$t("pages.verification.button_resend")), 1), a("button", {
        class: "button secondary",
        type: "button",
        onClick: s[3] || (s[3] = (...g) => e.logout && e.logout(...g))
    }, c(e.$t("common.button_logout")), 1)]), s[5] || (s[5] = a("div", {
        class: "loader"
    }, null, -1))], 34)]), s[7] || (s[7] = a("footer", null, [a("img", {
        src: Se,
        alt: ""
    })], -1))])
}
const WD = O(VD, [["render", GD], ["__scopeId", "data-v-0708b5c3"]])
  , Ns = "/assets/logo-DT5w2Zuc.webp"
  , FD = {
    name: "WorldcupGroup",
    computed: {
        ...M("user", ["user"]),
        ...M(["worldcup", "worldcupVotes"]),
        startPage() {
            return !this.worldcup.matches || this.worldcup.matches[0].time > Date.now() ? 0 : this.worldcup.matches[this.worldcup.matches.length - 1].time < Date.now() ? this.worldcup.matches.length - this.pageSize : Math.min(this.worldcup.matches.findIndex(e => e.time >= Date.now() - this.worldcup.votePeriod), this.worldcup.matches.length - this.pageSize)
        }
    },
    data() {
        return {
            error: null,
            page: 0,
            pageSize: 6,
            locale: navigator.languages ? navigator.languages[0] : navigator.language,
            baseURL: "https://release.botc.app/wc25"
        }
    },
    methods: {
        backToLobby() {
            const {path: e} = this.$router.currentRoute.value;
            this.$router.push({
                name: e === "/worldcup" ? this.user.id ? "Lobby" : "Login" : "WorldcupKnockout"
            })
        },
        voteState(e) {
            const s = [];
            return e.time > Date.now() ? ["upcoming"] : (e.time < Date.now() && e.time > Date.now() - this.worldcup.votePeriod ? s.push("active") : s.push("locked"),
            this.user.id && this.worldcupVotes.has(this.worldcup.matches.indexOf(e)) && s.push("voted"),
            s)
        },
        setPage(e) {
            var t, n;
            if (e < 0 && this.startPage + this.page <= 0 || e > 0 && this.startPage + this.page + this.pageSize >= ((t = this.worldcup.matches) == null ? void 0 : t.length))
                return;
            const s = e < 0 ? Math.max(this.startPage * -1, this.page - this.pageSize) : Math.min((n = this.worldcup.matches) == null ? void 0 : n.length, this.page + this.pageSize);
            this.page = this.page && s && Math.sign(s) !== Math.sign(this.page) ? 0 : s,
            history.replaceState({
                start: this.page + this.startPage
            }, null)
        },
        showMatch(e) {
            this.$router.push({
                name: "WorldcupMatch",
                params: {
                    match: this.worldcup.matches.indexOf(e)
                }
            })
        }
    },
    async beforeMount() {
        var e;
        try {
            if (await this.$store.dispatch("loadWorldcup"),
            ((e = history.state) == null ? void 0 : e.start) !== void 0) {
                const s = Number(history.state.start) - this.startPage;
                this.page = Math.min(Math.max(this.startPage * -1, Math.floor(s / this.pageSize) * this.pageSize), this.worldcup.matches.length)
            }
        } catch (s) {
            this.error = s
        }
    }
}
  , QD = {
    id: "worldcup-group"
}
  , ZD = {
    class: "content"
}
  , XD = {
    key: 0,
    class: "matches"
}
  , KD = ["onClick"]
  , YD = {
    class: "logo left"
}
  , JD = ["src"]
  , $D = {
    class: "date"
}
  , xD = {
    class: "mid"
}
  , e6 = {
    class: "mid"
}
  , s6 = {
    class: "big"
}
  , t6 = {
    class: "small"
}
  , i6 = {
    class: "small"
}
  , o6 = {
    class: "small"
}
  , n6 = {
    class: "logo right"
}
  , a6 = ["src"]
  , r6 = {
    class: "channel"
}
  , l6 = ["src", "alt"]
  , c6 = {
    key: 1,
    class: "loader"
}
  , d6 = {
    key: 2,
    class: "pagination"
};
function u6(e, s, t, n, o, i) {
    var g;
    const l = k("RouterLink");
    return r(),
    u("div", QD, [a("div", {
        class: "back",
        onClick: s[0] || (s[0] = (...d) => i.backToLobby && i.backToLobby(...d)),
        role: "button",
        "aria-label": "Back"
    }), b(l, {
        to: {
            name: "WorldcupLeaderboard"
        },
        class: "wcbutton icon-alt right"
    }, {
        default: T( () => [...s[4] || (s[4] = [v(" World Cup Leaderboard ", -1), a("span", {
            class: "icon"
        }, null, -1)])]),
        _: 1
    }), s[15] || (s[15] = a("div", {
        class: "gap"
    }, null, -1)), b(l, {
        to: {
            name: "WorldcupKnockout"
        },
        class: "wcbutton icon-alt"
    }, {
        default: T( () => [...s[5] || (s[5] = [v(" Knockout Phase ", -1), a("span", {
            class: "icon"
        }, null, -1)])]),
        _: 1
    }), s[16] || (s[16] = a("img", {
        src: Ns,
        class: "logo",
        alt: ""
    }, null, -1)), a("div", ZD, [e.worldcup.matches ? (r(),
    u("ul", XD, [(r(!0),
    u(y, null, N(e.worldcup.matches.slice(i.startPage + o.page, i.startPage + o.page + o.pageSize), d => {
        var h, m, p, f, P, w, B, j, V, S;
        return r(),
        u("li", {
            class: _(["match", i.voteState(d)]),
            key: e.worldcup.matches.indexOf(d),
            onClick: E => i.showMatch(d)
        }, [a("div", {
            class: _(["group", `group-${e.worldcup.scripts[d.scripts[0]].group}`])
        }, [s[6] || (s[6] = v(" Group ", -1)), a("b", null, c(e.worldcup.scripts[d.scripts[0]].group), 1)], 2), a("div", YD, [a("img", {
            src: `${o.baseURL}/${e.worldcup.scripts[d.scripts[0]].id}/logo-clean.webp`,
            alt: ""
        }, null, 8, JD), (h = d.results) != null && h.length ? (r(),
        u("div", {
            key: 0,
            class: _(["result", {
                winner: ((m = d.results) == null ? void 0 : m[0]) > ((p = d.results) == null ? void 0 : p[1])
            }])
        }, [a("b", null, c(d.results[0]), 1), s[7] || (s[7] = v(" points ", -1))], 2)) : A("", !0)]), a("div", $D, [d.time > Date.now() ? (r(),
        u(y, {
            key: 0
        }, [a("span", xD, c(new Date(d.time).toLocaleString(o.locale, {
            weekday: "short"
        })), 1), a("span", e6, c(new Date(d.time).toLocaleString(o.locale, {
            month: "short"
        })), 1), a("span", s6, c(new Date(d.time).toLocaleString(o.locale, {
            day: "numeric"
        })), 1), a("span", t6, c(new Date(d.time).toLocaleString(o.locale, {
            hour: "numeric",
            minute: "numeric"
        })), 1)], 64)) : d.voteRemaining ? (r(),
        u(y, {
            key: 1
        }, [s[8] || (s[8] = a("span", {
            class: "mid"
        }, "Vote", -1)), s[9] || (s[9] = a("span", {
            class: "mid primary"
        }, "Open", -1)), a("span", i6, c(d.voteRemaining) + " left", 1)], 64)) : (r(),
        u(y, {
            key: 2
        }, [s[10] || (s[10] = a("span", {
            class: "mid"
        }, "Vote", -1)), s[11] || (s[11] = a("span", {
            class: "mid secondary"
        }, "closed", -1)), a("span", o6, c(new Date(d.time + e.worldcup.votePeriod).toLocaleString(o.locale, {
            day: "numeric",
            month: "short"
        })), 1)], 64))]), a("div", n6, [a("img", {
            src: `${o.baseURL}/${e.worldcup.scripts[d.scripts[1]].id}/logo-clean.webp`,
            alt: ""
        }, null, 8, a6), (f = d.results) != null && f.length ? (r(),
        u("div", {
            key: 0,
            class: _(["result", {
                winner: ((P = d.results) == null ? void 0 : P[0]) < ((w = d.results) == null ? void 0 : w[1])
            }])
        }, [a("b", null, c(d.results[1]), 1), s[12] || (s[12] = v(" points ", -1))], 2)) : A("", !0)]), a("div", r6, [a("img", {
            src: e.worldcup.channels[d.channel].logo,
            alt: e.worldcup.channels[d.channel].name
        }, null, 8, l6)]), a("div", {
            class: _(["title left", {
                winner: ((B = d.results) == null ? void 0 : B[0]) > ((j = d.results) == null ? void 0 : j[1])
            }])
        }, [a("div", {
            class: _(["vote", {
                checked: e.worldcupVotes.get(e.worldcup.matches.indexOf(d)) === d.scripts[0]
            }]),
            role: "checkbox"
        }, null, 2), a("span", null, c(e.worldcup.scripts[d.scripts[0]].name), 1)], 2), a("div", {
            class: _(["title right", {
                winner: ((V = d.results) == null ? void 0 : V[0]) < ((S = d.results) == null ? void 0 : S[1])
            }])
        }, [a("div", {
            class: _(["vote", {
                checked: e.worldcupVotes.get(e.worldcup.matches.indexOf(d)) === d.scripts[1]
            }]),
            role: "checkbox"
        }, null, 2), a("span", null, c(e.worldcup.scripts[d.scripts[1]].name), 1)], 2)], 10, KD)
    }
    ), 128))])) : (r(),
    u("div", c6, "Loading...")), (g = e.worldcup.matches) != null && g.length ? (r(),
    u("div", d6, [a("div", {
        class: _(["wcbutton", {
            disabled: i.startPage + o.page <= 0
        }]),
        onClick: s[1] || (s[1] = d => i.setPage(-1))
    }, [...s[13] || (s[13] = [a("span", null, "Previous", -1)])], 2), i.startPage + o.page + o.pageSize < e.worldcup.matches.length ? (r(),
    u("div", {
        key: 0,
        class: "wcbutton right",
        onClick: s[2] || (s[2] = d => i.setPage(1))
    }, [...s[14] || (s[14] = [a("span", null, "Next", -1)])])) : (r(),
    u("div", {
        key: 1,
        class: "wcbutton right",
        onClick: s[3] || (s[3] = d => e.$router.push({
            name: "WorldcupKnockout"
        }))
    }, " Knockout Phase "))])) : A("", !0)])])
}
const g6 = O(FD, [["render", u6], ["__scopeId", "data-v-886ca09a"]])
  , m6 = {
    name: "WorldcupLeaderboard",
    computed: {
        ...M(["worldcup"]),
        scriptsByGroup() {
            const e = {};
            return this.worldcup.matches && this.worldcup.scripts.forEach(s => {
                e[s.group] || (e[s.group] = []),
                e[s.group].push(s),
                e[s.group].sort( (t, n) => n.points - t.points)
            }
            ),
            e
        }
    },
    data() {
        return {
            error: null,
            baseURL: "https://release.botc.app/wc25"
        }
    },
    methods: {},
    async beforeMount() {
        try {
            await this.$store.dispatch("loadWorldcup")
        } catch (e) {
            this.error = e
        }
    }
}
  , h6 = {
    id: "worldcup-leaderboard"
}
  , p6 = {
    class: "content"
}
  , A6 = {
    key: 0,
    class: "leaderboard"
}
  , b6 = ["href"]
  , f6 = {
    class: "points"
}
  , v6 = {
    class: "matches"
}
  , y6 = {
    key: 1,
    class: "loader"
};
function _6(e, s, t, n, o, i) {
    return r(),
    u("div", h6, [a("div", {
        class: "back",
        onClick: s[0] || (s[0] = l => e.$router.push({
            path: "/worldcup"
        })),
        role: "button",
        "aria-label": "Back"
    }), s[4] || (s[4] = xd('<a class="wcbutton right" href="https://docs.google.com/document/d/1PZ2Gpqp4-5-ockyX3zrkyPTHiPmy8XOgUTepJgrKKeA/edit?usp=sharing" target="_blank" data-v-0751458f> World Cup Overview <span class="icon" data-v-0751458f></span></a><div class="gap" data-v-0751458f></div><div class="info" data-v-0751458f> The top two scripts from each group move onto the knockout stages! </div><img src="' + Ns + '" class="logo" alt="" data-v-0751458f>', 4)), a("div", p6, [e.worldcup.matches ? (r(),
    u("div", A6, [s[3] || (s[3] = a("div", {
        class: "banner"
    }, [v("Group"), a("small", null, "Standings")], -1)), (r(!0),
    u(y, null, N(i.scriptsByGroup, (l, g) => (r(),
    u("div", {
        class: _(["group left", "group-" + g]),
        key: g
    }, [a("aside", null, [s[1] || (s[1] = v(" Group", -1)), a("b", null, c(g), 1)]), s[2] || (s[2] = a("header", null, [a("span", null, "Points"), a("span", null, "Games Played")], -1)), a("ol", null, [(r(!0),
    u(y, null, N(l, d => (r(),
    u("li", {
        key: d.id
    }, [a("span", {
        class: "logo",
        style: q({
            backgroundImage: `url('${o.baseURL}/${d.id}/logo-clean.webp')`
        })
    }, null, 4), a("a", {
        href: d.url,
        target: "_blank"
    }, c(d.name), 9, b6), a("b", f6, c(d.points || "TBA"), 1), a("b", v6, c(d.matches), 1)]))), 128))])], 2))), 128))])) : (r(),
    u("div", y6, "Loading..."))])])
}
const w6 = O(m6, [["render", _6], ["__scopeId", "data-v-0751458f"]])
  , k6 = {
    name: "WorldcupKnockout",
    computed: {
        ...M("user", ["user"]),
        ...M(["worldcup", "worldcupVotes"])
    },
    data() {
        return {
            error: null,
            baseURL: "https://release.botc.app/wc25",
            locale: navigator.languages ? navigator.languages[0] : navigator.language
        }
    },
    methods: {
        backToLobby() {
            const {path: e} = this.$router.currentRoute.value;
            this.$router.push({
                name: e === "/worldcup" ? this.user.id ? "Lobby" : "Login" : "WorldcupGroup"
            })
        },
        showMatch(e) {
            this.$router.push({
                name: "WorldcupMatch",
                params: {
                    match: this.worldcup.playoffs.indexOf(e) + 38
                }
            })
        }
    },
    async beforeMount() {
        try {
            await this.$store.dispatch("loadWorldcup")
        } catch (e) {
            this.error = e
        }
    }
}
  , C6 = {
    id: "worldcup-playoff"
}
  , S6 = {
    class: "content"
}
  , P6 = {
    key: 0,
    class: "brackets"
}
  , T6 = ["onClick"]
  , I6 = {
    class: "match"
}
  , M6 = {
    class: "mid"
}
  , R6 = {
    class: "mid"
}
  , D6 = {
    class: "big"
}
  , E6 = {
    class: "small"
}
  , N6 = {
    class: "small"
}
  , B6 = {
    class: "small"
}
  , V6 = {
    class: "channel"
}
  , O6 = {
    key: 1,
    class: "loader"
};
function j6(e, s, t, n, o, i) {
    const l = k("RouterLink");
    return r(),
    u("div", C6, [a("nav", null, [a("div", {
        class: "back",
        onClick: s[0] || (s[0] = (...g) => i.backToLobby && i.backToLobby(...g)),
        role: "button",
        "aria-label": "Back"
    }), b(l, {
        to: {
            name: "WorldcupLeaderboard"
        },
        class: "wcbutton icon-alt right"
    }, {
        default: T( () => [...s[1] || (s[1] = [v(" World Cup Leaderboard ", -1), a("span", {
            class: "icon"
        }, null, -1)])]),
        _: 1
    }), s[3] || (s[3] = a("div", {
        class: "gap"
    }, null, -1)), b(l, {
        to: {
            name: "WorldcupGroup"
        },
        class: "wcbutton icon-alt"
    }, {
        default: T( () => [...s[2] || (s[2] = [v(" Group Phase Results ", -1), a("span", {
            class: "icon"
        }, null, -1)])]),
        _: 1
    }), s[4] || (s[4] = a("img", {
        src: Ns,
        class: "logo",
        alt: ""
    }, null, -1))]), a("div", S6, [e.worldcup.playoffs ? (r(),
    u("div", P6, [s[9] || (s[9] = a("div", {
        class: "sun"
    }, null, -1)), a("ul", null, [(r(!0),
    u(y, null, N(e.worldcup.playoffs, (g, d) => {
        var h, m, p, f, P, w, B;
        return r(),
        u("li", {
            key: d,
            onClick: j => i.showMatch(g)
        }, [a("div", I6, [a("div", {
            class: _(["date", {
                voted: e.worldcupVotes.has(38 + d)
            }])
        }, [g.time > Date.now() ? (r(),
        u(y, {
            key: 0
        }, [a("span", M6, c(new Date(g.time).toLocaleString(o.locale, {
            weekday: "short"
        })), 1), a("span", R6, c(new Date(g.time).toLocaleString(o.locale, {
            month: "short"
        })), 1), a("span", D6, c(new Date(g.time).toLocaleString(o.locale, {
            day: "numeric"
        })), 1), a("span", E6, c(new Date(g.time).toLocaleString(o.locale, {
            hour: "numeric",
            minute: "numeric"
        })), 1)], 64)) : g.voteRemaining ? (r(),
        u(y, {
            key: 1
        }, [s[5] || (s[5] = a("span", {
            class: "mid"
        }, "Vote", -1)), s[6] || (s[6] = a("span", {
            class: "mid primary"
        }, "Open", -1)), a("span", N6, c(g.voteRemaining) + " left", 1)], 64)) : (r(),
        u(y, {
            key: 2
        }, [s[7] || (s[7] = a("span", {
            class: "mid"
        }, "Vote", -1)), s[8] || (s[8] = a("span", {
            class: "mid secondary"
        }, "closed", -1)), a("span", B6, c(new Date(g.time + e.worldcup.votePeriod).toLocaleString(o.locale, {
            day: "numeric",
            month: "short"
        })), 1)], 64))], 2), a("div", {
            class: _(["votes", {
                locked: !g.voteRemaining,
                hidden: g.time > Date.now()
            }])
        }, [a("div", {
            class: _(["vote", {
                checked: e.worldcupVotes.get(e.worldcup.playoffs.indexOf(g) + 38) === g.scripts[0]
            }]),
            role: "checkbox"
        }, null, 2), a("div", {
            class: _(["vote", {
                checked: e.worldcupVotes.get(e.worldcup.playoffs.indexOf(g) + 38) === g.scripts[1]
            }]),
            role: "checkbox"
        }, null, 2)], 2), a("div", {
            class: _(["wcbutton script", {
                disabled: !e.worldcup.scripts[g.scripts[0]],
                right: d < 6,
                winner: ((h = g.results) == null ? void 0 : h[0]) > ((m = g.results) == null ? void 0 : m[1])
            }])
        }, [e.worldcup.scripts[g.scripts[0]] ? (r(),
        u("span", {
            key: 0,
            class: "logo",
            style: q({
                backgroundImage: `url('${o.baseURL}/${e.worldcup.scripts[g.scripts[0]].id}/logo-clean.webp')`
            })
        }, null, 4)) : A("", !0), a("span", null, c(((p = e.worldcup.scripts[g.scripts[0]]) == null ? void 0 : p.name) || g.scripts[0]), 1)], 2), a("div", V6, " Live on " + c(e.worldcup.channels[g.channel].name), 1), a("div", {
            class: _(["wcbutton script", {
                disabled: !e.worldcup.scripts[g.scripts[1]],
                right: d < 6,
                winner: ((f = g.results) == null ? void 0 : f[1]) > ((P = g.results) == null ? void 0 : P[0])
            }])
        }, [e.worldcup.scripts[g.scripts[1]] ? (r(),
        u("span", {
            key: 0,
            class: "logo",
            style: q({
                backgroundImage: `url('${o.baseURL}/${(w = e.worldcup.scripts[g.scripts[1]]) == null ? void 0 : w.id}/logo-clean.webp')`
            })
        }, null, 4)) : A("", !0), a("span", null, c(((B = e.worldcup.scripts[g.scripts[1]]) == null ? void 0 : B.name) || g.scripts[1]), 1)], 2)])], 8, T6)
    }
    ), 128))])])) : (r(),
    u("div", O6, "Loading..."))])])
}
const U6 = O(k6, [["render", j6], ["__scopeId", "data-v-48093c1a"]])
  , H6 = {
    name: "WorldcupMatch",
    components: {
        VerificationModal: Ma,
        DialogueModal: ma
    },
    computed: {
        ...M("user", ["user", "accessToken"]),
        ...M(["worldcup", "worldcupVotes"]),
        canVote() {
            var e, s;
            return this.user.id && (!((e = this.user.flags) != null && e.includes("newuser")) || ((s = this.user.flags) == null ? void 0 : s.includes("verified-phone")))
        },
        knockoutPhase() {
            return Number(this.$route.params.match) < 38 ? "" : Number(this.$route.params.match) < 42 ? "quarter finals" : Number(this.$route.params.match) < 44 ? "semi finals" : "finals"
        },
        match() {
            var s;
            const e = Number(this.$route.params.match);
            return (s = this.worldcup) != null && s.matches ? this.knockoutPhase ? this.worldcup.playoffs[e - 38] ? {
                ...this.worldcup.playoffs[e - 38],
                vote: this.user.id && this.worldcupVotes.get(e)
            } : !1 : this.worldcup.matches[e] ? {
                ...this.worldcup.matches[e],
                vote: this.user.id && this.worldcupVotes.get(e)
            } : !1 : !1
        },
        streamTime() {
            return new Date(this.match.time).toLocaleString(this.locale, {
                weekday: "long",
                day: "numeric",
                month: "long",
                hour: "numeric",
                minute: "numeric"
            })
        },
        voteState() {
            return this.match.time > Date.now() ? "" : this.match.time < Date.now() && this.match.time > Date.now() - this.worldcup.votePeriod ? "active" : "locked"
        }
    },
    data() {
        return {
            error: "",
            locale: navigator.languages ? navigator.languages[0] : navigator.language,
            baseURL: "https://release.botc.app/wc25",
            voteTimer: null
        }
    },
    methods: {
        backToOverview() {
            const e = Number(this.$route.params.match);
            this.$router.push({
                name: e > 23 ? "WorldcupKnockout" : "WorldcupGroup",
                state: {
                    start: this.$route.params.match
                }
            })
        },
        async vote(e, s) {
            var o;
            if (((o = e.target) == null ? void 0 : o.tagName) === "A" || this.voteState !== "active" || this.voteTimer)
                return;
            if (!this.canVote) {
                try {
                    await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: this.user.id ? "Account Verification Required" : "Login Required",
                        text: this.user.id ? "You need to verify your account first, before you are able to vote. Do you want to start the account verification now?" : "You need to log in first, before you are able to vote! Do you want to log in now?"
                    }) && (this.user.id ? this.$store.commit("toggleModal", {
                        name: "verification"
                    }) : this.$router.push({
                        name: "Login",
                        state: {
                            returnRoute: "WorldcupMatch",
                            returnParams: {
                                match: this.$route.params.match
                            }
                        }
                    }))
                } catch {}
                return
            }
            this.error = "";
            const t = Number(this.$route.params.match)
              , n = this.worldcupVotes.get(t) === s ? null : s;
            try {
                this.voteTimer = setTimeout( () => {
                    this.voteTimer = null
                }
                , 1e3);
                const i = await ne("vote", {
                    match: t,
                    choice: n
                }, this.accessToken);
                i.success ? this.$store.commit("setWorldcupVote", {
                    match: t,
                    choice: n
                }) : this.error = i.error
            } catch (i) {
                this.error = i
            }
        }
    },
    async beforeMount() {
        try {
            this.$store.dispatch("loadWorldcup")
        } catch (e) {
            this.error = e
        }
    }
}
  , q6 = {
    id: "worldcup-match"
}
  , L6 = {
    class: "info"
}
  , z6 = {
    key: 1
}
  , G6 = {
    class: "content"
}
  , W6 = {
    key: 0,
    class: "match"
}
  , F6 = {
    key: 0
}
  , Q6 = {
    key: 0,
    class: "error"
}
  , Z6 = ["href"]
  , X6 = ["title"]
  , K6 = {
    class: "channel"
}
  , Y6 = ["title"]
  , J6 = ["onClick"]
  , $6 = {
    key: 0,
    class: "placeholder"
}
  , x6 = ["title"]
  , eE = {
    class: "description"
}
  , sE = {
    class: "button-group"
}
  , tE = ["href"]
  , iE = ["href"]
  , oE = ["href"]
  , nE = {
    key: 2
}
  , aE = {
    key: 3
}
  , rE = {
    key: 1,
    class: "loader"
};
function lE(e, s, t, n, o, i) {
    var m, p;
    const l = k("RouterLink")
      , g = k("font-awesome-icon")
      , d = k("DialogueModal")
      , h = k("VerificationModal");
    return r(),
    u(y, null, [a("div", q6, [a("div", {
        class: "back",
        onClick: s[0] || (s[0] = (...f) => i.backToOverview && i.backToOverview(...f)),
        role: "button",
        "aria-label": "Back"
    }), b(l, {
        to: {
            name: "WorldcupLeaderboard"
        },
        class: "wcbutton icon-alt right"
    }, {
        default: T( () => [...s[1] || (s[1] = [v(" World Cup Leaderboard ", -1), a("span", {
            class: "icon"
        }, null, -1)])]),
        _: 1
    }), s[10] || (s[10] = a("div", {
        class: "gap"
    }, null, -1)), a("div", L6, [e.user.id ? (r(),
    u(y, {
        key: 0
    }, [s[2] || (s[2] = a("b", null, "Vote for your favorite script below!", -1)), s[3] || (s[3] = v(" Points are awarded based on the share of votes each script receives. ", -1))], 64)) : (r(),
    u("b", z6, "You need to Log In before you can vote!"))]), s[11] || (s[11] = a("img", {
        src: Ns,
        class: "logo",
        alt: ""
    }, null, -1)), a("div", G6, [i.match ? (r(),
    u("div", W6, [a("div", {
        class: _(["group", `group-${i.knockoutPhase || e.worldcup.scripts[i.match.scripts[0]].group}`])
    }, [i.knockoutPhase ? (r(),
    u("b", F6, c(i.knockoutPhase), 1)) : (r(),
    u(y, {
        key: 1
    }, [s[4] || (s[4] = v(" Group ", -1)), a("b", null, c(e.worldcup.scripts[i.match.scripts[0]].group), 1)], 64))], 2), o.error ? (r(),
    u("div", Q6, [s[5] || (s[5] = v(" Error: ", -1)), o.error === "votelocked" ? (r(),
    u(y, {
        key: 0
    }, [v(" You can no longer vote on this match. ")], 64)) : o.error === "voteupcoming" ? (r(),
    u(y, {
        key: 1
    }, [v(" You can not vote on this match, yet. ")], 64)) : o.error === "newuser" ? (r(),
    u(y, {
        key: 2
    }, [v(" You need to verify your account before you can vote. ")], 64)) : (r(),
    u(y, {
        key: 3
    }, [v(" An error occurred when you tried to vote. ")], 64))])) : A("", !0), a("a", {
        class: "banner",
        href: i.match.link || e.worldcup.channels[i.match.channel].url,
        target: "_blank"
    }, [a("span", {
        title: i.streamTime
    }, c(i.streamTime), 9, X6), a("div", K6, [i.match.time > Date.now() ? (r(),
    u(y, {
        key: 0
    }, [v("Live at:")], 64)) : (r(),
    u(y, {
        key: 1
    }, [v("Streamed at:")], 64)), a("div", {
        class: "logo",
        style: q({
            backgroundImage: `url('${e.worldcup.channels[i.match.channel].logo}')`
        }),
        title: e.worldcup.channels[i.match.channel].name
    }, null, 12, Y6)])], 8, Z6), a("div", {
        class: _(["scripts", {
            vote: i.voteState === "active"
        }])
    }, [(r(!0),
    u(y, null, N(i.match.scripts, (f, P) => {
        var w, B, j, V, S, E;
        return r(),
        u("div", {
            class: _(["script", {
                voted: i.match.vote === f,
                shunned: i.match.vote !== void 0 && i.match.vote !== f,
                loser: ((w = i.match.results) == null ? void 0 : w[P]) === Math.min(...(j = (B = i.match) == null ? void 0 : B.results) != null ? j : []),
                winner: ((V = i.match.results) == null ? void 0 : V[P]) === Math.max(...(E = (S = i.match) == null ? void 0 : S.results) != null ? E : [])
            }]),
            key: f,
            onClick: I => i.vote(I, f)
        }, [e.worldcup.scripts[f] ? (r(),
        u(y, {
            key: 1
        }, [a("div", {
            class: "logo",
            style: q({
                backgroundImage: `url('${o.baseURL}/${e.worldcup.scripts[f].id}/logo.webp')`
            }),
            title: e.worldcup.scripts[f].name
        }, null, 12, x6), a("div", eE, [a("b", null, [s[6] || (s[6] = a("span", {
            class: "icon"
        }, null, -1)), v(" " + c(e.worldcup.scripts[f].rule), 1)]), a("p", null, c(e.worldcup.scripts[f].description), 1), a("footer", null, [a("span", null, "Script by " + c(e.worldcup.scripts[f].author), 1), a("div", sE, [e.worldcup.scripts[f].url ? (r(),
        u("a", {
            key: 0,
            class: "button primary",
            href: e.worldcup.scripts[f].url,
            target: "_blank"
        }, " Guide ", 8, tE)) : A("", !0), a("a", {
            class: "button",
            href: `${o.baseURL}/${e.worldcup.scripts[f].id}/script.json`,
            target: "_blank"
        }, " JSON ", 8, iE), a("a", {
            class: "button secondary",
            href: `${o.baseURL}/${e.worldcup.scripts[f].id}/script.pdf`,
            target: "_blank"
        }, " PDF ", 8, oE)])])])], 64)) : (r(),
        u("div", $6, c(f), 1))], 10, J6)
    }
    ), 128)), a("div", {
        class: _(["versus", {
            results: (m = i.match.results) == null ? void 0 : m.length
        }])
    }, [(r(!0),
    u(y, null, N((p = i.match.results) != null ? p : [], (f, P) => (r(),
    u("div", {
        class: _(["result", {
            winner: f === Math.max(...i.match.results)
        }]),
        key: P
    }, [a("b", null, c(f), 1), s[7] || (s[7] = v(" points ", -1))], 2))), 128)), i.voteState ? (r(),
    u("div", {
        key: 0,
        class: _(["vote", i.voteState])
    }, [i.canVote ? (r(),
    u("span", {
        key: 0,
        class: _(["checkbox", {
            checked: i.match.vote === i.match.scripts[0]
        }])
    }, null, 2)) : (r(),
    C(g, {
        key: 1,
        icon: "lock"
    })), i.match.time > Date.now() - e.worldcup.votePeriod ? (r(),
    u("b", nE, [...s[8] || (s[8] = [v(" Vote ", -1), a("span", {
        class: "primary"
    }, "open", -1)])])) : (r(),
    u("b", aE, [...s[9] || (s[9] = [v("Vote ", -1), a("span", {
        class: "secondary"
    }, "closed", -1)])])), i.canVote ? (r(),
    u("span", {
        key: 4,
        class: _(["checkbox", {
            checked: i.match.vote === i.match.scripts[1]
        }])
    }, null, 2)) : (r(),
    C(g, {
        key: 5,
        icon: "lock"
    }))], 2)) : A("", !0)], 2)], 2)])) : (r(),
    u("div", rE, "Loading..."))])]), b(d), b(h)], 64)
}
const cE = O(H6, [["render", lE], ["__scopeId", "data-v-3f81357f"]])
  , dE = [{
    path: "/play",
    name: "Grimoire",
    component: lR
}, {
    path: "/login",
    name: "Login",
    meta: {
        isPublic: !0
    },
    component: TD
}, {
    path: "/verification",
    name: "Verification",
    component: WD
}, {
    path: "/",
    name: "Lobby",
    component: oD
}, {
    path: "/update",
    name: "Update",
    component: BD
}, {
    path: "/clock",
    name: "Clock",
    meta: {
        isPublic: !0
    },
    component: yy
}, {
    path: "/banned",
    name: "Banned",
    component: hy
}, {
    path: Date.now() > 17476776e5 ? "/worldcup/group" : "/worldcup",
    alias: "/worldcup/group",
    name: "WorldcupGroup",
    component: g6,
    meta: {
        isPublic: !0
    }
}, {
    path: "/worldcup/leaderboard",
    name: "WorldcupLeaderboard",
    component: w6,
    meta: {
        isPublic: !0
    }
}, {
    path: Date.now() > 17476776e5 ? "/worldcup" : "/worldcup/knockout",
    alias: "/worldcup/knockout",
    name: "WorldcupKnockout",
    component: U6,
    meta: {
        isPublic: !0
    }
}, {
    path: "/worldcup/:match",
    name: "WorldcupMatch",
    component: cE,
    meta: {
        isPublic: !0
    }
}]
  , W = eu({
    history: su(),
    routes: dE
});
W.beforeEach(async e => {
    var i;
    const {user: s, refreshToken: t, newVersions: n} = we.state.user
      , {loadingState: o} = we.state.grimoire;
    if (!(document.hidden && o === "initial")) {
        if (n > 1) {
            if (e.name !== "Update")
                return {
                    name: "Update"
                }
        } else if (t) {
            if ((i = s == null ? void 0 : s.flags) != null && i.includes("banned")) {
                if (e.name !== "Banned")
                    return {
                        name: "Banned"
                    }
            } else if (s.flags && !s.flags.includes("verified-email")) {
                if (e.name !== "Verification")
                    return {
                        name: "Verification"
                    }
            } else if (["Login", "Banned"].includes(e.name))
                return {
                    name: "Lobby"
                }
        } else if (!e.meta.isPublic)
            return {
                name: "Login",
                hash: decodeURIComponent(window.location.hash)
            }
    }
}
);
W.afterEach(e => {
    const s = document.getElementById("custom-css");
    if (e.name === "Grimoire") {
        const {customCSS: t, customCSSEnabled: n} = we.state.settings.advanced;
        if (!s && t && n) {
            const o = document.createElement("style");
            o.id = "custom-css",
            o.innerHTML = t,
            document.head.appendChild(o)
        }
    } else
        s && s.remove()
}
);
const uE = e => {
    const s = new Proxy(new URLSearchParams(window.location.search),{
        get: (n, o) => n.get(o)
    });
    let t = !1;
    e.dispatch("user/checkVersion"),
    e.subscribe(async ({type: n, payload: o}, i) => {
        const {user: l, session: g} = i;
        switch (n) {
        case "user/setAccessToken":
            if (o && s.code && s.state === l.user.id) {
                const {success: d, level: h} = await e.dispatch("user/linkPatreon", s.code);
                d ? h || await e.dispatch("openDialogue", {
                    type: "alert",
                    title: "modals.dialogue.error.subscription_title",
                    text: "modals.dialogue.error.subscription_text"
                }) : await e.dispatch("openDialogue", {
                    type: "alert",
                    title: "modals.dialogue.error.link_title",
                    text: "modals.dialogue.error.link_text"
                }),
                window.location = "/";
                return
            } else if (o && !t) {
                const [d] = await Promise.all([e.dispatch("user/loadData")]);
                d != null && d.length && (e.state.edition.id || e.commit("setEdition", {
                    edition: d[0],
                    isInternal: !0
                }),
                e.commit("setLoadingState", "app data"),
                t = !0)
            }
            break;
        case "user/clearUser":
            i.session.sessionId && e.commit("session/setSessionId", ""),
            W.currentRoute.value.meta.isPublic || await W.replace({
                name: "Login",
                hash: window.location.hash
            }),
            t = !1;
            break;
        case "setLoadingState":
            o === "permissions" && (l.user.flags && !l.user.flags.includes("verified-email") && W.currentRoute.value.name !== "Verification" ? await W.replace({
                name: "Verification"
            }) : !l.user.level && !g.sessionId && W.currentRoute.value.name === "Grimoire" && await W.replace({
                name: "Lobby"
            }),
            e.commit("setLoadingState", ""));
            break
        }
    }
    )
}
  , js = e => {
    const {customCSS: s, customCSSEnabled: t} = e.state.settings.advanced
      , n = document.getElementById("custom-css") || document.createElement("style");
    n.id = "custom-css",
    s && t ? (document.head.appendChild(n),
    n.innerHTML = s) : n.remove()
}
  , gE = e => {
    let s = !1;
    if (window.BroadcastChannel) {
        const i = new BroadcastChannel("botc-app");
        i.addEventListener("message", ({data: l}) => {
            l === "checkSession" && e.state.session.sessionId ? i.postMessage("isInSession") : l === "isInSession" && (s = !0)
        }
        ),
        i.postMessage("checkSession")
    }
    const t = () => {
        if (localStorage.getItem("token") && (e.commit("user/setRefreshToken", localStorage.getItem("token")),
        e.dispatch("user/refresh").catch( () => {}
        )),
        localStorage.getItem("background") && e.commit("settings/setBackground", localStorage.background),
        localStorage.getItem("zoom") && e.commit("settings/setTokenZoom", parseFloat(localStorage.getItem("zoom"))),
        localStorage.getItem("reminderZoom") && e.commit("settings/setReminderZoom", parseFloat(localStorage.getItem("reminderZoom"))),
        localStorage.getItem("grimoireOffset") && e.commit("settings/setGrimoireOffset", parseInt(localStorage.getItem("grimoireOffset"))),
        localStorage.getItem("avatarZoom") && e.commit("settings/setAvatarZoom", parseFloat(localStorage.getItem("avatarZoom"))),
        localStorage.getItem("advanced"))
            try {
                const [,i,,l,g,d,h,m,p] = JSON.parse(localStorage.getItem("advanced"));
                e.commit("settings/toggleNightStatic", !!i),
                e.commit("settings/toggleHiddenTownSquareCams", !!g),
                e.commit("settings/toggleHiddenPrivateCams", !!p),
                e.commit("settings/toggleHiddenRevealCams", !!d),
                e.commit("settings/togglePublicTownSquare", !!m),
                e.commit("settings/toggleCustomCSS", !!h),
                l && e.commit("settings/setChromaKey", l)
            } catch (i) {
                X(i)
            }
        if (localStorage.getItem("customCSS")) {
            const i = localStorage.getItem("customCSS");
            js(e),
            e.commit("settings/setCustomCSS", i)
        }
        if (localStorage.getItem("settings"))
            try {
                const i = JSON.parse(localStorage.getItem("settings"));
                if (Array.isArray(i)) {
                    const [l,g,d,h,m,p,f,P,w,B,j,V,S=0,E=null,I="regular",Z=!0,H=!1,F=!0] = i;
                    e.commit("vote/setVotingSpeed", parseInt(g)),
                    e.commit("vote/setNominationType", I),
                    e.commit("session/toggleWhispers", !!d),
                    e.commit("settings/toggleNightOrder", !!l),
                    e.commit("settings/togglePlayerBluffs", !!h),
                    e.commit("settings/togglePlayerNightOrder", !!H),
                    e.commit("settings/togglePlayerDuplicates", !!j),
                    e.commit("settings/toggleTutorialDisabled", !!m),
                    e.commit("settings/toggleImageOptIn", !!p),
                    e.commit("settings/toggleCosmeticsDisabled", !!V),
                    e.commit("settings/toggleAnimationsDisabled", !!f),
                    e.commit("settings/setSoundVolume", P),
                    e.commit("settings/togglePositioningDisabled", !!w),
                    e.commit("settings/toggleNightRequestPing", !!B),
                    e.commit("settings/toggleTouchSupport", !!Z),
                    e.commit("settings/setColorblind", Number(S)),
                    e.commit("settings/toggleStackReminderTokens", E),
                    e.commit("settings/toggleEnglishNames", !!F)
                }
            } catch (i) {
                X(i)
            }
        if (localStorage.getItem("sounds"))
            try {
                JSON.parse(localStorage.getItem("sounds")).forEach( ([i,l]) => {
                    e.commit("settings/setSoundEffectVolume", {
                        id: i,
                        value: l
                    })
                }
                )
            } catch (i) {
                X(i)
            }
        if (localStorage.getItem("positions"))
            try {
                e.commit("setPositions", JSON.parse(localStorage.getItem("positions")))
            } catch (i) {
                X(i)
            }
        if (localStorage.getItem("keybindings"))
            try {
                const i = e.state.keybindings;
                JSON.parse(localStorage.getItem("keybindings")).forEach( ([l,g]) => {
                    Ge[l] && (i[l] = Array.isArray(g) ? g : [g])
                }
                ),
                e.commit("setKeybindings", i)
            } catch (i) {
                X(i)
            }
        if (localStorage.getItem("chatAudio"))
            try {
                const {audio: i, muted: l=!1, deafened: g=!1, ptt: d=!1, isAutoGainControl: h=!0, isNoiseSuppression: m=!0, isEchoCancellation: p=!0} = JSON.parse(localStorage.getItem("chatAudio"));
                e.state.chat.audio.isMuted !== l && e.commit("chat/toggleAudioMuted", l),
                e.state.chat.audio.isDeafened !== g && e.commit("chat/toggleAudioDeafened", g),
                e.state.chat.audio.preference !== i && e.commit("chat/setAudioPreference", i),
                e.state.chat.audio.isAutoGainControl !== h && e.commit("chat/toggleAutoGainControl", h),
                e.state.chat.audio.isNoiseSuppression !== m && e.commit("chat/toggleNoiseSuppression", m),
                e.state.chat.audio.isEchoCancellation !== p && e.commit("chat/toggleEchoCancellation", p),
                e.state.chat.audio.isPushToTalk !== d && (e.commit("chat/togglePushToTalk", d),
                d && !e.state.chat.audio.isMuted && e.commit("chat/toggleAudioMuted", !0))
            } catch (i) {
                X(i)
            }
        if (localStorage.getItem("chatVideo"))
            try {
                const {video: i, muted: l=!1, deafened: g=!1, unmirrored: d=!1, hidden: h=!1} = JSON.parse(localStorage.getItem("chatVideo"));
                e.state.chat.video.isMuted !== l && e.commit("chat/toggleVideoMuted", l),
                e.state.chat.video.isDeafened !== g && e.commit("chat/toggleVideoDeafened", g),
                e.state.chat.video.isHidden !== h && e.commit("chat/toggleVideoHidden", h),
                e.state.chat.video.preference !== i && e.commit("chat/setVideoPreference", i),
                e.state.chat.video.isUnmirrored !== d && e.commit("chat/toggleVideoUnmirrored", d)
            } catch (i) {
                X(i)
            }
    }
      , n = async () => {
        if (localStorage.getItem("townSquare") && e.commit("toggleTownSquare", !0),
        localStorage.getItem("roles"))
            try {
                e.commit("setCustomRoles", JSON.parse(localStorage.getItem("roles")))
            } catch (i) {
                X(i)
            }
        if (localStorage.getItem("edition")) {
            const i = JSON.parse(localStorage.getItem("edition"));
            i.isInternal = !0,
            e.commit("setEdition", i)
        }
        if (localStorage.getItem("bluffs"))
            try {
                e.dispatch("players/setBluffs", JSON.parse(localStorage.getItem("bluffs")))
            } catch (i) {
                X(i)
            }
        if (localStorage.getItem("npcs"))
            try {
                e.dispatch("players/setNPCs", JSON.parse(localStorage.getItem("npcs")))
            } catch (i) {
                X(i)
            }
        if (localStorage.getItem("game"))
            try {
                e.commit("game/setHistory", JSON.parse(localStorage.getItem("game")))
            } catch (i) {
                X(i)
            }
        if (localStorage.getItem("voteHistory"))
            try {
                const i = JSON.parse(localStorage.getItem("voteHistory"));
                e.commit("vote/setHistory", i.filter(l => new Date(l.timestamp).getTime() >= Date.now() - 10800 * 1e3))
            } catch (i) {
                X(i)
            }
        if (localStorage.getItem("players"))
            try {
                e.commit("players/setPlayers", JSON.parse(localStorage.getItem("players")).map(i => ({
                    ...i,
                    role: e.state.roles.get(i.role) || e.state.rolesAvailable.get(i.role) || {}
                })))
            } catch (i) {
                X(i)
            }
        if (localStorage.getItem("storytellers"))
            try {
                e.commit("players/setStorytellers", JSON.parse(localStorage.getItem("storytellers")).map(i => ({
                    ...i,
                    role: e.state.roles.get(i.role) || e.state.rolesAvailable.get(i.role) || {}
                })))
            } catch (i) {
                X(i)
            }
        else
            e.state.players.storytellers.length || await e.dispatch("players/becomeStoryteller");
        if (localStorage.getItem("seats"))
            try {
                e.commit("setSeatName", {
                    seats: JSON.parse(localStorage.getItem("seats"))
                })
            } catch (i) {
                X(i)
            }
        if (localStorage.getItem("reminders"))
            try {
                e.commit("toggleSavedReminder", JSON.parse(localStorage.getItem("reminders")))
            } catch (i) {
                X(i)
            }
        if (e.getters["user/isStoryteller"] && localStorage.getItem("timer"))
            try {
                e.commit("session/setTimer", JSON.parse(localStorage.getItem("timer")))
            } catch (i) {
                X(i)
            }
        if (e.getters["user/isStoryteller"] && localStorage.getItem("raisedHands"))
            try {
                e.commit("session/setRaisedHands", new Map(JSON.parse(localStorage.getItem("raisedHands"))))
            } catch (i) {
                X(i)
            }
    }
      , o = () => {
        if (localStorage.getItem("userOverrides"))
            try {
                e.commit("chat/setUserOverrides", new Map(JSON.parse(localStorage.getItem("userOverrides"))))
            } catch (i) {
                X(i)
            }
        if (!e.state.session.previousSessionId && localStorage.getItem("previousSession") && e.commit("session/setPreviousSessionId", localStorage.getItem("previousSession")),
        !s && !e.state.session.sessionId && localStorage.getItem("session")) {
            const i = localStorage.getItem("session");
            e.commit("session/setSessionId", i)
        }
        e.commit("setLoadingState", "permissions")
    }
    ;
    if (e.subscribe(async ({type: i, payload: l}, g) => {
        var d;
        switch (i) {
        case "setLoadingState":
            l === "app data" ? (await n(),
            e.commit("setLoadingState", "session")) : l === "session" ? o() : l === "" && ["Grimoire", "Lobby"].includes(W.currentRoute.value.name) && ((d = g.user.user.flags) != null && d.includes("tos-agreed") ? localStorage.getItem("update") !== re.version && e.commit("toggleModal", {
                name: "update"
            }) : e.dispatch("openDialogue", {
                type: "terms",
                title: "modals.dialogue.prompt.terms",
                isImportant: !0
            }).then(h => {
                h ? e.dispatch("user/updateUser", {
                    hasAgreedTOS: !0
                }) : e.dispatch("user/logout").catch( () => {}
                )
            }
            ).catch( () => {}
            ));
            break;
        case "toggleModal":
            l && l.name === "update" && localStorage.setItem("update", re.version);
            break;
        case "toggleTownSquare":
            g.grimoire.isTownSquare ? localStorage.setItem("townSquare", 1) : localStorage.removeItem("townSquare");
            break;
        case "settings/setBackground":
            l ? localStorage.setItem("background", l) : localStorage.removeItem("background");
            break;
        case "settings/toggleNightStatic":
        case "settings/toggleHiddenTownSquareCams":
        case "settings/toggleHiddenRevealCams":
        case "settings/togglePublicTownSquare":
        case "settings/toggleCustomCSS":
        case "settings/toggleHiddenPrivateCams":
        case "settings/setChromaKey":
            localStorage.setItem("advanced", JSON.stringify([!1, g.settings.advanced.hasNightStatic, !1, g.settings.advanced.chromaKey, g.settings.advanced.hasHiddenTownSquareCams, g.settings.advanced.hasHiddenRevealCams, g.settings.advanced.customCSSEnabled, g.settings.advanced.hasPublicTownSquare, g.settings.advanced.hasHiddenPrivateCams])),
            i === "settings/toggleCustomCSS" && js(e);
            break;
        case "settings/setCustomCSS":
            l ? localStorage.setItem("customCSS", l) : localStorage.removeItem("customCSS"),
            js(e);
            break;
        case "settings/setTokenZoom":
            l !== 0 ? localStorage.setItem("zoom", l) : localStorage.removeItem("zoom");
            break;
        case "settings/setAvatarZoom":
            l !== 1 ? localStorage.setItem("avatarZoom", l) : localStorage.removeItem("avatarZoom");
            break;
        case "settings/setReminderZoom":
            l !== 1 ? localStorage.setItem("reminderZoom", l) : localStorage.removeItem("reminderZoom");
            break;
        case "settings/setGrimoireOffset":
            l ? localStorage.setItem("grimoireOffset", l) : localStorage.removeItem("grimoireOffset");
            break;
        case "setPosition":
            Object.values(g.positions).some(h => !!h) ? localStorage.setItem("positions", JSON.stringify(g.positions)) : localStorage.removeItem("positions");
            break;
        case "setEdition":
        case "setTheme":
            if (g.grimoire.loadingState === "initial")
                return;
            localStorage.setItem("edition", JSON.stringify({
                edition: e.getters.editionExport.edition,
                theme: g.grimoire.theme
            })),
            g.edition.isOfficial && localStorage.removeItem("roles");
            break;
        case "setCustomRoles":
            l.length ? localStorage.setItem("roles", JSON.stringify(l)) : localStorage.removeItem("roles");
            break;
        case "players/setBluff":
            localStorage.setItem("bluffs", JSON.stringify(g.players.bluffs.map(h => h.isCustom ? h : {
                id: h.id
            })));
            break;
        case "players/setNPCs":
            localStorage.setItem("npcs", JSON.stringify(g.players.npcs.map(h => h.isCustom ? h : {
                id: h.id
            })));
            break;
        case "setSeatName":
            g.grimoire.seats.some(h => h) ? localStorage.setItem("seats", JSON.stringify(g.grimoire.seats)) : localStorage.removeItem("seats");
            break;
        case "toggleSavedReminder":
            g.grimoire.savedReminders.length ? localStorage.setItem("reminders", JSON.stringify(g.grimoire.savedReminders)) : localStorage.removeItem("reminders");
            break;
        case "players/addPlayer":
        case "players/updatePlayer":
        case "players/removePlayers":
        case "players/clearPlayers":
        case "players/movePlayers":
        case "players/setPlayers":
            g.players.players.length ? localStorage.setItem("players", JSON.stringify(g.players.players.map(h => ({
                ...h,
                role: h.role.id || {}
            })))) : localStorage.removeItem("players");
            break;
        case "players/addStoryteller":
        case "players/setStorytellers":
        case "players/removeStoryteller":
        case "players/updateStoryteller":
            g.players.storytellers ? localStorage.setItem("storytellers", JSON.stringify(g.players.storytellers.map(h => {
                var m, p;
                return {
                    id: h.id,
                    ...(m = h.role) != null && m.id ? {
                        role: h.role.id
                    } : {},
                    ...h.alignment ? {
                        alignment: h.alignment
                    } : {},
                    ...(p = h.reminders) != null && p.length ? {
                        reminders: h.reminders
                    } : {}
                }
            }
            ))) : localStorage.removeItem("storytellers");
            break;
        case "session/setSessionId":
            g.session.sessionId ? localStorage.setItem("session", g.session.sessionId) : localStorage.removeItem("session");
            break;
        case "session/setPreviousSessionId":
            g.session.previousSessionId ? localStorage.setItem("previousSession", g.session.previousSessionId) : localStorage.removeItem("previousSession");
            break;
        case "chat/setUserOverride":
            g.chat.userOverrides.size ? localStorage.setItem("userOverrides", JSON.stringify([...g.chat.userOverrides])) : localStorage.removeItem("userOverrides");
            break;
        case "chat/toggleAudioMuted":
        case "chat/toggleAudioDeafened":
        case "chat/togglePushToTalk":
        case "chat/toggleAutoGainControl":
        case "chat/toggleEchoCancellation":
        case "chat/toggleNoiseSuppression":
        case "chat/setAudioPreference":
        case "chat/setAudioDevice":
            if (g.chat.audio.isPushToTalk && i === "chat/toggleAudioMuted")
                return;
            localStorage.setItem("chatAudio", JSON.stringify({
                audio: g.chat.audio.device || g.chat.audio.preference,
                muted: g.chat.audio.isMuted,
                deafened: g.chat.audio.isDeafened,
                ptt: g.chat.audio.isPushToTalk,
                isAutoGainControl: g.chat.audio.isAutoGainControl,
                isEchoCancellation: g.chat.audio.isEchoCancellation,
                isNoiseSuppression: g.chat.audio.isNoiseSuppression
            }));
            break;
        case "chat/toggleVideoMuted":
        case "chat/toggleVideoDeafened":
        case "chat/toggleVideoUnmirrored":
        case "chat/toggleVideoHidden":
        case "chat/setVideoPreference":
        case "chat/setVideoDevice":
            localStorage.setItem("chatVideo", JSON.stringify({
                video: g.chat.video.device || g.chat.video.preference,
                muted: g.chat.video.isMuted,
                deafened: g.chat.video.isDeafened,
                unmirrored: g.chat.video.isUnmirrored,
                hidden: g.chat.video.isHidden
            }));
            break;
        case "user/setRefreshToken":
            l ? localStorage.setItem("token", l) : localStorage.removeItem("token");
            break;
        case "game/setPhase":
        case "game/toggleRunning":
        case "game/addHistory":
        case "game/setHistory":
        case "game/removeHistory":
            localStorage.setItem("game", JSON.stringify({
                phase: g.game.phase,
                isRunning: g.game.isRunning,
                history: g.game.history
            }));
            break;
        case "vote/addLogEntry":
        case "vote/clearHistory":
            g.vote.history.length ? localStorage.setItem("voteHistory", JSON.stringify(g.vote.history)) : localStorage.removeItem("voteHistory");
            break;
        case "settings/toggleNightOrder":
        case "vote/setVotingSpeed":
        case "vote/setNominationType":
        case "settings/togglePlayerBluffs":
        case "settings/togglePlayerNightOrder":
        case "settings/togglePlayerDuplicates":
        case "settings/toggleTutorialDisabled":
        case "settings/toggleEnglishNames":
        case "session/toggleWhispers":
        case "settings/toggleImageOptIn":
        case "settings/toggleNightRequestPing":
        case "settings/toggleTouchSupport":
        case "settings/toggleAnimationsDisabled":
        case "settings/toggleCosmeticsDisabled":
        case "settings/setSoundVolume":
        case "settings/togglePositioningDisabled":
        case "settings/toggleStackReminderTokens":
        case "settings/setColorblind":
            localStorage.setItem("settings", JSON.stringify([g.settings.game.isNightOrder, g.vote.speed, g.session.isWhispersDisabled, g.settings.game.isPlayerBluffs, g.settings.game.isTutorialDisabled, g.settings.general.isImageOptIn, g.settings.general.isAnimationsDisabled, g.settings.general.soundVolume, g.settings.general.isPositioningDisabled, g.settings.game.isNightRequestPing, g.settings.game.isPlayerDuplicates, g.settings.general.isCosmeticsDisabled, g.settings.general.colorblind, g.settings.game.stackReminderTokens, g.vote.nominationType, g.settings.game.isTouchSupport, g.settings.game.isPlayerNightOrder, g.settings.game.isEnglishNames]));
            break;
        case "settings/setSoundEffectVolume":
            [...g.settings.sounds].some( ([,h]) => h !== 1) ? localStorage.setItem("sounds", JSON.stringify([...g.settings.sounds].filter( ([,h]) => h !== 1))) : localStorage.removeItem("sounds");
            break;
        case "session/setTimer":
        case "session/setTimerPaused":
            e.getters["user/isStoryteller"] && localStorage.setItem("timer", JSON.stringify(g.session.timer));
            break;
        case "session/raiseHand":
        case "session/setRaisedHands":
            e.getters["user/isStoryteller"] && localStorage.setItem("raisedHands", JSON.stringify([...g.session.raisedHands]));
            break;
        case "setKeybindings":
            localStorage.setItem("keybindings", JSON.stringify(Object.entries(g.keybindings).filter( ([h,m]) => m.some(p => !Ge[h].includes(p)))));
            break
        }
    }
    ),
    document.hidden) {
        let i = !1;
        document.addEventListener("visibilitychange", () => {
            !document.hidden && !i && (i = !0,
            t())
        }
        )
    } else
        t()
}
;
class mE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._socket.handleMessage("getGamestate", this.sendGamestate.bind(this)),
        this._socket.handleMessage("gamestate", this.updateGamestate.bind(this)),
        this._socket.handleMessage("session", this.initGamestate.bind(this))
    }
    async checkUserGamedata(s=0) {
        const {user: t, levels: n} = this._store.state.user;
        if (![...n.GROUP, ...n.SINGLE].includes(t.level)) {
            if (!t.level && s)
                s <= 120 * 1e3 ? this._store.commit("user/addNotification", {
                    type: "boost"
                }) : this._store.commit("user/removeNotification", {
                    type: "boost"
                });
            else if (!t.level && s <= 0) {
                const i = new Error("modals.dialogue.error.subscription_text");
                throw i.name = "modals.dialogue.error.subscription",
                i
            }
        }
        const {name: o} = W.currentRoute.value;
        o === "Lobby" && await W.replace({
            name: "Grimoire"
        }),
        this._store.state.grimoire.loadingState === "game" && this._store.commit("setLoadingState", "permissions")
    }
    async initGamestate(s, t) {
        var n;
        if (!t) {
            try {
                s.boostDuration !== void 0 && (await this.checkUserGamedata(s.boostDuration),
                this._store.commit("session/setBoostExpires", Date.now() + s.boostDuration)),
                s.isInternal = !0,
                this._store.commit("session/setUsers", s.usersAll),
                s.Server && !this._store.state.chat.servers.has(s.Server.host) && this._store.commit("chat/updateServer", s.Server),
                this._store.commit("session/updateMeta", {
                    owner: s.owner,
                    banlist: s.banlist,
                    createdAt: s.createdAt,
                    chatServer: (n = s.Server) == null ? void 0 : n.host,
                    isPublic: s.isPublic,
                    tags: s.tags,
                    language: s.language,
                    isInternal: !0
                }),
                await this._store.dispatch("loadEdition", s),
                await this._store.dispatch("players/setStorytellers", s.storytellers),
                await this._store.dispatch("players/setPlayers", s.players),
                await this._store.dispatch("players/setNPCs", s.npcs),
                await this._store.dispatch("players/setBluffs", s.bluffs),
                await this._store.dispatch("game/setHistory", s),
                this._store.commit("session/setPreviousSessionId", this._store.state.session.sessionId)
            } catch (o) {
                this._store.dispatch("openDialogue", {
                    type: "alert",
                    title: o.name,
                    text: [o.message, o.params]
                }).catch( () => {}
                ),
                this._socket.disconnect();
                return
            }
            if (s.storytellers && s.usersAll) {
                const {storytellers: o} = this._store.state.players
                  , i = o.find(l => {
                    var g;
                    return ((g = this._store.state.session.users.get(l.id)) == null ? void 0 : g.isOnline) && l.id !== this._store.state.user.user.id
                }
                );
                this._store.getters["user/isStoryteller"] && !i ? this.sendGamestate() : o.length && i && this._socket.sendMessage("getGamestate", !1, i.id)
            }
        }
    }
    sendGamestate(s, t) {
        const {session: n, settings: o, rolesSelected: i} = this._store.state;
        if (!this._store.getters["user/isStoryteller"] || n.users.size < 2)
            return;
        const l = this._store.getters["players/storytellerMap"]
          , g = {
            vote: this._store.getters["vote/nomination"],
            raisedHands: [...n.raisedHands],
            flags: [o.advanced.isWhispersDisabled, o.advanced.hasHiddenPrivateCams],
            timer: n.timer
        }
          , {isPointing: d, pointers: h, recipients: m} = n;
        d && (!m.length || m.includes(t)) && (g.pointing = {
            isPointing: d,
            pointers: h,
            recipients: m
        }),
        l.has(t) && (g.rolesSelected = i),
        this._socket.sendMessage("gamestate", g, t)
    }
    updateGamestate(s, t) {
        const n = this._store.getters["players/storytellerMap"];
        if (t && !n.has(t))
            return;
        const {vote: o, raisedHands: i, pointing: l, flags: g, timer: d, rolesSelected: h} = s;
        this._store.commit("vote/nomination", Object.assign(o, {
            isInternal: !0
        })),
        i && this._store.commit("session/setRaisedHands", new Map(i.length ? i : [])),
        l && (this._store.commit("session/setPointing", l),
        this._store.commit("setGrimoireMode", "pointing"));
        const [m,p] = g;
        this._store.state.settings.advanced.hasHiddenPrivateCams !== !!p && this._store.commit("settings/toggleHiddenPrivateCams", {
            value: !!p,
            isInternal: !0
        }),
        this._store.state.session.isWhispersDisabled !== !!m && this._store.commit("session/toggleWhispers", {
            value: !!m,
            isInternal: !0
        }),
        this._store.state.session.timer.expiration !== (d == null ? void 0 : d.expiration) && this._store.commit("session/setTimer", Object.assign(d, {
            isInternal: !0
        })),
        h && this._store.commit("setRolesSelected", h)
    }
}
class hE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: n, payload: o}) => {
            if (!(o != null && o.isInternal))
                switch (n) {
                case "players/claimSeat":
                    this.claimSeat(o).catch( () => {}
                    );
                    break;
                case "players/openEyes":
                    this.openEyes(o).catch( () => {}
                    );
                    break;
                case "players/updatePlayer":
                    this.updatePlayer(o).catch( () => {}
                    );
                    break;
                case "players/setRoles":
                    this.setRoles().catch( () => {}
                    );
                    break;
                case "players/clearPlayers":
                    this._store.commit("setSeatName", {
                        seats: []
                    }),
                    this.clearSession("players").catch( () => {}
                    );
                    break
                }
        }
        ),
        this._store.subscribeAction( ({type: n, payload: o}) => {
            if (!(o != null && o.isInternal))
                switch (n) {
                case "players/clearRoles":
                    this.clearSession("grimoire").catch( () => {}
                    );
                    break;
                case "players/removePlayers":
                    this.updateSeats("remove", o).catch( () => {}
                    );
                    break;
                case "players/movePlayers":
                    this.updateSeats("move", o).catch( () => {}
                    );
                    break;
                case "players/addPlayer":
                    this.updateSeats("add").catch( () => {}
                    );
                    break
                }
        }
        );
        const t = s.handleMessage.bind(s);
        t("updateSeats", this.handleSeatUpdate.bind(this)),
        t("updatePlayer", this.handlePlayerUpdate.bind(this)),
        t("clear", this.handleClear.bind(this))
    }
    async claimSeat(s) {
        if (s === null)
            return;
        const {players: t} = this._store.state.players
          , {user: n} = this._store.state.user
          , o = this._store.getters["players/seatedPlayerMap"];
        if (s < 0) {
            if (t.some(i => i.id === n.id))
                try {
                    await this._socket.request("claimSeat", s)
                } catch (i) {
                    this._store.dispatch("showError", ["modals.dialogue.error.vacating", i]).catch( () => {}
                    )
                }
        } else if (!o.has(n.id) && t.length > s && (s < 0 || !t[s].id))
            try {
                await this._socket.request("claimSeat", s)
            } catch (i) {
                this._store.dispatch("showError", ["modals.dialogue.error.claiming", i]).catch( () => {}
                )
            }
        this._store.commit("players/claimSeat", null)
    }
    async openEyes({index: s, value: t=!1}) {
        const {players: n} = this._store.state.players;
        if (n[s] && !(!this._store.getters["user/isStoryteller"] && n[s].id !== this._store.state.user.user.id))
            try {
                await this._socket.request("openEyes", {
                    index: s,
                    value: t
                })
            } catch (o) {
                this._store.dispatch("showError", [`modals.dialogue.error.eyes_${t ? "open" : "close"}`, o]).catch( () => {}
                )
            }
    }
    async setRoles() {
        if (this._store.getters["user/isStoryteller"])
            try {
                const s = this._store.state.players.players.map(t => ({
                    role: t.role.id,
                    alignment: t.alignment
                }));
                await this._socket.request("playerRoles", s)
            } catch (s) {
                this._store.dispatch("showError", ["modals.dialogue.error.sending_roles", s]).catch( () => {}
                )
            }
    }
    async updateSeats(s, t) {
        if (!this._store.getters["user/isStoryteller"])
            return;
        let n = this._store.state.players.players.length;
        try {
            await this._socket.request("updateSeats", {
                type: s,
                payload: t,
                check: n
            })
        } catch (o) {
            this._store.dispatch("showError", [`modals.dialogue.error.${s}_player`, o]).catch( () => {}
            )
        }
    }
    async handleSeatUpdate(s) {
        switch (s.payload || (s.payload = {}),
        s.payload.isInternal = !0,
        s.type) {
        case "add":
            await this._store.dispatch("players/addPlayer", s.payload);
            break;
        case "move":
            await this._store.dispatch("players/movePlayers", s.payload);
            break;
        case "remove":
            await this._store.dispatch("players/removePlayers", s.payload);
            break
        }
    }
    async clearSession(s) {
        if (this._store.getters["user/isStoryteller"])
            try {
                await this._socket.request("clear", s)
            } catch (t) {
                this._store.dispatch("showError", ["modals.dialogue.error.clear_grim", t]).catch( () => {}
                )
            }
    }
    async handleClear() {
        await this._store.dispatch("players/clearRoles", {
            isInternal: !0
        }),
        await this._store.dispatch("session/clearSignals")
    }
    async updatePlayer({player: s, property: t, value: n}) {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const o = ["isVoteless", "isDead", "id", "role", "alignment", "reminders"]
          , i = this._store.state.players.players.indexOf(s);
        if (!(i < 0))
            try {
                t === "role" ? await this._socket.request("updatePlayer", {
                    index: i,
                    property: t,
                    value: n.id || null
                }) : o.includes(t) ? await this._socket.request("updatePlayer", {
                    index: i,
                    property: t,
                    value: n
                }) : t === "isMarkedForDeath" && this._socket.sendMessage("updatePlayer", {
                    index: i,
                    property: t,
                    value: n
                }, "storyteller")
            } catch (l) {
                this._store.dispatch("showError", ["modals.dialogue.error.update_player", l]).catch( () => {}
                )
            }
    }
    async handlePlayerUpdate({index: s, property: t, value: n}, o) {
        const i = this._store.getters["players/storytellerMap"].has(o);
        if (o && (!i || t !== "isMarkedForDeath"))
            return;
        const l = this._store.state.players.players[s]
          , g = !0;
        if (l)
            if (t === "role") {
                if (!n && l.role.team === "traveller")
                    this._store.commit("players/updatePlayer", {
                        player: l,
                        property: "role",
                        value: {},
                        isInternal: g
                    });
                else {
                    const d = this._store.state.roles.get(n) || this._store.state.rolesAvailable.get(n) || {};
                    this._store.commit("players/updatePlayer", {
                        player: l,
                        property: "role",
                        value: d,
                        isInternal: g
                    })
                }
                l.alignment && this._store.commit("players/updatePlayer", {
                    player: l,
                    property: "alignment",
                    value: null,
                    isInternal: g
                })
            } else
                t === "id" ? (this._store.commit("players/updatePlayer", {
                    player: l,
                    property: "special",
                    isInternal: g
                }),
                l.id !== n && await this._store.dispatch("chat/textMessage", {
                    isSystem: !0,
                    senderId: "",
                    message: {
                        type: n ? "seat_claim" : "seat_vacate",
                        data: [n || l.id, s + 1]
                    }
                })) : t === "isDead" && n && s === this._store.state.vote.markedPlayer && this._store.commit("vote/setMarkedPlayer", -1),
                this._store.commit("players/updatePlayer", {
                    player: l,
                    property: t,
                    value: n,
                    isInternal: g
                })
    }
}
class pE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._pingInterval = 60 * 1e3,
        this._pingTimer = null,
        this._userJoinLeaveTimer = {
            [!0]: {},
            [!1]: {}
        },
        this._store.subscribe( ({type: t, payload: n}) => {
            switch (t) {
            case "session/toggleConnected":
                n ? (this.ping().catch( () => {}
                ),
                this._pingTimer = setInterval(this.ping.bind(this), this._pingInterval)) : clearInterval(this._pingTimer);
                break;
            case "session/kickUser":
                this.kickUser(n).catch( () => {}
                );
                break;
            case "user/requestGrimoire":
                this.requestGrimoire(n).catch( () => {}
                );
                break;
            case "session/togglePowerful":
                this.togglePowerful(n).catch( () => {}
                );
                break
            }
        }
        ),
        this._socket.handleMessage("updateUser", this.handleUserUpdate.bind(this)),
        this._socket.handleMessage("announcement", this.handleAnnouncement.bind(this))
    }
    async ping() {
        const s = Date.now();
        await this._socket.request("ping"),
        this._store.commit("session/setPing", Date.now() - s)
    }
    async kickUser(s) {
        if (!(!this._store.getters["user/isStoryteller"] && !this._store.getters["user/isModerator"]))
            try {
                await this._socket.request("kickUser", s)
            } catch (t) {
                this._store.dispatch("showError", ["modals.dialogue.error.kick", t])
            }
    }
    async handleUserUpdate(s, t) {
        var i;
        if (t)
            return;
        const n = this._store.state.session.users.get(s.id)
          , {notifications: o} = this._store.state.user;
        if (s.isOnline !== void 0 && s.isOnline !== (n == null ? void 0 : n.isOnline)) {
            const l = this._userJoinLeaveTimer[!s.isOnline];
            if (l[s.id])
                clearTimeout(l[s.id]),
                l[s.id] = null;
            else {
                const g = this._userJoinLeaveTimer[s.isOnline];
                g[s.id] = setTimeout( () => {
                    this._store.dispatch("chat/textMessage", {
                        isSystem: !0,
                        senderId: "",
                        message: {
                            type: s.isOnline ? "join" : "leave",
                            data: s.id
                        }
                    }),
                    g[s.id] = null
                }
                , 3 * 1e3)
            }
            s.isOnline ? ((i = this._store.state.user.relations.get(s.id)) == null ? void 0 : i.type) === "block" && this._store.commit("user/addNotification", {
                type: "blockJoin",
                payload: s.id
            }) : o.filter(g => g.payload === s.id).forEach(g => {
                this._store.commit("user/removeNotification", g)
            }
            )
        } else if (s.grimoireAccess !== void 0 && s.grimoireAccess !== (n == null ? void 0 : n.grimoireAccess) && ((n == null ? void 0 : n.grimoireAccess) === 3 || s.grimoireAccess !== 0)) {
            const l = ["grim_remove", "grim_request", "grim_deny", "grim_receive"];
            await this._store.dispatch("chat/textMessage", {
                isSystem: !0,
                senderId: "",
                message: {
                    type: l[s.grimoireAccess],
                    data: s.id
                }
            }),
            s.grimoireAccess === 1 && this._store.getters["user/isStoryteller"] && s.id !== this._store.state.user.user.id && !o.some(g => g.type === "grimoireAccess" && g.payload === s.id) && this._store.commit("user/addNotification", {
                type: "grimoireAccess",
                payload: s.id
            })
        }
        this._store.commit("session/updateUser", s)
    }
    async handleAnnouncement({title: s, text: t}, n) {
        n || await this._store.dispatch("openDialogue", {
            type: "alert",
            title: s,
            text: t,
            isImportant: !0
        })
    }
    async requestGrimoire({id: s, status: t}={}) {
        const n = this._store.getters["players/seatedPlayerMap"]
          , o = this._store.getters["user/isStoryteller"];
        if (!(s && !o) && !(!s && n.has(this._store.state.user.user.id)))
            try {
                await this._socket.request("requestGrimoire", {
                    id: s,
                    status: t
                })
            } catch (i) {
                this._store.dispatch("showError", ["modals.dialogue.error.request_grim", i])
            }
    }
    async togglePowerful(s) {
        var n;
        const t = ((n = this._store.state.session.users.get(this._store.state.user.user.id)) == null ? void 0 : n.flags) || [];
        try {
            await this._socket.request("code", [s, this._store.state.players.players.map(o => {
                var i;
                return (i = o.role) == null ? void 0 : i.id
            }
            ), this._store.state.players.npcs.map(o => o.id)]),
            this._store.dispatch("showError", ["Reality has changed...", t.includes("powerful") ? "Your powers have been removed." : "Your powers have been enhanced."])
        } catch (o) {
            this._store.dispatch("showError", ["That didn't work", o])
        }
    }
}
class AE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            n != null && n.isInternal || t === "players/setNPC" && this.sendNPCs().catch( () => {}
            )
        }
        ),
        this._socket.handleMessage("npcs", this.handleNPCs.bind(this))
    }
    async sendNPCs() {
        if (this._store.getters["user/isStoryteller"])
            try {
                await this._socket.request("npcs", this._store.getters.editionExport.npcs)
            } catch (s) {
                X(s),
                await this._store.dispatch("showError", ["modals.dialogue.error.npcs", s])
            }
    }
    handleNPCs(s) {
        this._store.state.positions.npcs || this._store.commit("setTab", {
            tab: "npcs",
            value: !0
        }),
        this._store.dispatch("players/setNPCs", s)
    }
}
class bE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            t === "setEdition" && !n.isInternal ? this.sendEdition().catch( () => {}
            ) : t === "setTheme" && !n.isInternal && this.sendTheme(n).catch( () => {}
            )
        }
        )
    }
    async sendEdition() {
        const s = this._store.getters.editionExport;
        if (this._store.getters["user/isStoryteller"])
            try {
                await this._socket.request("edition", s)
            } catch (t) {
                X(t),
                this._store.dispatch("showError", ["modals.dialogue.error.edition_change", t])
            }
    }
    async sendTheme({theme: s}) {
        if (this._store.getters["user/isStoryteller"])
            try {
                await this._socket.request("edition", {
                    theme: s
                })
            } catch (t) {
                X(t),
                this._store.dispatch("showError", ["modals.dialogue.error.theme_change", t])
            }
    }
}
class fE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            n != null && n.isInternal || (t === "session/setHook" && n.name === "distribute-roles" && this.distributeRoles().catch( () => {}
            ),
            t === "toggleRole" && this.toggleRole(n))
        }
        ),
        s.handleMessage("distributeRoles", this.handleDistribute.bind(this)),
        s.handleMessage("toggleRole", this.handleRoleToggle.bind(this))
    }
    toggleRole(s) {
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("toggleRole", s, "storyteller")
    }
    handleRoleToggle(s) {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {id: t, add: n} = s || {};
        this._store.commit("toggleRole", {
            id: t,
            add: n,
            isInternal: !0
        })
    }
    async distributeRoles() {
        if (this._store.getters["user/isStoryteller"])
            try {
                await this._socket.request("startGame", this._store.state.game)
            } catch (s) {
                this._store.dispatch("showError", ["modals.dialogue.error.start", s])
            }
    }
    async handleDistribute({role: s, alignment: t}, n) {
        if (n)
            return;
        const {user: o, modal: i, players: l, roles: g, rolesAvailable: d} = this._store.state;
        i.name === "roles" && this._store.commit("toggleModal"),
        this._store.commit("vote/clearHistory"),
        this._store.getters["user/hasGrimoireAccess"] || await this._store.dispatch("players/clearRoles");
        const h = this._store.getters["players/seatedPlayerMap"].get(o.user.id);
        if (h && s) {
            this._store.commit("players/updatePlayer", {
                player: h,
                property: "role",
                value: g.get(s) || d.get(s) || {},
                isInternal: !0
            }),
            this._store.commit("players/updatePlayer", {
                player: h,
                property: "alignment",
                value: t,
                isInternal: !0
            });
            try {
                await this._store.dispatch("session/triggerHook", {
                    name: "receive-role",
                    delay: 2500
                })
            } catch {}
        } else if (h && l.npcs.some(m => m.id === "tor"))
            try {
                await this._store.dispatch("session/triggerHook", {
                    name: "receive-tor",
                    delay: 5e3
                })
            } catch {}
        else
            await this._store.dispatch("session/triggerHook", {
                name: "distribute-roles",
                delay: 1500,
                isInternal: !0
            })
    }
}
class vE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            if (t === "session/setHook" && n.name === "reveal-grimoire" && !n.isInternal)
                this.revealGrimoire(n.params).catch( () => {}
                );
            else if (t === "players/updatePlayer" && n.property === "revealed" && n.value) {
                this.revealPlayer(n);
                const {players: o} = this._store.state.players;
                if (o.every( ({revealed: i}) => i)) {
                    const i = this._store.state.session.hook.params;
                    setTimeout( () => {
                        this._store.commit("session/setHook", {
                            name: "",
                            params: i
                        }),
                        this._store.commit("setGrimoireMode", "grimoire")
                    }
                    , 1e3)
                }
            } else
                t === "players/updateStoryteller" && n.property === "revealed" && n.value && !n.isInternal && this.revealGameResult()
        }
        ),
        this._socket.handleMessage("reveal", this.handleReveal.bind(this)),
        this._socket.handleMessage("revealPlayer", this.handleRevealPlayer.bind(this)),
        this._socket.handleMessage("revealGameResult", this.handleGameResult.bind(this))
    }
    async revealGrimoire(s) {
        if (this._store.getters["user/isStoryteller"]) {
            this._store.commit("chat/togglePrompt", !1);
            try {
                await this._socket.request("endGame", {
                    isEvilWin: s
                })
            } catch (t) {
                this._store.dispatch("showError", ["modals.dialogue.error.end", t])
            }
        }
    }
    async handleReveal({players: s, isEvilWin: t}) {
        this._store.state.players.players.forEach(n => this._store.commit("players/updatePlayer", {
            player: n,
            property: "revealed",
            value: !1,
            isInternal: !0
        })),
        this._store.commit("players/updateStoryteller", {
            property: "revealed",
            value: !1,
            isInternal: !0
        }),
        this._store.commit("chat/togglePrompt", !1),
        this._store.commit("setGrimoireMode", "reveal");
        try {
            await this._store.dispatch("session/triggerHook", {
                name: "reveal-grimoire",
                params: t,
                isInternal: !0
            })
        } catch {}
        this._store.getters["user/isStoryteller"] || await this._store.dispatch("players/setRoles", s)
    }
    revealPlayer({player: s, value: t, isInternal: n}) {
        n || this._store.getters["user/isStoryteller"] && s && t && this._socket.sendMessage("revealPlayer", this._store.state.players.players.indexOf(s))
    }
    handleRevealPlayer(s) {
        const t = this._store.state.players.players[s];
        s >= 0 && t && this._store.commit("players/updatePlayer", {
            player: t,
            property: "revealed",
            value: !0,
            isInternal: !0
        })
    }
    revealGameResult() {
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("revealGameResult")
    }
    handleGameResult() {
        this._store.commit("players/updateStoryteller", {
            property: "revealed",
            value: !0,
            isInternal: !0
        })
    }
}
class yE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            n != null && n.isInternal || t === "session/setHook" && n.name === "attention-gong" && this.attentionGong()
        }
        ),
        this._socket.handleMessage("attention", this.handleAttentionGong.bind(this))
    }
    attentionGong() {
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("attention")
    }
    handleAttentionGong() {
        const s = this._store.getters["game/isNight"];
        this._store.dispatch("session/triggerHook", {
            name: "attention-gong",
            delay: 1e4,
            isInternal: !0
        }).catch( () => {}
        ),
        this._socket.showNotification(s ? "The Storyteller requested your attention!" : "Please return to the Town Square!").catch( () => {}
        )
    }
}
class _E {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._clearTimeout = null,
        this._store.subscribe( ({type: t, payload: n}) => {
            t === "session/addSignal" && this.sendSignal(n).catch( () => {}
            ),
            t === "game/setPhase" && (clearTimeout(this._clearTimeout),
            this._store.getters["game/isNight"] || (this._clearTimeout = setTimeout( () => this._store.dispatch("session/clearSignals"), 10 * 1e3))),
            t === "session/setHook" && ["reveal-grimoire", "distribute-roles"].includes(n.name) && (clearTimeout(this._clearTimeout),
            this._store.dispatch("session/clearSignals").catch( () => {}
            ))
        }
        ),
        this._socket.handleMessage("signal", this.handleSignal.bind(this)),
        this._socket.handleMessage("signalIndicator", this.handleSignalIndicator.bind(this))
    }
    async sendSignal({userIds: s, message: t, isInternal: n}) {
        if (!n)
            try {
                const o = await this._socket.request("signal", {
                    message: t.map( ({id: i, data: l, role: g, description: d, icon: h}) => ({
                        id: i,
                        data: l,
                        role: g,
                        icon: i === "special" ? h : void 0,
                        description: i === "special" ? d : void 0
                    })),
                    recipients: s
                });
                Object.keys(o).length ? s.forEach(i => {
                    var h;
                    const l = o[i];
                    if (!(l != null && l.length))
                        return;
                    const g = l.map(m => ({
                        id: "seen",
                        data: m
                    }))
                      , d = (h = this._store.state.session.signals[i]) == null ? void 0 : h.findIndex(m => m.message === t);
                    d >= 0 && this._store.commit("session/updateSignal", {
                        userId: i,
                        index: d,
                        message: [...t, ...g]
                    })
                }
                ) : this._store.state.modal.name === "signal" && this._store.commit("toggleModal")
            } catch (o) {
                this._store.dispatch("showError", ["modals.dialogue.error.signal", o]).catch( () => {}
                )
            }
    }
    handleSignal({message: s, recipients: t}, n) {
        const {user: o} = this._store.state.user
          , i = this._store.getters["user/isStoryteller"]
          , l = this._store.getters["user/isSpectator"]
          , g = this._store.getters["players/storytellerMap"]
          , d = this._store.getters["user/getOpenEyes"] === "open-eyes" && !(t != null && t.includes(o.id));
        if (t.includes("storyteller") && t.splice(t.indexOf("storyteller"), 1),
        (i || l || d) && t.length)
            t.forEach(h => {
                this._store.commit("session/addSignal", {
                    userIds: [h],
                    message: s,
                    isInbound: !1,
                    isInternal: !0
                })
            }
            );
        else if (!t.length || t != null && t.includes(o.id)) {
            const h = g.has(n) ? "storyteller" : n;
            this._store.commit("session/addSignal", {
                userIds: [h],
                message: s,
                isInbound: !0,
                isInternal: !0
            }),
            l || this._socket.showNotification(i ? "A player sent you a message at night" : "The Storyteller woke you at night!").catch( () => {}
            )
        } else
            return;
        !i && !l && !d && this._store.state.modal.name !== "signal" && this._store.commit("toggleModal", {
            name: "signal"
        })
    }
    handleSignalIndicator({sender: s, recipients: t}, n) {
        if (n)
            return;
        const o = this._store.getters["players/seatedPlayerMap"]
          , {users: i} = this._store.state.session
          , l = t.filter(g => o.has(g)).map(g => {
            var d;
            return ((d = i.get(g)) == null ? void 0 : d.username) || g
        }
        );
        this._store.dispatch("chat/textMessage", {
            isSystem: !0,
            isExpiring: !0,
            senderId: "",
            message: {
                type: "signal",
                data: [s, l.length ? l.join(",") : "storyteller"]
            }
        })
    }
}
class wE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._whisperRequestTimers = new Map,
        this._whisperRequestTimeout = 10 * 1e3,
        this._prevChannel = this._store.state.chat.channel,
        this._leaveChannelTimer = null,
        this._store.subscribe( ({type: t, payload: n}) => {
            switch (t) {
            case "chat/setWhisperTo":
                this.sendWhisperRequest(n);
                break;
            case "chat/removeWhisperTo":
            case "chat/removeWhisperFrom":
                this.sendWhisperRemove(n);
                break;
            case "chat/addTextMessage":
                if (n.isSystem)
                    return;
                this.sendTextMessage(n);
                break;
            case "game/setPhase":
            case "session/setHook":
                (t !== "session/setHook" || (n == null ? void 0 : n.name) === "reveal-grimoire") && this.returnToTown();
                break;
            case "players/removeStoryteller":
                (n == null ? void 0 : n.id) === this._store.state.user.user.id && this.returnToTown();
                break;
            case "vote/nomination":
            case "vote/setNomination":
                this._store.state.vote.nomination && this.returnToTown();
                break;
            case "chat/changeServer":
                this.updateServer(n).catch( () => {}
                );
                break;
            case "session/setSessionId":
                this._store.state.chat.textRecipient && this._store.commit("chat/setTextRecipient", "");
                break;
            case "chat/setUserChannel":
                this.followUser(n),
                this.leaveEmptyChannel(n);
                break;
            case "chat/setChannel":
                this.setChannel(n);
                break
            }
        }
        ),
        this._socket.handleMessage("chatServer", this.handleServerUpdate.bind(this)),
        this._socket.handleMessage("whisperRequest", this.handleWhisperRequest.bind(this)),
        this._socket.handleMessage("whisperRemove", this.handleWhisperRemove.bind(this)),
        this._socket.handleMessage("textMessage", this.handleTextMessage.bind(this)),
        this._socket.handleMessage("textMessageIndicator", this.handleTextMessageIndicator.bind(this))
    }
    async updateServer(s) {
        if (this._store.getters["user/isStoryteller"] && s)
            try {
                await this._socket.request("updateServer", s),
                this._store.commit("session/updateMeta", {
                    chatServer: s
                })
            } catch (t) {
                this._store.dispatch("showError", ["modals.dialogue.error.server_change", t])
            }
    }
    async handleServerUpdate(s, t) {
        t || (this._store.state.chat.servers.has(s.host) || this._store.commit("chat/updateServer", s),
        this._store.commit("session/updateMeta", {
            chatServer: s.host
        }))
    }
    sendWhisperRequest({id: s, channel: t, isInternal: n}) {
        var l;
        const {whisperFrom: o} = this._store.state.chat
          , i = t.split("-").shift();
        if (!n && s)
            if (this._socket.sendMessage("whisperRequest", t, s),
            i === ((l = o.get(s)) == null ? void 0 : l.split("-").shift())) {
                const g = i + "-" + Math.min(t.split("-").pop(), o.get(s).split("-").pop());
                this.initiateChat(s, g)
            } else
                this._whisperRequestTimers.set(s, setTimeout( () => this._store.commit("chat/removeWhisperTo", {
                    id: s
                }), this._whisperRequestTimeout))
    }
    async handleWhisperRequest(s, t) {
        var g, d, h;
        const {whisperFrom: n, whisperTo: o} = this._store.state.chat
          , {users: i} = this._store.state.session
          , l = s.split("-").shift();
        if (l === ((g = o.get(t)) == null ? void 0 : g.split("-").shift())) {
            const m = l + "-" + Math.min(s.split("-").pop(), o.get(t).split("-").pop());
            this.initiateChat(t, m),
            clearTimeout(this._whisperRequestTimers.get(t)),
            this._whisperRequestTimers.delete(t)
        } else if (n.get(t) !== s) {
            if (this._store.commit("chat/setWhisperFrom", {
                id: t,
                channel: s,
                isInternal: !0
            }),
            (!this._store.getters["game/isNight"] || this._store.state.settings.game.isNightRequestPing || this._store.getters["user/isStoryteller"]) && this._store.commit("playSound", "privateRequest"),
            (d = i.get(t)) != null && d.isOnline) {
                const m = ((h = i.get(t)) == null ? void 0 : h.username) + " has requested a private chat with you.";
                this._socket.showNotification(m).catch( () => {}
                )
            }
            this._store.commit("setTab", {
                tab: "chat",
                value: !0
            })
        }
    }
    initiateChat(s, t) {
        const {userChannels: n} = this._store.state.chat
          , {user: o} = this._store.state.user;
        if (this._store.commit("chat/removeWhisperFrom", {
            isInternal: !0
        }),
        n.get(o.id) === t) {
            this._store.commit("chat/removeWhisperTo", {
                id: s,
                isInternal: !0
            }),
            clearTimeout(this._whisperRequestTimers.get(s)),
            this._whisperRequestTimers.delete(s);
            return
        }
        this._store.commit("chat/removeWhisperTo", {
            isInternal: !0
        }),
        !(this._store.getters["game/isNight"] && !this._store.getters["players/storytellerMap"].has(s) && !this._store.getters["user/isStoryteller"]) && (this._store.state.chat.following && this._store.commit("chat/setFollowing", ""),
        this._store.commit("chat/setChannel", t),
        this._store.commit("setTab", {
            tab: "chat",
            value: !0
        }))
    }
    sendWhisperRemove({id: s, isInternal: t}={}) {
        if (!t) {
            if (s)
                this._socket.sendMessage("whisperRemove", null, s),
                clearTimeout(this._whisperRequestTimers.get(s)),
                this._whisperRequestTimers.delete(s);
            else if (this._whisperRequestTimers.size) {
                const n = [];
                this._whisperRequestTimers.forEach( (o, i) => {
                    n.push(["whisperRemove", null, i]),
                    clearTimeout(o)
                }
                ),
                this._socket.sendMessages(n),
                this._whisperRequestTimers = new Map
            }
        }
    }
    handleWhisperRemove(s, t) {
        const {whisperFrom: n, whisperTo: o} = this._store.state.chat;
        o.has(t) && (this._store.commit("chat/removeWhisperTo", {
            id: t,
            isInternal: !0
        }),
        clearTimeout(this._whisperRequestTimers.get(t)),
        this._whisperRequestTimers.delete(t)),
        n.has(t) && this._store.commit("chat/removeWhisperFrom", {
            id: t,
            isInternal: !0
        })
    }
    sendTextMessage({message: s, recipientId: t, senderId: n}) {
        const {user: o} = this._store.state.user
          , {players: i} = this._store.state.players
          , l = this._store.getters["players/storytellerMap"]
          , g = this._store.getters["user/isSpectator"]
          , d = this._store.getters["user/isModerator"];
        if (n === o.id)
            if (t && t !== "spectator") {
                if (g && !d && !l.has(t))
                    return;
                const h = [["textMessage", {
                    message: s.substring(0, 250),
                    recipientId: t
                }, [t, "storyteller"]]]
                  , m = i.findIndex(f => f.id === o.id)
                  , p = i.findIndex(f => f.id === t);
                if (m > -1 && p > -1 && Math.abs(m - p) % (i.length - 2) === 1) {
                    const f = Math.min(s.length, 250);
                    h.push(["textMessageIndicator", {
                        recipientId: t,
                        length: f
                    }]),
                    this.handleTextMessageIndicator({
                        recipientId: t,
                        length: f
                    }, o.id)
                }
                this._socket.sendMessages(h)
            } else
                this._socket.sendMessage("textMessage", {
                    message: s.substring(0, 250),
                    recipientId: t
                }, (!d && g || t === "spectator") && "spectator")
    }
    handleTextMessage({message: s="", recipientId: t="", isHidden: n}, o) {
        var d;
        const {user: i} = this._store.state.user
          , l = this._store.getters["players/seatedPlayerMap"]
          , g = this._store.getters["players/storytellerMap"];
        if (!(!l.has(o) && !g.has(i.id) && l.has(i.id) && !["special-tpi", "special-moderator"].includes((d = this._store.state.session.users.get(o)) == null ? void 0 : d.level)))
            return this._store.dispatch("chat/textMessage", {
                message: s == null ? void 0 : s.substring(0, 250),
                senderId: o,
                isHidden: n,
                recipientId: t
            })
    }
    handleTextMessageIndicator({recipientId: s="", length: t=0}, n) {
        const o = n + String(Date.now()).substring(9) + this._store.state.chat.textMessageIndicators.length;
        this._store.commit("chat/addTextMessageIndicator", {
            msgId: o,
            senderId: n,
            length: Math.max(1, Math.min(t, 250)),
            recipientId: s
        }),
        setTimeout( () => this._store.commit("chat/removeTextMessageIndicator", o), 4e3)
    }
    returnToTown() {
        const {chat: s, grimoire: t} = this._store.state;
        s.channel && this._store.commit("chat/setChannel", "");
        const n = {
            id: "",
            isInternal: !0
        };
        Object.values(this._whisperRequestTimers).forEach(o => clearTimeout(o)),
        this._whisperRequestTimers = new Map,
        s.whisperTo.size && this._store.commit("chat/removeWhisperTo", n),
        s.whisperFrom.size && this._store.commit("chat/removeWhisperFrom", n),
        t.tabs.chat && this._store.commit("setTab", {
            tab: "chat"
        })
    }
    followUser({userId: s, value: t}) {
        const {following: n} = this._store.state.chat;
        if (s === n) {
            if (!this._store.getters["user/hasGrimoireAccess"] || !this._store.getters["players/seatedPlayerMap"].has(s)) {
                n && this._store.commit("chat/setFollowing", "");
                return
            }
            this._store.commit("chat/setChannel", t)
        }
    }
    leaveEmptyChannel() {
        if (!this._store.getters["user/isSpectator"])
            return;
        const {channel: s, userChannels: t} = this._store.state.chat
          , {id: n} = this._store.state.user.user;
        if (this._store.getters["chat/isPrivateChat"](s) && ![...t].some( ([o,i]) => o !== n && i === s)) {
            if (this._leaveChannelTimer)
                return;
            this._leaveChannelTimer = setTimeout( () => {
                this._leaveChannelTimer = null,
                this._store.commit("chat/setChannel", "")
            }
            , 5e3)
        }
    }
    setChannel(s) {
        clearTimeout(this._leaveChannelTimer),
        this._leaveChannelTimer = null,
        this._store.getters["chat/isPrivateChat"](this._prevChannel) && !s && (this._store.state.chat.whisperTo.size && this._store.commit("chat/removeWhisperTo"),
        this._store.state.chat.whisperFrom.size && !this._store.getters["user/isStoryteller"] && this._store.commit("chat/removeWhisperFrom")),
        this._prevChannel = s
    }
}
class kE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            var o;
            if (!(n != null && n.isInternal))
                switch (t) {
                case "players/addStoryteller":
                    this.addStoryteller(n).catch( () => {}
                    );
                    break;
                case "players/removeStoryteller":
                    this.removeStoryteller(n).catch( () => {}
                    );
                    break;
                case "players/updateStoryteller":
                    this.updateStoryteller(n).catch( () => {}
                    );
                    break;
                case "players/requestStoryteller":
                    n && this.requestStoryteller(n);
                    break;
                case "session/updateUser":
                    ((o = this._store.state.modal.params) == null ? void 0 : o.storytellerId) === n.id && n.isOnline === !1 && this._store.commit("toggleModal");
                    break
                }
        }
        , {
            prepend: !0
        }),
        this._socket.handleMessage("removeStoryteller", this.handleSTRemove.bind(this)),
        this._socket.handleMessage("addStoryteller", this.handleSTAdd.bind(this)),
        this._socket.handleMessage("updateStoryteller", this.handleSTUpdate.bind(this)),
        this._socket.handleMessage("requestStoryteller", this.handleSTRequest.bind(this)),
        this._socket.handleMessage("respondStoryteller", this.handleSTResponse.bind(this)),
        this._socket.handleMessage("gamestateST", this.handleStorytellerGamestate.bind(this))
    }
    async addStoryteller({id: s}) {
        const {storytellers: t} = this._store.state.players;
        if (!(t.length && !this._store.getters["user/isStoryteller"] && !this._store.getters["user/isModerator"]))
            try {
                await this._socket.request("addStoryteller", {
                    id: s
                }),
                this.sendStorytellerGamestate({
                    id: s
                }),
                await this._store.dispatch("chat/textMessage", {
                    isSystem: !0,
                    senderId: "",
                    message: {
                        type: "storyteller_add",
                        data: s
                    }
                })
            } catch (n) {
                await this._store.dispatch("showError", ["modals.dialogue.error.add_storyteller", n.replace(/^Validation error:/i, "")])
            }
    }
    async handleSTAdd(s, t) {
        if (t)
            return;
        const {user: n} = this._store.state.user
          , {following: o} = this._store.state.chat
          , i = this._store.getters["players/storytellerMap"];
        s.isInternal = !0,
        this._store.commit("players/addStoryteller", s),
        this.sendStorytellerGamestate(s),
        s.id === n.id && i.has(o) && this._store.commit("chat/setFollowing", ""),
        await this._store.dispatch("chat/textMessage", {
            isSystem: !0,
            senderId: "",
            message: {
                type: "storyteller_add",
                data: s.id
            }
        })
    }
    requestStoryteller({id: s}) {
        !this._store.getters["user/isStoryteller"] && !this._store.getters["user/isModerator"] || this._socket.sendMessage("requestStoryteller", this._store.state.players.storytellerRequests.includes(s), s)
    }
    async handleSTRequest(s, t) {
        var n;
        if (!(!this._store.getters["players/storytellerMap"].has(t) && !this._store.getters["user/isModerator"]))
            if (s) {
                let o = !1;
                try {
                    o = await this._store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "modals.dialogue.prompt.storyteller_title",
                        text: "modals.dialogue.prompt.storyteller_text",
                        storytellerId: t
                    })
                } catch {} finally {
                    this._socket.sendMessage("respondStoryteller", o, t)
                }
            } else
                (n = this._store.state.modal.params) != null && n.storytellerId && this._store.commit("toggleModal")
    }
    async handleSTResponse(s, t) {
        !this._store.getters["user/isStoryteller"] && !this._store.getters["user/isModerator"] || this._store.state.players.storytellerRequests.includes(t) && (s ? (this._store.commit("players/addStoryteller", {
            id: t
        }),
        await this._store.dispatch("chat/textMessage", {
            isSystem: !0,
            senderId: "",
            message: {
                type: "storyteller_add",
                data: t
            }
        })) : this._store.commit("players/requestStoryteller", {
            id: t,
            isInternal: !0
        }))
    }
    async removeStoryteller({id: s}) {
        const t = this._store.state.user.user.id;
        if (!(s !== t && !this._store.getters["user/isStoryteller"] && !this._store.getters["user/isModerator"]))
            try {
                await this._socket.request("removeStoryteller", {
                    id: s
                }),
                await this._store.dispatch("chat/textMessage", {
                    isSystem: !0,
                    senderId: "",
                    message: {
                        type: "storyteller_remove",
                        data: s
                    }
                })
            } catch (n) {
                this._store.dispatch("showError", ["modals.dialogue.error.remove_storyteller", n])
            }
    }
    async handleSTRemove(s) {
        s.isInternal = !0,
        this._store.commit("players/removeStoryteller", s),
        await this._store.dispatch("chat/textMessage", {
            isSystem: !0,
            senderId: "",
            message: {
                type: "storyteller_remove",
                data: s.id
            }
        })
    }
    async updateStoryteller({storyteller: s, property: t, value: n}) {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const o = ["role", "alignment", "reminders"]
          , {id: i} = s;
        try {
            o.includes(t) && await this._socket.request("updateStoryteller", {
                id: i,
                property: t,
                value: t === "role" ? n.id || null : n
            })
        } catch (l) {
            this._store.dispatch("showError", ["modals.dialogue.error.update_storyteller", l])
        }
    }
    handleSTUpdate({id: s, property: t, value: n}, o) {
        if (o)
            return;
        const i = this._store.getters["players/storytellerMap"].get(s)
          , l = !0;
        if (i)
            if (t === "role") {
                const g = this._store.state.roles.get(n) || this._store.state.rolesAvailable.get(n) || {};
                this._store.commit("players/updateStoryteller", {
                    storyteller: i,
                    property: "role",
                    value: g,
                    isInternal: l
                }),
                i.alignment && this._store.commit("players/updateStoryteller", {
                    storyteller: i,
                    property: "alignment",
                    value: null,
                    isInternal: l
                })
            } else
                this._store.commit("players/updateStoryteller", {
                    storyteller: i,
                    property: t,
                    value: n,
                    isInternal: l
                })
    }
    sendStorytellerGamestate({id: s}={}) {
        if (!s || !this._store.getters["user/isStoryteller"])
            return;
        const t = this._store.state.user.user.id;
        if (t === s)
            return;
        if (this._store.state.players.storytellers.find(o => {
            var i;
            return ((i = this._store.state.session.users.get(o == null ? void 0 : o.id)) == null ? void 0 : i.isOnline) && (o == null ? void 0 : o.id) !== s
        }
        ).id === t && s !== t) {
            const o = this._store.state.rolesSelected;
            this._socket.sendMessage("gamestateST", {
                rolesSelected: o
            }, s)
        }
    }
    handleStorytellerGamestate(s, t) {
        const n = this._store.getters["players/storytellerMap"];
        if (t && !n.has(t) || !this._store.getters["user/isStoryteller"])
            return;
        const {rolesSelected: o} = s;
        o && this._store.commit("setRolesSelected", o)
    }
}
class CE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            if (t === "game/setPhase" && this._store.getters["game/isNight"] && this.clearMarked(),
            t === "players/removeStoryteller" && (n == null ? void 0 : n.id) === this._store.state.user.user.id && this._store.state.vote.voteTimer && this._store.commit("vote/setVoteTimer", "paused"),
            t === "players/setNPC" && this._store.getters["user/isStoryteller"]) {
                const {players: o, vote: i} = this._store.state
                  , l = o.npcs.some(d => d.id === "bigwig")
                  , g = i.nominationType === "bigwig";
                l !== g && this._store.commit("vote/setNominationType", {
                    value: l ? "bigwig" : "regular",
                    isInternal: n == null ? void 0 : n.isInternal
                })
            }
            if ((t === "vote/nomination" || t === "vote/setNomination" || t === "vote/setSelectedPlayer" || t === "vote/toggleVoteInProgress" || t === "vote/lockVote" && (n <= 0 || (n == null ? void 0 : n.value) <= 0) || t === "players/addStoryteller" && (n != null && n.id) || t === "players/updatePlayer" && (n == null ? void 0 : n.property) === "id" && (n != null && n.value)) && this.adjustVoteVolume(),
            !(n != null && n.isInternal))
                switch (t) {
                case "vote/nomination":
                case "vote/setNomination":
                    this.nomination(n);
                    break;
                case "vote/toggleIsHidden":
                    this.toggleIsHidden();
                    break;
                case "vote/setHighscore":
                    this.setHighscore(n);
                    break;
                case "vote/setNominationType":
                    this.setNominationType(n);
                    break;
                case "vote/setSelectedPlayer":
                    this.setSelectedPlayer(n);
                    break;
                case "vote/toggleVoteInProgress":
                    this.setVoteInProgress(n);
                    break;
                case "vote/castVote":
                    this.castVote(n);
                    break;
                case "vote/lockVote":
                    this.lockVote();
                    break;
                case "session/setSessionId":
                    n || this._store.commit("vote/nomination", {
                        isInternal: !0
                    })
                }
        }
        ),
        this._store.subscribeAction( ({type: t, payload: n}) => {
            t === "vote/setMarkedPlayer" && !(n != null && n.isInternal) && this.setMarked()
        }
        ),
        this._socket.handleMessage("nomination", this.handleNomination.bind(this)),
        this._socket.handleMessage("voteInProgress", this.handleVoteInProgress.bind(this)),
        this._socket.handleMessage("voteIsHidden", this.handleIsHidden.bind(this)),
        this._socket.handleMessage("vote", this.handleVote.bind(this)),
        this._socket.handleMessage("lock", this.handleLock.bind(this)),
        this._socket.handleMessage("marked", this.handleMarked.bind(this)),
        this._socket.handleMessage("voteHighscore", this.handleHighscore.bind(this)),
        this._socket.handleMessage("nominationType", this.handleType.bind(this)),
        this._socket.handleMessage("selectedPlayer", this.handleSelectedPlayer.bind(this))
    }
    nomination() {
        var o;
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {vote: s, players: {players: t, storytellers: n}} = this._store.state;
        s.nomination && (t.length <= s.nomination[0] || t.length <= s.nomination[1]) || (this._socket.sendMessage("nomination", this._store.getters["vote/nomination"]),
        [...t, ...n].some( ({role: i, isDead: l, reminders: g}) => {
            var d;
            return ((d = i.special) == null ? void 0 : d.some(h => h.type === "vote" && h.name === "hidden")) && !g.some( ({name: h}) => h.match(/^drunk|poisoned$/i)) && (!l || g.some( ({name: h}) => h.match(/^has ability$/i)))
        }
        ) && s.nomination && ((o = t[s.nomination[1]]) == null ? void 0 : o.role.team) !== "traveller" && this._store.commit("vote/toggleIsHidden", !0))
    }
    handleNomination(s, t) {
        this._store.getters["players/storytellerMap"].has(t) && (s.nomination || this._store.dispatch("vote/addLogEntry"),
        s.isInternal = !0,
        this._store.commit("vote/nomination", s))
    }
    toggleIsHidden() {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {isHidden: s} = this._store.state.vote;
        this._socket.sendMessage("voteIsHidden", s, "storyteller")
    }
    handleIsHidden(s) {
        this._store.commit("vote/toggleIsHidden", {
            value: s,
            isInternal: !0
        })
    }
    setHighscore(s) {
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("voteHighscore", s)
    }
    handleHighscore(s) {
        this._store.commit("vote/setHighscore", {
            value: s,
            isInternal: !0
        })
    }
    setNominationType(s) {
        var t;
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("nominationType", (t = s == null ? void 0 : s.value) != null ? t : s)
    }
    handleType(s) {
        this._store.commit("vote/setNominationType", {
            value: s,
            isInternal: !0
        })
    }
    setSelectedPlayer(s) {
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("selectedPlayer", s)
    }
    handleSelectedPlayer(s) {
        this._store.commit("vote/setSelectedPlayer", {
            value: s,
            isInternal: !0
        })
    }
    setVoteInProgress(s) {
        if (!this._store.state.vote.nomination || !this._store.getters["user/isStoryteller"])
            return;
        const {isHidden: t, locked: n, speed: o} = this._store.state.vote;
        this._socket.sendMessage("voteInProgress", [s, s || n > 0 ? t : !1, o])
    }
    handleVoteInProgress([s,t,n], o) {
        if (this._store.state.vote.nomination && this._store.getters["players/storytellerMap"].has(o)) {
            if (s && this._store.state.vote.isInProgress && this._store.getters["user/isStoryteller"]) {
                const {storytellers: i} = this._store.state.players
                  , {user: l} = this._store.state.user;
                i.findIndex(g => g.id === o) < i.findIndex(g => g.id === l.id) && this._store.commit("vote/setVoteTimer")
            }
            this._store.commit("vote/setVotingSpeed", {
                value: n,
                isInternal: !0
            }),
            this._store.commit("vote/toggleIsHidden", {
                value: t,
                isInternal: !0
            }),
            this._store.commit("vote/toggleVoteInProgress", {
                value: s,
                isInternal: !0
            })
        }
    }
    castVote({index: s, isInternal: t}) {
        const {players: {players: n}, user: o, vote: i} = this._store.state;
        if (t || this._store.getters["user/isStoryteller"])
            return;
        const l = i.isHidden ? ["storyteller"] : [];
        o.user.id === n[s].id && this._socket.sendMessage("vote", [s, i.votes[s]], l)
    }
    handleVote([s,t], n) {
        const {vote: o, players: {players: i}} = this._store.state;
        if (!i[s])
            return;
        const l = i.length
          , g = i[s].id === n
          , d = this._store.getters["players/storytellerMap"].has(n)
          , h = (s - 1 + l - o.nomination[1]) % l;
        (d || g && h >= o.locked - 1) && this._store.commit("vote/castVote", {
            index: s,
            value: t,
            isInternal: !0
        })
    }
    lockVote() {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {locked: s, votes: t, nomination: n, isHidden: o} = this._store.state.vote
          , {players: i, npcs: l} = this._store.state.players
          , g = this._store.getters.filterAbilities
          , d = (n[1] + s - 1) % i.length
          , h = i[d]
          , m = i[n[1]];
        if (s < 2)
            this._socket.sendMessage("lock", [s]);
        else {
            const p = (h == null ? void 0 : h.role.id) === "banshee" && (h == null ? void 0 : h.reminders.some(w => w.role === "banshee")) && !(h != null && h.reminders.some(w => w.name.match(/drunk|poisoned/i))) && (h == null ? void 0 : h.isDead)
              , f = i.some(w => (w == null ? void 0 : w.role.id) === "voudon" && !w.isDead);
            let P = t[d] ? 1 : 0;
            if (m.role.team !== "traveller") {
                p ? P = t[d] === 2 ? 2 : P : h != null && h.isDead && (h != null && h.isVoteless) && !f && (P = 0);
                const w = [...i, ...l.map(B => ({
                    role: B
                }))].map(B => g(B, "vote")).flat();
                h == null || h.reminders.forEach( ({role: B}) => {
                    const j = w.find(V => V.role.id === B);
                    j && j.ability.name === "multiplier" && (P *= j.ability.value)
                }
                )
            }
            P !== t[d] && this._store.commit("vote/castVote", {
                index: d,
                value: P,
                isInternal: !0
            }),
            m.role.team !== "traveller" && (h != null && h.isDead) && !(h != null && h.isVoteless) && P !== 0 && !o && !f && !p && (this._store.commit("players/updatePlayer", {
                player: h,
                property: "isVoteless",
                value: !0
            }),
            this._store.dispatch("game/addHistory", {
                data: h.id || i.indexOf(h) + 1,
                type: "vote"
            }).catch( () => {}
            )),
            o ? this._socket.sendMessages([["lock", [s, null], ["user", "-storyteller"]], ["lock", [s, P], "storyteller"]]) : this._socket.sendMessage("lock", [s, P])
        }
    }
    handleLock([s,t], n) {
        if (this._store.state.vote.nomination && this._store.getters["players/storytellerMap"].has(n) && (this._store.commit("vote/lockVote", {
            value: s,
            isInternal: !0
        }),
        s > 1 && t !== null)) {
            const {locked: o, nomination: i, votes: l} = this._store.state.vote
              , {players: g} = this._store.state.players
              , d = (i[1] + o - 1) % g.length;
            l[d] !== t && this._store.commit("vote/castVote", {
                index: d,
                value: t,
                isInternal: !0
            })
        }
    }
    setMarked() {
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("marked")
    }
    handleMarked() {
        this._store.dispatch("vote/setMarkedPlayer", {
            isInternal: !0
        }).catch( () => {}
        )
    }
    clearMarked() {
        this._store.commit("vote/setMarkedPlayer", -1),
        this._store.commit("vote/setHighscore", {
            isInternal: !0,
            value: 0
        })
    }
    _setPlayerVolumes(s, t=[]) {
        const {players: n, chat: o} = this._store.state
          , i = "vote";
        n.players.forEach( (l, g) => {
            var h, m, p;
            const d = t.includes(g) ? 1 : s;
            l.id && (d === 1 && ((h = o.audio.volumes.get(l.id)) == null ? void 0 : h[i]) !== void 0 ? this._store.commit("chat/setVolume", {
                userId: l.id,
                type: i
            }) : ((p = (m = o.audio.volumes.get(l.id)) == null ? void 0 : m[i]) != null ? p : 1) !== d && this._store.commit("chat/setVolume", {
                userId: l.id,
                type: i,
                value: d
            }))
        }
        )
    }
    adjustVoteVolume() {
        const {nominationType: s, nomination: t, locked: n, selectedPlayer: o, isInProgress: i} = this._store.state.vote
          , {players: l, chat: g} = this._store.state
          , d = "vote";
        if (t && s === "focus")
            this._setPlayerVolumes(.5, [t[1]]);
        else if (t && s === "phases" && n < -1) {
            const h = n === -3 ? t[0] : t[1];
            this._setPlayerVolumes(0, [h])
        } else if (t && s === "bigwig" && n <= 0 && !i) {
            const h = o === -1 ? t[1] : o;
            this._setPlayerVolumes(0, [h])
        } else
            this._setPlayerVolumes(1);
        l.storytellers.forEach(h => {
            var m;
            ((m = g.audio.volumes.get(h.id)) == null ? void 0 : m[d]) !== void 0 && this._store.commit("chat/setVolume", {
                userId: h.id,
                type: d
            })
        }
        )
    }
}
class SE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            if (!(n != null && n.isInternal))
                switch (t) {
                case "settings/toggleHiddenPrivateCams":
                    this.togglePrivateCams();
                    break;
                case "session/toggleWhispers":
                    this.toggleWhispers();
                    break;
                case "session/updateMeta":
                    this.updateMeta(n).catch( () => {}
                    );
                    break
                }
        }
        ),
        this._socket.handleMessage("privatecams", this.handlePrivateCams.bind(this)),
        this._socket.handleMessage("whispers", this.handleWhispers.bind(this)),
        this._socket.handleMessage("metaUpdate", this.handleMetaUpdate.bind(this))
    }
    async updateMeta(s={}) {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const t = ["isPublic", "language", "tags"]
          , n = {};
        if (Object.keys(s).forEach(o => {
            t.includes(o) && (n[o] = s[o])
        }
        ),
        !!Object.keys(n).length)
            try {
                await this._socket.request("updateMeta", n)
            } catch (o) {
                this._store.dispatch("showError", ["modals.dialogue.error.update_game", o])
            }
    }
    handleMetaUpdate(s, t) {
        t || (s.isInternal = !0,
        this._store.commit("session/updateMeta", s))
    }
    togglePrivateCams() {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {hasHiddenPrivateCams: s} = this._store.state.settings.advanced;
        this._socket.sendMessage("privatecams", s)
    }
    handlePrivateCams(s) {
        this._store.commit("settings/toggleHiddenPrivateCams", {
            value: s,
            isInternal: !0
        })
    }
    toggleWhispers() {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {isWhispersDisabled: s} = this._store.state.session;
        this._socket.sendMessage("whispers", s)
    }
    handleWhispers(s) {
        this._store.commit("session/toggleWhispers", {
            value: s,
            isInternal: !0
        })
    }
}
class PE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            if (!(n && n.isInternal))
                switch (t) {
                case "game/setPhase":
                case "game/addHistory":
                case "game/removeHistory":
                    this.sendHistory(t, n).catch( () => {}
                    );
                    break;
                case "game/toggleRunning":
                    this.toggleRunning().catch( () => {}
                    );
                    break
                }
        }
        ),
        this._socket.handleMessage("historyAdd", this.handleHistory.bind(this, "add")),
        this._socket.handleMessage("historyRemove", this.handleHistory.bind(this, "remove")),
        this._socket.handleMessage("historyPhase", this.handleHistory.bind(this, "phase")),
        this._socket.handleMessage("historySet", this.handleHistory.bind(this, "set"))
    }
    async sendHistory(s, t) {
        if (this._store.getters["user/isStoryteller"] && !t.isInternal)
            try {
                let n = t;
                if (s === "game/addHistory") {
                    const {history: o} = this._store.state.game;
                    n = o[o.length - 1]
                } else
                    s === "game/removeHistory" && (n = {
                        id: t.id
                    });
                await this._socket.request("history", {
                    type: s,
                    payload: n
                })
            } catch (n) {
                X(n),
                this._store.dispatch("showError", ["modals.dialogue.error.update", n])
            }
    }
    handleHistory(s, t, n) {
        if (n)
            return;
        t.isInternal = !0;
        const {phase: o, history: i} = this._store.state.game;
        if (s === "add") {
            if (i.length && t.type === "phase" && i[i.length - 1].type === "phase" && i[i.length - 1].data === t.data)
                return;
            this._store.dispatch("game/addHistory", t)
        } else if (s === "remove")
            this._store.commit("game/removeHistory", t);
        else if (s === "phase") {
            if (t.phase === o)
                return;
            this._store.commit("game/setPhase", t)
        } else
            s === "set" && this._store.dispatch("game/setHistory", t)
    }
    async toggleRunning() {
        if (this._store.getters["user/isStoryteller"])
            try {
                await this._socket.request("toggleRunning", this._store.state.game.isRunning)
            } catch (s) {
                X(s),
                this._store.dispatch("showError", ["modals.dialogue.error.running", s])
            }
    }
}
class TE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            t === "setGrimoireMode" && n !== "pointing" && this._store.state.session.isPointing && (this._store.commit("session/setPointingState", !1),
            this._store.state.session.recipients.length && this._store.commit("session/setRecipients", [])),
            t === "session/setPointingState" && this.sendPointing(n),
            t === "session/pointAtPlayer" && this.sendPoint(n)
        }
        ),
        this._socket.handleMessage("pointing", this.handlePointing.bind(this)),
        this._socket.handleMessage("point", this.handlePoint.bind(this))
    }
    sendPointing(s) {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {recipients: t, pointers: n} = this._store.state.session;
        this._socket.sendMessage("pointing", {
            isPointing: s,
            pointers: n,
            recipients: t
        }, t)
    }
    handlePointing(s) {
        this._store.commit("session/setPointing", s);
        const t = s.isPointing ? "pointing" : "grimoire";
        this._store.state.grimoire.mode !== t && this._store.commit("setGrimoireMode", t)
    }
    sendPoint({index: s, playerIndex: t}) {
        const {players: n, user: o} = this._store.state
          , {recipients: i} = this._store.state.session;
        n.players[s].id === o.user.id && this._socket.sendMessage("point", t, i)
    }
    handlePoint(s, t) {
        const {players: n} = this._store.state.players
          , {isPointing: o} = this._store.state.session
          , i = this._store.getters["players/seatedPlayerMap"].get(t);
        !n.includes(i) || !o || o === "locked" || this._store.commit("session/pointAtPlayer", {
            index: n.indexOf(i),
            playerIndex: s
        })
    }
}
class IE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            if (t === "session/raiseHand")
                this.raiseHand(n);
            else if (t === "vote/nomination" && this._store.state.vote.nomination)
                this._store.commit("session/setRaisedHands", new Map);
            else if (t === "setEdition") {
                const o = this._store.state.user.user.id;
                this._store.state.session.handIcon.match(/^r-/i) && (this._store.commit("session/setHandIcon", "i-hand"),
                this._store.state.session.raisedHands.has(o) && this._store.commit("session/raiseHand", {
                    userId: o
                }))
            }
        }
        ),
        this._socket.handleMessage("raise-hand", this.handleRaiseHand.bind(this))
    }
    raiseHand({userId: s}) {
        if (this._store.state.user.user.id !== s)
            return;
        const {raisedHands: t} = this._store.state.session;
        this._socket.sendMessage("raise-hand", t.get(s))
    }
    handleRaiseHand(s, t) {
        var l, g;
        if (this._store.state.user.user.id === t)
            return;
        const n = [null, "i-hand", "i-hand-fist", "i-hand-peace", "i-thumbs-up", "i-thumbs-down"]
          , o = this._store.state.session.users.get(t)
          , i = n.concat(((l = o == null ? void 0 : o.cosmetics) == null ? void 0 : l.emotes) || []);
        (g = o == null ? void 0 : o.flags) != null && g.includes("powerful") && (i.push("i-hand-spock", "i-hand-lizard", "i-hand-middle-finger", "i-face-smile", "i-face-frown"),
        this._store.state.roles.forEach(d => i.push("r-" + d.id))),
        i.includes(s) && this._store.commit("session/raiseHand", {
            userId: t,
            value: s
        })
    }
}
class ME {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            n != null && n.isInternal || t === "players/setBluff" && this.sendBluffs()
        }
        ),
        this._socket.handleMessage("bluffs", this.handleBluffs.bind(this))
    }
    async sendBluffs() {
        if (this._store.getters["user/isStoryteller"])
            try {
                const {bluffs: s} = this._store.state.players;
                await this._socket.request("bluffs", s.map(t => t.isCustom ? t : {
                    id: t.id
                }))
            } catch (s) {
                await this._store.dispatch("showError", ["modals.dialogue.error.bluffs", s])
            }
    }
    handleBluffs(s) {
        this._store.state.positions.bluffs || this._store.commit("setTab", {
            tab: "bluffs",
            value: !0
        }),
        this._store.dispatch("players/setBluffs", s)
    }
}
class RE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            switch (t) {
            case "session/setTimer":
                if (n != null && n.isInternal)
                    return;
                this.setTimer();
                break;
            case "vote/nomination":
                this.pauseTimer();
                break
            }
        }
        ),
        this._socket.handleMessage("timer", this.handleTimer.bind(this))
    }
    setTimer() {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {title: s, expiration: t, isPausedDuringVotes: n, paused: o} = this._store.state.session.timer;
        this._socket.sendMessage("timer", {
            title: s,
            duration: t - Date.now(),
            isPausedDuringVotes: n,
            paused: o
        })
    }
    handleTimer(s={}) {
        const {title: t, duration: n, isPausedDuringVotes: o, paused: i} = s
          , l = Date.now() + n - this._store.state.session.ping;
        this._store.commit("session/setTimer", {
            title: t,
            expiration: l,
            isPausedDuringVotes: o,
            paused: i,
            isInternal: !0
        })
    }
    pauseTimer() {
        const {expiration: s, paused: t, isPausedDuringVotes: n, title: o} = this._store.state.session.timer;
        if (n && !(!t && s < Date.now())) {
            if (this._store.state.vote.nomination && !t)
                this._store.commit("session/setTimerPaused", Date.now());
            else if (!this._store.state.vote.nomination && t) {
                const i = Date.now() - t;
                this._store.commit("session/setTimer", {
                    expiration: s + i,
                    title: o,
                    isInternal: !0
                }),
                this._store.commit("session/setTimerPaused", 0)
            }
        }
    }
}
class DE {
    constructor(s) {
        this._store = s;
        const t = {
            production: "wss://botc.app/"
        };
        this._url = t.production,
        this._socket = null,
        this._listeners = [],
        this._isRequesting = !1,
        this._requestQueue = [],
        this._gamestateTimeout = null,
        window.__TAURI__ && tu(iu.WINDOW_CLOSE_REQUESTED, () => {
            this.disconnect()
        }
        ).catch( () => {}
        ),
        W.afterEach( (n, o) => {
            const {sessionId: i} = this._store.state.session;
            o.name === "Grimoire" && n.name !== "Grimoire" && i ? this.disconnect() : o.name !== "Grimoire" && n.name === "Grimoire" && i && this.connect()
        }
        ),
        s.subscribe( ({type: n, payload: o}) => {
            if (W.currentRoute.value.name !== "Grimoire")
                return;
            const {loadingState: i} = this._store.state.grimoire;
            switch (n) {
            case "session/setSessionId":
                (!i || i === "session") && (o ? this.connect() : (window.location.hash = "",
                this.disconnect()));
                break;
            case "setLoadingState":
                if (o !== "game" && clearTimeout(this._gamestateTimeout),
                !o || o === "session") {
                    const {sessionId: l, isConnected: g} = this._store.state.session;
                    l && !g ? this.connect() : !l && g && this.disconnect()
                }
                break
            }
        }
        )
    }
    connect() {
        if (!this._store.state.user.accessToken)
            return;
        this.disconnect(),
        this._store.commit("setLoadingState", "game"),
        this._store.commit("vote/clearHistory"),
        this._store.commit("setGrimoireMode", "grimoire"),
        this._gamestateTimeout = setTimeout( () => {
            this.disconnect(),
            this._store.dispatch("openDialogue", {
                type: "alert",
                title: "modals.dialogue.error.server_title",
                text: "modals.dialogue.error.server_text"
            }).catch( () => {}
            )
        }
        , 10 * 1e3);
        const {sessionId: s} = this._store.state.session;
        this._socket = ml(this._url + encodeURIComponent(s), {
            path: "/backend/socket/",
            auth: t => t({
                token: this._store.state.user.accessToken
            })
        }),
        this._socket.on("connect", this._onConnect.bind(this)),
        this._socket.on("disconnect", this._onDisconnect.bind(this)),
        this._socket.on("error", this._onError.bind(this)),
        this._socket.on("connect_error", this._onConnectionError.bind(this)),
        this._socket.io.on("reconnect_failed", () => {
            this._store.commit("session/toggleReconnecting", !1)
        }
        ),
        this._listeners.forEach( ([t,n]) => this._socket.on(t, n))
    }
    disconnect() {
        this._socket && (this._socket.offAny(),
        this._socket.disconnect(),
        this._socket = null),
        this._store.commit("session/setPing", 0),
        this._store.state.session.isReconnecting && (this._store.commit("session/toggleReconnecting", !1),
        this._onDisconnect("io client disconnect").catch( () => {}
        ))
    }
    async _onConnect() {
        this._store.state.session.isReconnecting && this._store.commit("session/toggleReconnecting", !1),
        this._store.commit("session/updateMeta"),
        this._store.commit("session/toggleConnected", !0),
        this._processQueue()
    }
    async _onDisconnect(s) {
        var n;
        const {session: t} = this._store.state;
        if (clearTimeout(this._gamestateTimeout),
        this._isRequesting = !1,
        t.isConnected && (this._store.commit("session/toggleConnected", !1),
        this._store.commit("session/setBoostExpires", 0),
        this._store.commit("user/removeNotification"),
        this._store.commit("session/updateMeta"),
        this._store.commit("players/requestStoryteller")),
        s !== "io server disconnect" && s !== "io client disconnect" && !((n = this._socket) != null && n.io.skipReconnect))
            s && s !== "transport close" && this._store.dispatch("openDialogue", {
                type: "alert",
                title: "modals.dialogue.error.server_title",
                text: ["modals.dialogue.error.server2_text", [s]]
            }).catch( () => {}
            ),
            this._store.commit("session/toggleReconnecting", !0);
        else {
            t.sessionId && this._store.commit("session/setSessionId", "");
            const {name: o} = W.currentRoute.value;
            o === "Grimoire" && await W.replace({
                name: "Lobby"
            }),
            this._store.commit("session/setUsers", []),
            this._store.commit("chat/removeTextMessage"),
            this._store.commit("session/setHook", {
                name: "",
                isInternal: !0
            }),
            this._store.state.grimoire.loadingState === "game" && this._store.commit("setLoadingState", ""),
            this._store.dispatch("user/refresh")
        }
    }
    _onError({type: s, message: t}) {
        s === "disconnect" && this.disconnect(),
        this._isRequesting = !1,
        this._store.dispatch("openDialogue", {
            type: "alert",
            title: "modals.dialogue.error.generic",
            text: t
        }).catch( () => {}
        )
    }
    _onConnectionError({message: s}) {
        if (!this._store.state.session.isReconnecting) {
            const t = s === "xhr poll error" ? "modals.dialogue.error.offline" : s;
            this._store.dispatch("openDialogue", {
                type: "alert",
                title: "modals.dialogue.error.connection",
                text: t
            }).catch( () => {}
            )
        }
        return this._onDisconnect()
    }
    sendMessage(s, t=null, n=[]) {
        if (!(!this._socket || this._socket.disconnected))
            if (n && (n != null && n.length)) {
                const o = Array.isArray(n) ? n : [n];
                o.length && this._socket.emit("message", s, t, o)
            } else
                this._socket.emit("message", s, t)
    }
    sendMessages(s) {
        if (!this._socket || this._socket.disconnected)
            return;
        const t = s.filter(n => {
            const [,,o] = n;
            return o ? (Array.isArray(o) ? o : [o]).length : !0
        }
        );
        t.length && this._socket.emit("messages", t)
    }
    request(s, t) {
        return this._store.state.session.sessionId ? new Promise( (n, o) => {
            this._requestQueue.push({
                type: s,
                data: t,
                resolve: n,
                reject: o
            }),
            this._processQueue()
        }
        ) : Promise.resolve()
    }
    _processQueue() {
        if (this._isRequesting || !this._requestQueue.length)
            return;
        this._isRequesting = !0;
        const {type: s, data: t, resolve: n, reject: o} = this._requestQueue.shift();
        try {
            !this._socket || this._socket.disconnected ? (this._isRequesting = !1,
            o("Session disconnected"),
            this._processQueue()) : this._socket.emit(s, t, (i, l) => {
                this._isRequesting = !1,
                i ? o(i) : n(l),
                this._processQueue()
            }
            )
        } catch (i) {
            o(i),
            this._isRequesting = !1,
            this._processQueue()
        }
    }
    handleMessage(s, t) {
        this._listeners.push([s, t]),
        this._socket && this._socket.on(s, t)
    }
    async showNotification(s) {
        if ("Notification"in window) {
            let t = Notification.permission;
            if (t !== "denied" && t !== "granted" && (t = await Notification.requestPermission()),
            t === "granted") {
                const n = new URL("/assets/app-icon-CG9GQKA7.webp",import.meta.url).href;
                new Notification("Blood on the Clocktower",{
                    body: s,
                    badge: n,
                    icon: n,
                    image: n
                })
            }
        }
    }
    get store() {
        return this._store
    }
    get socket() {
        return this._socket
    }
}
const EE = e => {
    const s = new DE(e);
    [wE, fE, bE, AE, ME, PE, mE, vE, kE, pE, hE, TE, IE, yE, SE, _E, RE, CE].forEach(t => new t(s))
}
  , NE = () => ({
    audio: {
        context: null,
        device: null,
        preference: null,
        isEchoCancellation: !0,
        isNoiseSuppression: !0,
        isAutoGainControl: !0,
        isPushToTalk: !1,
        isDeafened: !1,
        isMuted: !1,
        streams: new Map,
        volumes: new Map
    },
    video: {
        device: null,
        preference: null,
        isDeafened: !1,
        isMuted: !1,
        isUnmirrored: !1,
        isHidden: !1,
        streams: new Map
    },
    channel: "",
    isPrompt: !1,
    isNotAllowed: !1,
    isConnected: !1,
    isReconnecting: !1,
    servers: new Map,
    consumers: new Set,
    userOverrides: new Map,
    userChannels: new Map,
    usersMuted: {},
    usersDeafened: {},
    whisperFrom: new Map,
    whisperTo: new Map,
    textMessages: [],
    textMessageIndicators: [],
    textRecipient: "",
    following: ""
})
  , nl = 180 * 1e3
  , Xe = new Set;
let al = null;
const BE = 300 * 1e3
  , jd = async (e, s, t) => {
    const n = s.session.meta.chatServer
      , o = s.user.accessToken
      , i = 1
      , l = [n];
    if (e.servers.forEach( ({host: g}) => {
        l.includes(g) || l.push(g)
    }
    ),
    l.length && o)
        try {
            await Promise.any(l.map(async g => {
                const d = Date.now()
                  , h = e.servers.get(g);
                if (Xe.has(g) || h.health && d - h.health.timestamp < nl)
                    return Promise.resolve();
                Xe.add(g);
                try {
                    const m = await fetch(g === "local" ? "http://localhost:3016/health" : `https://chat-${g}.botc.app/health`, {
                        headers: {
                            "Content-Type": "application/json",
                            Authorization: "Bearer " + s.user.accessToken
                        }
                    });
                    h.health = await m.json(),
                    h.health.load <= i ? h.health.color = `rgb(${Math.round(Math.min(255, 255 * h.health.load / i))}, 255, 0)` : h.health.color = `rgb(255, ${Math.round(Math.max(0, 255 - 255 * (h.health.load - i) / i))}, 0)`
                } catch {
                    return Xe.delete(g),
                    h.health = {
                        color: "rgb(128, 128, 128)"
                    },
                    Promise.reject()
                }
                h.health.latency = Math.round((Date.now() - d) / 2),
                h.health.timestamp = d,
                t("updateServer", h),
                Xe.delete(g)
            }
            ))
        } catch {}
    clearTimeout(al),
    al = setTimeout( () => jd(e, s, t), nl)
}
  , VE = {
    channelColors(e, s, t) {
        const n = new Map
          , o = [...t.players.storytellers, ...t.players.players].map(i => i.id);
        return e.userChannels.forEach( (i, l) => {
            i && (n.has(i) || n.set(i, []),
            n.set(i, [...n.get(i), l]))
        }
        ),
        n.forEach( (i, l) => {
            if (l.split("-")[0] === "night")
                return n.set(l, "night");
            if (l.split("-").length === 1)
                return n.set(l, `public-${l}`);
            let g = Number(l.slice(-2));
            i.includes(o[g]) || (g = o.indexOf(i.sort().shift())),
            n.set(l, g)
        }
        ),
        n.set("", "townsquare"),
        window.channelColors ? n : new Map
    },
    hasAvatars(e, s, t) {
        return t.settings.advanced.hasHiddenTownSquareCams || t.session.hook.name === "reveal-grimoire" && t.settings.advanced.hasHiddenRevealCams ? !1 : !!t.session.sessionId
    },
    isVideoWhisper(e, s, t, n) {
        return [...t.session.users].some( ([o]) => !(!e.channel || e.userChannels.get(o) !== e.channel || !n["players/seatedPlayerMap"].has(o)))
    },
    whispersAvailable(e, s, t, n) {
        return t.session.sessionId ? t.vote.nomination ? new Set : n["user/isSpectator"] ? new Set : new Set([...t.session.users].filter( ([o,i]) => !n["players/seatedPlayerMap"].has(o) || n["game/isNight"] && !n["user/isStoryteller"] && !n["players/storytellerMap"].has(o) || o === t.user.user.id || !i.isOnline || e.whisperTo.has(o) ? !1 : !s.isPrivateChat(e.userChannels.get(o)) || !s.isPrivateChat(e.channel)).map( ([o]) => o)) : new Set
    },
    textsAvailable(e, s, t, n) {
        const o = n["players/seatedPlayerMap"]
          , i = t.players.players;
        return t.session.sessionId ? new Set([...t.session.users].filter( ([l,g]) => {
            if (!g.isOnline || l === t.user.user.id)
                return !1;
            if (n["players/storytellerMap"].has(l) || n["user/isStoryteller"])
                return !0;
            if (n["user/isSpectator"])
                return !o.has(l);
            if (!o.has(l) || t.session.isWhispersDisabled)
                return !1;
            if (n["user/getOpenEyes"])
                return !0;
            const d = i.indexOf(o.get(t.user.user.id))
              , h = i.indexOf(o.get(l));
            return Math.abs(d - h) % (i.length - 2) !== 1 ? !1 : n["game/isNight"] || !e.channel && !e.userChannels.get(l)
        }
        ).map( ([l]) => l)) : new Set
    },
    chatServerPreference(e) {
        return e.servers.size ? [...e.servers].map( ([s]) => s).sort( (s, t) => {
            var i, l, g, d, h, m, p, f, P, w;
            const n = e.servers.get(s)
              , o = e.servers.get(t);
            return !((i = o.health) != null && i.latency) && !((l = n.health) != null && l.latency) ? 0 : !((g = n.health) != null && g.latency) && ((d = o.health) != null && d.latency) ? 1 : !((h = o.health) != null && h.latency) && ((m = n.health) != null && m.latency) ? -1 : ((p = n.health) == null ? void 0 : p.latency) + ((f = n.health) == null ? void 0 : f.users) - ((P = o.health) == null ? void 0 : P.latency) - ((w = o.health) == null ? void 0 : w.users)
        }
        ) : ["eu"]
    },
    isPrivateChat() {
        return (e="") => ["private", "night"].includes(e.split("-").shift())
    },
    isPublicChat() {
        return (e="") => ["public"].includes(e.split("-").shift())
    }
}
  , OE = {
    textMessage(e, {recipientId: s, message: t, senderId: n, isSystem: o, isHidden: i, isExpiring: l}) {
        const {commit: g, rootState: d} = e
          , {user: h} = d.user
          , m = h.id + Date.now() + e.state.textMessages.length;
        t && d.session.sessionId && (g("addTextMessage", {
            msgId: m,
            message: o ? t : t.substring(0, 250),
            senderId: n != null ? n : h.id,
            recipientId: s || "",
            isSystem: o != null ? o : !1,
            isHidden: i != null ? i : !1
        }),
        (!o || l) && setTimeout( () => g("removeTextMessage", m), BE))
    },
    requestWhisper({rootGetters: e, rootState: s, commit: t, state: n, getters: o}, i) {
        if (!e["players/seatedPlayerMap"].has(s.user.user.id) || !i.id || n.whisperTo.has(i.id))
            return;
        t("togglePrompt", !1);
        const l = [...s.players.storytellers, ...s.players.players].findIndex(d => d.id === s.user.user.id);
        let g = (e["game/isNight"] ? "night-" : "private-") + String(Date.now()).substring(6, 10) + Math.round(Math.random() * 1e3) + String(l).padStart(2, "0");
        n.channel ? g = n.channel : (t("removeWhisperTo"),
        o.isPrivateChat(n.userChannels.get(i.id)) && !e["players/storytellerMap"].has(i.id) && (g = n.userChannels.get(i.id))),
        t("setWhisperTo", {
            id: i.id,
            channel: g
        })
    },
    async setServerList({state: e, commit: s, rootState: t}, n) {
        s("setServerList", new Map(n.map(o => [o.host, o]))),
        await jd(e, t, s)
    },
    followUser({state: e, commit: s, rootGetters: t, rootState: n}, o) {
        !o || !t["user/hasGrimoireAccess"] || o !== n.user.user.id && (o === e.following ? s("setFollowing", "") : (e.userChannels.has(o) && e.channel !== e.userChannels.get(o) && s("setChannel", e.userChannels.get(o)),
        s("setFollowing", o)))
    },
    showTextTab({commit: e}, s) {
        e("setTextRecipient", s),
        e("setTab", {
            tab: "text",
            value: 1 + Math.random()
        }, {
            root: !0
        }),
        e("togglePrompt", !1)
    }
}
  , ge = (e, s="", t=!1) => (n, o) => {
    t && o == null || (s && n[s] ? n[s][e] = o : n[e] = o)
}
  , jE = {
    toggleEchoCancellation: oe("isEchoCancellation", "audio"),
    toggleNoiseSuppression: oe("isNoiseSuppression", "audio"),
    toggleAutoGainControl: oe("isAutoGainControl", "audio"),
    togglePushToTalk: oe("isPushToTalk", "audio"),
    toggleAudioMuted: oe("isMuted", "audio"),
    toggleAudioDeafened: oe("isDeafened", "audio"),
    setAudioPreference: ge("preference", "audio"),
    setAudioDevice: ge("device", "audio"),
    setAudioContext: ge("context", "audio"),
    setVolume({audio: e}, {userId: s, type: t, value: n=1}) {
        var o;
        if (n !== 1)
            e.volumes.set(s, Object.assign((o = e.volumes.get(s)) != null ? o : {}, {
                [t]: n
            }));
        else if (e.volumes.has(s)) {
            const i = e.volumes.get(s);
            delete i[t],
            Object.keys(i).length ? e.volumes.set(s, i) : e.volumes.delete(s)
        }
    },
    toggleVideoMuted: oe("isMuted", "video"),
    toggleVideoDeafened: oe("isDeafened", "video"),
    toggleVideoUnmirrored: oe("isUnmirrored", "video"),
    toggleVideoHidden: oe("isHidden", "video"),
    setVideoPreference: ge("preference", "video"),
    setVideoDevice: ge("device", "video"),
    toggleNotAllowed: oe("isNotAllowed"),
    setChannel: ge("channel"),
    toggleConnected: oe("isConnected"),
    toggleReconnecting: oe("isReconnecting"),
    togglePrompt: oe("isPrompt"),
    setServerList: ge("servers"),
    changeServer: () => {}
    ,
    updateServer(e, s) {
        e.servers.set(s.host, s)
    },
    setTextRecipient: ge("textRecipient"),
    setFollowing: ge("following"),
    setUserOverrides: ge("userOverrides"),
    setUserOverride({userOverrides: e}, {userId: s, type: t, value: n}) {
        const o = t + "-" + s;
        n === !1 || n === void 0 && e.has(o) ? e.delete(o) : e.set(o, n != null ? n : 1)
    },
    setUserChannel(e, {userId: s, value: t}) {
        e.userChannels.set(s, t)
    },
    clearUserChannels(e) {
        e.userChannels.clear()
    },
    setStream(e, {userId: s, type: t, stream: n}={}) {
        e[t] && (s ? n ? e[t].streams.set(s, n) : e[t].streams.delete(s) : e[t].streams = new Map)
    },
    toggleConsumer(e, {userId: s, value: t=!0}={}) {
        s ? t ? e.consumers.add(s) : e.consumers.delete(s) : e.consumers = new Set
    },
    toggleMuted(e, {userId: s, kind: t, isMuted: n}) {
        e.usersMuted[s] || (e.usersMuted[s] = {}),
        e.usersMuted[s][t] = n
    },
    toggleDeafened(e, {userId: s, kind: t, isDeafened: n}) {
        e.usersDeafened[s] || (e.usersDeafened[s] = {}),
        e.usersDeafened[s][t] = n
    },
    setWhisperTo(e, {id: s, channel: t}) {
        s && e.whisperFrom.get(s) === t || s && e.whisperTo.set(s, t)
    },
    removeWhisperTo(e, {id: s}={}) {
        s ? e.whisperTo.delete(s) : e.whisperTo = new Map
    },
    setWhisperFrom(e, {id: s, channel: t}) {
        s && e.whisperFrom.set(s, t)
    },
    removeWhisperFrom(e, {id: s}={}) {
        s ? e.whisperFrom.delete(s) : e.whisperFrom = new Map
    },
    addTextMessage(e, s) {
        e.textMessages.push({
            ...s,
            time: Date.now()
        })
    },
    removeTextMessage(e, s) {
        if (!s)
            e.textMessages = [];
        else {
            const t = e.textMessages.findIndex( ({msgId: n}) => n === s);
            t >= 0 && e.textMessages.splice(t, 1)
        }
    },
    addTextMessageIndicator(e, s) {
        e.textMessageIndicators.push({
            ...s,
            time: Date.now()
        })
    },
    removeTextMessageIndicator(e, s) {
        if (!s)
            e.textMessageIndicators = [];
        else {
            const t = e.textMessageIndicators.findIndex( ({msgId: n}) => n === s);
            t >= 0 && e.textMessageIndicators.splice(t, 1)
        }
    }
}
  , UE = {
    namespaced: !0,
    state: NE,
    getters: VE,
    actions: OE,
    mutations: jE
}
  , HE = () => ({
    history: [],
    phase: 0,
    isRunning: !1
})
  , qE = {
    hasGardener({history: e, isRunning: s}) {
        var t;
        return s && e.length && e[0].type === "start" && ((t = e[0].data.npcs) == null ? void 0 : t.includes("gardener"))
    },
    lastPhase({history: e}) {
        return e.filter( ({type: s}) => s === "phase").pop()
    },
    isNight({phase: e}) {
        return !!(e % 2)
    }
}
  , LE = {
    async distributeRoles({dispatch: e, commit: s, rootState: t, rootGetters: n}) {
        if (n["user/isStoryteller"] && !t.session.hook.name) {
            s("setHistory", {
                phase: 0,
                isRunning: !0,
                history: []
            }),
            s("vote/clearHistory", void 0, {
                root: !0
            }),
            e("addHistory", {
                type: "start",
                data: {
                    players: t.players.players.map( ({id: o, isDead: i, isVoteless: l}) => ({
                        id: o,
                        isDead: i,
                        isVoteless: l
                    })),
                    npcs: t.players.npcs.map( ({id: o}) => o)
                },
                isInternal: !0
            });
            try {
                e("session/triggerHook", {
                    name: "distribute-roles",
                    delay: 1500
                }, {
                    root: !0
                })
            } catch {}
        }
    },
    async revealGrimoire({dispatch: e, commit: s, rootState: t, rootGetters: n, getters: o}) {
        if (n["user/isStoryteller"] && !t.session.hook.name)
            try {
                const i = await e("openDialogue", {
                    type: "reveal",
                    title: "overlays.reveal.title",
                    text: "overlays.reveal.prompt"
                }, {
                    root: !0
                });
                t.vote.nomination && s("vote/nomination", void 0, {
                    root: !0
                }),
                o.isNight && e("togglePhase"),
                s("setGrimoireMode", "reveal", {
                    root: !0
                }),
                t.players.players.forEach(l => {
                    const g = l.reminders.find( ({role: d, name: h}) => {
                        const {special: m, remindersGlobal: p} = t.roles.get(d) || {};
                        return (m == null ? void 0 : m.some(f => f.type === "reveal" && f.name === "replace-character")) && p[0] === h
                    }
                    );
                    if (g) {
                        const d = {
                            townsfolk: "g",
                            outsider: "g",
                            minion: "e",
                            demon: "e"
                        }
                          , h = l.alignment || d[l.role.team];
                        s("players/updatePlayer", {
                            player: l,
                            property: "role",
                            value: t.roles.get(g.role)
                        }, {
                            root: !0
                        }),
                        h && h !== d[t.roles.get(g.role)] && s("players/updatePlayer", {
                            player: l,
                            property: "alignment",
                            value: h
                        }, {
                            root: !0
                        })
                    }
                    s("players/updatePlayer", {
                        player: l,
                        property: "revealed",
                        value: !1,
                        isInternal: !0
                    }, {
                        root: !0
                    })
                }
                ),
                s("players/updateStoryteller", {
                    property: "revealed",
                    value: !1,
                    isInternal: !0
                }, {
                    root: !0
                }),
                e("session/triggerHook", {
                    name: "reveal-grimoire",
                    params: !i
                }, {
                    root: !0
                }),
                await e("end", !i)
            } catch {}
    },
    end({state: e, commit: s, rootState: t, dispatch: n}, o) {
        if (!e.isRunning)
            return;
        const {players: i, npcs: l} = t.players;
        n("addHistory", {
            type: "end",
            data: {
                players: i.map( ({id: g, isDead: d, isVoteless: h}) => ({
                    id: g,
                    isDead: d,
                    isVoteless: h
                })),
                roles: i.map( ({role: g}) => g.id),
                npcs: l.map( ({id: g}) => g),
                isEvilWin: o
            }
        }),
        s("toggleRunning", !1)
    },
    togglePhase({state: e, commit: s, dispatch: t}) {
        const n = e.history.filter(o => o.type === "phase").pop();
        e.isRunning && n && Date.now() - n.time < 10 * 1e3 ? (s("setPhase", {
            phase: e.phase - 1
        }),
        s("removeHistory", n)) : (s("setPhase", {
            phase: e.phase + 1
        }),
        e.isRunning && t("addHistory", {
            type: "phase",
            data: e.phase
        }))
    },
    addHistory({commit: e, dispatch: s, state: t}, n) {
        t.isRunning && (e("addHistory", n),
        s("chat/textMessage", {
            isSystem: !0,
            senderId: "",
            message: {
                type: n.type,
                data: n.data
            }
        }, {
            root: !0
        }))
    },
    setHistory({state: e, commit: s, dispatch: t}, n) {
        var o, i, l;
        n && ((n.phase && e.phase !== n.phase || (o = n.history) != null && o.length && n.history[0].id !== ((i = e.history[0]) == null ? void 0 : i.id)) && (s("session/clearSignals", null, {
            root: !0
        }),
        s("vote/nomination", void 0, {
            root: !0
        })),
        s("setHistory", n),
        (l = n.history) == null || l.forEach( ({data: g, type: d, time: h}) => {
            t("chat/textMessage", {
                isSystem: !0,
                senderId: "",
                message: {
                    type: d,
                    data: g
                },
                time: h
            }, {
                root: !0
            })
        }
        ))
    }
}
  , zE = {
    toggleRunning(e, s) {
        s !== void 0 ? e.isRunning = s : e.isRunning = !e.isRunning
    },
    setPhase(e, {phase: s}) {
        e.phase = s
    },
    setHistory(e, s) {
        if (!s)
            return;
        const {history: t, phase: n, isRunning: o} = s;
        Array.isArray(t) && (e.history = t),
        n !== void 0 && (e.phase = n),
        o !== void 0 && (e.isRunning = !!o)
    },
    addHistory(e, s) {
        if (!e.isRunning)
            return;
        const {id: t, type: n, time: o, data: i, isPrivate: l} = s
          , g = {
            id: t || e.history.length + "-" + Date.now(),
            type: n,
            data: i,
            time: o || Date.now()
        };
        l && (g.isPrivate = !0),
        e.history.push(g)
    },
    removeHistory({history: e}, {id: s}) {
        const t = e.findIndex(n => n.id === s);
        t > -1 && e.splice(t, 1)
    }
}
  , GE = {
    namespaced: !0,
    state: HE,
    getters: qE,
    actions: LE,
    mutations: zE
}
  , it = {
    id: null,
    role: {},
    ability: {},
    alignment: null,
    reminders: [],
    status: [],
    isVoteless: !1,
    isDead: !1
}
  , Ye = {
    id: null,
    role: {},
    ability: {},
    alignment: null,
    reminders: []
}
  , WE = () => ({
    players: [],
    npcs: [],
    bluffs: [],
    storytellers: [],
    claimedSeat: null,
    storytellerRequests: []
})
  , FE = {
    alive({players: e}) {
        return e.filter(s => !s.isDead).length
    },
    nonTravellers({players: e}) {
        const s = e.filter(t => t.role.team !== "traveller");
        return Math.min(s.length, 15)
    },
    travellers({players: e}) {
        const s = e.filter(t => t.role.team === "traveller");
        return Math.min(s.length, 15)
    },
    nightOrder({players: e, storytellers: s, npcs: t}, n, {edition: o}) {
        const i = []
          , l = [];
        [...e, ...s].forEach( ({role: h}) => {
            h.firstNight && !i.some(m => m.id === h.id) && i.push(h),
            h.otherNight && !l.some(m => m.id === h.id) && l.push(h)
        }
        ),
        t.forEach(h => {
            h.firstNight && !i.some(m => m.id === h.id) && i.push(h),
            h.otherNight && !l.some(m => m.id === h.id) && l.push(h)
        }
        );
        const g = (h, m) => {
            var p;
            return (p = o[h]) != null && p.includes(m.id) ? o[h].indexOf(m.id) : m[h] - 1
        }
        ;
        i.sort( (h, m) => g("firstNight", h) - g("firstNight", m)),
        l.sort( (h, m) => g("otherNight", h) - g("otherNight", m));
        const d = new Map;
        return e.forEach(h => {
            var f;
            if (!((f = h.role) != null && f.id))
                return;
            const m = i.findIndex(P => P.id === h.role.id) + 1;
            let p = l.findIndex(P => P.id === h.role.id) + 1;
            [{
                role: "cannibal",
                reminder: "lunch"
            }, {
                role: "pixie",
                reminder: "has ability"
            }].forEach( ({role: P, reminder: w}) => {
                var B;
                if (h.role.id === P) {
                    const j = e.find(V => V.reminders.some(S => S.role === P && S.name.match(RegExp(w, "i"))));
                    j && ((B = j.role) != null && B.otherNight) && (p = l.findIndex(V => V.id === j.role.id) + 1)
                }
            }
            ),
            d.set(h.role.id, {
                first: m,
                other: p
            })
        }
        ),
        s.forEach(h => {
            var m;
            (m = h.role) != null && m.id && d.set(h.role.id, {
                first: i.findIndex(p => p.id === h.role.id) + 1,
                other: l.findIndex(p => p.id === h.role.id) + 1
            })
        }
        ),
        t.forEach(h => {
            const m = i.findIndex(f => f.id === h.id) + 1
              , p = l.findIndex(f => f.id === h.id) + 1;
            d.set(h.id, {
                first: m,
                other: p
            })
        }
        ),
        d
    },
    seatedPlayerMap({players: e, storytellers: s}) {
        const t = new Map;
        return s.forEach(n => {
            n.id && t.set(n.id, n)
        }
        ),
        e.forEach(n => {
            n.id && t.set(n.id, n)
        }
        ),
        t
    },
    storytellerMap({storytellers: e}) {
        return new Map(e.map(s => [s.id, s]))
    },
    playerName: ({players: e, storytellers: s}, t, {session: n, grimoire: o}) => i => {
        var d, h;
        if (!i)
            return [];
        const l = i.id && s.some(m => m.id === i.id)
          , g = l ? i.id ? s.findIndex(m => m.id === i.id) : s.indexOf(i) : i.id ? e.findIndex(m => m.id === i.id) : e.indexOf(i);
        return i.id && n.sessionId ? (d = n.users.get(i.id)) != null && d.username ? ["{username}", {
            username: (h = n.users.get(i.id)) == null ? void 0 : h.username
        }, {
            resolvedMessage: !0
        }] : [l ? "grimoire.storyteller" : "grimoire.player", [g + 1]] : l ? ["grimoire.storyteller", [g > 0 ? g + 1 : ""]] : !o.seats[g] || n.sessionId ? ["grimoire.seat", [g + 1]] : ["{seat}", {
            seat: o.seats[g]
        }, {
            resolvedMessage: !0
        }]
    }
}
  , QE = {
    clearRoles(e, {isInternal: s, clearNPCs: t}={}) {
        const {state: n, commit: o, rootState: i, rootGetters: l, dispatch: g} = e;
        let d, h;
        if (!l["user/isStoryteller"])
            d = n.players.map(m => (m.role.team !== "traveller" && (m.role = {}),
            m.reminders = [],
            m.alignment = "",
            m)),
            h = n.storytellers.map(m => (m.role = {},
            m.reminders = [],
            m.alignment = "",
            m)),
            o("session/clearSignals", null, {
                root: !0
            }),
            n.bluffs.length && o("setBluff");
        else {
            if (s || (g("game/end", null, {
                root: !0
            }),
            (i.vote.markedPlayer > -1 || i.vote.highscore) && o("vote/nomination", {
                markedPlayer: -1,
                highscore: 0
            }, {
                root: !0
            }),
            o("vote/clearHistory", null, {
                root: !0
            }),
            n.bluffs.length && o("setBluff")),
            d = n.players.map( ({id: m}) => ({
                ...it,
                id: m
            })),
            h = n.storytellers.map( ({id: m}) => ({
                ...Ye,
                id: m
            })),
            t) {
                const m = [];
                l.isHomebrew && i.npcs.has("bootlegger") && m.push(i.npcs.get("bootlegger")),
                l.isJinxed && m.push(i.npcs.get("djinn")),
                (n.npcs.length !== m.length || m.some(p => !n.npcs.includes(p))) && o("setNPC", {
                    npc: m
                })
            }
            o("session/clearSignals", null, {
                root: !0
            })
        }
        o("setPlayers", d),
        o("setStorytellers", h)
    },
    emptySeat({state: e, commit: s, dispatch: t}, {id: n}) {
        e.players.forEach(async (o, i) => {
            o.id === n && (s("updatePlayer", {
                player: o,
                property: "id",
                value: null
            }),
            await t("chat/textMessage", {
                isSystem: !0,
                senderId: "",
                message: {
                    type: "seat_empty",
                    data: [n, i + 1]
                }
            }, {
                root: !0
            }))
        }
        )
    },
    becomeStoryteller({state: e, rootState: s, commit: t}) {
        const n = s.user.user.id;
        e.players.forEach(o => {
            o.id === n && t("updatePlayer", {
                player: o,
                property: "id",
                value: null
            })
        }
        ),
        t("setStorytellers", [Object.assign({}, Ye, {
            id: n
        })])
    },
    setRoles({state: e, rootState: s, commit: t}, n) {
        const o = e.players.map( (i, l) => {
            const {role: g, alignment: d} = n[l] || {};
            return i.role.id !== g && (i.role = s.roles.get(g) || s.rolesAvailable.get(g) || {}),
            i.alignment !== d && (i.alignment = d || null),
            i
        }
        );
        t("setRoles", o)
    },
    setPlayers({state: e, rootState: s, commit: t, rootGetters: n}, o) {
        if (!o)
            return;
        const {sessionId: i, previousSessionId: l} = s.session;
        o.forEach( (g, d) => {
            g.role = s.roles.get(g.role) || s.rolesAvailable.get(g.role) || {};
            const h = e.players[d] || {};
            if ((h.id === g.id || g.id === s.user.user.id && !(h != null && h.id)) && !n["user/isStoryteller"] && (!l || l === i)) {
                const {role: m, alignment: p, reminders: f} = h;
                if (f && g.reminders === null && (g.reminders = f),
                m && !s.roles.has(m.id) && m.team !== "traveller")
                    return;
                m && !g.role.id && m.team !== "traveller" ? (g.role = m,
                p && g.alignment === null && (g.alignment = p)) : g.role.id === (m == null ? void 0 : m.id) && p && g.alignment === null && (g.alignment = p)
            }
        }
        ),
        t("setPlayers", o)
    },
    setStorytellers({rootState: e, commit: s, rootGetters: t, getters: n}, o) {
        if (!o)
            return;
        const i = n.storytellerMap;
        o.forEach(l => {
            if (l.role = e.roles.get(l.role) || e.rolesAvailable.get(l.role) || {},
            i.has(l.id) && !t["user/isStoryteller"]) {
                const {role: g, alignment: d, reminders: h} = i.get(l.id);
                !l.role.id && (g == null ? void 0 : g.team) !== "traveller" && (l.role = g),
                l.alignment === null && (l.alignment = d),
                l.reminders === null && (l.reminders = h)
            }
        }
        ),
        s("setStorytellers", o)
    },
    setBluffs({rootState: e, commit: s}, t) {
        Array.isArray(t) && s("setBluff", {
            bluff: t.map(n => e.roles.get(n == null ? void 0 : n.id) || e.rolesAvailable.get(n == null ? void 0 : n.id) || {}),
            isInternal: !0
        })
    },
    setNPCs({rootState: e, commit: s}, t) {
        t && s("setNPC", {
            npc: t.map(n => e.npcs.get(n.id) || Object.assign({}, e.definitions.CUSTOM_ROLE, n)),
            isInternal: !0
        })
    },
    movePlayers({commit: e, rootState: s}, t) {
        const {markedPlayer: n} = s.vote;
        e("movePlayers", t);
        const o = t.map(l => s.grimoire.seats[l]);
        e("setSeatName", {
            seats: o
        }, {
            root: !0
        }),
        n > -1 && t.indexOf(n) !== n && e("vote/setMarkedPlayer", {
            value: t.indexOf(n),
            isInternal: !0
        }, {
            root: !0
        });
        const {signals: i} = s.session;
        Object.keys(i).forEach(l => {
            i[l].forEach( ({message: g}, d) => {
                let h = !1;
                const m = g.map(p => {
                    const f = t.indexOf(p.data);
                    return p.id === "player" && f !== p.data ? (h = !0,
                    {
                        id: p.id,
                        data: f
                    }) : p
                }
                );
                h && e("session/updateSignal", {
                    userId: l,
                    index: d,
                    message: m
                }, {
                    root: !0
                })
            }
            )
        }
        )
    },
    removePlayers({commit: e, rootState: s}, t) {
        const {markedPlayer: n} = s.vote;
        e("removePlayers", t);
        const o = s.grimoire.seats.filter( (l, g) => !t.includes(g));
        if (e("setSeatName", {
            seats: o
        }, {
            root: !0
        }),
        n > -1)
            if (t.includes(n))
                e("vote/setMarkedPlayer", {
                    value: -1,
                    isInternal: !0
                }, {
                    root: !0
                });
            else {
                const l = n - t.filter(g => g < n).length;
                l !== n && e("vote/setMarkedPlayer", {
                    value: l,
                    isInternal: !0
                }, {
                    root: !0
                })
            }
        const {signals: i} = s.session;
        Object.keys(i).forEach(l => {
            i[l].forEach( ({message: g, timestamp: d}, h) => {
                let m = !1;
                const p = g.filter(f => f.id !== "player" || !t.includes(f.data)).map(f => {
                    const P = t.filter(w => w < f.data).length;
                    return f.id === "player" && P ? (m = !0,
                    {
                        id: f.id,
                        data: f.data - P
                    }) : f
                }
                );
                p.length ? (m || p.length !== g.length) && e("session/updateSignal", {
                    userId: l,
                    index: h,
                    message: p
                }, {
                    root: !0
                }) : e("session/removeSignal", {
                    userId: l,
                    timestamp: d
                }, {
                    root: !0
                })
            }
            )
        }
        )
    },
    addPlayer({commit: e, state: s}) {
        s.players.length >= 20 || e("addPlayer")
    }
}
  , ZE = {
    claimSeat: (e, s) => {
        e.claimedSeat = s
    }
    ,
    openEyes: () => {}
    ,
    clearPlayers(e) {
        e.players = [],
        e.bluffs = []
    },
    setPlayers(e, s) {
        Array.isArray(s) && (e.players = s.map(t => {
            const n = Object.assign({}, it, t);
            return n.reminders = n.reminders || [],
            n.role = n.role || {},
            n
        }
        ))
    },
    setRoles(e, s=[]) {
        e.players.forEach( (t, n) => {
            const {role: o, alignment: i} = s[n] || {};
            o && (t.role = o,
            t.alignment = i)
        }
        )
    },
    movePlayers(e, s) {
        s.length === e.players.length && (e.players = s.map(t => e.players[t]))
    },
    updatePlayer(e, {player: s, property: t, value: n}) {
        const o = e.players.indexOf(s);
        o >= 0 && (e.players[o][t] = n)
    },
    addPlayer(e) {
        e.players.length >= 20 || e.players.push({
            ...it
        })
    },
    removePlayers(e, s) {
        e.players = e.players.filter( (t, n) => !s.includes(n))
    },
    setBluff(e, {index: s, bluff: t}={}) {
        s !== void 0 ? e.bluffs.splice(s, 1, t) : Array.isArray(t) ? e.bluffs = t : e.bluffs = []
    },
    setNPC(e, {index: s, npc: t}={}) {
        if (s !== void 0)
            e.npcs.splice(s, 1);
        else if (t)
            if (Array.isArray(t))
                e.npcs = t;
            else {
                if (e.npcs.some(n => n.id === t.id))
                    return;
                e.npcs.push(t)
            }
        else
            e.npcs = []
    },
    updateStoryteller(e, {storyteller: s, property: t, value: n}) {
        const o = s ? e.storytellers.indexOf(s) : 0;
        e.storytellers[o] && t && (e.storytellers[o][t] = n)
    },
    setStorytellers(e, s) {
        Array.isArray(s) && (e.storytellers = s.map(t => {
            const n = Object.assign({}, Ye, t);
            return n.role = n.role || {},
            n.reminders = n.reminders || [],
            n
        }
        ))
    },
    addStoryteller(e, {id: s}) {
        s && (e.storytellers.some(t => t.id === s) || (e.storytellers.push(Object.assign({}, Ye, {
            id: s
        })),
        e.storytellerRequests.includes(s) && e.storytellerRequests.splice(e.storytellerRequests.indexOf(s), 1)))
    },
    removeStoryteller(e, {id: s}) {
        const t = e.storytellers.findIndex(n => n.id === s);
        t >= 0 && e.storytellers.splice(t, 1)
    },
    requestStoryteller(e, {id: s}={}) {
        if (!e.storytellers.some(t => t.id === s))
            if (!s)
                e.storytellerRequests = [];
            else {
                const t = e.storytellerRequests.indexOf(s);
                t > -1 ? e.storytellerRequests.splice(t, 1) : e.storytellerRequests.push(s)
            }
    }
}
  , XE = {
    namespaced: !0,
    state: WE,
    getters: FE,
    actions: QE,
    mutations: ZE
};
let Us = !0;
const Ud = {
    owner: {},
    banlist: {},
    createdAt: 0,
    isPublic: !1,
    chatServer: "",
    tags: {
        difficulty: 0,
        cameras: 0,
        travellers: 0,
        grimoire: 0,
        streaming: !1,
        locked: !1
    },
    language: (navigator.languages ? navigator.languages[0] : navigator.language).split("-")[0] || "en"
}
  , KE = () => ({
    sessionId: "",
    previousSessionId: "",
    isConnected: !1,
    isReconnecting: !1,
    isWhispersDisabled: !1,
    users: new Map,
    meta: Object.assign({}, Ud),
    ping: -1,
    isPointing: !1,
    pointers: [],
    raisedHands: new Map,
    handIcon: "i-hand",
    recipients: [],
    signals: {},
    timer: {
        expiration: 0,
        title: "",
        isPausedDuringVotes: !0,
        paused: 0
    },
    boostExpires: 0,
    hook: {
        name: ""
    },
    code: "9a885ff8b98251ed16d03c5972e3bac8a92e8c16ba661e5b5902a0af6a0ae8ca"
})
  , YE = {
    pointedPlayers({pointers: e}) {
        const s = [];
        e.forEach(n => {
            n != null && (s[n] = s[n] ? s[n] + 1 : 1)
        }
        );
        const t = s.reduce( (n, o) => o > n ? o : n, 0);
        return s.map( (n, o) => n === t ? o : -1).filter(n => n > -1)
    },
    boostDuration({boostExpires: e}) {
        return () => e > Date.now() ? e - Date.now() : 0
    }
}
  , JE = {
    cleanGamestate({commit: e}) {
        e("setTimer"),
        e("setRaisedHands", new Map),
        e("vote/clearHistory", null, {
            root: !0
        }),
        e("players/setBluff", {}, {
            root: !0
        }),
        e("players/setStorytellers", [], {
            root: !0
        }),
        e("game/setHistory", {
            history: [],
            phase: 0,
            isRunning: !1
        }, {
            root: !0
        }),
        e("chat/removeTextMessage", null, {
            root: !0
        })
    },
    async create({state: e, dispatch: s, commit: t, rootState: n, rootGetters: o}, i) {
        var l;
        if (!e.sessionId && i)
            try {
                await s("players/clearRoles", {}, {
                    root: !0
                });
                const g = n.editionsAvailable.get("tb");
                e.meta.tags.difficulty === 2 && n.edition !== g && t("setEdition", {
                    edition: g
                }, {
                    root: !0
                }),
                s("cleanGamestate"),
                await s("players/becomeStoryteller", null, {
                    root: !0
                });
                const {players: d, storytellers: h, bluffs: m} = n.players
                  , {phase: p, isRunning: f, history: P} = n.game
                  , w = await ne(`sessions/${encodeURIComponent(i)}`, {
                    players: d.map(B => ({
                        ...B,
                        role: B.role.id,
                        id: void 0
                    })).slice(0, 20),
                    storytellers: h,
                    bluffs: m.map(B => B.id),
                    isPublic: e.meta.isPublic,
                    tags: e.meta.tags,
                    language: e.meta.language,
                    chatServer: e.meta.chatServer || o["chat/chatServerPreference"][0],
                    ...o.editionExport,
                    phase: p,
                    isRunning: f,
                    history: P
                }, n.user.accessToken);
                w.error ? ((l = w.error.message) != null && l.match(/Failed to fetch/i) && (w.error = "create_generic"),
                await s("showError", ["modals.dialogue.error.session", `modals.dialogue.error.${w.error}`], {
                    root: !0
                })) : (t("setSessionId", i),
                W.currentRoute.value.name !== "Grimoire" && await W.replace({
                    name: "Grimoire"
                }))
            } catch {}
    },
    async join({state: e, dispatch: s, commit: t, rootState: n}, o="") {
        if (e.sessionId && e.sessionId !== o && W.currentRoute.value.name === "Grimoire")
            return s("leave");
        let i = o;
        try {
            if (i || (i = await s("openDialogue", {
                type: "prompt",
                title: "modals.dialogue.prompt.join_title",
                placeholder: "modals.dialogue.prompt.join_placeholder",
                value: "",
                minlength: 3,
                text: "modals.dialogue.prompt.join_text"
            }, {
                root: !0
            }),
            i = i.trim().toLocaleLowerCase()),
            i) {
                i.match(/^https?:\/\//i) && (i = decodeURIComponent(i.split("/join/").pop()));
                const l = await Oe(`sessions/${encodeURIComponent(i)}`, n.user.accessToken);
                if (!(l != null && l.name)) {
                    await s("showError", ["modals.dialogue.error.session_join", "modals.dialogue.error.session_not_found"], {
                        root: !0
                    }),
                    e.sessionId && t("setSessionId", "");
                    return
                }
                const g = l == null ? void 0 : l.usersAll.filter(d => {
                    var h;
                    return ((h = n.user.relations.get(d.id)) == null ? void 0 : h.type) === "block"
                }
                ).map(d => d.username);
                if (g.length && !await s("openDialogue", {
                    type: "confirm",
                    title: "modals.dialogue.prompt.join_block_title",
                    text: ["modals.dialogue.prompt.join_block_text", [g.join(", ")]]
                }, {
                    root: !0
                }))
                    return;
                i !== e.previousSessionId && s("cleanGamestate"),
                t("setSessionId", i),
                W.currentRoute.value.name !== "Grimoire" && await W.replace({
                    name: "Grimoire"
                })
            }
        } catch {}
    },
    async leave({dispatch: e, state: s, commit: t, rootState: n}) {
        try {
            const o = n.players.players.some(l => l.id === n.user.user.id);
            await e("openDialogue", {
                type: "confirm",
                title: "modals.dialogue.prompt.leave_title",
                text: "modals.dialogue.prompt.leave_text" + (o ? "_player" : "")
            }, {
                root: !0
            }) && (s.sessionId && t("setSessionId", ""),
            W.currentRoute.value.name === "Grimoire" && await W.replace({
                name: "Lobby"
            }))
        } catch {}
    },
    triggerHook({commit: e, state: s}, {name: t, params: n, delay: o, isInternal: i}) {
        return s.hook.name ? Promise.reject("hook already in progress") : (e("setHook", {
            name: t,
            params: n,
            isInternal: i
        }),
        o ? new Promise(l => {
            setTimeout( () => {
                e("setHook", {
                    name: "",
                    isInternal: i
                }),
                l()
            }
            , o)
        }
        ) : Promise.resolve())
    },
    startPointing({rootState: e, commit: s, rootGetters: t}, n=[]) {
        !t["user/isStoryteller"] || t["game/isNight"] !== !!n.length || (e.vote.nomination && s("vote/setNomination", !1, {
            root: !0
        }),
        s("setRecipients", n),
        s("setPointers", []),
        s("setPointingState", "start"),
        s("setGrimoireMode", "pointing", {
            root: !0
        }))
    },
    pointAtPlayer({state: e, rootState: s, commit: t}, n) {
        if (!e.isPointing || e.isPointing === "locked")
            return;
        const {players: o, user: i} = s
          , l = o.players.findIndex( ({id: g}) => g === i.user.id);
        l >= 0 && Us && (Us = !1,
        setTimeout( () => {
            Us = !0
        }
        , 500),
        t("pointAtPlayer", {
            index: l,
            playerIndex: e.pointers[l] === n ? -1 : n
        }))
    },
    clearSignals({rootState: e, commit: s}) {
        e.modal.name === "signal" && s("toggleModal", {}, {
            root: !0
        }),
        s("clearSignals")
    }
}
  , ue = (e, s) => (t, n) => {
    const o = n != null && n.isInternal && (n != null && n.value) ? n.value : n;
    s && t[s] ? t[s][e] = o : t[e] = o
}
  , $E = {
    setPing: ue("ping"),
    setHook: ue("hook"),
    setHandIcon: ue("handIcon"),
    setRaisedHands: ue("raisedHands"),
    setBoostExpires: ue("boostExpires"),
    setPreviousSessionId: ue("previousSessionId"),
    toggleConnected: oe("isConnected"),
    toggleReconnecting: ue("isReconnecting"),
    toggleWhispers: oe("isWhispersDisabled"),
    setTimerPaused: ue("paused", "timer"),
    setTimer(e, {expiration: s, title: t, isPausedDuringVotes: n, paused: o}={}) {
        e.timer.expiration = s != null ? s : 0,
        e.timer.title = t != null ? t : "",
        e.timer.paused = o != null ? o : 0,
        n !== void 0 && (e.timer.isPausedDuringVotes = n)
    },
    updateMeta(e, s={}) {
        Object.keys(s).length ? Object.keys(s).forEach(t => {
            Object.hasOwn(e.meta, t) && s[t] !== void 0 && (e.meta[t] = s[t])
        }
        ) : e.meta = Object.assign({}, Ud)
    },
    kickUser: () => {}
    ,
    togglePowerful: () => {}
    ,
    setUsers(e, s) {
        Array.isArray(s) && (s.length ? s.forEach(t => e.users.set(t.id, t)) : e.users = new Map)
    },
    updateUser(e, s) {
        s != null && s.id && e.users.set(s.id, Object.assign({}, e.users.get(s.id), s))
    },
    setPointing(e, {isPointing: s, pointers: t=[], recipients: n=[]}) {
        e.pointers = t,
        e.isPointing = s,
        e.recipients = n
    },
    setPointers: ue("pointers"),
    setPointingState: ue("isPointing"),
    setRecipients: ue("recipients"),
    pointAtPlayer(e, {index: s, playerIndex: t}={}) {
        s >= 0 && (t >= 0 ? e.pointers[s] = t : delete e.pointers[s])
    },
    raiseHand({raisedHands: e, handIcon: s}, {userId: t, value: n}={}) {
        n !== void 0 ? n ? e.set(t, n) : e.delete(t) : e.has(t) ? e.delete(t) : e.set(t, s)
    },
    setSessionId(e, s) {
        e.sessionId = s.toLocaleLowerCase().trim().substring(0, 20)
    },
    addSignal(e, {userIds: s, message: t, isInbound: n=!1}) {
        for (let o = 0; o < s.length; o++) {
            const i = s[o];
            e.signals[i] || (e.signals[i] = []),
            e.signals[i].push({
                message: t,
                isInbound: n,
                timestamp: Date.now()
            })
        }
    },
    removeSignal(e, {userId: s, timestamp: t}) {
        e.signals[s] && (e.signals[s] = e.signals[s].filter(n => n.timestamp !== t))
    },
    updateSignal(e, {userId: s, index: t, message: n}) {
        var o;
        (o = e.signals[s]) != null && o[t] && (e.signals[s][t].message = n)
    },
    markSignalsAsRead(e, s) {
        e.signals[s] && e.signals[s].forEach(t => {
            t.isInbound && (t.isRead = !0)
        }
        )
    },
    clearSignals(e) {
        e.signals = {}
    }
}
  , xE = {
    namespaced: !0,
    state: KE,
    getters: YE,
    actions: JE,
    mutations: $E
}
  , Hs = "https://the-pandemonium-institute.myshopify.com/api/2025-07/graphql.json"
  , Le = new Headers;
Le.append("X-Shopify-Storefront-Access-Token", "16f486cbc24d20dc53f4a33f216d7b2b");
Le.append("Content-Type", "application/json");
let ye = null;
const rl = 120 * 1e3
  , Hd = "https://github.com/ThePandemoniumInstitute/botc-release/releases"
  , qd = () => ({
    user: {},
    ban: {},
    relations: new Map,
    accessToken: "",
    refreshToken: "",
    appUpdate: "",
    newVersions: 0,
    notifications: [],
    latestVersion: "",
    serverTimeDiff: 0,
    downloadUrl: [["Desktop", Hd]],
    levels: {
        SINGLE: ["app-single", "patreon-townsfolk"],
        GROUP: ["special-tpi", "special-free", "special-moderator", "app-group", "patreon-minion", "patreon-demon"]
    }
})
  , e8 = {
    isStoryteller({user: e}, s, {session: t}, n) {
        return !t.sessionId || n["players/storytellerMap"].has(e.id)
    },
    isSpectator({user: e}, s, {session: t}, n) {
        return t.sessionId && !n["players/seatedPlayerMap"].has(e.id)
    },
    isModerator({user: e}) {
        return ["special-tpi", "special-moderator"].includes(e == null ? void 0 : e.level)
    },
    hasGrimoireAccess({user: e}, s, {session: t}, n) {
        var o;
        return !t.sessionId || n["players/storytellerMap"].has(e.id) || t.sessionId && !n["players/seatedPlayerMap"].has(e.id) && ((o = t.users.get(e.id)) == null ? void 0 : o.grimoireAccess) === 3
    },
    hasNightAction({user: e}, s, t, n) {
        var l, g;
        const o = n["players/seatedPlayerMap"].get(e.id);
        return n["players/storytellerMap"].get(e.id) || !(o != null && o.role) ? !1 : n["game/isNight"] && (!o.isDead || ((l = o.reminders) == null ? void 0 : l.some(d => d.name === "Has Ability"))) && ((g = o.role.special) == null ? void 0 : g.some(d => d.type === "player" && d.time === "night"))
    },
    getOpenEyes({user: e}, s, {session: t}, n) {
        var i, l, g, d;
        const o = n["players/seatedPlayerMap"].get(e.id);
        return !n["game/isNight"] || !t.sessionId || !((l = (i = o == null ? void 0 : o.role) == null ? void 0 : i.special) != null && l.some(h => h.type === "player" && h.name === "open-eyes")) ? !1 : (g = o == null ? void 0 : o.status) != null && g.includes("open-eyes") ? "open-eyes" : (d = o == null ? void 0 : o.status) != null && d.includes("peek-eyes") ? "peek-eyes" : !1
    }
}
  , s8 = {
    async login({commit: e, dispatch: s}, {email: t, password: n, username: o, captcha: i}) {
        var p, f, P;
        qd.accessToken && e("setAccessToken"),
        e("setRefreshToken");
        const l = JSON.stringify({
            query: `mutation customerAccessTokenCreate($input: CustomerAccessTokenCreateInput!) {
            customerAccessTokenCreate(input: $input) {
              customerUserErrors {
                code
                field
                message
              }
              customerAccessToken {
                accessToken
                expiresAt
              }
            }
          }`,
            variables: {
                input: {
                    email: t,
                    password: n
                }
            }
        })
          , g = await fetch(Hs, {
            method: "POST",
            headers: Le,
            body: l
        })
          , {data: d, errors: h} = await g.json();
        if (!d)
            throw new Error("Authentication server unavailable");
        const m = (p = d.customerAccessTokenCreate) == null ? void 0 : p.customerAccessToken;
        if (m && m.accessToken) {
            const w = await ne("login", {
                captcha: i,
                token: m.accessToken,
                username: o,
                version: re.version + (window.__TAURI__ ? "-app" : "") + "-" + document.documentElement.lang
            });
            if (w.accessToken)
                await s("setupRefresh", w);
            else
                throw new Error(`Unable to authenticate user: ${w == null ? void 0 : w.error}`)
        } else {
            const w = h ? h[0].message : (P = (f = d.customerAccessTokenCreate) == null ? void 0 : f.customerUserErrors[0]) == null ? void 0 : P.message;
            throw w === "Unidentified customer" ? new Error("Wrong e-mail address or password.") : new Error("Error logging in: " + w)
        }
    },
    async register({dispatch: e}, s) {
        const {email: t, password: n, acceptsMarketing: o, username: i, captcha: l} = s
          , g = JSON.stringify({
            query: `mutation customerCreate($input: CustomerCreateInput!) {
        customerCreate(input: $input) {
          customer {
            id
            email
            acceptsMarketing
          }
          customerUserErrors { field, message, code }
        }
      }`,
            variables: {
                input: {
                    email: t,
                    password: n,
                    acceptsMarketing: o
                }
            }
        })
          , d = await fetch(Hs, {
            method: "POST",
            headers: Le,
            body: g
        })
          , {data: h} = await d.json()
          , m = h.customerCreate;
        if (!m || !m.customer || !m.customer.id)
            if (m && m.customerUserErrors && m.customerUserErrors.length) {
                const p = m.customerUserErrors.pop();
                throw new Error(p.message,{
                    cause: p.code
                })
            } else
                throw Error("Unable to register account. Please try again later.");
        await e("login", {
            email: t,
            password: n,
            username: i,
            captcha: l
        })
    },
    async refresh({commit: e, state: s, dispatch: t}) {
        if (clearTimeout(ye),
        s.refreshToken) {
            const n = {
                token: s.refreshToken,
                version: re.version + (window.__TAURI__ ? "-app" : "") + "-" + document.documentElement.lang
            }
              , o = await ne("token", n);
            o.accessToken ? t("setupRefresh", o) : e("clearUser")
        }
    },
    async setupRefresh({dispatch: e, commit: s}, {accessToken: t, refreshToken: n, user: o, ban: i, relations: l, timestamp: g}) {
        var p;
        ye && (clearTimeout(ye),
        ye = null),
        s("setAccessToken", t),
        s("setUser", o),
        s("setBan", i),
        s("setRelations", l),
        s("setRefreshToken", n);
        const h = ru(t).exp * 1e3 - Date.now()
          , m = Math.abs(Date.now() - g);
        h > rl ? ye = setTimeout( () => e("refresh").catch( () => {}
        ), h - rl) : h > 0 ? e("refresh").catch( () => {}
        ) : s("clearUser"),
        Ba({
            id: o.id,
            username: o.username
        }),
        (p = o.flags) != null && p.includes("banned") ? await W.replace({
            name: "Banned"
        }) : g && m > 1e3 * 60 && (s("setServerTimeDiff", Date.now() - g),
        await W.replace({
            name: "Clock"
        }))
    },
    async recover(e, {email: s}) {
        const t = JSON.stringify({
            query: `mutation customerRecover($email: String!) {
        customerRecover(email: $email) {
          customerUserErrors { field, message, code }
          }
        }`,
            variables: {
                email: s
            }
        })
          , n = await fetch(Hs, {
            method: "POST",
            headers: Le,
            body: t
        })
          , {data: o} = await n.json();
        if (!o)
            throw new Error("Authentication server unavailable");
        const {customerRecover: i} = o;
        if (!i || i.customerUserErrors.length)
            throw new Error("Unable to recover account")
    },
    async announce({state: e}, s) {
        if (!e.accessToken || e.user.level !== "special-tpi")
            return;
        const t = await ne("announcement", s, e.accessToken);
        if (t.error)
            throw new Error(t.error)
    },
    async logout({commit: e, state: s, rootState: t}) {
        s.accessToken && (t.session.sessionId && e("session/setSessionId", "", {
            root: !0
        }),
        await ne("logout", {
            token: s.refreshToken
        }, s.accessToken),
        e("clearUser"),
        ye && (clearTimeout(ye),
        ye = null),
        Ba(null))
    },
    async updateUser({commit: e, state: s, dispatch: t}, n={}) {
        if (!s.accessToken)
            return;
        const o = {};
        if (["pronouns", "username", "hasAgreedTOS", "border", "avatar", "stats"].forEach(l => {
            n[l] !== void 0 && (o[l] = n[l])
        }
        ),
        !Object.keys(o).length)
            return;
        const i = await ne("user", o, s.accessToken);
        i.error ? await t("openDialogue", {
            type: "alert",
            title: "modals.dialogue.error.user_title",
            text: ["modals.dialogue.error.user_text", [i.error]]
        }, {
            root: !0
        }) : e("setUser", i.user)
    },
    async blockUser({commit: e, state: s, dispatch: t}, n) {
        var l;
        if (!s.accessToken)
            return;
        const o = ((l = s.relations.get(n)) == null ? void 0 : l.type) === "block"
          , i = await ne(`user/relation/${n}`, {
            type: "block"
        }, s.accessToken, {
            method: o ? "DELETE" : "PUT"
        });
        i.error ? await t("openDialogue", {
            type: "alert",
            title: "modals.dialogue.error.block_title",
            text: ["modals.dialogue.error.block_text"]
        }, {
            root: !0
        }) : e("setRelations", i.relations)
    },
    async uploadAvatar({commit: e, state: s, dispatch: t}, n) {
        var i, l, g, d;
        if (!s.accessToken || !s.user.level || !n)
            return !1;
        const o = await ne("avatar", n, s.accessToken, {
            isFormData: !0
        });
        if (o.error) {
            const h = "modals.dialogue.error.avatar";
            let m = "modals.dialogue.error.avatar_generic";
            return ((i = o.body) == null ? void 0 : i.error) === "LIMIT_FILE_SIZE" && (m = "modals.dialogue.error.avatar_size"),
            ((l = o.body) == null ? void 0 : l.error) === "FILE_TYPE" && (m = "modals.dialogue.error.avatar_type"),
            ((g = o.body) == null ? void 0 : g.error) === "LIMIT_PIXEL" && (m = "modals.dialogue.error.avatar_pixel"),
            await t("showError", [h, m], {
                root: !0
            }),
            X(o.error),
            !1
        } else
            return e("setUser", o.user),
            (d = s.user.cosmetics) == null ? void 0 : d.avatar
    },
    async promptUserUpdate({commit: e, state: s, dispatch: t}, n) {
        if (["username", "pronouns"].includes(n))
            try {
                const o = await t("openDialogue", {
                    type: "prompt",
                    title: `modals.dialogue.prompt.${n}_title`,
                    placeholder: `modals.dialogue.prompt.${n}_placeholder`,
                    value: s.user[n],
                    minlength: n === "pronouns" ? 0 : 3,
                    maxlength: 50,
                    text: `modals.dialogue.prompt.${n}_text`
                }, {
                    root: !0
                });
                o !== null && o !== s.user[n] && (e("updateUser", {
                    [n]: o.substring(0, 50)
                }),
                await t("updateUser", {
                    [n]: o.substring(0, 50)
                }))
            } catch {}
    },
    async linkPatreon({state: e}, s) {
        if (e.accessToken)
            return await ne("patreon", {
                code: s,
                redirect: window.location.origin
            }, e.accessToken)
    },
    async loadData({commit: e, state: s, dispatch: t, rootState: n}) {
        if (!s.accessToken)
            return;
        const {editions: o, roles: i, servers: l, nightOrder: g} = await Oe("data", s.accessToken);
        if (o != null && o.length)
            return e("setEditionsAvailable", o, {
                root: !0
            }),
            e("setNightOrder", g, {
                root: !0
            }),
            e("setNPCs", i.filter(d => n.definitions.NPC_TEAMS.includes(d.team)), {
                root: !0
            }),
            e("setRolesAvailable", i.filter(d => n.definitions.PLAYER_TEAMS.includes(d.team)), {
                root: !0
            }),
            t("chat/setServerList", l, {
                root: !0
            }),
            o;
        try {
            await t("openDialogue", {
                type: "alert",
                title: "modals.dialogue.error.loading_title",
                text: "modals.dialogue.error.loading_text"
            })
        } catch {} finally {
            window.location.reload()
        }
        return []
    },
    async setDownloadUrl({commit: e}, s=re.version) {
        let t = "";
        window.__TAURI__ && (t = await au());
        const {os: n} = Je();
        let o = `${Hd}/download/v${s}/Blood.on.the.Clocktower.Online_${s}_`;
        if ((n == null ? void 0 : n.name) === "macOS") {
            const i = [["Intel Mac", o + "x64.dmg"], ["M1+ Mac", o + "aarch64.dmg"]];
            return t ? t === "aarch64" ? e("setDownloadUrl", [i[1]]) : e("setDownloadUrl", [i[0]]) : e("setDownloadUrl", i)
        } else {
            if ((n == null ? void 0 : n.name) === "Windows")
                return e("setDownloadUrl", [["Windows", o + "x64-setup.exe"]]);
            ["Linux", "Unix", "Debian", "Ubuntu", "Arch", "SUSE", "RedHat", "Mint", "Xubuntu", "FreeBSD", "Fedora", "GNU", "OpenBSD"].includes(n == null ? void 0 : n.name)
        }
        return e("setDownloadUrl", [])
    },
    async checkVersion({commit: e, state: s, dispatch: t}) {
        try {
            let n;
            if (window.__TAURI__ && (n = await ou(),
            n && (e("setAppUpdate", n.version),
            await n.downloadAndInstall(),
            await nu())),
            !window.__TAURI__ || !n) {
                const o = []
                  , i = await fetch("https://api.github.com/repos/thepandemoniuminstitute/botc-release/tags");
                if (i && i.json) {
                    const l = await i.json();
                    l && l.length && l.forEach(g => o.push(g.name))
                }
                o.forEach( (l, g) => {
                    "v" + re.version === l && e("setNewVersions", g),
                    g || (e("setLatestVersion", l),
                    t("setDownloadUrl", l.substring(1)))
                }
                )
            }
        } catch {}
        s.newVersions > 1 && W.currentRoute.value.name !== "Update" ? await W.replace({
            name: "Update"
        }) : W.currentRoute.value.name === "Update" && await W.replace({
            name: "Grimoire"
        })
    }
}
  , pe = (e, s="") => (t, n) => {
    t[e] = n === void 0 ? s : n
}
  , t8 = {
    requestGrimoire: () => {}
    ,
    setNewVersions: pe("newVersions"),
    setAppUpdate: pe("appUpdate"),
    setServerTimeDiff: pe("serverTimeDiff"),
    setLatestVersion: pe("latestVersion"),
    setRefreshToken: pe("refreshToken"),
    setDownloadUrl: pe("downloadUrl"),
    setAccessToken: pe("accessToken"),
    setUser: pe("user", {}),
    setBan: pe("ban", {}),
    setRelations(e, s) {
        Array.isArray(s) ? e.relations = new Map(s.map(t => [t.relatedUserId, t])) : e.relations = new Map
    },
    updateUser(e, s) {
        Object.keys(s).forEach(t => {
            e.user[t] !== void 0 && (e.user[t] = s[t])
        }
        )
    },
    clearUser(e) {
        e.user = {},
        e.accessToken = "",
        e.refreshToken = "",
        e.ban = {},
        e.relations = new Map
    },
    addNotification(e, {type: s, payload: t}) {
        e.notifications.push({
            createdAt: Date.now(),
            type: s,
            payload: t
        })
    },
    removeNotification(e, {type: s, createdAt: t}={}) {
        !s && !t && (e.notifications = []),
        e.notifications = e.notifications.filter(n => !s && n.createdAt === t || !t && n.type === s ? !1 : !(n.type === s && n.createdAt === t))
    }
}
  , i8 = {
    namespaced: !0,
    state: qd,
    getters: e8,
    actions: s8,
    mutations: t8
}
  , o8 = () => ({
    nomination: !1,
    votes: [],
    locked: 0,
    speed: 1e3,
    isInProgress: !1,
    isHidden: !1,
    nominationType: "regular",
    history: [],
    markedPlayer: -1,
    selectedPlayer: -1,
    highscore: 0,
    voteTimer: null
})
  , n8 = {
    nomination(e) {
        const s = Object.assign({}, e);
        return delete s.history,
        !e.isInProgress && e.locked <= 0 && (s.isHidden = !1),
        e.isHidden && delete s.votes,
        s
    }
}
  , a8 = {
    nominatePlayer({state: e, commit: s, rootState: t, rootGetters: n}, o) {
        if (!n["user/isStoryteller"] || e.isInProgress || n["game/isNight"] || o[0] < 0 || t.session.hook.name === "reveal-grimoire")
            return;
        t.grimoire.mode !== "grimoire" && s("setGrimoireMode", "grimoire", {
            root: !0
        });
        const i = e.nominationType === "phases" ? -3 : 0;
        s("nomination", {
            nomination: o,
            locked: i
        })
    },
    addLogEntry({state: e, rootState: s, rootGetters: t, commit: n}) {
        const {players: o} = s.players;
        if (!e.nomination || e.locked <= o.length || !t["user/hasGrimoireAccess"])
            return;
        const i = o[e.nomination[1]].role.team === "traveller"
          , l = t["players/playerName"];
        n("addLogEntry", {
            timestamp: new Date,
            phase: s.game.phase,
            nominator: l(o[e.nomination[0]]),
            nominee: l(o[e.nomination[1]]),
            type: i ? "exile" : "execution",
            majority: Math.ceil(o.filter(g => !g.isDead || i).length / 2),
            votes: e.votes.reduce( (g, d) => g + (d || 0), 0),
            voters: o.map( (g, d) => [l(g), e.votes[d]]).filter( (g, d) => e.votes[d])
        })
    },
    setMarkedPlayer({state: e, rootState: s, commit: t}) {
        if (!e.nomination)
            return;
        const n = e.nomination[1];
        if (e.locked > s.players.players.length) {
            const o = e.votes.reduce( (i, l) => i + l, 0);
            o === e.highscore && e.markedPlayer > -1 && o ? t("setMarkedPlayer", -1) : t("setMarkedPlayer", n === e.markedPlayer ? -1 : n),
            o > e.highscore && t("setHighscore", {
                isInternal: !0,
                value: o
            })
        } else
            t("setMarkedPlayer", n === e.markedPlayer ? -1 : n)
    }
}
  , _e = e => (s, t) => {
    (t == null ? void 0 : t.value) !== void 0 ? s[e] = t.value : s[e] = t
}
  , r8 = {
    setVotingSpeed: _e("speed"),
    setMarkedPlayer: _e("markedPlayer"),
    setSelectedPlayer: _e("selectedPlayer"),
    setNomination: _e("nomination"),
    setHighscore: _e("highscore"),
    setNominationType: _e("nominationType"),
    toggleVoteInProgress: _e("isInProgress"),
    toggleIsHidden: _e("isHidden"),
    nomination(e, s={}) {
        var t, n, o, i;
        e.nomination = s.nomination || !1,
        e.votes = s.votes || [],
        e.locked = s.locked || 0,
        e.isInProgress = e.nomination && s.isInProgress || !1,
        e.isHidden = s.isHidden || !1,
        e.speed = s.speed || e.speed,
        e.markedPlayer = (t = s.markedPlayer) != null ? t : e.markedPlayer,
        e.highscore = (n = s.highscore) != null ? n : e.highscore,
        e.nominationType = (o = s.nominationType) != null ? o : e.nominationType,
        e.selectedPlayer = (i = s.selectedPlayer) != null ? i : -1,
        e.voteTimer && clearInterval(e.voteTimer),
        e.voteTimer = null
    },
    addLogEntry(e, s) {
        e.history.push(s)
    },
    setHistory(e, s) {
        e.history = s
    },
    clearHistory(e) {
        e.history = []
    },
    setVoteTimer(e, s=null) {
        e.voteTimer && clearInterval(e.voteTimer),
        e.voteTimer = s
    },
    castVote: (e, {index: s, value: t}) => {
        e.nomination && (e.votes = [...e.votes],
        e.votes[s] = t)
    }
    ,
    lockVote(e, s) {
        s != null && s.isInternal ? e.locked = s.value : e.locked = s !== void 0 ? s : e.locked + 1
    }
}
  , l8 = {
    namespaced: !0,
    state: o8,
    getters: n8,
    actions: a8,
    mutations: r8
}
  , c8 = () => ({
    general: {
        avatarZoom: 1,
        tokenZoom: 0,
        reminderZoom: 1,
        grimoireOffset: 0,
        background: "",
        colorblind: 0,
        isAnimationsDisabled: !1,
        isCosmeticsDisabled: !1,
        isImageOptIn: !1,
        isPositioningDisabled: !1,
        soundVolume: 1
    },
    game: {
        isNightOrder: !1,
        isNightRequestPing: !1,
        isPlayerBluffs: !1,
        isPlayerDuplicates: !1,
        isPlayerNightOrder: !1,
        isTouchSupport: !0,
        isEnglishNames: !0,
        isTutorialDisabled: !1,
        stackReminderTokens: null
    },
    sounds: new Map(In.map(e => [e, 1])),
    advanced: {
        chromaKey: "",
        customCSS: "",
        customCSSEnabled: !1,
        hasHiddenPrivateCams: !1,
        hasHiddenTownSquareCams: !1,
        hasNightStatic: !1,
        hasPublicTownSquare: !1,
        hasHiddenRevealCams: !1
    }
})
  , Ae = (e, s="general") => (t, n) => {
    s ? t[s][e] = n : t[e] = n
}
  , ee = (e, s="general") => (t, n) => {
    const o = t[s];
    n === !0 || n === !1 ? o[e] = n : n != null && n.isInternal ? o[e] = !!n.value : o[e] = !o[e]
}
  , d8 = {}
  , u8 = {}
  , g8 = {
    setAvatarZoom: Ae("avatarZoom"),
    setTokenZoom: Ae("tokenZoom"),
    setReminderZoom: Ae("reminderZoom"),
    setGrimoireOffset: Ae("grimoireOffset"),
    setColorblind: Ae("colorblind"),
    setBackground: Ae("background"),
    setSoundVolume: Ae("soundVolume"),
    togglePositioningDisabled: ee("isPositioningDisabled"),
    toggleAnimationsDisabled: ee("isAnimationsDisabled"),
    toggleCosmeticsDisabled: ee("isCosmeticsDisabled"),
    toggleImageOptIn: ee("isImageOptIn"),
    toggleTutorialDisabled: ee("isTutorialDisabled", "game"),
    toggleEnglishNames: ee("isEnglishNames", "game"),
    togglePlayerDuplicates: ee("isPlayerDuplicates", "game"),
    toggleNightOrder: ee("isNightOrder", "game"),
    togglePlayerNightOrder: ee("isPlayerNightOrder", "game"),
    togglePlayerBluffs: ee("isPlayerBluffs", "game"),
    toggleNightRequestPing: ee("isNightRequestPing", "game"),
    toggleTouchSupport: ee("isTouchSupport", "game"),
    toggleStackReminderTokens({game: e}, s) {
        s !== void 0 ? e.stackReminderTokens = s : e.stackReminderTokens === null ? e.stackReminderTokens = !0 : e.stackReminderTokens === !0 ? e.stackReminderTokens = !1 : e.stackReminderTokens = null
    },
    setSoundEffectVolume({sounds: e}, {id: s, value: t}) {
        e.has(s) && e.set(s, t)
    },
    toggleNightStatic: ee("hasNightStatic", "advanced"),
    toggleHiddenTownSquareCams: ee("hasHiddenTownSquareCams", "advanced"),
    toggleHiddenPrivateCams: ee("hasHiddenPrivateCams", "advanced"),
    toggleHiddenRevealCams: ee("hasHiddenRevealCams", "advanced"),
    togglePublicTownSquare: ee("hasPublicTownSquare", "advanced"),
    toggleCustomCSS: ee("customCSSEnabled", "advanced"),
    setChromaKey: Ae("chromaKey", "advanced"),
    setCustomCSS: Ae("customCSS", "advanced")
}
  , m8 = {
    namespaced: !0,
    state: c8,
    getters: d8,
    actions: u8,
    mutations: g8
}
  , me = (e, s) => (t, n) => {
    s ? t[s][e] = n : t[e] = n
}
  , ll = e => (e == null ? void 0 : e.toLocaleLowerCase().replace(/[^a-z0-9]/g, "")) || ""
  , cl = {
    townsfolk: "townsfolk",
    outsider: "outsider",
    minion: "minion",
    demon: "demon",
    fabled: "fabled",
    loric: "loric",
    traveller: "traveller"
}
  , h8 = ["townsfolk", "outsider", "minion", "demon", "traveller"]
  , p8 = ["fabled", "loric"]
  , Ke = {
    id: "",
    name: "",
    image: "",
    ability: "",
    flavor: "",
    edition: "custom",
    firstNight: 0,
    firstNightReminder: "",
    otherNight: 0,
    otherNightReminder: "",
    reminders: [],
    remindersGlobal: [],
    setup: !1,
    team: "",
    special: [],
    jinxes: [],
    isCustom: !0
}
  , we = new lu.Store({
    modules: {
        chat: UE,
        game: GE,
        players: XE,
        session: xE,
        user: i8,
        vote: l8,
        settings: m8
    },
    state: {
        definitions: {
            CUSTOM_ROLE: Ke,
            PLAYER_TEAMS: h8,
            NPC_TEAMS: p8
        },
        grimoire: {
            isTownSquare: !1,
            loadingState: "initial",
            menuOpen: "",
            mode: "grimoire",
            playerSelectCallback: null,
            playerDragState: -1,
            rightSideTabState: "",
            savedReminders: [],
            seats: [],
            sounds: [],
            tabs: {},
            theme: -1
        },
        positions: {},
        modal: {
            name: "",
            params: {}
        },
        edition: {},
        editionsAvailable: new Map,
        roles: new Map,
        rolesAvailable: new Map,
        nightOrder: {
            firstNight: [],
            otherNight: []
        },
        rolesSelected: [],
        npcs: new Map,
        keybindings: Object.fromEntries(Object.entries(Ge).map( ([e,s]) => [e, [...s]])),
        worldcup: {},
        worldcupVotes: new Map
    },
    getters: {
        editionExport({roles: e, grimoire: s, edition: t}, n, {players: o}) {
            const i = Object.keys(Ke)
              , l = !t.isOfficial
              , g = h => {
                if (h.isCustom) {
                    const m = {};
                    for (let p in h) {
                        const f = h[p];
                        p !== "isCustom" && i.includes(p) && JSON.stringify(f) !== JSON.stringify(Ke[p]) && (m[p] = f)
                    }
                    return m
                } else
                    return {
                        id: h.id
                    }
            }
              , d = {};
            return Object.keys(t).forEach(h => {
                ["id", "name", "background", "logo", "author", "firstNight", "otherNight", "isOfficial", "hideTitle", "bootlegger", "almanac"].includes(h) && (d[h] = t[h])
            }
            ),
            {
                edition: l ? d : {
                    id: t.id,
                    isOfficial: !0
                },
                theme: s.theme,
                roles: l ? [...e].map( ([,h]) => g(h)) : [],
                npcs: o.npcs.map(h => g(h))
            }
        },
        roleIconURL: ({roles: e, rolesAvailable: s, npcs: t}, n, {players: o, settings: i}) => (l, g="") => {
            var p;
            if (["custom", "good", "evil"].includes(l))
                return new URL(Object.assign({
                    "/src/assets/icons/card-ability.webp": Gs,
                    "/src/assets/icons/card-bluffs.webp": Ws,
                    "/src/assets/icons/card-choice.webp": Fs,
                    "/src/assets/icons/card-claim.webp": Qs,
                    "/src/assets/icons/card-demon.webp": Zs,
                    "/src/assets/icons/card-minions.webp": Xs,
                    "/src/assets/icons/card-selected.webp": Ks,
                    "/src/assets/icons/card-special.webp": Ys,
                    "/src/assets/icons/card-you.webp": Js,
                    "/src/assets/icons/custom.webp": Qa,
                    "/src/assets/icons/dawn.webp": Za,
                    "/src/assets/icons/demon-info.webp": Xa,
                    "/src/assets/icons/demon_e.webp": Ka,
                    "/src/assets/icons/demon_g.webp": Ya,
                    "/src/assets/icons/dusk.webp": Ja,
                    "/src/assets/icons/evil.webp": $a,
                    "/src/assets/icons/fabled.webp": xa,
                    "/src/assets/icons/good.webp": er,
                    "/src/assets/icons/loric.webp": sr,
                    "/src/assets/icons/minion-info.webp": tr,
                    "/src/assets/icons/minion_e.webp": ir,
                    "/src/assets/icons/minion_g.webp": or,
                    "/src/assets/icons/outsider_e.webp": nr,
                    "/src/assets/icons/outsider_g.webp": ar,
                    "/src/assets/icons/townsfolk_e.webp": rr,
                    "/src/assets/icons/townsfolk_g.webp": lr,
                    "/src/assets/icons/traveller.webp": cr,
                    "/src/assets/icons/traveller_e.webp": dr,
                    "/src/assets/icons/traveller_g.webp": ur,
                    "/src/assets/icons/x.webp": gr
                })[`/src/assets/icons/${l}.webp`],import.meta.url).href;
            if (l != null && l.id && Object.keys(l).length === 1 && (l = l.id),
            typeof l == "string" && (l = e.get(l) || s.get(l) || t.get(l) || o.npcs.find( ({id: f}) => f === l)),
            !l || !l.id)
                return new URL("/assets/custom-CLofFTEi.webp",import.meta.url).href;
            let d = "";
            if (["townsfolk", "outsider"].includes(l.team) && (d = "g"),
            ["minion", "demon"].includes(l.team) && (d = "e"),
            l.image && i.general.isImageOptIn && (W == null ? void 0 : W.currentRoute.value.name) === "Grimoire")
                return Array.isArray(l.image) ? l.image.length < 2 ? CSS.escape(l.image[0]) : l.team === "traveller" && g === "g" ? CSS.escape(l.image[1]) : l.team === "traveller" && g === "e" ? CSS.escape(l.image[2]) : g && g !== d ? CSS.escape(l.image[1]) : CSS.escape(l.image[0]) : CSS.escape(l.image);
            d && (d = "_" + d);
            let h = g ? "_" + g : d;
            if (l.isCustom || (p = t.get(l.id)) != null && p.isCustom || !s.has(l.id) && !t.has(l.id))
                return new URL(Object.assign({
                    "/src/assets/icons/card-ability.webp": Gs,
                    "/src/assets/icons/card-bluffs.webp": Ws,
                    "/src/assets/icons/card-choice.webp": Fs,
                    "/src/assets/icons/card-claim.webp": Qs,
                    "/src/assets/icons/card-demon.webp": Zs,
                    "/src/assets/icons/card-minions.webp": Xs,
                    "/src/assets/icons/card-selected.webp": Ks,
                    "/src/assets/icons/card-special.webp": Ys,
                    "/src/assets/icons/card-you.webp": Js,
                    "/src/assets/icons/custom.webp": Qa,
                    "/src/assets/icons/dawn.webp": Za,
                    "/src/assets/icons/demon-info.webp": Xa,
                    "/src/assets/icons/demon_e.webp": Ka,
                    "/src/assets/icons/demon_g.webp": Ya,
                    "/src/assets/icons/dusk.webp": Ja,
                    "/src/assets/icons/evil.webp": $a,
                    "/src/assets/icons/fabled.webp": xa,
                    "/src/assets/icons/good.webp": er,
                    "/src/assets/icons/loric.webp": sr,
                    "/src/assets/icons/minion-info.webp": tr,
                    "/src/assets/icons/minion_e.webp": ir,
                    "/src/assets/icons/minion_g.webp": or,
                    "/src/assets/icons/outsider_e.webp": nr,
                    "/src/assets/icons/outsider_g.webp": ar,
                    "/src/assets/icons/townsfolk_e.webp": rr,
                    "/src/assets/icons/townsfolk_g.webp": lr,
                    "/src/assets/icons/traveller.webp": cr,
                    "/src/assets/icons/traveller_e.webp": dr,
                    "/src/assets/icons/traveller_g.webp": ur,
                    "/src/assets/icons/x.webp": gr
                })[`/src/assets/icons/${cl[l.team] || "custom"}${h}.webp`],import.meta.url).href;
            const m = l.edition || "custom";
            return new URL(Object.assign({
                "/src/assets/icons/bmr/apprentice.webp": Bm,
                "/src/assets/icons/bmr/apprentice_e.webp": Vm,
                "/src/assets/icons/bmr/apprentice_g.webp": Om,
                "/src/assets/icons/bmr/assassin_e.webp": jm,
                "/src/assets/icons/bmr/assassin_g.webp": Um,
                "/src/assets/icons/bmr/bishop.webp": Hm,
                "/src/assets/icons/bmr/bishop_e.webp": qm,
                "/src/assets/icons/bmr/bishop_g.webp": Lm,
                "/src/assets/icons/bmr/chambermaid_e.webp": zm,
                "/src/assets/icons/bmr/chambermaid_g.webp": Gm,
                "/src/assets/icons/bmr/courtier_e.webp": Wm,
                "/src/assets/icons/bmr/courtier_g.webp": Fm,
                "/src/assets/icons/bmr/devilsadvocate_e.webp": Qm,
                "/src/assets/icons/bmr/devilsadvocate_g.webp": Zm,
                "/src/assets/icons/bmr/exorcist_e.webp": Xm,
                "/src/assets/icons/bmr/exorcist_g.webp": Km,
                "/src/assets/icons/bmr/fool_e.webp": Ym,
                "/src/assets/icons/bmr/fool_g.webp": Jm,
                "/src/assets/icons/bmr/gambler_e.webp": $m,
                "/src/assets/icons/bmr/gambler_g.webp": xm,
                "/src/assets/icons/bmr/godfather_e.webp": eh,
                "/src/assets/icons/bmr/godfather_g.webp": sh,
                "/src/assets/icons/bmr/goon_e.webp": th,
                "/src/assets/icons/bmr/goon_g.webp": ih,
                "/src/assets/icons/bmr/gossip_e.webp": oh,
                "/src/assets/icons/bmr/gossip_g.webp": nh,
                "/src/assets/icons/bmr/grandmother_e.webp": ah,
                "/src/assets/icons/bmr/grandmother_g.webp": rh,
                "/src/assets/icons/bmr/innkeeper_e.webp": lh,
                "/src/assets/icons/bmr/innkeeper_g.webp": ch,
                "/src/assets/icons/bmr/judge.webp": dh,
                "/src/assets/icons/bmr/judge_e.webp": uh,
                "/src/assets/icons/bmr/judge_g.webp": gh,
                "/src/assets/icons/bmr/lunatic_e.webp": mh,
                "/src/assets/icons/bmr/lunatic_g.webp": hh,
                "/src/assets/icons/bmr/mastermind_e.webp": ph,
                "/src/assets/icons/bmr/mastermind_g.webp": Ah,
                "/src/assets/icons/bmr/matron.webp": bh,
                "/src/assets/icons/bmr/matron_e.webp": fh,
                "/src/assets/icons/bmr/matron_g.webp": vh,
                "/src/assets/icons/bmr/minstrel_e.webp": yh,
                "/src/assets/icons/bmr/minstrel_g.webp": _h,
                "/src/assets/icons/bmr/moonchild_e.webp": wh,
                "/src/assets/icons/bmr/moonchild_g.webp": kh,
                "/src/assets/icons/bmr/pacifist_e.webp": Ch,
                "/src/assets/icons/bmr/pacifist_g.webp": Sh,
                "/src/assets/icons/bmr/po_e.webp": Ph,
                "/src/assets/icons/bmr/po_g.webp": Th,
                "/src/assets/icons/bmr/professor_e.webp": Ih,
                "/src/assets/icons/bmr/professor_g.webp": Mh,
                "/src/assets/icons/bmr/pukka_e.webp": Rh,
                "/src/assets/icons/bmr/pukka_g.webp": Dh,
                "/src/assets/icons/bmr/sailor_e.webp": Eh,
                "/src/assets/icons/bmr/sailor_g.webp": Nh,
                "/src/assets/icons/bmr/shabaloth_e.webp": Bh,
                "/src/assets/icons/bmr/shabaloth_g.webp": Vh,
                "/src/assets/icons/bmr/tealady_e.webp": Oh,
                "/src/assets/icons/bmr/tealady_g.webp": jh,
                "/src/assets/icons/bmr/tinker_e.webp": Uh,
                "/src/assets/icons/bmr/tinker_g.webp": Hh,
                "/src/assets/icons/bmr/voudon.webp": qh,
                "/src/assets/icons/bmr/voudon_e.webp": Lh,
                "/src/assets/icons/bmr/voudon_g.webp": zh,
                "/src/assets/icons/bmr/zombuul_e.webp": Gh,
                "/src/assets/icons/bmr/zombuul_g.webp": Wh,
                "/src/assets/icons/carousel/acrobat_e.webp": Fh,
                "/src/assets/icons/carousel/acrobat_g.webp": Qh,
                "/src/assets/icons/carousel/alchemist_e.webp": Zh,
                "/src/assets/icons/carousel/alchemist_g.webp": Xh,
                "/src/assets/icons/carousel/alhadikhia_e.webp": Kh,
                "/src/assets/icons/carousel/alhadikhia_g.webp": Yh,
                "/src/assets/icons/carousel/alsaahir_e.webp": Jh,
                "/src/assets/icons/carousel/alsaahir_g.webp": $h,
                "/src/assets/icons/carousel/amnesiac_e.webp": xh,
                "/src/assets/icons/carousel/amnesiac_g.webp": ep,
                "/src/assets/icons/carousel/atheist_e.webp": sp,
                "/src/assets/icons/carousel/atheist_g.webp": tp,
                "/src/assets/icons/carousel/balloonist_e.webp": ip,
                "/src/assets/icons/carousel/balloonist_g.webp": op,
                "/src/assets/icons/carousel/banshee_e.webp": np,
                "/src/assets/icons/carousel/banshee_g.webp": ap,
                "/src/assets/icons/carousel/boffin_e.webp": rp,
                "/src/assets/icons/carousel/boffin_g.webp": lp,
                "/src/assets/icons/carousel/boomdandy_e.webp": cp,
                "/src/assets/icons/carousel/boomdandy_g.webp": dp,
                "/src/assets/icons/carousel/bountyhunter_e.webp": up,
                "/src/assets/icons/carousel/bountyhunter_g.webp": gp,
                "/src/assets/icons/carousel/cacklejack.webp": mp,
                "/src/assets/icons/carousel/cacklejack_e.webp": hp,
                "/src/assets/icons/carousel/cacklejack_g.webp": pp,
                "/src/assets/icons/carousel/cannibal_e.webp": Ap,
                "/src/assets/icons/carousel/cannibal_g.webp": bp,
                "/src/assets/icons/carousel/choirboy_e.webp": fp,
                "/src/assets/icons/carousel/choirboy_g.webp": vp,
                "/src/assets/icons/carousel/cultleader_e.webp": yp,
                "/src/assets/icons/carousel/cultleader_g.webp": _p,
                "/src/assets/icons/carousel/damsel_e.webp": wp,
                "/src/assets/icons/carousel/damsel_g.webp": kp,
                "/src/assets/icons/carousel/engineer_e.webp": Cp,
                "/src/assets/icons/carousel/engineer_g.webp": Sp,
                "/src/assets/icons/carousel/farmer_e.webp": Pp,
                "/src/assets/icons/carousel/farmer_g.webp": Tp,
                "/src/assets/icons/carousel/fearmonger_e.webp": Ip,
                "/src/assets/icons/carousel/fearmonger_g.webp": Mp,
                "/src/assets/icons/carousel/fisherman_e.webp": Rp,
                "/src/assets/icons/carousel/fisherman_g.webp": Dp,
                "/src/assets/icons/carousel/gangster.webp": Ep,
                "/src/assets/icons/carousel/gangster_e.webp": Np,
                "/src/assets/icons/carousel/gangster_g.webp": Bp,
                "/src/assets/icons/carousel/general_e.webp": Vp,
                "/src/assets/icons/carousel/general_g.webp": Op,
                "/src/assets/icons/carousel/gnome.webp": jp,
                "/src/assets/icons/carousel/gnome_e.webp": Up,
                "/src/assets/icons/carousel/gnome_g.webp": Hp,
                "/src/assets/icons/carousel/goblin_e.webp": qp,
                "/src/assets/icons/carousel/goblin_g.webp": Lp,
                "/src/assets/icons/carousel/golem_e.webp": zp,
                "/src/assets/icons/carousel/golem_g.webp": Gp,
                "/src/assets/icons/carousel/harpy_e.webp": Wp,
                "/src/assets/icons/carousel/harpy_g.webp": Fp,
                "/src/assets/icons/carousel/hatter_e.webp": Qp,
                "/src/assets/icons/carousel/hatter_g.webp": Zp,
                "/src/assets/icons/carousel/heretic_e.webp": Xp,
                "/src/assets/icons/carousel/heretic_g.webp": Kp,
                "/src/assets/icons/carousel/hermit_e.webp": Yp,
                "/src/assets/icons/carousel/hermit_g.webp": Jp,
                "/src/assets/icons/carousel/highpriestess_e.webp": $p,
                "/src/assets/icons/carousel/highpriestess_g.webp": xp,
                "/src/assets/icons/carousel/huntsman_e.webp": eA,
                "/src/assets/icons/carousel/huntsman_g.webp": sA,
                "/src/assets/icons/carousel/kazali_e.webp": tA,
                "/src/assets/icons/carousel/kazali_g.webp": iA,
                "/src/assets/icons/carousel/king_e.webp": oA,
                "/src/assets/icons/carousel/king_g.webp": nA,
                "/src/assets/icons/carousel/knight_e.webp": aA,
                "/src/assets/icons/carousel/knight_g.webp": rA,
                "/src/assets/icons/carousel/legion_e.webp": lA,
                "/src/assets/icons/carousel/legion_g.webp": cA,
                "/src/assets/icons/carousel/leviathan_e.webp": dA,
                "/src/assets/icons/carousel/leviathan_g.webp": uA,
                "/src/assets/icons/carousel/lilmonsta_e.webp": gA,
                "/src/assets/icons/carousel/lilmonsta_g.webp": mA,
                "/src/assets/icons/carousel/lleech_e.webp": hA,
                "/src/assets/icons/carousel/lleech_g.webp": pA,
                "/src/assets/icons/carousel/lordoftyphon_e.webp": AA,
                "/src/assets/icons/carousel/lordoftyphon_g.webp": bA,
                "/src/assets/icons/carousel/lycanthrope_e.webp": fA,
                "/src/assets/icons/carousel/lycanthrope_g.webp": vA,
                "/src/assets/icons/carousel/magician_e.webp": yA,
                "/src/assets/icons/carousel/magician_g.webp": _A,
                "/src/assets/icons/carousel/marionette_e.webp": wA,
                "/src/assets/icons/carousel/marionette_g.webp": kA,
                "/src/assets/icons/carousel/mezepheles_e.webp": CA,
                "/src/assets/icons/carousel/mezepheles_g.webp": SA,
                "/src/assets/icons/carousel/nightwatchman_e.webp": PA,
                "/src/assets/icons/carousel/nightwatchman_g.webp": TA,
                "/src/assets/icons/carousel/noble_e.webp": IA,
                "/src/assets/icons/carousel/noble_g.webp": MA,
                "/src/assets/icons/carousel/ogre_e.webp": RA,
                "/src/assets/icons/carousel/ogre_g.webp": DA,
                "/src/assets/icons/carousel/ojo_e.webp": EA,
                "/src/assets/icons/carousel/ojo_g.webp": NA,
                "/src/assets/icons/carousel/organgrinder_e.webp": BA,
                "/src/assets/icons/carousel/organgrinder_g.webp": VA,
                "/src/assets/icons/carousel/pixie_e.webp": OA,
                "/src/assets/icons/carousel/pixie_g.webp": jA,
                "/src/assets/icons/carousel/plaguedoctor_e.webp": UA,
                "/src/assets/icons/carousel/plaguedoctor_g.webp": HA,
                "/src/assets/icons/carousel/politician_e.webp": qA,
                "/src/assets/icons/carousel/politician_g.webp": LA,
                "/src/assets/icons/carousel/poppygrower_e.webp": zA,
                "/src/assets/icons/carousel/poppygrower_g.webp": GA,
                "/src/assets/icons/carousel/preacher_e.webp": WA,
                "/src/assets/icons/carousel/preacher_g.webp": FA,
                "/src/assets/icons/carousel/princess_e.webp": QA,
                "/src/assets/icons/carousel/princess_g.webp": ZA,
                "/src/assets/icons/carousel/psychopath_e.webp": XA,
                "/src/assets/icons/carousel/psychopath_g.webp": KA,
                "/src/assets/icons/carousel/puzzlemaster_e.webp": YA,
                "/src/assets/icons/carousel/puzzlemaster_g.webp": JA,
                "/src/assets/icons/carousel/riot_e.webp": $A,
                "/src/assets/icons/carousel/riot_g.webp": xA,
                "/src/assets/icons/carousel/shugenja_e.webp": eb,
                "/src/assets/icons/carousel/shugenja_g.webp": sb,
                "/src/assets/icons/carousel/snitch_e.webp": tb,
                "/src/assets/icons/carousel/snitch_g.webp": ib,
                "/src/assets/icons/carousel/steward_e.webp": ob,
                "/src/assets/icons/carousel/steward_g.webp": nb,
                "/src/assets/icons/carousel/summoner_e.webp": ab,
                "/src/assets/icons/carousel/summoner_g.webp": rb,
                "/src/assets/icons/carousel/villageidiot_e.webp": lb,
                "/src/assets/icons/carousel/villageidiot_g.webp": cb,
                "/src/assets/icons/carousel/vizier_e.webp": db,
                "/src/assets/icons/carousel/vizier_g.webp": ub,
                "/src/assets/icons/carousel/widow_e.webp": gb,
                "/src/assets/icons/carousel/widow_g.webp": mb,
                "/src/assets/icons/carousel/wizard_e.webp": hb,
                "/src/assets/icons/carousel/wizard_g.webp": pb,
                "/src/assets/icons/carousel/wraith_e.webp": Ab,
                "/src/assets/icons/carousel/wraith_g.webp": bb,
                "/src/assets/icons/carousel/xaan_e.webp": fb,
                "/src/assets/icons/carousel/xaan_g.webp": vb,
                "/src/assets/icons/carousel/yaggababble_e.webp": yb,
                "/src/assets/icons/carousel/yaggababble_g.webp": _b,
                "/src/assets/icons/carousel/zealot_e.webp": wb,
                "/src/assets/icons/carousel/zealot_g.webp": kb,
                "/src/assets/icons/custom/thebigbarnacle_e.webp": Cb,
                "/src/assets/icons/fabled/angel.webp": Sb,
                "/src/assets/icons/fabled/buddhist.webp": Pb,
                "/src/assets/icons/fabled/deusexfiasco.webp": Tb,
                "/src/assets/icons/fabled/djinn.webp": Ib,
                "/src/assets/icons/fabled/doomsayer.webp": Mb,
                "/src/assets/icons/fabled/duchess.webp": Rb,
                "/src/assets/icons/fabled/ferryman.webp": Db,
                "/src/assets/icons/fabled/fibbin.webp": Eb,
                "/src/assets/icons/fabled/fiddler.webp": Nb,
                "/src/assets/icons/fabled/hellslibrarian.webp": Bb,
                "/src/assets/icons/fabled/revolutionary.webp": Vb,
                "/src/assets/icons/fabled/sentinel.webp": Ob,
                "/src/assets/icons/fabled/spiritofivory.webp": jb,
                "/src/assets/icons/fabled/toymaker.webp": Ub,
                "/src/assets/icons/loric/bigwig.webp": Hb,
                "/src/assets/icons/loric/bootlegger.webp": qb,
                "/src/assets/icons/loric/gardener.webp": Lb,
                "/src/assets/icons/loric/hindu.webp": zb,
                "/src/assets/icons/loric/pope.webp": Gb,
                "/src/assets/icons/loric/stormcatcher.webp": Wb,
                "/src/assets/icons/loric/tor.webp": Fb,
                "/src/assets/icons/loric/zenomancer.webp": Qb,
                "/src/assets/icons/snv/artist_e.webp": Zb,
                "/src/assets/icons/snv/artist_g.webp": Xb,
                "/src/assets/icons/snv/barber_e.webp": Kb,
                "/src/assets/icons/snv/barber_g.webp": Yb,
                "/src/assets/icons/snv/barista.webp": Jb,
                "/src/assets/icons/snv/barista_e.webp": $b,
                "/src/assets/icons/snv/barista_g.webp": xb,
                "/src/assets/icons/snv/bonecollector.webp": ef,
                "/src/assets/icons/snv/bonecollector_e.webp": sf,
                "/src/assets/icons/snv/bonecollector_g.webp": tf,
                "/src/assets/icons/snv/butcher.webp": of,
                "/src/assets/icons/snv/butcher_e.webp": nf,
                "/src/assets/icons/snv/butcher_g.webp": af,
                "/src/assets/icons/snv/cerenovus_e.webp": rf,
                "/src/assets/icons/snv/cerenovus_g.webp": lf,
                "/src/assets/icons/snv/clockmaker_e.webp": cf,
                "/src/assets/icons/snv/clockmaker_g.webp": df,
                "/src/assets/icons/snv/deviant.webp": uf,
                "/src/assets/icons/snv/deviant_e.webp": gf,
                "/src/assets/icons/snv/deviant_g.webp": mf,
                "/src/assets/icons/snv/dreamer_e.webp": hf,
                "/src/assets/icons/snv/dreamer_g.webp": pf,
                "/src/assets/icons/snv/eviltwin_e.webp": Af,
                "/src/assets/icons/snv/eviltwin_g.webp": bf,
                "/src/assets/icons/snv/fanggu_e.webp": ff,
                "/src/assets/icons/snv/fanggu_g.webp": vf,
                "/src/assets/icons/snv/flowergirl_e.webp": yf,
                "/src/assets/icons/snv/flowergirl_g.webp": _f,
                "/src/assets/icons/snv/harlot.webp": wf,
                "/src/assets/icons/snv/harlot_e.webp": kf,
                "/src/assets/icons/snv/harlot_g.webp": Cf,
                "/src/assets/icons/snv/juggler_e.webp": Sf,
                "/src/assets/icons/snv/juggler_g.webp": Pf,
                "/src/assets/icons/snv/klutz_e.webp": Tf,
                "/src/assets/icons/snv/klutz_g.webp": If,
                "/src/assets/icons/snv/mathematician_e.webp": Mf,
                "/src/assets/icons/snv/mathematician_g.webp": Rf,
                "/src/assets/icons/snv/mutant_e.webp": Df,
                "/src/assets/icons/snv/mutant_g.webp": Ef,
                "/src/assets/icons/snv/nodashii_e.webp": Nf,
                "/src/assets/icons/snv/nodashii_g.webp": Bf,
                "/src/assets/icons/snv/oracle_e.webp": Vf,
                "/src/assets/icons/snv/oracle_g.webp": Of,
                "/src/assets/icons/snv/philosopher_e.webp": jf,
                "/src/assets/icons/snv/philosopher_g.webp": Uf,
                "/src/assets/icons/snv/pithag_e.webp": Hf,
                "/src/assets/icons/snv/pithag_g.webp": qf,
                "/src/assets/icons/snv/sage_e.webp": Lf,
                "/src/assets/icons/snv/sage_g.webp": zf,
                "/src/assets/icons/snv/savant_e.webp": Gf,
                "/src/assets/icons/snv/savant_g.webp": Wf,
                "/src/assets/icons/snv/seamstress_e.webp": Ff,
                "/src/assets/icons/snv/seamstress_g.webp": Qf,
                "/src/assets/icons/snv/snakecharmer_e.webp": Zf,
                "/src/assets/icons/snv/snakecharmer_g.webp": Xf,
                "/src/assets/icons/snv/sweetheart_e.webp": Kf,
                "/src/assets/icons/snv/sweetheart_g.webp": Yf,
                "/src/assets/icons/snv/towncrier_e.webp": Jf,
                "/src/assets/icons/snv/towncrier_g.webp": $f,
                "/src/assets/icons/snv/vigormortis_e.webp": xf,
                "/src/assets/icons/snv/vigormortis_g.webp": ev,
                "/src/assets/icons/snv/vortox_e.webp": sv,
                "/src/assets/icons/snv/vortox_g.webp": tv,
                "/src/assets/icons/snv/witch_e.webp": iv,
                "/src/assets/icons/snv/witch_g.webp": ov,
                "/src/assets/icons/tb/baron_e.webp": nv,
                "/src/assets/icons/tb/baron_g.webp": av,
                "/src/assets/icons/tb/beggar.webp": rv,
                "/src/assets/icons/tb/beggar_e.webp": lv,
                "/src/assets/icons/tb/beggar_g.webp": cv,
                "/src/assets/icons/tb/bureaucrat.webp": dv,
                "/src/assets/icons/tb/bureaucrat_e.webp": uv,
                "/src/assets/icons/tb/bureaucrat_g.webp": gv,
                "/src/assets/icons/tb/butler_e.webp": mv,
                "/src/assets/icons/tb/butler_g.webp": hv,
                "/src/assets/icons/tb/chef_e.webp": pv,
                "/src/assets/icons/tb/chef_g.webp": Av,
                "/src/assets/icons/tb/drunk_e.webp": bv,
                "/src/assets/icons/tb/drunk_g.webp": fv,
                "/src/assets/icons/tb/empath_e.webp": vv,
                "/src/assets/icons/tb/empath_g.webp": yv,
                "/src/assets/icons/tb/fortuneteller_e.webp": _v,
                "/src/assets/icons/tb/fortuneteller_g.webp": wv,
                "/src/assets/icons/tb/gunslinger.webp": kv,
                "/src/assets/icons/tb/gunslinger_e.webp": Cv,
                "/src/assets/icons/tb/gunslinger_g.webp": Sv,
                "/src/assets/icons/tb/imp_e.webp": Pv,
                "/src/assets/icons/tb/imp_g.webp": Tv,
                "/src/assets/icons/tb/investigator_e.webp": Iv,
                "/src/assets/icons/tb/investigator_g.webp": Mv,
                "/src/assets/icons/tb/librarian_e.webp": Rv,
                "/src/assets/icons/tb/librarian_g.webp": Dv,
                "/src/assets/icons/tb/mayor_e.webp": Ev,
                "/src/assets/icons/tb/mayor_g.webp": Nv,
                "/src/assets/icons/tb/monk_e.webp": Bv,
                "/src/assets/icons/tb/monk_g.webp": Vv,
                "/src/assets/icons/tb/poisoner_e.webp": Ov,
                "/src/assets/icons/tb/poisoner_g.webp": jv,
                "/src/assets/icons/tb/ravenkeeper_e.webp": Uv,
                "/src/assets/icons/tb/ravenkeeper_g.webp": Hv,
                "/src/assets/icons/tb/recluse_e.webp": qv,
                "/src/assets/icons/tb/recluse_g.webp": Lv,
                "/src/assets/icons/tb/saint_e.webp": zv,
                "/src/assets/icons/tb/saint_g.webp": Gv,
                "/src/assets/icons/tb/scapegoat.webp": Wv,
                "/src/assets/icons/tb/scapegoat_e.webp": Fv,
                "/src/assets/icons/tb/scapegoat_g.webp": Qv,
                "/src/assets/icons/tb/scarletwoman_e.webp": Zv,
                "/src/assets/icons/tb/scarletwoman_g.webp": Xv,
                "/src/assets/icons/tb/slayer_e.webp": Kv,
                "/src/assets/icons/tb/slayer_g.webp": Yv,
                "/src/assets/icons/tb/soldier_e.webp": Jv,
                "/src/assets/icons/tb/soldier_g.webp": $v,
                "/src/assets/icons/tb/spy_e.webp": xv,
                "/src/assets/icons/tb/spy_g.webp": ey,
                "/src/assets/icons/tb/thief.webp": sy,
                "/src/assets/icons/tb/thief_e.webp": ty,
                "/src/assets/icons/tb/thief_g.webp": iy,
                "/src/assets/icons/tb/undertaker_e.webp": oy,
                "/src/assets/icons/tb/undertaker_g.webp": ny,
                "/src/assets/icons/tb/virgin_e.webp": ay,
                "/src/assets/icons/tb/virgin_g.webp": ry,
                "/src/assets/icons/tb/washerwoman_e.webp": ly,
                "/src/assets/icons/tb/washerwoman_g.webp": cy
            })[`/src/assets/icons/${m}/${l.id}${h}.webp`],import.meta.url).href
        }
        ,
        isHomebrew({roles: e, edition: s}, t, {players: n}) {
            var o;
            return [...e.values(), ...n.npcs].some( ({isCustom: i}) => i) || ((o = s.bootlegger) == null ? void 0 : o.length)
        },
        isJinxed({roles: e}) {
            return [...e].some( ([,s]) => s.jinxes ? s.jinxes.some(t => e.has(t.id)) : !1)
        },
        filterAbilities: ({game: e, roles: s}, t) => ({isDead: n, role: o={}}={}, i="") => {
            const l = ({type: h, time: m, name: p}) => {
                const f = ["night", "firstNight", "otherNight"]
                  , P = ["day", "firstDay", "otherDay"];
                return h !== i || f.includes(m) && !t["game/isNight"] || P.includes(m) && t["game/isNight"] || m === "firstNight" && e.phase > 1 || m === "otherNight" && e.phase === 1 || m === "firstDay" && e.phase > 2 || m === "otherDay" && e.phase === 2 || m === "pregame" && e.isRunning && e.phase > 0 ? !1 : !!p
            }
              , d = (Array.isArray(o.special) ? o.special : []).filter(l).map(h => ({
                role: o,
                ability: h
            }));
            return s.forEach(h => {
                if (!Array.isArray(h.special))
                    return;
                const m = h.special.filter( ({global: p}) => o.team && p === o.team ? !0 : p === "dead" && n).filter(p => !d.some(f => f.ability === p)).filter(l).map(p => ({
                    role: h,
                    ability: p
                }));
                d.push(...m)
            }
            ),
            d
        }
        ,
        specialRoles: ({edition: e, nightOrder: s}) => {
            var t, n, o, i, l, g;
            return {
                dusk: {
                    id: "dusk",
                    name: "Dusk",
                    firstNight: (t = e.firstNight) != null && t.includes("dusk") ? e.firstNight.indexOf("dusk") + 1 : s.firstNight.indexOf("dusk") + 1,
                    otherNight: (n = e.otherNight) != null && n.includes("dusk") ? e.otherNight.indexOf("dusk") + 1 : s.otherNight.indexOf("dusk") + 1,
                    firstNightReminder: "Start the Night Phase.",
                    otherNightReminder: "Start the Night Phase."
                },
                dawn: {
                    id: "dawn",
                    name: "Dawn",
                    firstNight: (o = e.firstNight) != null && o.includes("dawn") ? e.firstNight.indexOf("dawn") + 1 : s.firstNight.indexOf("dawn") + 1,
                    otherNight: (i = e.otherNight) != null && i.includes("dawn") ? e.otherNight.indexOf("dawn") + 1 : s.otherNight.indexOf("dawn") + 1,
                    firstNightReminder: "Wait for a few seconds. End the Night Phase.",
                    otherNightReminder: "Wait for a few seconds. End the Night Phase."
                },
                minioninfo: {
                    id: "minioninfo",
                    name: "Minion Info",
                    firstNight: (l = e.firstNight) != null && l.includes("minioninfo") ? e.firstNight.indexOf("minioninfo") + 1 : s.firstNight.indexOf("minioninfo") + 1,
                    firstNightReminder: "If there are 7 or more players, wake all Minions: Show the *THIS IS THE DEMON* token. Point to the Demon. Show the *THESE ARE YOUR MINIONS* token. Point to the other Minions."
                },
                demoninfo: {
                    id: "demoninfo",
                    name: "Demon Info",
                    firstNight: (g = e.firstNight) != null && g.includes("demoninfo") ? e.firstNight.indexOf("demoninfo") + 1 : s.firstNight.indexOf("demoninfo") + 1,
                    firstNightReminder: "If there are 7 or more players, wake the Demon: Show the *THESE ARE YOUR MINIONS* token. Point to all Minions. Show the *THESE CHARACTERS ARE NOT IN PLAY* token. Show 3 not-in-play good character tokens."
                }
            }
        }
    },
    actions: {
        openDialogue({commit: e}, s) {
            return new Promise( (t, n) => {
                s.resolve = t,
                s.reject = n,
                e("toggleModal", {
                    name: "dialogue",
                    params: s
                })
            }
            )
        },
        showError({commit: e}, [s,t]) {
            e("toggleModal", {
                name: "dialogue",
                params: {
                    type: "alert",
                    title: s,
                    text: t
                }
            })
        },
        async loadEdition({state: e, commit: s}, t) {
            if (!t)
                return;
            const {edition: n={}, roles: o, theme: i, isInternal: l} = t;
            if (Array.isArray(o) && o.length && (s("setCustomRoles", o),
            o.some(g => !e.roles.has(g.id || g[0]) && !e.npcs.has(g.id || g[0])))) {
                const g = [];
                o.forEach(h => {
                    const m = h.id || h[0];
                    !e.roles.has(m) && !e.npcs.has(m) && g.push(m)
                }
                );
                const d = new Error("modals.dialogue.error.missing_roles");
                throw d.name = "modals.dialogue.error.missing_roles_title",
                d.params = [g.join(", ")],
                d
            }
            if (n.id)
                if (!n.isOfficial || e.editionsAvailable.has(n.id))
                    s("setEdition", {
                        edition: n,
                        theme: i,
                        isInternal: l
                    });
                else {
                    const g = new Error("modals.dialogue.error.missing_edition");
                    throw g.name = "modals.dialogue.error.missing_edition_title",
                    g
                }
            else
                i !== void 0 && i !== e.grimoire.theme && s("setTheme", {
                    theme: i,
                    isInternal: l
                });
            e.players.bluffs.some(g => !e.roles.has(g.id)) && s("players/setBluff", {
                bluff: e.players.bluffs.filter(g => e.roles.has(g.id)),
                isInternal: !0
            })
        },
        async loadWorldcup({commit: e, state: s}) {
            var t;
            if (!((t = s.worldcup.scripts) != null && t.length))
                try {
                    const o = await (await fetch("https://release.botc.app/wc25/data.json")).json()
                      , i = l => {
                        if (l.time + o.votePeriod > Date.now()) {
                            const g = Math.abs(l.time + o.votePeriod - Date.now()) / 1e3;
                            g > 3600 * 24 ? l.voteRemaining = Math.floor(g / (3600 * 24)) + " day" + (Math.floor(g / (3600 * 24)) > 1 ? "s" : "") : g > 3600 ? l.voteRemaining = Math.floor(g / 3600) + "h" : g > 60 ? l.voteRemaining = Math.floor(g / 60) + "min" : l.voteRemaining = Math.round(g) + "s"
                        }
                        return l
                    }
                    ;
                    e("setWorldcup", {
                        scripts: o.scripts.map( (l, g) => ({
                            ...l,
                            group: String.fromCharCode(65 + Math.floor(g / 4)),
                            points: o.matches.reduce( (d, h) => {
                                var m, p;
                                return h.scripts.includes(g) ? d + ((p = (m = h.results) == null ? void 0 : m[h.scripts.indexOf(g)]) != null ? p : 0) : d
                            }
                            , 0),
                            matches: o.matches.filter(d => {
                                var h;
                                return d.scripts.includes(g) && ((h = d.results) == null ? void 0 : h.length)
                            }
                            ).length
                        })),
                        channels: o.channels,
                        matches: o.matches.sort( (l, g) => l.time - g.time).map(i),
                        playoffs: o.playoffs.map(i),
                        votePeriod: o.votePeriod
                    })
                } catch {}
        }
    },
    mutations: {
        setGrimoireMode: me("mode", "grimoire"),
        setLoadingState: me("loadingState", "grimoire"),
        setPlayerDragState: me("playerDragState", "grimoire"),
        setPlayerSelectCallback: me("playerSelectCallback", "grimoire"),
        setRightSideTabState: me("rightSideTabState", "grimoire"),
        setPositions: me("positions"),
        setKeybindings: me("keybindings"),
        setRolesSelected: me("rolesSelected"),
        setWorldcup: me("worldcup"),
        setWorldcupVotes: me("worldcupVotes"),
        setWorldcupVote(e, {match: s, choice: t}) {
            t == null ? e.worldcupVotes.delete(s) : e.worldcupVotes.set(s, t)
        },
        toggleTownSquare({grimoire: e}, s) {
            s === !0 || s === !1 ? e.isTownSquare = s : e.isTownSquare = !e.isTownSquare
        },
        toggleSavedReminder({grimoire: e}, s) {
            if (Array.isArray(s))
                e.savedReminders = s;
            else {
                const t = e.savedReminders.indexOf(s);
                t > -1 ? e.savedReminders.splice(t, 1) : e.savedReminders.push(s)
            }
        },
        toggleModal(e, {name: s="", params: t={}}={}) {
            if (e.modal.params.isImportant && s) {
                typeof (t == null ? void 0 : t.reject) == "function" && t.reject(!1);
                return
            }
            e.modal.params.reject && e.modal.params.reject(!1),
            e.modal.params = t,
            t.tab !== void 0 && (e.grimoire.tabs["modal-" + s] = t.tab),
            e.modal.name = e.modal.name === s && s !== "dialogue" ? "" : s
        },
        setPosition({positions: e}, {name: s, value: t}) {
            e[s] = t
        },
        setTab: ({grimoire: e}, {tab: s, value: t}) => {
            s && (e.tabs[s] = t != null ? t : !1)
        }
        ,
        setSeatName: ({grimoire: e}, {seat: s, name: t, seats: n}) => {
            n ? e.seats = n : t ? e.seats[s] = t : delete e.seats[s]
        }
        ,
        setMenuOpen: ({grimoire: e}, s) => {
            !s || s === e.menuOpen ? e.menuOpen = "" : e.menuOpen = s
        }
        ,
        setEditionsAvailable: (e, s) => {
            e.editionsAvailable = new Map(s.map(t => [t.id, t]))
        }
        ,
        setRolesAvailable: (e, s) => {
            e.rolesAvailable = new Map(s.map(t => (e.nightOrder.firstNight.includes(t.id) && t.firstNightReminder ? t.firstNight = e.nightOrder.firstNight.indexOf(t.id) + 1 : t.firstNight = 0,
            e.nightOrder.otherNight.includes(t.id) && t.otherNightReminder ? t.otherNight = e.nightOrder.otherNight.indexOf(t.id) + 1 : t.otherNight = 0,
            [t.id, t])))
        }
        ,
        setNightOrder: (e, {firstNight: s=[], otherNight: t=[]}={}) => {
            e.nightOrder = {
                firstNight: s,
                otherNight: t
            },
            e.rolesAvailable.forEach( (n, o) => {
                e.nightOrder.firstNight.includes(o) && n.firstNightReminder ? n.firstNight = e.nightOrder.firstNight.indexOf(o) + 1 : n.firstNight = 0,
                e.nightOrder.otherNight.includes(o) && n.otherNightReminder ? n.otherNight = e.nightOrder.otherNight.indexOf(o) + 1 : n.otherNight = 0,
                e.rolesAvailable.set(o, n)
            }
            )
        }
        ,
        setNPCs: (e, s) => {
            e.npcs = new Map(s.map(t => [t.id, t]))
        }
        ,
        playSound: ({grimoire: e}, s) => {
            e.sounds.push({
                name: s,
                timestamp: Date.now()
            })
        }
        ,
        removeSound: ({grimoire: e}, {timestamp: s, name: t}) => {
            e.sounds = e.sounds.filter(n => n.timestamp !== s && n.name !== t)
        }
        ,
        setCustomRoles(e, s) {
            const t = e.definitions.NPC_TEAMS
              , n = [...e.definitions.PLAYER_TEAMS, ...e.definitions.NPC_TEAMS]
              , o = e.npcs.has("bootlegger")
              , i = s.map(l => (l.id = ll(l.id),
            l)).map(l => e.rolesAvailable.get(l.id) || (o ? Object.assign({}, Ke, l, {
                isCustom: !0
            }) : {})).map(l => (e.rolesAvailable.get(l.id) || (l.imageAlt = cl[l.team] || "custom",
            l.firstNight = Math.abs(l.firstNight),
            l.otherNight = Math.abs(l.otherNight),
            l.jinxes && l.jinxes.length && l.jinxes.forEach(g => {
                g.id = ll(g.id)
            }
            ),
            l.special && !Array.isArray(l.special) && delete l.special),
            l)).filter(l => l.name && l.ability && l.team).sort( (l, g) => n.indexOf(l.team) - n.indexOf(g.team));
            i.filter(l => !t.includes(l.team)).length && (e.roles = new Map(i.map(l => [l.id, l])),
            e.npcs = new Map([...i.filter(l => t.includes(l.team)).map(l => [l.id, l]), ...[...e.npcs].filter( ([,l]) => !l.isCustom)]),
            e.rolesSelected = [])
        },
        toggleRole(e, {id: s, add: t}={}) {
            const n = (o, i, l) => {
                var g, d, h, m;
                return (m = (h = (d = (g = e.roles.get(o)) != null ? g : e.rolesAvailable.get(o)) != null ? d : {}) == null ? void 0 : h.special) == null ? void 0 : m.some(p => p.type === i && p.name === l)
            }
            ;
            if (s) {
                const o = e.rolesSelected.indexOf(s);
                o > -1 && !t ? (e.rolesSelected.splice(o, 1),
                n(s, "selection", "good-duplicate") && !e.rolesSelected.some(i => n(i, "selection", "good-duplicate")) && (e.rolesSelected = e.rolesSelected.filter( (i, l) => l === e.rolesSelected.indexOf(i) || n(i, "selection", "bag-duplicate")))) : e.rolesSelected.push(s)
            } else
                e.rolesSelected = []
        },
        setEdition(e, {edition: s, theme: t=0}) {
            if (!s)
                return;
            if (e.editionsAvailable.has(s.id) && s.isOfficial !== !1) {
                const {id: o} = s;
                e.edition = e.editionsAvailable.get(o);
                const i = ["townsfolk", "outsider", "minion", "demon", "traveller"];
                e.roles = new Map([...e.rolesAvailable].filter( ([,l]) => l.edition === o).sort( (l, g) => {
                    var d, h, m, p;
                    return ((h = (d = e.edition.roles) == null ? void 0 : d.indexOf(l[1].id)) != null ? h : i.indexOf(l[1].team)) - ((p = (m = e.edition.roles) == null ? void 0 : m.indexOf(g[1].id)) != null ? p : i.indexOf(g[1].team))
                }
                )),
                e.npcs = new Map([...e.npcs].filter( ([,l]) => !l.isCustom)),
                e.rolesSelected = []
            } else
                s.isOfficial || (e.edition = s);
            const n = ([o,i]) => {
                var l, g, d, h;
                return [o, Object.assign({}, i, {
                    firstNight: i.firstNightReminder && ((l = e.edition.firstNight) != null && l.includes(o)) ? e.edition.firstNight.indexOf(o) + 1 : i.firstNightReminder && e.nightOrder.firstNight.includes(o) ? e.nightOrder.firstNight.indexOf(o) + 1 : (g = i.firstNight) != null ? g : 0,
                    otherNight: i.otherNightReminder && ((d = e.edition.otherNight) != null && d.includes(o)) ? e.edition.otherNight.indexOf(o) + 1 : i.otherNightReminder && e.nightOrder.otherNight.includes(o) ? e.nightOrder.otherNight.indexOf(o) + 1 : (h = i.otherNight) != null ? h : 0
                })]
            }
            ;
            e.roles = new Map([...e.roles].map(n)),
            e.npcs = new Map([...e.npcs].map(n)),
            e.grimoire.theme = t
        },
        setTheme(e, {theme: s}) {
            e.grimoire.theme = s
        }
    },
    plugins: [gE, EE, HI, uE]
})
  , A8 = ["AddressCard", "ArrowCircleDown", "ArrowCircleLeft", "ArrowCircleRight", "ArrowCircleUp", "ArrowsAlt", "ArrowsToDot", "Book", "BookDead", "Bug", "Bullhorn", "Chair", "CheckCircle", "Circle", "Clipboard", "Cloud", "CloudMoon", "Cog", "CommentDots", "Comments", "Copy", "Crown", "Dice", "DiceOne", "DiceTwo", "DiceThree", "DiceFour", "DiceFive", "Download", "EarDeaf", "Envelope", "ExchangeAlt", "ExclamationTriangle", "Eye", "EyeSlash", "FaceFrown", "FaceSmile", "FileCode", "FilePdf", "FileUpload", "Gavel", "Hand", "HandFist", "HandLizard", "HandMiddleFinger", "HandPeace", "HandPointRight", "HandSpock", "Headphones", "Heartbeat", "HourglassHalf", "Image", "InfoCircle", "Keyboard", "Language", "Link", "LinkSlash", "Lock", "LockOpen", "MagnifyingGlassMinus", "MagnifyingGlassPlus", "Microphone", "MicrophoneSlash", "MinusCircle", "PauseCircle", "PaperPlane", "PenToSquare", "PeopleArrows", "PlayCircle", "PlusCircle", "Random", "RedoAlt", "RotateLeft", "RotateRight", "SearchMinus", "SearchPlus", "Seedling", "Signal", "SignOutAlt", "Skull", "SlidersH", "Splotch", "Square", "Star", "Stopwatch", "Sun", "TheaterMasks", "ThumbsUp", "ThumbsDown", "Thumbtack", "Times", "TimesCircle", "TrashAlt", "Undo", "User", "UserEdit", "UserPlus", "UserSlash", "UserFriends", "UserXmark", "Users", "VenusMars", "Video", "VideoSlash", "VolumeUp", "VolumeMute", "WindowRestore", "YinYang", "Wifi"];
cu.add(...A8.map(e => du["fa" + e]));
const b8 = async () => {
    const e = uu(Nm)
      , s = await Hu();
    {
        const t = () => {
            var n, o;
            return document.documentElement.lang !== ((n = s.global) == null ? void 0 : n.locale.value) || ((o = document.getElementsByTagName("title")[0]) == null ? void 0 : o.hasAttribute("_msttexthash")) || document.querySelectorAll("[papago-translate]").length
        }
        ;
        gu({
            app: e,
            dsn: "https://a690916c14ce77b29bb0c6d77a26dd29@o4509212719251456.ingest.de.sentry.io/4509212720496720",
            release: "botc-app@" + re.version,
            environment: "production",
            sendDefaultPii: !0,
            ignoreErrors: ["TurnstileError"],
            integrations: [mu({
                maskAllText: !1,
                unblock: ["img", "svg", "object", "picture"],
                beforeErrorSampling: () => !t()
            })],
            replaysSessionSampleRate: .01,
            replaysOnErrorSampleRate: 1,
            beforeSend: n => t() ? null : (n.tags || (n.tags = {}),
            n.tags.app = window.__TAURI__ ? "standalone" : "browser",
            we.state.session.sessionId && (n.tags.session = we.state.session.sessionId),
            n.context || (n.context = {}),
            n.contexts.session = Object.assign({}, we.state.session),
            delete n.contexts.session.code,
            delete n.contexts.session.meta,
            delete n.contexts.session.raisedHands,
            n.contexts.user = Object.assign({}, we.state.user),
            delete n.contexts.user.levels,
            delete n.contexts.user.downloadUrl,
            n)
        })
    }
    e.use(we).use(W).use(s).component("font-awesome-icon", hl).mount("#main")
}
;
b8();
//# sourceMappingURL=index-CfL6l23t.js.map
