import {c as Vd, m as $, a as j, b as D, d as I, e as ol, U as Ke, r as k, f as u, o as r, g as b, h as a, w as S, i as p, j as v, t as d, T as q, n as y, k as C, l as M, F as _, p as L, q as B, u as be, s as Y, _ as it, v as ot, x as nt, y as at, z as rt, A as lt, B as ct, C as dt, D as ut, E as gt, G as mt, H as ht, I as pt, J as At, K as bt, L as ft, M as vt, N as _t, O as yt, P as wt, Q as kt, R as Ct, S as St, V as Pt, W as Tt, X as It, Y as Mt, Z as Rt, $ as Dt, a0 as Et, a1 as Nt, a2 as Bt, a3 as Vt, a4 as Ot, a5 as jt, a6 as Ut, a7 as Ht, a8 as qt, a9 as Lt, aa as zt, ab as Gt, ac as Wt, ad as Ft, ae as Qt, af as Zt, ag as Xt, ah as Kt, ai as Yt, aj as Jt, ak as $t, al as xt, am as ei, an as si, ao as ti, ap as ii, aq as oi, ar as ni, as as ai, at as ri, au as li, av as ci, aw as di, ax as ui, ay as gi, az as mi, aA as hi, aB as pi, aC as Ai, aD as bi, aE as fi, aF as vi, aG as _i, aH as yi, aI as wi, aJ as ki, aK as Ci, aL as Si, aM as Pi, aN as Ti, aO as Ii, aP as Mi, aQ as Ri, aR as Di, aS as Ei, aT as Ni, aU as Bi, aV as Vi, aW as Oi, aX as ji, aY as Ui, aZ as Hi, a_ as qi, a$ as Li, b0 as zi, b1 as Gi, b2 as Wi, b3 as Fi, b4 as Qi, b5 as Zi, b6 as Xi, b7 as Ki, b8 as Yi, b9 as Ji, ba as $i, bb as xi, bc as eo, bd as so, be as to, bf as io, bg as oo, bh as no, bi as ao, bj as ro, bk as lo, bl as co, bm as uo, bn as go, bo as mo, bp as ho, bq as po, br as Ao, bs as bo, bt as fo, bu as vo, bv as _o, bw as yo, bx as wo, by as ko, bz as Co, bA as So, bB as Po, bC as To, bD as Io, bE as Mo, bF as Ro, bG as Do, bH as Eo, bI as No, bJ as Bo, bK as Vo, bL as Oo, bM as jo, bN as Uo, bO as Ho, bP as qo, bQ as Lo, bR as zo, bS as Go, bT as Wo, bU as Fo, bV as Qo, bW as Zo, bX as Xo, bY as Ko, bZ as Yo, b_ as Jo, b$ as $o, c0 as xo, c1 as en, c2 as sn, c3 as tn, c4 as on, c5 as nn, c6 as an, c7 as rn, c8 as ln, c9 as cn, ca as dn, cb as un, cc as gn, cd as mn, ce as hn, cf as pn, cg as An, ch as bn, ci as fn, cj as vn, ck as _n, cl as yn, cm as wn, cn as kn, co as Cn, cp as Sn, cq as Pn, cr as z, cs as Ae, ct as Se, cu as Od, cv as Hs, cw as Ye, cx as nl, cy as al, cz as W, cA as jd, cB as qe, cC as Ud, cD as Hd, cE as qd, cF as Ra, cG as qs, cH as Ld, cI as rl, cJ as X, cK as zd, cL as Gd, cM as ll, cN as Wd, cO as Fd, cP as Qd, cQ as Zd, cR as Xd, cS as Kd, cT as cl, cU as Yd, cV as Jd, cW as $d, cX as Da, cY as xd, cZ as eu, c_ as su, c$ as tu, d0 as iu} from "./vendor-kDF4Azcn.js";
(function() {
    try {
        var e = typeof window < "u" ? window : typeof global < "u" ? global : typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : {};
        e.SENTRY_RELEASE = {
            id: "botc-app@3.48.1"
        }
    } catch {}
}
)();
try {
    (function() {
        var e = typeof window < "u" ? window : typeof global < "u" ? global : typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : {}
          , s = new e.Error().stack;
        s && (e._sentryDebugIds = e._sentryDebugIds || {},
        e._sentryDebugIds[s] = "9250ade3-f347-4103-9348-68bbd43a5577",
        e._sentryDebugIdIdentifier = "sentry-dbid-9250ade3-f347-4103-9348-68bbd43a5577")
    }
    )()
} catch {}
(function() {
    const s = document.createElement("link").relList;
    if (s && s.supports && s.supports("modulepreload"))
        return;
    for (const i of document.querySelectorAll('link[rel="modulepreload"]'))
        n(i);
    new MutationObserver(i => {
        for (const o of i)
            if (o.type === "childList")
                for (const l of o.addedNodes)
                    l.tagName === "LINK" && l.rel === "modulepreload" && n(l)
    }
    ).observe(document, {
        childList: !0,
        subtree: !0
    });
    function t(i) {
        const o = {};
        return i.integrity && (o.integrity = i.integrity),
        i.referrerPolicy && (o.referrerPolicy = i.referrerPolicy),
        i.crossOrigin === "use-credentials" ? o.credentials = "include" : i.crossOrigin === "anonymous" ? o.credentials = "omit" : o.credentials = "same-origin",
        o
    }
    function n(i) {
        if (i.ep)
            return;
        i.ep = !0;
        const o = t(i);
        fetch(i.href, o)
    }
}
)();
const dl = "/assets/bugreporter-icon-DwuUmRbi.webp"
  , ul = "/assets/worldcup25-icon-CnaZXF1j.webp"
  , ou = "modulepreload"
  , nu = function(e) {
    return "/" + e
}
  , Ea = {}
  , Q = function(s, t, n) {
    let i = Promise.resolve();
    if (t && t.length > 0) {
        let c = function(h) {
            return Promise.all(h.map(m => Promise.resolve(m).then(A => ({
                status: "fulfilled",
                value: A
            }), A => ({
                status: "rejected",
                reason: A
            }))))
        };
        document.getElementsByTagName("link");
        const l = document.querySelector("meta[property=csp-nonce]")
          , g = (l == null ? void 0 : l.nonce) || (l == null ? void 0 : l.getAttribute("nonce"));
        i = c(t.map(h => {
            if (h = nu(h),
            h in Ea)
                return;
            Ea[h] = !0;
            const m = h.endsWith(".css")
              , A = m ? '[rel="stylesheet"]' : "";
            if (document.querySelector(`link[href="${h}"]${A}`))
                return;
            const f = document.createElement("link");
            if (f.rel = m ? "stylesheet" : ou,
            m || (f.as = "script"),
            f.crossOrigin = "",
            f.href = h,
            g && f.setAttribute("nonce", g),
            document.head.appendChild(f),
            m)
                return new Promise( (T, w) => {
                    f.addEventListener("load", T),
                    f.addEventListener("error", () => w(new Error(`Unable to preload CSS for ${h}`)))
                }
                )
        }
        ))
    }
    function o(l) {
        const g = new Event("vite:preloadError",{
            cancelable: !0
        });
        if (g.payload = l,
        window.dispatchEvent(g),
        !g.defaultPrevented)
            throw l
    }
    return i.then(l => {
        for (const g of l || [])
            g.status === "rejected" && o(g.reason);
        return s().catch(o)
    }
    )
}
  , Na = (e, s, t) => {
    const n = e[s];
    return n ? typeof n == "function" ? n() : Promise.resolve(n) : new Promise( (i, o) => {
        (typeof queueMicrotask == "function" ? queueMicrotask : setTimeout)(o.bind(null, new Error("Unknown variable dynamic import: " + s + (s.split("/").length !== t ? ". Note that variables only represent file names one level deep." : ""))))
    }
    )
}
  , au = {
    name: "English",
    contributors: [],
    isOfficial: !0
}
  , ru = {
    name: "Czech",
    contributors: ["FarasCZ", "radonimium"]
}
  , lu = {
    name: "Danish",
    contributors: ["AV", "Grazzy", "Palsitora", "Total_DK", "BlodPaaKlokkeTaarnet", "Groschenlein"]
}
  , cu = {
    name: "Dutch",
    contributors: ["LizzyLovegood", "AlejoFBlack", "invalidCards", "kloofel", "Poedersuiker", "Clijmart", "sjakie", "sterredag", "Amras", "sebasjby"]
}
  , du = {
    name: "French",
    contributors: ["Bambi", "MQMotin", "Piapiou", "sylveryfae", "liem25", "Caederis", "eepmaxxer", "LostWon26", "Pacha", "EardstapaArctica"]
}
  , uu = {
    name: "Galician",
    contributors: ["Soril"]
}
  , gu = {
    name: "German",
    contributors: ["bra1n", "Myrion", "Synca", "ReiSt"],
    isOfficial: !0
}
  , mu = {
    name: "Italian",
    contributors: ["Voidstarr", "misdreavus", "Reyzard", "fe.spin", "Stiussi", "Mons264", "GreldonKB", "laseplov", "DonAlosi"]
}
  , hu = {
    name: "Japanese",
    contributors: ["bd_", "Sallii", "kahokkupelli", "ElectricMayhem"]
}
  , pu = {
    name: "Korean",
    contributors: ["USIJ"]
}
  , Au = {
    name: "Polish",
    contributors: ["Valis", "cupnoodle", "Aggie", "coolseel", "DianaJay", "i13k", "POLISH", "hidewari", "Marco", "h3oCharles"]
}
  , bu = {
    name: "Russian",
    contributors: ["mogekonik", "hdm", "serega6531", "Proxi", "Danila", "Gum", "410bus", "Arikel"],
    isOfficial: !0
}
  , fu = {
    name: "Slovak",
    contributors: ["SamueliTTo", "Mozkovic", "myreness"]
}
  , vu = {
    name: "Spanish",
    contributors: ["theperuvianjuan", "hdm", "elessar", "Alber00012", "Chiromyiforme", "DrewScroll"],
    isOfficial: !0
}
  , _u = {
    name: "Swedish",
    contributors: ["Eliderad", "ElinZ", "Malle", "Hobbe"]
}
  , yu = {
    name: "Ukrainian",
    contributors: ["Fabulist", "shevko", "Admol"]
}
  , wu = {
    name: "Vietnamese",
    contributors: ["tuanhuyng", "ChrisNg", "TranNhatTrung", "Big13"]
}
  , ku = {
    en: au,
    "zh-Hans": {
        name: "Chinese (Simplified)",
        contributors: ["nunu2"],
        isOfficial: !0
    },
    cs: ru,
    da: lu,
    nl: cu,
    fr: du,
    gl: uu,
    de: gu,
    "de-CH": {
        name: "German (Switzerland)",
        contributors: ["Myrion"]
    },
    it: mu,
    ja: hu,
    ko: pu,
    "nb-NO": {
        name: "Norwegian BokmÃ¥l",
        contributors: ["Sunisawesome", "Some_Random_Person", "Athrenax", "NeoHummel", "mathilde", "andlar"]
    },
    pl: Au,
    "pt-BR": {
        name: "Portuguese (Brazil)",
        contributors: ["Augurey2012", "Covre", "gmcrivelli", "PP", "piatan", "Zandrum", "Paula1974"]
    },
    "pt-PT": {
        name: "Portuguese (Portugal)",
        contributors: ["Batnu", "Paula1974", "iamthewalrus", "kpshk"]
    },
    ru: bu,
    sk: fu,
    es: vu,
    "es-419": {
        name: "Spanish (Latin America)",
        contributors: ["theperuvianjuan", "mannym2498", "Tallorete", "survivorkiki", "Lucas"]
    },
    "es-MX": {
        name: "Spanish (Mexico)",
        contributors: ["DrewScroll"]
    },
    sv: _u,
    uk: yu,
    vi: wu
}
  , Je = ku
  , ke = "en";
let Ie;
localStorage.getItem("locale") && !Je[localStorage.getItem("locale")] && localStorage.removeItem("locale");
const Ba = (e, s, t) => s <= 2 ? t(e, s) : e % 10 === 1 && e % 100 !== 11 ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2
  , Cu = () => localStorage.getItem("locale") || Array.from(navigator.languages || [navigator.language]).find(e => Object.keys(Je).includes(e)) || ke
  , Ls = async e => {
    var n, i, o, l;
    let s = {};
    try {
        s = (i = (n = await Na(Object.assign({
            "./app/cs.json": () => Q( () => import("./cs-ziGfPYu1.js"), []),
            "./app/da.json": () => Q( () => import("./da-DzSmiydh.js"), []),
            "./app/de.json": () => Q( () => import("./de-BSTh_ibh.js"), []),
            "./app/de_CH.json": () => Q( () => import("./de_CH-CRUEojSx.js"), []),
            "./app/en.json": () => Q( () => import("./en-BCgckO2U.js"), []),
            "./app/es.json": () => Q( () => import("./es-B_fjjaJ2.js"), []),
            "./app/es_419.json": () => Q( () => import("./es_419-VTkdVktY.js"), []),
            "./app/es_MX.json": () => Q( () => import("./es_MX-Tud6FMIv.js"), []),
            "./app/fr.json": () => Q( () => import("./fr-DWwGiNcG.js"), []),
            "./app/gl.json": () => Q( () => import("./gl-OLIJcqfc.js"), []),
            "./app/it.json": () => Q( () => import("./it-DCPEY8oF.js"), []),
            "./app/ja.json": () => Q( () => import("./ja-BjADhntX.js"), []),
            "./app/ko.json": () => Q( () => import("./ko-Dfch0WBS.js"), []),
            "./app/nb_NO.json": () => Q( () => import("./nb_NO-CjRP3K8w.js"), []),
            "./app/nl.json": () => Q( () => import("./nl-DK5PTkyB.js"), []),
            "./app/pl.json": () => Q( () => import("./pl-Ck1vOnbN.js"), []),
            "./app/pt_BR.json": () => Q( () => import("./pt_BR-Btz8_Ezu.js"), []),
            "./app/pt_PT.json": () => Q( () => import("./pt_PT-Cc0U40Ti.js"), []),
            "./app/ru.json": () => Q( () => import("./ru-CxIdTe-p.js"), []),
            "./app/sk.json": () => Q( () => import("./sk-DJd06CPj.js"), []),
            "./app/sv.json": () => Q( () => import("./sv-DdB4nRG5.js"), []),
            "./app/uk.json": () => Q( () => import("./uk-BPzmwGaT.js"), []),
            "./app/vi.json": () => Q( () => import("./vi-CwZLu8VE.js"), []),
            "./app/zh_Hans.json": () => Q( () => import("./zh_Hans-Di9qsBLC.js"), [])
        }), `./app/${e.replace(/-/g, "_")}.json`, 5)) == null ? void 0 : n.default) != null ? i : s
    } catch {}
    let t = {};
    try {
        t = (l = (o = await Na(Object.assign({
            "./game/de.json": () => Q( () => import("./de-Bn3yDgso.js"), []),
            "./game/en.json": () => Q( () => import("./en-BWAy7uHL.js"), []),
            "./game/es_419.json": () => Q( () => import("./es_419-B8Coz-dO.js"), []),
            "./game/sv.json": () => Q( () => import("./sv-DFO5biYd.js"), []),
            "./game/zh_Hans.json": () => Q( () => import("./zh_Hans-C8FJwPqe.js"), [])
        }), `./game/${e.replace(/-/g, "_")}.json`, 5)) == null ? void 0 : o.default) != null ? l : t
    } catch {}
    return {
        ...s,
        ...t
    }
}
;
async function Su() {
    if (Ie)
        return Ie;
    const e = Cu()
      , s = {
        [e]: await Ls(e)
    };
    return e !== ke && (s[ke] = await Ls(ke)),
    Ie = Vd({
        locale: e,
        messages: s,
        legacy: !1,
        fallbackLocale: ke,
        datetimeFormats: {},
        globalInjection: !0,
        pluralRules: {
            ru: Ba,
            uk: Ba
        }
    }),
    document.querySelector("html").setAttribute("lang", e),
    Ie
}
async function Pu(e) {
    if (!Object.keys(Je).includes(e) || Ie.global.availableLocales.includes(e))
        return;
    const s = await Ls(e);
    Ie.global.setLocaleMessage(e, s)
}
const O = (e, s) => {
    const t = e.__vccOpts || e;
    for (const [n,i] of s)
        t[n] = i;
    return t
}
  , Tu = {
    inject: ["bindShortcut", "triggerShortcut", "unbindShortcut", "isApp", "toggleFullscreen"],
    computed: {
        ...I(["chat", "definitions", "edition", "game", "grimoire", "keybindings", "positions", "roles", "session", "settings", "vote"]),
        ...I("players", ["players", "storytellers"]),
        ...I("user", ["user", "downloadUrl"]),
        ...D("players", ["seatedPlayerMap"]),
        ...D("user", ["isStoryteller", "isSpectator", "hasGrimoireAccess"]),
        ...D("game", ["isNight"]),
        ...D(["roleIconURL"]),
        isRestricted() {
            return this.session.hook.name === "reveal-grimoire"
        },
        onlineUsers() {
            return [...this.session.users].filter( ([,e]) => e.isOnline).length
        },
        grimoireRequests() {
            return [...this.session.users].filter( ([,e]) => e.grimoireAccess === 1 && e.isOnline).length
        },
        handIcons() {
            var s, t, n, i, o, l;
            const e = ["i-hand", "i-hand-fist", "i-hand-peace", "i-thumbs-up", "i-thumbs-down"];
            return (t = (s = this.session.users.get(this.user.id)) == null ? void 0 : s.flags) != null && t.includes("powerful") && (e.push("i-hand-spock", "i-hand-lizard", "i-hand-middle-finger", "i-face-smile", "i-face-frown"),
            this.roles.forEach(g => this.definitions.PLAYER_TEAMS.includes(g.team) && e.push("r-" + g.id))),
            (i = (n = this.session.users.get(this.user.id)) == null ? void 0 : n.cosmetics) != null && i.emotes && ((l = (o = this.session.users.get(this.user.id)) == null ? void 0 : o.cosmetics) == null || l.emotes.forEach(g => {
                e.push(g)
            }
            )),
            e
        }
    },
    data() {
        return {
            tab: "newgame",
            browser: Ke(),
            copied: !1,
            isWaitingForST: !1,
            raiseHandTimeout: null,
            isIconSelection: !1,
            isBoostNotification: !0,
            schemaURL: "https://github.com/ThePandemoniumInstitute/botc-release/blob/main/script-schema.json",
            defaultLocale: ke,
            shortcuts: {
                leaveSession: this.leave,
                toggleNightOrder: () => this.toggleTab("nightOrder"),
                toggleReference: () => this.toggleTab("character"),
                modalRules: () => this.toggleModal({
                    name: "rules"
                }),
                modalSettings: () => this.toggleModal({
                    name: "settings"
                }),
                modalShortcuts: () => this.toggleModal({
                    name: "settings",
                    params: {
                        tab: 4
                    }
                }),
                modalUsers: () => this.toggleModal({
                    name: "users"
                }),
                modeGather: () => this.toggleMode("gather"),
                toggleNPCs: this.addNPC,
                raiseHand: () => this.raiseHand(),
                attentionGong: this.attentionGong,
                revealGrimoire: this.revealGrimoire,
                toggleAudioDeafened: () => this.deafen(),
                toggleAudioMuted: this.toggleAudioMuted,
                toggleEdition: this.toggleEdition,
                toggleNight: this.toggleNight,
                toggleNightSignal: this.toggleNightSignal,
                toggleRoles: this.toggleRoles,
                toggleTownSquare: this.toggleTownSquare,
                toggleVideoMuted: this.toggleVideoMuted,
                toggleVoteHistory: this.toggleVoteHistory,
                toggleWhisper: this.toggleWhisper,
                setTimer: this.setTimer,
                swipeUp: () => this.raiseHand(!0),
                swipeDown: () => this.raiseHand(!1)
            }
        }
    },
    methods: {
        ...j(["setGrimoireMode", "setMenuOpen", "toggleModal", "toggleTownSquare"]),
        ...j("players", ["addStoryteller", "removeStoryteller"]),
        ...j("chat", ["toggleVideoMuted", "toggleAudioDeafened", "toggleVideoDeafened", "toggleNotAllowed"]),
        ...$("session", ["leave"]),
        ...$("user", ["logout"]),
        ...$("game", ["revealGrimoire"]),
        ...$(["openDialogue"]),
        async quit() {
            await ol(0)
        },
        toggleMenu() {
            this.setMenuOpen("m")
        },
        deafen() {
            this.chat.isNotAllowed && this.toggleNotAllowed(!1),
            this.toggleAudioDeafened(),
            this.chat.audio.isDeafened && !this.chat.audio.isMuted && this.toggleAudioMuted()
        },
        toggleAudioMuted() {
            this.chat.audio.isPushToTalk || (this.$store.commit("chat/toggleAudioMuted"),
            !this.chat.audio.isMuted && this.chat.audio.isDeafened && (this.chat.isNotAllowed && this.toggleNotAllowed(!1),
            this.toggleAudioDeafened()))
        },
        attentionGong() {
            if (this.isStoryteller && !this.session.hook.name)
                try {
                    this.$store.dispatch("session/triggerHook", {
                        name: "attention-gong",
                        delay: 1e4
                    })
                } catch {}
        },
        clearRoles() {
            this.openDialogue({
                type: "confirm",
                title: "main-menu.prompt_clear_title",
                text: `main-menu.prompt_clear_${this.isStoryteller ? "st" : "player"}`
            }).then(e => {
                e && this.$store.dispatch("players/clearRoles")
            }
            ).catch( () => {}
            )
        },
        addNPC() {
            this.toggleModal({
                name: "npc"
            })
        },
        toggleNight() {
            this.isStoryteller && (this.vote.nomination || this.grimoire.mode !== "pointing" && this.$store.dispatch("game/togglePhase"))
        },
        toggleNightSignal() {
            var e;
            this.isStoryteller || (e = this.session.signals.storyteller) != null && e.length && this.toggleModal({
                name: "signal"
            })
        },
        toggleMode(e) {
            !this.isStoryteller && (e !== "grimoire" || this.grimoire.mode === "pointing") || (e !== "grimoire" && this.vote.nomination && this.$store.commit("vote/nomination"),
            this.setGrimoireMode(this.grimoire.mode !== e ? e : "grimoire"))
        },
        toggleEdition() {
            this.isStoryteller && (this.setGrimoireMode(this.settings.game.isTutorialDisabled ? "grimoire" : "rules"),
            this.toggleModal({
                name: "edition"
            }))
        },
        toggleRoles() {
            this.isStoryteller && (this.setGrimoireMode(this.settings.game.isTutorialDisabled ? "grimoire" : "firstnight"),
            this.toggleModal({
                name: "roles"
            }))
        },
        toggleTab(e) {
            let s = this.grimoire.rightSideTabState;
            if (e === "character") {
                const t = this.positions.character;
                t ? (t.hidden = !t.hidden,
                this.$store.commit("setPosition", {
                    name: "character",
                    value: t
                })) : s === "character-open" ? s = "" : s === "character-mid" ? s = "character-open" : s = "character-mid"
            } else {
                const t = this.game.phase < 2 ? "firstnight" : "othernight"
                  , n = t === "othernight" ? "firstnight" : "othernight"
                  , i = this.positions[t]
                  , o = this.positions[n];
                i ? (i.hidden = !i.hidden,
                this.$store.commit("setPosition", {
                    name: t,
                    value: i
                }),
                o && !o.hidden && (o.hidden = !0,
                this.$store.commit("setPosition", {
                    name: n,
                    value: o
                }))) : s === t + "-open" ? s = "" : s === t + "-mid" ? s = t + "-open" : s = t + "-mid"
            }
            this.$store.commit("setRightSideTabState", s)
        },
        toggleVoteHistory({ctrlKey: e, metaKey: s}={}) {
            e || s || !this.vote.history.length || !this.hasGrimoireAccess || this.toggleModal({
                name: "vote-history"
            })
        },
        toggleWhisper() {
            this.session.sessionId && (this.seatedPlayerMap.has(this.user.id) ? this.$store.commit("chat/togglePrompt") : this.$store.commit("setTab", {
                tab: "text",
                value: !0
            }))
        },
        emotePreviewIcon(e) {
            return new URL(Object.assign({
                "/src/assets/cosmetics/emotes/bugreporter-icon.webp": dl,
                "/src/assets/cosmetics/emotes/worldcup25-icon.webp": ul
            })[`/src/assets/cosmetics/emotes/${e}-icon.webp`],import.meta.url).href
        },
        changeHandIcon(e) {
            this.$store.commit("session/setHandIcon", e),
            clearTimeout(this.raiseHandTimeout),
            this.raiseHandTimeout = setTimeout( () => this.raiseHandTimeout = null, 500),
            this.isIconSelection = !1
        },
        raiseHand(e) {
            this.vote.nomination || this.seatedPlayerMap.has(this.user.id) && (this.raiseHandTimeout || (this.$store.commit("session/raiseHand", {
                userId: this.user.id,
                value: e && this.session.handIcon
            }),
            this.raiseHandTimeout = setTimeout( () => this.raiseHandTimeout = null, 500)))
        },
        async setTimer() {
            if (this.isStoryteller)
                try {
                    const {title: e, value: s, checkbox: t} = await this.openDialogue({
                        type: "timer",
                        title: "main-menu.prompt_timer_title",
                        text: "main-menu.prompt_timer_text",
                        checkbox: {
                            value: this.session.timer.isPausedDuringVotes
                        }
                    });
                    s >= 3 && s <= 7200 ? this.$store.commit("session/setTimer", {
                        expiration: Date.now() + Math.round(s * 1e3),
                        title: e,
                        isPausedDuringVotes: t,
                        paused: t && this.vote.nomination ? Date.now() : void 0
                    }) : this.session.timer.expiration && this.$store.commit("session/setTimer")
                } catch {}
        },
        async emptySeat() {
            if (this.session.sessionId)
                try {
                    (!this.game.isRunning || await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "main-menu.prompt_vacate_title",
                        text: "main-menu.prompt_vacate_text"
                    })) && this.seatedPlayerMap.has(this.user.id) && !this.isStoryteller && this.$store.commit("players/claimSeat", -1)
                } catch {}
        }
    },
    mounted() {
        Object.keys(this.shortcuts).forEach(e => {
            this.bindShortcut(e, this.shortcuts[e].bind(this))
        }
        )
    },
    beforeUnmount() {
        Object.keys(this.shortcuts).forEach(e => {
            this.unbindShortcut(e)
        }
        )
    }
}
  , Iu = {
    id: "controls"
}
  , Mu = ["title"]
  , Ru = ["title"]
  , Du = ["title"]
  , Eu = ["title"]
  , Nu = {
    key: 0,
    class: "notification"
}
  , Bu = {
    href: "https://support.mozilla.org/en-US/kb/block-autoplay",
    target: "_blank"
}
  , Vu = ["title"]
  , Ou = {
    class: "headline"
}
  , ju = {
    key: 0
}
  , Uu = {
    key: 1
}
  , Hu = {
    key: 0
}
  , qu = {
    class: "headline"
}
  , Lu = {
    key: 0,
    class: "icons"
}
  , zu = ["onClick"]
  , Gu = ["onClick"]
  , Wu = {
    class: "headline"
}
  , Fu = ["href"]
  , Qu = {
    key: 1
}
  , Zu = ["href"]
  , Xu = ["href"];
function Ku(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("i18n-t");
    return r(),
    u("div", Iu, [b(q, {
        name: "fade"
    }, {
        default: S( () => [e.hasGrimoireAccess && e.isSpectator ? (r(),
        u("div", {
            key: 0,
            class: "icon grimoire-access no-click",
            title: e.$t("main-menu.grim_access")
        }, [b(l, {
            icon: "book-dead"
        })], 8, Mu)) : e.isStoryteller && o.grimoireRequests ? (r(),
        u("div", {
            key: 1,
            class: "icon grimoire-access blink",
            title: e.$t("main-menu.grim_request"),
            onClick: s[0] || (s[0] = c => e.toggleModal({
                name: "users"
            }))
        }, [b(l, {
            icon: "book-dead"
        }), v(" " + d(o.grimoireRequests), 1)], 8, Ru)) : p("", !0)]),
        _: 1
    }), b(q, {
        name: "fade"
    }, {
        default: S( () => [e.vote.history.length && e.session.sessionId && e.hasGrimoireAccess ? (r(),
        u("div", {
            key: 0,
            class: "icon vote-history",
            onClick: s[1] || (s[1] = c => o.toggleVoteHistory()),
            title: e.$t("main-menu.vote_history")
        }, [b(l, {
            icon: "hand-point-right"
        }), v(" " + d(e.vote.history.length), 1)], 8, Du)) : p("", !0)]),
        _: 1
    }), b(q, {
        name: "fade"
    }, {
        default: S( () => [e.session.signals.storyteller && e.session.signals.storyteller.length && !e.isStoryteller ? (r(),
        u("div", {
            key: 0,
            class: "icon signals",
            onClick: s[2] || (s[2] = c => e.toggleModal({
                name: "signal"
            })),
            title: e.$t("main-menu.night_info_text"),
            "aria-live": "assertive"
        }, [b(l, {
            icon: "eye"
        }), v(" " + d(e.$t("main-menu.night_info")), 1)], 8, Eu)) : p("", !0)]),
        _: 1
    }), b(q, {
        name: "fade"
    }, {
        default: S( () => [e.session.sessionId ? (r(),
        u("div", {
            key: 0,
            class: y(["icon chat", {
                reconnecting: e.chat.isReconnecting
            }])
        }, [a("div", {
            class: "mute",
            onClick: s[3] || (s[3] = c => o.deafen())
        }, [b(l, {
            title: e.$t("modals.settings.shortcuts.toggleAudioDeafened"),
            class: y(e.chat.audio.isDeafened ? "secondary" : ""),
            icon: e.chat.audio.isDeafened ? "volume-mute" : "volume-up"
        }, null, 8, ["title", "class", "icon"]), b(q, {
            name: "fade"
        }, {
            default: S( () => {
                var c;
                return [e.chat.isNotAllowed ? (r(),
                u("div", Nu, [b(g, {
                    keypath: "main-menu.error_audio",
                    scope: "global"
                }, {
                    default: S( () => [a("b", null, d(e.$t("main-menu.error_audio2")), 1)]),
                    _: 1
                }), s[42] || (s[42] = a("br", null, null, -1)), ((c = i.browser) == null ? void 0 : c.browser.name) === "Firefox" ? (r(),
                C(g, {
                    key: 0,
                    scope: "global",
                    keypath: "main-menu.error_audio3"
                }, {
                    default: S( () => [a("a", Bu, d(e.$t("main-menu.error_audio4")), 1)]),
                    _: 1
                })) : p("", !0)])) : p("", !0)]
            }
            ),
            _: 1
        })]), e.chat.audio.device && e.seatedPlayerMap.has(e.user.id) ? (r(),
        C(l, {
            key: 0,
            onClick: s[4] || (s[4] = c => o.toggleAudioMuted()),
            title: e.chat.audio.isPushToTalk ? e.$t("main-menu.push_to_talk", [e.keybindings.toggleAudioMuted[0]]) : e.$t("main-menu.mute_mic", [e.keybindings.toggleAudioMuted[0]]),
            class: y(e.chat.audio.isMuted ? "secondary" : ""),
            icon: e.chat.audio.isMuted ? "microphone-slash" : "microphone"
        }, null, 8, ["title", "class", "icon"])) : p("", !0), e.chat.video.device && e.seatedPlayerMap.has(e.user.id) ? (r(),
        C(l, {
            key: 1,
            onClick: s[5] || (s[5] = c => e.toggleVideoMuted()),
            title: e.$t("main-menu.mute_cam", [e.keybindings.toggleVideoMuted[0]]),
            class: y(e.chat.video.isMuted ? "secondary" : ""),
            icon: e.chat.video.isMuted ? "video-slash" : "video"
        }, null, 8, ["title", "class", "icon"])) : p("", !0)], 2)) : p("", !0)]),
        _: 1
    }), b(q, {
        name: "fade"
    }, {
        default: S( () => [e.session.sessionId ? (r(),
        u("div", {
            key: 0,
            class: y(["icon session", {
                storyteller: e.isStoryteller,
                reconnecting: e.session.isReconnecting
            }]),
            title: e.$t("main-menu.show_users", [e.keybindings.modalUsers[0]]),
            onClick: s[7] || (s[7] = c => e.toggleModal({
                name: "users"
            }))
        }, [b(l, {
            icon: "wifi"
        }), v(" " + d(o.onlineUsers) + " ", 1), b(q, {
            name: "fade"
        }, {
            default: S( () => [e.session.boostDuration - Date.now() < 120 * 1e3 && !e.user.level && !e.chat.isNotAllowed && i.isBoostNotification ? (r(),
            u("div", {
                key: 0,
                class: "notification",
                onClick: s[6] || (s[6] = M(c => i.isBoostNotification = !1, ["stop"]))
            }, d(e.$t("main-menu.session_expires", [e.$d(new Date(e.session.boostDuration), {
                hour: "numeric",
                minute: "numeric"
            })])), 1)) : p("", !0)]),
            _: 1
        })], 10, Vu)) : p("", !0)]),
        _: 1
    }), a("div", {
        class: y(["menu", {
            open: e.grimoire.menuOpen === "m"
        }])
    }, [b(l, {
        icon: "cog",
        onClick: s[8] || (s[8] = M(c => o.toggleMenu(), ["stop"]))
    }), a("ul", null, [i.tab === "newgame" && !e.grimoire.loadingState ? (r(),
    u(_, {
        key: 0
    }, [a("li", Ou, [e.isStoryteller ? (r(),
    u("h4", ju, d(e.$t("main-menu.tab_new_game")), 1)) : (r(),
    u("h4", Uu, d(e.$t("main-menu.tab_playing")), 1))]), e.isStoryteller && !o.isRestricted ? (r(),
    u(_, {
        key: 0
    }, [a("li", {
        onClick: s[9] || (s[9] = M(c => o.toggleMode("gather"), ["stop"]))
    }, [v(d(e.$t("main-menu.gather")) + " ", 1), e.grimoire.mode !== "gather" ? (r(),
    u("em", Hu, d(e.keybindings.modeGather[0].trim()), 1)) : (r(),
    C(l, {
        key: 1,
        icon: "times-circle"
    }))]), a("li", {
        onClick: s[10] || (s[10] = M(c => o.toggleEdition(), ["stop"]))
    }, [v(d(e.$t("main-menu.edition")) + " ", 1), a("em", null, d(e.keybindings.toggleEdition[0].trim()), 1)]), a("li", {
        onClick: s[11] || (s[11] = M(c => e.toggleModal({
            name: "rules"
        }), ["stop"]))
    }, [v(d(e.$t("main-menu.rules")) + " ", 1), a("em", null, d(e.keybindings.modalRules[0].trim()), 1)]), a("li", {
        onClick: s[12] || (s[12] = M( (...c) => o.addNPC && o.addNPC(...c), ["stop"]))
    }, [v(d(e.$t("main-menu.npcs")) + " ", 1), a("em", null, d(e.keybindings.toggleNPCs[0].trim()), 1)]), e.players.length > 4 ? (r(),
    u("li", {
        key: 0,
        onClick: s[13] || (s[13] = M(c => o.toggleRoles(), ["stop"]))
    }, [v(d(e.$t("main-menu.characters")) + " ", 1), a("em", null, d(e.keybindings.toggleRoles[0]), 1)])) : p("", !0), a("li", {
        class: y({
            disabled: e.session.hook.name
        }),
        onClick: s[14] || (s[14] = c => e.revealGrimoire())
    }, [v(d(e.$t("main-menu.reveal_grim")) + " ", 1), a("em", null, d(e.keybindings.revealGrimoire[0].trim()), 1)], 2)], 64)) : o.isRestricted ? p("", !0) : (r(),
    u("li", {
        key: 1,
        onClick: s[15] || (s[15] = c => e.toggleModal({
            name: "rules"
        }))
    }, [v(d(e.$t("main-menu.rules")) + " ", 1), b(l, {
        icon: "book-dead"
    })])), o.isRestricted ? p("", !0) : (r(),
    u("li", {
        key: 2,
        onClick: s[16] || (s[16] = (...c) => o.clearRoles && o.clearRoles(...c))
    }, [v(d(e.$t("main-menu.clear_grim")) + " ", 1), b(l, {
        icon: "trash-alt"
    })])), e.session.sessionId && !o.isRestricted ? (r(),
    u(_, {
        key: 3
    }, [e.isStoryteller ? (r(),
    u("li", {
        key: 0,
        onClick: s[17] || (s[17] = c => e.removeStoryteller(e.user))
    }, [v(d(e.$t("main-menu.storyteller_remove")) + " ", 1), b(l, {
        icon: "user"
    })])) : e.storytellers.length ? p("", !0) : (r(),
    u("li", {
        key: 1,
        onClick: s[18] || (s[18] = c => e.addStoryteller(e.user))
    }, [v(d(e.$t("main-menu.storyteller_add")) + " ", 1), b(l, {
        icon: "crown"
    })])), e.seatedPlayerMap.has(e.user.id) && !e.isStoryteller ? (r(),
    u("li", {
        key: 2,
        onClick: s[19] || (s[19] = c => o.emptySeat())
    }, [v(d(e.$t("main-menu.vacate_seat")) + " ", 1), b(l, {
        icon: "chair"
    })])) : p("", !0)], 64)) : p("", !0), a("li", {
        onClick: s[20] || (s[20] = c => e.leave())
    }, [v(d(e.$t("main-menu.leave")) + " ", 1), a("em", null, d(e.keybindings.leaveSession[0].trim()), 1)])], 64)) : p("", !0), i.tab === "shortcuts" && !e.grimoire.loadingState ? (r(),
    u(_, {
        key: 1
    }, [a("li", qu, [a("h4", null, d(e.$t("main-menu.tab_during_game")), 1)]), o.isRestricted ? p("", !0) : (r(),
    u(_, {
        key: 0
    }, [a("li", {
        onClick: s[21] || (s[21] = c => o.triggerShortcut(e.keybindings.toggleWhisper[0]))
    }, [v(d(e.$t("main-menu.request_private")) + " ", 1), a("em", null, d(e.keybindings.toggleWhisper[0].trim()), 1)]), a("li", {
        onClick: s[25] || (s[25] = c => o.triggerShortcut(e.keybindings.raiseHand[0])),
        class: y({
            disabled: i.raiseHandTimeout || !e.seatedPlayerMap.has(e.user.id)
        })
    }, [!e.isStoryteller && e.vote.nomination ? (r(),
    u(_, {
        key: 0
    }, [v(d(e.$t("main-menu.cast_vote")), 1)], 64)) : (r(),
    u(_, {
        key: 1
    }, [a("span", null, d(e.$t("main-menu.raise_hand")), 1), e.session.handIcon.substring(0, 2) === "i-" ? (r(),
    C(l, {
        key: 0,
        class: "raise",
        icon: e.session.handIcon.substring(2),
        title: e.$t("main-menu.change_icon"),
        onClick: s[22] || (s[22] = M(c => i.isIconSelection = !i.isIconSelection, ["stop"]))
    }, null, 8, ["icon", "title"])) : e.session.handIcon.substring(0, 2) === "r-" ? (r(),
    u("span", {
        key: 1,
        class: "role",
        onClick: s[23] || (s[23] = M(c => i.isIconSelection = !i.isIconSelection, ["stop"])),
        style: L({
            backgroundImage: `url(${e.roleIconURL(e.session.handIcon.substring(2))})`
        })
    }, null, 4)) : (r(),
    u("span", {
        key: 2,
        class: "cosmetic",
        onClick: s[24] || (s[24] = M(c => i.isIconSelection = !i.isIconSelection, ["stop"])),
        style: L({
            backgroundImage: `url(${o.emotePreviewIcon(e.session.handIcon)})`
        })
    }, null, 4))], 64)), a("em", null, d(e.keybindings.raiseHand[0].trim()), 1)], 2), i.isIconSelection ? (r(),
    u("li", Lu, [(r(!0),
    u(_, null, B(o.handIcons, (c, h) => (r(),
    u(_, {
        key: h
    }, [c.substring(0, 2) === "i-" ? (r(),
    C(l, {
        key: 0,
        class: "raise",
        icon: c.substring(2),
        title: e.$t("main-menu.change_icon"),
        onClick: M(m => o.changeHandIcon(c), ["stop"])
    }, null, 8, ["icon", "title", "onClick"])) : c.substring(0, 2) === "r-" ? (r(),
    u("span", {
        key: 1,
        class: "role",
        onClick: M(m => o.changeHandIcon(c), ["stop"]),
        style: L({
            backgroundImage: `url(${e.roleIconURL(c.substring(2))})`
        })
    }, null, 12, zu)) : (r(),
    u("span", {
        key: 2,
        class: "cosmetic",
        onClick: M(m => o.changeHandIcon(c), ["stop"]),
        style: L({
            backgroundImage: `url(${o.emotePreviewIcon(c)})`
        })
    }, null, 12, Gu))], 64))), 128))])) : p("", !0), e.players.length ? (r(),
    u("li", {
        key: 1,
        onClick: s[26] || (s[26] = (...c) => e.toggleTownSquare && e.toggleTownSquare(...c))
    }, [e.grimoire.isTownSquare ? (r(),
    u(_, {
        key: 1
    }, [v(d(e.$t("main-menu.show_grim")), 1)], 64)) : (r(),
    u(_, {
        key: 0
    }, [v(d(e.$t("main-menu.show_town")), 1)], 64)), a("em", null, d(e.keybindings.toggleTownSquare[0].trim()), 1)])) : p("", !0), e.isStoryteller ? (r(),
    u("li", {
        key: 2,
        onClick: s[27] || (s[27] = c => o.toggleNight()),
        class: y({
            disabled: e.vote.nomination || e.grimoire.mode === "pointing"
        })
    }, [e.isNight ? e.isNight ? (r(),
    u(_, {
        key: 1
    }, [v(d(e.$t("main-menu.to_day")), 1)], 64)) : p("", !0) : (r(),
    u(_, {
        key: 0
    }, [v(d(e.$t("main-menu.to_night")), 1)], 64)), a("em", null, d(e.keybindings.toggleNight[0].trim()), 1)], 2)) : p("", !0)], 64)), a("li", {
        onClick: s[28] || (s[28] = c => o.toggleTab("character"))
    }, [v(d(e.$t("main-menu.char_sheet")) + " ", 1), a("em", null, d(e.keybindings.toggleReference[0].trim()), 1)]), e.hasGrimoireAccess || e.settings.game.isPlayerNightOrder ? (r(),
    u("li", {
        key: 1,
        onClick: s[29] || (s[29] = c => o.toggleTab("nightOrder"))
    }, [v(d(e.$t("main-menu.night_sheet")) + " ", 1), a("em", null, d(e.keybindings.toggleNightOrder[0].trim()), 1)])) : p("", !0), e.session.sessionId ? (r(),
    u(_, {
        key: 2
    }, [e.isStoryteller ? (r(),
    u("li", {
        key: 0,
        onClick: s[30] || (s[30] = (...c) => o.toggleVoteHistory && o.toggleVoteHistory(...c)),
        class: y({
            disabled: !e.vote.history.length
        })
    }, [v(d(e.$t("main-menu.vote_history")) + " ", 1), a("em", null, d(e.keybindings.toggleVoteHistory[0].trim()), 1)], 2)) : p("", !0), e.isStoryteller ? (r(),
    u("li", {
        key: 1,
        class: y({
            disabled: e.session.hook.name
        }),
        onClick: s[31] || (s[31] = c => o.attentionGong())
    }, [v(d(e.isNight ? e.$t("main-menu.gong_attention") : e.$t("main-menu.gong_recall")) + " ", 1), a("em", null, d(e.keybindings.attentionGong[0].trim()), 1)], 2)) : p("", !0), e.isStoryteller && !o.isRestricted ? (r(),
    u("li", {
        key: 2,
        onClick: s[32] || (s[32] = c => o.setTimer())
    }, [v(d(e.$t("main-menu.set_timer")) + " ", 1), a("em", null, d(e.keybindings.setTimer[0].trim()), 1)])) : p("", !0), a("li", {
        onClick: s[33] || (s[33] = c => e.toggleModal({
            name: "users"
        }))
    }, [v(d(e.$t("main-menu.user_list")) + " ", 1), a("em", null, d(e.keybindings.modalUsers[0].trim()), 1)])], 64)) : p("", !0)], 64)) : p("", !0), i.tab === "settings" || e.grimoire.loadingState ? (r(),
    u(_, {
        key: 2
    }, [a("li", Wu, [a("h4", null, d(e.$t("main-menu.tab_app")), 1)]), a("li", {
        onClick: s[34] || (s[34] = c => o.toggleFullscreen())
    }, [v(d(e.$t("main-menu.fullscreen")) + " ", 1), a("em", null, d(e.keybindings.toggleFullscreen[0].trim()), 1)]), a("li", {
        onClick: s[35] || (s[35] = c => e.toggleModal({
            name: "settings"
        }))
    }, [v(d(e.$t("main-menu.settings")) + " ", 1), a("em", null, d(e.keybindings.modalSettings[0].trim()), 1)]), a("li", {
        onClick: s[36] || (s[36] = c => e.toggleModal({
            name: "help"
        }))
    }, [v(d(e.$t("main-menu.help")) + " ", 1), b(l, {
        icon: "info-circle"
    })]), !o.isApp && e.downloadUrl.length ? (r(!0),
    u(_, {
        key: 0
    }, B(e.downloadUrl, ([c,h]) => (r(),
    u("li", {
        key: c
    }, [a("a", {
        href: h,
        target: "_blank",
        tabindex: "-1"
    }, [v(d(e.$t("main-menu.download", [c])) + " ", 1), b(l, {
        icon: "download"
    })], 8, Fu)]))), 128)) : p("", !0), e.$i18n.locale !== i.defaultLocale ? (r(),
    u("li", Qu, [a("a", {
        href: `https://translation.botc.app/projects/botc-app/-/${e.$i18n.locale}/`,
        target: "_blank",
        tabindex: "-1"
    }, [v(d(e.$t("main-menu.translation")) + " ", 1), b(l, {
        icon: "language"
    })], 8, Zu)])) : p("", !0), a("li", null, [a("a", {
        href: i.schemaURL,
        target: "_blank",
        tabindex: "-1"
    }, [v(d(e.$t("main-menu.json_schema")) + " ", 1), b(l, {
        icon: "file-code"
    })], 8, Xu)]), e.user.id ? (r(),
    u("li", {
        key: 2,
        onClick: s[37] || (s[37] = c => e.logout())
    }, [v(d(e.$t("common.button_logout")) + " ", 1), b(l, {
        icon: "sign-out-alt"
    })])) : p("", !0), o.isApp ? (r(),
    u("li", {
        key: 3,
        onClick: s[38] || (s[38] = M(c => o.quit(), ["stop"]))
    }, [v(d(e.$t("pages.lobby.button_quit")) + " ", 1), b(l, {
        icon: "times-circle"
    })])) : p("", !0)], 64)) : p("", !0), a("li", {
        class: y(["tabs", i.tab])
    }, [e.grimoire.loadingState ? p("", !0) : (r(),
    C(l, {
        key: 0,
        icon: "plus-circle",
        class: "newgame",
        onClick: s[39] || (s[39] = M(c => i.tab = "newgame", ["stop"])),
        "aria-label": e.$t("main-menu.tab_new_game"),
        role: "button",
        "aria-hidden": "false"
    }, null, 8, ["aria-label"])), e.grimoire.loadingState ? p("", !0) : (r(),
    C(l, {
        key: 1,
        icon: "keyboard",
        class: "shortcuts",
        onClick: s[40] || (s[40] = M(c => i.tab = "shortcuts", ["stop"])),
        "aria-label": e.$t("main-menu.tab_during_game"),
        role: "button",
        "aria-hidden": "false"
    }, null, 8, ["aria-label"])), b(l, {
        icon: "sliders-h",
        class: "settings",
        onClick: s[41] || (s[41] = M(c => i.tab = "settings", ["stop"])),
        "aria-label": e.$t("main-menu.tab_app"),
        role: "button",
        "aria-hidden": "false"
    }, null, 8, ["aria-label"])], 2)])], 2)])
}
const Yu = O(Tu, [["render", Ku], ["__scopeId", "data-v-4cc45111"]])
  , Ju = {
    data() {
        return {
            gradients: [["primary", "#ffad00", "#000"], ["primary-white", "#fff", "#ffad00"], ["secondary", "#6800da", "#000"], ["secondary-white", "#fff", "#6800da"], ["default", "#4E4E4E", "#000"], ["bug", "#15ff00", "#226c00"]]
        }
    }
}
  , $u = {
    id: "gradients"
}
  , xu = ["id"];
function eg(e, s, t, n, i, o) {
    return r(),
    u("div", $u, [s[0] || (s[0] = a("svg", {
        width: "0",
        height: "0"
    }, [a("defs", null, [a("path", {
        d: "M 70 70 m -42.4264 -42.4264 a 60 60 315 1 0 84.8528 84.8528 a 60 60 315 1 0 -84.8528 -84.8528",
        id: "circle-path"
    })])], -1)), (r(!0),
    u(_, null, B(i.gradients, (l, g) => (r(),
    u("svg", {
        width: "0",
        height: "0",
        key: g
    }, [a("linearGradient", {
        id: l[0],
        x1: "50%",
        y1: "100%",
        x2: "50%",
        y2: "0%"
    }, [a("stop", {
        offset: "0%",
        style: L({
            "stop-color": l[2],
            "stop-opacity": 1
        })
    }, null, 4), a("stop", {
        offset: "100%",
        style: L({
            "stop-color": l[1],
            "stop-opacity": 1
        })
    }, null, 4)], 8, xu)]))), 128))])
}
const sg = O(Ju, [["render", eg], ["__scopeId", "data-v-8b24badb"]])
  , tg = "/assets/attentiongong-DpHLo7G5.mp3"
  , ig = "/assets/chatjoin-DUW4cfah.mp3"
  , og = "/assets/chatleave-DJrIar29.mp3"
  , ng = "/assets/countdown-DRzblIRW.mp3"
  , ag = "/assets/privatejoin-Cx7LT4DF.mp3"
  , rg = "/assets/privaterequest-Dl6tcyUb.mp3"
  , lg = "/assets/timergong-Ct7TV6TZ.mp3"
  , cg = "/assets/votecast-BUbYUp00.mp3"
  , dg = "/assets/votetick-C0z0mAeb.mp3"
  , ug = "/assets/votetickshort-CIEfFW_G.mp3"
  , Tn = ["chatJoin", "chatLeave", "privateRequest", "privateJoin", "voteTick", "voteTickShort", "voteCast", "countdown", "attentionGong", "timerGong"]
  , gg = {
    computed: {
        ...I(["grimoire"]),
        ...I("settings", ["general", "sounds"])
    },
    data() {
        return {
            soundSources: new Map(Tn.map(e => [e, new URL(Object.assign({
                "/src/assets/sounds/attentiongong.mp3": tg,
                "/src/assets/sounds/chatjoin.mp3": ig,
                "/src/assets/sounds/chatleave.mp3": og,
                "/src/assets/sounds/countdown.mp3": ng,
                "/src/assets/sounds/privatejoin.mp3": ag,
                "/src/assets/sounds/privaterequest.mp3": rg,
                "/src/assets/sounds/timergong.mp3": lg,
                "/src/assets/sounds/votecast.mp3": cg,
                "/src/assets/sounds/votetick.mp3": dg,
                "/src/assets/sounds/votetickshort.mp3": ug
            })[`/src/assets/sounds/${e.toLowerCase()}.mp3`],import.meta.url).href]))
        }
    },
    methods: {
        ...j(["removeSound"]),
        adjustVolume(e, s) {
            e.target.volume = this.general.soundVolume * this.sounds.get(s)
        }
    }
}
  , mg = {
    id: "sounds"
}
  , hg = ["src", "muted", "onCanplay", "onEnded"];
function pg(e, s, t, n, i, o) {
    return r(),
    u("div", mg, [(r(!0),
    u(_, null, B(e.grimoire.sounds, l => (r(),
    u("audio", {
        key: l.timestamp,
        src: i.soundSources.get(l.name),
        muted: !e.general.soundVolume || !e.sounds.get(l.name),
        onCanplay: g => o.adjustVolume(g, l.name),
        onEnded: g => e.removeSound({
            timestamp: l.timestamp
        }),
        autoplay: ""
    }, null, 40, hg))), 128))])
}
const Ag = O(gg, [["render", pg]])
  , bg = "botc-app"
  , fg = "3.48.1"
  , vg = "Blood on the Clocktower Online"
  , _g = "https://botc.app"
  , yg = "Steffen Baumgart <steffen@baumgart.biz>"
  , wg = "module"
  , kg = {
    node: ">=18.x"
}
  , Cg = ["botc", "grimoire", "app", "vue", "scss"]
  , Sg = {
    type: "git",
    url: "https://github.com/thepandemoniuminstitute/botc-app.git"
}
  , Pg = {
    dev: "vite --host",
    serve: "vite preview",
    build: "vite build",
    lint: "eslint --ext .js,.vue --ignore-path .gitignore --fix src",
    "lint:ci": "eslint --ext .js,.vue --ignore-path .gitignore --no-fix --max-warnings=0 src",
    tauri: "tauri",
    "tauri:dev": "tauri dev",
    "tauri:build": "NO_STRIP=true tauri build"
}
  , Tg = {
    "@fortawesome/fontawesome-svg-core": "^7.1.0",
    "@fortawesome/free-solid-svg-icons": "^7.1.0",
    "@fortawesome/vue-fontawesome": "^3.1.2",
    "@sentry/vite-plugin": "^4.4.0",
    "@sentry/vue": "^10.20.0",
    "@tauri-apps/api": "^2.9.0",
    "@tauri-apps/plugin-dialog": "^2.4.2",
    "@tauri-apps/plugin-fs": "^2.4.4",
    "@tauri-apps/plugin-os": "^2.3.2",
    "@tauri-apps/plugin-process": "^2.3.1",
    "@tauri-apps/plugin-updater": "^2.9.0",
    "@tauri-apps/plugin-window-state": "^2.4.1",
    "@vitejs/plugin-vue": "^6.0.1",
    ajv: "^8.17.1",
    "ajv-formats": "^3.0.1",
    hark: "^1.2.3",
    "iso-639-1": "^3.1.5",
    "jwt-decode": "^4.0.0",
    "language-icons": "^0.3.0",
    "mediasoup-client": "^3.18.1",
    sass: "^1.93.2",
    "socket.io-client": "^4.8.1",
    "ua-parser-js": "^2.0.6",
    vite: "^7.1.11",
    vue: "^3.5.22",
    "vue-i18n": "^11.1.12",
    "vue-router": "^4.6.3",
    "vue-turnstile": "^1.0.11",
    vuex: "^4.1.0"
}
  , Ig = {
    "@tauri-apps/cli": "^2.9.2",
    "@vue/eslint-config-prettier": "^9.0.0",
    eslint: "^8.57.1",
    "eslint-plugin-prettier": "^5.5.4",
    "eslint-plugin-vue": "^9.33.0",
    prettier: "^3.6.2",
    "vite-plugin-eslint": "^1.8.1"
}
  , le = {
    name: bg,
    version: fg,
    description: vg,
    homepage: _g,
    private: !0,
    author: yg,
    type: wg,
    engines: kg,
    keywords: Cg,
    repository: Sg,
    scripts: Pg,
    dependencies: Tg,
    devDependencies: Ig
}
  , ze = [{
    townsfolk: 3,
    outsider: 0,
    minion: 1,
    demon: 1
}, {
    townsfolk: 3,
    outsider: 1,
    minion: 1,
    demon: 1
}, {
    townsfolk: 5,
    outsider: 0,
    minion: 1,
    demon: 1
}, {
    townsfolk: 5,
    outsider: 1,
    minion: 1,
    demon: 1
}, {
    townsfolk: 5,
    outsider: 2,
    minion: 1,
    demon: 1
}, {
    townsfolk: 7,
    outsider: 0,
    minion: 2,
    demon: 1
}, {
    townsfolk: 7,
    outsider: 1,
    minion: 2,
    demon: 1
}, {
    townsfolk: 7,
    outsider: 2,
    minion: 2,
    demon: 1
}, {
    townsfolk: 9,
    outsider: 0,
    minion: 3,
    demon: 1
}, {
    townsfolk: 9,
    outsider: 1,
    minion: 3,
    demon: 1
}, {
    townsfolk: 9,
    outsider: 2,
    minion: 3,
    demon: 1
}]
  , In = {
    name: "Timer",
    computed: {
        ...I(["session", "grimoire", "vote"])
    },
    data() {
        return {
            timer: "",
            timeLeft: -1 / 0,
            timerTimeout: null,
            timerClass: "",
            animationDelay: 0
        }
    },
    methods: {
        setStartPosition() {
            this.timeLeft > 30 && (this.animationDelay = `${-120 + this.timeLeft % 120}s`)
        },
        updateTimer() {
            clearTimeout(this.timerTimeout);
            const {expiration: e, paused: s} = this.session.timer;
            this.timeLeft = Math.round((e - Date.now()) / 1e3),
            s && s < e && (this.timeLeft += Math.round((Date.now() - s) / 1e3)),
            this.timeLeft >= -5 ? (this.timeLeft > 30 ? (this.timerClass = "",
            this.timer = Math.ceil(this.timeLeft / 60) + "min") : this.timeLeft >= 0 ? (this.animationDelay = 0,
            this.timerClass = "secondary",
            this.timer = this.timeLeft + "s") : (this.grimoire.sounds.some( ({name: t}) => t === "timerGong") || this.$store.commit("playSound", "timerGong"),
            this.animationDelay = 0,
            this.timerClass = "warning",
            this.timer = this.$t("overlays.towninfo.timer_ended")),
            this.timerTimeout = setTimeout( () => this.updateTimer(), (this.timeLeft > 60 ? this.timeLeft % 60 || 60 : 1) * 1e3)) : this.timer = ""
        }
    },
    watch: {
        "session.timer.expiration"() {
            this.updateTimer(),
            this.setStartPosition()
        }
    },
    beforeMount() {
        this.updateTimer(),
        this.setStartPosition()
    },
    beforeUnmount() {
        clearTimeout(this.timerTimeout)
    }
}
  , Va = () => {
    be(e => ({
        v74bf0f7e: e.animationDelay
    }))
}
  , Oa = In.setup;
In.setup = Oa ? (e, s) => (Va(),
Oa(e, s)) : Va;
const Mg = ["title"]
  , Rg = {
    key: 0,
    class: "title"
};
function Dg(e, s, t, n, i, o) {
    const l = k("font-awesome-icon");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [i.timeLeft >= -5 ? (r(),
        u("span", {
            key: 0,
            class: y(["timer", {
                [i.timerClass]: i.timerClass,
                paused: e.session.timer.paused && e.session.timer.paused < e.session.timer.expiration
            }]),
            title: e.session.timer.title
        }, [e.session.timer.title ? (r(),
        u("span", Rg, d(e.session.timer.title), 1)) : p("", !0), b(l, {
            icon: "hourglass-half"
        }), v(" " + d(i.timer), 1)], 10, Mg)) : p("", !0)]),
        _: 1
    })
}
const gl = O(In, [["render", Dg], ["__scopeId", "data-v-9278b499"]])
  , Eg = {
    inject: ["isApp"],
    name: "Version",
    components: {
        FontAwesomeIcon: Y,
        Timer: gl
    },
    computed: {
        ...I("user", ["user", "latestVersion", "newVersions", "downloadUrl", "appUpdate"]),
        ...I(["game", "session", "grimoire", "settings", "vote"]),
        ...I("players", ["players"]),
        ...D("game", ["lastPhase", "isNight"]),
        ...D("chat", ["isVideoWhisper"]),
        ...D("players", ["nonTravellers"]),
        browserOutdated() {
            if (!this.browser)
                return !1;
            const {browser: e} = this.browser;
            return e.name === "Safari" && e.major <= 11 || e.name === "Opera" && e.major < 50 ? !0 : e.name === "IE" || e.name === "Opera Mini"
        },
        characterCount() {
            if (!ze[this.nonTravellers - 5])
                return "? / ? / ? / ?";
            const {townsfolk: e, outsider: s, minion: t, demon: n} = ze[this.nonTravellers - 5];
            return `${e} / ${s} / ${t} / ${n}`
        },
        languageIcon() {
            return new URL(Object.assign({
                "/node_modules/language-icons/icons/aa.svg": Pn,
                "/node_modules/language-icons/icons/ab.svg": Sn,
                "/node_modules/language-icons/icons/ae.svg": Cn,
                "/node_modules/language-icons/icons/af.svg": kn,
                "/node_modules/language-icons/icons/ak.svg": wn,
                "/node_modules/language-icons/icons/am.svg": yn,
                "/node_modules/language-icons/icons/an.svg": _n,
                "/node_modules/language-icons/icons/ar.svg": vn,
                "/node_modules/language-icons/icons/as.svg": fn,
                "/node_modules/language-icons/icons/av.svg": bn,
                "/node_modules/language-icons/icons/ay.svg": An,
                "/node_modules/language-icons/icons/az.svg": pn,
                "/node_modules/language-icons/icons/ba.svg": hn,
                "/node_modules/language-icons/icons/be.svg": mn,
                "/node_modules/language-icons/icons/bg.svg": gn,
                "/node_modules/language-icons/icons/bh.svg": un,
                "/node_modules/language-icons/icons/bi.svg": dn,
                "/node_modules/language-icons/icons/bm.svg": cn,
                "/node_modules/language-icons/icons/bn.svg": ln,
                "/node_modules/language-icons/icons/bo.svg": rn,
                "/node_modules/language-icons/icons/br.svg": an,
                "/node_modules/language-icons/icons/bs.svg": nn,
                "/node_modules/language-icons/icons/ca.svg": on,
                "/node_modules/language-icons/icons/ce.svg": tn,
                "/node_modules/language-icons/icons/ch.svg": sn,
                "/node_modules/language-icons/icons/co.svg": en,
                "/node_modules/language-icons/icons/cr.svg": xo,
                "/node_modules/language-icons/icons/cs.svg": $o,
                "/node_modules/language-icons/icons/cu.svg": Jo,
                "/node_modules/language-icons/icons/cv.svg": Yo,
                "/node_modules/language-icons/icons/cy.svg": Ko,
                "/node_modules/language-icons/icons/da.svg": Xo,
                "/node_modules/language-icons/icons/de.svg": Zo,
                "/node_modules/language-icons/icons/dv.svg": Qo,
                "/node_modules/language-icons/icons/dz.svg": Fo,
                "/node_modules/language-icons/icons/ee.svg": Wo,
                "/node_modules/language-icons/icons/el.svg": Go,
                "/node_modules/language-icons/icons/en.svg": zo,
                "/node_modules/language-icons/icons/eo.svg": Lo,
                "/node_modules/language-icons/icons/es.svg": qo,
                "/node_modules/language-icons/icons/et.svg": Ho,
                "/node_modules/language-icons/icons/eu.svg": Uo,
                "/node_modules/language-icons/icons/fa.svg": jo,
                "/node_modules/language-icons/icons/ff.svg": Oo,
                "/node_modules/language-icons/icons/fi.svg": Vo,
                "/node_modules/language-icons/icons/fj.svg": Bo,
                "/node_modules/language-icons/icons/fo.svg": No,
                "/node_modules/language-icons/icons/fr.svg": Eo,
                "/node_modules/language-icons/icons/fy.svg": Do,
                "/node_modules/language-icons/icons/ga.svg": Ro,
                "/node_modules/language-icons/icons/gd.svg": Mo,
                "/node_modules/language-icons/icons/gl.svg": Io,
                "/node_modules/language-icons/icons/gn.svg": To,
                "/node_modules/language-icons/icons/gu.svg": Po,
                "/node_modules/language-icons/icons/gv.svg": So,
                "/node_modules/language-icons/icons/ha.svg": Co,
                "/node_modules/language-icons/icons/he.svg": ko,
                "/node_modules/language-icons/icons/hi.svg": wo,
                "/node_modules/language-icons/icons/ho.svg": yo,
                "/node_modules/language-icons/icons/hr.svg": _o,
                "/node_modules/language-icons/icons/ht.svg": vo,
                "/node_modules/language-icons/icons/hu.svg": fo,
                "/node_modules/language-icons/icons/hy.svg": bo,
                "/node_modules/language-icons/icons/hz.svg": Ao,
                "/node_modules/language-icons/icons/ia.svg": po,
                "/node_modules/language-icons/icons/id.svg": ho,
                "/node_modules/language-icons/icons/ie.svg": mo,
                "/node_modules/language-icons/icons/ig.svg": go,
                "/node_modules/language-icons/icons/ii.svg": uo,
                "/node_modules/language-icons/icons/ik.svg": co,
                "/node_modules/language-icons/icons/io.svg": lo,
                "/node_modules/language-icons/icons/is.svg": ro,
                "/node_modules/language-icons/icons/it.svg": ao,
                "/node_modules/language-icons/icons/iu.svg": no,
                "/node_modules/language-icons/icons/ja.svg": oo,
                "/node_modules/language-icons/icons/jv.svg": io,
                "/node_modules/language-icons/icons/ka.svg": to,
                "/node_modules/language-icons/icons/kg.svg": so,
                "/node_modules/language-icons/icons/ki.svg": eo,
                "/node_modules/language-icons/icons/kj.svg": xi,
                "/node_modules/language-icons/icons/kk.svg": $i,
                "/node_modules/language-icons/icons/kl.svg": Ji,
                "/node_modules/language-icons/icons/km.svg": Yi,
                "/node_modules/language-icons/icons/kn.svg": Ki,
                "/node_modules/language-icons/icons/ko.svg": Xi,
                "/node_modules/language-icons/icons/kr.svg": Zi,
                "/node_modules/language-icons/icons/ks.svg": Qi,
                "/node_modules/language-icons/icons/ku.svg": Fi,
                "/node_modules/language-icons/icons/kv.svg": Wi,
                "/node_modules/language-icons/icons/kw.svg": Gi,
                "/node_modules/language-icons/icons/ky.svg": zi,
                "/node_modules/language-icons/icons/la.svg": Li,
                "/node_modules/language-icons/icons/lb.svg": qi,
                "/node_modules/language-icons/icons/lg.svg": Hi,
                "/node_modules/language-icons/icons/li.svg": Ui,
                "/node_modules/language-icons/icons/ln.svg": ji,
                "/node_modules/language-icons/icons/lo.svg": Oi,
                "/node_modules/language-icons/icons/lt.svg": Vi,
                "/node_modules/language-icons/icons/lu.svg": Bi,
                "/node_modules/language-icons/icons/lv.svg": Ni,
                "/node_modules/language-icons/icons/mg.svg": Ei,
                "/node_modules/language-icons/icons/mh.svg": Di,
                "/node_modules/language-icons/icons/mi.svg": Ri,
                "/node_modules/language-icons/icons/mk.svg": Mi,
                "/node_modules/language-icons/icons/ml.svg": Ii,
                "/node_modules/language-icons/icons/mn.svg": Ti,
                "/node_modules/language-icons/icons/mr.svg": Pi,
                "/node_modules/language-icons/icons/ms.svg": Si,
                "/node_modules/language-icons/icons/mt.svg": Ci,
                "/node_modules/language-icons/icons/my.svg": ki,
                "/node_modules/language-icons/icons/na.svg": wi,
                "/node_modules/language-icons/icons/nb.svg": yi,
                "/node_modules/language-icons/icons/nd.svg": _i,
                "/node_modules/language-icons/icons/ne.svg": vi,
                "/node_modules/language-icons/icons/ng.svg": fi,
                "/node_modules/language-icons/icons/nl.svg": bi,
                "/node_modules/language-icons/icons/nn.svg": Ai,
                "/node_modules/language-icons/icons/no.svg": pi,
                "/node_modules/language-icons/icons/nr.svg": hi,
                "/node_modules/language-icons/icons/nv.svg": mi,
                "/node_modules/language-icons/icons/ny.svg": gi,
                "/node_modules/language-icons/icons/oc.svg": ui,
                "/node_modules/language-icons/icons/oj.svg": di,
                "/node_modules/language-icons/icons/om.svg": ci,
                "/node_modules/language-icons/icons/or.svg": li,
                "/node_modules/language-icons/icons/os.svg": ri,
                "/node_modules/language-icons/icons/pa.svg": ai,
                "/node_modules/language-icons/icons/pi.svg": ni,
                "/node_modules/language-icons/icons/pl.svg": oi,
                "/node_modules/language-icons/icons/ps.svg": ii,
                "/node_modules/language-icons/icons/pt.svg": ti,
                "/node_modules/language-icons/icons/qu.svg": si,
                "/node_modules/language-icons/icons/rm.svg": ei,
                "/node_modules/language-icons/icons/rn.svg": xt,
                "/node_modules/language-icons/icons/ro.svg": $t,
                "/node_modules/language-icons/icons/ru.svg": Jt,
                "/node_modules/language-icons/icons/rw.svg": Yt,
                "/node_modules/language-icons/icons/sa.svg": Kt,
                "/node_modules/language-icons/icons/sc.svg": Xt,
                "/node_modules/language-icons/icons/sd.svg": Zt,
                "/node_modules/language-icons/icons/se.svg": Qt,
                "/node_modules/language-icons/icons/sg.svg": Ft,
                "/node_modules/language-icons/icons/si.svg": Wt,
                "/node_modules/language-icons/icons/sk.svg": Gt,
                "/node_modules/language-icons/icons/sl.svg": zt,
                "/node_modules/language-icons/icons/sm.svg": Lt,
                "/node_modules/language-icons/icons/sn.svg": qt,
                "/node_modules/language-icons/icons/so.svg": Ht,
                "/node_modules/language-icons/icons/sq.svg": Ut,
                "/node_modules/language-icons/icons/sr.svg": jt,
                "/node_modules/language-icons/icons/ss.svg": Ot,
                "/node_modules/language-icons/icons/st.svg": Vt,
                "/node_modules/language-icons/icons/su.svg": Bt,
                "/node_modules/language-icons/icons/sv.svg": Nt,
                "/node_modules/language-icons/icons/sw.svg": Et,
                "/node_modules/language-icons/icons/ta.svg": Dt,
                "/node_modules/language-icons/icons/te.svg": Rt,
                "/node_modules/language-icons/icons/tg.svg": Mt,
                "/node_modules/language-icons/icons/th.svg": It,
                "/node_modules/language-icons/icons/ti.svg": Tt,
                "/node_modules/language-icons/icons/tk.svg": Pt,
                "/node_modules/language-icons/icons/tl.svg": St,
                "/node_modules/language-icons/icons/tn.svg": Ct,
                "/node_modules/language-icons/icons/to.svg": kt,
                "/node_modules/language-icons/icons/tr.svg": wt,
                "/node_modules/language-icons/icons/ts.svg": yt,
                "/node_modules/language-icons/icons/tt.svg": _t,
                "/node_modules/language-icons/icons/tw.svg": vt,
                "/node_modules/language-icons/icons/ty.svg": ft,
                "/node_modules/language-icons/icons/ug.svg": bt,
                "/node_modules/language-icons/icons/uk.svg": At,
                "/node_modules/language-icons/icons/ur.svg": pt,
                "/node_modules/language-icons/icons/uz.svg": ht,
                "/node_modules/language-icons/icons/ve.svg": mt,
                "/node_modules/language-icons/icons/vi.svg": gt,
                "/node_modules/language-icons/icons/vo.svg": ut,
                "/node_modules/language-icons/icons/wa.svg": dt,
                "/node_modules/language-icons/icons/wo.svg": ct,
                "/node_modules/language-icons/icons/xh.svg": lt,
                "/node_modules/language-icons/icons/yi.svg": rt,
                "/node_modules/language-icons/icons/yo.svg": at,
                "/node_modules/language-icons/icons/za.svg": nt,
                "/node_modules/language-icons/icons/zh.svg": ot,
                "/node_modules/language-icons/icons/zu.svg": it
            })[`/node_modules/language-icons/icons/${this.locale.split("-")[0]}.svg`],import.meta.url).href
        }
    },
    data() {
        return {
            isVersionOpen: !1,
            version: le.version,
            locale: this.$i18n.locale,
            locales: Je,
            browser: Ke(),
            nodeEnv: "production",
            clickCounter: 0,
            defaultLocale: ke,
            notification: ""
        }
    },
    methods: {
        ...j(["toggleModal"]),
        announcement() {
            this.user.level === "special-tpi" ? this.toggleModal({
                name: "announcement"
            }) : this.toggleModal({
                name: "update"
            })
        },
        async updateLocale() {
            await Pu(this.locale),
            localStorage.setItem("locale", this.locale),
            this.$i18n.locale = this.locale,
            document.querySelector("html").setAttribute("lang", this.locale),
            this.locale !== this.defaultLocale ? this.notification = "translation" : this.notification === "translation" && (this.notification = "")
        },
        toggleNotification(e="") {
            this.notification === "translation" && !e && localStorage.setItem("locale", this.locale),
            this.notification = e
        }
    },
    mounted() {
        this.locale !== this.defaultLocale && !localStorage.getItem("locale") && this.toggleNotification("translation")
    }
}
  , Ng = {
    key: 0
}
  , Bg = ["href"]
  , Vg = {
    key: 1
}
  , Og = ["href"]
  , jg = {
    key: 0
}
  , Ug = {
    class: "button-group"
}
  , Hg = ["href"]
  , qg = {
    class: "button secondary"
}
  , Lg = ["data-tooltip"]
  , zg = {
    class: "version"
}
  , Gg = {
    for: "locale"
}
  , Wg = ["value"]
  , Fg = ["src"];
function Qg(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("i18n-t")
      , c = k("Timer");
    return r(),
    u("div", {
        id: "version",
        class: y({
            warning: e.newVersions || o.browserOutdated,
            alert: e.newVersions > 1,
            notification: i.notification
        })
    }, [e.appUpdate ? (r(),
    u("span", Ng, [a("b", null, d(e.$t("version.updating", [e.appUpdate])), 1), s[7] || (s[7] = v("Â  ", -1)), b(l, {
        icon: "exclamation-triangle"
    }), s[8] || (s[8] = a("br", null, null, -1))])) : e.newVersions || o.browserOutdated ? (r(),
    u("a", {
        key: 1,
        onClick: s[0] || (s[0] = h => i.notification = "update"),
        tabindex: "-1"
    }, [b(l, {
        icon: "exclamation-triangle"
    }), v(" " + d(e.$t("version.update")), 1), s[9] || (s[9] = a("br", null, null, -1))])) : p("", !0), i.notification ? (r(),
    u("span", {
        key: 2,
        class: "notification",
        onClick: s[2] || (s[2] = h => o.toggleNotification())
    }, [i.notification === "update" ? (r(),
    u(_, {
        key: 0
    }, [o.browserOutdated ? (r(),
    C(g, {
        key: 0,
        keypath: "version.warning_browser2",
        scope: "global"
    }, {
        default: S( () => [a("b", null, d(e.$t("version.warning_browser")), 1)]),
        _: 1
    })) : p("", !0), e.newVersions ? (r(),
    u(_, {
        key: 1
    }, [b(g, {
        keypath: "version.warning_update2",
        scope: "global"
    }, {
        default: S( () => [a("b", null, d(e.$t("version.warning_update")), 1), a("b", null, d(e.latestVersion), 1)]),
        _: 1
    }), s[10] || (s[10] = a("br", null, null, -1)), o.isApp && e.downloadUrl[0] ? (r(),
    u("a", {
        key: 0,
        class: "button",
        href: e.downloadUrl[0][1],
        target: "_blank"
    }, d(e.$t("version.download", [e.downloadUrl[0][0]])), 9, Bg)) : (r(),
    u("span", Vg, d(e.$t("version.reload")), 1))], 64)) : p("", !0)], 64)) : i.notification === "translation" ? (r(),
    u(_, {
        key: 1
    }, [v(d(e.$t("version.translation_disclaimer")) + " ", 1), a("p", null, [(r(!0),
    u(_, null, B(i.locales[i.locale].contributors, (h, m) => (r(),
    u(_, {
        key: h
    }, [a("a", {
        href: `https://translation.botc.app/user/${h}/`,
        target: "_blank",
        tabindex: "-1",
        onClick: s[1] || (s[1] = M( () => {}
        , ["stop"]))
    }, d(h), 9, Og), v(d(m < i.locales[i.locale].contributors.length - 1 ? ", " : ""), 1)], 64))), 128))]), e.$te("roles.washerwoman.name") && !i.locales[i.locale].isOfficial ? (r(),
    u("i", jg, d(e.$t("version.translation_game")), 1)) : p("", !0), a("div", Ug, [a("a", {
        class: "button primary",
        href: `https://translation.botc.app/projects/botc-app/-/${i.locale}/`,
        target: "_blank",
        tabindex: "-1"
    }, d(e.$t("main-menu.translation")), 9, Hg), a("div", qg, d(e.$t("common.button_close")), 1)])], 64)) : p("", !0)])) : p("", !0), e.$route.name === "Grimoire" ? (r(),
    u(_, {
        key: 3
    }, [e.grimoire.mode !== "grimoire" || e.vote.nomination || e.isVideoWhisper ? (r(),
    C(c, {
        key: 0
    })) : p("", !0), a("b", {
        class: "phase",
        "data-tooltip": e.$t("version.character_distribution") + ": " + o.characterCount
    }, [!e.game.isRunning || !e.game.history.length ? (r(),
    u(_, {
        key: 0
    }, [v(d(e.$t("grimoire.phases.end")), 1)], 64)) : e.lastPhase ? e.isNight ? (r(),
    u(_, {
        key: 2
    }, [b(l, {
        icon: "cloud-moon"
    }), v(" " + d(e.$t("grimoire.phases.night", Math.ceil(e.game.phase / 2))) + " (" + d(e.$t("version.since", [e.$d(new Date(e.lastPhase.time), {
        hour: "numeric",
        minute: "numeric"
    })])) + ") ", 1)], 64)) : (r(),
    u(_, {
        key: 3
    }, [b(l, {
        icon: "sun"
    }), v(" " + d(e.$t("grimoire.phases.day", e.game.phase / 2)) + " (" + d(e.$t("version.since", [e.$d(new Date(e.lastPhase.time), {
        hour: "numeric",
        minute: "numeric"
    })])) + ") ", 1)], 64)) : (r(),
    u(_, {
        key: 1
    }, [v(d(e.$t("grimoire.phases.start")) + " (" + d(e.$t("version.since", [e.$d(new Date(e.game.history[0].time), {
        hour: "numeric",
        minute: "numeric"
    })])) + ") ", 1)], 64)), s[11] || (s[11] = a("br", null, null, -1)), b(l, {
        icon: "users"
    }), v(" " + d(e.$t("version.players_alive", [e.players.filter(h => !h.isDead).length, e.players.length])), 1)], 8, Lg)], 64)) : p("", !0), a("div", zg, [a("span", {
        onClick: s[3] || (s[3] = (...h) => o.announcement && o.announcement(...h)),
        class: "changelog"
    }, d(e.$t("common.botc_online")) + " " + d(i.nodeEnv !== "production" ? i.nodeEnv : `v${i.version}`) + d(o.isApp ? "-app" : ""), 1), i.locale !== i.defaultLocale ? (r(),
    C(l, {
        key: 0,
        icon: "language",
        class: "language",
        onClick: s[4] || (s[4] = h => i.notification = i.notification === "translation" ? "" : "translation")
    })) : p("", !0), a("label", Gg, [z(a("select", {
        name: "locale",
        "onUpdate:modelValue": s[5] || (s[5] = h => i.locale = h),
        id: "locale",
        onChange: s[6] || (s[6] = (...h) => o.updateLocale && o.updateLocale(...h)),
        tabindex: "-1"
    }, [(r(!0),
    u(_, null, B(Object.keys(i.locales), h => (r(),
    u("option", {
        key: `locale-${h}`,
        value: h
    }, d(i.locales[h].name) + " - " + d(h), 9, Wg))), 128))], 544), [[Ae, i.locale]]), a("img", {
        src: o.languageIcon,
        alt: ""
    }, null, 8, Fg)])])], 2)
}
const Zg = O(Eg, [["render", Qg], ["__scopeId", "data-v-8b2dc190"]])
  , Xg = `Version 3.48.1 - Interface Improvements

- ð character and night order sheets can now be dragged around, resized and toggled with a shortcut, as well as zoomed in 3 steps
- ð bluff and NPC tabs can also be resized dynamically now
- ð added translations for Spanish (Mexico)
- ð the grimoire / town square can now be moved left and right for improved layout customization
- ð removed "condensed" mode because the above changes made it redundant
- ð removed Linux standalone version until it supports voice / video chat properly
- ð added a shortcut button that allows a Storyteller to quickly add everyone as a recipient for a night signal message
- ð renamed nomination types "Zookeeper" to "Accusation & defense" and "Baker" to "Nominee focus"
- ð fixed character names being cut off on the character sheet (thanks vedamarie)
- ð fixed jinx sort order on the character sheet (thanks graypockets)
- ð non-waking characters can no longer be forced to show up on the night order, which caused subsequent issues (thanks sirmalle)
- ð character sheets that are opened in a separate browser window will now close properly when leaving the session (thanks amsaynz)
- ð fixed some homebrew image URLs not loading properly (thanks cezzbb)
- ð homebrew special night cards now show their proper name / text (thanks @yoyosource)

### Version 3.48.0 - The app update from outer space

- ð added Zenomancer (Loric): "One or more players each have a goal. When achieved, that player learns a piece of true info."
- ð added Japanese and Galician app interface translations
- ð improved accessibility around Grimoire requests (thanks dontrunoff)
- ð limited Homebrew token top leaves to 6 visible ones (even if the character has more than 6 reminder tokens)
- ð added better plural translation support for Slavic languages
- ð improved player menu position to allow nomination selection even on smaller screens
- ð fixed Korean / Chinese translations rendering vertically inverted on the pop-out character sheet window (thanks hydrodamalis)
- ð fixed a bug with Big Wig nominations not enabling properly (thanks tranquilotl)
- ð fixed an issue with homebrew content that contains special characters (thanks @RProxi)
- ð fixed tooltips on player nameplates and in voice chats (thanks @hursty3000 & darkfox9)
- ð fixed night order not working with off-script travellers and NPCs (thanks graypockets)
- ð running votes will now be paused if you are removed / remove yourself as the Storyteller (thanks graypockets)

### Version 3.47.4 - No more hidden votes

- ð fixed every vote being a hidden vote (thanks to the law degree lobby)

### Version 3.47.3 - More characters and a direct Script Tool link

- ð increased maximum number of characters on a single script to 200
- ð script download button now opens the official script tool with the script
- ð player / ST deafened icon will no longer be shown at night
- ð improved nomination selection for players close to top and bottom of the circle
- ð fixed base 3 character sheet order for real (thanks hegner00)
- ð made player overlay icons screen-reader friendly again (thanks dontrunoff)
- ð fixed character tab pop-out on Windows standalone (thanks @phoebecarr and coxy5)
- ð fixed being unable to select multiple players in some night signal instances (thanks @thmarth and .alanmichael)
- ð fixed being able / unable to remove some NPCs in specific circumstances (thanks tomozbot)
- ð homebrew abilities that contain special characters no longer break the app (thanks akipgamer)
- ð fixed camera disabled icon not using the appropriate color (thanks willow0510)
- ð fixed removing a player from a seat showing the wrong system text log (thanks sebaty5)
- ð fixed loading a script with Big Wig on it not setting the correct nomination type (thanks firecode)

### Version 3.47.2 - Base 3 order restored

- ð fixed base 3 character sheet order (thanks eliderad)
- ð fixed standalone app download links being broken (thanks vaultdemonpsycho)
- ð fixed being able to lower your hand after your vote has been counted (thanks @Phi-dale)
- ð fixed Homebrew scripts not showing up in the night order properly (thanks grizzly63)

### Version 3.47.1 - Minor issues fixed

- ð improved selecting a nominee next to the top and bottom seats
- ð fixed KO / ZH translation rendering upside down in a few places (thanks hydrodamalis)
- ð fixed selecting multiple night recipients (thanks goodpart)

### Version 3.47.0 - Glorious Loric

- ð the Loric have arrived: Big Wig & Tor (and made Bootlegger, Gardener & Storm Catcher Loric as well)
- ð added Chinese (Simplified) translations (thanks to G-Stone), as well as interface translations in German (Switzerland), French, Korean, Norwegian BokmÃ¥l, Polish, Portuguese (Portugal), Slovak, Ukrainian and Vietnamese (thanks to all the volunteers)
- ð added indicator to show if someone has deafened their audio
- ð simplified self-nominations by saving a click
- ð fixed token ability tool-tip rendering weirdly during token distribution animation (thanks @inspirationfollows)
- ð fixed being unable to lower your hand after raising it as a fake dead & voteless Banshee (thanks @joernlenoch)
- ð fixed Storyteller self-assigning a character both at the start and end of the game messing up their statistics (thanks lejordet)
- ð fixed base 3 script names not showing up properly in Discord session link previews (thanks pimpwilly)
- ð fixed token glow not adhering to selected colorblind mode (thanks @jeremyroman)

### Version 3.46.4 - More languages and fixes

- ð added Czech interface translations and Swedish / Spanish (Latin America) game content translations, plus updated the others with the most recent (approved) changes from our translation portal
- ð improved letter readability on the side-tabs by rotating them and changing their font to one that supports more Unicode characters
- ð fixed audio / video stream not being properly closed in some instances (thanks @lilitsybell)
- ð fixed Zookeeper still being broken, but this time for the Storyteller (thanks .grazzy)
- ð players that have disconnected can now be removed from their seats (thanks glorious_hamster_79179)
- ð fixed flickering translation pop-up (thanks @joernlenoch)
- ð fixed vote history showing incorrect vote counts for many players (thanks @NoAviNK1)
- ð fixed missing text chat placeholder (thanks dontrunoff)
- ð fixed player-enabled bluffs tab also showing up for the Storyteller in Teensyville games (thanks arkonel)
- ð fixed homebrew night signal cards / buttons showing the wrong (untranslated) text (thanks cezzbb)

### Version 3.46.3 - Bugs! Bugs everywhere!!

- ð yes, we heard that you really liked the old night order pop-up! we're going to work on some changes that will improve how the current night sheets can be used, so that you can get this kind of functionality back. it'll just need a bit of time
- ð fixed camera muted icon being visible at night, giving away who is in a private chat (thanks poedersuikerr)
- ð fixed user ID showing up in some places in the text chat (thanks cheddar0880)
- ð fixed grim access tag being inverted in public lobbies (thanks necroticfirenecroticfire)
- ð fixed not being able to change seat names in Local Play mode (thanks clefadagio)
- ð fixed Zookeeper nominations not working properly (thanks sunsetrainbow27 and jayon28)`
  , Kg = {
    props: {
        name: {
            type: String,
            default: ""
        },
        tabs: {
            type: Array,
            default: () => []
        }
    },
    data() {
        return {
            isInsideClick: !1,
            tabIndex: this.$store.state.grimoire.tabs["modal-" + this.name] < this.tabs.length ? this.$store.state.grimoire.tabs["modal-" + this.name] : 0
        }
    },
    emits: ["close", "tabChange"],
    methods: {
        ...j(["setTab"]),
        close(e) {
            if (e.target.classList.contains("modal-backdrop")) {
                if (this.isInsideClick) {
                    this.isInsideClick = !1;
                    return
                }
                e.stopPropagation(),
                this.$emit("close")
            }
        },
        changeTab(e) {
            this.tabIndex !== e && (this.tabIndex = e,
            this.$emit("tabChange", e))
        }
    },
    mounted() {
        this.$emit("tabChange", this.tabIndex)
    },
    beforeUnmount() {
        document.getElementById("app").focus(),
        this.tabs.length && this.setTab({
            tab: "modal-" + this.name,
            value: this.tabIndex
        })
    }
}
  , Yg = {
    key: 0,
    class: "header",
    id: "modal-title"
}
  , Jg = {
    key: 1,
    class: "slot",
    id: "modal-description"
}
  , $g = {
    class: "slot tabbed",
    id: "modal-description"
}
  , xg = {
    class: "tabs",
    role: "menubar"
}
  , em = ["onClick"];
function sm(e, s, t, n, i, o) {
    return r(),
    u("div", {
        class: "modal-backdrop",
        onClick: s[2] || (s[2] = (...l) => o.close && o.close(...l))
    }, [a("div", {
        class: "modal",
        role: "dialog",
        "aria-labelledby": "modal-title",
        "aria-describedby": "modal-description",
        onMousedown: s[0] || (s[0] = l => i.isInsideClick = !0),
        onMouseup: s[1] || (s[1] = l => i.isInsideClick = !1)
    }, [e.$slots.header ? (r(),
    u("div", Yg, [Se(e.$slots, "header")])) : p("", !0), t.tabs.length ? (r(),
    u(_, {
        key: 2
    }, [a("div", $g, [Se(e.$slots, "tab-" + i.tabIndex)]), a("ul", xg, [(r(!0),
    u(_, null, B(t.tabs, (l, g) => (r(),
    u("li", {
        key: g,
        onClick: c => o.changeTab(g),
        class: y({
            active: i.tabIndex === g
        }),
        role: "button"
    }, d(l), 11, em))), 128))])], 64)) : (r(),
    u("div", Jg, [Se(e.$slots, "default")]))], 32)])
}
const se = O(Kg, [["render", sm]])
  , tm = "/assets/gossip-DY4wKAxk.webp"
  , ml = [];
let Me = "";
const Ns = Xg.replace(/\r\n/gi, `
`).split(`

### `);
for (; Ns.length > 0 && Ns[0].match(new RegExp(`^Version ${le.version.split(".").slice(0, 2).join("\\.")}`)); ) {
    const [e,s] = Ns.shift().split(`

`);
    ml.unshift(e.replace(/^Version /i, "")),
    Me = (Me ? "" : `new
`) + s + (Me.length ? `
` : "") + Me
}
const de = {};
let Ue = !1;
Me && Me.split(`
`).forEach(e => {
    var s;
    if (e === "new") {
        Ue = !0;
        return
    }
    switch ((s = e.match(/^- (.) /u)) == null ? void 0 : s[1]) {
    case "ð":
        de.features || (de.features = []),
        de.features.push({
            line: e.substring(4),
            bold: Ue
        });
        break;
    case "ð":
        de.changes || (de.changes = []),
        de.changes.push({
            line: e.substring(4),
            bold: Ue
        });
        break;
    case "ð":
        de.bugs || (de.bugs = []),
        de.bugs.push({
            line: e.substring(4),
            bold: Ue
        });
        break;
    default:
        de.other || (de.other = []),
        de.other.push({
            line: e.substring(4),
            bold: Ue
        });
        break
    }
}
);
const im = {
    components: {
        Modal: se
    },
    computed: I(["modal", "errors", "session", "chat"]),
    methods: {
        ...j(["toggleModal"]),
        closeModal() {
            this.chat.isNotAllowed && this.$store.commit("chat/toggleNotAllowed", !1),
            this.toggleModal(this.modal)
        }
    },
    data() {
        return {
            version: le.version,
            categories: {
                features: "ð " + this.$t("modals.update.feature"),
                changes: "ð " + this.$t("modals.update.general"),
                bugs: "ð " + this.$t("modals.update.bugfix"),
                other: this.$t("modals.update.other")
            },
            updated: de,
            titles: ml
        }
    }
}
  , om = {
    class: "content"
}
  , nm = ["href"]
  , am = {
    class: "category"
};
function rm(e, s, t, n, i, o) {
    const l = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "update" ? (r(),
        C(l, {
            key: 0,
            class: "update",
            onClose: o.closeModal
        }, {
            default: S( () => [a("div", om, [a("aside", null, [a("div", null, [a("h3", null, d(e.$t("modals.update.title")), 1), (r(!0),
            u(_, null, B(i.titles, (g, c) => (r(),
            u("a", {
                key: c,
                tabindex: "-1",
                href: `https://github.com/ThePandemoniumInstitute/botc-release/releases/tag/v${g.match(/^(\d+\.\d+\.\d+)/)[1]}`,
                target: "_blank"
            }, d(g), 9, nm))), 128))]), s[1] || (s[1] = a("img", {
                src: tm,
                alt: "Announcement"
            }, null, -1)), a("div", {
                class: "button",
                role: "button",
                onClick: s[0] || (s[0] = (...g) => o.closeModal && o.closeModal(...g))
            }, d(e.$t("common.button_close")), 1)]), a("section", null, [(r(!0),
            u(_, null, B(i.updated, (g, c) => (r(),
            u("ul", {
                key: c
            }, [a("li", am, d(i.categories[c]), 1), (r(!0),
            u(_, null, B(g, ({line: h, bold: m}, A) => (r(),
            u("li", {
                key: A,
                class: y({
                    bold: m
                })
            }, d(h), 3))), 128))]))), 128))])])]),
            _: 1
        }, 8, ["onClose"])) : p("", !0)]),
        _: 1
    })
}
const lm = O(im, [["render", rm], ["__scopeId", "data-v-7f7a2d3d"]])
  , ja = async () => {
    var e;
    if (window.__TAURI__) {
        const s = await Od()
          , t = await s.isFullscreen();
        await s.setFullscreen(!t)
    } else
        try {
            document.fullscreenElement ? document.exitFullscreen && await document.exitFullscreen() : (e = document.documentElement) != null && e.requestFullscreen && await document.documentElement.requestFullscreen()
        } catch {}
}
  , Ua = document.createElement("textarea")
  , cm = e => (Ua.textContent = e,
Ua.innerHTML)
  , Ha = async e => {
    const s = await window.crypto.subtle.digest("SHA-256", new TextEncoder().encode(e));
    return Array.from(new Uint8Array(s)).map(t => t.toString(16).padStart(2, "0")).join("")
}
  , Mn = {
    components: {
        UpdateModal: lm,
        Version: Zg,
        Sounds: Ag,
        MainMenu: Yu,
        Gradients: sg
    },
    computed: {
        ...I(["grimoire", "session", "modal", "chat", "settings"]),
        ...I("user", ["user"]),
        ...D("user", ["isStoryteller"])
    },
    data() {
        return {
            shortcuts: {},
            history: [],
            pushToTalkGraceTimer: null,
            touchX: 0,
            touchY: 0,
            isFocused: document.hasFocus()
        }
    },
    provide() {
        return {
            isApp: !!window.__TAURI__,
            isTouchDevice: window.matchMedia("(hover: none)").matches,
            bindShortcut: (e, s, t="Grimoire") => {
                this.shortcuts[t] || (this.shortcuts[t] = {}),
                this.shortcuts[t][e] = s
            }
            ,
            triggerShortcut: e => {
                this.keydown({
                    key: e,
                    preventDefault: () => {}
                })
            }
            ,
            unbindShortcut: (e, s="Grimoire") => {
                this.shortcuts[s] || (this.shortcuts[s] = {}),
                delete this.shortcuts[s][e]
            }
            ,
            renderReminderHTML: e => cm(String(e)).replace(/\*(.*?)\*/gi, "<b>$1</b>").replace(/:reminder:/gi, '<i class="reminder-token"></i>'),
            getSHA256Hash: Ha,
            toggleFullscreen: ja
        }
    },
    methods: {
        ...j(["setMenuOpen", "toggleModal"]),
        closeMenu() {
            this.grimoire.menuOpen && this.setMenuOpen()
        },
        paste(e) {
            var s;
            if ((s = this.shortcuts.Grimoire) != null && s.paste) {
                const t = (e.clipboardData || window.clipboardData).getData("text");
                this.shortcuts.Grimoire.paste(t)
            }
        },
        keyup(e) {
            const {key: s} = e
              , {keybindings: t} = this.$store.state;
            if (s === void 0 || !s.toLocaleLowerCase)
                return;
            const n = s.toLocaleLowerCase();
            if (this.chat.audio.isPushToTalk && t.toggleAudioMuted.includes(n)) {
                if (this.chat.audio.isMuted)
                    return;
                this.pushToTalkGraceTimer && clearTimeout(this.pushToTalkGraceTimer),
                this.pushToTalkGraceTimer = setTimeout( () => {
                    this.$store.commit("chat/toggleAudioMuted", !0)
                }
                , 250),
                e == null || e.preventDefault()
            }
        },
        async keydown(e) {
            var c, h, m, A, f, T;
            const {key: s, ctrlKey: t, metaKey: n, altKey: i, target: o} = e
              , {keybindings: l} = this.$store.state;
            if (s === void 0 || !s.toLocaleLowerCase)
                return;
            const g = s.toLocaleLowerCase();
            if (!["select", "input", "textarea"].includes((c = o == null ? void 0 : o.tagName) == null ? void 0 : c.toLowerCase())) {
                if (g === "escape" && this.modal.name) {
                    if (this.modal.name === "dialogue" && ((h = this.modal.params) != null && h.isImportant))
                        return;
                    this.toggleModal(Object.assign({}, this.modal, {
                        name: ""
                    })),
                    document.getElementById("app").focus(),
                    e == null || e.preventDefault()
                }
                if (l.toggleFullscreen.includes(g))
                    try {
                        await ja()
                    } catch {}
                if (this.$route.name === "Grimoire") {
                    if (this.chat.audio.isPushToTalk && this.$store.state.keybindings.toggleAudioMuted.includes(s.toLocaleLowerCase())) {
                        if (this.pushToTalkGraceTimer && clearTimeout(this.pushToTalkGraceTimer),
                        this.pushToTalkGraceTimer = null,
                        !this.chat.audio.isMuted)
                            return;
                        this.$store.commit("chat/toggleAudioMuted", !1),
                        e == null || e.preventDefault()
                    }
                    if (this.session.hook.name === "reveal-grimoire" && ![...l.toggleAudioMuted, ...l.toggleVideoMuted, ...l.modalSettings, ...l.modalShortcuts, ...l.leaveSession, ...l.toggleFullscreen, ...l.toggleAudioDeafened].includes(g) || this.grimoire.loadingState || t && g !== "control" || n && g !== "meta" || i && g !== "alt")
                        return;
                    if ((m = this.shortcuts.Grimoire) != null && m[g])
                        (A = this.shortcuts.Grimoire) == null || A[g](w => w(e)),
                        e == null || e.preventDefault();
                    else if (Object.values(l).flat().includes(g)) {
                        for (let w in l)
                            if (l[w].includes(g) && ((f = this.shortcuts.Grimoire) != null && f[w]) && ((T = this.shortcuts.Grimoire) == null ? void 0 : T[w](N => N(e))))
                                break;
                        e == null || e.preventDefault()
                    }
                    this.session.sessionId && (this.history.unshift(g),
                    this.history.splice(6),
                    await Ha(this.history.join(";")) === this.$store.state.session.code && this.$store.dispatch("openDialogue", {
                        type: "prompt",
                        title: "Welcome to the Royal Court",
                        placeholder: "Answer",
                        text: "Who shall we see today?",
                        minlength: 2,
                        maxlength: 50
                    }).then(V => {
                        this.$store.commit("session/togglePowerful", V)
                    }
                    ).catch( () => {}
                    ))
                } else if (this.shortcuts[this.$route.name]) {
                    if (t && g !== "control" || n && g !== "meta" || i && g !== "alt")
                        return;
                    if (this.shortcuts[this.$route.name][g])
                        this.shortcuts[this.$route.name][g](w => w(e)),
                        e == null || e.preventDefault();
                    else if (Object.values(l).flat().includes(g)) {
                        for (let w in l)
                            if (l[w].includes(g) && this.shortcuts[this.$route.name][w] && this.shortcuts[this.$route.name][w](N => N(e)))
                                break;
                        e == null || e.preventDefault()
                    }
                }
            }
        },
        touchstart(e) {
            var s, t;
            this.touchX = (s = e == null ? void 0 : e.touches[0]) == null ? void 0 : s.clientX,
            this.touchY = (t = e == null ? void 0 : e.touches[0]) == null ? void 0 : t.clientY
        },
        touchend(e) {
            var o, l, g, c, h, m, A, f, T, w, V, N, U, P;
            if (!this.touchX || !this.touchY || !this.$store.state.settings.game.isTouchSupport)
                return;
            const s = (o = e == null ? void 0 : e.changedTouches[0]) == null ? void 0 : o.clientX
              , t = (l = e == null ? void 0 : e.changedTouches[0]) == null ? void 0 : l.clientY
              , n = this.touchX - s
              , i = this.touchY - t;
            Math.abs(n) > Math.abs(i) ? n < -50 ? (c = (g = this.shortcuts[this.$route.name]) == null ? void 0 : g.swipeRight) == null || c.call(g, E => E(e)) : n > 50 && ((m = (h = this.shortcuts[this.$route.name]) == null ? void 0 : h.swipeLeft) == null || m.call(h, E => E(e))) : i < -50 ? ((f = (A = this.shortcuts[this.$route.name]) == null ? void 0 : A.swipeDown) == null || f.call(A, E => E(e)),
            (w = (T = this.shortcuts[this.$route.name]) == null ? void 0 : T.swipeDown2) == null || w.call(T, E => E(e))) : i > 50 && ((N = (V = this.shortcuts[this.$route.name]) == null ? void 0 : V.swipeUp) == null || N.call(V, E => E(e)),
            (P = (U = this.shortcuts[this.$route.name]) == null ? void 0 : U.swipeUp2) == null || P.call(U, E => E(e)))
        }
    }
}
  , qa = () => {
    be(e => ({
        v64fa3a2a: e.settings.general.colorblind
    }))
}
  , La = Mn.setup;
Mn.setup = La ? (e, s) => (qa(),
La(e, s)) : qa;
const dm = {
    key: 0,
    id: "loading"
};
function um(e, s, t, n, i, o) {
    const l = k("router-view")
      , g = k("MainMenu")
      , c = k("Version")
      , h = k("Gradients")
      , m = k("Sounds")
      , A = k("UpdateModal");
    return r(),
    u("div", {
        id: "app",
        onKeyup: s[0] || (s[0] = (...f) => o.keyup && o.keyup(...f)),
        onKeydown: s[1] || (s[1] = (...f) => o.keydown && o.keydown(...f)),
        onFocus: s[2] || (s[2] = f => i.isFocused = !0),
        onBlur: s[3] || (s[3] = f => i.isFocused = !1),
        onPaste: s[4] || (s[4] = (...f) => o.paste && o.paste(...f)),
        onTouchstartPassive: s[5] || (s[5] = (...f) => o.touchstart && o.touchstart(...f)),
        onTouchendPassive: s[6] || (s[6] = (...f) => o.touchend && o.touchend(...f)),
        onClick: s[7] || (s[7] = f => o.closeMenu()),
        tabindex: "0",
        class: y({
            "animations-disabled": e.settings.general.isAnimationsDisabled,
            "cosmetics-disabled": e.settings.general.isCosmeticsDisabled,
            colorblind: e.settings.general.colorblind,
            ["hook-" + e.session.hook.name]: e.session.hook.name,
            ["page-" + e.$route.name]: e.$route.name,
            "no-focus": !i.isFocused,
            "chroma-key": e.settings.advanced.chromaKey
        })
    }, [b(l), e.$route.name === "Grimoire" ? (r(),
    C(g, {
        key: 0
    })) : p("", !0), b(q, {
        name: "fade"
    }, {
        default: S( () => [e.grimoire.loadingState && ["Grimoire", "Lobby"].includes(e.$route.name) ? (r(),
        u("div", dm, [s[8] || (s[8] = a("div", {
            class: "loader"
        }, null, -1)), v(" Loading " + d(e.grimoire.loadingState) + "... ", 1)])) : p("", !0)]),
        _: 1
    }), b(c), b(h), b(m), b(A)], 34)
}
const gm = O(Mn, [["render", um]])
  , zs = "/assets/card-ability-kX4HjSAD.webp"
  , Gs = "/assets/card-bluffs-BlNMxv_e.webp"
  , Ws = "/assets/card-choice-DVpXheLk.webp"
  , Fs = "/assets/card-claim-Dxgc2vOa.webp"
  , Qs = "/assets/card-demon-C2p1QXYu.webp"
  , Zs = "/assets/card-minions-CQx0IJE3.webp"
  , Xs = "/assets/card-selected-DQML9A6z.webp"
  , Ks = "/assets/card-special-BYfhRwYM.webp"
  , Ys = "/assets/card-you-qog5FTO7.webp"
  , za = "/assets/custom-CLofFTEi.webp"
  , Ga = "data:image/webp;base64,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"
  , Wa = "/assets/demon-info-B8oHUaMT.webp"
  , Fa = "/assets/demon_e-BE73nmRM.webp"
  , Qa = "/assets/demon_g-CSs6ZD66.webp"
  , Za = "/assets/dusk-CLdDXnQC.webp"
  , Xa = "/assets/evil-CDY3e2Qm.webp"
  , Ka = "/assets/fabled-WyWuPk8w.webp"
  , Ya = "/assets/good-D9wGdnv9.webp"
  , Ja = "/assets/loric-DAp9AMZR.webp"
  , $a = "/assets/minion-info-5qfuy8Qq.webp"
  , xa = "/assets/minion_e-lDFo-tEX.webp"
  , er = "/assets/minion_g-Cgm5WnSR.webp"
  , sr = "/assets/outsider_e-CgWWsKPC.webp"
  , tr = "/assets/outsider_g-BzhBt4on.webp"
  , ir = "/assets/townsfolk_e-CHxn-dgu.webp"
  , or = "/assets/townsfolk_g-CKaS3yKc.webp"
  , nr = "/assets/traveller-CmR1gFU-.webp"
  , ar = "/assets/traveller_e-ezMTv16C.webp"
  , rr = "/assets/traveller_g-BNxDoGo0.webp"
  , lr = "/assets/x-CjTHptyP.webp"
  , mm = "/assets/apprentice-Dq5aGiYi.webp"
  , hm = "/assets/apprentice_e-BEpvFWvS.webp"
  , pm = "/assets/apprentice_g-qVS2q4bN.webp"
  , Am = "/assets/assassin_e-BDitHnVO.webp"
  , bm = "/assets/assassin_g-D_zJwNaF.webp"
  , fm = "/assets/bishop-LYgE69Ju.webp"
  , vm = "/assets/bishop_e-CvwvjoUI.webp"
  , _m = "/assets/bishop_g-DdZW0SpA.webp"
  , ym = "/assets/chambermaid_e-CdqkTS11.webp"
  , wm = "/assets/chambermaid_g-DAtPnmSz.webp"
  , km = "/assets/courtier_e-DxjU0rGy.webp"
  , Cm = "/assets/courtier_g-8Fhu5KML.webp"
  , Sm = "/assets/devilsadvocate_e-6olcm7Cx.webp"
  , Pm = "/assets/devilsadvocate_g-DeyJHzxG.webp"
  , Tm = "/assets/exorcist_e-DoXc6R_z.webp"
  , Im = "/assets/exorcist_g-CiIkE1hM.webp"
  , Mm = "/assets/fool_e-CdlNFIsk.webp"
  , Rm = "/assets/fool_g-C-vzA630.webp"
  , Dm = "/assets/gambler_e-Co0D5NyD.webp"
  , Em = "/assets/gambler_g-BJg931OP.webp"
  , Nm = "/assets/godfather_e-CszxqtFl.webp"
  , Bm = "/assets/godfather_g-BHOpUHNN.webp"
  , Vm = "/assets/goon_e-DmCcVOv-.webp"
  , Om = "/assets/goon_g-qCN1CxKh.webp"
  , jm = "/assets/gossip_e-DKOgldGS.webp"
  , Um = "/assets/gossip_g-0mo_0qnq.webp"
  , Hm = "/assets/grandmother_e-BLCIA5TL.webp"
  , qm = "/assets/grandmother_g-CjEyeFLi.webp"
  , Lm = "/assets/innkeeper_e-dzanyuqI.webp"
  , zm = "/assets/innkeeper_g-B_YjhWTM.webp"
  , Gm = "/assets/judge-Df7wYZLu.webp"
  , Wm = "/assets/judge_e-jGAdrE7z.webp"
  , Fm = "/assets/judge_g-CJbFZ44x.webp"
  , Qm = "/assets/lunatic_e-D53Boxpa.webp"
  , Zm = "/assets/lunatic_g-Bz2ai2Da.webp"
  , Xm = "/assets/mastermind_e-lwTDvV6G.webp"
  , Km = "/assets/mastermind_g-BzBbXNuB.webp"
  , Ym = "/assets/matron-D4Vegu5w.webp"
  , Jm = "/assets/matron_e-i60IfjWL.webp"
  , $m = "/assets/matron_g-faTHHRCk.webp"
  , xm = "/assets/minstrel_e-Cv94nSeJ.webp"
  , eh = "/assets/minstrel_g-M5EHa7zy.webp"
  , sh = "/assets/moonchild_e-D-P3dKVK.webp"
  , th = "/assets/moonchild_g-DKURQEzF.webp"
  , ih = "/assets/pacifist_e-BDyZFmeQ.webp"
  , oh = "/assets/pacifist_g-DAkM1DME.webp"
  , nh = "/assets/po_e-BkxsM_xT.webp"
  , ah = "/assets/po_g-blqsHHpB.webp"
  , rh = "/assets/professor_e-BpuIeGol.webp"
  , lh = "/assets/professor_g-h2X7rvhv.webp"
  , ch = "/assets/pukka_e-CmZzVHPM.webp"
  , dh = "/assets/pukka_g-D7il5SFF.webp"
  , uh = "/assets/sailor_e-DfZBdaxk.webp"
  , gh = "/assets/sailor_g-MdYxQ8zf.webp"
  , mh = "/assets/shabaloth_e-DsCO_Txn.webp"
  , hh = "/assets/shabaloth_g-BUwNFN-9.webp"
  , ph = "/assets/tealady_e-CZT3s07k.webp"
  , Ah = "/assets/tealady_g-C6X-kuq2.webp"
  , bh = "/assets/tinker_e-dpPUDqmq.webp"
  , fh = "/assets/tinker_g-CS4VFqeN.webp"
  , vh = "/assets/voudon-CNiyV0sS.webp"
  , _h = "/assets/voudon_e-D9qWXIyp.webp"
  , yh = "/assets/voudon_g-D-tbnf_D.webp"
  , wh = "/assets/zombuul_e-DzySLzke.webp"
  , kh = "/assets/zombuul_g-B4MTwk5-.webp"
  , Ch = "/assets/acrobat_e-BtZarrxs.webp"
  , Sh = "/assets/acrobat_g-ClaB0uN4.webp"
  , Ph = "/assets/alchemist_e-DjjClIsL.webp"
  , Th = "/assets/alchemist_g-DtcrLn7_.webp"
  , Ih = "/assets/alhadikhia_e-D6XyyVmp.webp"
  , Mh = "/assets/alhadikhia_g-BggSDiOq.webp"
  , Rh = "/assets/alsaahir_e-DiydqcyG.webp"
  , Dh = "/assets/alsaahir_g-CpjMnnMq.webp"
  , Eh = "/assets/amnesiac_e-CEaf8TX1.webp"
  , Nh = "/assets/amnesiac_g-1rV8CyUl.webp"
  , Bh = "/assets/atheist_e-CHiIPNXQ.webp"
  , Vh = "/assets/atheist_g-CQOMSxIU.webp"
  , Oh = "/assets/balloonist_e-D2ByQ9TA.webp"
  , jh = "/assets/balloonist_g-Dlfqy_E5.webp"
  , Uh = "/assets/banshee_e-8hOn5kSm.webp"
  , Hh = "/assets/banshee_g-DJc6lJye.webp"
  , qh = "/assets/boffin_e-Bks9yuea.webp"
  , Lh = "/assets/boffin_g-lws0h7cM.webp"
  , zh = "/assets/boomdandy_e-S13eahkU.webp"
  , Gh = "/assets/boomdandy_g-DOTwgB8d.webp"
  , Wh = "/assets/bountyhunter_e-BhBaVK4W.webp"
  , Fh = "/assets/bountyhunter_g-BCEfwrWL.webp"
  , Qh = "/assets/cannibal_e-PuVaqnSr.webp"
  , Zh = "/assets/cannibal_g-eP3mwaD2.webp"
  , Xh = "/assets/choirboy_e-CpElv2uq.webp"
  , Kh = "/assets/choirboy_g-Dk5L9Lx_.webp"
  , Yh = "/assets/cultleader_e-CXgWMt1A.webp"
  , Jh = "/assets/cultleader_g-BYq1_U3R.webp"
  , $h = "/assets/damsel_e-fpsIFV1Z.webp"
  , xh = "/assets/damsel_g-NwMWC09c.webp"
  , ep = "/assets/engineer_e-LUiXESUv.webp"
  , sp = "/assets/engineer_g-N-nhrQAt.webp"
  , tp = "/assets/farmer_e-BKzmeJOt.webp"
  , ip = "/assets/farmer_g-aC9H7ek9.webp"
  , op = "/assets/fearmonger_e-RqyAUnj6.webp"
  , np = "/assets/fearmonger_g-WdnstOgT.webp"
  , ap = "/assets/fisherman_e-Da2Y5IG7.webp"
  , rp = "/assets/fisherman_g-D4SVpSql.webp"
  , lp = "/assets/gangster-B_sTmUJn.webp"
  , cp = "/assets/gangster_e-DCxm-xho.webp"
  , dp = "/assets/gangster_g-CA0UOV4w.webp"
  , up = "/assets/general_e-C4rC0GAq.webp"
  , gp = "/assets/general_g-BqvScIJc.webp"
  , mp = "/assets/gnome-BVlHOkWi.webp"
  , hp = "/assets/gnome_e-DTU6TQnj.webp"
  , pp = "/assets/gnome_g-BpCqTusW.webp"
  , Ap = "/assets/goblin_e-5zp-L7ts.webp"
  , bp = "/assets/goblin_g-Dm3DHjuy.webp"
  , fp = "/assets/golem_e-BMGfUhmK.webp"
  , vp = "/assets/golem_g-HC-xAVh8.webp"
  , _p = "/assets/harpy_e-ChKTPCeL.webp"
  , yp = "/assets/harpy_g-Bp6VIdav.webp"
  , wp = "/assets/hatter_e-BMVaOuLf.webp"
  , kp = "/assets/hatter_g-16CFZpfo.webp"
  , Cp = "/assets/heretic_e-EZ4S5b8y.webp"
  , Sp = "/assets/heretic_g-DKZZAGQ8.webp"
  , Pp = "/assets/hermit_e-CXzG3UkT.webp"
  , Tp = "/assets/hermit_g-BT8xmstw.webp"
  , Ip = "/assets/highpriestess_e-Cl1icXV6.webp"
  , Mp = "/assets/highpriestess_g-D0i0Myk4.webp"
  , Rp = "/assets/huntsman_e-CN9kkQNR.webp"
  , Dp = "/assets/huntsman_g-1Nv97uqA.webp"
  , Ep = "/assets/kazali_e-Bhxi3sLd.webp"
  , Np = "/assets/kazali_g-BZsxV8YM.webp"
  , Bp = "/assets/king_e-DuQcqpvF.webp"
  , Vp = "/assets/king_g-CEMQO7k3.webp"
  , Op = "/assets/knight_e-DErJZl0C.webp"
  , jp = "/assets/knight_g-rWciCOvN.webp"
  , Up = "/assets/legion_e-DyzBzM4-.webp"
  , Hp = "/assets/legion_g-B4S3Jf4H.webp"
  , qp = "/assets/leviathan_e-DvtMvt2q.webp"
  , Lp = "/assets/leviathan_g-DnoVSKUH.webp"
  , zp = "/assets/lilmonsta_e-cdABFMUI.webp"
  , Gp = "/assets/lilmonsta_g-DD3Lbp-C.webp"
  , Wp = "/assets/lleech_e-DzN_r6Yd.webp"
  , Fp = "/assets/lleech_g-CSTCwFJh.webp"
  , Qp = "/assets/lordoftyphon_e-DbP_44G8.webp"
  , Zp = "/assets/lordoftyphon_g-CHKJk_1t.webp"
  , Xp = "/assets/lycanthrope_e-n_edx2Mg.webp"
  , Kp = "/assets/lycanthrope_g-BGOyDOkb.webp"
  , Yp = "/assets/magician_e-BMchX9vJ.webp"
  , Jp = "/assets/magician_g-DXz3Ajt8.webp"
  , $p = "/assets/marionette_e-BVmqAITW.webp"
  , xp = "/assets/marionette_g-XJqVphtg.webp"
  , eA = "/assets/mezepheles_e-B7tfHUqC.webp"
  , sA = "/assets/mezepheles_g-DlDB5-jk.webp"
  , tA = "/assets/nightwatchman_e-DcwB8vOD.webp"
  , iA = "/assets/nightwatchman_g-CaasqmRn.webp"
  , oA = "/assets/noble_e-BFJBeujm.webp"
  , nA = "/assets/noble_g-B0vksP8B.webp"
  , aA = "/assets/ogre_e-k2lur_NF.webp"
  , rA = "/assets/ogre_g-B3Q_ybOi.webp"
  , lA = "/assets/ojo_e-BwP-O6LJ.webp"
  , cA = "/assets/ojo_g-jY2iz8BT.webp"
  , dA = "/assets/organgrinder_e-EGmGGCZJ.webp"
  , uA = "/assets/organgrinder_g-WFPK_p_x.webp"
  , gA = "/assets/pixie_e-Dknojw1x.webp"
  , mA = "/assets/pixie_g-B1xIo6Bx.webp"
  , hA = "/assets/plaguedoctor_e-DdVqxJ_g.webp"
  , pA = "/assets/plaguedoctor_g-DUqDeP9l.webp"
  , AA = "/assets/politician_e-CRiP_Thj.webp"
  , bA = "/assets/politician_g-CXCSDrvE.webp"
  , fA = "/assets/poppygrower_e-BPf4mjjt.webp"
  , vA = "/assets/poppygrower_g-BeRDzj2D.webp"
  , _A = "/assets/preacher_e-CjXiLHle.webp"
  , yA = "/assets/preacher_g-CpPb8fQI.webp"
  , wA = "/assets/princess_e-DDQtxFNX.webp"
  , kA = "/assets/princess_g-BGsIJ79g.webp"
  , CA = "/assets/psychopath_e-CStA2Nbh.webp"
  , SA = "/assets/psychopath_g-YqeVVosZ.webp"
  , PA = "/assets/puzzlemaster_e-BeIjkcep.webp"
  , TA = "/assets/puzzlemaster_g-C7roEIMq.webp"
  , IA = "/assets/riot_e-DKD9x_C8.webp"
  , MA = "/assets/riot_g-B3TDQj13.webp"
  , RA = "/assets/shugenja_e-DQCYsHfD.webp"
  , DA = "/assets/shugenja_g-DAlTPOOn.webp"
  , EA = "/assets/snitch_e-yBlnGiGd.webp"
  , NA = "/assets/snitch_g-D_RNpbcY.webp"
  , BA = "/assets/steward_e-BJUqXXmp.webp"
  , VA = "/assets/steward_g-ASO14Teu.webp"
  , OA = "/assets/summoner_e-Ce5RiRwu.webp"
  , jA = "/assets/summoner_g-B3PLNqgM.webp"
  , UA = "/assets/villageidiot_e-D6AONnUX.webp"
  , HA = "/assets/villageidiot_g-CdZf6FkN.webp"
  , qA = "/assets/vizier_e-CR5iBAo1.webp"
  , LA = "/assets/vizier_g-CKNiI-8C.webp"
  , zA = "/assets/widow_e-DGFTy37y.webp"
  , GA = "/assets/widow_g-BMAAZQVw.webp"
  , WA = "/assets/wizard_e-CkOtUevi.webp"
  , FA = "/assets/wizard_g-MV5lMPJf.webp"
  , QA = "/assets/wraith_e-CRfpOd4V.webp"
  , ZA = "/assets/wraith_g-DDErJKaT.webp"
  , XA = "/assets/xaan_e-CkIqEKvE.webp"
  , KA = "/assets/xaan_g-BtfiSj2N.webp"
  , YA = "/assets/yaggababble_e-rNTFzBKi.webp"
  , JA = "/assets/yaggababble_g-CPSh-7bE.webp"
  , $A = "/assets/zealot_e-DoDEvVGE.webp"
  , xA = "/assets/zealot_g-D94u8jin.webp"
  , eb = "/assets/thebigbarnacle_e-Btw9LPGP.webp"
  , sb = "/assets/angel-Ayuhu7Hq.webp"
  , tb = "/assets/buddhist-BTncsaTX.webp"
  , ib = "/assets/deusexfiasco-C-oc4vaU.webp"
  , ob = "/assets/djinn-SYNTW9dK.webp"
  , nb = "/assets/doomsayer-tGT5Bk_R.webp"
  , ab = "/assets/duchess-CHpS7XMx.webp"
  , rb = "/assets/ferryman-B8DIdDH1.webp"
  , lb = "/assets/fibbin-MpVC8JVg.webp"
  , cb = "/assets/fiddler-DlAFGPhN.webp"
  , db = "/assets/hellslibrarian-DfbmTvS9.webp"
  , ub = "/assets/revolutionary-D1FL8eUK.webp"
  , gb = "/assets/sentinel-BaOVo1PE.webp"
  , mb = "/assets/spiritofivory-8gBtDAQc.webp"
  , hb = "/assets/toymaker-DnUyVGxn.webp"
  , pb = "/assets/bigwig-BSza_a7D.webp"
  , Ab = "/assets/bootlegger-C4a2M4Iu.webp"
  , bb = "/assets/gardener-DXERv7Nr.webp"
  , fb = "/assets/stormcatcher-CYdqWLOL.webp"
  , vb = "/assets/tor-DkO8A08D.webp"
  , _b = "/assets/zenomancer-C6zEtMpb.webp"
  , yb = "/assets/artist_e-CpwoIhpV.webp"
  , wb = "/assets/artist_g-CyRrA7cN.webp"
  , kb = "/assets/barber_e-BJbMUslE.webp"
  , Cb = "/assets/barber_g-CP7mk8b9.webp"
  , Sb = "/assets/barista-9RUmOrIt.webp"
  , Pb = "/assets/barista_e-dh62LsHj.webp"
  , Tb = "/assets/barista_g-IYOwLzUb.webp"
  , Ib = "/assets/bonecollector-CEqnpjbS.webp"
  , Mb = "/assets/bonecollector_e-CIpytarz.webp"
  , Rb = "/assets/bonecollector_g-DBlHdEjU.webp"
  , Db = "/assets/butcher-COYeTS3-.webp"
  , Eb = "/assets/butcher_e-BvZvHE-0.webp"
  , Nb = "/assets/butcher_g-BqDe54Mz.webp"
  , Bb = "/assets/cerenovus_e-ARmVZpWA.webp"
  , Vb = "/assets/cerenovus_g-Dks6rbpA.webp"
  , Ob = "/assets/clockmaker_e-De0CuxuO.webp"
  , jb = "/assets/clockmaker_g-z-gzmkzc.webp"
  , Ub = "/assets/deviant-DLaJy91u.webp"
  , Hb = "/assets/deviant_e-D0QU1Y2Y.webp"
  , qb = "/assets/deviant_g-Bbk8K2ZR.webp"
  , Lb = "/assets/dreamer_e-9zGefVKW.webp"
  , zb = "/assets/dreamer_g-CjKsf0eE.webp"
  , Gb = "/assets/eviltwin_e-yPqoVnXw.webp"
  , Wb = "/assets/eviltwin_g-DVXfIL-n.webp"
  , Fb = "/assets/fanggu_e-6DavSWxL.webp"
  , Qb = "/assets/fanggu_g-Dwai_VtD.webp"
  , Zb = "/assets/flowergirl_e-DJcVSLWX.webp"
  , Xb = "/assets/flowergirl_g-C3oZV2PZ.webp"
  , Kb = "/assets/harlot-aJaTZULk.webp"
  , Yb = "/assets/harlot_e-CDyE0Kdh.webp"
  , Jb = "/assets/harlot_g-DfGUnLek.webp"
  , $b = "/assets/juggler_e-BQQDYvGs.webp"
  , xb = "/assets/juggler_g-CghN7Lp-.webp"
  , ef = "/assets/klutz_e-C-CdPEop.webp"
  , sf = "/assets/klutz_g-DRcV_Rgl.webp"
  , tf = "/assets/mathematician_e-D-VneyvO.webp"
  , of = "/assets/mathematician_g-DiYoQRIl.webp"
  , nf = "/assets/mutant_e-COP-pfTP.webp"
  , af = "/assets/mutant_g-CUe36x-i.webp"
  , rf = "/assets/nodashii_e-Dt8UO6rj.webp"
  , lf = "/assets/nodashii_g-jI2LJQhL.webp"
  , cf = "/assets/oracle_e-BgNZAuGG.webp"
  , df = "/assets/oracle_g-HZdhcJUJ.webp"
  , uf = "/assets/philosopher_e-sc5zSJy2.webp"
  , gf = "/assets/philosopher_g-DOk3eWqe.webp"
  , mf = "/assets/pithag_e-C9pUiUjt.webp"
  , hf = "/assets/pithag_g-BJqrMoq3.webp"
  , pf = "/assets/sage_e-BS8e_Ree.webp"
  , Af = "/assets/sage_g-BQUVfu9h.webp"
  , bf = "/assets/savant_e-5neUO4oK.webp"
  , ff = "/assets/savant_g-n6x1YgAZ.webp"
  , vf = "/assets/seamstress_e-BfBRBNhv.webp"
  , _f = "/assets/seamstress_g-B4RHsroR.webp"
  , yf = "/assets/snakecharmer_e-D6CrPRGR.webp"
  , wf = "/assets/snakecharmer_g-DYwjThVr.webp"
  , kf = "/assets/sweetheart_e-Bm63hRzw.webp"
  , Cf = "/assets/sweetheart_g-CmqS74DM.webp"
  , Sf = "/assets/towncrier_e-BzUGp1JT.webp"
  , Pf = "/assets/towncrier_g-D9dERfO2.webp"
  , Tf = "/assets/vigormortis_e-0VJIslwJ.webp"
  , If = "/assets/vigormortis_g-DP1UY2Jk.webp"
  , Mf = "/assets/vortox_e-CI-Cd8aG.webp"
  , Rf = "/assets/vortox_g-w20-Mdd8.webp"
  , Df = "/assets/witch_e-D4AS1R1Q.webp"
  , Ef = "/assets/witch_g-CI6rg-Tb.webp"
  , Nf = "/assets/baron_e-CH4q2C6-.webp"
  , Bf = "/assets/baron_g-DSaQcH7D.webp"
  , Vf = "/assets/beggar-BpoW7fsL.webp"
  , Of = "/assets/beggar_e-C3_HD_se.webp"
  , jf = "/assets/beggar_g-Cn5PE4nQ.webp"
  , Uf = "/assets/bureaucrat-C7wkPXRS.webp"
  , Hf = "/assets/bureaucrat_e-Bmh-G0_a.webp"
  , qf = "/assets/bureaucrat_g-CyJZqBNe.webp"
  , Lf = "/assets/butler_e-C2ho4G2f.webp"
  , zf = "/assets/butler_g-Cr36DpeC.webp"
  , Gf = "/assets/chef_e-B3RO5GXN.webp"
  , Wf = "/assets/chef_g-C3a3cGeP.webp"
  , Ff = "/assets/drunk_e-bRjLB9FX.webp"
  , Qf = "/assets/drunk_g--QNmv0ZY.webp"
  , Zf = "/assets/empath_e-CWeYvCJ9.webp"
  , Xf = "/assets/empath_g-vVEkU0cf.webp"
  , Kf = "/assets/fortuneteller_e-BWljoXp7.webp"
  , Yf = "/assets/fortuneteller_g-lQQzYvkg.webp"
  , Jf = "/assets/gunslinger-wipgFlby.webp"
  , $f = "/assets/gunslinger_e-DCPdRPrm.webp"
  , xf = "/assets/gunslinger_g-CKzyQCHC.webp"
  , ev = "/assets/imp_e-DNpveOPY.webp"
  , sv = "/assets/imp_g-D-G7pJEY.webp"
  , tv = "/assets/investigator_e-CR-lRqwj.webp"
  , iv = "/assets/investigator_g-DWSOiA6Q.webp"
  , ov = "/assets/librarian_e-DNYbXXNX.webp"
  , nv = "/assets/librarian_g-Bvwb7yEa.webp"
  , av = "/assets/mayor_e-Bc2mKeJ3.webp"
  , rv = "/assets/mayor_g-BQeJ8Z2E.webp"
  , lv = "/assets/monk_e-OTOQUKVm.webp"
  , cv = "/assets/monk_g-D4wNFA-b.webp"
  , dv = "/assets/poisoner_e-Usf7TcoY.webp"
  , uv = "/assets/poisoner_g-DHNIHhxZ.webp"
  , gv = "/assets/ravenkeeper_e-Yrx6NFvE.webp"
  , mv = "/assets/ravenkeeper_g-Bg-yrUxj.webp"
  , hv = "/assets/recluse_e-BUtHsTp3.webp"
  , pv = "/assets/recluse_g-DxMFqO0r.webp"
  , Av = "/assets/saint_e-CnQBC4rO.webp"
  , bv = "/assets/saint_g-BU0hab0E.webp"
  , fv = "/assets/scapegoat-rhlm_MDq.webp"
  , vv = "/assets/scapegoat_e-BFRtmmYo.webp"
  , _v = "/assets/scapegoat_g-CrL8fHff.webp"
  , yv = "/assets/scarletwoman_e-BP5Fv_Ne.webp"
  , wv = "/assets/scarletwoman_g-CM50XIwn.webp"
  , kv = "/assets/slayer_e-4pQk5kJR.webp"
  , Cv = "/assets/slayer_g-BO_75tK_.webp"
  , Sv = "/assets/soldier_e-CvaeglsK.webp"
  , Pv = "/assets/soldier_g-Baq_oQFs.webp"
  , Tv = "/assets/spy_e-DU0tdGGe.webp"
  , Iv = "/assets/spy_g-7hnV_AFT.webp"
  , Mv = "/assets/thief-DWMyBS_x.webp"
  , Rv = "/assets/thief_e-yPbPTo5i.webp"
  , Dv = "/assets/thief_g-CPsEnUSQ.webp"
  , Ev = "/assets/undertaker_e-DVB8aMO4.webp"
  , Nv = "/assets/undertaker_g-sXYI7VS3.webp"
  , Bv = "/assets/virgin_e-BB20SAPv.webp"
  , Vv = "/assets/virgin_g-DfRSMLSj.webp"
  , Ov = "/assets/washerwoman_e-TC3PgT2N.webp"
  , jv = "/assets/washerwoman_g-CVnYjPdR.webp"
  , Ve = "/assets/logo-B1iScA0C.webp"
  , Pe = "/assets/tpi-CjLIf2nx.webp"
  , Oe = "/assets/sb-DN76BlRu.webp"
  , Uv = {
    name: "Banned",
    computed: {
        ...I("user", ["user"])
    },
    data() {
        return {}
    },
    methods: {}
}
  , Hv = {
    id: "banned"
}
  , qv = {
    class: "content"
};
function Lv(e, s, t, n, i, o) {
    const l = k("i18n-t");
    return r(),
    u("div", Hv, [s[8] || (s[8] = a("div", {
        class: "header"
    }, [a("img", {
        src: Ve,
        alt: "",
        class: "logo app"
    })], -1)), a("div", qv, [a("h4", null, d(e.$t("pages.banned.title")), 1), a("p", null, [b(l, {
        keypath: "pages.banned.description",
        scope: "global"
    }, {
        default: S( () => [a("b", null, d(e.$t("pages.banned.description_banned")), 1)]),
        _: 1
    }), e.user.banReason ? (r(),
    u(_, {
        key: 0
    }, [s[0] || (s[0] = a("br", null, null, -1)), v(" " + d(e.$t("pages.banned.reason")), 1), s[1] || (s[1] = a("br", null, null, -1)), a("b", null, d(e.user.banReason), 1), s[2] || (s[2] = a("br", null, null, -1))], 64)) : p("", !0), e.user.banExpires ? (r(),
    u(_, {
        key: 1
    }, [v(d(e.$t("pages.banned.expires")), 1), s[3] || (s[3] = a("br", null, null, -1)), a("b", null, d(e.$d(new Date(e.user.banExpires), {
        year: "numeric",
        month: "long",
        day: "numeric"
    })), 1), s[4] || (s[4] = a("br", null, null, -1)), v(" " + d(e.$t("pages.banned.expires2")), 1)], 64)) : (r(),
    u(_, {
        key: 2
    }, [v(d(e.$t("pages.banned.permanent")), 1)], 64)), s[6] || (s[6] = a("br", null, null, -1)), b(l, {
        keypath: "pages.banned.footer1",
        scope: "global"
    }, {
        default: S( () => [...s[5] || (s[5] = [a("a", {
            href: "mailto:support@botc.app",
            target: "_blank"
        }, "support@botc.app", -1)])]),
        _: 1
    }), s[7] || (s[7] = a("br", null, null, -1)), v(" " + d(e.$t("pages.banned.footer2")) + " ", 1), a("em", null, d(e.$t("pages.banned.footer3")), 1)])]), s[9] || (s[9] = a("div", {
        class: "authors"
    }, [a("img", {
        src: Pe,
        alt: "",
        class: "logo tpi"
    }), a("img", {
        src: Oe,
        alt: "",
        class: "logo sb"
    })], -1))])
}
const zv = O(Uv, [["render", Lv], ["__scopeId", "data-v-c6699c79"]])
  , Gv = {
    name: "Update",
    computed: {
        ...I("user", ["serverTimeDiff", "accessToken"]),
        ...I(["session"]),
        backRoute() {
            return this.accessToken ? this.session.sessionId ? {
                name: "Grimoire"
            } : {
                name: "Lobby"
            } : {
                name: "Login"
            }
        },
        diff() {
            return Math.round(this.serverTimeDiff / 6e4)
        }
    },
    data() {
        return {}
    },
    methods: {}
}
  , Wv = {
    id: "clock"
}
  , Fv = {
    class: "content"
}
  , Qv = {
    href: "https://www.majorgeeks.com/content/page/synchronize_clock_with_an_internet_time_server.html",
    target: "_blank"
};
function Zv(e, s, t, n, i, o) {
    const l = k("i18n-t");
    return r(),
    u("div", Wv, [s[1] || (s[1] = a("div", {
        class: "header"
    }, [a("img", {
        src: Ve,
        alt: "",
        class: "logo app"
    })], -1)), a("div", Fv, [a("h4", null, d(e.$t("pages.clock.title")), 1), b(l, {
        keypath: "pages.clock.description",
        tag: "p",
        scope: "global"
    }, {
        default: S( () => [a("b", null, d(e.$t("pages.clock.description_mins", o.diff)), 1), a("a", Qv, d(e.$t("pages.clock.description_online")), 1)]),
        _: 1
    }), a("button", {
        type: "button",
        class: "button",
        onClick: s[0] || (s[0] = g => e.$router.push(o.backRoute))
    }, d(e.$t("pages.clock.return")), 1)]), s[2] || (s[2] = a("div", {
        class: "authors"
    }, [a("img", {
        src: Pe,
        alt: "",
        class: "logo tpi"
    }), a("img", {
        src: Oe,
        alt: "",
        class: "logo sb"
    })], -1))])
}
const Xv = O(Gv, [["render", Zv], ["__scopeId", "data-v-e6bee590"]])
  , Rn = "/assets/background1-BpU4ja-f.webp"
  , $e = "/assets/background1t-DHbud4pS.webp"
  , Dn = "/assets/background2-CgYNt1Ve.webp"
  , xe = "/assets/background2t-DstAC8L3.webp"
  , En = "/assets/background3-BKXF5Trs.webp"
  , es = "/assets/background3t-CbbHtzGF.webp"
  , Nn = "/assets/background4-Czm52619.webp"
  , ss = "/assets/background4t-CgR43iC3.webp"
  , Bn = "/assets/background5-C8rPTCyH.webp"
  , ts = "/assets/background5t-BUIwLYe9.webp"
  , Vn = "/assets/background6-B64VUblt.webp"
  , is = "/assets/background6t-CtQxnilw.webp"
  , On = "/assets/background1-C64aKIx0.webp"
  , os = "/assets/background1t-DMtLDqmO.webp"
  , jn = "/assets/background2-DBkYNRkh.webp"
  , ns = "/assets/background2t-C5uAKrl8.webp"
  , Un = "/assets/background3-CoJic9Le.webp"
  , as = "/assets/background3t-aFaeliYY.webp"
  , Hn = "/assets/background4-BAO6WjXL.webp"
  , rs = "/assets/background4t-CF_Go9po.webp"
  , qn = "/assets/background5-BbSbo6Gy.webp"
  , ls = "data:image/webp;base64,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"
  , Ln = "/assets/background6-CoMsrMbU.webp"
  , cs = "data:image/webp;base64,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"
  , zn = "/assets/background7-Cf2KQeVt.webp"
  , ds = "data:image/webp;base64,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"
  , Gn = "/assets/background8-BBIeE9c0.webp"
  , us = "data:image/webp;base64,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"
  , Wn = "/assets/background1-CuyW2BLZ.webp"
  , gs = "/assets/background1t-aLs_Jl5I.webp"
  , Fn = "/assets/background2-K9_lN7Mc.webp"
  , ms = "/assets/background2t-CckmZ43o.webp"
  , Qn = "/assets/background3-DcqXQDdD.webp"
  , hs = "/assets/background3t-B7BHi4O8.webp"
  , Zn = "/assets/background4-X8jQb4tv.webp"
  , ps = "/assets/background4t-DV1DfgFp.webp"
  , Xn = "/assets/background5-DGQcUGSF.webp"
  , As = "/assets/background5t-SAesBd90.webp"
  , Kn = "/assets/background6-Bj2Pn2zr.webp"
  , bs = "/assets/background6t-BGYqtwtm.webp"
  , Yn = "/assets/background1-NUIA0OVV.webp"
  , fs = "/assets/background1t-BOuKVDN4.webp"
  , Jn = "/assets/background2-DycZEMhJ.webp"
  , vs = "/assets/background2t-DOofBXDu.webp"
  , $n = "/assets/background3-Dw6DXljd.webp"
  , _s = "/assets/background3t-DrnWsxUb.webp"
  , xn = "/assets/background4-C7TzDZ7M.webp"
  , ys = "/assets/background4t-D26MBsn7.webp"
  , ea = "/assets/background5-CUu8vEFl.webp"
  , ws = "/assets/background5t-BmsArEO-.webp"
  , sa = "/assets/background6-Dsvfc9R4.webp"
  , ks = "/assets/background6t-C_geWcN4.webp"
  , ta = "/assets/background-bJ1INm6Z.webp"
  , ia = "/assets/background1-C0iW8pNy.webp"
  , Cs = "/assets/background1t-C4I5Mxpb.webp"
  , oa = "/assets/background2-vSWVpkv3.webp"
  , Ss = "/assets/background2t-8hTjdqtA.webp"
  , na = "/assets/background3-CzcrM8e7.webp"
  , Ps = "/assets/background3t-BYZtXcQd.webp"
  , Kv = {
    name: "Token",
    props: {
        role: {
            type: Object,
            default: () => ({})
        },
        alignment: {
            type: String,
            default: ""
        }
    },
    computed: {
        reminderLeaves() {
            return (this.role.reminders || []).length + (this.role.remindersGlobal || []).length
        },
        roleNameFontSize() {
            const e = this.$te(`roles.${this.role.id}.name`) ? this.$t(`roles.${this.role.id}.name`) : this.role.name;
            return e.length > 25 ? "70%" : e.length > 17 ? "80%" : e.length > 10 ? "90%" : "110%"
        },
        ...I(["grimoire", "edition", "settings"]),
        ...D(["roleIconURL"])
    },
    data() {
        return {}
    }
}
  , Yv = ["aria-label"]
  , Jv = {
    key: 1,
    class: "leaf-left"
}
  , $v = {
    key: 2,
    class: "leaf-right"
}
  , xv = {
    key: 4,
    class: "leaf-orange"
}
  , e_ = {
    viewBox: "0 0 140 140",
    class: "name",
    "aria-hidden": "true"
}
  , s_ = ["font-size"]
  , t_ = {
    "xlink:href": "#circle-path"
}
  , i_ = {
    key: 5,
    class: "ability"
}
  , o_ = {
    key: 0,
    class: "alt-name"
}
  , n_ = {
    key: 1
}
  , a_ = {
    key: 2,
    class: "flavor"
};
function r_(e, s, t, n, i, o) {
    var l, g;
    return r(),
    u("div", {
        class: y(["token", {
            ["role-" + t.role.id]: t.role.id,
            ["edition-" + (t.role.edition || e.edition.id)]: !0,
            ["team-" + t.role.team]: t.role.team,
            ["alignment-" + t.alignment]: t.alignment
        }]),
        role: "button",
        "aria-label": t.role.id && e.$te(`roles.${t.role.id}.name`) ? e.$t(`roles.${t.role.id}.name`) : (l = t.role.name) != null ? l : e.$t("grimoire.token")
    }, [t.role.id ? (r(),
    u("span", {
        key: 0,
        class: "icon",
        style: L({
            backgroundImage: `url(${e.roleIconURL(t.role, t.alignment)})`
        })
    }, null, 4)) : p("", !0), t.role.firstNight || t.role.firstNightReminder ? (r(),
    u("span", Jv)) : p("", !0), t.role.otherNight || t.role.otherNightReminder ? (r(),
    u("span", $v)) : p("", !0), o.reminderLeaves ? (r(),
    u("span", {
        key: 3,
        class: y(["leaf-top", ["leaf-top" + Math.min(o.reminderLeaves, 6)]])
    }, null, 2)) : p("", !0), t.role.setup ? (r(),
    u("span", xv)) : p("", !0), (r(),
    u("svg", e_, [t.role.id ? (r(),
    u("text", {
        key: 0,
        x: "100%",
        "text-anchor": "middle",
        class: "label mozilla",
        "font-size": o.roleNameFontSize
    }, [a("textPath", t_, d(e.$te(`roles.${t.role.id}.name`) ? e.$t(`roles.${t.role.id}.name`) : t.role.name), 1)], 8, s_)) : p("", !0)])), t.role.ability ? (r(),
    u("div", i_, [a("b", null, d(e.$te(`roles.${t.role.id}.name`) ? e.$t(`roles.${t.role.id}.name`) : t.role.name), 1), e.settings.game.isEnglishNames && e.$te(`roles.${t.role.id}.name`) && e.$t(`roles.${t.role.id}.name`) !== t.role.name ? (r(),
    u("span", o_, " (" + d(t.role.name) + ")", 1)) : p("", !0), a("i", null, "â " + d(e.$t(`grimoire.${t.role.team}`)), 1), s[0] || (s[0] = a("br", null, null, -1)), v(" " + d(e.$te(`roles.${t.role.id}.ability`) ? e.$t(`roles.${t.role.id}.ability`) : t.role.ability) + " ", 1), t.role.id === "bootlegger" && ((g = e.edition.bootlegger) != null && g.length) ? (r(),
    u("ul", n_, [(r(!0),
    u(_, null, B(e.edition.bootlegger, (c, h) => (r(),
    u("li", {
        key: h
    }, d(c), 1))), 128))])) : p("", !0), t.role.flavor ? (r(),
    u("div", a_, d(e.$te(`roles.${t.role.id}.flavor`) ? e.$t(`roles.${t.role.id}.flavor`) : t.role.flavor), 1)) : p("", !0)])) : p("", !0)], 10, Yv)
}
const fe = O(Kv, [["render", r_], ["__scopeId", "data-v-52a03550"]])
  , l_ = {
    name: "PlayerMenu",
    components: {
        FontAwesomeIcon: Y
    },
    props: {
        player: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...I("players", ["players", "storytellers"]),
        ...I("user", ["user"]),
        ...I(["grimoire", "session", "vote", "chat", "roles", "game"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess"]),
        ...D("players", ["seatedPlayerMap", "playerName"]),
        ...D("game", ["isNight"]),
        ...D(["filterAbilities", "roleIconURL"]),
        index() {
            return this.players.indexOf(this.player)
        }
    },
    methods: {
        ...j(["setMenuOpen", "toggleModal"]),
        ...$("chat", ["requestWhisper", "followUser"]),
        ...$("user", ["promptUserUpdate"]),
        ...$("vote", ["nominatePlayer"]),
        changeCharacter() {
            const e = this.player;
            this.isStoryteller || e.role.team !== "traveller" ? this.toggleModal({
                name: "role",
                params: {
                    playerIndex: this.index
                }
            }) : this.changeAlignment()
        },
        changeAlignment() {
            const {id: e, team: s} = this.player.role;
            if (!e)
                return;
            let t;
            switch (this.player.alignment) {
            case "g":
                t = ["demon", "minion"].includes(s) ? null : "e";
                break;
            case "e":
                t = ["traveller", "townsfolk", "outsider"].includes(s) ? null : "g";
                break;
            default:
                t = ["townsfolk", "outsider"].includes(s) ? "e" : "g"
            }
            this.$store.commit("players/updatePlayer", {
                player: this.player,
                property: "alignment",
                value: t
            })
        },
        async emptySeat() {
            if (this.isStoryteller)
                if (this.game.isRunning)
                    try {
                        await this.$store.dispatch("openDialogue", {
                            type: "confirm",
                            title: ["player.menu.empty_title", [this.$t(...this.playerName(this.player))]],
                            text: "player.menu.empty_text"
                        }) && this.$store.dispatch("players/emptySeat", this.player)
                    } catch {}
                else
                    this.$store.dispatch("players/emptySeat", this.player)
        },
        useAbility(e) {
            var s, t;
            switch (e.name) {
            case "pointing":
                if (e.time === "night" && e.global) {
                    const n = this.players.filter( ({role: i, id: o, reminders: l, isDead: g}) => o && (i.team === e.global && !["marionette", "drunk", "lunatic"].includes(i.id) && !l.some( ({role: c}) => c === "alchemist") || e.global === "dead" && g)).map( ({id: i}) => i);
                    if (!n.length)
                        return;
                    this.$store.dispatch("session/startPointing", ["storyteller", ...n])
                } else
                    this.$store.dispatch("session/startPointing");
                break;
            case "open-eyes":
                this.$store.commit("players/openEyes", {
                    index: this.index,
                    value: (s = this.player.status) != null && s.includes("open-eyes") || (t = this.player.status) != null && t.includes("peek-eyes") ? !1 : "open-eyes"
                });
                break
            }
        }
    }
}
  , c_ = {
    key: 0,
    class: "menu"
}
  , d_ = ["onClick"];
function u_(e, s, t, n, i, o) {
    const l = k("font-awesome-icon");
    return r(),
    C(q, {
        name: "fold"
    }, {
        default: S( () => [e.grimoire.menuOpen === "p" + o.index ? (r(),
        u("ul", c_, [e.isStoryteller ? (r(!0),
        u(_, {
            key: 0
        }, B([...e.filterAbilities(t.player, "ability"), ...e.filterAbilities(t.player, "player")], ({ability: g, role: c}, h) => (r(),
        u("li", {
            class: "special",
            key: h,
            onClick: m => o.useAbility(g)
        }, [b(l, {
            icon: "star"
        }), a("span", null, [v(d(c.name) + ":", 1), s[6] || (s[6] = a("br", null, null, -1)), v(" " + d(e.$t(`grimoire.abilities.${g.name}`, g.name)), 1)])], 8, d_))), 128)) : p("", !0), a("li", {
            onClick: s[0] || (s[0] = g => o.changeCharacter())
        }, [b(l, {
            icon: "theater-masks"
        }), v(" " + d(e.$t("player.menu.character")), 1)]), a("li", {
            class: y({
                disabled: !t.player.role.id
            }),
            onClick: s[1] || (s[1] = g => o.changeAlignment())
        }, [b(l, {
            icon: "yin-yang"
        }), v(" " + d(e.$t("player.menu.alignment")), 1)], 2), e.hasGrimoireAccess && (e.chat.audio.streams.has(t.player.id) || e.chat.following === t.player.id) ? (r(),
        u("li", {
            key: 1,
            onClick: s[2] || (s[2] = g => e.followUser(t.player.id))
        }, [e.chat.following !== t.player.id ? (r(),
        u(_, {
            key: 0
        }, [b(l, {
            icon: "link"
        }), v(" " + d(e.$t("player.menu.follow")), 1)], 64)) : (r(),
        u(_, {
            key: 1
        }, [b(l, {
            icon: "link-slash"
        }), v(" " + d(e.$t("player.menu.unfollow")), 1)], 64))])) : p("", !0), e.isStoryteller ? (r(),
        u(_, {
            key: 2
        }, [e.isNight ? (r(),
        u("li", {
            key: 0,
            onClick: s[3] || (s[3] = g => e.toggleModal({
                name: "signal",
                params: {
                    player: t.player
                }
            }))
        }, [b(l, {
            icon: "eye"
        }), v(" " + d(e.$t("player.menu.wake")), 1)])) : !e.vote.nomination && e.grimoire.mode !== "pointing" ? (r(),
        u("li", {
            key: 1,
            onClick: s[4] || (s[4] = g => e.nominatePlayer([o.index, o.index]))
        }, [b(l, {
            icon: "hand-point-right"
        }), v(" " + d(e.$t("player.menu.nominate")), 1)])) : p("", !0), t.player.id && e.session.sessionId ? (r(),
        u("li", {
            key: 2,
            onClick: s[5] || (s[5] = g => o.emptySeat())
        }, [b(l, {
            icon: "chair"
        }), v(" " + d(e.$t("player.menu.empty")), 1)])) : p("", !0)], 64)) : p("", !0)])) : p("", !0)]),
        _: 1
    })
}
const g_ = O(l_, [["render", u_], ["__scopeId", "data-v-d0ac806f"]])
  , m_ = "/assets/bugreporter-Jilx8avW.mp4"
  , h_ = "/assets/bugreporter-BuoqQ1WR.webm"
  , p_ = "/assets/worldcup25-BHTbsf-H.mp4"
  , A_ = "/assets/worldcup25-DQ8_m4si.webm"
  , Bs = {
    bugreporter: {
        overlay: !0
    },
    worldcup25: {
        loop: !0
    }
}
  , b_ = {
    name: "Emote",
    props: {
        playerId: {
            type: [String],
            required: !0
        }
    },
    computed: {
        ...D(["roleIconURL"]),
        ...I(["session", "vote"]),
        animation() {
            return Bs[this.name]
        },
        icon() {
            var e;
            return ((e = this.name) == null ? void 0 : e.startsWith("i-")) && this.name.substring(2)
        },
        role() {
            var e;
            return ((e = this.name) == null ? void 0 : e.startsWith("r-")) && this.name.substring(2)
        },
        raised() {
            return !this.vote.nomination && this.session.raisedHands.has(this.playerId)
        },
        name() {
            return this.session.raisedHands.get(this.playerId)
        },
        transitionStyle() {
            var e;
            return (e = Bs[this.name]) != null && e.overlay ? "emote-overlay" : "emote-peek"
        },
        emoteClasses() {
            return {
                [this.transitionStyle]: !0,
                [`emote-${this.name}`]: !0
            }
        },
        videoAttributes() {
            var e;
            return {
                loop: ((e = Bs[this.name]) == null ? void 0 : e.loop) || !1
            }
        }
    },
    methods: {
        videoUrl(e) {
            if (this.animation)
                return new URL(Object.assign({
                    "/src/assets/cosmetics/emotes/bugreporter-icon.webp": dl,
                    "/src/assets/cosmetics/emotes/bugreporter.mp4": m_,
                    "/src/assets/cosmetics/emotes/bugreporter.webm": h_,
                    "/src/assets/cosmetics/emotes/worldcup25-icon.webp": ul,
                    "/src/assets/cosmetics/emotes/worldcup25.mp4": p_,
                    "/src/assets/cosmetics/emotes/worldcup25.webm": A_
                })[`/src/assets/cosmetics/emotes/${this.name}.${e}`],import.meta.url).href
        }
    }
}
  , f_ = ["src"]
  , v_ = ["src"];
function __(e, s, t, n, i, o) {
    const l = k("font-awesome-icon");
    return r(),
    C(q, {
        name: o.transitionStyle
    }, {
        default: S( () => [o.raised ? (r(),
        u("div", {
            key: 0,
            class: y(["emote emote-raised", o.emoteClasses])
        }, [o.animation ? (r(),
        u("video", Hs({
            key: 0,
            class: "emote-video",
            autoplay: "",
            muted: "",
            playsinline: ""
        }, o.videoAttributes), [a("source", {
            src: o.videoUrl("mp4"),
            type: "video/mp4;codecs=hvc1"
        }, null, 8, f_), a("source", {
            src: o.videoUrl("webm"),
            type: "video/webm"
        }, null, 8, v_)], 16)) : o.icon ? (r(),
        C(l, {
            key: 1,
            class: "emote-icon",
            icon: o.icon
        }, null, 8, ["icon"])) : o.role ? (r(),
        u("div", {
            key: 2,
            class: "emote-role",
            style: L({
                backgroundImage: `url(${e.roleIconURL(o.role)})`
            })
        }, null, 4)) : p("", !0)], 2)) : p("", !0)]),
        _: 1
    }, 8, ["name"])
}
const hl = O(b_, [["render", __], ["__scopeId", "data-v-bd563f86"]])
  , y_ = {
    name: "PlayerOverlay",
    components: {
        Emote: hl
    },
    props: {
        player: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...I("players", ["players", "storytellers"]),
        ...I("user", ["user"]),
        ...I(["grimoire", "session", "chat", "vote"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess", "isSpectator", "getOpenEyes"]),
        ...D("players", ["seatedPlayerMap"]),
        ...D("session", ["pointedPlayers"]),
        ...D("game", ["isNight"]),
        ...D("chat", ["whispersAvailable", "textsAvailable", "isPrivateChat"]),
        ...D(["roleIconURL"]),
        playerIndex() {
            return this.players.indexOf(this.player)
        },
        userIndex() {
            return this.players.findIndex( ({id: e}) => e === this.user.id)
        },
        voteCount() {
            if (this.vote.isHidden && !this.hasGrimoireAccess)
                return "?";
            const {nomination: e, votes: s} = this.vote
              , t = this.players.length;
            let n = 0;
            const i = (this.playerIndex - 1 + t - e[1]) % t;
            for (let o = e[1]; o <= e[1] + i; o++)
                n += s[(o + 1) % t] || 0;
            return Math.round(n * 10) / 10
        },
        voteLocked() {
            const e = this.players.length;
            return this.vote.nomination ? (this.playerIndex - 1 + e - this.vote.nomination[1]) % e < this.vote.locked - 1 : !1
        },
        voteVisible() {
            return this.vote.nomination && (!this.vote.isHidden || this.hasGrimoireAccess || this.userIndex === this.playerIndex)
        },
        nominator() {
            var e;
            return parseInt((e = this.grimoire.menuOpen.match(/p(\d+)/)) == null ? void 0 : e.pop())
        },
        showNomination() {
            return this.isStoryteller && !this.isNight && !this.vote.nomination && this.grimoire.menuOpen !== "p" + this.playerIndex && this.grimoire.mode !== "pointing" && this.nominator > -1
        },
        showOpenEyes() {
            var e, s;
            return !this.isNight || this.player.id !== this.user.id && !this.hasGrimoireAccess || this.player.id === this.user.id && !this.getOpenEyes ? !1 : (e = this.player.status) != null && e.includes("open-eyes") ? "open-eyes" : (s = this.player.status) != null && s.includes("peek-eyes") ? "peek-eyes" : ""
        },
        signal() {
            const {signals: e} = this.session;
            return this.isNight && (this.hasGrimoireAccess || this.getOpenEyes === "open-eyes") && e[this.player.id] ? e[this.player.id].slice(-1).pop() : !1
        }
    },
    data() {
        return {
            pointingDelay: 500,
            pointingTimeout: !1
        }
    },
    methods: {
        ...j(["setMenuOpen", "toggleModal", "setTab"]),
        ...$("session", ["pointAtPlayer"]),
        ...$("chat", ["requestWhisper", "showTextTab"]),
        ...$("vote", ["nominatePlayer"])
    }
}
  , w_ = {
    class: "overlay"
}
  , k_ = {
    class: "mirror"
};
function C_(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("Emote");
    return r(),
    u("div", w_, [b(Ye, {
        name: "zoom"
    }, {
        default: S( () => [e.grimoire.playerSelectCallback ? (r(),
        C(l, {
            key: 0,
            class: y(["player-select", {
                empty: !t.player.id
            }]),
            icon: "user",
            "aria-label": e.$t("player.overlay.select"),
            "aria-hidden": "false",
            role: "button",
            onClick: s[0] || (s[0] = c => e.grimoire.playerSelectCallback(o.playerIndex))
        }, null, 8, ["class", "aria-label"])) : (r(),
        u(_, {
            key: 1
        }, [e.vote.markedPlayer === o.playerIndex ? (r(),
        C(l, {
            key: 0,
            class: "marked-for-execution",
            icon: "skull"
        })) : p("", !0), o.showOpenEyes ? (r(),
        C(l, {
            key: 1,
            icon: "eye",
            class: y(o.showOpenEyes),
            "aria-label": e.$t("player.overlay.eyes_open"),
            "aria-hidden": "false",
            role: "button"
        }, null, 8, ["class", "aria-label"])) : p("", !0), o.signal && o.signal.isInbound && !o.signal.isRead ? (r(),
        C(l, {
            key: 2,
            icon: o.signal.message.length === 1 && o.signal.message[0].id === "acknowledge" ? "thumbs-up" : "eye",
            class: "signal-received",
            "aria-label": e.$t("player.overlay.night_info_received"),
            "aria-hidden": "false",
            role: "button",
            onClick: s[1] || (s[1] = M(c => e.toggleModal({
                name: "signal",
                params: {
                    player: t.player
                }
            }), ["stop"]))
        }, null, 8, ["icon", "aria-label"])) : p("", !0), o.signal && (!o.signal.isInbound || o.signal.isRead) ? (r(),
        C(l, {
            key: 3,
            icon: o.signal.message.length === 1 && o.signal.message[0].id === "acknowledge" ? "thumbs-up" : "eye-slash",
            class: "signal-sent",
            "aria-label": e.$t("player.overlay.night_info_sent"),
            "aria-hidden": "false",
            role: "button",
            onClick: s[2] || (s[2] = M(c => e.toggleModal({
                name: "signal",
                params: {
                    player: t.player
                }
            }), ["stop"]))
        }, null, 8, ["icon", "aria-label"])) : p("", !0), o.voteVisible && !o.voteLocked && e.vote.votes[o.playerIndex] > 1 ? (r(),
        C(l, {
            key: 4,
            icon: "hand-paper",
            class: y(["vote up flipped", {
                secret: e.vote.isHidden
            }])
        }, null, 8, ["class"])) : p("", !0), o.voteVisible && !o.voteLocked && e.vote.votes[o.playerIndex] ? (r(),
        C(l, {
            key: 5,
            icon: "hand-paper",
            class: y(["vote up", {
                secret: e.vote.isHidden
            }])
        }, null, 8, ["class"])) : o.voteVisible && o.voteLocked && !e.vote.votes[o.playerIndex] ? (r(),
        C(l, {
            key: 6,
            icon: "times",
            class: y(["vote down", {
                secret: e.vote.isHidden
            }])
        }, null, 8, ["class"])) : o.voteVisible && o.voteLocked && e.vote.votes[o.playerIndex] ? (r(),
        u("span", {
            key: 7,
            class: y(["vote", {
                secret: e.vote.isHidden
            }])
        }, d(o.voteCount), 3)) : p("", !0), e.chat.isPrompt && e.whispersAvailable.has(t.player.id) ? (r(),
        C(l, {
            key: 8,
            icon: e.isPrivateChat(e.chat.channel) || e.isPrivateChat(e.chat.userChannels.get(t.player.id)) ? "user-plus" : "comments",
            class: "whisper voice",
            "aria-label": e.$t("player.menu.chat"),
            "aria-hidden": "false",
            role: "button",
            onClick: s[3] || (s[3] = c => e.requestWhisper(t.player))
        }, null, 8, ["icon", "aria-label"])) : p("", !0), e.chat.isPrompt && e.textsAvailable.has(t.player.id) ? (r(),
        C(l, {
            key: 9,
            icon: "envelope",
            class: "whisper text",
            "aria-label": e.$t("player.menu.whisper"),
            "aria-hidden": "false",
            role: "button",
            onClick: s[4] || (s[4] = c => e.showTextTab(t.player.id))
        }, null, 8, ["aria-label"])) : p("", !0), o.showNomination ? (r(),
        C(l, {
            key: 10,
            icon: o.nominator === o.playerIndex ? "arrows-to-dot" : "hand-point-right",
            class: "nominate",
            "aria-label": e.$t("player.overlay.nominate"),
            "aria-hidden": "false",
            role: "button",
            style: L({
                transform: o.nominator > -1 && o.nominator !== o.playerIndex ? `scale(${o.nominator > o.playerIndex ? -1 : 1}) rotateZ(${180 / e.players.length * (o.nominator + o.playerIndex)}deg)` : null
            }),
            onClick: s[5] || (s[5] = c => e.nominatePlayer([o.nominator, o.playerIndex]))
        }, null, 8, ["icon", "aria-label", "style"])) : p("", !0), e.grimoire.mode === "pointing" ? (r(),
        C(l, {
            key: 11,
            class: y(["pointing", {
                pointed: e.session.pointers[o.userIndex] === o.playerIndex,
                chosen: e.pointedPlayers.includes(o.playerIndex),
                locked: e.session.isPointing === "locked"
            }]),
            icon: parseInt(e.session.pointers[o.playerIndex]) >= 0 ? parseInt(e.session.pointers[o.playerIndex]) === o.playerIndex ? "arrows-to-dot" : "hand-point-right" : "times",
            "aria-label": e.$t("player.overlay.point"),
            "aria-hidden": "false",
            role: "button",
            style: L({
                transform: parseInt(e.session.pointers[o.playerIndex]) >= 0 && e.session.pointers[o.playerIndex] !== o.playerIndex ? `scale(${e.session.pointers[o.playerIndex] < o.playerIndex ? -1 : 1}) rotateZ(${180 / e.players.length * (e.session.pointers[o.playerIndex] + o.playerIndex)}deg)` : null
            }),
            onClick: s[6] || (s[6] = c => e.pointAtPlayer(o.playerIndex))
        }, null, 8, ["class", "icon", "aria-label", "style"])) : p("", !0)], 64))]),
        _: 1
    }), a("div", k_, [t.player.id ? (r(),
    C(g, {
        key: 0,
        "player-id": t.player.id
    }, null, 8, ["player-id"])) : p("", !0)])])
}
const S_ = O(y_, [["render", C_], ["__scopeId", "data-v-6048fd35"]])
  , Fe = (e, s) => {
    var o, l;
    if (!e || Array.from(e.classList).includes("muted"))
        return;
    const t = (o = e.dataset.volume) != null ? o : 1
      , n = (l = e.dataset.userid) != null ? l : "";
    let i = Math.pow(10, s / 85) * 10;
    i <= 1 && (i = 0),
    i = Math.round(i * t * 15),
    (e.closest("li") || e).style.setProperty("--volume", i),
    window.whispersElem && window.whispersElem.style.setProperty(`--volume${n}`, i)
}
  , He = (e, s) => {
    var n;
    if (!e || Array.from(e.classList).includes("muted"))
        return;
    const t = (n = e.dataset.userid) != null ? n : "";
    (e.closest("li") || e).style.setProperty(`--speaking${t}`, s ? 1 : 0),
    window.whispersElem && window.whispersElem.style.setProperty(`--speaking${t}`, s ? 1 : 0)
}
  , P_ = {
    name: "ChatAudio",
    components: {
        FontAwesomeIcon: Y
    },
    computed: {
        ...I(["chat", "session"]),
        ...I("user", ["user"]),
        ...D("game", ["isNight"]),
        stream() {
            return this.chat.audio.streams.get(this.userId)
        },
        muted() {
            var e, s;
            return this.isNight && this.userId !== this.user.id ? !1 : ((e = this.chat.usersMuted[this.userId]) == null ? void 0 : e.audio) || Object.values((s = this.chat.audio.volumes.get(this.userId)) != null ? s : {}).some(t => !t) || Number(this.chat.userOverrides.get("volume-" + this.userId)) === 0 || !1
        },
        silenced() {
            return Number(this.chat.userOverrides.get("volume-" + this.userId)) === 0
        },
        deafened() {
            var e;
            return this.isNight && this.userId !== this.user.id ? !1 : ((e = this.chat.usersDeafened[this.userId]) == null ? void 0 : e.audio) || this.userId === this.user.id && this.chat.audio.isDeafened
        },
        userVolume() {
            var e, s;
            return Object.values((e = this.chat.audio.volumes.get(this.userId)) != null ? e : {}).reduce( (t, n) => t * n, (s = this.chat.userOverrides.get("volume-" + this.userId)) != null ? s : 1)
        }
    },
    props: {
        userId: {
            type: String,
            default: ""
        }
    },
    data() {
        return {
            voiceLevel: 0,
            hark: null
        }
    },
    methods: {
        silenceUser() {
            const e = this.chat.userOverrides.get("volume-" + this.userId) === 0;
            this.$store.commit("chat/setUserOverride", {
                userId: this.userId,
                type: "volume",
                value: e ? !1 : 0
            })
        },
        initVolumeBar() {
            if (this.hark && (this.hark.stop(),
            this.hark = null,
            this.voiceLevel = 0),
            !this.stream || !this.stream.getAudioTracks()[0])
                return;
            this.hark = nl(this.stream, {
                play: !1,
                interval: 100,
                audioContext: this.chat.audio.context
            });
            const e = this.$refs.audioContainer;
            this.hark.on("volume_change", Fe.bind(this, e)),
            this.hark.on("speaking", () => He(e, !0)),
            this.hark.on("stopped_speaking", () => He(e, !1))
        }
    },
    beforeUnmount() {
        this.hark && this.hark.stop(),
        He(this.$refs.audioContainer, !1),
        Fe(this.$refs.audioContainer, -100)
    },
    mounted() {
        this.$nextTick( () => {
            this.initVolumeBar()
        }
        )
    },
    watch: {
        stream() {
            this.stream ? this.$nextTick( () => this.initVolumeBar()) : (He(this.$refs.audioContainer, !1),
            Fe(this.$refs.audioContainer, -100))
        },
        "chat.isNotAllowed"() {
            this.chat.isNotAllowed || this.initVolumeBar()
        },
        muted() {
            this.muted && (He(this.$refs.audioContainer, !1),
            Fe(this.$refs.audioContainer, -100))
        }
    }
}
  , T_ = {
    key: 0,
    class: "chat-audio"
}
  , I_ = ["data-volume", "data-userid", "title"];
function M_(e, s, t, n, i, o) {
    var g;
    const l = k("font-awesome-icon");
    return e.session.sessionId && t.userId && e.chat.isConnected && ((g = e.session.users.get(t.userId)) != null && g.isOnline) ? (r(),
    u("div", T_, [o.stream ? (r(),
    u("div", {
        key: 0,
        class: y(["audio", {
            muted: o.muted,
            silenced: o.silenced
        }]),
        "data-volume": o.userVolume,
        "data-userid": t.userId,
        ref: "audioContainer",
        onClick: s[0] || (s[0] = M( (...c) => o.silenceUser && o.silenceUser(...c), ["stop"])),
        title: o.muted ? e.$t("overlays.whisper.muted") : ""
    }, [o.deafened ? (r(),
    C(l, {
        key: 0,
        icon: "ear-deaf"
    })) : p("", !0), o.silenced ? (r(),
    C(l, {
        key: 1,
        icon: "volume-mute"
    })) : o.muted && e.chat.userChannels.get(t.userId) === e.chat.channel ? (r(),
    C(l, {
        key: 2,
        icon: "microphone-slash"
    })) : p("", !0)], 10, I_)) : e.chat.consumers.has(t.userId) || t.userId === e.user.id ? (r(),
    u("div", {
        key: 1,
        onClick: s[1] || (s[1] = M( () => {}
        , ["stop"]))
    }, [o.deafened ? (r(),
    C(l, {
        key: 0,
        icon: "ear-deaf"
    })) : (r(),
    C(l, {
        key: 1,
        icon: "headphones",
        title: e.$t("player.name.listening")
    }, null, 8, ["title"]))])) : p("", !0)])) : p("", !0)
}
const pl = O(P_, [["render", M_], ["__scopeId", "data-v-e6fef72a"]])
  , R_ = {
    name: "PlayerName",
    components: {
        ChatAudio: pl
    },
    props: {
        player: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...I(["grimoire", "session", "chat"]),
        ...I("players", ["players"]),
        ...I("user", ["user"]),
        ...D("game", ["isNight"]),
        ...D("players", ["playerName"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess"]),
        ...D("chat", ["hasAvatars"]),
        canChat() {
            return this.chat.isConnected && this.session.sessionId && this.player.id
        },
        playerUser() {
            return this.session.users.get(this.player.id) || {
                cosmetics: {},
                flags: []
            }
        },
        index() {
            return this.players.indexOf(this.player)
        },
        videoMuted() {
            var e;
            return this.chat.video.streams.get(this.player.id) && ((e = this.chat.usersMuted[this.player.id]) == null ? void 0 : e.video) && !this.isNight
        }
    },
    data() {
        return {
            dragIndex: -1
        }
    },
    methods: {
        startDrag(e) {
            this.dragIndex = this.players.indexOf(this.player),
            e.dataTransfer.dropEffect = "move",
            e.dataTransfer.effectAllowed = "move",
            e.dataTransfer.setData("text/plain", ""),
            e.dataTransfer.setData("player", String(this.dragIndex)),
            setTimeout( () => this.$store.commit("setPlayerDragState", this.dragIndex), 100)
        },
        stopDrag() {
            this.dragIndex = -1,
            this.$store.commit("setPlayerDragState", this.dragIndex)
        },
        async changeName() {
            if (!(!this.isStoryteller || this.session.sessionId))
                try {
                    const e = await this.$store.dispatch("openDialogue", {
                        type: "prompt",
                        title: "player.name.seat_title",
                        placeholder: ["grimoire.seat", [this.index + 1]],
                        value: this.grimoire.seats[this.index],
                        text: "player.name.seat_text"
                    });
                    this.$store.commit("setSeatName", {
                        seat: this.index,
                        name: e
                    })
                } catch {}
        },
        async removePlayer() {
            if (this.isStoryteller)
                try {
                    let e = !0;
                    this.session.sessionId && this.player.id && (e = await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "player.name.remove_title",
                        text: ["player.name.remove_text", [this.index + 1, this.playerUser.username || this.playerUser.id]]
                    })),
                    e && this.$store.dispatch("players/removePlayers", [this.index])
                } catch {}
        }
    }
}
  , D_ = ["title", "draggable"]
  , E_ = {
    class: "name"
}
  , N_ = ["title"]
  , B_ = ["title"]
  , V_ = ["title"]
  , O_ = ["title"]
  , j_ = ["title"]
  , U_ = ["title"]
  , H_ = {
    key: 0,
    class: "pronouns"
}
  , q_ = {
    key: 1,
    class: "pronouns"
};
function L_(e, s, t, n, i, o) {
    var c, h;
    const l = k("font-awesome-icon")
      , g = k("ChatAudio");
    return r(),
    u("div", {
        class: y(["nameplate", {
            ["border-" + ((c = o.playerUser.cosmetics) == null ? void 0 : c.border)]: !!((h = o.playerUser.cosmetics) != null && h.border),
            ["level-" + o.playerUser.level]: !!o.playerUser.level,
            empty: e.session.sessionId && !t.player.id
        }]),
        style: L({
            "--speaking": `var(--speaking${t.player.id})`
        }),
        title: o.playerUser.pronouns,
        draggable: e.grimoire.mode === "gather",
        onClick: s[1] || (s[1] = m => o.changeName()),
        onDragstart: s[2] || (s[2] = m => o.startDrag(m)),
        onDragend: s[3] || (s[3] = m => o.stopDrag())
    }, [a("div", E_, [o.videoMuted ? (r(),
    u("div", {
        key: 0,
        title: e.$t("overlays.whisper.video_muted")
    }, [b(l, {
        class: y(["video", {
            silenced: e.chat.userOverrides.get("novideo-" + t.player.id) === 1,
            muted: e.chat.userOverrides.get("novideo-" + t.player.id) !== 1
        }]),
        icon: "video-slash"
    }, null, 8, ["class"])], 8, N_)) : p("", !0), b(g, {
        "user-id": t.player.id
    }, null, 8, ["user-id"]), e.chat.following === t.player.id && e.hasGrimoireAccess ? (r(),
    u("div", {
        key: 1,
        title: e.$t("player.name.follow")
    }, [b(l, {
        icon: "link"
    })], 8, B_)) : p("", !0), e.grimoire.mode === "gather" && e.isStoryteller ? (r(),
    u("div", {
        key: 2,
        title: e.$t("player.name.move")
    }, [b(l, {
        icon: "arrows-alt",
        class: "move"
    })], 8, V_)) : !e.hasAvatars && e.session.sessionId && t.player.id && !o.playerUser.isOnline ? (r(),
    u("div", {
        key: 3,
        title: e.$t("player.name.offline")
    }, [b(l, {
        icon: "user-slash",
        class: "offline"
    })], 8, O_)) : e.session.sessionId && t.player.id && o.playerUser.isOnline && o.canChat && !e.chat.consumers.has(t.player.id) && t.player.id !== e.user.id ? (r(),
    u("div", {
        key: 4,
        title: e.$t("player.name.connecting")
    }, [b(l, {
        icon: "hourglass-half",
        class: "audio"
    })], 8, j_)) : p("", !0), a("span", null, d(e.$t(...e.playerName(t.player))), 1), e.grimoire.mode === "gather" && e.isStoryteller ? (r(),
    u("div", {
        key: 5,
        title: e.$t("player.name.remove"),
        onClick: s[0] || (s[0] = M(m => o.removePlayer(), ["stop"]))
    }, [b(l, {
        icon: "times-circle",
        class: "remove"
    })], 8, U_)) : p("", !0)]), o.playerUser.pronouns && e.session.sessionId ? (r(),
    u("div", H_, d(o.playerUser.pronouns), 1)) : !t.player.id && e.session.sessionId ? (r(),
    u("div", q_, d(e.$t("player.name.claim")), 1)) : p("", !0)], 46, D_)
}
const z_ = O(R_, [["render", L_], ["__scopeId", "data-v-76638372"]])
  , aa = {
    name: "Reminder",
    props: {
        reminder: {
            type: Object,
            default: () => ({})
        }
    },
    computed: {
        ...D(["roleIconURL"]),
        ...I(["roles", "edition", "settings"]),
        id() {
            return this.reminder.name.replace(/[^a-z0-9]/gi, "").toLowerCase()
        },
        fontSize() {
            var s;
            if (this.reminder.role === "custom")
                return ((s = this.reminder.name) == null ? void 0 : s.length) > 10 ? "28px" : "30px";
            const e = this.$t(`reminders.${this.id}`, this.reminder.name) || "";
            return e.length > 25 ? "18px" : e.length > 20 ? "20px" : e.length > 15 ? "22px" : e.length > 10 ? "24px" : "26px"
        },
        zoom() {
            return Math.round(100 * this.settings.general.reminderZoom) + "%"
        },
        classes() {
            var e, s, t, n;
            return {
                ["role-" + this.reminder.role]: this.reminder.role,
                ["team-" + ((e = this.roles.get(this.reminder.role)) == null ? void 0 : e.team)]: (s = this.roles.get(this.reminder.role)) == null ? void 0 : s.team,
                ["edition-" + (((t = this.roles.get(this.reminder.role)) == null ? void 0 : t.edition) || this.edition.id)]: ((n = this.roles.get(this.reminder.role)) == null ? void 0 : n.edition) || this.edition.id
            }
        }
    },
    data() {
        return {}
    }
}
  , cr = () => {
    be(e => ({
        v39af7a6c: e.zoom
    }))
}
  , dr = aa.setup;
aa.setup = dr ? (e, s) => (cr(),
dr(e, s)) : cr;
const G_ = {
    key: 1,
    viewBox: "0 0 140 140",
    class: "text"
}
  , W_ = ["font-size"]
  , F_ = {
    "xlink:href": "#circle-path"
}
  , Q_ = {
    key: 2,
    class: "text"
};
function Z_(e, s, t, n, i, o) {
    return r(),
    u("div", {
        class: y(["reminder", o.classes])
    }, [t.reminder.role && (t.reminder.role !== "custom" || t.reminder.name.length < 15) ? (r(),
    u("span", {
        key: 0,
        class: "icon",
        style: L({
            backgroundImage: `url(${e.roleIconURL(t.reminder.role)})`
        })
    }, null, 4)) : p("", !0), t.reminder.role && (t.reminder.role !== "custom" || t.reminder.name.length < 15) ? (r(),
    u("svg", G_, [a("text", {
        x: "100%",
        "text-anchor": "middle",
        class: "label mozilla",
        "font-size": o.fontSize
    }, [a("textPath", F_, d(t.reminder.role !== "custom" ? e.$t(`reminders.${o.id}`, t.reminder.name) : t.reminder.name), 1)], 8, W_)])) : t.reminder.name ? (r(),
    u("span", Q_, d(t.reminder.name), 1)) : p("", !0), Se(e.$slots, "default", {}, void 0, !0)], 2)
}
const ra = O(aa, [["render", Z_], ["__scopeId", "data-v-f9dae5cf"]])
  , X_ = {
    name: "PlayerReminders",
    components: {
        Reminder: ra,
        FontAwesomeIcon: Y
    },
    props: {
        player: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...I(["grimoire"]),
        ...I("players", ["storytellers", "players"]),
        ...D("players", ["playerName"]),
        isStoryteller() {
            return this.storytellers.includes(this.player)
        },
        playerIndex() {
            return this.isStoryteller ? this.storytellers.indexOf(this.player) * -1 - 1 : this.players.indexOf(this.player)
        }
    },
    data() {
        return {
            flipTimeout: !1
        }
    },
    methods: {
        ...j(["toggleModal", "toggleSavedReminder"]),
        ...j("players", ["updatePlayer", "updateStoryteller"]),
        removeReminder(e) {
            const s = [...this.player.reminders]
              , t = "reminders";
            s.splice(this.player.reminders.indexOf(e), 1),
            this.isStoryteller ? this.updateStoryteller({
                storyteller: this.player,
                property: t,
                value: s
            }) : this.updatePlayer({
                player: this.player,
                property: t,
                value: s
            })
        },
        flipReminder(e) {
            if (this.flipTimeout)
                return;
            this.flipTimeout = setTimeout( () => {
                this.flipTimeout = !1
            }
            , 500),
            e.isFlipped = !e.isFlipped;
            const s = "reminders"
              , t = this.player.reminders;
            this.isStoryteller ? this.updateStoryteller({
                storyteller: this.player,
                property: s,
                value: t
            }) : this.updatePlayer({
                player: this.player,
                property: s,
                value: t
            })
        },
        async editReminder(e) {
            const s = this.grimoire.savedReminders.includes(e.name);
            try {
                const {value: t, checkbox: n} = await this.$store.dispatch("openDialogue", {
                    type: "prompt",
                    title: "player.reminders.edit_title",
                    placeholder: "player.reminders.edit_placeholder",
                    value: e.name,
                    text: ["player.reminders.edit_text", [this.$t(...this.playerName(this.player))]],
                    checkbox: {
                        value: s,
                        label: "player.reminders.saved_favorite"
                    }
                });
                if (t && t !== e.name) {
                    s && n ? (this.toggleSavedReminder(e.name),
                    this.toggleSavedReminder(t)) : s && !n && this.toggleSavedReminder(e.name),
                    e.name = t;
                    const i = "reminders";
                    this.isStoryteller ? this.updateStoryteller({
                        storyteller: this.player,
                        property: i,
                        value: this.player.reminders
                    }) : this.updatePlayer({
                        player: this.player,
                        property: i,
                        value: this.player.reminders
                    })
                } else if (t === e.name && n !== s)
                    this.toggleSavedReminder(e.name);
                else if (!t)
                    return this.removeReminder(e)
            } catch {}
        }
    }
}
  , K_ = {
    class: "reminders",
    role: "list"
}
  , Y_ = {
    class: "overlay"
};
function J_(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("Reminder");
    return r(),
    u("div", K_, [(r(!0),
    u(_, null, B(t.player.reminders, (c, h) => (r(),
    C(g, {
        key: h,
        reminder: c,
        class: y({
            flipped: c.isFlipped
        })
    }, {
        default: S( () => [a("div", Y_, [c.role !== "custom" ? (r(),
        C(l, {
            key: 0,
            class: "flip",
            "aria-label": e.$t("player.reminders.flip", [c.name]),
            role: "button",
            onClick: M(m => o.flipReminder(c), ["stop"]),
            icon: "redo-alt"
        }, null, 8, ["aria-label", "onClick"])) : (r(),
        C(l, {
            key: 1,
            class: "save",
            role: "button",
            "aria-label": e.$t("player.reminders.edit", [c.name]),
            onClick: M(m => o.editReminder(c), ["stop"]),
            icon: "pen-to-square"
        }, null, 8, ["aria-label", "onClick"])), b(l, {
            class: "remove",
            "aria-label": e.$t("player.reminders.remove", [c.name]),
            role: "button",
            onClick: M(m => o.removeReminder(c), ["stop"]),
            icon: "trash-alt"
        }, null, 8, ["aria-label", "onClick"])])]),
        _: 2
    }, 1032, ["reminder", "class"]))), 128)), b(g, {
        class: "reminder add",
        role: "button",
        "aria-label": e.$t("player.reminders.add"),
        onClick: s[0] || (s[0] = M(c => e.toggleModal({
            name: "reminder",
            params: {
                playerIndex: o.playerIndex
            }
        }), ["stop"]))
    }, null, 8, ["aria-label"])])
}
const la = O(X_, [["render", J_], ["__scopeId", "data-v-27920b32"]])
  , $_ = {
    name: "PlayerWhisper",
    props: {
        player: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...I(["chat"]),
        ...I("players", ["players"]),
        index() {
            return this.players.indexOf(this.player)
        },
        whisperIndicators() {
            return this.chat.textMessageIndicators.map( ({senderId: e, recipientId: s, length: t, msgId: n}) => ({
                senderId: e,
                length: t,
                msgId: n,
                prev: s === this.players[(this.index + this.players.length - 1) % this.players.length].id,
                next: s === this.players[(this.index + 1) % this.players.length].id
            })).filter( ({senderId: e, prev: s, next: t}) => e === this.player.id && (s || t))
        }
    },
    data() {
        return {}
    },
    methods: {}
}
  , x_ = {
    class: "whisper"
};
function ey(e, s, t, n, i, o) {
    const l = k("font-awesome-icon");
    return r(),
    u("div", x_, [(r(!0),
    u(_, null, B(o.whisperIndicators, ({msgId: g, prev: c, next: h, length: m}) => (r(),
    u("span", {
        key: g,
        class: y(["animation-critical", {
            prev: c,
            next: h
        }]),
        style: L({
            animationDuration: `${m / 250 * 3 + .5}s`,
            "--size": m / 250 * 2 + .75
        })
    }, [b(l, {
        icon: "envelope"
    })], 6))), 128))])
}
const sy = O($_, [["render", ey], ["__scopeId", "data-v-6ba4b276"]])
  , ur = "/assets/avatar0-u1LxaXkZ.webp"
  , gr = "/assets/avatar1-CIODRiLI.webp"
  , mr = "/assets/avatar10-Ce5aMeqa.webp"
  , hr = "/assets/avatar11-D0soE0Fu.webp"
  , pr = "/assets/avatar12-CQBRBiyb.webp"
  , Ar = "/assets/avatar13-Bpg0u82M.webp"
  , br = "/assets/avatar14-h_wJnEaW.webp"
  , fr = "/assets/avatar15-B7bRtsAD.webp"
  , vr = "/assets/avatar16-u00HGBBf.webp"
  , _r = "/assets/avatar17-amVAvnUE.webp"
  , yr = "/assets/avatar18-BIZPKahS.webp"
  , wr = "/assets/avatar19-Bbs0PuH3.webp"
  , kr = "/assets/avatar2-DYXL9YFA.webp"
  , Cr = "/assets/avatar20-MD1WsuJ6.webp"
  , Sr = "/assets/avatar21-Bs2m13ni.webp"
  , Pr = "/assets/avatar22-Bq1IgAYY.webp"
  , Tr = "/assets/avatar23-BKNYnWO7.webp"
  , Ir = "/assets/avatar24-D1bqdpeq.webp"
  , Mr = "/assets/avatar25-C0TghHJl.webp"
  , Rr = "/assets/avatar26-BbpC9TVV.webp"
  , Dr = "/assets/avatar27-CnpM0r3p.webp"
  , Er = "/assets/avatar3-B2H-m15c.webp"
  , Nr = "/assets/avatar4--Z7nPrzq.webp"
  , Br = "/assets/avatar5-CMBaoxol.webp"
  , Vr = "/assets/avatar6-DfDkBP7R.webp"
  , Or = "/assets/avatar7-B6pbOZSY.webp"
  , jr = "/assets/avatar8-BD4fLzfO.webp"
  , Ur = "/assets/avatar9-BsG8Afot.webp"
  , Hr = "/assets/avatarworldcup25-BaNix0NU.webp"
  , ty = {
    name: "PlayerAvatar",
    props: {
        user: {
            type: [Object, null],
            default: null
        },
        override: {
            type: [String, Number],
            default: void 0
        },
        frame: {
            type: Boolean,
            default: !0
        }
    },
    computed: {
        ...I(["chat", "settings"]),
        validatedAvatar() {
            var t, n, i, o;
            if (!this.user || this.chat.userOverrides.has("noavatar-" + this.user.id) || this.settings.general.isCosmeticsDisabled && this.override === void 0)
                return 0;
            const s = (n = this.override) != null ? n : (t = this.user.cosmetics) == null ? void 0 : t.avatar;
            return s ? Number(s) < 0 ? this.user.level ? s : 0 : isNaN(s) && !((o = (i = this.user.cosmetics) == null ? void 0 : i.avatars) != null && o.includes(s)) ? 0 : s : 0
        },
        avatarImageURL() {
            return typeof this.validatedAvatar != "number" ? new URL(Object.assign({
                "/src/assets/cosmetics/avatar0.webp": ur,
                "/src/assets/cosmetics/avatar1.webp": gr,
                "/src/assets/cosmetics/avatar10.webp": mr,
                "/src/assets/cosmetics/avatar11.webp": hr,
                "/src/assets/cosmetics/avatar12.webp": pr,
                "/src/assets/cosmetics/avatar13.webp": Ar,
                "/src/assets/cosmetics/avatar14.webp": br,
                "/src/assets/cosmetics/avatar15.webp": fr,
                "/src/assets/cosmetics/avatar16.webp": vr,
                "/src/assets/cosmetics/avatar17.webp": _r,
                "/src/assets/cosmetics/avatar18.webp": yr,
                "/src/assets/cosmetics/avatar19.webp": wr,
                "/src/assets/cosmetics/avatar2.webp": kr,
                "/src/assets/cosmetics/avatar20.webp": Cr,
                "/src/assets/cosmetics/avatar21.webp": Sr,
                "/src/assets/cosmetics/avatar22.webp": Pr,
                "/src/assets/cosmetics/avatar23.webp": Tr,
                "/src/assets/cosmetics/avatar24.webp": Ir,
                "/src/assets/cosmetics/avatar25.webp": Mr,
                "/src/assets/cosmetics/avatar26.webp": Rr,
                "/src/assets/cosmetics/avatar27.webp": Dr,
                "/src/assets/cosmetics/avatar3.webp": Er,
                "/src/assets/cosmetics/avatar4.webp": Nr,
                "/src/assets/cosmetics/avatar5.webp": Br,
                "/src/assets/cosmetics/avatar6.webp": Vr,
                "/src/assets/cosmetics/avatar7.webp": Or,
                "/src/assets/cosmetics/avatar8.webp": jr,
                "/src/assets/cosmetics/avatar9.webp": Ur,
                "/src/assets/cosmetics/avatarworldcup25.webp": Hr
            })[`/src/assets/cosmetics/avatar${this.validatedAvatar}.webp`],import.meta.url).href : this.validatedAvatar >= 0 ? new URL(Object.assign({
                "/src/assets/cosmetics/avatar0.webp": ur,
                "/src/assets/cosmetics/avatar1.webp": gr,
                "/src/assets/cosmetics/avatar10.webp": mr,
                "/src/assets/cosmetics/avatar11.webp": hr,
                "/src/assets/cosmetics/avatar12.webp": pr,
                "/src/assets/cosmetics/avatar13.webp": Ar,
                "/src/assets/cosmetics/avatar14.webp": br,
                "/src/assets/cosmetics/avatar15.webp": fr,
                "/src/assets/cosmetics/avatar16.webp": vr,
                "/src/assets/cosmetics/avatar17.webp": _r,
                "/src/assets/cosmetics/avatar18.webp": yr,
                "/src/assets/cosmetics/avatar19.webp": wr,
                "/src/assets/cosmetics/avatar2.webp": kr,
                "/src/assets/cosmetics/avatar20.webp": Cr,
                "/src/assets/cosmetics/avatar21.webp": Sr,
                "/src/assets/cosmetics/avatar22.webp": Pr,
                "/src/assets/cosmetics/avatar23.webp": Tr,
                "/src/assets/cosmetics/avatar24.webp": Ir,
                "/src/assets/cosmetics/avatar25.webp": Mr,
                "/src/assets/cosmetics/avatar26.webp": Rr,
                "/src/assets/cosmetics/avatar27.webp": Dr,
                "/src/assets/cosmetics/avatar3.webp": Er,
                "/src/assets/cosmetics/avatar4.webp": Nr,
                "/src/assets/cosmetics/avatar5.webp": Br,
                "/src/assets/cosmetics/avatar6.webp": Vr,
                "/src/assets/cosmetics/avatar7.webp": Or,
                "/src/assets/cosmetics/avatar8.webp": jr,
                "/src/assets/cosmetics/avatar9.webp": Ur,
                "/src/assets/cosmetics/avatarworldcup25.webp": Hr
            })[`/src/assets/cosmetics/avatar${this.validatedAvatar}.webp`],import.meta.url).href : `https://img.botc.app/avatars/${this.user.id}.webp?c${Number(this.validatedAvatar)}`
        },
        avatarStyle() {
            return this.user ? {
                backgroundImage: `url("${this.avatarImageURL}")`
            } : null
        }
    }
};
function iy(e, s, t, n, i, o) {
    return r(),
    u("div", {
        class: y(["player-avatar", {
            [`avatar-${o.validatedAvatar}`]: t.frame
        }]),
        style: L(o.avatarStyle)
    }, [Se(e.$slots, "default", {}, void 0, !0)], 6)
}
const ca = O(ty, [["render", iy], ["__scopeId", "data-v-6e40c4ea"]])
  , oy = {
    name: "ChatVideo",
    components: {
        PlayerAvatar: ca
    },
    computed: {
        ...I(["chat", "session", "settings"]),
        ...I("user", {
            self: "user"
        }),
        ...D("players", ["seatedPlayerMap", "storytellerMap"]),
        ...D("game", ["isNight"]),
        ...D("user", ["hasGrimoireAccess"]),
        user() {
            return this.session.sessionId && this.userId && this.session.users.get(this.userId)
        },
        stream() {
            return this.chat.video.streams.get(this.userId)
        },
        hasVideo() {
            var s;
            const e = this.storytellerMap.has(this.userId);
            return !((s = this.session.users.get(this.userId)) != null && s.isOnline) || !this.stream || this.chat.video.isDeafened || this.chat.video.isHidden && this.userId === this.self.id || this.settings.advanced.hasHiddenPrivateCams && this.chat.userChannels.get(this.userId) && this.chat.channel !== this.chat.userChannels.get(this.userId) ? !1 : this.chat.userChannels.get(this.userId) === this.chat.channel && this.chat.channel ? !0 : this.session.hook.name === "reveal-grimoire" && !e && this.settings.advanced.hasHiddenRevealCams ? !1 : !this.isNight
        },
        muted() {
            var e;
            return ((e = this.chat.usersMuted[this.userId]) == null ? void 0 : e.video) || this.chat.userOverrides.has("novideo-" + this.userId) || !1
        }
    },
    props: {
        userId: {
            type: String,
            default: ""
        }
    },
    data() {
        return {}
    },
    methods: {
        async play() {
            if (!(!this.stream || !this.$refs.video))
                try {
                    await this.$refs.video.play()
                } catch (e) {
                    if (e.name === "NotAllowedError" && !this.chat.isNotAllowed)
                        try {
                            this.$store.commit("chat/toggleNotAllowed", !0),
                            await this.$store.dispatch("openDialogue", {
                                type: "alert",
                                title: "modals.dialogue.error.video_title",
                                text: "modals.dialogue.error.video_text"
                            }),
                            this.$store.commit("chat/toggleNotAllowed", !1)
                        } catch {}
                }
        }
    },
    mounted() {
        this.$nextTick( () => {
            this.play()
        }
        )
    },
    watch: {
        stream() {
            this.$nextTick( () => this.play())
        },
        hasVideo() {
            this.hasVideo && this.$nextTick( () => this.play())
        },
        "chat.isNotAllowed"() {
            this.chat.isNotAllowed || this.play()
        }
    }
}
  , ny = [".srcObject"];
function ay(e, s, t, n, i, o) {
    var g, c;
    const l = k("PlayerAvatar");
    return r(),
    C(l, {
        user: (g = o.user) != null && g.isOnline ? o.user : null,
        class: y(["chat-video", {
            dead: (c = e.seatedPlayerMap.get(t.userId)) == null ? void 0 : c.isDead,
            unclaimed: !t.userId,
            offline: o.user && !o.user.isOnline,
            local: !e.session.sessionId
        }])
    }, {
        default: S( () => [b(q, {
            name: "fade"
        }, {
            default: S( () => {
                var h;
                return [t.userId && e.chat.isConnected && o.hasVideo ? (r(),
                u("div", {
                    key: 0,
                    class: y(["video", {
                        muted: o.muted,
                        mirror: t.userId === e.self.id && !e.chat.video.isUnmirrored
                    }]),
                    ref: "videoContainer"
                }, [a("video", {
                    ".srcObject": (h = o.stream) != null && h.attach ? void 0 : o.stream,
                    autoplay: "",
                    muted: "",
                    disablePictureInPicture: "true",
                    disableremoteplayback: "true",
                    playsInline: "",
                    ref: "video"
                }, null, 40, ny)], 2)) : p("", !0)]
            }
            ),
            _: 1
        })]),
        _: 1
    }, 8, ["user", "class"])
}
const da = O(oy, [["render", ay], ["__scopeId", "data-v-2e7e825f"]])
  , ua = {
    components: {
        ChatVideo: da,
        PlayerWhisper: sy,
        PlayerReminders: la,
        PlayerName: z_,
        PlayerOverlay: S_,
        PlayerMenu: g_,
        Token: fe
    },
    inject: ["renderReminderHTML"],
    props: {
        player: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...I("players", ["players", "claimedSeat"]),
        ...I("user", ["user"]),
        ...I(["grimoire", "session", "chat", "vote", "positions", "settings"]),
        ...D("players", ["nightOrder", "seatedPlayerMap"]),
        ...D("chat", ["hasAvatars", "isVideoWhisper"]),
        ...D("game", ["isNight"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess"]),
        index() {
            return this.players.indexOf(this.player)
        },
        isYou() {
            return this.session.sessionId && this.player.id && this.player.id === this.user.id
        },
        playerChannel() {
            return this.chat.userChannels.get(this.player.id) || ""
        },
        alignment() {
            var e, s;
            return this.session.hook.name === "reveal-grimoire" ? "" : this.player.alignment ? "alignment-" + this.player.alignment : ["minion", "demon"].includes((e = this.player.role) == null ? void 0 : e.team) ? "alignment-e" : ["townsfolk", "outsider"].includes((s = this.player.role) == null ? void 0 : s.team) ? "alignment-g" : ""
        },
        avatarZoom() {
            return this.settings.general.avatarZoom * 100 + "%"
        }
    },
    data() {
        return {
            isSwap: !1
        }
    },
    methods: {
        playerClick() {
            this.session.hook.name !== "reveal-grimoire" && (!this.isStoryteller && !this.player.id && !this.seatedPlayerMap.has(this.user.id) && !this.hasGrimoireAccess ? this.claimSeat() : this.hasGrimoireAccess ? this.setMenuOpen("p" + this.index) : this.$refs.player.changeCharacter())
        },
        toggleStatus() {
            if (this.isStoryteller) {
                if (this.session.hook.name === "reveal-grimoire") {
                    this.player.revealed || this.updatePlayer("revealed", !0);
                    return
                }
            } else {
                !this.player.id && !this.seatedPlayerMap.has(this.user.id) && this.claimSeat();
                return
            }
            this.vote.nomination && this.grimoire.isTownSquare || this.vote.locked > 0 || this.vote.isInProgress ? this.player.isDead && (this.player.isVoteless ? this.updatePlayer("isVoteless", !1) : this.updatePlayer("isVoteless", !0)) : this.grimoire.isTownSquare ? this.player.isDead ? this.player.isVoteless ? (this.updatePlayer("isVoteless", !1),
            this.updatePlayer("isDead", !1)) : this.updatePlayer("isVoteless", !0) : (this.updatePlayer("isDead", !0),
            this.removeReminders("Dead"),
            this.updatePlayer("isMarkedForDeath")) : this.isNight && this.session.sessionId ? (this.updatePlayer("isMarkedForDeath", !this.player.isMarkedForDeath),
            this.player.isMarkedForDeath && this.toggleModal({
                name: "reminder",
                params: {
                    playerIndex: this.index,
                    filter: this.player.isDead ? "alive" : "dead"
                }
            })) : (this.updatePlayer("isDead", !this.player.isDead),
            this.player.isDead ? this.removeReminders("Dead") : this.removeReminders("Alive"),
            this.updatePlayer("isMarkedForDeath"),
            this.player.isVoteless && this.updatePlayer("isVoteless", !1))
        },
        async claimSeat() {
            this.isStoryteller || this.claimedSeat === null && (this.players.some( ({id: e}) => e === this.user.id) || (this.chat.channel && this.$store.commit("chat/setChannel", ""),
            this.chat.textRecipient === "spectator" && this.$store.commit("chat/setTextRecipient", ""),
            this.$store.commit("players/claimSeat", this.index),
            this.user.username || this.$store.dispatch("user/promptUserUpdate", "username")))
        },
        removeReminders(e) {
            const {reminders: s} = this.player
              , t = n => n.name === e && (n.name !== "Dead" || n.role !== "shabaloth");
            s.some(t) && this.updatePlayer("reminders", s.filter(n => !t(n)))
        },
        updatePlayer(e, s) {
            const t = ["reminders", "alignment"];
            !this.isStoryteller && !t.includes(e) || this.player[e] !== s && (this.$store.commit("players/updatePlayer", {
                player: this.player,
                property: e,
                value: s
            }),
            e === "isDead" ? this.$store.dispatch("game/addHistory", {
                data: this.player.id || this.players.indexOf(this.player) + 1,
                type: this.player.isDead ? "death" : "revive"
            }) : e === "isVoteless" && this.player.isVoteless && this.$store.dispatch("game/addHistory", {
                data: this.player.id || this.players.indexOf(this.player) + 1,
                type: "vote"
            }))
        },
        ...j(["setMenuOpen", "toggleModal"])
    }
}
  , qr = () => {
    be(e => ({
        v318edbb2: e.avatarZoom
    }))
}
  , Lr = ua.setup;
ua.setup = Lr ? (e, s) => (qr(),
Lr(e, s)) : qr;
const ry = {
    class: "nameplate-container"
}
  , ly = ["aria-label"]
  , cy = {
    key: 0,
    class: "flag-powerful"
}
  , dy = {
    key: 0,
    class: "night-order first"
}
  , uy = {
    key: 0
}
  , gy = ["innerHTML"]
  , my = {
    key: 0,
    class: "night-order other"
}
  , hy = {
    key: 0
}
  , py = ["innerHTML"]
  , Ay = ["aria-pressed", "title"];
function by(e, s, t, n, i, o) {
    var w, V, N, U, P, E;
    const l = k("ChatVideo")
      , g = k("PlayerName")
      , c = k("Token")
      , h = k("font-awesome-icon")
      , m = k("PlayerOverlay")
      , A = k("PlayerMenu")
      , f = k("PlayerReminders")
      , T = k("PlayerWhisper");
    return r(),
    u("li", {
        class: y({
            "menu-open": e.grimoire.menuOpen === "p" + o.index,
            nominator: e.vote.nomination && e.vote.nomination[0] === o.index,
            nominee: e.vote.nomination && e.vote.nomination[1] === o.index,
            selected: e.vote.nomination && e.vote.selectedPlayer === o.index,
            "in-chat": e.chat.channel !== o.playerChannel && (e.chat.channel || ((w = e.session.users.get(t.player.id)) == null ? void 0 : w.isOnline)) && (e.chat.channel || !e.isNight) || e.chat.channel && e.isVideoWhisper && !((V = e.positions.whisper) != null && V.minimized),
            "in-whisper": e.chat.channel && e.chat.channel === o.playerChannel,
            "stack-reminders": e.settings.game.stackReminderTokens || e.hasAvatars && e.settings.game.stackReminderTokens === null,
            [t.player.special]: t.player.id && t.player.special,
            ["id-" + t.player.id]: t.player.id
        })
    }, [b(q, {
        name: "slide"
    }, {
        default: S( () => [e.hasAvatars ? (r(),
        C(l, {
            key: 0,
            "user-id": t.player.id,
            onClick: s[0] || (s[0] = M(R => e.grimoire.isTownSquare || e.vote.locked > 0 || e.vote.isInProgress ? o.toggleStatus() : o.playerClick(), ["stop"]))
        }, null, 8, ["user-id"])) : p("", !0)]),
        _: 1
    }), a("div", ry, [b(g, {
        player: t.player
    }, null, 8, ["player"])]), a("div", {
        class: y(["player", [{
            dead: t.player.isDead,
            "marked-for-death": e.isStoryteller && t.player.isMarkedForDeath,
            "no-vote": t.player.isVoteless,
            you: o.isYou,
            revealed: e.session.hook.name === "reveal-grimoire" && t.player.revealed,
            [o.alignment]: !e.settings.advanced.hasPublicTownSquare,
            ["team-" + t.player.role.team]: !!t.player.role.team
        }, (U = (N = e.session.users.get(t.player.id)) == null ? void 0 : N.flags) == null ? void 0 : U.map(R => "flag-" + R)]])
    }, [a("div", {
        class: "life",
        onClick: s[1] || (s[1] = R => o.toggleStatus()),
        "aria-label": e.$t("player.toggle_status")
    }, [(E = (P = e.session.users.get(t.player.id)) == null ? void 0 : P.flags) != null && E.includes("powerful") ? (r(),
    u("div", cy)) : p("", !0)], 8, ly), b(c, {
        role: t.player.role,
        alignment: t.player.alignment,
        onClick: s[2] || (s[2] = M(R => o.playerClick(), ["stop"]))
    }, null, 8, ["role", "alignment"]), b(q, {
        name: "fade"
    }, {
        default: S( () => {
            var R, Z, H, G;
            return [(Z = e.nightOrder.get((R = t.player.role) == null ? void 0 : R.id)) != null && Z.first && e.settings.game.isNightOrder && e.isNight && e.hasGrimoireAccess ? (r(),
            u("div", dy, [a("em", null, d((G = e.nightOrder.get((H = t.player.role) == null ? void 0 : H.id)) == null ? void 0 : G.first), 1), t.player.role.firstNightReminder ? (r(),
            u("div", uy, [a("aside", null, d(e.$t("grimoire.phases.first_night")), 1), a("span", {
                class: "reminder",
                innerHTML: o.renderReminderHTML(e.$t(`roles.${t.player.role.id}.first`, t.player.role.firstNightReminder))
            }, null, 8, gy)])) : p("", !0)])) : p("", !0)]
        }
        ),
        _: 1
    }), b(q, {
        name: "fade"
    }, {
        default: S( () => {
            var R, Z, H, G;
            return [(Z = e.nightOrder.get((R = t.player.role) == null ? void 0 : R.id)) != null && Z.other && e.settings.game.isNightOrder && e.isNight && e.hasGrimoireAccess ? (r(),
            u("div", my, [a("em", null, d((G = e.nightOrder.get((H = t.player.role) == null ? void 0 : H.id)) == null ? void 0 : G.other), 1), t.player.role.otherNightReminder ? (r(),
            u("div", hy, [a("aside", null, d(e.$t("grimoire.phases.other_nights")), 1), a("span", {
                class: "reminder",
                innerHTML: o.renderReminderHTML(e.$t(`roles.${t.player.role.id}.other`, t.player.role.otherNightReminder))
            }, null, 8, py)])) : p("", !0)])) : p("", !0)]
        }
        ),
        _: 1
    }), a("div", {
        class: "shroud",
        onClick: s[3] || (s[3] = R => o.toggleStatus()),
        "aria-pressed": t.player.isDead,
        role: "checkbox",
        title: t.player.isMarkedForDeath ? t.player.isDead ? e.$t("player.shroud_remove") : e.$t("player.shroud_add") : e.$t("grimoire.shroud")
    }, [e.isStoryteller && t.player.isMarkedForDeath ? (r(),
    C(h, {
        key: 0,
        icon: t.player.isDead ? "eye" : "eye-slash"
    }, null, 8, ["icon"])) : p("", !0)], 8, Ay), b(m, {
        player: t.player
    }, null, 8, ["player"]), b(A, {
        ref: "player",
        player: t.player
    }, null, 8, ["player"])], 2), b(f, {
        player: t.player
    }, null, 8, ["player"]), b(T, {
        player: t.player
    }, null, 8, ["player"])], 2)
}
const fy = O(ua, [["render", by], ["__scopeId", "data-v-236e09e1"]])
  , vy = {
    components: {
        FontAwesomeIcon: Y,
        Token: fe,
        Modal: se
    },
    inject: ["isTouchDevice"],
    computed: {
        ...I(["modal", "roles", "session", "rolesAvailable", "definitions"]),
        ...I("players", ["players", "bluffs", "storytellers"]),
        ...D("players", ["playerName"]),
        ...D("user", ["isStoryteller"]),
        availableTabs() {
            const e = [this.$t("modals.role.tab_character")];
            return this.isStoryteller && this.travellers.length && !this.storytellers.includes(this.user) && e.push(this.$t("modals.role.tab_traveller")),
            e
        },
        availableRoles() {
            const {bluff: e} = this.modal.params
              , s = (i, o) => this.$te(`roles.${i.id}.${o}`) ? this.$t(`roles.${i.id}.${o}`) : i[o];
            let t = [], n;
            try {
                n = new RegExp(this.search.trim(),"i")
            } catch {}
            return this.roles.forEach(i => {
                if (this.definitions.PLAYER_TEAMS.includes(i.team) && !(i.team === "traveller" && !this.isStoryteller) && !(i.team === "traveller" && this.storytellers.includes(this.user)) && (this.user || e && (!["traveller", "minion", "demon"].includes(i.team) || !this.isStoryteller) && (!this.isStoryteller || !this.players.some(o => o.role.id === i.id)) && !this.bluffs.includes(i))) {
                    if (n !== "" && this.tab === 0 && !s(i, "name").match(n) && !s(i, "ability").match(n) && !s(i, "team").match(n))
                        return;
                    t.push(i)
                }
            }
            ),
            t.sort( (i, o) => this.sort.indexOf(o.team) - this.sort.indexOf(i.team)),
            t
        },
        rolesPage() {
            return this.availableRoles.length <= 35 ? this.availableRoles : this.availableRoles.slice(this.page * 35, this.page * 35 + 35)
        },
        travellers() {
            if (this.modal.params.bluff)
                return [];
            let e;
            try {
                e = new RegExp(this.search.trim(),"i")
            } catch {}
            return [...this.rolesAvailable].filter( ([s,t]) => t.team === "traveller" && !this.roles.has(s)).filter( ([,s]) => e === "" || this.tab === 0 || this.$t(`roles.${s.id}.name`, s.name).match(e) || this.$t(`roles.${s.id}.ability`, s.ability).match(e) || this.$t(`grimoire.${s.team}`, s.team).match(e)).map( ([,s]) => s)
        },
        user() {
            return this.modal.params.playerIndex === void 0 ? !1 : this.modal.params.playerIndex >= 0 ? this.players[this.modal.params.playerIndex] : this.storytellers[this.modal.params.playerIndex * -1 - 1]
        }
    },
    data() {
        return {
            alignment: null,
            sort: ["demon", "minion", "outsider", "townsfolk"],
            page: 0,
            search: "",
            tab: 0
        }
    },
    methods: {
        ...j(["toggleModal"]),
        ...j("players", ["updatePlayer", "updateStoryteller"]),
        changeAlignment() {
            const e = [null, "g", "e"];
            this.alignment = e[(e.indexOf(this.alignment) + 1) % e.length]
        },
        keydown({key: e}) {
            const s = this.tab === 0 ? this.availableRoles : this.travellers;
            e === "Enter" && s.length === 1 ? this.setRole(s[0]) : e === "Escape" && (this.search ? this.search = "" : this.close())
        },
        setRole(e={}) {
            if (this.modal.params.bluff)
                this.$store.commit("players/setBluff", {
                    index: this.modal.params.bluff - 1,
                    bluff: e
                });
            else {
                const s = this.storytellers.includes(this.user);
                if (e.team === "traveller" && (!this.isStoryteller || s))
                    return this.toggleModal(this.modal);
                if (!this.isStoryteller && this.user.role.team === "traveller")
                    return this.toggleModal(this.modal);
                let t = "role"
                  , n = e;
                s ? this.updateStoryteller({
                    storyteller: this.user,
                    property: t,
                    value: n
                }) : this.updatePlayer({
                    player: this.user,
                    property: t,
                    value: n
                }),
                this.user.alignment !== this.alignment && (t = "alignment",
                n = this.alignment,
                s ? this.updateStoryteller({
                    storyteller: this.user,
                    property: t,
                    value: n
                }) : this.updatePlayer({
                    player: this.user,
                    property: t,
                    value: n
                }))
            }
            this.toggleModal(this.modal),
            this.alignment = null
        },
        close() {
            document.getElementById("app").focus(),
            this.toggleModal(this.modal),
            this.alignment = null
        },
        tabChange(e) {
            this.tab = e,
            this.search = "",
            this.page = 0,
            this.isTouchDevice || this.$nextTick( () => {
                var s, t;
                (s = this.$refs.search) == null || s.focus(),
                (t = this.$refs.search) == null || t.select()
            }
            )
        }
    }
}
  , _y = ["placeholder"]
  , yy = {
    class: "tokens"
}
  , wy = {
    key: 0,
    class: "break"
}
  , ky = ["onClick"]
  , Cy = {
    key: 0,
    class: "paging"
}
  , Sy = {
    key: 2,
    class: "paging"
}
  , Py = {
    class: "tokens"
}
  , Ty = ["onClick"];
function Iy(e, s, t, n, i, o) {
    const l = k("i18n-t")
      , g = k("Token")
      , c = k("font-awesome-icon")
      , h = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "role" && e.roles.size ? (r(),
        C(h, {
            key: 0,
            onClose: o.close,
            onTabChange: o.tabChange,
            class: "role",
            name: "role",
            tabs: o.availableTabs
        }, {
            header: S( () => [b(l, {
                keypath: "modals.role.title",
                tag: "div",
                class: "title",
                scope: "global"
            }, al({
                _: 2
            }, [e.modal.params.bluff ? void 0 : {
                name: "alignment",
                fn: S( () => [a("span", {
                    class: y(["button", {
                        primary: i.alignment === "g",
                        secondary: i.alignment === "e"
                    }]),
                    onClick: s[0] || (s[0] = (...m) => o.changeAlignment && o.changeAlignment(...m))
                }, d(e.$t(`modals.role.title_alignment_${i.alignment || "r"}`)), 3)]),
                key: "0"
            }, e.isStoryteller && !o.user ? {
                name: "type",
                fn: S( () => [v(d(e.$t("modals.role.title_type_bluff")), 1)]),
                key: "1"
            } : {
                name: "type",
                fn: S( () => [v(d(e.$t("modals.role.title_type_character")), 1)]),
                key: "2"
            }, o.user ? {
                name: "target",
                fn: S( () => [b(l, {
                    keypath: "modals.role.title_target",
                    scope: "global"
                }, {
                    default: S( () => [a("b", null, d(e.$t(...e.playerName(o.user))), 1)]),
                    _: 1
                })]),
                key: "3"
            } : void 0]), 1024), z(a("input", {
                ref: "search",
                "onUpdate:modelValue": s[1] || (s[1] = m => i.search = m),
                placeholder: e.$t("common.button_search"),
                onKeydown: s[2] || (s[2] = M( (...m) => o.keydown && o.keydown(...m), ["stop"]))
            }, null, 40, _y), [[W, i.search]])]),
            "tab-0": S( () => [a("ul", yy, [(r(!0),
            u(_, null, B(o.rolesPage, (m, A) => (r(),
            u(_, {
                key: m.id
            }, [A && o.rolesPage[A - 1].team !== m.team && i.sort.indexOf(o.rolesPage[A - 1].team) > -1 ? (r(),
            u("li", wy)) : p("", !0), a("li", {
                class: y(m.team),
                onClick: f => o.setRole(m)
            }, [b(g, {
                role: m,
                class: "top",
                alignment: i.alignment
            }, null, 8, ["role", "alignment"])], 10, ky)], 64))), 128)), s[6] || (s[6] = a("li", {
                class: "break"
            }, null, -1)), o.availableRoles.length > 35 ? (r(),
            u("li", Cy, [i.page ? (r(),
            C(c, {
                key: 0,
                icon: "arrow-circle-left",
                onClick: s[3] || (s[3] = m => i.page -= 1)
            })) : p("", !0)])) : p("", !0), i.search ? p("", !0) : (r(),
            u("li", {
                key: 1,
                onClick: s[4] || (s[4] = m => o.setRole())
            }, [b(g)])), o.availableRoles.length > 35 ? (r(),
            u("li", Sy, [i.page < Math.floor((o.availableRoles.length - 1) / 35) ? (r(),
            C(c, {
                key: 0,
                icon: "arrow-circle-right",
                onClick: s[5] || (s[5] = m => i.page += 1)
            })) : p("", !0)])) : p("", !0), !o.availableRoles.length && i.search ? (r(),
            C(l, {
                key: 3,
                tag: "li",
                keypath: "modals.role.error_character",
                class: "break",
                scope: "global"
            }, {
                default: S( () => [a("b", null, '"' + d(i.search) + '"', 1)]),
                _: 1
            })) : p("", !0)])]),
            "tab-1": S( () => [a("ul", Py, [(r(!0),
            u(_, null, B(o.travellers, m => (r(),
            u("li", {
                class: y([m.team]),
                key: m.id,
                onClick: A => o.setRole(m)
            }, [b(g, {
                role: m,
                class: "top",
                alignment: i.alignment
            }, null, 8, ["role", "alignment"])], 10, Ty))), 128)), !o.travellers.length && i.search ? (r(),
            C(l, {
                key: 0,
                tag: "li",
                class: "break",
                keypath: "modals.role.error_traveller",
                scope: "global"
            }, {
                default: S( () => [a("b", null, '"' + d(i.search) + '"', 1)]),
                _: 1
            })) : p("", !0)])]),
            default: S( () => [s[7] || (s[7] = v("1 ", -1))]),
            _: 1
        }, 8, ["onClose", "onTabChange", "tabs"])) : p("", !0)]),
        _: 1
    })
}
const My = O(vy, [["render", Iy], ["__scopeId", "data-v-d38979a1"]])
  , Ce = e => s => s.name === e.name && s.role === e.role
  , Ry = {
    components: {
        Reminder: ra,
        FontAwesomeIcon: Y,
        Modal: se
    },
    inject: ["isTouchDevice"],
    computed: {
        ...I(["modal", "grimoire", "roles", "session", "settings", "rolesAvailable"]),
        ...I("players", ["players", "storytellers", "npcs", "bluffs"]),
        ...D(["roleIconURL"]),
        ...D("players", ["playerName"]),
        ...D("user", ["isStoryteller"]),
        user() {
            return this.modal.params.playerIndex === void 0 ? !1 : this.modal.params.playerIndex >= 0 ? this.players[this.modal.params.playerIndex] : this.storytellers[this.modal.params.playerIndex * -1 - 1]
        },
        userReminders() {
            var e, s, t, n;
            return this.modal.params.playerIndex === void 0 ? [] : this.modal.params.playerIndex >= 0 ? (s = (e = this.players[this.modal.params.playerIndex]) == null ? void 0 : e.reminders) != null ? s : [] : (n = (t = this.storytellers[this.modal.params.playerIndex * -1 - 1]) == null ? void 0 : t.reminders) != null ? n : []
        },
        currentReminders() {
            let e = [], s;
            try {
                s = new RegExp(this.search.trim(),"i")
            } catch {}
            return [...this.players, ...this.storytellers].forEach( ({role: t, isDead: n}) => {
                !t || !Array.isArray(t.reminders) || n && this.players.some(i => i.role.id === t.id && !i.isDead) || (e = [...e, ...t.reminders.map(i => ({
                    role: t.id,
                    name: i,
                    isDead: n
                }))])
            }
            ),
            this.bluffs.forEach(t => {
                !t || !t.reminders || (e = [...e, ...t.reminders.map(n => ({
                    role: t.id,
                    name: n
                }))])
            }
            ),
            this.roles.forEach(t => {
                Array.isArray(t.remindersGlobal) && (e = [...e, ...t.remindersGlobal.map(n => ({
                    role: t.id,
                    name: n
                }))])
            }
            ),
            this.npcs.forEach(t => {
                var n;
                (n = t.reminders) != null && n.length && (e = [...e, ...t.reminders.map(i => ({
                    role: t.id,
                    name: i
                }))])
            }
            ),
            e = e.filter( (t, n, i) => i.findIndex(Ce(t)) === n && (!this.modal.params.filter || t.name.toLocaleLowerCase() === this.modal.params.filter.toLocaleLowerCase()) && !this.userReminders.some(Ce(t))),
            this.modal.params.filter || (e.push({
                role: "good",
                name: "Good"
            }),
            e.push({
                role: "evil",
                name: "Evil"
            })),
            this.grimoire.savedReminders.forEach(t => {
                e.push({
                    role: "custom",
                    name: t,
                    isSaved: !0
                })
            }
            ),
            e.push({
                role: "custom",
                name: this.$t("modals.reminder.custom_note")
            }),
            e = e.filter(t => !s || this.tab !== 0 || (this.$t(`reminders.${t.name.replace(/[^a-z0-9]/gi, "").toLowerCase()}`, t.name) + " " + this.$t(`roles.${t.role.replace(/[^a-z0-9]/gi, "").toLowerCase()}.name`, t.role)).match(s)),
            e.sort( (t, n) => {
                var i, o;
                return this.sort.indexOf((i = this.roles.get(n.role)) == null ? void 0 : i.team) - this.sort.indexOf((o = this.roles.get(t.role)) == null ? void 0 : o.team)
            }
            ),
            e
        },
        otherReminders() {
            let e = [], s;
            try {
                s = new RegExp(this.search.trim(),"i")
            } catch {}
            return this.roles.forEach(t => {
                this.players.some(n => n.role === t) || this.storytellers.some(n => n.role === t) || this.bluffs.some(n => n === t) || Array.isArray(t.reminders) && (e = [...e, ...t.reminders.map(n => ({
                    role: t.id,
                    name: n
                }))])
            }
            ),
            this.userReminders.length && (e = [...e, ...this.userReminders.filter(t => [...this.roles].some( ([n]) => n === t.role) || this.npcs.some( ({id: n}) => n === t.role))]),
            e = e.filter( (t, n, i) => i.findIndex(Ce(t)) === n && (!s || this.tab === 0 || (t.name + " " + t.role).match(s))),
            e.sort( (t, n) => {
                var i, o;
                return this.sort.indexOf((i = this.roles.get(n.role)) == null ? void 0 : i.team) - this.sort.indexOf((o = this.roles.get(t.role)) == null ? void 0 : o.team)
            }
            ),
            e
        },
        otherRemindersSlice() {
            return this.otherReminders.slice(this.pageOther * 47, this.pageOther * 47 + 47)
        },
        currentRemindersSlice() {
            return this.currentReminders.slice(this.page * 47, this.page * 47 + 47)
        }
    },
    data() {
        return {
            sort: ["demon", "minion", "outsider", "townsfolk"],
            page: 0,
            pageOther: 0,
            search: "",
            tab: 0
        }
    },
    methods: {
        ...j(["toggleModal", "toggleSavedReminder"]),
        ...j("players", ["updatePlayer", "updateStoryteller"]),
        keydown({key: e}) {
            const s = this.tab === 0 ? this.currentReminders : this.otherReminders;
            e === "Enter" && s.length === 1 ? this.addReminder(s[0]) : e === "Escape" && (this.search ? this.search = "" : this.close())
        },
        close() {
            document.getElementById("app").focus(),
            this.toggleModal(this.modal),
            this.search = ""
        },
        async addReminder(e) {
            var i, o, l, g, c;
            if (!this.user)
                return this.toggleModal(this.modal);
            const s = this.storytellers.includes(this.user)
              , t = "reminders";
            let n;
            if (e.role === "custom") {
                const h = this.user;
                try {
                    let m = e.isSaved ? e.name : "";
                    if (!m) {
                        const {value: A, checkbox: f} = await this.$store.dispatch("openDialogue", {
                            type: "prompt",
                            title: "modals.reminder.custom_title",
                            placeholder: "modals.reminder.custom_note",
                            checkbox: {
                                value: !1,
                                label: "modals.reminder.custom_favorite"
                            },
                            text: ["modals.reminder.custom_text", [this.$t(...this.playerName(h))]]
                        });
                        m = A,
                        f && m && this.toggleSavedReminder(m)
                    }
                    m && (n = [...h.reminders, {
                        role: "custom",
                        name: m
                    }],
                    s ? this.updateStoryteller({
                        storyteller: h,
                        property: t,
                        value: n
                    }) : this.updatePlayer({
                        player: h,
                        property: t,
                        value: n
                    }),
                    this.toggleModal())
                } catch {
                    this.toggleModal(this.modal)
                }
            } else {
                const h = [...this.players.filter(w => {
                    var V;
                    return (V = w.reminders) == null ? void 0 : V.some(Ce(e))
                }
                ), ...this.storytellers.filter(w => {
                    var V;
                    return (V = w.reminders) == null ? void 0 : V.some(Ce(e))
                }
                )]
                  , m = this.roles.get(e.role) || this.npcs.find(w => w.id === e.role) || this.rolesAvailable.get(e.role) || {}
                  , A = ((i = m.reminders) == null ? void 0 : i.filter(w => w === e.name).length) || ((o = m.remindersGlobal) == null ? void 0 : o.filter(w => w === e.name).length) || 1
                  , f = this.players.filter(w => w.role === m).length || 1;
                if (h.map(w => w.reminders).flat().filter(Ce(e)).length >= A * f && (this.isStoryteller || !this.settings.game.isPlayerDuplicates) && !["good", "evil"].includes(e.role)) {
                    const w = h[0] === this.user && h[1] ? h[1] : h[0];
                    w.reminders.splice(w.reminders.findIndex(Ce(e)), 1),
                    h !== this.user && (this.storytellers.includes(w) ? this.updateStoryteller({
                        storyteller: w,
                        property: t,
                        value: w.reminders
                    }) : this.updatePlayer({
                        player: w,
                        property: t,
                        value: w.reminders
                    }))
                }
                n = [...((l = this.user) == null ? void 0 : l.reminders) || [], {
                    role: e.role,
                    name: e.name
                }],
                s ? this.updateStoryteller({
                    storyteller: this.user,
                    property: t,
                    value: n
                }) : this.updatePlayer({
                    player: this.user,
                    property: t,
                    value: n
                }),
                ["marionette", "alchemist"].includes(e.role) && (["townsfolk", "outsider"].includes((g = this.user) == null ? void 0 : g.role.team) && e.role === "marionette" ? this.updatePlayer({
                    player: this.user,
                    property: "alignment",
                    value: "e"
                }) : ((c = this.user) == null ? void 0 : c.role.team) === "minion" && e.role === "alchemist" && this.updatePlayer({
                    player: this.user,
                    property: "alignment",
                    value: "g"
                })),
                this.toggleModal(this.modal)
            }
        },
        tabChange(e) {
            this.tab = e,
            this.search = "",
            this.page = 0,
            this.pageOther = 0,
            this.isTouchDevice || this.$nextTick( () => {
                var s, t;
                (s = this.$refs.search) == null || s.focus(),
                (t = this.$refs.search) == null || t.select()
            }
            )
        }
    }
}
  , Dy = ["placeholder"]
  , Ey = {
    class: "reminders"
}
  , Ny = {
    key: 0,
    class: "paging left"
}
  , By = {
    key: 0,
    class: "paging right"
}
  , Vy = {
    class: "reminders"
}
  , Oy = {
    key: 0,
    class: "paging left"
}
  , jy = {
    key: 0,
    class: "paging right"
};
function Uy(e, s, t, n, i, o) {
    const l = k("i18n-t")
      , g = k("Reminder")
      , c = k("font-awesome-icon")
      , h = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "reminder" && o.user ? (r(),
        C(h, {
            key: 0,
            name: "reminders",
            onClose: s[6] || (s[6] = m => o.close()),
            onTabChange: o.tabChange,
            tabs: [e.$t("modals.reminder.tab1"), e.$t("modals.reminder.tab2")],
            id: "reminders"
        }, {
            header: S( () => [b(l, {
                tag: "div",
                keypath: "modals.reminder.title",
                class: "title",
                scope: "global"
            }, {
                default: S( () => [a("b", null, d(e.$t(...e.playerName(o.user))), 1)]),
                _: 1
            }), z(a("input", {
                ref: "search",
                "onUpdate:modelValue": s[0] || (s[0] = m => i.search = m),
                placeholder: e.$t("common.button_search"),
                onKeydown: s[1] || (s[1] = M( (...m) => o.keydown && o.keydown(...m), ["stop"]))
            }, null, 40, Dy), [[W, i.search]])]),
            "tab-0": S( () => [a("ul", Ey, [(r(!0),
            u(_, null, B(o.currentRemindersSlice, (m, A) => (r(),
            u(_, {
                key: A
            }, [a("li", null, [b(g, {
                reminder: m,
                class: y({
                    dead: m.isDead
                }),
                onClick: f => o.addReminder(m)
            }, null, 8, ["reminder", "class", "onClick"])]), o.currentReminders.length > o.currentRemindersSlice.length && A + 1 === o.currentRemindersSlice.length - o.currentRemindersSlice.length % 7 ? (r(),
            u("li", Ny, [i.page ? (r(),
            C(c, {
                key: 0,
                icon: "arrow-circle-left",
                onClick: s[2] || (s[2] = f => i.page -= 1)
            })) : p("", !0)])) : p("", !0)], 64))), 128)), o.currentReminders.length > o.currentRemindersSlice.length ? (r(),
            u("li", By, [i.page < Math.floor((o.currentReminders.length - 1) / 47) ? (r(),
            C(c, {
                key: 0,
                onClick: s[3] || (s[3] = m => i.page += 1),
                icon: "arrow-circle-right"
            })) : p("", !0)])) : p("", !0)])]),
            "tab-1": S( () => [a("ul", Vy, [(r(!0),
            u(_, null, B(o.otherRemindersSlice, (m, A) => (r(),
            u(_, {
                key: A
            }, [o.otherReminders.length > o.otherRemindersSlice.length && A === o.otherRemindersSlice.length - o.otherRemindersSlice.length % 7 ? (r(),
            u("li", Oy, [i.pageOther ? (r(),
            C(c, {
                key: 0,
                icon: "arrow-circle-left",
                onClick: s[4] || (s[4] = f => i.pageOther -= 1)
            })) : p("", !0)])) : p("", !0), a("li", null, [b(g, {
                reminder: m,
                class: y({
                    dead: m.isDead
                }),
                onClick: f => o.addReminder(m)
            }, null, 8, ["reminder", "class", "onClick"])])], 64))), 128)), o.otherReminders.length > o.otherRemindersSlice.length ? (r(),
            u("li", jy, [i.pageOther < Math.floor((o.otherReminders.length - 1) / 47) ? (r(),
            C(c, {
                key: 0,
                onClick: s[5] || (s[5] = m => i.pageOther += 1),
                icon: "arrow-circle-right"
            })) : p("", !0)])) : p("", !0)])]),
            _: 1
        }, 8, ["onTabChange", "tabs"])) : p("", !0)]),
        _: 1
    })
}
const Hy = O(Ry, [["render", Uy], ["__scopeId", "data-v-21c54779"]])
  , qy = {
    components: {
        Reminder: ra,
        FontAwesomeIcon: Y,
        Token: fe,
        Modal: se
    },
    computed: {
        ...I(["modal", "roles", "rolesAvailable", "session", "grimoire", "game", "definitions"]),
        ...I("players", ["players", "bluffs", "npcs", "storytellers"]),
        ...I("user", ["user"]),
        ...D(["roleIconURL", "filterAbilities"]),
        ...D("players", ["playerName", "seatedPlayerMap"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess", "getOpenEyes", "isSpectator"]),
        availableRoles() {
            const e = [];
            return this.roles.forEach(s => {
                this.definitions.NPC_TEAMS.includes(s.team) || s.team !== "traveller" && e.push(s)
            }
            ),
            this.players.forEach(s => {
                s.role.id && !e.includes(s.role) && e.push(s.role)
            }
            ),
            this.editPlayer < 0 && this.npcs.forEach(s => e.push(s)),
            e
        },
        playerAlignment() {
            var e, s, t, n, i, o;
            return (e = this.modal.params.player) != null && e.alignment ? ((s = this.modal.params.player) == null ? void 0 : s.alignment) === "g" ? "good" : "evil" : ["minion", "demon"].includes((n = (t = this.modal.params.player) == null ? void 0 : t.role) == null ? void 0 : n.team) ? "evil" : ["townsfolk", "outsider"].includes((o = (i = this.modal.params.player) == null ? void 0 : i.role) == null ? void 0 : o.team) ? "good" : ""
        },
        allRoles() {
            return new Map([...this.$store.state.npcs, ...this.rolesAvailable, ...this.roles])
        },
        canSignal() {
            var e;
            if (!this.$store.getters["game/isNight"])
                return !1;
            if (this.isStoryteller && this.modal.params.player) {
                const s = this.modal.params.player;
                return ((e = this.session.users.get(s.id)) == null ? void 0 : e.isOnline) && this.message.length
            } else if (this.seatedPlayerMap.has(this.user.id) && !this.modal.params.player)
                return (this.session.signals.storyteller || []).length;
            return !1
        },
        messageLog() {
            return (this.session.signals[(this.hasGrimoireAccess || this.getOpenEyes === "open-eyes") && this.modal.params.player ? this.modal.params.player.id : "storyteller"] || []).map( ({message: s, isInbound: t}) => ({
                message: s.map(n => [...this.signals, ...this.cards].find( ({id: i}) => n.id === i) || n),
                isInbound: t
            })).slice(this.hasGrimoireAccess ? -10 : -3)
        },
        bluffsVisible() {
            return this.players.length > 6 || this.npcs.some( ({id: e}) => e === "toymaker")
        },
        nightReminder() {
            const {player: e} = this.modal.params;
            return e != null && e.role ? e.role.firstNightReminder && this.game.phase <= 1 ? this.$t(`roles.${e.role.id}.first`, e.role.firstNightReminder) : e.role.otherNightReminder && this.game.phase > 1 ? this.$t(`roles.${e.role.id}.other`, e.role.otherNightReminder) : "" : ""
        },
        warning() {
            var s, t;
            const {player: e} = this.modal.params;
            return e ? ((s = e.role) == null ? void 0 : s.team) === "townsfolk" && this.players.some(n => {
                var i;
                return ((i = n.role) == null ? void 0 : i.id) === "vortox" && !n.isDead && !n.isMarkedForDeath
            }
            ) ? this.$t("modals.signal.warning_vortox") : (t = e.reminders) != null && t.some(n => n.name.match(/drunk|poisoned|marionette/i) && !n.isFlipped && n.role !== "custom") || [...this.players, ...this.storytellers].some( ({reminders: n}) => n.some(i => {
                var o, l;
                return i.role === "minstrel" && !i.isFlipped && ((o = e.role) == null ? void 0 : o.team) !== "traveller" && ((l = e.role) == null ? void 0 : l.id) !== "minstrel"
            }
            )) ? this.$t("modals.signal.warning_droison") : e.isDead || e.isMarkedForDeath ? this.$t("modals.signal.warning_dead") : "" : ""
        },
        specialSignals() {
            var s;
            const e = {
                player: [],
                card: [],
                other: []
            };
            return this.filterAbilities((s = this.modal.params.player) != null ? s : this.seatedPlayerMap.get(this.user.id), "signal").forEach( ({role: t, ability: n}) => {
                e[n.name] ? e[n.name].push({
                    role: t,
                    ability: n
                }) : e.other.push({
                    role: t,
                    ability: n
                })
            }
            ),
            e
        }
    },
    inject: ["renderReminderHTML"],
    data() {
        return {
            message: [],
            panel: "signal",
            playersCopy: [],
            storytellersCopy: [],
            bluffsCopy: [],
            editPlayer: -1,
            isEditable: !0,
            recipients: [],
            isSelectingPlayer: !1,
            selectedRoles: new Map,
            selectedPlayers: new Map,
            signals: [{
                id: "acknowledge",
                icon: "thumbs-up",
                player: !0
            }, {
                id: "yes",
                icon: "check-circle",
                player: !0
            }, {
                id: "no",
                icon: "times-circle",
                player: !0
            }, {
                id: "good",
                icon: "thumbs-up"
            }, {
                id: "neutral",
                icon: "hand-point-right",
                limit: "general"
            }, {
                id: "evil",
                icon: "thumbs-down"
            }, {
                id: "clockwise",
                icon: "rotate-right",
                limit: "shugenja"
            }, {
                id: "anticlockwise",
                icon: "rotate-left",
                limit: "shugenja"
            }, {
                id: "zero",
                icon: "square"
            }, {
                id: "one",
                icon: "dice-one"
            }, {
                id: "two",
                icon: "dice-two"
            }, {
                id: "three",
                icon: "dice-three"
            }, {
                id: "four",
                icon: "dice-four"
            }, {
                id: "five",
                icon: "dice-five"
            }],
            cards: [{
                id: "ability"
            }, {
                id: "choice"
            }, {
                id: "bluffs"
            }, {
                id: "demon"
            }, {
                id: "minions"
            }, {
                id: "you"
            }, {
                id: "claim"
            }, {
                id: "selected"
            }]
        }
    },
    methods: {
        ...j(["toggleModal", "setPlayerSelectCallback"]),
        getCardBackground(e) {
            return {
                backgroundImage: `url(${new URL(Object.assign({
                    "/src/assets/icons/card-ability.webp": zs,
                    "/src/assets/icons/card-bluffs.webp": Gs,
                    "/src/assets/icons/card-choice.webp": Ws,
                    "/src/assets/icons/card-claim.webp": Fs,
                    "/src/assets/icons/card-demon.webp": Qs,
                    "/src/assets/icons/card-minions.webp": Zs,
                    "/src/assets/icons/card-selected.webp": Xs,
                    "/src/assets/icons/card-special.webp": Ks,
                    "/src/assets/icons/card-you.webp": Ys
                })[`/src/assets/icons/card-${e}.webp`],import.meta.url).href})`
            }
        },
        messageAdd(e) {
            this.message.push(e),
            this.selectedRoles.clear(),
            this.selectedPlayers.clear()
        },
        messageRemove(e) {
            this.message.splice(e, 1),
            this.selectedRoles.clear(),
            this.selectedPlayers.clear()
        },
        messageClear() {
            this.message = [],
            this.selectedRoles.clear(),
            this.selectedPlayers.clear()
        },
        addCard(e) {
            var s, t, n, i;
            switch (this.messageAdd(e),
            e.id) {
            case "selected":
                this.panel = "role";
                break;
            case "you":
                this.playerAlignment && this.messageAdd(this.signals.find(o => o.id === this.playerAlignment)),
                (t = (s = this.modal.params.player) == null ? void 0 : s.role) != null && t.id ? this.messageAdd({
                    id: "role",
                    data: (i = (n = this.modal.params.player) == null ? void 0 : n.role) == null ? void 0 : i.id
                }) : this.panel = "role";
                break;
            case "claim":
                this.selectPlayer();
                break;
            case "bluffs":
                this.bluffs.forEach(o => {
                    o.id && this.messageAdd({
                        id: "role",
                        data: o.id
                    })
                }
                );
                break;
            case "demon":
                this.players.forEach( (o, l) => {
                    var g, c, h, m;
                    (((g = o.role) == null ? void 0 : g.team) === "demon" || ((h = (c = this.modal.params.player) == null ? void 0 : c.role) == null ? void 0 : h.team) !== "traveller" && ((m = o.role) == null ? void 0 : m.id) === "magician") && !o.reminders.some(A => ["drunk"].includes(A.role) || ["drunk", "poisoned"].includes(A.name.toLowerCase())) && this.messageAdd({
                        id: "player",
                        data: l
                    })
                }
                );
                break;
            case "minions":
                this.players.forEach( (o, l) => {
                    var g, c, h, m, A;
                    (((g = o.role) == null ? void 0 : g.team) === "minion" || ((c = o.role) == null ? void 0 : c.id) === "magician" && !o.reminders.some(f => ["drunk"].includes(f.role) || ["drunk", "poisoned"].includes(f.name.toLowerCase()))) && (((h = o.role) == null ? void 0 : h.id) !== "marionette" || ((A = (m = this.modal.params.player) == null ? void 0 : m.role) == null ? void 0 : A.team) === "demon") && !o.reminders.some(f => ["drunk", "alchemist"].includes(f.role)) && this.messageAdd({
                        id: "player",
                        data: l
                    })
                }
                );
                break
            }
        },
        addRole(e) {
            var s;
            if (!e && this.editPlayer < 0) {
                this.panel = "signal";
                return
            }
            this.editPlayer > -1 ? (this.playersCopy[this.editPlayer].role = e,
            this.playersCopy[this.editPlayer].alignment = null,
            this.editPlayer = -1,
            this.panel = "show") : ((s = this.message.slice(-1).pop()) == null ? void 0 : s.id) === "bluffs" ? (this.selectedRoles.has(e) ? this.selectedRoles.delete(e) : this.selectedRoles.set(e, e),
            this.selectedRoles.size === 3 && ([...this.selectedRoles.keys()].forEach(t => {
                this.messageAdd({
                    id: "role",
                    data: t
                })
            }
            ),
            this.panel = "signal")) : (this.messageAdd({
                id: "role",
                data: e
            }),
            this.panel = "signal")
        },
        addRecipient(e) {
            const s = this.players[e];
            s.id && !this.recipients.includes(s.id) && s.id !== this.modal.params.player.id && this.recipients.push(s.id)
        },
        addPlayer(e) {
            var n, i;
            const s = (n = this.message.slice(-1).pop()) == null ? void 0 : n.id
              , t = ((i = ze[this.$store.getters["players/nonTravellers"] - 5]) == null ? void 0 : i.minion) || 0;
            this.panel === "recipient" ? (this.addRecipient(e),
            this.selectPlayer("recipient")) : s === "minions" && t > 1 ? (this.selectedPlayers.has(e) ? this.selectedPlayers.delete(e) : this.selectedPlayers.set(e, e),
            this.selectedPlayers.size === t && ([...this.selectedPlayers.keys()].forEach(o => {
                this.messageAdd({
                    id: "player",
                    data: o
                })
            }
            ),
            this.selectPlayer())) : s === "claim" ? (this.messageAdd({
                id: "player",
                data: e
            }),
            this.isSelectingPlayer = !1,
            this.setPlayerSelectCallback(),
            this.panel = "role") : (this.messageAdd({
                id: "player",
                data: e
            }),
            this.selectPlayer())
        },
        selectPlayer(e="player", s=!1) {
            if (this.panel !== e)
                this.panel = e,
                this.isSelectingPlayer = !0,
                this.setPlayerSelectCallback(t => {
                    this.isSelectingPlayer ? this.addPlayer(t) : this.setPlayerSelectCallback()
                }
                );
            else {
                if (this.isSelectingPlayer && (this.isSelectingPlayer = !1,
                this.setPlayerSelectCallback()),
                s)
                    for (let t = 0; t < this.players.length; t++)
                        this.addRecipient(t);
                this.panel = "signal"
            }
        },
        async addCustom() {
            const e = Object.assign({}, this.modal.params, {
                skipClear: !0
            });
            try {
                const s = await this.$store.dispatch("openDialogue", {
                    type: "prompt",
                    title: "modals.signal.prompt_custom_title",
                    placeholder: "modals.signal.prompt_custom_placeholder",
                    text: `modals.signal.prompt_custom_${this.isStoryteller ? "st" : "player"}`
                });
                s && this.messageAdd({
                    id: "custom",
                    data: s
                })
            } catch {}
            this.toggleModal({
                name: "signal",
                params: e
            })
        },
        sendSignal() {
            if (!this.canSignal || !this.message.length)
                return;
            const e = {
                message: this.message,
                userIds: ["storyteller"]
            };
            this.isStoryteller && this.modal.params.player && e.userIds.push(this.modal.params.player.id),
            this.recipients.forEach(s => {
                var t;
                (t = this.session.users.get(s)) != null && t.isOnline && e.userIds.push(s)
            }
            ),
            this.$store.commit("session/addSignal", e),
            this.messageClear()
        },
        showSignal(e) {
            e.id === "grimoire" && (this.playersCopy = e.data.players,
            this.storytellersCopy = e.data.storytellers,
            this.bluffsCopy = e.data.bluffs,
            this.isEditable = !1,
            this.panel = "show")
        },
        useAbility(e) {
            switch (e.name) {
            case "grimoire":
                this.copyGrimoire();
                break
            }
        },
        getPlayerAlignment(e) {
            return e ? ["minion", "demon"].includes(e == null ? void 0 : e.role.team) && e.alignment !== "g" || e.alignment === "e" ? "evil" : ["townsfolk", "outsider"].includes(e == null ? void 0 : e.role.team) && e.alignment !== "g" || e.alignment === "g" ? "good" : "" : ""
        },
        copyGrimoire() {
            this.isStoryteller && (this.playersCopy = [],
            this.players.forEach(e => {
                const s = {
                    role: e.role.id,
                    ...e.alignment ? {
                        alignment: e.alignment
                    } : {},
                    reminders: []
                };
                e.reminders.forEach(t => {
                    t.role !== "custom" && s.reminders.push(t)
                }
                ),
                this.playersCopy.push(s)
            }
            ),
            this.storytellersCopy = [],
            this.storytellers.forEach(e => {
                if (!e.role.id && !e.reminders.length)
                    return;
                const s = {
                    role: e.role.id,
                    ...e.alignment ? {
                        alignment: e.alignment
                    } : {},
                    reminders: []
                };
                e.reminders.forEach(t => {
                    t.role !== "custom" && s.reminders.push(t)
                }
                ),
                this.storytellersCopy.push(s)
            }
            ),
            this.bluffsCopy = [],
            this.bluffsVisible && this.bluffs.forEach(e => {
                this.bluffsCopy.push(e.id)
            }
            ),
            this.isEditable = !0,
            this.panel = "show")
        },
        changeRole(e) {
            this.isEditable && (this.editPlayer = e,
            this.panel = "role")
        },
        removeReminder(e, s) {
            this.isEditable && e.reminders.splice(s, 1)
        },
        addGrimoire() {
            this.messageAdd({
                id: "grimoire",
                data: {
                    players: this.playersCopy,
                    storytellers: this.storytellersCopy,
                    bluffs: this.bluffsCopy
                }
            }),
            this.panel = "signal"
        }
    },
    watch: {
        "modal.name"() {
            this.modal.name === "signal" ? (this.messageLog.length && this.messageLog[this.messageLog.length - 1].isInbound && this.$store.commit("session/markSignalsAsRead", this.hasGrimoireAccess && this.modal.params.player ? this.modal.params.player.id : "storyteller"),
            this.panel = "signal",
            this.modal.params.skipClear || (this.message = [],
            this.recipients = [])) : this.isSelectingPlayer && (this.isSelectingPlayer = !1,
            this.setPlayerSelectCallback())
        }
    }
}
  , Ly = {
    key: 0,
    class: "recipients"
}
  , zy = ["onClick"]
  , Gy = {
    key: 0,
    class: "log"
}
  , Wy = {
    key: 0
}
  , Fy = ["onClick"]
  , Qy = {
    key: 0,
    class: "new message"
}
  , Zy = {
    key: 0
}
  , Xy = ["onClick"]
  , Ky = {
    class: "trash"
}
  , Yy = {
    key: 1,
    class: "signals"
}
  , Jy = ["innerHTML"]
  , $y = {
    key: 1,
    class: "warning"
}
  , xy = ["onClick"]
  , ew = ["onClick"]
  , sw = ["onClick"]
  , tw = ["onClick"]
  , iw = ["onClick"]
  , ow = {
    class: "short"
}
  , nw = {
    key: 0,
    class: "players"
}
  , aw = {
    class: "button-group"
}
  , rw = {
    class: "roles"
}
  , lw = {
    key: 0,
    class: "break"
}
  , cw = ["onClick"]
  , dw = {
    class: "button-group"
}
  , uw = {
    class: "center"
}
  , gw = {
    key: 0,
    class: "bluffs"
}
  , mw = {
    key: 1,
    class: "storytellers"
}
  , hw = {
    class: "reminders"
}
  , pw = {
    key: 0,
    class: "reminders"
}
  , Aw = {
    class: "button-group"
};
function bw(e, s, t, n, i, o) {
    const l = k("i18n-t")
      , g = k("font-awesome-icon")
      , c = k("Token")
      , h = k("Reminder")
      , m = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "signal" ? (r(),
        C(m, {
            key: 0,
            onClose: s[11] || (s[11] = A => e.toggleModal(e.modal)),
            class: y(["signals", "panel-" + i.panel])
        }, {
            header: S( () => {
                var A;
                return [i.panel === "signal" && e.isStoryteller && e.modal.params.player ? (r(),
                u("div", Ly, [b(l, {
                    keypath: "modals.signal.title",
                    scope: "global"
                }, {
                    default: S( () => [a("b", null, d(e.$t(...e.playerName(e.modal.params.player))), 1)]),
                    _: 1
                }), v(" " + d(i.recipients.length ? "+" : "") + " ", 1), (r(!0),
                u(_, null, B(i.recipients, (f, T) => {
                    var w;
                    return r(),
                    u("span", {
                        class: "recipient",
                        key: f,
                        onClick: V => i.recipients.splice(T, 1)
                    }, d(((w = e.session.users.get(f)) == null ? void 0 : w.username) || f), 9, zy)
                }
                ), 128)), b(g, {
                    onClick: s[0] || (s[0] = f => o.selectPlayer("recipient")),
                    icon: "user-plus"
                })])) : i.panel === "signal" && e.seatedPlayerMap.has(e.user.id) && !((A = e.modal.params.player) != null && A.id) ? (r(),
                u(_, {
                    key: 1
                }, [v(d(e.$t("modals.signal.title_st")), 1)], 64)) : i.panel === "signal" ? (r(),
                u(_, {
                    key: 2
                }, [v(d(e.$t("modals.signal.title_spec", [e.$t(...e.playerName(e.modal.params.player))])), 1)], 64)) : i.panel === "player" || i.panel === "recipient" ? (r(),
                u(_, {
                    key: 3
                }, [v(d(e.$t("modals.signal.title_player")), 1)], 64)) : i.panel === "role" ? (r(),
                u(_, {
                    key: 4
                }, [v(d(e.$t("modals.signal.title_character")), 1)], 64)) : i.panel === "show" ? (r(),
                u(_, {
                    key: 5
                }, [v(d(e.$t("modals.signal.grimoire")), 1)], 64)) : p("", !0)]
            }
            ),
            default: S( () => [i.panel === "signal" ? (r(),
            u(_, {
                key: 0
            }, [o.messageLog.length || i.message.length ? (r(),
            u("ul", Gy, [b(Ye, {
                name: "list"
            }, {
                default: S( () => [(r(!0),
                u(_, null, B(o.messageLog, (A, f) => {
                    var T;
                    return r(),
                    u("li", {
                        key: f,
                        class: "message"
                    }, [a("b", {
                        class: y({
                            sent: !A.isInbound
                        })
                    }, [b(g, {
                        icon: "arrow-circle-" + (A.isInbound ? "left" : "right")
                    }, null, 8, ["icon"]), s[12] || (s[12] = v("Â  ", -1)), e.isStoryteller || !((T = e.modal.params.player) != null && T.id) ? (r(),
                    u(_, {
                        key: 0
                    }, [v(d(A.isInbound ? e.$t("modals.signal.received") : e.$t("modals.signal.sent")) + ": ", 1)], 64)) : (r(),
                    u(_, {
                        key: 1
                    }, [v(d(A.isInbound ? e.$t("modals.signal.player") : e.$t("modals.signal.storyteller")) + ": ", 1)], 64))], 2), a("p", null, [(r(!0),
                    u(_, null, B(A.message, (w, V) => {
                        var N, U, P;
                        return r(),
                        u(_, {
                            key: V
                        }, [!w.icon && V > 0 && !["custom", "role", "player", "seen"].includes(w.id) ? (r(),
                        u("hr", Wy)) : p("", !0), a("div", {
                            class: y(w.icon ? "icon" : "card-" + w.id),
                            onClick: E => o.showSignal(w)
                        }, [w.id === "player" ? (r(),
                        u(_, {
                            key: 0
                        }, [b(g, {
                            icon: "user",
                            class: y(o.getPlayerAlignment(e.players[w.data]))
                        }, null, 8, ["class"]), v(" " + d(e.$t(...e.playerName(e.players[w.data]))), 1)], 64)) : w.id === "role" ? (r(),
                        u(_, {
                            key: 1
                        }, [o.allRoles.has(w.data) ? (r(),
                        u("span", {
                            key: 0,
                            class: "icon",
                            style: L({
                                backgroundImage: `url(${e.roleIconURL(o.allRoles.get(w.data))})`
                            })
                        }, null, 4)) : p("", !0), a("span", {
                            class: y((N = o.allRoles.get(w.data)) == null ? void 0 : N.team)
                        }, d(e.$t(`roles.${w.data}.name`, (U = o.allRoles.get(w.data)) == null ? void 0 : U.name)), 3)], 64)) : w.id === "custom" ? (r(),
                        u(_, {
                            key: 2
                        }, [b(g, {
                            icon: "comment-dots"
                        }), v(" " + d(w.data), 1)], 64)) : w.id === "grimoire" ? (r(),
                        u(_, {
                            key: 3
                        }, [b(g, {
                            icon: "book-dead"
                        }), v(" " + d(e.$t("modals.signal.grimoire")), 1)], 64)) : w.id === "seen" ? (r(),
                        u(_, {
                            key: 4
                        }, [b(g, {
                            icon: "eye",
                            class: y(o.getPlayerAlignment(e.players.find(E => E.id === w.data)))
                        }, null, 8, ["class"]), v(" " + d(e.$t("modals.signal.saw_this", [e.$t(...e.playerName({
                            id: w.data
                        }))])), 1)], 64)) : w.id === "special" ? (r(),
                        u(_, {
                            key: 5
                        }, [a("span", {
                            class: "icon",
                            style: L(o.getCardBackground(w.id))
                        }, null, 4), v(" " + d(((P = e.roles.get(w.role)) == null ? void 0 : P.name) + ":") + " " + d(w.description), 1)], 64)) : (r(),
                        u(_, {
                            key: 6
                        }, [w.icon ? (r(),
                        C(g, {
                            key: 0,
                            icon: w.icon
                        }, null, 8, ["icon"])) : (r(),
                        u("span", {
                            key: 1,
                            class: "icon",
                            style: L(o.getCardBackground(w.id))
                        }, null, 4)), v(" " + d(e.$t(`modals.signal.cards.${w.id}`)), 1)], 64))], 10, Fy)], 64)
                    }
                    ), 128))])])
                }
                ), 128)), i.message.length ? (r(),
                u("li", Qy, [a("b", null, [b(g, {
                    icon: "circle-plus"
                }), v(" " + d(e.isStoryteller ? e.$t("modals.signal.message") : e.$t("modals.signal.response")), 1)]), a("p", null, [(r(!0),
                u(_, null, B(i.message, (A, f) => {
                    var T, w, V;
                    return r(),
                    u(_, {
                        key: f
                    }, [!A.icon && f > 0 && !["custom", "role", "player", "seen"].includes(A.id) ? (r(),
                    u("hr", Zy)) : p("", !0), a("div", {
                        class: y(A.icon ? "icon" : "card-" + A.id),
                        onClick: N => o.messageRemove(f)
                    }, [A.id === "player" ? (r(),
                    u(_, {
                        key: 0
                    }, [b(g, {
                        icon: "user",
                        class: y(o.getPlayerAlignment(e.players[A.data]))
                    }, null, 8, ["class"]), v(" " + d(e.$t(...e.playerName(e.players[A.data]))), 1)], 64)) : A.id === "role" ? (r(),
                    u(_, {
                        key: 1
                    }, [o.allRoles.has(A.data) ? (r(),
                    u("span", {
                        key: 0,
                        class: "icon",
                        style: L({
                            backgroundImage: `url(${e.roleIconURL(o.allRoles.get(A.data))})`
                        })
                    }, null, 4)) : p("", !0), a("span", {
                        class: y((T = o.allRoles.get(A.data)) == null ? void 0 : T.team)
                    }, d(e.$t(`roles.${A.data}.name`, (w = o.allRoles.get(A.data)) == null ? void 0 : w.name)), 3)], 64)) : A.id === "custom" ? (r(),
                    u(_, {
                        key: 2
                    }, [b(g, {
                        icon: "comment-dots"
                    }), v(" " + d(A.data), 1)], 64)) : A.id === "grimoire" ? (r(),
                    u(_, {
                        key: 3
                    }, [b(g, {
                        icon: "book-dead"
                    }), v(" " + d(e.$t("modals.signal.grimoire")), 1)], 64)) : A.id === "special" ? (r(),
                    u(_, {
                        key: 4
                    }, [a("span", {
                        class: "icon",
                        style: L(o.getCardBackground(A.id))
                    }, null, 4), v(" " + d(((V = e.roles.get(A.role)) == null ? void 0 : V.name) + ":") + " " + d(A.description), 1)], 64)) : (r(),
                    u(_, {
                        key: 5
                    }, [A.icon ? (r(),
                    C(g, {
                        key: 0,
                        icon: A.icon
                    }, null, 8, ["icon"])) : (r(),
                    u("span", {
                        key: 1,
                        class: "icon",
                        style: L(o.getCardBackground(A.id))
                    }, null, 4)), v(" " + d(A.role ? A.role + ":" : "") + " " + d(e.$t(`modals.signal.cards.${A.id}`)), 1)], 64))], 10, Xy)], 64)
                }
                ), 128))]), a("div", Ky, [b(g, {
                    onClick: s[1] || (s[1] = A => o.messageClear()),
                    icon: "trash-alt"
                })])])) : p("", !0)]),
                _: 1
            })])) : p("", !0), e.isStoryteller || o.canSignal ? (r(),
            u("ul", Yy, [o.nightReminder ? (r(),
            u("li", {
                key: 0,
                class: "reminder",
                innerHTML: o.renderReminderHTML(o.nightReminder)
            }, null, 8, Jy)) : p("", !0), o.warning ? (r(),
            u("li", $y, [b(g, {
                icon: "exclamation-triangle"
            }), v(" " + d(o.warning), 1)])) : p("", !0), (r(!0),
            u(_, null, B(o.specialSignals.player, ({ability: A, role: f}, T) => (r(),
            u("li", {
                key: T,
                class: "signal player-special player-usable player-only",
                onClick: w => o.messageAdd({
                    id: "special",
                    icon: "star",
                    role: f.id,
                    description: A.value
                })
            }, [b(g, {
                icon: "star"
            }), v(" " + d(e.$t(`roles.${f.id}.name`, f.name)) + ": " + d(A.value), 1)], 8, xy))), 128)), (r(!0),
            u(_, null, B(i.signals.filter(A => {
                var f;
                return !A.limit || A.limit === ((f = e.modal.params.player) == null ? void 0 : f.role.id)
            }
            ), A => (r(),
            u("li", {
                key: A.id,
                class: y([{
                    "player-usable": A.player,
                    "player-only": A.playerOnly
                }, "signal"]),
                onClick: f => o.messageAdd(A)
            }, [b(g, {
                icon: A.icon
            }, null, 8, ["icon"]), v(" " + d(e.$t(`modals.signal.cards.${A.id}`)), 1)], 10, ew))), 128)), s[13] || (s[13] = a("li", {
                class: "break"
            }, null, -1)), a("li", {
                class: "signal player player-usable",
                onClick: s[2] || (s[2] = A => o.selectPlayer())
            }, [b(g, {
                icon: "user"
            }), v(" " + d(e.$t("modals.signal.player")), 1)]), a("li", {
                class: "signal character player-usable",
                onClick: s[3] || (s[3] = A => i.panel = "role")
            }, [b(g, {
                icon: "theater-masks"
            }), v(" " + d(e.$t("modals.signal.character")), 1)]), a("li", {
                class: "signal custom player-usable",
                onClick: s[4] || (s[4] = A => o.addCustom())
            }, [b(g, {
                icon: "comment-dots"
            }), v(" " + d(e.$t("modals.signal.custom")), 1)]), e.isStoryteller && e.modal.params.player ? (r(!0),
            u(_, {
                key: 2
            }, B(o.specialSignals.other, ({ability: A, role: f}, T) => (r(),
            u("li", {
                key: T,
                class: "special",
                onClick: w => o.useAbility(A)
            }, [b(g, {
                icon: "star"
            }), v(" " + d(e.$t(`roles.${f.id}.name`, f.name)) + ": " + d(e.$t(`grimoire.abilities.${A.name}`)), 1)], 8, sw))), 128)) : p("", !0), s[14] || (s[14] = a("li", {
                class: "break"
            }, null, -1)), (r(!0),
            u(_, null, B(o.specialSignals.card, ({role: A, ability: f}, T) => (r(),
            u("li", {
                key: T,
                class: y(["card card-special", {
                    included: i.message.some(w => w.id === "special" && w.description === f.value && w.role === A.id)
                }]),
                onClick: w => o.addCard({
                    id: "special",
                    role: A.id,
                    description: f.value
                })
            }, [a("span", {
                class: "icon",
                style: L(o.getCardBackground("special"))
            }, null, 4), v(" " + d(e.$te(`roles.${A.id}.name`) ? e.$t(`roles.${A.id}.name`) : A.name) + ": " + d(f.value), 1)], 10, tw))), 128)), (r(!0),
            u(_, null, B(i.cards, A => (r(),
            u("li", {
                key: A.id,
                class: y({
                    card: !0,
                    ["card-" + A.id]: !0,
                    included: i.message.includes(A)
                }),
                onClick: f => o.addCard(A)
            }, [a("span", {
                class: "icon",
                style: L(o.getCardBackground(A.id))
            }, null, 4), v(" " + d(e.$t(`modals.signal.cards.${A.id}`)), 1)], 10, iw))), 128))])) : p("", !0), a("div", {
                class: y(["button-group send", {
                    enabled: i.message.length
                }])
            }, [a("div", {
                class: y(["button primary", {
                    disabled: !o.canSignal
                }]),
                onClick: s[5] || (s[5] = A => o.sendSignal())
            }, d(e.$t("common.button_send")), 3)], 2)], 64)) : i.panel === "player" || i.panel === "recipient" ? (r(),
            u(_, {
                key: 1
            }, [a("p", ow, d(e.$t("modals.signal.player_text")), 1), i.selectedPlayers.size ? (r(),
            u("div", nw, [a("b", null, d(e.$t("modals.signal.selected_players")) + ":", 1), s[15] || (s[15] = v("Â  ", -1)), (r(!0),
            u(_, null, B(i.selectedPlayers, ([A]) => (r(),
            u("span", {
                key: A
            }, d(e.$t(...e.playerName(e.players[A]))), 1))), 128))])) : p("", !0), a("div", aw, [i.panel === "recipient" ? (r(),
            u("span", {
                key: 0,
                class: "button primary",
                onClick: s[6] || (s[6] = A => o.selectPlayer(i.panel, !0))
            }, d(e.$t("modals.signal.select_everyone")), 1)) : p("", !0), a("span", {
                class: "button",
                onClick: s[7] || (s[7] = A => o.selectPlayer(i.panel))
            }, d(e.$t("common.button_cancel")), 1)])], 64)) : i.panel === "role" ? (r(),
            u(_, {
                key: 2
            }, [a("ul", rw, [(r(!0),
            u(_, null, B(o.availableRoles, (A, f) => (r(),
            u(_, {
                key: A.id
            }, [f && o.availableRoles[f - 1].team !== A.team ? (r(),
            u("li", lw)) : p("", !0), a("li", {
                class: y({
                    [A.team]: !0,
                    selected: i.selectedRoles.has(A.id)
                }),
                onClick: T => o.addRole(A.id)
            }, [A.id ? (r(),
            u("span", {
                key: 0,
                class: "icon",
                style: L({
                    backgroundImage: `url(${e.roleIconURL(A)})`
                })
            }, null, 4)) : p("", !0), v(" " + d(e.$t(`roles.${A.id}.name`, A.name)), 1)], 10, cw)], 64))), 128))]), a("div", dw, [a("span", {
                class: "button",
                onClick: s[8] || (s[8] = A => o.addRole())
            }, d(e.$t("common.button_cancel")), 1)])], 64)) : i.panel === "show" ? (r(),
            u(_, {
                key: 3
            }, [a("div", {
                class: y(["grimoire", {
                    static: !i.isEditable
                }])
            }, [a("div", uw, [o.bluffsVisible ? (r(),
            u("div", gw, [a("span", null, d(e.$t("modals.signal.bluffs")), 1), (r(!0),
            u(_, null, B(i.bluffsCopy, (A, f) => (r(),
            C(c, {
                key: f,
                role: o.allRoles.get(A)
            }, null, 8, ["role"]))), 128))])) : p("", !0), i.storytellersCopy.length ? (r(),
            u("div", mw, [a("span", null, d(e.$t("modals.signal.storyteller", i.storytellersCopy.length)) + ": ", 1), a("ul", null, [(r(!0),
            u(_, null, B(i.storytellersCopy, (A, f) => (r(),
            u("li", {
                key: f
            }, [b(c, {
                role: o.allRoles.get(A.role),
                alignment: A.alignment
            }, null, 8, ["role", "alignment"]), a("div", hw, [(r(!0),
            u(_, null, B(A.reminders, (T, w) => (r(),
            C(h, {
                key: w,
                reminder: T
            }, null, 8, ["reminder"]))), 128))])]))), 128))])])) : p("", !0)]), a("ul", {
                class: y(["circle", ["size-" + e.players.length]])
            }, [(r(!0),
            u(_, null, B(i.playersCopy, (A, f) => (r(),
            u("li", {
                key: f,
                style: L({
                    width: 9 + Math.round(100 / i.playersCopy.length) + "%"
                })
            }, [b(c, {
                onClick: T => o.changeRole(f),
                role: e.roles.get(A.role) || e.rolesAvailable.get(A.role),
                alignment: A.alignment
            }, null, 8, ["onClick", "role", "alignment"]), A.reminders ? (r(),
            u("div", pw, [(r(!0),
            u(_, null, B(A.reminders, (T, w) => (r(),
            C(h, {
                key: w,
                reminder: T,
                onClick: V => o.removeReminder(A, w)
            }, null, 8, ["reminder", "onClick"]))), 128))])) : p("", !0)], 4))), 128))], 2)], 2), a("div", Aw, [i.isEditable ? (r(),
            u("span", {
                key: 0,
                class: "button primary",
                onClick: s[9] || (s[9] = (...A) => o.addGrimoire && o.addGrimoire(...A))
            }, d(e.$t("common.button_confirm")), 1)) : p("", !0), a("span", {
                class: "button",
                onClick: s[10] || (s[10] = A => i.panel = "signal")
            }, d(i.isEditable ? e.$t("common.button_cancel") : e.$t("common.button_close")), 1)])], 64)) : p("", !0)]),
            _: 1
        }, 8, ["class"])) : p("", !0)]),
        _: 1
    })
}
const fw = O(qy, [["render", bw], ["__scopeId", "data-v-0d35128d"]])
  , vw = {
    components: {
        FontAwesomeIcon: Y,
        Modal: se
    },
    computed: {
        ...I(["modal"])
    },
    data() {
        return {
            input: "",
            title: "",
            unit: "minutes",
            checkbox: !1,
            confirmInterval: null,
            confirmTimer: 0
        }
    },
    methods: {
        ...j(["toggleModal"]),
        toggleUnit() {
            this.unit = this.unit === "minutes" ? "seconds" : "minutes"
        },
        confirm(e) {
            this.modal.params.resolve && this.modal.params.resolve(e),
            this.close()
        },
        cancel() {
            this.modal.params.isImportant || (this.modal.params.type === "alert" ? this.modal.params.resolve && this.modal.params.resolve() : this.modal.params.reject && this.modal.params.reject(),
            this.close())
        },
        submit() {
            this.input = String(this.input || "").trim(),
            !(this.input.length < this.modal.params.minlength) && (this.input.length > this.modal.params.maxlength || (this.modal.params.resolve && (this.modal.params.type === "timer" ? this.modal.params.resolve({
                title: this.title,
                value: this.unit === "minutes" ? this.input * 60 : this.input,
                checkbox: this.checkbox
            }) : this.modal.params.checkbox ? this.modal.params.resolve({
                value: this.input,
                checkbox: this.checkbox
            }) : this.modal.params.resolve(this.input)),
            this.close()))
        },
        close() {
            clearInterval(this.confirmInterval),
            document.getElementById("app").focus(),
            this.modal.params.isImportant = !1,
            this.toggleModal(Object.assign({}, this.modal, {
                name: ""
            }))
        },
        keydown({key: e}) {
            if (!(e === void 0 || !e.toLocaleLowerCase)) {
                if (e.toLocaleLowerCase() === "escape")
                    return this.cancel();
                if (!["prompt", "timer"].includes(this.modal.params.type))
                    switch (e.toLocaleLowerCase()) {
                    case "1":
                        this.$refs.button && this.$refs.button.click();
                        break;
                    case "2":
                        this.$refs.button2 && this.$refs.button2.click();
                        break;
                    case "3":
                        this.$refs.button3 && this.$refs.button3.click();
                        break
                    }
            }
        }
    },
    watch: {
        "modal.name"() {
            clearInterval(this.confirmInterval);
            const {name: e, params: s} = this.modal;
            e === "dialogue" ? s.type === "prompt" || s.type === "timer" ? (this.input = s.value,
            s.checkbox && (this.checkbox = s.checkbox.value),
            this.$nextTick( () => {
                this.$refs.input.focus(),
                this.$refs.input.select()
            }
            )) : s.type === "reveal" ? this.$nextTick( () => this.$refs.button3.focus()) : (s.type === "confirm" && s.timer && (this.confirmTimer = s.timer,
            this.confirmInterval = setInterval( () => {
                this.confirmTimer -= 1,
                this.confirmTimer <= 0 && (clearInterval(this.confirmInterval),
                this.confirm(!1))
            }
            , 1e3)),
            this.$nextTick( () => {
                this.$refs.button && this.$refs.button.focus()
            }
            )) : this.confirmTimer = 0
        }
    }
}
  , _w = {
    key: 0
}
  , yw = {
    key: 1
}
  , ww = ["type", "required", "placeholder", "maxlength", "minlength"]
  , kw = ["required", "placeholder", "maxlength", "minlength"]
  , Cw = {
    key: 2
}
  , Sw = ["required"]
  , Pw = {
    class: "button-group"
}
  , Tw = {
    type: "submit",
    ref: "button2",
    class: "button primary"
}
  , Iw = {
    class: "input"
}
  , Mw = ["step", "min", "max"]
  , Rw = ["placeholder"]
  , Dw = {
    class: "button-group"
}
  , Ew = {
    type: "submit",
    ref: "button2",
    class: "button primary"
}
  , Nw = {
    href: "https://bloodontheclocktower.com/terms-of-use",
    target: "_blank"
}
  , Bw = {
    href: "https://bloodontheclocktower.com/privacy-policy",
    target: "_blank"
}
  , Vw = {
    href: "https://bloodontheclocktower.com/cookie-policy",
    target: "_blank"
}
  , Ow = {
    class: "button-group"
}
  , jw = ["disabled"]
  , Uw = {
    key: 0,
    class: "timer"
}
  , Hw = {
    class: "button-group"
}
  , qw = {
    key: 6,
    class: "button-group"
}
  , Lw = {
    key: 7,
    class: "button-group"
};
function zw(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "dialogue" ? (r(),
        C(g, {
            key: 0,
            class: "dialogue",
            onClose: s[22] || (s[22] = c => o.cancel()),
            onKeydown: M(o.keydown, ["stop"])
        }, al({
            default: S( () => [e.modal.params.text ? (r(),
            u("p", _w, d(Array.isArray(e.modal.params.text) ? e.$t(...e.modal.params.text) : e.$te(e.modal.params.text) ? e.$t(e.modal.params.text) : e.modal.params.text), 1)) : p("", !0), e.modal.params.pre ? (r(),
            u("pre", yw, d(e.modal.params.pre), 1)) : p("", !0), e.modal.params.type === "prompt" ? (r(),
            u("form", {
                key: 2,
                onSubmit: s[4] || (s[4] = M(c => o.submit(), ["prevent"]))
            }, [e.modal.params.input !== "textarea" ? z((r(),
            u("input", {
                key: 0,
                type: e.modal.params.input || "text",
                step: "0.1",
                ref: "input",
                "onUpdate:modelValue": s[0] || (s[0] = c => i.input = c),
                required: !!e.modal.params.minlength,
                placeholder: e.modal.params.placeholder && (Array.isArray(e.modal.params.placeholder) ? e.$t(...e.modal.params.placeholder) : e.$t(e.modal.params.placeholder)),
                maxlength: e.modal.params.maxlength,
                minlength: e.modal.params.minlength
            }, null, 8, ww)), [[jd, i.input]]) : z((r(),
            u("textarea", {
                key: 1,
                ref: "input",
                "onUpdate:modelValue": s[1] || (s[1] = c => i.input = c),
                required: !!e.modal.params.minlength,
                placeholder: e.modal.params.placeholder && (Array.isArray(e.modal.params.placeholder) ? e.$t(...e.modal.params.placeholder) : e.$t(e.modal.params.placeholder)),
                maxlength: e.modal.params.maxlength,
                minlength: e.modal.params.minlength
            }, null, 8, kw)), [[W, i.input]]), e.modal.params.checkbox ? (r(),
            u("label", Cw, [z(a("input", {
                type: "checkbox",
                name: "checkbox",
                "onUpdate:modelValue": s[2] || (s[2] = c => i.checkbox = c),
                required: e.modal.params.checkbox.required
            }, null, 8, Sw), [[qe, i.checkbox]]), b(l, {
                icon: i.checkbox ? "check-circle" : "circle"
            }, null, 8, ["icon"]), v(" " + d(e.$t(e.modal.params.checkbox.label)), 1)])) : p("", !0), a("div", Pw, [a("button", Tw, [b(l, {
                icon: "thumbs-up"
            }), v(" " + d(e.$t("common.button_confirm")), 1)], 512), a("button", {
                type: "button",
                ref: "button2",
                class: "button secondary",
                onClick: s[3] || (s[3] = c => o.cancel())
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + d(e.$t("common.button_cancel")), 1)], 512)])], 32)) : e.modal.params.type === "timer" ? (r(),
            u("form", {
                key: 3,
                onSubmit: s[12] || (s[12] = M(c => o.submit(), ["prevent"]))
            }, [a("div", Iw, [z(a("input", {
                type: "number",
                step: i.unit === "minutes" ? .1 : 1,
                min: i.unit === "minutes" ? .1 : 3,
                max: i.unit === "minutes" ? 60 : 3600,
                ref: "input",
                onKeydown: s[5] || (s[5] = M( (...c) => o.keydown && o.keydown(...c), ["stop"])),
                "onUpdate:modelValue": s[6] || (s[6] = c => i.input = c),
                placeholder: "10"
            }, null, 40, Mw), [[W, i.input]]), a("button", {
                type: "button",
                class: "button",
                onClick: s[7] || (s[7] = (...c) => o.toggleUnit && o.toggleUnit(...c))
            }, d(e.$t("modals.dialogue.unit_" + i.unit)), 1)]), z(a("input", {
                type: "text",
                onKeydown: s[8] || (s[8] = M( (...c) => o.keydown && o.keydown(...c), ["stop"])),
                "onUpdate:modelValue": s[9] || (s[9] = c => i.title = c),
                placeholder: e.$t("modals.dialogue.timer_title"),
                maxlength: "50"
            }, null, 40, Rw), [[W, i.title]]), a("label", null, [z(a("input", {
                type: "checkbox",
                name: "checkbox",
                "onUpdate:modelValue": s[10] || (s[10] = c => i.checkbox = c)
            }, null, 512), [[qe, i.checkbox]]), b(l, {
                icon: i.checkbox ? "check-circle" : "circle"
            }, null, 8, ["icon"]), v(" " + d(e.$t("modals.dialogue.timer_paused")), 1)]), a("div", Dw, [a("button", Ew, [b(l, {
                icon: "hourglass-half"
            }), v(" " + d(e.$t("modals.dialogue.timer_start")), 1)], 512), a("button", {
                type: "button",
                ref: "button2",
                class: "button secondary",
                onClick: s[11] || (s[11] = c => o.cancel())
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + d(e.$t("common.button_cancel")), 1)], 512)])], 32)) : e.modal.params.type === "terms" ? (r(),
            u(_, {
                key: 4
            }, [v(d(e.$t("modals.dialogue.terms")) + " ", 1), a("ul", null, [a("li", null, [a("a", Nw, d(e.$t("common.terms_of_use")), 1)]), a("li", null, [a("a", Bw, d(e.$t("common.privacy_policy")), 1)]), a("li", null, [a("a", Vw, d(e.$t("common.cookie_policy")), 1)])]), a("label", null, [z(a("input", {
                type: "checkbox",
                "onUpdate:modelValue": s[13] || (s[13] = c => i.checkbox = c)
            }, null, 512), [[qe, i.checkbox]]), b(l, {
                icon: i.checkbox ? "check-circle" : "circle"
            }, null, 8, ["icon"]), v(" " + d(e.$t("modals.dialogue.terms_confirm")), 1)]), a("div", Ow, [a("button", {
                class: "button primary",
                ref: "button",
                disabled: !i.checkbox,
                onClick: s[14] || (s[14] = c => o.confirm(!0))
            }, [b(l, {
                icon: "thumbs-up"
            }), v(" " + d(e.$t("common.button_continue")), 1)], 8, jw), a("button", {
                class: "button secondary",
                ref: "button2",
                onClick: s[15] || (s[15] = c => o.confirm(!1))
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + d(e.$t("common.button_logout")), 1)], 512)])], 64)) : e.modal.params.type === "confirm" ? (r(),
            u(_, {
                key: 5
            }, [i.confirmTimer ? (r(),
            u("div", Uw, [b(l, {
                icon: "exclamation-triangle"
            }), v(" " + d(e.$t("modals.dialogue.close_timer", {
                n: i.confirmTimer
            })), 1)])) : p("", !0), a("div", Hw, [a("button", {
                class: "button primary",
                ref: "button",
                onClick: s[16] || (s[16] = c => o.confirm(!0))
            }, [b(l, {
                icon: "check-circle"
            }), v(" " + d(e.$t("modals.dialogue.button_yes")), 1)], 512), a("button", {
                class: "button secondary",
                ref: "button2",
                onClick: s[17] || (s[17] = c => o.confirm(!1))
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + d(e.$t("modals.dialogue.button_no")), 1)], 512)])], 64)) : e.modal.params.type === "reveal" ? (r(),
            u("div", qw, [a("button", {
                class: "button primary",
                ref: "button",
                onClick: s[18] || (s[18] = c => o.confirm(!0))
            }, [b(l, {
                icon: "thumbs-up"
            }), v(" " + d(e.$t("modals.dialogue.button_good")), 1)], 512), a("button", {
                class: "button secondary",
                ref: "button2",
                onClick: s[19] || (s[19] = c => o.confirm(!1))
            }, [b(l, {
                icon: "thumbs-down"
            }), v(" " + d(e.$t("modals.dialogue.button_evil")), 1)], 512), a("button", {
                class: "button",
                ref: "button3",
                onClick: s[20] || (s[20] = c => o.cancel())
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + d(e.$t("common.button_cancel")), 1)], 512)])) : (r(),
            u("div", Lw, [a("button", {
                class: "button primary",
                ref: "button",
                onClick: s[21] || (s[21] = c => o.confirm())
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + d(e.$t("common.button_close")), 1)], 512)]))]),
            _: 2
        }, [e.modal.params.title ? {
            name: "header",
            fn: S( () => [v(d(Array.isArray(e.modal.params.title) ? e.$t(...e.modal.params.title) : e.$t(e.modal.params.title)), 1)]),
            key: "0"
        } : void 0]), 1032, ["onKeydown"])) : p("", !0)]),
        _: 1
    })
}
const ga = O(vw, [["render", zw], ["__scopeId", "data-v-0348ddce"]])
  , Gw = {
    components: {
        Modal: se
    },
    computed: {
        ...I(["modal"]),
        ...D("user", ["isStoryteller"]),
        rulesURL() {
            return this.isStoryteller ? "https://drive.google.com/file/d/1kyOY-4PmSnQNoH3axyq1cEjVZ2T3kmlm/preview#view=FitH" : "https://drive.google.com/file/d/189hxU8yl3-j-mnFiPUF5fOAh6yQDweLL/preview#view=FitH"
        }
    },
    methods: {
        ...j(["toggleModal"])
    }
}
  , Ww = ["src"];
function Fw(e, s, t, n, i, o) {
    const l = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "rules" ? (r(),
        C(l, {
            key: 0,
            class: "rules",
            onClose: s[0] || (s[0] = g => e.toggleModal())
        }, {
            header: S( () => [v(d(e.$t("modals.rules.title")), 1)]),
            default: S( () => [a("iframe", {
                src: o.rulesURL,
                allow: "autoplay"
            }, null, 8, Ww)]),
            _: 1
        })) : p("", !0)]),
        _: 1
    })
}
const Qw = O(Gw, [["render", Fw], ["__scopeId", "data-v-63d916c0"]])
  , Zw = {
    components: {
        Modal: se
    },
    computed: {
        ...I(["vote", "modal", "session"]),
        ...D("user", ["hasGrimoireAccess"])
    },
    data() {
        return {
            dtFormat: new Intl.DateTimeFormat(navigator.languages ? navigator.languages[0] : navigator.language,{
                hour: "numeric",
                minute: "numeric"
            })
        }
    },
    methods: {
        ...j(["toggleModal"]),
        ...j("vote", ["clearHistory"])
    }
}
  , Xw = {
    key: 0
}
  , Kw = {
    class: "phase"
}
  , Yw = {
    class: "voters"
};
function Jw(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "vote-history" && (e.vote.history || e.hasGrimoireAccess) ? (r(),
        C(g, {
            key: 0,
            class: "vote-history",
            onClose: s[0] || (s[0] = c => e.toggleModal())
        }, {
            header: S( () => [v(d(e.$t("modals.votehistory.title")) + " ", 1), e.vote.history.length ? (r(),
            C(l, {
                key: 0,
                onClick: e.clearHistory,
                icon: "trash-alt",
                class: "clear",
                title: e.$t("modals.votehistory.clear")
            }, null, 8, ["onClick", "title"])) : p("", !0)]),
            default: S( () => [a("table", null, [a("thead", null, [a("tr", null, [a("td", null, d(e.$t("modals.votehistory.phase")), 1), a("td", null, d(e.$t("modals.votehistory.nominator")), 1), a("td", null, d(e.$t("modals.votehistory.nominee")), 1), a("td", null, d(e.$t("modals.votehistory.type")), 1), a("td", null, d(e.$t("modals.votehistory.votes")), 1), a("td", null, d(e.$t("modals.votehistory.majority")), 1), a("td", null, [b(l, {
                icon: "user-friends"
            }), v(" " + d(e.$t("modals.votehistory.voters")), 1)])])]), a("tbody", null, [(r(!0),
            u(_, null, B(e.vote.history, (c, h) => (r(),
            u(_, {
                key: h
            }, [!h || c.phase !== e.vote.history[h - 1].phase ? (r(),
            u("tr", Xw, [a("td", Kw, [c.phase ? (r(),
            u(_, {
                key: 1
            }, [v(d(e.$t(`grimoire.phases.${c.phase % 2 ? "night" : "day"}`, Math.ceil(c.phase / 2))), 1)], 64)) : (r(),
            u(_, {
                key: 0
            }, [v(d(e.$t("modals.votehistory.pregame")), 1)], 64))]), s[1] || (s[1] = a("td", {
                colspan: "6"
            }, null, -1))])) : p("", !0), a("tr", null, [a("td", null, d(i.dtFormat.format(c.timestamp)), 1), a("td", null, d(e.$t(...c.nominator)), 1), a("td", null, d(e.$t(...c.nominee)), 1), a("td", null, d(e.$t(`modals.votehistory.${c.type}`)), 1), a("td", null, d(c.votes), 1), a("td", null, [v(d(c.majority) + " ", 1), b(l, {
                icon: c.votes >= c.majority ? "check-circle" : "circle"
            }, null, 8, ["icon"])]), a("td", Yw, [(r(!0),
            u(_, null, B(c.voters, ([m,A], f) => (r(),
            u("span", {
                key: f
            }, [v(d(e.$t(...m)) + " ", 1), A !== 1 ? (r(),
            u(_, {
                key: 0
            }, [v("(" + d(A) + ")", 1)], 64)) : p("", !0)]))), 128))])])], 64))), 128))])])]),
            _: 1
        })) : p("", !0)]),
        _: 1
    })
}
const $w = O(Zw, [["render", Jw], ["__scopeId", "data-v-619f308a"]])
  , xw = {
    components: {
        Token: fe,
        Modal: se
    },
    computed: {
        ...I(["modal", "npcs", "grimoire", "players", "definitions"]),
        ...D("user", ["isStoryteller"]),
        filteredNPCs() {
            const e = {};
            return this.npcs.forEach(s => {
                this.players.npcs.some(t => t.id === s.id) || (e[s.team] || (e[s.team] = []),
                e[s.team].push(s))
            }
            ),
            e
        },
        availableTabs() {
            const e = [];
            return this.definitions.NPC_TEAMS.forEach(s => {
                [...this.npcs].some( ([,t]) => t.team === s && !this.players.npcs.some(n => n.id === t.id)) && e.push(s)
            }
            ),
            e
        }
    },
    methods: {
        setNPC(e) {
            this.isStoryteller && (this.$store.commit("players/setNPC", {
                npc: e
            }),
            this.toggleModal(this.modal),
            this.setTab({
                tab: "npcs",
                value: !0
            }))
        },
        ...j(["toggleModal", "setTab"])
    }
}
  , e1 = {
    class: "tokens"
}
  , s1 = ["onClick"]
  , t1 = {
    class: "tokens"
}
  , i1 = ["onClick"];
function o1(e, s, t, n, i, o) {
    const l = k("Token")
      , g = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "npc" && o.availableTabs.length && e.isStoryteller ? (r(),
        C(g, {
            key: 0,
            onClose: s[0] || (s[0] = c => e.toggleModal(e.modal)),
            class: "npc",
            tabs: o.availableTabs.map(c => e.$t(`grimoire.${c}`, 2))
        }, {
            header: S( () => [v(d(e.$t("modals.npc.title")), 1)]),
            "tab-0": S( () => [a("ul", e1, [(r(!0),
            u(_, null, B(o.filteredNPCs[o.availableTabs[0]], c => (r(),
            u("li", {
                key: c.id,
                onClick: h => o.setNPC(c)
            }, [b(l, {
                role: c
            }, null, 8, ["role"])], 8, s1))), 128))])]),
            "tab-1": S( () => [a("ul", t1, [(r(!0),
            u(_, null, B(o.filteredNPCs[o.availableTabs[1]], c => (r(),
            u("li", {
                key: c.id,
                onClick: h => o.setNPC(c)
            }, [b(l, {
                role: c
            }, null, 8, ["role"])], 8, i1))), 128))])]),
            _: 1
        }, 8, ["tabs"])) : p("", !0)]),
        _: 1
    })
}
const n1 = O(xw, [["render", o1], ["__scopeId", "data-v-d0319fe3"]])
  , ma = "/assets/logo-active-vWSLSz2M.webp"
  , Re = "/assets/logo-sheet-sczFT2x6.webp"
  , ha = "/assets/logo-Cvk6rQBD.webp"
  , pa = "/assets/logo-active-DFblTCBY.webp"
  , Aa = "/assets/logo-label-q983_f8F.webp"
  , De = "/assets/logo-sheet-B0nzVvhl.webp"
  , ba = "/assets/logo-Dh6MJCdH.webp"
  , fa = "/assets/logo-label-q983_f8F.webp"
  , Ee = "/assets/logo-sheet-B0nzVvhl.webp"
  , va = "/assets/logo-active-C9GcuLvL.webp"
  , Ne = "/assets/logo-sheet-D4VPR8cb.webp"
  , _a = "/assets/logo-n5SKFmif.webp"
  , ya = "/assets/logo-KB4tGbUB.webp"
  , wa = "/assets/logo-active-BuHUu0O7.webp"
  , Be = "/assets/logo-sheet-Bp7C3A9N.webp"
  , ka = "/assets/logo-C9OJVjpP.webp"
  , a1 = "https://json-schema.org/draft/2020-12/schema"
  , r1 = "https://raw.githubusercontent.com/ThePandemoniumInstitute/botc-release/main/script-schema.json"
  , l1 = "array"
  , c1 = "Blood on the Clocktower Custom Script"
  , d1 = 5
  , u1 = 201
  , g1 = JSON.parse(`{"oneOf":[{"type":"object","title":"Script Character","required":["id","name","team","ability"],"additionalProperties":false,"properties":{"id":{"type":"string","title":"Character ID, alphanumeric lowercase","maxLength":50,"examples":["washerwoman","lilmonsta","fanggu"]},"name":{"type":"string","title":"Character name","maxLength":30,"examples":["Washer Woman","Lil' Monsta","Fang-Gu"]},"image":{"oneOf":[{"type":"string","format":"uri","title":"Character icon","examples":["https://i.imgur.com/character-icon.png"]},{"type":"array","title":"Set of character icon URLs","description":"For non-traveller characters, the icons should be regular alignment and flipped alignment, for travellers they should be unaligned, good alignment and evil alignment","minItems":1,"maxItems":3,"items":{"type":"string","format":"uri"},"examples":[["https://imgur.com/townsfolk.png","https://imgur.com/townsfolk_evil.png"],["https://imgur.com/minion.png","https://imgur.com/minion_good.png"],["https://imgur.com/traveller.png","https://imgur.com/traveller_good.png","https://imgur.com/traveller_evil.png"]]}]},"team":{"type":"string","title":"Character team","enum":["townsfolk","outsider","minion","demon","traveller","fabled","loric"]},"edition":{"type":"string","title":"The edition ID","maxLength":50,"examples":["tb","bmr","snv","fallofrome"]},"ability":{"type":"string","title":"Character ability","maxLength":250,"examples":["You start knowing that 1 of 2 players is a particular Townsfolk.","Each night, Minions choose who babysits Lil' Monsta's token & \\"is the Demon\\". A player dies each night*. [+1 Minion]","Each night*, choose a player: they die. The 1st Outsider this kills becomes an evil Fang Gu & you die instead. [+1 Outsider]"]},"flavor":{"type":"string","title":"Character flavor text","maxLength":500,"examples":["Bloodstains on a dinner jacket? No, this is cooking sherry. How careless.","Certainly madam, under normal circumstances, you may borrow the Codex Malificarium from the library vaults. However, you do not seem to be a member.","It is a fine night for a stroll, wouldn't you say, Mister Morozov? Or should I say... BARON Morozov?"]},"firstNight":{"type":"number","title":"First night wake-up priority. 0 means this character doesn't wake during the first night.","examples":[37,0,15]},"firstNightReminder":{"type":"string","title":"First night Storyteller reminder","maxLength":500,"examples":["Show the Townsfolk character token. Point to both the *TOWNSFOLK* and *WRONG* players.","Wake all Minions, allow them to choose a babysitter :reminder:",""]},"otherNight":{"type":"number","title":"Other nights wake-up priority. 0 means this character doesn't wake during other nights.","examples":[0,10,15]},"otherNightReminder":{"type":"string","title":"Other nights Storyteller reminder","maxLength":500,"examples":["","Wake all Minions, allow them to choose a babysitter :reminder: A player might die :reminder:","The Fang Gu chooses a player. :reminder: If they chose an Outsider (once only): Replace the Outsider token with the spare Fang Gu token. Put the Fang Gu to sleep. Wake the target. Show the *YOU ARE* and Fang Gu tokens & give a thumbs-down. :reminder:"]},"reminders":{"type":"array","maxItems":20,"default":[],"title":"Character reminder tokens","items":{"type":"string","maxLength":30,"examples":["Townsfolk","Wrong","Dead","Is The Demon"]}},"remindersGlobal":{"type":"array","maxItems":20,"default":[],"title":"Global character reminder tokens, which will be selectable even when the character is not in play.","items":{"type":"string","maxLength":25,"examples":["Drunk","Is The Philosopher"]}},"setup":{"type":"boolean","title":"Whether this character has a ability that is relevant for the game setup.","default":false},"jinxes":{"type":"array","title":"Jinxes with other characters on this script","items":{"type":"object","title":"An individual Jinx pair","required":["id","reason"],"properties":{"id":{"type":"string","title":"The ID of the other character this one is jinxed with.","maxLength":50,"examples":["spy","fanggu","lilmonsta"]},"reason":{"type":"string","title":"The Jinx explanation","maxLength":500,"examples":["If the Cannibal gains the Butler ability, the Cannibal learns this.","The Mathematician learns if the Lunatic attacks a different player(s) than the real Demon attacked."]}}}},"special":{"type":"array","title":"Special app integration features for this character","items":{"type":"object","title":"A special app integration feature","required":["name","type"],"properties":{"type":{"type":"string","title":"The integration type, where the feature will be used.","description":"Currently supported values are:\\n selection - during character selection,\\n signal - during night signaling,\\n ability - when clicking on the character token,\\n vote - during a vote,\\n reveal - at the end of the game, before characters are revealed,\\n player - an ability that can be initiated by the player","enum":["selection","ability","signal","vote","reveal","player"]},"name":{"type":"string","title":"The feature name reference","description":"This is a list of the currently implemented special features and will be growing over time.","enum":["grimoire","pointing","ghost-votes","distribute-roles","bag-disabled","bag-duplicate","multiplier","hidden","replace-character","player","card","open-eyes"]},"value":{"oneOf":[{"type":"string","title":"Special ability text value","maxLength":50,"description":"The text value that will be used by the special ability."},{"type":"number","title":"Special ability number value","description":"The numeric value that will be used by the special ability."}]},"time":{"type":"string","title":"At which point during the game can the ability be used","enum":["pregame","day","night","firstNight","firstDay","otherNight","otherDay"]},"global":{"type":"string","title":"Global ability scope","description":"If it's a global ability that can be used without the character being in play, this property defines on which characters it can be used. This does not work on non-player characters, because they are not considered to be on the Script.","enum":["townsfolk","outsider","minion","demon","traveller","dead"]}},"examples":[{"type":"player","name":"open-eyes","time":"night"},{"type":"signal","name":"card","value":"This is a Custom ST Card"},{"type":"ability","name":"pointing","time":"night","global":"minion"},{"type":"vote","name":"multiplier","value":"3"}]}}},"examples":[{"id":"washerwoman","name":"Washerwoman","edition":"tb","team":"townsfolk","firstNightReminder":"Show the Townsfolk character token. Point to both the *TOWNSFOLK* and *WRONG* players.","otherNightReminder":"","reminders":["Townsfolk","Wrong"],"setup":false,"ability":"You start knowing that 1 of 2 players is a particular Townsfolk.","flavor":"Bloodstains on a dinner jacket? No, this is cooking sherry. How careless.","firstNight":37,"otherNight":0}]},{"type":"string","title":"Official character ID","maxLength":20,"description":"If you want to include official characters in the script, it is sufficient to provide their ID as a string","examples":["soldier","imp","washerwoman"]},{"type":"object","title":"Script Metadata","required":["id","name"],"properties":{"id":{"type":"string","title":"The ID property must be called '_meta' for the Script metadata object.","enum":["_meta"]},"name":{"type":"string","title":"The script name","maxLength":50,"examples":["Fall of Rome","My Custom Homebrew"]},"author":{"type":"string","title":"The script author","maxLength":50,"examples":["The Pandemonium Institute","Your Name"]},"logo":{"type":"string","format":"uri","maxLength":250,"title":"The script logo image","examples":["https://imgur.com/logo.png"]},"hideTitle":{"type":"boolean","title":"Whether the script title / author should be hidden on the app"},"background":{"type":"string","format":"uri","maxLength":250,"title":"The script background image","examples":["https://imgur.com/background.jpg"]},"almanac":{"type":"string","format":"uri","maxLength":250,"title":"A link to the script's almanac page","examples":["https://beardytas.com/garden-of-djinn/the-ballad-of-seat-7/"]},"bootlegger":{"type":"array","title":"A list of homebrew rules that are to be used for this script","description":"Any (optional) homebrew rules that should be shown on the character sheet can be listed here, up to a limit of 10.","maxItems":10,"items":{"type":"string","title":"A homebrew rule","examples":["If the Snake Charmer swaps with the Demon on the first night, they learn their Minions and Bluffs instead of the original Demon."]}},"firstNight":{"type":"array","title":"The relative First Night order of characters on this script.","description":"A custom first night order for this script can be provided in the form of an array here, with optional special entries for 'dusk', 'minioninfo', 'demoninfo' and 'dawn'.","maxItems":200,"items":{"type":"string","title":"Character ID of an on-script character in the first night order"},"examples":[["dusk","minioninfo","demoninfo","poisoner","spy","washerwoman","librarian","investigator","chef","empath","fortuneteller","butler","dawn"]]},"otherNight":{"type":"array","title":"The relative Other Nights order of characters on this script.","description":"A custom other night order for this script can be provided in the form of an array here, with optional special entries for 'dusk' and 'dawn'.","maxItems":200,"items":{"type":"string","title":"Character ID of an on-script character in the other night order"},"examples":[["dusk","poisoner","monk","spy","scarletwoman","imp","ravenkeeper","undertaker","empath","fortuneteller","butler","dawn"]]}},"examples":[{"id":"_meta","name":"Deadly Penance Day","author":"TPI","logo":"https://url.to/your/logo.png"}]},{"type":"object","title":"Official Character (deprecated)","deprecated":true,"required":["id"],"additionalProperties":false,"properties":{"id":{"type":"string","maxLength":20,"title":"Official character ID","examples":["soldier","imp","washerwoman"]}}}]}`)
  , m1 = {
    $schema: a1,
    $id: r1,
    type: l1,
    default: [],
    title: c1,
    minItems: d1,
    maxItems: u1,
    items: g1
}
  , h1 = [{
    id: "_meta",
    author: "josh :)",
    name: "Irrational Behaviour"
}, "noble", "librarian", "shugenja", "high_priestess", "balloonist", "village_idiot", "fortune_teller", "monk", "oracle", "seamstress", "alsaahir", "banshee", "cannibal", "hermit", "mutant", "zealot", "puzzlemaster", "cerenovus", "poisoner", "wraith", "wizard", "witch", "lord_of_typhon", "fang_gu", "vigormortis"]
  , Al = new Ud;
Hd(Al);
const zr = Al.compile(m1)
  , p1 = {
    components: {
        Modal: se
    },
    inject: ["bindShortcut", "unbindShortcut"],
    data() {
        return {
            isFileDrop: !1,
            isCustomEdition: !1,
            history: localStorage.getItem("custom-script-history"),
            limit: 512 * 1024,
            theme: {
                generic: -1
            },
            releaseScript: h1
        }
    },
    computed: {
        ...I(["modal", "edition", "roles", "npcs", "editionsAvailable", "players", "grimoire", "session", "settings"]),
        ...D(["isHomebrew", "isJinxed"]),
        currentEditionId() {
            return this.edition.isOfficial ? this.edition.id : "custom"
        }
    },
    methods: {
        ...j(["toggleModal", "setTab"]),
        async clearGrimoire() {
            try {
                await this.$store.dispatch("openDialogue", {
                    type: "confirm",
                    title: "modals.edition.clear_title",
                    text: "modals.edition.clear_description"
                }) && this.$store.dispatch("players/clearRoles")
            } catch {} finally {
                this.toggleModal({
                    name: "edition"
                })
            }
        },
        getEditionLogo(e) {
            return new URL(Object.assign({
                "/src/assets/editions/bmr/logo-active.webp": ma,
                "/src/assets/editions/bmr/logo-sheet.webp": Re,
                "/src/assets/editions/bmr/logo.webp": ha,
                "/src/assets/editions/custom/logo-active.webp": pa,
                "/src/assets/editions/custom/logo-label.webp": Aa,
                "/src/assets/editions/custom/logo-sheet.webp": De,
                "/src/assets/editions/custom/logo.webp": ba,
                "/src/assets/editions/homebrew/logo-label.webp": fa,
                "/src/assets/editions/homebrew/logo-sheet.webp": Ee,
                "/src/assets/editions/snv/logo-active.webp": va,
                "/src/assets/editions/snv/logo-sheet.webp": Ne,
                "/src/assets/editions/snv/logo.webp": _a,
                "/src/assets/editions/taf/logo.webp": ya,
                "/src/assets/editions/tb/logo-active.webp": wa,
                "/src/assets/editions/tb/logo-sheet.webp": Be,
                "/src/assets/editions/tb/logo.webp": ka
            })[`/src/assets/editions/${e}/logo${this.currentEditionId === e ? "-active" : ""}.webp`],import.meta.url).href
        },
        getEditionTheme(e, s) {
            return new URL(Object.assign({
                "/src/assets/editions/bmr/background1t.webp": $e,
                "/src/assets/editions/bmr/background2t.webp": xe,
                "/src/assets/editions/bmr/background3t.webp": es,
                "/src/assets/editions/bmr/background4t.webp": ss,
                "/src/assets/editions/bmr/background5t.webp": ts,
                "/src/assets/editions/bmr/background6t.webp": is,
                "/src/assets/editions/custom/background1t.webp": os,
                "/src/assets/editions/custom/background2t.webp": ns,
                "/src/assets/editions/custom/background3t.webp": as,
                "/src/assets/editions/custom/background4t.webp": rs,
                "/src/assets/editions/custom/background5t.webp": ls,
                "/src/assets/editions/custom/background6t.webp": cs,
                "/src/assets/editions/custom/background7t.webp": ds,
                "/src/assets/editions/custom/background8t.webp": us,
                "/src/assets/editions/snv/background1t.webp": gs,
                "/src/assets/editions/snv/background2t.webp": ms,
                "/src/assets/editions/snv/background3t.webp": hs,
                "/src/assets/editions/snv/background4t.webp": ps,
                "/src/assets/editions/snv/background5t.webp": As,
                "/src/assets/editions/snv/background6t.webp": bs,
                "/src/assets/editions/tb/background1t.webp": fs,
                "/src/assets/editions/tb/background2t.webp": vs,
                "/src/assets/editions/tb/background3t.webp": _s,
                "/src/assets/editions/tb/background4t.webp": ys,
                "/src/assets/editions/tb/background5t.webp": ws,
                "/src/assets/editions/tb/background6t.webp": ks
            })[`/src/assets/editions/${e}/background${s}t.webp`],import.meta.url).href
        },
        getGenericTheme(e) {
            return new URL(Object.assign({
                "/src/assets/background1t.webp": Cs,
                "/src/assets/background2t.webp": Ss,
                "/src/assets/background3t.webp": Ps
            })[`/src/assets/background${e}t.webp`],import.meta.url).href
        },
        async checkNPCs(e=[]) {
            const s = this.npcs.get("bootlegger")
              , t = this.players.npcs.indexOf(s);
            if (this.isHomebrew) {
                if (t < 0 && (this.$store.commit("players/setNPC", {
                    npc: s
                }),
                this.setTab({
                    tab: "npcs",
                    value: !0
                }),
                !this.settings.general.isImageOptIn))
                    try {
                        await this.$store.dispatch("openDialogue", {
                            type: "alert",
                            title: "modals.edition.homebrew_title",
                            text: "modals.edition.homebrew_description"
                        })
                    } catch {}
            } else {
                const i = this.players.npcs.filter(o => o.id !== "bootlegger" && this.npcs.has(o.id));
                e.some( ({id: o}) => o === "bootlegger") && i.push(this.npcs.get("bootlegger")),
                i.length !== this.players.npcs.length && this.$store.commit("players/setNPC", {
                    npc: i
                })
            }
            const n = this.players.npcs.findIndex(i => i.id === "djinn");
            n > -1 && !this.isJinxed ? this.$store.commit("players/setNPC", {
                index: n
            }) : n < 0 && this.isJinxed && (this.$store.commit("players/setNPC", {
                npc: this.npcs.get("djinn")
            }),
            this.setTab({
                tab: "npcs",
                value: !0
            }))
        },
        checkSessionDifficulty() {
            var e;
            if (this.session.sessionId && ((e = this.edition.level) == null ? void 0 : e.toLowerCase()) !== "beginner" && (this.session.meta.tags.difficulty === 2 || this.session.meta.tags.difficulty === 0 && this.edition.id === "homebrew")) {
                const s = Object.assign({}, this.session.meta.tags);
                s.difficulty = this.edition.id === "homebrew" ? 1 : 0,
                this.$store.commit("session/updateMeta", {
                    tags: s
                })
            }
        },
        async selectEdition(e) {
            if (e.id === "custom") {
                this.isCustomEdition ? this.$refs.upload.click() : this.isCustomEdition = !0;
                return
            }
            this.isCustomEdition = !1;
            const s = this.theme[e.id] || this.theme.generic || 0;
            this.$store.dispatch("players/clearRoles", {
                clearNPCs: !0
            }),
            this.$store.commit("setEdition", {
                edition: e,
                theme: s
            }),
            await this.checkNPCs(),
            this.checkSessionDifficulty(),
            this.toggleModal(this.modal)
        },
        selectTheme(e, s) {
            this.theme = {
                [e.id]: s
            },
            this.currentEditionId !== e.id && e.id !== "generic" ? this.selectEdition(e) : (this.$store.commit("setTheme", {
                theme: s
            }),
            this.toggleModal(this.modal))
        },
        handleFileDrop(e) {
            if (this.isFileDrop = !1,
            e.dataTransfer.items) {
                for (let s = 0; s < e.dataTransfer.items.length; s++)
                    if (e.dataTransfer.items[s].kind === "file")
                        return this.handleUpload(e.dataTransfer.items[s].getAsFile())
            } else
                e.dataTransfer.files.length && this.handleUpload(e.dataTransfer.files[0])
        },
        async handlePaste(e) {
            if (this.modal.name === "edition")
                try {
                    if (e || (e = await navigator.clipboard.readText()),
                    e.length > this.limit) {
                        this.$store.dispatch("showError", ["modals.edition.error_size", ["modals.edition.error_size_text", [(e.length / (1024 * 1024)).toFixed(2), (this.limit / (1024 * 1024)).toFixed(2)]]]);
                        return
                    }
                    const s = JSON.parse(e);
                    await this.parseRoles(s)
                } catch {}
        },
        handleUpload(e) {
            var t;
            const s = ((t = this.$refs.upload) == null ? void 0 : t.files[0]) || e;
            if (s && s.size) {
                if (s.size > this.limit) {
                    this.$refs.upload && (this.$refs.upload.value = ""),
                    this.$store.dispatch("showError", ["modals.edition.error_size", ["modals.edition.error_size_text", [(s.size / (1024 * 1024)).toFixed(2), (this.limit / (1024 * 1024)).toFixed(2)]]]);
                    return
                }
                const n = new FileReader;
                n.addEventListener("load", async () => {
                    this.$refs.upload && (this.$refs.upload.value = "");
                    try {
                        const i = JSON.parse(n.result);
                        await this.parseRoles(i)
                    } catch (i) {
                        await this.$store.dispatch("openDialogue", {
                            type: "alert",
                            title: "modals.edition.error_custom",
                            text: i.message
                        }),
                        this.toggleModal(this.modal)
                    }
                }
                ),
                n.readAsText(s)
            }
        },
        async promptURL() {
            try {
                const e = await this.$store.dispatch("openDialogue", {
                    type: "prompt",
                    title: "modals.edition.custom_title",
                    placeholder: "modals.edition.custom_placeholder",
                    value: this.history,
                    text: "modals.edition.custom_text"
                });
                e ? await this.handleURL(e) : this.toggleModal(this.modal)
            } catch (e) {
                e && await this.$store.dispatch("openDialogue", {
                    type: "alert",
                    title: "modals.edition.error_custom",
                    text: e.message
                }),
                this.toggleModal(this.modal)
            }
        },
        async handleURL(e, s) {
            try {
                const t = await fetch(e);
                if (t && t.json) {
                    const n = await t.json();
                    await this.parseRoles(n, s),
                    this.roles.size && !this.edition.isOfficial && (localStorage.setItem("custom-script-history", e),
                    this.history = e)
                }
            } catch (t) {
                throw new Error(t.message)
            }
        },
        async parseRoles(e, s) {
            var g;
            if (!e || !e.length)
                return;
            if (e.forEach(c => {
                (c == null ? void 0 : c.team) === "traveler" && (c.team = "traveller")
            }
            ),
            e.filter(c => c.id !== "_meta").length > 200) {
                this.$store.dispatch("openDialogue", {
                    type: "alert",
                    title: "modals.edition.error_character",
                    text: "modals.edition.error_character_text"
                });
                return
            }
            if (!zr(e))
                try {
                    await this.$store.dispatch("openDialogue", {
                        type: "alert",
                        title: "modals.edition.error_script",
                        text: "modals.edition.error_script_text",
                        pre: zr.errors.map( ({instancePath: c, message: h, params: m}) => `${c} ${h} (${Object.values(m).join(", ")})`).join(`
`)
                    })
                } catch {}
            e = e.map(c => typeof c == "string" ? {
                id: c
            } : c);
            let n = s || this.theme.custom || this.theme.generic || 0;
            const i = e.findIndex( ({id: c}) => c === "_meta");
            let o = {};
            if (i > -1) {
                const c = P => (P == null ? void 0 : P.toLocaleLowerCase().replace(/[^a-z0-9]/g, "")) || ""
                  , {background: h, logo: m, author: A, name: f, firstNight: T, otherNight: w, hideTitle: V, bootlegger: N, almanac: U} = e.splice(i, 1).pop();
                o = {
                    background: h,
                    logo: m,
                    author: A,
                    name: f,
                    hideTitle: V,
                    bootlegger: N,
                    almanac: U,
                    firstNight: T == null ? void 0 : T.map(c),
                    otherNight: w == null ? void 0 : w.map(c)
                },
                n <= 0 && m && (n = 1)
            }
            if (this.$store.commit("setCustomRoles", e),
            e.some( ({id: c}) => !this.roles.has(c) && !this.npcs.has(c))) {
                const c = [];
                e.forEach( ({id: h}) => {
                    !this.roles.has(h) && !this.npcs.has(h) && c.push(h)
                }
                ),
                await this.$store.dispatch("openDialogue", {
                    type: "alert",
                    title: "modals.edition.error_custom",
                    text: ["modals.edition.error_loading", [c.join(", ")]]
                }),
                this.$store.commit("setEdition", {
                    edition: {
                        id: "tb"
                    }
                }),
                await this.checkNPCs();
                return
            }
            this.$store.dispatch("players/clearRoles", {
                clearNPCs: !0
            });
            const l = Object.assign({}, o, {
                isOfficial: !1
            });
            if (l.id = [...this.roles.values(), ...this.npcs.values()].some( ({isCustom: c}) => c) || (g = l.bootlegger) != null && g.length ? "homebrew" : "custom",
            this.$store.commit("setEdition", {
                edition: l,
                theme: n
            }),
            this.checkSessionDifficulty(),
            e.some( ({id: c}) => this.npcs.has(c))) {
                const c = [];
                e.forEach( ({id: h}) => {
                    this.npcs.has(h) && c.push(this.npcs.get(h))
                }
                ),
                this.$store.commit("players/setNPC", {
                    npc: c
                }),
                this.setTab({
                    tab: "npcs",
                    value: !0
                }),
                await this.checkNPCs(c)
            } else {
                const c = this.players.npcs.filter(h => !h.isCustom);
                c.length !== this.players.npcs.length && this.$store.commit("players/setNPC", {
                    npc: c
                }),
                await this.checkNPCs()
            }
            this.toggleModal(this.modal)
        }
    },
    watch: {
        "modal.name"() {
            this.modal.name === "edition" && (this.isFileDrop = !1,
            this.theme = {
                [this.grimoire.theme > 0 ? this.currentEditionId : "generic"]: this.grimoire.theme
            })
        }
    },
    mounted() {
        this.bindShortcut("paste", this.handlePaste.bind(this))
    },
    beforeUnmount() {
        this.unbindShortcut("paste")
    }
}
  , A1 = ["onClick"]
  , b1 = ["src"]
  , f1 = {
    class: "description"
}
  , v1 = {
    class: "footer"
}
  , _1 = {
    key: 1,
    class: "button-group"
}
  , y1 = {
    class: "button"
}
  , w1 = {
    key: 2,
    class: "themes"
}
  , k1 = ["src", "onClick"]
  , C1 = {
    class: "generic"
}
  , S1 = {
    class: "scripts"
}
  , P1 = {
    class: "right"
}
  , T1 = ["src", "onClick"];
function I1(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "edition" ? (r(),
        C(g, {
            key: 0,
            class: "editions",
            onClose: s[10] || (s[10] = c => e.toggleModal(e.modal)),
            onDrop: s[11] || (s[11] = M( () => {}
            , ["prevent"])),
            onDragover: s[12] || (s[12] = M( () => {}
            , ["prevent"])),
            onTouchstartPassive: s[13] || (s[13] = M( () => {}
            , ["stop"])),
            onTouchendPassive: s[14] || (s[14] = M( () => {}
            , ["stop"]))
        }, {
            default: S( () => {
                var c;
                return [b(q, {
                    name: "fade"
                }, {
                    default: S( () => [i.isFileDrop ? (r(),
                    u("div", {
                        key: 0,
                        class: "filedrop",
                        onDrop: s[0] || (s[0] = M(h => o.handleFileDrop(h), ["prevent"])),
                        onDragleave: s[1] || (s[1] = h => i.isFileDrop = !1)
                    }, [b(l, {
                        icon: "file-upload"
                    }), a("div", null, d(e.$t("modals.edition.upload_custom")), 1)], 32)) : p("", !0)]),
                    _: 1
                }), a("h3", null, d(e.$t("modals.edition.title")), 1), a("ul", {
                    class: "editions",
                    onDragenter: s[6] || (s[6] = M(h => i.isFileDrop = !0, ["prevent"]))
                }, [(r(!0),
                u(_, null, B(e.editionsAvailable, ([h,m]) => (r(),
                u("li", {
                    class: y(["edition", ["edition-" + h, o.currentEditionId === h ? "selected" : ""]]),
                    key: h,
                    onClick: A => o.selectEdition(m)
                }, [a("img", {
                    src: o.getEditionLogo(h),
                    alt: "",
                    class: "logo",
                    onDragstart: s[2] || (s[2] = M( () => {}
                    , ["prevent"]))
                }, null, 40, b1), a("div", f1, [a("h4", {
                    style: L({
                        color: m.color
                    })
                }, d(e.$t(`editions.${m.id}.name`)), 5), a("p", null, d(e.$t(`editions.${m.id}.description`)), 1), a("div", v1, [m.id !== "custom" || !i.isCustomEdition ? (r(),
                u(_, {
                    key: 0
                }, [a("b", null, d(e.$t("modals.edition.difficulty")), 1), v(" " + d(e.$t(`modals.edition.difficulty_${m.level}`)), 1)], 64)) : (r(),
                u("div", _1, [a("div", y1, [b(l, {
                    icon: "file-upload"
                }), v(" " + d(e.$t("modals.edition.button_upload")), 1)]), a("div", {
                    class: "paste button",
                    onClick: s[3] || (s[3] = M(A => o.handlePaste(), ["stop"]))
                }, [b(l, {
                    icon: "clipboard"
                }), v(" " + d(e.$t("modals.edition.button_paste")), 1)]), a("div", {
                    class: "button",
                    onClick: s[4] || (s[4] = M( (...A) => o.promptURL && o.promptURL(...A), ["stop"]))
                }, [b(l, {
                    icon: "link"
                }), v(" " + d(e.$t("modals.edition.button_url")), 1)])])), m.themes ? (r(),
                u("div", w1, [a("b", null, d(e.$t("modals.edition.theme")), 1), (r(!0),
                u(_, null, B(m.themes, A => (r(),
                u("img", {
                    class: y({
                        selected: i.theme[h] === A,
                        thumb: 1
                    }),
                    src: o.getEditionTheme(h, A),
                    key: A,
                    alt: "",
                    onClick: M(f => o.selectTheme(m, A), ["stop"]),
                    onDragstart: s[5] || (s[5] = M( () => {}
                    , ["prevent"]))
                }, null, 42, k1))), 128))])) : p("", !0)])])], 10, A1))), 128))], 32), a("input", {
                    type: "file",
                    ref: "upload",
                    accept: "application/json",
                    onChange: s[7] || (s[7] = h => o.handleUpload())
                }, null, 544), a("div", C1, [a("ul", S1, [a("li", null, [a("b", null, d(e.$t("modals.edition.release_script", {
                    role: "Wraith"
                })), 1), a("div", {
                    class: "button primary",
                    onClick: s[8] || (s[8] = h => o.parseRoles(i.releaseScript, 6))
                }, d((c = i.releaseScript.find( ({id: h}) => h === "_meta")) == null ? void 0 : c.name), 1)])]), a("div", {
                    class: "button",
                    onClick: s[9] || (s[9] = h => o.clearGrimoire())
                }, [b(l, {
                    icon: "trash-alt"
                }), v(" " + d(e.$t("modals.edition.button_clear")), 1)]), a("div", P1, [a("div", null, [a("b", null, d(e.$t("modals.edition.theme_generic")), 1), (r(),
                u(_, null, B(3, h => a("img", {
                    class: y({
                        selected: i.theme.generic === -h,
                        thumb: 1
                    }),
                    src: o.getGenericTheme(h),
                    key: h,
                    alt: "",
                    onClick: m => o.selectTheme({
                        id: "generic"
                    }, -h)
                }, null, 10, T1)), 64))])])])]
            }
            ),
            _: 1
        })) : p("", !0)]),
        _: 1
    })
}
const M1 = O(p1, [["render", I1], ["__scopeId", "data-v-63f3b6a9"]])
  , R1 = {
    components: {
        FontAwesomeIcon: Y,
        Token: fe,
        Modal: se
    },
    data() {
        return {
            game: ze,
            pages: {},
            rolesSent: !1,
            rolesShuffled: !1
        }
    },
    computed: {
        ...I(["roles", "modal", "session", "rolesSelected", "definitions"]),
        ...I("players", ["players", "npcs"]),
        ...D("players", ["nonTravellers"]),
        ...D("user", ["isStoryteller"]),
        rolesByTeam() {
            const e = {};
            return this.roles.forEach(s => {
                e[s.team] || (e[s.team] = []),
                e[s.team].push(s)
            }
            ),
            this.definitions.NPC_TEAMS.forEach(s => delete e[s]),
            delete e.traveller,
            this.rolesShuffled && Object.keys(e).forEach(s => {
                e[s] = e[s].map(t => [Math.random(), t]).sort( (t, n) => t[0] - n[0]).map(t => t[1])
            }
            ),
            e
        },
        hasSelectedSetupRoles() {
            return this.rolesSelected.some(e => {
                var s;
                return (s = this.roles.get(e)) == null ? void 0 : s.setup
            }
            )
        },
        hasGardener() {
            return this.npcs.some(e => e.id === "gardener")
        },
        hasTor() {
            return this.npcs.some(e => e.id === "tor")
        }
    },
    methods: {
        ...j(["toggleModal", "toggleRole"]),
        updateRoleSelection() {
            this.hasGardener && this.players.forEach(e => {
                e.role.id && !this.rolesSelected.includes(e.role.id) && e.role.team !== "traveller" && this.toggleRole(e.role)
            }
            )
        },
        selectRole(e, s) {
            var n;
            const t = this.rolesSelected.filter(i => e.id === i).length;
            s && (t >= 15 || t >= this.players.length) || (!((n = e.special) != null && n.some(i => i.type === "selection" && i.name === "bag-disabled")) || this.rolesSelected.includes("atheist") || this.rolesSelected.includes(e.id)) && this.toggleRole({
                id: e.id,
                add: s
            })
        },
        assignRoles() {
            if (this.nonTravellers && this.rolesSelected.length !== this.nonTravellers || this.rolesSent || this.session.hook.name)
                return;
            this.rolesSent = !0;
            const e = this.rolesSelected.filter(i => this.roles.has(i)).map(i => this.roles.get(i)).map(i => [Math.random(), i]).sort( (i, o) => i[0] - o[0]).map(i => i[1])
              , s = ({role: i}) => i === "revolutionary"
              , t = e.some( ({id: i}) => i === "lunatic");
            let n;
            this.players.filter(i => i.reminders.some(s)).forEach(i => {
                if (!e.length)
                    return;
                i.alignment = null;
                const o = ["lunatic"]
                  , l = ["minion", "demon"]
                  , g = ["townsfolk", "outsider"];
                if (n) {
                    const c = e.findIndex( ({team: h, id: m}) => o.includes(m) !== n.includes(h) && (!t || h !== "demon"));
                    c > -1 ? i.role = e.splice(c, 1).pop() : i.role = {}
                } else {
                    let c = e.pop();
                    c.team === "demon" && t && (e.unshift(c),
                    c = e.pop()),
                    n = o.includes(c.id) !== l.includes(c.team) ? l : g,
                    i.role = c
                }
            }
            ),
            this.players.filter(i => i.reminders.some(s) ? !1 : this.hasGardener && e.includes(i.role) ? (e.splice(e.indexOf(i.role), 1),
            !1) : !0).forEach(i => {
                i.role.team !== "traveller" && e.length && (i.role = e.pop(),
                i.alignment = null)
            }
            ),
            this.$store.commit("players/setRoles", this.players),
            this.hasGardener || this.$store.dispatch("game/distributeRoles"),
            this.toggleModal(this.modal)
        }
    },
    watch: {
        "modal.name"() {
            this.modal.name === "roles" && (this.rolesSent = !1,
            this.updateRoleSelection())
        },
        rolesByTeam() {
            this.pages = {}
        }
    }
}
  , D1 = ["onClick"]
  , E1 = ["data-tooltip"]
  , N1 = ["onClick"]
  , B1 = ["onClick"]
  , V1 = {
    key: 1,
    class: "buttons"
}
  , O1 = {
    key: 0
}
  , j1 = {
    class: "button-group"
}
  , U1 = {
    key: 0,
    class: "warning"
};
function H1(e, s, t, n, i, o) {
    const l = k("i18n-t")
      , g = k("font-awesome-icon")
      , c = k("Token")
      , h = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.isStoryteller && e.modal.name === "roles" && e.nonTravellers >= 5 ? (r(),
        C(h, {
            key: 0,
            class: "roles",
            onClose: s[4] || (s[4] = m => e.toggleModal(e.modal))
        }, {
            header: S( () => [b(l, {
                keypath: "modals.roles.title",
                scope: "global"
            }, {
                default: S( () => [a("b", null, d(e.nonTravellers) + " " + d(e.$t("modals.roles.title_players")), 1)]),
                _: 1
            }), e.rolesSelected.length ? (r(),
            C(g, {
                key: 0,
                onClick: s[0] || (s[0] = m => e.toggleRole()),
                icon: "trash-alt",
                class: "clear",
                title: e.$t("modals.roles.clear")
            }, null, 8, ["title"])) : p("", !0)]),
            default: S( () => [(r(!0),
            u(_, null, B(o.rolesByTeam, (m, A) => {
                var f, T, w, V;
                return r(),
                u("ul", {
                    class: y(["tokens", A]),
                    key: A
                }, [i.pages[A] > 0 ? (r(),
                u("li", {
                    key: 0,
                    class: "paging up",
                    onClick: N => i.pages[A] -= 1
                }, [b(g, {
                    icon: "arrow-circle-up"
                })], 8, D1)) : p("", !0), a("li", {
                    class: y(["count", {
                        done: e.rolesSelected.filter(N => m.some(U => U.id === N)).length === i.game[e.nonTravellers - 5][A]
                    }]),
                    "data-tooltip": e.$t(`grimoire.${A}`, i.game[e.nonTravellers - 5][A])
                }, d(e.rolesSelected.filter(N => m.some(U => U.id === N)).length) + " / " + d((f = i.game[e.nonTravellers - 5][A]) != null ? f : "?"), 11, E1), ((T = i.pages[A]) != null ? T : 0) < Math.floor((m.length - 1) / 7) - 1 ? (r(),
                u("li", {
                    key: 1,
                    class: "paging down",
                    onClick: N => {
                        var U;
                        return i.pages[A] = ((U = i.pages[A]) != null ? U : 0) + 1
                    }
                }, [b(g, {
                    icon: "arrow-circle-down"
                })], 8, N1)) : p("", !0), (r(!0),
                u(_, null, B(m.slice(((w = i.pages[A]) != null ? w : 0) * 7, ((V = i.pages[A]) != null ? V : 0) * 7 + 14), N => {
                    var U, P;
                    return r(),
                    u("li", {
                        class: y({
                            selected: e.rolesSelected.includes(N.id),
                            disabled: (U = N.special) == null ? void 0 : U.some(E => E.type === "selection" && E.name === "bag-disabled")
                        }),
                        key: N.id,
                        onClick: E => o.selectRole(N)
                    }, [b(c, {
                        role: N,
                        class: "top"
                    }, null, 8, ["role"]), N.setup ? (r(),
                    C(g, {
                        key: 0,
                        class: "warning",
                        icon: "exclamation-triangle"
                    })) : p("", !0), (P = N.special) != null && P.some(E => E.type === "selection" && E.name === "bag-duplicate") || e.rolesSelected.includes("atheist") ? (r(),
                    u("div", V1, [b(g, {
                        icon: "minus-circle",
                        onClick: M(E => o.selectRole(N), ["stop"])
                    }, null, 8, ["onClick"]), e.rolesSelected.filter(E => N.id === E).length > 1 ? (r(),
                    u("span", O1, d(e.rolesSelected.filter(E => N.id === E).length), 1)) : p("", !0), b(g, {
                        icon: "plus-circle",
                        onClick: M(E => o.selectRole(N, !0), ["stop"])
                    }, null, 8, ["onClick"])])) : p("", !0)], 10, B1)
                }
                ), 128))], 2)
            }
            ), 128)), a("div", j1, [a("div", {
                class: y(["button primary", {
                    disabled: e.rolesSelected.length !== e.nonTravellers || e.session.hook.name
                }]),
                onClick: s[1] || (s[1] = (...m) => o.assignRoles && o.assignRoles(...m))
            }, [b(g, {
                icon: "theater-masks"
            }), s[5] || (s[5] = v("Â  ", -1)), e.session.sessionId && !o.hasGardener && !o.hasTor ? (r(),
            u(_, {
                key: 0
            }, [v(d(e.$t("modals.roles.button_distribute", [e.rolesSelected.length])), 1)], 64)) : (r(),
            u(_, {
                key: 1
            }, [v(d(e.$t("modals.roles.button_gardener", [e.rolesSelected.length])), 1)], 64))], 2), a("div", {
                class: "button",
                onClick: s[2] || (s[2] = m => i.rolesShuffled++)
            }, [b(g, {
                icon: "random"
            }), v(" " + d(e.$t("modals.roles.button_shuffle")), 1)]), a("div", {
                class: y(["button secondary", {
                    disabled: !i.rolesShuffled
                }]),
                onClick: s[3] || (s[3] = m => i.rolesShuffled = 0)
            }, [b(g, {
                icon: "undo"
            }), v(" " + d(e.$t("modals.roles.button_sort")), 1)], 2)]), o.hasSelectedSetupRoles ? (r(),
            u("div", U1, [b(g, {
                icon: "exclamation-triangle"
            }), a("span", null, d(e.$t("modals.roles.warning")), 1)])) : p("", !0)]),
            _: 1
        })) : p("", !0)]),
        _: 1
    })
}
const q1 = O(R1, [["render", H1], ["__scopeId", "data-v-23519577"]])
  , L1 = ["enter"]
  , z1 = ["1"]
  , G1 = ["2"]
  , W1 = ["3"]
  , F1 = ["backspace"]
  , Q1 = [" "]
  , Z1 = [" "]
  , X1 = ["t"]
  , K1 = ["n"]
  , Y1 = ["n"]
  , J1 = ["c"]
  , $1 = ["o"]
  , x1 = ["q"]
  , ek = ["/"]
  , sk = ["u"]
  , tk = ["z"]
  , ik = ["r"]
  , ok = ["g"]
  , nk = ["f"]
  , ak = ["v"]
  , rk = ["d"]
  , lk = ["."]
  , ck = [","]
  , dk = ["l"]
  , uk = ["1"]
  , gk = ["2"]
  , mk = ["3"]
  , hk = ["4"]
  , pk = ["5"]
  , Ge = {
    toggleWhisper: L1,
    acceptChat1: z1,
    acceptChat2: G1,
    acceptChat3: W1,
    leaveChat: F1,
    castVote: Q1,
    raiseHand: Z1,
    toggleTownSquare: X1,
    toggleNight: K1,
    toggleNightSignal: Y1,
    toggleReference: J1,
    toggleNightOrder: $1,
    modalSettings: x1,
    modalShortcuts: ek,
    modalUsers: sk,
    setTimer: tk,
    attentionGong: ik,
    revealGrimoire: ok,
    toggleFullscreen: nk,
    toggleVoteHistory: ak,
    toggleAudioDeafened: rk,
    toggleAudioMuted: lk,
    toggleVideoMuted: ck,
    leaveSession: dk,
    modeGather: uk,
    toggleEdition: gk,
    modalRules: mk,
    toggleNPCs: hk,
    toggleRoles: pk
}
  , Ts = "/assets/skull-BRKlHZep.webp"
  , Is = "/assets/skull-DUUKiCc5.webp"
  , Ms = "/assets/skull-DHMkfNj5.webp"
  , Rs = "/assets/skull-DFNKB9VY.webp"
  , Ds = "/assets/skull-DINexilz.webp"
  , Ak = {
    name: "User",
    components: {
        FontAwesomeIcon: Y,
        PlayerAvatar: ca
    },
    props: {
        user: {
            type: Object,
            required: !0,
            default: () => ({})
        },
        stats: {
            type: Object,
            required: !0,
            default: () => ({})
        }
    },
    computed: {
        ...I(["editionsAvailable", "rolesAvailable", "session"]),
        ...I("user", {
            localUser: "user",
            accessToken: "accessToken",
            levels: "levels"
        }),
        ...I("chat", ["userOverrides"]),
        ...D("players", ["seatedPlayerMap"]),
        ...D("user", ["isModerator"]),
        ...D(["roleIconURL"]),
        isEditable() {
            return this.localUser.id === String(this.user.id)
        },
        availableAvatars() {
            var s, t, n;
            const e = [].concat((s = this.localUser.cosmetics) == null ? void 0 : s.avatars);
            ((t = this.localUser.cosmetics) == null ? void 0 : t.avatar) < 0 && e.unshift((n = this.localUser.cosmetics) == null ? void 0 : n.avatar);
            for (let i = 0; i <= 25; i++)
                e.push(i);
            return e
        },
        availableBorders() {
            var s, t;
            const e = [""];
            return this.localUser.level === "patreon-townsfolk" && e.push("townsfolk"),
            this.localUser.level === "patreon-minion" && e.push("townsfolk", "minion"),
            this.localUser.level === "patreon-demon" && e.push("townsfolk", "minion", "demon"),
            this.localUser.level === "special-tpi" && e.push("tpi"),
            this.localUser.level === "special-moderator" && e.push("moderator"),
            (s = this.localUser.flags) != null && s.includes("powerful") && e.push("rainbow", "progress"),
            (t = this.localUser.cosmetics) != null && t.borders && e.push(...this.localUser.cosmetics.borders),
            e
        },
        statsLabel() {
            var t, n, i, o;
            const e = (i = (n = this.newStats) != null ? n : (t = this.user.cosmetics) == null ? void 0 : t.stats) != null ? i : 0
              , s = (o = this.statsLabels[e]) != null ? o : {};
            return s.hidden = this.user.id === this.localUser.id ? e === 2 : e > 0,
            s
        },
        statsCalculated() {
            var g, c, h, m, A, f, T, w, V, N;
            const {storyteller: e, stEvilWins: s, player: t, playerWins: n, editions: i, roles: o, games: l} = this.stats;
            return l === void 0 || this.statsLabel.hidden && !this.isModerator ? {
                storyteller: "???",
                player: "???",
                edition: "",
                role: ""
            } : {
                storyteller: e,
                stEvilWins: s !== void 0 && e ? Math.round(100 * s / e) : void 0,
                player: t,
                playerWins: n !== void 0 && t ? Math.round(100 * n / t) : void 0,
                edition: (g = i[this.edition % i.length]) == null ? void 0 : g.id,
                editionTooltip: i.length ? [(c = i[this.edition % i.length]) == null ? void 0 : c.id, (h = i[this.edition % i.length]) == null ? void 0 : h.value] : void 0,
                editionIcon: new URL(Object.assign({
                    "/src/assets/editions/bmr/skull.webp": Ts,
                    "/src/assets/editions/custom/skull.webp": Is,
                    "/src/assets/editions/homebrew/skull.webp": Ms,
                    "/src/assets/editions/snv/skull.webp": Rs,
                    "/src/assets/editions/tb/skull.webp": Ds
                })[`/src/assets/editions/${(A = (m = i[this.edition % i.length]) == null ? void 0 : m.id) != null ? A : "custom"}/skull.webp`],import.meta.url).href,
                role: (f = o[this.role % o.length]) == null ? void 0 : f.id,
                roleTooltip: o.length ? this.role % o.length + 1 + ". " + ((V = (w = this.rolesAvailable.get((T = o[this.role % o.length]) == null ? void 0 : T.id)) == null ? void 0 : w.name) != null ? V : this.$t("user.stats.homebrew")) + " x " + ((N = o[this.role % o.length]) == null ? void 0 : N.value) : void 0
            }
        }
    },
    data() {
        var e;
        return {
            isAvatarSelection: !1,
            newAvatar: null,
            newStats: void 0,
            newBorder: void 0,
            edition: 0,
            role: 0,
            volume: (e = this.$store.state.chat.userOverrides.get("volume-" + this.user.id)) != null ? e : 1,
            dtFormat: new Intl.DateTimeFormat(navigator.languages ? navigator.languages[0] : navigator.language,{
                dateStyle: "short",
                timeStyle: "short"
            }),
            statsLabels: [{
                name: "public",
                icon: "eye",
                class: "primary"
            }, {
                name: "private",
                icon: "lock"
            }, {
                name: "hidden",
                icon: "eye-slash",
                class: "secondary"
            }]
        }
    },
    methods: {
        stat: qd,
        ...j(["toggleModal"]),
        ...j("chat", ["setUserOverride"]),
        ...$("user", ["promptUserUpdate"]),
        setAudioVolume(e, s) {
            this.volume = s != null ? s : this.volume,
            this.setUserOverride({
                userId: e.id,
                type: "volume",
                value: Number(this.volume) === 1 ? !1 : Number(this.volume)
            })
        },
        toggleAvatar() {
            this.isEditable && (this.isAvatarSelection = !0)
        },
        uploadAvatar() {
            var e, s;
            this.localUser.level && this.isEditable && ((e = this.localUser.flags) != null && e.includes("forced-avatar") || (s = this.$refs.avatar) == null || s.click())
        },
        async handleAvatarUpload() {
            var i;
            if (!this.localUser.level || !this.isEditable)
                return;
            const e = 1024 * 1024 * 5
              , s = (i = this.$refs.avatar) == null ? void 0 : i.files[0];
            if (!s)
                return;
            if (s.size > e) {
                this.$refs.avatar && (this.$refs.avatar.value = ""),
                this.$store.dispatch("showError", ["user.error_avatar_title", ["user.error_avatar_text", [(s.size / (1024 * 1024)).toFixed(1), (e / (1024 * 1024)).toFixed(1)]]]);
                return
            }
            const t = new FormData;
            t.append("avatar", s);
            const n = await this.$store.dispatch("user/uploadAvatar", t);
            this.$refs.avatar && (this.$refs.avatar.value = ""),
            n !== !1 && this.setCustomAvatar(n)
        },
        toggleStats() {
            var e, s, t;
            this.newStats = (((t = (s = this.newStats) != null ? s : (e = this.user.cosmetics) == null ? void 0 : e.stats) != null ? t : 0) + 1) % 3
        },
        setCustomAvatar(e) {
            this.newAvatar = e,
            this.isAvatarSelection = !1
        },
        setCustomBorder(e) {
            var i, o;
            const s = this.availableBorders
              , t = (o = this.newBorder) != null ? o : ((i = this.localUser.cosmetics) == null ? void 0 : i.border) || "";
            if (s.length <= 1 && !t)
                return;
            const n = s[(s.indexOf(t) + e + s.length) % s.length] || "";
            n !== t && s.indexOf(n) > -1 && (this.newBorder = n)
        },
        async changeUser(e) {
            var s, t;
            if (this.isEditable && !(e === "username" && ((s = this.localUser.flags) != null && s.includes("forced-username"))) && !(e === "pronouns" && ((t = this.localUser.flags) != null && t.includes("forced-pronouns"))))
                try {
                    await this.promptUserUpdate(e)
                } catch {} finally {
                    this.toggleModal({
                        name: "settings"
                    })
                }
        }
    },
    watch: {
        "user.id"() {
            var e;
            this.volume = (e = this.userOverrides.get("volume-" + this.user.id)) != null ? e : 1
        }
    },
    beforeUnmount() {
        var e, s, t, n;
        if (this.user.id === this.localUser.id) {
            const i = {}
              , {avatar: o, border: l, stats: g} = (e = this.localUser.cosmetics) != null ? e : {};
            ((s = this.newBorder) != null ? s : l) !== l && (i.border = this.newBorder,
            this.newBorder = void 0),
            ((t = this.newAvatar) != null ? t : o) !== o && (i.avatar = this.newAvatar,
            this.newAvatar = null),
            ((n = this.newStats) != null ? n : g) !== g && (i.stats = this.newStats,
            this.newStats = null),
            Object.keys(i).length && this.$store.dispatch("user/updateUser", i)
        }
    }
}
  , bk = {
    class: "preview"
}
  , fk = ["title"]
  , vk = {
    class: "profile"
}
  , _k = {
    key: 0
}
  , yk = {
    key: 0
}
  , wk = {
    key: 1
}
  , kk = ["aria-checked"]
  , Ck = ["aria-checked"]
  , Sk = ["data-tooltip"]
  , Pk = ["data-tooltip"]
  , Tk = ["data-tooltip"]
  , Ik = {
    key: 0
}
  , Mk = {
    key: 1,
    class: "edition"
}
  , Rk = ["src"]
  , Dk = ["data-tooltip"]
  , Ek = {
    key: 0
}
  , Nk = {
    key: 1,
    class: "role"
}
  , Bk = ["src"]
  , Vk = {
    key: 2,
    class: "loading"
}
  , Ok = {
    key: 3,
    class: "warning"
}
  , jk = {
    key: 1,
    class: "avatars"
};
function Uk(e, s, t, n, i, o) {
    var c, h, m, A, f, T, w, V;
    const l = k("PlayerAvatar")
      , g = k("font-awesome-icon");
    return i.isAvatarSelection ? (r(),
    u("div", jk, [e.localUser.id === t.user.id && e.localUser.level ? (r(),
    u("div", {
        key: 0,
        class: y(["custom avatar", {
            disabled: (w = e.localUser.flags) == null ? void 0 : w.includes("forced-avatar")
        }]),
        onClick: s[13] || (s[13] = (...N) => o.uploadAvatar && o.uploadAvatar(...N))
    }, [b(g, {
        icon: (V = e.localUser.flags) != null && V.includes("forced-avatar") ? "lock" : "file-upload"
    }, null, 8, ["icon"]), v(" " + d(e.$t("user.upload_avatar")), 1)], 2)) : p("", !0), (r(!0),
    u(_, null, B(o.availableAvatars, N => {
        var U, P;
        return r(),
        C(l, {
            key: N,
            user: t.user,
            override: N,
            frame: !1,
            class: y(["avatar", {
                selected: ((P = i.newAvatar) != null ? P : (U = e.localUser.cosmetics) == null ? void 0 : U.avatar) === N
            }]),
            onClick: E => o.setCustomAvatar(N)
        }, null, 8, ["user", "override", "class", "onClick"])
    }
    ), 128)), a("input", {
        type: "file",
        ref: "avatar",
        accept: "image/png, image/jpeg, image/gif, image/webp",
        onChange: s[14] || (s[14] = N => o.handleAvatarUpload())
    }, null, 544)])) : (r(),
    u("div", {
        key: 0,
        class: y(["user", {
            edit: o.isEditable
        }])
    }, [a("div", bk, [b(l, {
        class: "avatar",
        user: t.user,
        override: i.newAvatar,
        onClick: o.toggleAvatar
    }, null, 8, ["user", "override", "onClick"]), a("div", {
        class: y(["nameplate", {
            ["border-" + ((h = i.newBorder) != null ? h : (c = t.user.cosmetics) == null ? void 0 : c.border)]: !!((A = i.newBorder) != null ? A : (m = t.user.cosmetics) != null && m.border),
            ["level-" + t.user.level]: !!t.user.level,
            custom: o.availableBorders.length > 1 || ((f = t.user.cosmetics) == null ? void 0 : f.border)
        }]),
        title: t.user.pronouns
    }, [a("div", {
        class: "name",
        onClick: s[0] || (s[0] = N => o.changeUser("username"))
    }, d((T = t.user.username) != null ? T : e.$t("common.unnamed_user")), 1), a("div", {
        class: y(["pronouns", {
            empty: !t.user.pronouns
        }]),
        onClick: s[1] || (s[1] = N => o.changeUser("pronouns"))
    }, d(t.user.pronouns || e.$t("user.pronouns")), 3), o.isEditable ? (r(),
    u("button", {
        key: 0,
        class: "button left",
        onClick: s[2] || (s[2] = M(N => o.setCustomBorder(-1), ["stop"]))
    }, [b(g, {
        icon: "arrow-circle-left"
    })])) : p("", !0), o.isEditable ? (r(),
    u("button", {
        key: 1,
        class: "button right",
        onClick: s[3] || (s[3] = M(N => o.setCustomBorder(1), ["stop"]))
    }, [b(g, {
        icon: "arrow-circle-right"
    })])) : p("", !0)], 10, fk)]), a("ul", vk, [a("li", null, [a("span", null, d(e.$t("user.id")) + ":", 1), v(" " + d(t.user.id), 1)]), t.user.createdAt ? (r(),
    u("li", _k, [a("span", null, d(e.$t("user.registration")) + ":", 1), v(" " + d(e.$d(new Date(t.user.createdAt), {
        dateStyle: "short",
        timeStyle: "short"
    })) + " ", 1), t.user.flags.includes("verified-phone") ? (r(),
    C(g, {
        key: 0,
        icon: "check-circle",
        class: "verified",
        title: e.$t("user.verified")
    }, null, 8, ["title"])) : p("", !0), t.user.flags.includes("newuser") ? (r(),
    C(g, {
        key: 1,
        icon: "seedling",
        class: "newuser",
        title: e.$t("user.new_user")
    }, null, 8, ["title"])) : p("", !0)])) : p("", !0), a("li", null, [a("span", null, d(e.$t("user.level")) + ":", 1), v(" " + d(e.$t(`common.account-levels.${t.user.level || "free"}`)) + " ", 1), e.levels.GROUP.includes(t.user.level) ? (r(),
    C(g, {
        key: 0,
        icon: "users",
        class: "group",
        title: e.$t("user.group_subscription")
    }, null, 8, ["title"])) : p("", !0)]), e.session.sessionId && e.seatedPlayerMap.has(t.user.id) || e.localUser.id === t.user.id ? (r(),
    u(_, {
        key: 1
    }, [a("li", {
        class: "toggle",
        onClick: s[7] || (s[7] = N => o.setAudioVolume(t.user, i.volume > 0 ? 0 : 1))
    }, [e.localUser.id === t.user.id ? (r(),
    u("span", yk, d(e.$t("user.gain")) + ":", 1)) : (r(),
    u("span", wk, d(e.$t("user.mic_volume")) + ":", 1)), z(a("input", {
        type: "range",
        onChange: s[4] || (s[4] = N => o.setAudioVolume(t.user)),
        onClick: s[5] || (s[5] = M( () => {}
        , ["stop"])),
        "onUpdate:modelValue": s[6] || (s[6] = N => i.volume = N),
        min: "0",
        max: "2",
        step: "0.1"
    }, null, 544), [[W, i.volume]]), v(" " + d(Math.round(i.volume * 100)) + "% ", 1), a("button", {
        class: y(["button", {
            primary: i.volume > 0
        }])
    }, [e.localUser.id === t.user.id ? (r(),
    C(g, {
        key: 0,
        icon: i.volume > 0 ? "microphone" : "microphone-slash"
    }, null, 8, ["icon"])) : (r(),
    C(g, {
        key: 1,
        icon: i.volume > 0 ? "volume-up" : "volume-mute"
    }, null, 8, ["icon"]))], 2)]), t.user.id !== e.localUser.id ? (r(),
    u("li", {
        key: 0,
        onClick: s[8] || (s[8] = N => e.setUserOverride({
            userId: t.user.id,
            type: "novideo"
        })),
        class: "toggle"
    }, [a("span", null, d(e.$t("user.camera_enabled")) + ":", 1), a("button", {
        class: y(["button", {
            primary: !e.userOverrides.has("novideo-" + t.user.id)
        }]),
        "aria-checked": !e.userOverrides.has("novideo-" + t.user.id)
    }, [b(g, {
        icon: e.userOverrides.has("novideo-" + t.user.id) ? "video-slash" : "video"
    }, null, 8, ["icon"])], 10, kk)])) : p("", !0)], 64)) : p("", !0), t.user.id !== e.localUser.id ? (r(),
    u("li", {
        key: 2,
        onClick: s[9] || (s[9] = N => e.setUserOverride({
            userId: t.user.id,
            type: "noavatar"
        })),
        class: "toggle"
    }, [a("span", null, d(e.$t("user.avatar_enabled")) + ":", 1), a("button", {
        class: y(["button", {
            primary: !e.userOverrides.has("noavatar-" + t.user.id)
        }]),
        "aria-checked": !e.userOverrides.has("noavatar-" + t.user.id)
    }, [b(g, {
        icon: e.userOverrides.has("noavatar-" + t.user.id) ? "user-slash" : "user"
    }, null, 8, ["icon"])], 10, Ck)])) : p("", !0), a("li", null, [a("span", null, d(e.$t("user.statistics")) + ":", 1), o.isEditable ? (r(),
    u("button", {
        key: 0,
        class: y(["button", [o.statsLabel.class]]),
        onClick: s[10] || (s[10] = (...N) => o.toggleStats && o.toggleStats(...N))
    }, [b(g, {
        icon: o.statsLabel.icon
    }, null, 8, ["icon"]), v(" " + d(e.$t(`user.stats_${o.statsLabel.name}`)), 1)], 2)) : p("", !0), t.stats.games >= 0 || o.statsLabel.hidden ? (r(),
    u("div", {
        key: 1,
        class: y(["stats", {
            hidden: o.statsLabel.hidden,
            moderator: e.isModerator
        }])
    }, [a("span", {
        "data-tooltip": o.statsCalculated.stEvilWins !== void 0 ? e.$t("user.stats.st_evil_wins", [o.statsCalculated.stEvilWins]) : void 0
    }, [a("b", null, d(o.statsCalculated.storyteller), 1), v(" " + d(e.$t("user.stats.storyteller")), 1)], 8, Sk), a("span", {
        "data-tooltip": o.statsCalculated.playerWins !== void 0 ? e.$t("user.stats.player_wins", [o.statsCalculated.playerWins]) : void 0
    }, [a("b", null, d(o.statsCalculated.player), 1), v(" " + d(e.$t("user.stats.player")), 1)], 8, Pk), a("span", {
        "data-tooltip": o.statsCalculated.editionTooltip ? `${i.edition % t.stats.editions.length + 1}. ${e.$t(`editions.${o.statsCalculated.editionTooltip[0]}.name`)} x ${o.statsCalculated.editionTooltip[1]}` : void 0,
        class: "toggle",
        onClick: s[11] || (s[11] = N => i.edition++)
    }, [o.statsCalculated.edition ? (r(),
    u("b", Mk, [a("img", {
        src: o.statsCalculated.editionIcon,
        alt: ""
    }, null, 8, Rk)])) : (r(),
    u("b", Ik, d(e.$t("user.stats.none")), 1)), v(" " + d(e.$t("user.stats.edition")), 1)], 8, Tk), a("span", {
        "data-tooltip": o.statsCalculated.roleTooltip,
        class: "toggle",
        onClick: s[12] || (s[12] = N => i.role++)
    }, [o.statsCalculated.role ? (r(),
    u("b", Nk, [a("img", {
        src: e.roleIconURL({
            id: o.statsCalculated.role
        }),
        alt: ""
    }, null, 8, Bk)])) : (r(),
    u("b", Ek, d(e.$t("user.stats.none")), 1)), v(" " + d(e.$t("user.stats.role")), 1)], 8, Dk)], 2)) : t.stats.loading ? (r(),
    u("div", Vk, d(e.$t("user.stats.loading")), 1)) : (r(),
    u("div", Ok, d(e.$t("user.stats.warning")), 1))])])], 2))
}
const bl = O(Ak, [["render", Uk], ["__scopeId", "data-v-1615aff7"]])
  , Hk = {
    production: "https://botc.app/backend/"
}
  , fl = Hk.production
  , vl = async e => {
    if (!e.ok) {
        let s = e.body;
        const t = e.headers.get("content-type");
        return t != null && t.includes("application/json") && (s = await e.json()),
        {
            error: new Error("HTTP Error " + e.status),
            status: e.status,
            body: s
        }
    }
    return await e.json()
}
  , re = async (e="", s={}, t, n=!1) => {
    try {
        const i = await fetch(fl + e, {
            method: "POST",
            headers: {
                ...n ? {} : {
                    "Content-Type": "application/json"
                },
                Authorization: t ? "Bearer " + t : null,
                "x-app-version": le.version
            },
            body: n ? s : JSON.stringify(s)
        });
        return await vl(i)
    } catch (i) {
        return {
            error: i
        }
    }
}
  , We = async (e="", s) => {
    try {
        const t = await fetch(fl + e, {
            headers: {
                Authorization: s ? "Bearer " + s : null,
                "x-app-version": le.version
            }
        });
        return await vl(t)
    } catch (t) {
        return {
            error: t
        }
    }
}
  , ie = (e, s="") => (t, n) => {
    n != null && (n.value === !0 || n.value === !1) ? s && t[s] ? t[s][e] = n.value : t[e] = n.value : n === !0 || n === !1 ? s && t[s] ? t[s][e] = n : t[e] = n : s && t[s] ? t[s][e] = !t[s][e] : t[e] = !t[e]
}
  , qk = {
    name: "SettingsModal",
    components: {
        User: bl,
        Modal: se
    },
    inject: ["isTouchDevice"],
    computed: {
        ...I("user", ["user", "accessToken"]),
        ...I("players", ["npcs"]),
        ...I(["session", "chat", "modal", "grimoire", "edition", "vote", "keybindings", "settings"]),
        ...D("players", ["seatedPlayerMap"]),
        ...D("user", ["isStoryteller"]),
        canChat() {
            return this.session.sessionId && this.seatedPlayerMap.has(this.user.id)
        },
        canSetVoteSpeed() {
            return this.isStoryteller && !this.vote.isInProgress && this.vote.locked < 1
        }
    },
    data() {
        var t;
        const {user: e} = this.$store.state.user
          , {userOverrides: s} = this.$store.state.chat;
        return {
            patreonCallback: encodeURIComponent(window.location.origin),
            currentTab: 0,
            isLoading: !1,
            audioSelection: null,
            audioList: [],
            volume: (t = s.get("volume-" + e.id)) != null ? t : 1,
            soundVolume: this.$store.state.settings.general.soundVolume,
            sounds: Tn,
            soundEffectVolume: Object.fromEntries([...this.$store.state.settings.sounds]),
            voteSpeed: this.$store.state.vote.speed,
            avatarZoom: this.$store.state.settings.general.avatarZoom,
            zoom: this.$store.state.settings.general.tokenZoom,
            reminderZoom: this.$store.state.settings.general.reminderZoom,
            grimoireOffset: this.$store.state.settings.general.grimoireOffset,
            stats: {
                loading: !0
            },
            localUser: e,
            videoSelection: null,
            videoList: [],
            chroma: this.$store.state.settings.advanced.chromaKey || "#00B140",
            isRecording: !1,
            isRecordingExtra: !1,
            newBorder: void 0,
            isSoundSettings: !1,
            isAvatarSelection: !1,
            defaultLocale: ke,
            nominationTypes: ["regular", "focus", "phases"]
        }
    },
    methods: {
        ...j("chat", ["setVideoDevice", "setVideoPreference", "setAudioDevice", "setAudioPreference", "toggleVideoMuted", "toggleAutoGainControl", "toggleNoiseSuppression", "toggleEchoCancellation", "toggleAudioDeafened", "toggleVideoDeafened", "toggleVideoUnmirrored", "toggleVideoHidden"]),
        ...j(["toggleModal"]),
        ...j("settings", ["setAvatarZoom", "setTokenZoom", "setReminderZoom", "setGrimoireOffset", "toggleAnimationsDisabled", "toggleCosmeticsDisabled", "toggleImageOptIn", "toggleNightOrder", "toggleNightRequestPing", "togglePlayerBluffs", "togglePlayerNightOrder", "togglePlayerDuplicates", "togglePositioningDisabled", "toggleTutorialDisabled", "toggleEnglishNames", "toggleStackReminderTokens", "toggleNightStatic", "toggleTouchSupport", "toggleHiddenTownSquareCams", "toggleHiddenPrivateCams", "toggleHiddenRevealCams", "togglePublicTownSquare", "setChromaKey"]),
        updateTab(e) {
            this.currentTab = e,
            this.isAvatarSelection = !1,
            this.isSoundSettings = !1,
            e === 1 ? We(`user/${this.user.id}`, this.accessToken).then( ({stats: s, user: t}) => {
                this.stats = s,
                this.localUser = t
            }
            ) : e === 2 && (this.volume = this.$store.state.chat.userOverrides.has("volume-" + this.user.id) ? this.$store.state.chat.userOverrides.get("volume-" + this.user.id) : 1,
            this.listDevices().catch( () => {}
            ))
        },
        logout() {
            this.$store.dispatch("user/logout"),
            this.toggleModal({
                name: "settings"
            })
        },
        async listDevices() {
            var e, s;
            if (!this.isLoading) {
                if (this.isLoading = !0,
                !this.videoList.length)
                    try {
                        const t = await navigator.mediaDevices.getUserMedia({
                            video: !0
                        });
                        t && t.getTracks().forEach(n => n.stop())
                    } catch {}
                if (!this.audioList.length)
                    try {
                        const t = await navigator.mediaDevices.getUserMedia({
                            audio: !0
                        });
                        t && t.getTracks().forEach(n => n.stop())
                    } catch {}
                try {
                    const t = await navigator.mediaDevices.enumerateDevices();
                    this.audioSelection = (e = this.audioSelection) != null ? e : this.chat.audio.preference,
                    this.videoSelection = (s = this.videoSelection) != null ? s : this.chat.video.preference,
                    t.some(n => n.kind === "audioinput") && (this.audioList = []),
                    t.some(n => n.kind === "videoinput") && (this.videoList = []),
                    t.forEach(n => {
                        switch (n.kind) {
                        case "audioinput":
                            this.audioSelection === null && (this.audioSelection = n.deviceId),
                            this.audioList.push(n);
                            break;
                        case "videoinput":
                            this.videoSelection === null && (this.videoSelection = n.deviceId),
                            this.videoList.push(n);
                            break
                        }
                    }
                    )
                } catch {}
                this.isLoading = !1,
                this.checkChatPermission()
            }
        },
        changePreference(e) {
            if (e === "audio")
                this.setAudioPreference(this.audioSelection),
                this.canChat && this.setAudioDevice(this.audioSelection);
            else {
                const s = this.chat.video.device || this.chat.video.preference === this.chat.video.device;
                this.setVideoPreference(this.videoSelection),
                this.canChat && s && this.setVideoDevice(this.videoSelection)
            }
        },
        checkChatPermission() {
            if (!this.canChat) {
                this.chat.audio.device && this.setAudioDevice(),
                this.chat.video.device && this.setVideoDevice();
                return
            }
            !this.chat.audio.device && this.audioSelection && (this.chat.audio.preference !== this.audioSelection && this.$store.commit("chat/toggleAudioMuted", !0),
            this.setAudioDevice(this.audioSelection)),
            !this.chat.video.device && this.videoSelection === this.chat.video.preference && this.setVideoDevice(this.videoSelection)
        },
        deafen(e) {
            e === "audio" ? (this.chat.isNotAllowed && this.$store.commit("chat/toggleNotAllowed", !1),
            this.toggleAudioDeafened(),
            this.chat.audio.isDeafened && !this.chat.audio.isMuted && this.toggleAudioMuted()) : (this.toggleVideoDeafened(),
            this.chat.video.isDeafened && !this.chat.video.isMuted && this.toggleVideoMuted())
        },
        setAudioVolume() {
            this.$store.commit("chat/setUserOverride", {
                userId: this.user.id,
                type: "volume",
                value: Number(this.volume) === 1 ? !1 : Number(this.volume)
            })
        },
        setSoundVolume(e) {
            e ? (this.$store.commit("settings/setSoundEffectVolume", {
                id: e,
                value: this.soundEffectVolume[e]
            }),
            this.$store.commit("removeSound", {
                name: e
            }),
            this.$store.commit("playSound", e)) : this.$store.commit("settings/setSoundVolume", this.soundVolume)
        },
        async setBackground() {
            try {
                const e = await this.$store.dispatch("openDialogue", {
                    type: "prompt",
                    title: "modals.settings.background_title",
                    placeholder: "modals.settings.background_placeholder",
                    value: this.grimoire.background,
                    text: "modals.settings.background_text"
                });
                this.$store.commit("settings/setBackground", e)
            } catch {} finally {
                this.toggleModal({
                    name: "settings"
                })
            }
        },
        async imageOptIn() {
            if (this.settings.general.isImageOptIn)
                return this.toggleImageOptIn();
            try {
                const e = await this.$store.dispatch("openDialogue", {
                    type: "confirm",
                    title: "modals.settings.image_title",
                    text: "modals.settings.image_text"
                });
                this.toggleImageOptIn(e)
            } catch {} finally {
                this.toggleModal({
                    name: "settings"
                })
            }
        },
        setVotingSpeed() {
            this.canSetVoteSpeed && this.voteSpeed >= 500 && this.voteSpeed <= 1e4 && this.$store.commit("vote/setVotingSpeed", this.voteSpeed)
        },
        toggleNominationType() {
            if (this.vote.locked > 0 || this.vote.isInProgress || this.npcs.some(s => s.id === "bigwig"))
                return;
            const e = (this.nominationTypes.indexOf(this.vote.nominationType) + 1) % this.nominationTypes.length;
            this.$store.commit("vote/setNominationType", this.nominationTypes[e]),
            this.vote.nomination && (this.vote.nominationType === "phases" && this.vote.locked === 0 ? this.$store.commit("vote/lockVote", -3) : this.vote.locked < -1 && this.$store.commit("vote/lockVote", 0))
        },
        setColorblindMode(e) {
            this.$store.commit("settings/setColorblind", (8 + this.settings.general.colorblind + e) % 8)
        },
        setChroma(e) {
            e && this.settings.advanced.chromaKey ? this.setChromaKey("") : this.setChromaKey(this.chroma)
        },
        async setCustomCSS() {
            try {
                let {value: e, checkbox: s} = await this.$store.dispatch("openDialogue", {
                    type: "prompt",
                    title: "modals.settings.css_title",
                    input: "textarea",
                    text: "modals.settings.css_text",
                    placeholder: "https://url.to/custom.css / body { color: red; }",
                    value: this.settings.advanced.customCSS,
                    checkbox: {
                        label: "modals.settings.css_confirm",
                        value: !!this.settings.advanced.customCSS,
                        required: !0
                    }
                });
                s || !e ? (e.trim().match(/^https?:\/\//i) && (e = await (await fetch(e.trim())).text()),
                this.$store.commit("settings/setCustomCSS", e),
                await this.toggleCustomCSS(!0)) : this.toggleModal({
                    name: "settings"
                })
            } catch {}
        },
        toggleSetup() {
            this.$store.commit("chat/toggleAudioMuted", !0),
            this.$store.commit("chat/toggleVideoMuted", !0),
            this.toggleModal({
                name: "setup"
            })
        },
        async toggleCustomCSS(e) {
            if (this.$store.commit("settings/toggleCustomCSS", e),
            this.settings.advanced.customCSSEnabled) {
                try {
                    await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "modals.settings.css_apply",
                        text: "modals.settings.css_confirm2",
                        timer: 10
                    }) || this.$store.commit("settings/toggleCustomCSS", !1)
                } catch {
                    this.$store.commit("settings/toggleCustomCSS", !1)
                }
                this.toggleModal({
                    name: "settings"
                })
            }
        },
        toggleWhispers() {
            this.isStoryteller && this.$store.commit("session/toggleWhispers")
        },
        togglePushToTalk() {
            this.$store.commit("chat/togglePushToTalk"),
            this.chat.audio.isPushToTalk && !this.chat.audio.isMuted && this.$store.commit("chat/toggleAudioMuted")
        },
        toggleAudioMuted() {
            this.chat.audio.isPushToTalk || !this.chat.audio.device || this.$store.commit("chat/toggleAudioMuted")
        },
        recordShortcut(e, s) {
            this.isRecordingExtra = s != null ? s : !1,
            this.isRecording = e,
            this.$nextTick( () => {
                this.$refs.shortcut.focus()
            }
            )
        },
        cancelShortcut() {
            this.isRecording = !1,
            this.$nextTick( () => {
                document.getElementById("app").focus()
            }
            )
        },
        async resetShortcuts() {
            try {
                await this.$store.dispatch("openDialogue", {
                    type: "confirm",
                    title: "modals.settings.shortcut_reset",
                    text: "modals.settings.shortcut_reset_confirm"
                }) && this.$store.commit("setKeybindings", Ge)
            } catch {}
            this.toggleModal({
                name: "settings"
            })
        },
        keyup(e) {
            var t, n;
            let s = (t = e.key) == null ? void 0 : t.toLocaleLowerCase();
            if ((s === void 0 || s === "unidentified") && (s = (n = e.target.value) == null ? void 0 : n.toLocaleLowerCase()),
            s !== void 0) {
                if (s !== "escape")
                    if (this.isRecordingExtra) {
                        if (this.keybindings[this.isRecording].includes(s))
                            return this.cancelShortcut();
                        this.keybindings[this.isRecording].push(s)
                    } else
                        this.keybindings[this.isRecording] = [s];
                else
                    this.keybindings[this.isRecording] = [...Ge[this.isRecording]];
                this.$store.commit("setKeybindings", this.keybindings),
                this.cancelShortcut()
            }
        }
    },
    beforeMount() {
        this.listDevices(),
        navigator.mediaDevices.ondevicechange = this.listDevices.bind(this)
    },
    beforeUnmount() {
        navigator.mediaDevices.ondevicechange = null
    },
    watch: {
        "session.sessionId"() {
            this.session.sessionId && this.listDevices()
        },
        canChat() {
            this.checkChatPermission()
        },
        "vote.speed"() {
            this.voteSpeed = this.vote.speed
        }
    }
}
  , Lk = {
    key: 0
}
  , zk = {
    key: 0
}
  , Gk = {
    id: "general-avatar"
}
  , Wk = {
    class: "right"
}
  , Fk = {
    id: "general-token"
}
  , Qk = {
    class: "right"
}
  , Zk = {
    id: "general-reminder"
}
  , Xk = {
    class: "right"
}
  , Kk = {
    id: "general-offset"
}
  , Yk = {
    class: "right"
}
  , Jk = {
    id: "general-colorblind"
}
  , $k = {
    class: "button-group"
}
  , xk = {
    id: "general-background"
}
  , e2 = {
    id: "general-cosmetics"
}
  , s2 = ["aria-pressed"]
  , t2 = {
    id: "general-animations"
}
  , i2 = ["aria-pressed"]
  , o2 = {
    id: "general-custom"
}
  , n2 = ["aria-pressed"]
  , a2 = {
    id: "general-tabs"
}
  , r2 = ["aria-pressed"]
  , l2 = {
    id: "general-sound"
}
  , c2 = {
    class: "right"
}
  , d2 = {
    key: 1
}
  , u2 = {
    id: "sound-general"
}
  , g2 = {
    class: "right"
}
  , m2 = ["id"]
  , h2 = ["onUpdate:modelValue", "onChange", "aria-labelledby"]
  , p2 = {
    class: "right"
}
  , A2 = {
    href: "https://www.patreon.com/botconline",
    target: "_blank"
}
  , b2 = {
    class: "button-group"
}
  , f2 = ["href"]
  , v2 = {
    class: "button",
    href: "https://bloodontheclocktower.com/account",
    target: "_blank"
}
  , _2 = {
    id: "chat-microphone"
}
  , y2 = {
    value: ""
}
  , w2 = ["value"]
  , k2 = ["aria-label", "aria-pressed"]
  , C2 = {
    id: "chat-gain"
}
  , S2 = {
    class: "right"
}
  , P2 = {
    id: "chat-autogain"
}
  , T2 = ["aria-pressed"]
  , I2 = {
    id: "chat-noise"
}
  , M2 = ["aria-pressed"]
  , R2 = {
    id: "chat-echo"
}
  , D2 = ["aria-pressed"]
  , E2 = {
    id: "chat-ptt"
}
  , N2 = ["aria-pressed"]
  , B2 = {
    id: "chat-deafen"
}
  , V2 = ["aria-pressed"]
  , O2 = {
    id: "chat-camera"
}
  , j2 = {
    value: ""
}
  , U2 = ["value"]
  , H2 = ["disabled"]
  , q2 = ["aria-label", "aria-pressed"]
  , L2 = {
    id: "chat-camfeeds"
}
  , z2 = ["aria-pressed"]
  , G2 = {
    id: "chat-hide"
}
  , W2 = ["aria-pressed"]
  , F2 = {
    id: "chat-mirror"
}
  , Q2 = ["aria-pressed"]
  , Z2 = {
    id: "game-tutorial"
}
  , X2 = ["aria-pressed"]
  , K2 = {
    id: "game-english"
}
  , Y2 = ["aria-pressed"]
  , J2 = {
    id: "game-stack"
}
  , $2 = ["aria-pressed"]
  , x2 = {
    id: "game-nightorder"
}
  , e0 = ["aria-pressed"]
  , s0 = {
    id: "game-bluffs"
}
  , t0 = ["aria-pressed"]
  , i0 = {
    id: "game-duplicate"
}
  , o0 = ["aria-pressed"]
  , n0 = {
    id: "game-chatsound"
}
  , a0 = ["aria-pressed"]
  , r0 = {
    id: "game-waking"
}
  , l0 = ["aria-pressed"]
  , c0 = {
    key: 0
}
  , d0 = {
    id: "game-votetime"
}
  , u0 = {
    class: "right"
}
  , g0 = ["data-tooltip"]
  , m0 = {
    id: "game-nomination"
}
  , h0 = {
    id: "game-whisper"
}
  , p0 = ["aria-pressed"]
  , A0 = {
    class: "shortcuts"
}
  , b0 = ["onClick"]
  , f0 = ["id"]
  , v0 = ["aria-labelledby"]
  , _0 = ["data-tooltip"]
  , y0 = {
    class: "button secondary",
    role: "button"
}
  , w0 = {
    key: 0,
    class: "overlay"
}
  , k0 = {
    id: "advanced-clouds"
}
  , C0 = ["aria-pressed"]
  , S0 = {
    id: "advanced-alignment"
}
  , P0 = ["aria-pressed"]
  , T0 = {
    id: "advanced-avatars"
}
  , I0 = ["aria-pressed"]
  , M0 = {
    id: "advanced-chatcams"
}
  , R0 = ["aria-pressed"]
  , D0 = {
    id: "advanced-grimcams"
}
  , E0 = ["aria-pressed"]
  , N0 = {
    class: "toggle"
}
  , B0 = {
    for: "chroma"
}
  , V0 = ["aria-label"]
  , O0 = ["aria-pressed"]
  , j0 = {
    class: "toggle"
}
  , U0 = {
    for: "css"
}
  , H0 = ["aria-label"]
  , q0 = ["aria-pressed"];
function L0(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("User")
      , c = k("i18n-t")
      , h = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "settings" ? (r(),
        C(h, {
            key: 0,
            id: "settings",
            name: "settings",
            onClose: s[68] || (s[68] = m => e.toggleModal(e.modal)),
            onTabChange: o.updateTab,
            tabs: [e.$t("modals.settings.tab_general"), e.$t("modals.settings.tab_user"), e.$t("modals.settings.tab_chat"), e.$t("modals.settings.tab_game"), e.$t("modals.settings.tab_shortcuts"), e.$t("modals.settings.tab_advanced")]
        }, {
            header: S( () => [i.isAvatarSelection ? (r(),
            u(_, {
                key: 0
            }, [v(d(e.$t("modals.settings.title_avatar")), 1)], 64)) : i.isSoundSettings ? (r(),
            u(_, {
                key: 1
            }, [v(d(e.$t("modals.settings.title_sound")), 1)], 64)) : (r(),
            u(_, {
                key: 2
            }, [v(d(e.$t("modals.settings.title")), 1)], 64))]),
            "tab-0": S( () => [i.isSoundSettings ? (r(),
            u("ul", d2, [a("li", null, [a("span", u2, d(e.$t("modals.settings.setting_general_volume")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[19] || (s[19] = m => i.soundVolume = m),
                onChange: s[20] || (s[20] = m => o.setSoundVolume()),
                min: "0",
                max: "1",
                step: "0.1",
                "aria-label": "sound-general"
            }, null, 544), [[W, i.soundVolume, void 0, {
                number: !0
            }]]), a("span", g2, d(Math.round(i.soundVolume * 100)) + "%", 1)]), (r(!0),
            u(_, null, B(i.sounds, m => (r(),
            u("li", {
                key: m
            }, [a("span", {
                id: "sound-" + m
            }, d(e.$t(`modals.settings.sounds.${m}`)), 9, m2), z(a("input", {
                type: "range",
                "onUpdate:modelValue": A => i.soundEffectVolume[m] = A,
                onChange: A => o.setSoundVolume(m),
                min: "0",
                max: "1",
                step: "0.1",
                "aria-labelledby": "sound-" + m
            }, null, 40, h2), [[W, i.soundEffectVolume[m], void 0, {
                number: !0
            }]]), a("span", p2, d(Math.round(i.soundEffectVolume[m] * 100)) + "%", 1)]))), 128)), a("li", null, [a("div", {
                class: "button",
                onClick: s[21] || (s[21] = m => i.isSoundSettings = !1)
            }, d(e.$t("common.button_close")), 1)])])) : (r(),
            u("ul", Lk, [e.session.sessionId ? (r(),
            u("li", zk, [a("span", Gk, d(e.$t("modals.settings.setting_avatar_size")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[0] || (s[0] = m => i.avatarZoom = m),
                onChange: s[1] || (s[1] = m => e.setAvatarZoom(i.avatarZoom)),
                min: "0.5",
                max: "3",
                step: "0.1",
                "aria-labelledby": "general-avatar"
            }, null, 544), [[W, i.avatarZoom, void 0, {
                number: !0
            }]]), a("span", Wk, d(Math.round(i.avatarZoom * 100)) + "%", 1)])) : p("", !0), a("li", null, [a("span", Fk, d(e.$t("modals.settings.setting_zoom")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[2] || (s[2] = m => i.zoom = m),
                onChange: s[3] || (s[3] = m => e.setTokenZoom(i.zoom)),
                min: "-10",
                max: "15",
                step: "1",
                "aria-labelledby": "general-token"
            }, null, 544), [[W, i.zoom, void 0, {
                number: !0
            }]]), a("span", Qk, d(Math.round(100 + i.zoom * 10)) + "%", 1)]), a("li", null, [a("span", Zk, d(e.$t("modals.settings.setting_reminder_zoom")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[4] || (s[4] = m => i.reminderZoom = m),
                onChange: s[5] || (s[5] = m => e.setReminderZoom(i.reminderZoom)),
                min: "0.5",
                max: "3",
                step: "0.1",
                "aria-labelledby": "general-reminder"
            }, null, 544), [[W, i.reminderZoom, void 0, {
                number: !0
            }]]), a("span", Xk, d(Math.round(i.reminderZoom * 100)) + "%", 1)]), a("li", null, [a("span", Kk, d(e.$t("modals.settings.setting_grimoire_offset")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[6] || (s[6] = m => i.grimoireOffset = m),
                onChange: s[7] || (s[7] = m => e.setGrimoireOffset(i.grimoireOffset)),
                min: "-90",
                max: "90",
                step: "5",
                "aria-labelledby": "general-offset"
            }, null, 544), [[W, i.grimoireOffset, void 0, {
                number: !0
            }]]), a("span", Yk, d(i.grimoireOffset) + "%", 1)]), a("li", null, [a("span", Jk, d(e.$t("modals.settings.setting_colorblind", [e.settings.general.colorblind])), 1), a("div", $k, [a("button", {
                class: "button",
                onClick: s[8] || (s[8] = M(m => o.setColorblindMode(-1), ["stop"])),
                "aria-labelledby": "general-colorblind"
            }, [b(l, {
                icon: "arrow-circle-left"
            })]), a("button", {
                class: "button",
                onClick: s[9] || (s[9] = M(m => o.setColorblindMode(1), ["stop"])),
                "aria-labelledby": "general-colorblind"
            }, [b(l, {
                icon: "arrow-circle-right"
            })])])]), a("li", {
                class: "toggle",
                onClick: s[10] || (s[10] = (...m) => o.setBackground && o.setBackground(...m))
            }, [a("span", xk, d(e.$t("modals.settings.setting_background")), 1), a("button", {
                class: y(["button", {
                    primary: e.grimoire.background
                }]),
                "aria-labelledby": "general-background"
            }, [b(l, {
                icon: "image"
            })], 2)]), a("li", {
                class: "toggle",
                onClick: s[11] || (s[11] = (...m) => e.toggleCosmeticsDisabled && e.toggleCosmeticsDisabled(...m))
            }, [a("span", e2, d(e.$t("modals.settings.setting_cosmetics")), 1), a("button", {
                class: y(["button", {
                    primary: !e.settings.general.isCosmeticsDisabled
                }]),
                "aria-labelledby": "general-cosmetics",
                "aria-pressed": !e.settings.general.isCosmeticsDisabled
            }, [b(l, {
                icon: e.settings.general.isCosmeticsDisabled ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, s2)]), a("li", {
                class: "toggle",
                onClick: s[12] || (s[12] = (...m) => e.toggleAnimationsDisabled && e.toggleAnimationsDisabled(...m))
            }, [a("span", t2, d(e.$t("modals.settings.setting_animations")), 1), a("button", {
                class: y(["button", {
                    primary: !e.settings.general.isAnimationsDisabled
                }]),
                "aria-labelledby": "general-animations",
                "aria-pressed": !e.settings.general.isAnimationsDisabled
            }, [b(l, {
                icon: e.settings.general.isAnimationsDisabled ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, i2)]), a("li", {
                class: "toggle",
                onClick: s[13] || (s[13] = (...m) => o.imageOptIn && o.imageOptIn(...m))
            }, [a("span", o2, d(e.$t("modals.settings.setting_homebrew")), 1), a("button", {
                class: y(["button", {
                    primary: e.settings.general.isImageOptIn
                }]),
                "aria-pressed": e.settings.general.isImageOptIn,
                "aria-labelledby": "general-custom"
            }, [b(l, {
                icon: e.settings.general.isImageOptIn ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, n2)]), a("li", {
                class: "toggle",
                onClick: s[14] || (s[14] = (...m) => e.togglePositioningDisabled && e.togglePositioningDisabled(...m))
            }, [a("span", a2, d(e.$t("modals.settings.setting_positioning")), 1), a("button", {
                class: y(["button", {
                    primary: !e.settings.general.isPositioningDisabled
                }]),
                "aria-pressed": !e.settings.general.isPositioningDisabled,
                "aria-labelledby": "general-tabs"
            }, [b(l, {
                icon: e.settings.general.isPositioningDisabled ? "circle" : "arrows-alt"
            }, null, 8, ["icon"])], 10, r2)]), a("li", {
                class: "toggle",
                onClick: s[18] || (s[18] = m => i.isSoundSettings = !0)
            }, [a("span", l2, d(e.$t("modals.settings.setting_volume")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[15] || (s[15] = m => i.soundVolume = m),
                onClick: s[16] || (s[16] = M( () => {}
                , ["stop"])),
                onChange: s[17] || (s[17] = M(m => o.setSoundVolume(), ["stop"])),
                min: "0",
                max: "1",
                step: "0.1",
                "aria-labelledby": "general-sound"
            }, null, 544), [[W, i.soundVolume, void 0, {
                number: !0
            }]]), a("span", c2, d(Math.round(i.soundVolume * 100)) + "%", 1), a("button", {
                class: y(["button", {
                    primary: [...e.settings.sounds].some( ([,m]) => m !== 1)
                }]),
                "aria-label": "Individual Sound Effects"
            }, [b(l, {
                icon: "cog"
            })], 2)])]))]),
            "tab-1": S( () => {
                var m;
                return [b(g, {
                    user: i.localUser,
                    stats: i.stats
                }, null, 8, ["user", "stats"]), e.user.level ? p("", !0) : (r(),
                C(c, {
                    key: 0,
                    tag: "p",
                    keypath: "modals.settings.patreon_perks",
                    scope: "global"
                }, {
                    default: S( () => [a("a", A2, d(e.$t("modals.settings.patreon_perks2")), 1)]),
                    _: 1
                })), a("div", b2, [a("a", {
                    class: "button primary",
                    href: `https://www.patreon.com/oauth2/authorize?response_type=code&client_id=b1XNd9IVV8Qn7Z5eXx3a2cEz0W8aaZq6UBM8y8L4vryXBTmdw15zA0ly1xCUIMdW&redirect_uri=${i.patreonCallback}&state=${e.user.id}`
                }, d(e.user.patreonId ? e.$t("modals.settings.patreon_update") : e.$t("modals.settings.patreon_link")), 9, f2), (m = e.user.flags) != null && m.includes("verified-phone") ? p("", !0) : (r(),
                u("a", {
                    key: 0,
                    class: "button primary",
                    onClick: s[22] || (s[22] = A => e.toggleModal({
                        name: "verification"
                    }))
                }, d(e.$t("modals.settings.button_verify")), 1)), a("a", v2, d(e.$t("modals.settings.button_edit")), 1), a("div", {
                    class: "button secondary",
                    onClick: s[23] || (s[23] = (...A) => o.logout && o.logout(...A))
                }, d(e.$t("common.button_logout")), 1)])]
            }
            ),
            "tab-2": S( () => [a("ul", null, [a("li", null, [a("span", _2, [a("b", null, d(e.$t("modals.settings.setting_microphone")), 1)]), z(a("select", {
                "onUpdate:modelValue": s[24] || (s[24] = m => i.audioSelection = m),
                onChange: s[25] || (s[25] = m => o.changePreference("audio")),
                "aria-labelledby": "chat-microphone"
            }, [a("option", y2, d(e.$t("modals.settings.option_disabled")), 1), (r(!0),
            u(_, null, B(i.audioList, (m, A) => (r(),
            u("option", {
                key: A,
                value: m.deviceId
            }, d(m.label || e.$t("modals.settings.setting_audio_unnamed") + " " + A), 9, w2))), 128))], 544), [[Ae, i.audioSelection]]), a("button", {
                onClick: s[26] || (s[26] = m => o.toggleAudioMuted()),
                class: y(["button", {
                    secondary: e.chat.audio.device && e.chat.audio.isMuted,
                    primary: e.chat.audio.device && !e.chat.audio.isMuted,
                    disabled: !e.chat.audio.device || e.chat.audio.isPushToTalk
                }]),
                "aria-label": e.$t("modals.settings.setting_mute_audio"),
                "aria-pressed": e.chat.audio.isMuted
            }, [b(l, {
                icon: e.chat.audio.isMuted ? "microphone-slash" : "microphone"
            }, null, 8, ["icon"])], 10, k2)]), a("li", null, [a("span", C2, d(e.$t("modals.settings.setting_gain")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[27] || (s[27] = m => i.volume = m),
                onChange: s[28] || (s[28] = (...m) => o.setAudioVolume && o.setAudioVolume(...m)),
                min: "0",
                max: "2",
                step: "0.1",
                "aria-labelledby": "chat-gain"
            }, null, 544), [[W, i.volume, void 0, {
                number: !0
            }]]), a("span", S2, d(Math.round(i.volume * 100)) + "%", 1)]), a("li", {
                class: "toggle",
                onClick: s[29] || (s[29] = m => e.toggleAutoGainControl())
            }, [a("span", P2, d(e.$t("modals.settings.setting_auto_gain")), 1), a("button", {
                class: y(["button", {
                    primary: e.chat.audio.isAutoGainControl
                }]),
                "aria-pressed": e.chat.audio.isAutoGainControl,
                "aria-labelledby": "chat-autogain"
            }, [b(l, {
                icon: e.chat.audio.isAutoGainControl ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, T2)]), a("li", {
                class: "toggle",
                onClick: s[30] || (s[30] = m => e.toggleNoiseSuppression())
            }, [a("span", I2, d(e.$t("modals.settings.setting_noise_suppression")), 1), a("button", {
                class: y(["button", {
                    primary: e.chat.audio.isNoiseSuppression
                }]),
                "aria-pressed": e.chat.audio.isNoiseSuppression,
                "aria-labelledby": "chat-noise"
            }, [b(l, {
                icon: e.chat.audio.isNoiseSuppression ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, M2)]), a("li", {
                class: "toggle",
                onClick: s[31] || (s[31] = m => e.toggleEchoCancellation())
            }, [a("span", R2, d(e.$t("modals.settings.setting_echo_cancellation")), 1), a("button", {
                class: y(["button", {
                    primary: e.chat.audio.isEchoCancellation
                }]),
                "aria-pressed": e.chat.audio.isEchoCancellation,
                "aria-labelledby": "chat-echo"
            }, [b(l, {
                icon: e.chat.audio.isEchoCancellation ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, D2)]), a("li", {
                class: "toggle",
                onClick: s[32] || (s[32] = m => o.togglePushToTalk())
            }, [a("span", E2, d(e.$t("modals.settings.setting_ptt")), 1), a("button", {
                class: y(["button", {
                    primary: e.chat.audio.isPushToTalk
                }]),
                "aria-pressed": e.chat.audio.isPushToTalk,
                "aria-labelledby": "chat-ptt"
            }, [b(l, {
                icon: e.chat.audio.isPushToTalk ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, N2)]), a("li", {
                class: "toggle",
                onClick: s[33] || (s[33] = m => o.deafen("audio"))
            }, [a("span", B2, d(e.$t("modals.settings.setting_audio_deafen")), 1), a("button", {
                class: y(["button", {
                    primary: !e.chat.audio.isDeafened
                }]),
                "aria-pressed": !e.chat.audio.isDeafened,
                "aria-labelledby": "chat-deafen"
            }, [b(l, {
                icon: e.chat.audio.isDeafened ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, V2)]), a("li", null, [a("span", O2, [a("b", null, d(e.$t("modals.settings.setting_camera")), 1)]), z(a("select", {
                "onUpdate:modelValue": s[34] || (s[34] = m => i.videoSelection = m),
                onChange: s[35] || (s[35] = m => o.changePreference("video")),
                "aria-labelledby": "chat-camera"
            }, [a("option", j2, d(e.$t("modals.settings.option_disabled")), 1), (r(!0),
            u(_, null, B(i.videoList, (m, A) => (r(),
            u("option", {
                key: A,
                value: m.deviceId
            }, d(m.label || e.$t("modals.settings.setting_video_unnamed") + " " + A), 9, U2))), 128))], 544), [[Ae, i.videoSelection]]), e.chat.video.device ? (r(),
            u("button", {
                key: 1,
                class: y(["button", e.chat.video.isMuted ? "secondary" : "primary"]),
                "aria-label": e.$t("modals.settings.setting_mute_video"),
                "aria-pressed": e.chat.video.isMuted,
                onClick: s[37] || (s[37] = m => e.toggleVideoMuted())
            }, [b(l, {
                icon: e.chat.video.isMuted ? "video-slash" : "video"
            }, null, 8, ["icon"])], 10, q2)) : (r(),
            u("button", {
                key: 0,
                class: "button",
                onClick: s[36] || (s[36] = m => o.changePreference("video")),
                disabled: !o.canChat || !i.videoList.length || !i.videoSelection
            }, [b(l, {
                icon: "video"
            })], 8, H2))]), a("li", {
                class: "toggle",
                onClick: s[38] || (s[38] = m => o.deafen("video"))
            }, [a("span", L2, d(e.$t("modals.settings.setting_video_deafen")), 1), a("button", {
                class: y(["button", {
                    primary: !e.chat.video.isDeafened
                }]),
                "aria-pressed": !e.chat.video.isDeafened,
                "aria-labelledby": "chat-camfeeds"
            }, [b(l, {
                icon: e.chat.video.isDeafened ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, z2)]), e.chat.video.isDeafened ? p("", !0) : (r(),
            u("li", {
                key: 0,
                class: "toggle",
                onClick: s[39] || (s[39] = m => e.toggleVideoHidden())
            }, [a("span", G2, d(e.$t("modals.settings.setting_video_hidden")), 1), a("button", {
                class: y(["button", {
                    primary: e.chat.video.isHidden
                }]),
                "aria-pressed": e.chat.video.isHidden,
                "aria-labelledby": "chat-hide"
            }, [b(l, {
                icon: e.chat.video.isHidden ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, W2)])), !e.chat.video.isDeafened && !e.chat.video.isHidden ? (r(),
            u("li", {
                key: 1,
                class: "toggle",
                onClick: s[40] || (s[40] = m => e.toggleVideoUnmirrored())
            }, [a("span", F2, d(e.$t("modals.settings.setting_video_mirrored")), 1), a("button", {
                class: y(["button", {
                    primary: !e.chat.video.isUnmirrored
                }]),
                "aria-pressed": !e.chat.video.isUnmirrored,
                "aria-labelledby": "chat-mirror"
            }, [b(l, {
                icon: e.chat.video.isUnmirrored ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, Q2)])) : p("", !0), a("li", null, [a("span", null, [a("b", null, d(e.$t("modals.settings.setup")), 1)]), a("div", {
                class: "button secondary",
                onClick: s[41] || (s[41] = (...m) => o.toggleSetup && o.toggleSetup(...m)),
                role: "button",
                "aria-label": "Run Chat Setup"
            }, d(e.$t("modals.settings.button_setup")), 1)])])]),
            "tab-3": S( () => [a("ul", null, [a("li", {
                class: "toggle",
                onClick: s[42] || (s[42] = (...m) => e.toggleTutorialDisabled && e.toggleTutorialDisabled(...m))
            }, [a("span", Z2, d(e.$t("modals.settings.setting_tutorial")), 1), a("button", {
                class: y(["button", {
                    primary: !e.settings.game.isTutorialDisabled
                }]),
                "aria-pressed": !e.settings.game.isTutorialDisabled,
                "aria-labelledby": "game-tutorial"
            }, [b(l, {
                icon: e.settings.game.isTutorialDisabled ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, X2)]), e.$i18n.locale !== i.defaultLocale ? (r(),
            u("li", {
                key: 0,
                class: "toggle",
                onClick: s[43] || (s[43] = m => e.toggleEnglishNames())
            }, [a("span", K2, d(e.$t("modals.settings.setting_english")), 1), a("button", {
                class: y(["button", {
                    primary: e.settings.game.isEnglishNames
                }]),
                "aria-pressed": e.settings.game.isEnglishNames,
                "aria-labelledby": "game-english"
            }, [b(l, {
                icon: e.settings.game.isEnglishNames ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, Y2)])) : p("", !0), a("li", {
                class: "toggle",
                onClick: s[44] || (s[44] = m => e.toggleStackReminderTokens())
            }, [a("span", J2, d(e.$t("modals.settings.setting_reminders")), 1), a("button", {
                class: y(["button", {
                    primary: e.settings.game.stackReminderTokens !== null
                }]),
                "aria-pressed": e.settings.game.stackReminderTokens !== null,
                "aria-labelledby": "game-stack"
            }, [e.settings.game.stackReminderTokens === !0 ? (r(),
            u(_, {
                key: 0
            }, [v(d(e.$t("modals.settings.setting_reminders_always")), 1)], 64)) : e.settings.game.stackReminderTokens === !1 ? (r(),
            u(_, {
                key: 1
            }, [v(d(e.$t("modals.settings.setting_reminders_never")), 1)], 64)) : (r(),
            u(_, {
                key: 2
            }, [v(d(e.$t("modals.settings.setting_reminders_auto")), 1)], 64))], 10, $2)]), e.isStoryteller ? (r(),
            u(_, {
                key: 2
            }, [a("li", {
                class: "toggle",
                onClick: s[49] || (s[49] = (...m) => e.toggleNightOrder && e.toggleNightOrder(...m))
            }, [a("span", r0, d(e.$t("modals.settings.setting_st_night")), 1), a("button", {
                class: y(["button", {
                    primary: e.settings.game.isNightOrder
                }]),
                "aria-pressed": e.settings.game.isNightOrder,
                "aria-labelledby": "game-waking"
            }, [b(l, {
                icon: e.settings.game.isNightOrder ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, l0)]), e.vote.locked <= 0 && !e.vote.isInProgress ? (r(),
            u("li", c0, [a("span", d0, d(e.$t("modals.settings.setting_st_vote")), 1), z(a("input", {
                type: "range",
                "onUpdate:modelValue": s[50] || (s[50] = m => i.voteSpeed = m),
                onChange: s[51] || (s[51] = (...m) => o.setVotingSpeed && o.setVotingSpeed(...m)),
                min: "500",
                max: "4000",
                step: "100",
                "aria-labelledby": "game-votetime"
            }, null, 544), [[W, i.voteSpeed, void 0, {
                number: !0
            }]]), a("span", u0, d((i.voteSpeed / 1e3).toFixed(2)) + "s", 1)])) : p("", !0), e.vote.locked <= 0 && !e.vote.isInProgress ? (r(),
            u("li", {
                key: 1,
                class: "toggle",
                "data-tooltip": e.$t(`modals.settings.nomination.${e.vote.nominationType}.text`),
                onClick: s[52] || (s[52] = (...m) => o.toggleNominationType && o.toggleNominationType(...m))
            }, [a("span", m0, d(e.$t("modals.settings.setting_st_nomination")), 1), a("button", {
                class: y(["button", {
                    primary: e.vote.nominationType !== "regular"
                }]),
                "aria-labelledby": "game-nomination"
            }, d(e.$t(`modals.settings.nomination.${e.vote.nominationType}.title`)), 3)], 8, g0)) : p("", !0), a("li", {
                onClick: s[53] || (s[53] = (...m) => o.toggleWhispers && o.toggleWhispers(...m))
            }, [a("span", h0, d(e.$t("modals.settings.setting_st_whisper")), 1), a("button", {
                class: y(["button", {
                    primary: !e.session.isWhispersDisabled,
                    disabled: !e.isStoryteller
                }]),
                "aria-pressed": !e.session.isWhispersDisabled,
                "aria-labelledby": "game-whisper"
            }, [b(l, {
                icon: e.session.isWhispersDisabled ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, p0)])], 64)) : (r(),
            u(_, {
                key: 1
            }, [a("li", {
                class: "toggle",
                onClick: s[45] || (s[45] = (...m) => e.togglePlayerNightOrder && e.togglePlayerNightOrder(...m))
            }, [a("span", x2, d(e.$t("modals.settings.setting_player_night")), 1), a("button", {
                class: y(["button", {
                    primary: e.settings.game.isPlayerNightOrder
                }]),
                "aria-pressed": e.settings.game.isPlayerNightOrder,
                "aria-labelledby": "game-nightorder"
            }, [b(l, {
                icon: e.settings.game.isPlayerNightOrder ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, e0)]), a("li", {
                class: "toggle",
                onClick: s[46] || (s[46] = (...m) => e.togglePlayerBluffs && e.togglePlayerBluffs(...m))
            }, [a("span", s0, d(e.$t("modals.settings.setting_player_bluffs")), 1), a("button", {
                class: y(["button", {
                    primary: e.settings.game.isPlayerBluffs
                }]),
                "aria-pressed": e.settings.game.isPlayerBluffs,
                "aria-labelledby": "game-bluffs"
            }, [b(l, {
                icon: e.settings.game.isPlayerBluffs ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, t0)]), a("li", {
                class: "toggle",
                onClick: s[47] || (s[47] = (...m) => e.togglePlayerDuplicates && e.togglePlayerDuplicates(...m))
            }, [a("span", i0, d(e.$t("modals.settings.setting_player_reminders")), 1), a("button", {
                class: y(["button", {
                    primary: e.settings.game.isPlayerDuplicates
                }]),
                "aria-pressed": e.settings.game.isPlayerDuplicates,
                "aria-labelledby": "game-duplicate"
            }, [b(l, {
                icon: e.settings.game.isPlayerDuplicates ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, o0)]), a("li", {
                class: "toggle",
                onClick: s[48] || (s[48] = (...m) => e.toggleNightRequestPing && e.toggleNightRequestPing(...m))
            }, [a("span", n0, d(e.$t("modals.settings.setting_player_sound")), 1), a("button", {
                class: y(["button", {
                    primary: e.settings.game.isNightRequestPing
                }]),
                "aria-pressed": e.settings.game.isNightRequestPing,
                "aria-labelledby": "game-chatsound"
            }, [b(l, {
                icon: e.settings.game.isNightRequestPing ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, a0)])], 64))])]),
            "tab-4": S( () => [a("ul", A0, [(r(!0),
            u(_, null, B(e.keybindings, (m, A) => (r(),
            u("li", {
                key: A,
                onClick: f => o.recordShortcut(A)
            }, [a("span", {
                id: "shortcut-" + A
            }, d(e.$t(`modals.settings.shortcuts.${A}`)), 9, f0), (r(!0),
            u(_, null, B(m, f => (r(),
            u("em", {
                role: "button",
                "aria-labelledby": "shortcut-" + A,
                key: f
            }, d(f.trim()), 9, v0))), 128)), b(l, {
                onClick: M(f => o.recordShortcut(A, !0), ["stop"]),
                icon: "plus-circle",
                role: "button",
                "aria-label": e.$t("modals.settings.shortcut_add")
            }, null, 8, ["onClick", "aria-label"])], 8, b0))), 128)), o.isTouchDevice ? (r(),
            u("li", {
                key: 0,
                onClick: s[54] || (s[54] = m => e.toggleTouchSupport()),
                "data-tooltip": e.$t("modals.settings.shortcut_touch_text")
            }, [a("span", null, d(e.$t("modals.settings.shortcut_touch")), 1), b(l, {
                icon: e.settings.game.isTouchSupport ? "check-circle" : "circle",
                role: "checkbox",
                "aria-pressed": e.settings.game.isTouchSupport
            }, null, 8, ["icon", "aria-pressed"])], 8, _0)) : p("", !0), a("li", {
                onClick: s[55] || (s[55] = m => o.resetShortcuts())
            }, [a("div", y0, d(e.$t("modals.settings.shortcut_reset")), 1)])]), i.isRecording ? (r(),
            u("div", w0, [b(c, {
                keypath: "modals.settings.shortcut_record",
                scope: "global"
            }, {
                default: S( () => [a("b", null, d(e.$t(`modals.settings.shortcuts.${i.isRecording}`)), 1)]),
                _: 1
            }), a("input", {
                ref: "shortcut",
                type: "text",
                onKeyup: s[56] || (s[56] = M( (...m) => o.keyup && o.keyup(...m), ["stop"])),
                onBlur: s[57] || (s[57] = (...m) => o.cancelShortcut && o.cancelShortcut(...m))
            }, null, 544), a("small", null, d(e.$t("modals.settings.shortcut_escape")), 1)])) : p("", !0)]),
            "tab-5": S( () => [a("ul", null, [a("li", {
                class: "toggle",
                onClick: s[58] || (s[58] = (...m) => e.toggleNightStatic && e.toggleNightStatic(...m))
            }, [a("span", k0, d(e.$t("modals.settings.setting_clouds")), 1), a("button", {
                class: y(["button", {
                    primary: !e.settings.advanced.hasNightStatic
                }]),
                "aria-pressed": !e.settings.advanced.hasNightStatic,
                "aria-labelledby": "advanced-clouds"
            }, [b(l, {
                icon: e.settings.advanced.hasNightStatic ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, C0)]), a("li", {
                class: "toggle",
                onClick: s[59] || (s[59] = (...m) => e.togglePublicTownSquare && e.togglePublicTownSquare(...m))
            }, [a("span", S0, d(e.$t("modals.settings.setting_alignment")), 1), a("button", {
                class: y(["button", {
                    primary: !e.settings.advanced.hasPublicTownSquare
                }]),
                "aria-pressed": !e.settings.advanced.hasPublicTownSquare,
                "aria-labelledby": "advanced-alignment"
            }, [b(l, {
                icon: e.settings.advanced.hasPublicTownSquare ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, P0)]), a("li", {
                class: "toggle",
                onClick: s[60] || (s[60] = (...m) => e.toggleHiddenTownSquareCams && e.toggleHiddenTownSquareCams(...m))
            }, [a("span", T0, d(e.$t("modals.settings.setting_avatars")), 1), a("button", {
                class: y(["button", {
                    primary: !e.settings.advanced.hasHiddenTownSquareCams
                }]),
                "aria-pressed": !e.settings.advanced.hasHiddenTownSquareCams,
                "aria-labelledby": "advanced-avatars"
            }, [b(l, {
                icon: e.settings.advanced.hasHiddenTownSquareCams ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, I0)]), e.isStoryteller ? (r(),
            u("li", {
                key: 0,
                class: "toggle",
                onClick: s[61] || (s[61] = (...m) => e.toggleHiddenPrivateCams && e.toggleHiddenPrivateCams(...m))
            }, [a("span", M0, d(e.$t("modals.settings.setting_private_cams")), 1), a("button", {
                class: y(["button", {
                    primary: !e.settings.advanced.hasHiddenPrivateCams
                }]),
                "aria-pressed": !e.settings.advanced.hasHiddenPrivateCams,
                "aria-labelledby": "advanced-chatcams"
            }, [b(l, {
                icon: e.settings.advanced.hasHiddenPrivateCams ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, R0)])) : p("", !0), a("li", {
                class: "toggle",
                onClick: s[62] || (s[62] = (...m) => e.toggleHiddenRevealCams && e.toggleHiddenRevealCams(...m))
            }, [a("span", D0, d(e.$t("modals.settings.setting_reveal")), 1), a("button", {
                class: y(["button", {
                    primary: !e.settings.advanced.hasHiddenRevealCams
                }]),
                "aria-pressed": !e.settings.advanced.hasHiddenRevealCams,
                "aria-labelledby": "advanced-grimcams"
            }, [b(l, {
                icon: e.settings.advanced.hasHiddenRevealCams ? "circle" : "check-circle"
            }, null, 8, ["icon"])], 10, E0)]), a("li", N0, [a("label", B0, d(e.$t("modals.settings.setting_chroma")), 1), z(a("input", {
                onChange: s[63] || (s[63] = m => o.setChroma()),
                type: "color",
                class: "button",
                "onUpdate:modelValue": s[64] || (s[64] = m => i.chroma = m),
                "aria-label": e.$t("modals.settings.setting_chroma_label")
            }, null, 40, V0), [[W, i.chroma]]), a("button", {
                id: "chroma",
                class: y(["button", {
                    primary: e.settings.advanced.chromaKey
                }]),
                "aria-pressed": e.settings.advanced.chromaKey,
                onClick: s[65] || (s[65] = m => o.setChroma(!0))
            }, [b(l, {
                icon: e.settings.advanced.chromaKey ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, O0)]), a("li", j0, [a("label", U0, d(e.$t("modals.settings.setting_css")), 1), a("button", {
                id: "css",
                class: y(["button", {
                    primary: e.settings.advanced.customCSS
                }]),
                onClick: s[66] || (s[66] = M(m => o.setCustomCSS(), ["stop"])),
                "aria-label": e.$t("modals.settings.setting_css_label")
            }, [b(l, {
                icon: "file-code"
            })], 10, H0), a("button", {
                class: y(["button", {
                    primary: e.settings.advanced.customCSSEnabled
                }]),
                "aria-pressed": e.settings.advanced.customCSSEnabled,
                onClick: s[67] || (s[67] = m => o.toggleCustomCSS())
            }, [b(l, {
                icon: e.settings.advanced.customCSSEnabled ? "check-circle" : "circle"
            }, null, 8, ["icon"])], 10, q0)])])]),
            _: 1
        }, 8, ["onTabChange", "tabs"])) : p("", !0)]),
        _: 1
    })
}
const _l = O(qk, [["render", L0], ["__scopeId", "data-v-56035a4d"]])
  , z0 = "/assets/app-icon-CG9GQKA7.webp"
  , G0 = {
    components: {
        Modal: se
    },
    computed: I(["modal", "session"]),
    data() {
        return {
            version: le.version,
            recoding: !1
        }
    },
    methods: {
        ...j(["toggleModal"]),
        startReplay() {
            const e = Ra();
            e && (e.flush(),
            this.recoding = !0)
        },
        stopReplay() {
            const e = Ra();
            e && (e.stop(),
            this.recoding = !1)
        }
    }
}
  , W0 = {
    class: "content"
}
  , F0 = {
    href: "https://feedback.botc.app/",
    target: "_blank"
}
  , Q0 = {
    href: "mailto:support@botc.app",
    target: "_blank"
}
  , Z0 = {
    href: "https://bloodontheclocktower.com/account",
    target: "_blank"
}
  , X0 = {
    href: "https://bloodontheclocktower.com/products/blood-on-the-clocktower-the-game",
    target: "_blank"
}
  , K0 = {
    key: 0,
    class: "recording"
}
  , Y0 = {
    key: 1,
    class: "recording"
}
  , J0 = {
    href: "https://bloodontheclocktower.com/terms-of-use",
    target: "_blank"
}
  , $0 = {
    href: "https://bloodontheclocktower.com/privacy-policy",
    target: "_blank"
}
  , x0 = {
    href: "https://bloodontheclocktower.com/cookie-policy",
    target: "_blank"
}
  , eC = {
    class: "footer"
};
function sC(e, s, t, n, i, o) {
    const l = k("i18n-t")
      , g = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "help" ? (r(),
        C(g, {
            key: 0,
            class: "help",
            onClose: s[2] || (s[2] = c => e.toggleModal(e.modal))
        }, {
            default: S( () => [s[11] || (s[11] = a("div", {
                class: "header"
            }, [a("img", {
                src: z0,
                alt: "",
                class: "logo app"
            })], -1)), a("div", W0, [b(l, {
                keypath: "modals.help.welcome",
                scope: "global"
            }, {
                default: S( () => [a("em", null, d(e.$t("common.title")), 1)]),
                _: 1
            }), s[8] || (s[8] = a("br", null, null, -1)), v(" " + d(e.$t("modals.help.text1", {
                version: i.version
            })) + " ", 1), s[9] || (s[9] = a("br", null, null, -1)), b(l, {
                keypath: "modals.help.text2",
                scope: "global"
            }, {
                default: S( () => [a("a", F0, d(e.$t("modals.help.link_0")), 1), a("a", Q0, d(e.$t("modals.help.link_1")), 1), a("a", Z0, d(e.$t("modals.help.link_2")), 1), a("a", X0, d(e.$t("modals.help.link_3")), 1)]),
                _: 1
            }), s[10] || (s[10] = a("br", null, null, -1)), i.recoding ? (r(),
            u("div", Y0, [v(d(e.$t("modals.help.session_debug2")) + " ", 1), s[4] || (s[4] = a("br", null, null, -1)), a("div", {
                class: "button secondary",
                onClick: s[1] || (s[1] = (...c) => o.stopReplay && o.stopReplay(...c))
            }, d(e.$t("modals.help.button_stop")), 1)])) : (r(),
            u("div", K0, [v(d(e.$t("modals.help.session_debug")) + " ", 1), s[3] || (s[3] = a("br", null, null, -1)), a("div", {
                class: "button primary",
                onClick: s[0] || (s[0] = (...c) => o.startReplay && o.startReplay(...c))
            }, d(e.$t("modals.help.button_send")), 1)])), a("small", null, [v(d(e.$t("modals.dialogue.terms")) + " ", 1), a("a", J0, d(e.$t("common.terms_of_use")), 1), s[5] || (s[5] = v(", ", -1)), a("a", $0, d(e.$t("common.privacy_policy")), 1), s[6] || (s[6] = v(" & ", -1)), a("a", x0, d(e.$t("common.cookie_policy")), 1), s[7] || (s[7] = v(". ", -1))]), a("div", eC, d(e.$t("common.trademark")), 1)]), s[12] || (s[12] = a("div", {
                class: "authors"
            }, [a("img", {
                src: Pe,
                alt: "",
                class: "logo tpi"
            }), a("img", {
                src: Oe,
                alt: "",
                class: "logo sb"
            })], -1))]),
            _: 1
        })) : p("", !0)]),
        _: 1
    })
}
const yl = O(G0, [["render", sC], ["__scopeId", "data-v-0d72cf42"]])
  , tC = {
    name: "StorytellerOverlay",
    components: {
        Emote: hl
    },
    props: {
        storyteller: {
            type: Object,
            required: !0
        }
    },
    computed: {
        ...I(["chat"]),
        ...D(["roleIconURL"]),
        ...D("game", ["isNight"]),
        ...D("chat", ["whispersAvailable", "textsAvailable", "isPrivateChat"])
    },
    data() {
        return {}
    },
    methods: {
        ...$("chat", ["requestWhisper", "showTextTab"])
    }
}
  , iC = {
    class: "overlay"
};
function oC(e, s, t, n, i, o) {
    const l = k("Emote")
      , g = k("font-awesome-icon");
    return r(),
    u("div", iC, [t.storyteller.id ? (r(),
    C(l, {
        key: 0,
        "player-id": t.storyteller.id
    }, null, 8, ["player-id"])) : p("", !0), b(q, {
        name: "zoom"
    }, {
        default: S( () => [e.chat.isPrompt && e.whispersAvailable.has(t.storyteller.id) ? (r(),
        C(g, {
            key: 0,
            icon: e.isPrivateChat(e.chat.channel) && !e.isNight ? "user-plus" : "comments",
            class: "whisper",
            title: e.$t("player.menu.chat"),
            onClick: s[0] || (s[0] = M(c => e.requestWhisper(t.storyteller), ["stop"]))
        }, null, 8, ["icon", "title"])) : p("", !0)]),
        _: 1
    }), b(q, {
        name: "zoom"
    }, {
        default: S( () => [e.chat.isPrompt && e.textsAvailable.has(t.storyteller.id) ? (r(),
        C(g, {
            key: 0,
            icon: "envelope",
            class: "whisper text",
            title: e.$t("player.menu.whisper"),
            onClick: s[1] || (s[1] = M(c => e.showTextTab(t.storyteller.id), ["stop"]))
        }, null, 8, ["title"])) : p("", !0)]),
        _: 1
    })])
}
const nC = O(tC, [["render", oC], ["__scopeId", "data-v-af7d1b40"]])
  , Ca = {
    name: "Storyteller",
    inject: ["renderReminderHTML"],
    components: {
        StorytellerOverlay: nC,
        ChatAudio: pl,
        ChatVideo: da,
        PlayerReminders: la,
        Token: fe
    },
    computed: {
        ...I(["session", "chat", "grimoire", "vote", "positions", "settings"]),
        ...I("players", ["storytellers", "players"]),
        ...I("user", ["user"]),
        ...D("user", ["isStoryteller", "isSpectator", "hasGrimoireAccess"]),
        ...D("chat", ["isVideoWhisper", "whispersAvailable", "textsAvailable"]),
        ...D("game", ["isNight"]),
        ...D("players", ["nightOrder", "playerName"]),
        ...D(["roleIconURL"]),
        activeSTs() {
            return this.storytellers.filter(e => e.id).slice(0, this.session.sessionId ? void 0 : 1)
        },
        avatarZoom() {
            return this.settings.general.avatarZoom
        }
    },
    data() {
        return {}
    },
    methods: {
        ...j(["setTab", "toggleModal", "setMenuOpen"]),
        ...$("chat", ["requestWhisper", "followUser", "showTextTab"]),
        removeStoryteller(e) {
            this.isStoryteller && this.$store.commit("players/removeStoryteller", e),
            this.setMenuOpen()
        },
        requestGrimoire() {
            var e, s, t;
            if (this.isSpectator && !((e = this.session.users.get(this.user.id)) != null && e.grimoireAccess) && !(this.session.meta.isPublic && ((s = this.session.meta.tags) == null ? void 0 : s.grimoire) === 2)) {
                if (this.session.meta.isPublic && !this.user.level && ((t = this.user.flags) != null && t.includes("newuser")))
                    return this.$store.dispatch("openDialogue", {
                        type: "alert",
                        title: "storyteller.prompt_grim_title",
                        text: "storyteller.prompt_grim_text"
                    });
                this.$store.commit("user/requestGrimoire", {
                    status: 1
                })
            }
        }
    }
}
  , Gr = () => {
    be(e => ({
        v13977e08: e.avatarZoom
    }))
}
  , Wr = Ca.setup;
Ca.setup = Wr ? (e, s) => (Gr(),
Wr(e, s)) : Gr;
const aC = ["onClick"]
  , rC = {
    key: 0,
    class: "night-order first"
}
  , lC = {
    key: 0
}
  , cC = ["innerHTML"]
  , dC = {
    key: 0,
    class: "night-order other"
}
  , uC = {
    key: 0
}
  , gC = ["innerHTML"]
  , mC = ["title"]
  , hC = {
    class: "name"
}
  , pC = ["title"]
  , AC = ["title"]
  , bC = ["title"]
  , fC = ["title"]
  , vC = {
    key: 0,
    class: "pronouns"
}
  , _C = {
    key: 0,
    class: "menu"
}
  , yC = ["onClick"]
  , wC = ["onClick"]
  , kC = ["onClick"]
  , CC = ["onClick"]
  , SC = ["onClick"]
  , PC = ["onClick"];
function TC(e, s, t, n, i, o) {
    const l = k("ChatVideo")
      , g = k("Token")
      , c = k("PlayerReminders")
      , h = k("StorytellerOverlay")
      , m = k("font-awesome-icon")
      , A = k("ChatAudio");
    return r(),
    u(_, null, [a("h1", null, d(e.$t("storyteller.title")), 1), e.players.length || e.session.sessionId ? (r(),
    C(Ye, {
        key: 0,
        name: "list",
        tag: "ul",
        role: "list",
        class: "storytellers"
    }, {
        default: S( () => [(r(!0),
        u(_, null, B(o.activeSTs, (f, T) => {
            var w, V, N, U, P, E, R, Z, H, G, K, J, x, ce, oe;
            return r(),
            u("li", {
                class: y(["storyteller", [{
                    "in-chat": !e.isNight && (e.chat.userChannels.get(f.id) || "") !== e.chat.channel || e.chat.channel && e.isVideoWhisper && !((w = e.positions.whisper) != null && w.minimized),
                    "in-whisper": e.chat.channel && e.chat.channel === (e.chat.userChannels.get(f.id) || ""),
                    "has-role": !e.grimoire.isTownSquare && ((V = f.role) == null ? void 0 : V.id),
                    "menu-open": e.grimoire.menuOpen === "s" + T,
                    ["id-" + f.id]: f.id
                }, (U = (N = e.session.users.get(f.id)) == null ? void 0 : N.flags) == null ? void 0 : U.map(te => "flag-" + te)]]),
                key: T,
                onClick: M(te => e.setMenuOpen("s" + T), ["stop"])
            }, [b(l, {
                "user-id": f.id
            }, null, 8, ["user-id"]), b(g, {
                role: f.role,
                alignment: f.alignment
            }, null, 8, ["role", "alignment"]), b(q, {
                name: "fade"
            }, {
                default: S( () => {
                    var te, ge, ne, ae;
                    return [(ge = e.nightOrder.get((te = f.role) == null ? void 0 : te.id)) != null && ge.first && e.settings.game.isNightOrder && e.isNight && e.hasGrimoireAccess ? (r(),
                    u("div", rC, [a("em", null, d((ae = e.nightOrder.get((ne = f.role) == null ? void 0 : ne.id)) == null ? void 0 : ae.first), 1), f.role.firstNightReminder ? (r(),
                    u("div", lC, [a("aside", null, d(e.$t("grimoire.phases.first_night")), 1), a("span", {
                        class: "reminder",
                        innerHTML: o.renderReminderHTML(e.$t(`roles.${f.role.id}.first`, f.role.firstNightReminder))
                    }, null, 8, cC)])) : p("", !0)])) : p("", !0)]
                }
                ),
                _: 2
            }, 1024), b(q, {
                name: "fade"
            }, {
                default: S( () => {
                    var te, ge, ne, ae;
                    return [(ge = e.nightOrder.get((te = f.role) == null ? void 0 : te.id)) != null && ge.other && e.settings.game.isNightOrder && e.isNight && e.hasGrimoireAccess ? (r(),
                    u("div", dC, [a("em", null, d((ae = e.nightOrder.get((ne = f.role) == null ? void 0 : ne.id)) == null ? void 0 : ae.other), 1), f.role.otherNightReminder ? (r(),
                    u("div", uC, [a("aside", null, d(e.$t("grimoire.phases.other_nights")), 1), a("span", {
                        class: "reminder",
                        innerHTML: o.renderReminderHTML(e.$t(`roles.${f.role.id}.other`, f.role.otherNightReminder))
                    }, null, 8, gC)])) : p("", !0)])) : p("", !0)]
                }
                ),
                _: 2
            }, 1024), b(c, {
                player: f
            }, null, 8, ["player"]), b(h, {
                storyteller: f
            }, null, 8, ["storyteller"]), a("div", {
                class: y(["nameplate", {
                    ["border-" + ((E = (P = e.session.users.get(f.id)) == null ? void 0 : P.cosmetics) == null ? void 0 : E.border)]: !!((Z = (R = e.session.users.get(f.id)) == null ? void 0 : R.cosmetics) != null && Z.border),
                    ["level-" + ((H = e.session.users.get(f.id)) == null ? void 0 : H.level)]: !!((G = e.session.users.get(f.id)) != null && G.level)
                }]),
                title: (K = e.session.users.get(f.id)) == null ? void 0 : K.pronouns,
                style: L({
                    "--speaking": `var(--speaking${f.id})`
                })
            }, [a("div", hC, [e.session.sessionId ? (r(),
            u(_, {
                key: 0
            }, [e.chat.following === f.id && e.hasGrimoireAccess ? (r(),
            u("div", {
                key: 0,
                title: e.$t("storyteller.following")
            }, [b(m, {
                icon: "link"
            })], 8, pC)) : p("", !0), (J = e.session.users.get(f.id)) != null && J.isOnline ? !e.chat.consumers.has(f.id) && f.id !== e.user.id ? (r(),
            u("div", {
                key: 2,
                title: e.$t("storyteller.connecting")
            }, [b(m, {
                icon: "hourglass-half",
                class: "audio"
            })], 8, bC)) : p("", !0) : (r(),
            u("div", {
                key: 1,
                title: e.$t("storyteller.offline")
            }, [b(m, {
                icon: "user-slash",
                class: "offline"
            })], 8, AC))], 64)) : p("", !0), !e.isNight && e.chat.video.streams.get(f.id) && ((x = e.chat.usersMuted[f.id]) != null && x.video) ? (r(),
            u("div", {
                key: 1,
                title: e.$t("overlays.whisper.video_muted")
            }, [b(m, {
                class: y(["video muted", {
                    silenced: e.chat.userOverrides.get("novideo-" + f.id) === 0
                }]),
                icon: "video-slash"
            }, null, 8, ["class"])], 8, fC)) : p("", !0), b(A, {
                "user-id": f.id
            }, null, 8, ["user-id"]), a("span", null, d(e.$t(...e.playerName(f))), 1)]), (ce = e.session.users.get(f.id)) != null && ce.pronouns ? (r(),
            u("div", vC, d((oe = e.session.users.get(f.id)) == null ? void 0 : oe.pronouns), 1)) : p("", !0)], 14, mC), b(q, {
                name: "fold"
            }, {
                default: S( () => {
                    var te, ge;
                    return [e.grimoire.menuOpen === "s" + T ? (r(),
                    u("ul", _C, [a("li", {
                        onClick: ne => e.toggleModal({
                            name: "role",
                            params: {
                                playerIndex: T * -1 - 1
                            }
                        })
                    }, [b(m, {
                        icon: "theater-masks"
                    }), v(" " + d(e.$t("player.menu.character")), 1)], 8, yC), a("li", {
                        onClick: ne => e.toggleModal({
                            name: "reminder",
                            params: {
                                playerIndex: T * -1 - 1
                            }
                        })
                    }, [b(m, {
                        icon: "plus-circle"
                    }), v(" " + d(e.$t("player.reminders.add")), 1)], 8, wC), e.whispersAvailable.has(f.id) ? (r(),
                    u("li", {
                        key: 0,
                        onClick: ne => e.requestWhisper(f)
                    }, [b(m, {
                        icon: "comments"
                    }), v(" " + d(e.$t("player.menu.chat")), 1)], 8, kC)) : p("", !0), e.textsAvailable.has(f.id) ? (r(),
                    u("li", {
                        key: 1,
                        onClick: ne => e.showTextTab(f.id)
                    }, [b(m, {
                        icon: "envelope"
                    }), v(" " + d(e.$t("player.menu.whisper")), 1)], 8, CC)) : p("", !0), e.isStoryteller && e.session.sessionId ? (r(),
                    u("li", {
                        key: 2,
                        onClick: M(ne => o.removeStoryteller(f), ["stop"])
                    }, [b(m, {
                        icon: "times-circle"
                    }), v(" " + d(e.$t("storyteller.remove")), 1)], 8, SC)) : p("", !0), e.isSpectator ? (r(),
                    u("li", {
                        key: 3,
                        class: y({
                            disabled: ((te = e.session.users.get(e.user.id)) == null ? void 0 : te.grimoireAccess) || e.session.meta.isPublic && ((ge = e.session.meta.tags) == null ? void 0 : ge.grimoire) === 2
                        }),
                        onClick: s[0] || (s[0] = ne => o.requestGrimoire())
                    }, [b(m, {
                        icon: "book-dead"
                    }), v(" " + d(e.$t("storyteller.request_grim")), 1)], 2)) : p("", !0), e.hasGrimoireAccess && f.id !== e.user.id ? (r(),
                    u("li", {
                        key: 4,
                        onClick: ne => e.followUser(f.id)
                    }, [e.chat.following !== f.id ? (r(),
                    u(_, {
                        key: 0
                    }, [b(m, {
                        icon: "link"
                    }), v(" " + d(e.$t("storyteller.follow")), 1)], 64)) : (r(),
                    u(_, {
                        key: 1
                    }, [b(m, {
                        icon: "link-slash"
                    }), v(" " + d(e.$t("storyteller.unfollow")), 1)], 64))], 8, PC)) : p("", !0)])) : p("", !0)]
                }
                ),
                _: 2
            }, 1024)], 10, aC)
        }
        ), 128))]),
        _: 1
    })) : p("", !0)], 64)
}
const IC = O(Ca, [["render", TC], ["__scopeId", "data-v-0f54c94c"]])
  , Sa = {
    props: {
        name: {
            type: String,
            required: !0,
            default: ""
        },
        isDraggable: {
            type: Boolean,
            default: !0
        }
    },
    inject: ["setDropHandler"],
    computed: {
        ...I(["settings", "positions"]),
        left() {
            var e, s;
            return (s = (e = this.positions[this.name]) == null ? void 0 : e.x) != null ? s : 0
        },
        top() {
            var e, s;
            return (s = (e = this.positions[this.name]) == null ? void 0 : e.y) != null ? s : 0
        },
        draggable() {
            return !this.settings.general.isPositioningDisabled && (this.isDraggable || !!this.positions[this.name])
        }
    },
    data() {
        return {
            dragging: !1,
            resizeTimer: null,
            resizeObserver: new ResizeObserver(this.handleResize.bind(this)),
            isObserving: !1
        }
    },
    emits: ["dragged"],
    methods: {
        ...j(["setPosition"]),
        handleResize() {
            if (this.resizeTimer)
                return;
            const {container: e} = this.$refs;
            e != null && e.style.width && !e.style.containerType ? e.style.containerType = "size" : !(e != null && e.style.width) && (e != null && e.style.containerType) && e.style.removeProperty("container-type"),
            this.resizeTimer = setTimeout( () => {
                if (this.positions[this.name] && e) {
                    const s = this.positions[this.name] || {};
                    e.style.width ? (s.width = e.style.width,
                    s.height = e.style.height) : (delete s.width,
                    delete s.height),
                    this.setPosition({
                        name: this.name,
                        value: s
                    })
                }
                this.resizeTimer = !1
            }
            , 500)
        },
        startDrag(e) {
            this.draggable && e.target.getBoundingClientRect && (e.dataTransfer.dropEffect = "move",
            e.dataTransfer.effectAllowed = "move",
            e.dataTransfer.setData("text/plain", ""),
            this.dragging = {
                x: e.target.getBoundingClientRect().x - e.x,
                y: e.target.getBoundingClientRect().y - e.y,
                offsetHeight: e.target.offsetHeight,
                offsetWidth: e.target.offsetWidth
            },
            this.setDropHandler(this.stopDrag.bind(this)))
        },
        stopDrag(e) {
            var t, n;
            if (!this.draggable)
                return;
            const s = this.positions[this.name] || {};
            s.x = Math.min(Math.max(2, Math.round(this.dragging.x + e.x)), window.innerWidth - this.dragging.offsetWidth - 2) + "px",
            s.y = Math.min(Math.max(0, Math.round(this.dragging.y + e.y)), window.innerHeight - this.dragging.offsetHeight) + "px",
            s.width = (t = s.width) != null ? t : this.dragging.offsetWidth + "px",
            s.height = (n = s.height) != null ? n : this.dragging.offsetHeight + "px",
            this.setPosition({
                name: this.name,
                value: s
            }),
            this.dragging = !1,
            this.$emit("dragged")
        },
        observeSize() {
            this.isObserving || this.$refs.container && (this.isObserving = !0,
            this.resizeObserver.observe(this.$refs.container, {
                box: "border-box"
            }))
        }
    },
    mounted() {
        this.observeSize()
    },
    beforeUnmount() {
        this.resizeObserver.disconnect(),
        this.isObserving = !1
    }
}
  , Fr = () => {
    be(e => ({
        v596686f0: e.left,
        v48e190b4: e.top
    }))
}
  , Qr = Sa.setup;
Sa.setup = Qr ? (e, s) => (Fr(),
Qr(e, s)) : Fr;
const MC = ["draggable"]
  , RC = {
    key: 0
};
function DC(e, s, t, n, i, o) {
    var l, g, c, h, m;
    return r(),
    u("div", {
        class: y(["container", {
            hidden: (l = e.positions[t.name]) == null ? void 0 : l.hidden,
            positioned: e.positions[t.name],
            locked: e.settings.general.isPositioningDisabled,
            dragging: i.dragging,
            draggable: o.draggable
        }]),
        role: "tabpanel",
        ref: "container",
        draggable: o.draggable,
        onTouchstartPassive: s[0] || (s[0] = M( () => {}
        , ["stop"])),
        onTouchendPassive: s[1] || (s[1] = M( () => {}
        , ["stop"])),
        onDragstart: s[2] || (s[2] = A => o.startDrag(A)),
        style: L({
            left: (g = e.positions[t.name]) == null ? void 0 : g.x,
            top: (c = e.positions[t.name]) == null ? void 0 : c.y,
            width: (h = e.positions[t.name]) == null ? void 0 : h.width,
            height: (m = e.positions[t.name]) == null ? void 0 : m.height
        }),
        tabindex: "-1"
    }, [a("section", null, [Se(e.$slots, "default", {}, void 0, !0)]), e.$slots.footer ? (r(),
    u("footer", RC, [Se(e.$slots, "footer", {}, void 0, !0)])) : p("", !0)], 46, MC)
}
const je = O(Sa, [["render", DC], ["__scopeId", "data-v-0eabeed9"]])
  , EC = {
    name: "ChatTab",
    components: {
        Tab: je,
        FontAwesomeIcon: Y
    },
    inject: ["bindShortcut", "unbindShortcut"],
    computed: {
        ...I("players", ["players"]),
        ...I("user", ["user"]),
        ...I(["session", "chat", "grimoire", "edition", "game", "vote", "positions", "keybindings", "settings"]),
        ...D("players", ["seatedPlayerMap", "storytellerMap", "playerName"]),
        ...D("game", ["isNight"]),
        ...D("chat", ["isVideoWhisper", "isPrivateChat", "isPublicChat"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess", "isSpectator"]),
        channels() {
            const e = this.edition.isOfficial ? this.edition.id : "custom";
            return Array(5).fill(0).map( (s, t) => this.$t(`tabs.chat.channels.${e}_${t}`))
        },
        isPlayer() {
            return this.seatedPlayerMap.has(this.user.id) && !this.isStoryteller
        },
        playersInChannels() {
            const e = new Map;
            return this.channels.forEach( (s, t) => {
                e.set(`public-${t}`, [])
            }
            ),
            this.chat.userChannels.forEach( (s, t) => {
                var i;
                const n = this.session.users.get(t);
                this.isPublicChat(s) && (n != null && n.isOnline) && ((i = e.get(s)) == null || i.push(n))
            }
            ),
            e.forEach( (s, t) => {
                s.some( ({id: n}) => this.seatedPlayerMap.has(n)) || e.delete(t),
                s.sort(this.channelSort)
            }
            ),
            e
        },
        playersInWhispers() {
            const e = {};
            return this.chat.userChannels.forEach( (s, t) => {
                const n = this.session.users.get(t);
                if (this.isPrivateChat(s) && (n != null && n.isOnline)) {
                    if (e[s] || (e[s] = []),
                    this.isPlayer && !this.seatedPlayerMap.has(n.id) && e[s].some(i => !this.seatedPlayerMap.has(i.id)))
                        return;
                    e[s].push(n)
                }
            }
            ),
            this.isNight && !this.hasGrimoireAccess && Object.keys(e).forEach(s => {
                e[s].some( ({id: t}) => t === this.user.id) || delete e[s]
            }
            ),
            Object.keys(e).filter(s => e[s].some( ({id: t}) => this.seatedPlayerMap.has(t))).sort( (s, t) => e[s].some( ({id: n}) => n === this.user.id) ? -1 : e[t].some( ({id: n}) => n === this.user.id) ? 1 : 0).map(s => ({
                channel: s,
                players: e[s].sort(this.channelSort)
            }))
        },
        whisperQueue() {
            const e = [];
            return this.isSpectator ? e : (this.chat.whisperTo.forEach( (s, t) => {
                this.seatedPlayerMap.has(t) && e.push({
                    isIncoming: !1,
                    id: t,
                    channel: s
                })
            }
            ),
            this.chat.whisperFrom.forEach( (s, t) => {
                this.seatedPlayerMap.has(t) && e.push({
                    isIncoming: !0,
                    id: t,
                    channel: s
                })
            }
            ),
            e.map( ({id: s, isIncoming: t, channel: n}) => {
                var i;
                return {
                    channel: n,
                    isIncoming: t,
                    user: (i = this.session.users.get(s)) != null ? i : {
                        id: s,
                        username: "a user"
                    },
                    icon: [this.chat.channel, this.chat.userChannels.get(s)].includes(n) && (!this.isNight || this.isStoryteller) ? "user-plus" : t ? "arrow-circle-left" : "arrow-circle-right"
                }
            }
            ))
        }
    },
    data() {
        return {}
    },
    methods: {
        ...j(["setTab", "setPosition", "chat/togglePrompt"]),
        ...j("chat", ["togglePrompt"]),
        toggleChannel(e="") {
            !e && !this.chat.channel || !this.hasGrimoireAccess && this.isPrivateChat(e) || (this.chat.following && this.$store.commit("chat/setFollowing", ""),
            this.$store.commit("chat/setChannel", this.chat.channel === e ? "" : e))
        },
        acceptRequest(e) {
            if (this.whisperQueue[e]) {
                const {user: s, channel: t} = this.whisperQueue[e];
                return this.$store.commit("chat/setWhisperTo", {
                    id: s.id,
                    channel: t
                }),
                !0
            }
        },
        cancelRequest(e) {
            if (this.whisperQueue[e]) {
                const {isIncoming: s, user: t} = this.whisperQueue[e];
                s ? this.$store.commit("chat/removeWhisperFrom", t) : this.$store.commit("chat/removeWhisperTo", t)
            }
        },
        channelSort(e, s) {
            if (this.seatedPlayerMap.has(e.id))
                if (this.seatedPlayerMap.has(s.id)) {
                    if (this.user.id === e.id)
                        return -1;
                    if (this.user.id === s.id)
                        return 1
                } else
                    return -1;
            else
                return 1;
            return 0
        },
        toggleChat() {
            if (this.positions.chat) {
                if (this.settings.general.isPositioningDisabled)
                    return;
                this.setPosition({
                    name: "chat"
                }),
                this.setTab({
                    tab: "chat",
                    value: !0
                })
            } else
                this.setTab({
                    tab: "chat",
                    value: !this.grimoire.tabs.chat
                })
        },
        resetPosition() {
            var s;
            const e = (s = this.positions.whisper) == null ? void 0 : s.minimized;
            this.setPosition({
                name: "whisper",
                value: {
                    minimized: e
                }
            })
        }
    },
    mounted() {
        this.bindShortcut("acceptChat1", () => this.acceptRequest(0)),
        this.bindShortcut("acceptChat2", () => this.acceptRequest(1)),
        this.bindShortcut("acceptChat3", () => this.acceptRequest(2)),
        this.bindShortcut("leaveChat", () => this.toggleChannel())
    },
    beforeUnmount() {
        this.unbindShortcut("leaveChat"),
        this.unbindShortcut("acceptChat1"),
        this.unbindShortcut("acceptChat2"),
        this.unbindShortcut("acceptChat3")
    }
}
  , NC = {
    role: "list"
}
  , BC = {
    class: "title"
}
  , VC = ["aria-label", "onClick"]
  , OC = {
    class: "name"
}
  , jC = {
    key: 0,
    class: "shortcut"
}
  , UC = ["aria-label"]
  , HC = {
    class: "title"
}
  , qC = ["onClick"]
  , LC = ["title"]
  , zC = ["title"]
  , GC = ["onClick", "aria-label"]
  , WC = {
    class: "title"
}
  , FC = ["title"]
  , QC = ["title"]
  , ZC = {
    key: 0,
    class: "info"
}
  , XC = {
    key: 1,
    class: "info"
}
  , KC = {
    key: 2,
    class: "prompt"
};
function YC(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("Tab");
    return r(),
    C(q, {
        name: "slide"
    }, {
        default: S( () => {
            var c, h;
            return [e.session.sessionId ? (r(),
            u("aside", {
                key: 0,
                class: y(["tab", {
                    open: e.grimoire.tabs.chat && !e.positions.chat
                }])
            }, [!e.positions.chat || !e.settings.general.isPositioningDisabled ? (r(),
            u("div", {
                key: 0,
                class: "label",
                role: "heading",
                onClick: s[0] || (s[0] = m => o.toggleChat())
            }, [v(d(e.$t("tabs.chat.title")) + " ", 1), e.isVideoWhisper && ((c = e.positions.whisper) != null && c.x) && ((h = e.positions.whisper) != null && h.minimized) ? (r(),
            C(l, {
                key: 0,
                icon: "arrows-to-dot",
                onClick: M(o.resetPosition, ["stop"]),
                title: e.$t("tabs.chat.reset_position"),
                class: "reset"
            }, null, 8, ["onClick", "title"])) : e.chat.channel ? (r(),
            C(l, {
                key: 1,
                icon: "microphone"
            })) : p("", !0), e.chat.whisperFrom.size && o.whisperQueue.length ? (r(),
            C(l, {
                key: 2,
                icon: "arrow-circle-left",
                class: "primary"
            })) : p("", !0), e.chat.whisperTo.size && o.whisperQueue.length ? (r(),
            C(l, {
                key: 3,
                icon: "arrow-circle-right"
            })) : p("", !0)])) : p("", !0), b(g, {
                name: "chat",
                draggable: !e.settings.general.isPositioningDisabled && (e.grimoire.tabs.chat || !!e.positions.chat),
                onDragged: s[4] || (s[4] = m => e.setTab({
                    tab: "chat"
                }))
            }, {
                footer: S( () => [b(q, {
                    name: "fade"
                }, {
                    default: S( () => [!e.isNight && !e.chat.isPrompt && !e.isSpectator && !e.vote.nomination ? (r(),
                    u("div", {
                        key: 0,
                        class: "button",
                        onClick: s[3] || (s[3] = (...m) => e.togglePrompt && e.togglePrompt(...m))
                    }, d(e.$t("tabs.chat.request_private")), 1)) : p("", !0)]),
                    _: 1
                })]),
                default: S( () => [a("ul", NC, [b(Ye, {
                    name: "whisper"
                }, {
                    default: S( () => [o.whisperQueue.length ? (r(),
                    u("li", {
                        key: 0,
                        class: y(["whisper requests", {
                            incoming: o.whisperQueue.some( ({isIncoming: m}) => m)
                        }])
                    }, [a("div", BC, [a("b", null, d(e.$t("tabs.chat.requests")), 1)]), (r(!0),
                    u(_, null, B(o.whisperQueue, (m, A) => (r(),
                    u("div", {
                        key: A,
                        class: "request",
                        "aria-live": "assertive",
                        "aria-label": e.$t(`tabs.chat.${m.isIncoming ? "accept" : "cancel"}_request`, [e.$t(...e.playerName(m.user))]),
                        onClick: M(f => m.isIncoming ? o.acceptRequest(A) : o.cancelRequest(A), ["stop"])
                    }, [b(l, {
                        icon: m.icon,
                        title: m.isIncoming ? e.$t("tabs.chat.incoming") : e.$t("tabs.chat.outgoing"),
                        class: y({
                            incoming: m.isIncoming
                        })
                    }, null, 8, ["icon", "title", "class"]), a("span", OC, d(e.$t(...e.playerName(m.user))), 1), m.isIncoming && A < 3 ? (r(),
                    u("em", jC, d(e.keybindings["acceptChat" + (A + 1)][0]), 1)) : p("", !0), m.isIncoming ? (r(),
                    C(l, {
                        key: 1,
                        icon: "check-circle",
                        class: "accept",
                        "aria-label": e.$t("tabs.chat.accept"),
                        role: "button"
                    }, null, 8, ["aria-label"])) : p("", !0), b(l, {
                        icon: "times-circle",
                        class: "cancel",
                        "aria-label": e.$t("tabs.chat.cancel"),
                        role: "button",
                        onClick: M(f => o.cancelRequest(A), ["stop"])
                    }, null, 8, ["aria-label", "onClick"])], 8, VC))), 128))], 2)) : p("", !0), o.playersInWhispers.length || e.isPrivateChat(e.chat.channel) ? (r(),
                    u("li", {
                        key: 1,
                        class: y(["whisper list", {
                            active: e.isPrivateChat(e.chat.channel),
                            joinable: e.hasGrimoireAccess
                        }]),
                        onClick: s[1] || (s[1] = M(m => o.toggleChannel(), ["stop"])),
                        "aria-label": e.$t("tabs.chat.leave_private")
                    }, [a("div", HC, [a("b", null, d(e.$t("tabs.chat.chats")), 1), b(l, {
                        icon: "sign-out-alt",
                        class: "leave",
                        title: "Leave room",
                        role: "button"
                    })]), (r(!0),
                    u(_, null, B(o.playersInWhispers, ({players: m, channel: A}) => (r(),
                    u("div", {
                        key: A,
                        class: "channel",
                        role: "button",
                        onClick: M(f => o.toggleChannel(e.hasGrimoireAccess ? A : ""), ["stop"])
                    }, [(r(!0),
                    u(_, null, B(m, (f, T) => (r(),
                    u("span", {
                        class: y(["name", {
                            you: f.id === e.user.id,
                            storyteller: e.storytellerMap.has(f.id),
                            spectator: !e.seatedPlayerMap.has(f.id)
                        }]),
                        key: T
                    }, [e.seatedPlayerMap.has(f.id) ? (r(),
                    u(_, {
                        key: 1
                    }, [e.chat.following === f.id ? (r(),
                    u("span", {
                        key: 0,
                        title: e.$t("tabs.chat.following")
                    }, [b(l, {
                        icon: "link"
                    })], 8, zC)) : p("", !0), v(" " + d(e.$t(...e.playerName(f))), 1)], 64)) : (r(),
                    u("span", {
                        key: 0,
                        title: o.isPlayer ? e.$t("tabs.chat.spectator") : e.$t(...e.playerName(f))
                    }, [b(l, {
                        icon: "eye"
                    })], 8, LC))], 2))), 128))], 8, qC))), 128))], 10, UC)) : p("", !0), !e.isNight && !e.vote.nomination ? (r(!0),
                    u(_, {
                        key: 2
                    }, B(o.channels, (m, A) => (r(),
                    u("li", {
                        key: A,
                        onClick: M(f => o.toggleChannel(`public-${A}`), ["stop"]),
                        "aria-label": `Join/Leave ${m}`,
                        class: y(["channel", {
                            active: e.chat.channel === `public-${A}`
                        }])
                    }, [a("div", WC, [a("b", null, d(m), 1), b(l, {
                        icon: "sign-out-alt",
                        class: "leave",
                        title: e.$t("tabs.chat.leave_room"),
                        role: "button"
                    }, null, 8, ["title"])]), (r(!0),
                    u(_, null, B(o.playersInChannels.get(`public-${A}`), (f, T) => (r(),
                    u("span", {
                        class: y(["name", {
                            you: f.id === e.user.id,
                            storyteller: e.storytellerMap.has(f.id),
                            spectator: !e.seatedPlayerMap.has(f.id)
                        }]),
                        key: T
                    }, [e.seatedPlayerMap.has(f.id) ? (r(),
                    u(_, {
                        key: 1
                    }, [e.chat.following === f.id && e.isStoryteller ? (r(),
                    u("span", {
                        key: 0,
                        title: e.$t("tabs.chat.following")
                    }, [b(l, {
                        icon: "link"
                    })], 8, QC)) : p("", !0), v(" " + d(e.$t(...e.playerName(f))), 1)], 64)) : (r(),
                    u("span", {
                        key: 0,
                        title: e.$t(...e.playerName(f))
                    }, [b(l, {
                        icon: "eye"
                    })], 8, FC))], 2))), 128))], 10, GC))), 128)) : (r(),
                    u(_, {
                        key: 3
                    }, [e.vote.nomination ? (r(),
                    u("li", ZC, d(e.$t("tabs.chat.nomination")), 1)) : (r(),
                    u("li", XC, d(e.$t("tabs.chat.night")), 1)), e.isPublicChat(e.chat.channel) ? (r(),
                    u("li", KC, [a("div", {
                        class: "button",
                        onClick: s[2] || (s[2] = M(m => o.toggleChannel(), ["stop"]))
                    }, [b(l, {
                        icon: "sign-out-alt",
                        class: "leave",
                        title: e.$t("tabs.chat.leave_room"),
                        role: "button"
                    }, null, 8, ["title"]), v(" " + d(e.$t("tabs.chat.leave_room")), 1)])])) : p("", !0)], 64))]),
                    _: 1
                })])]),
                _: 1
            }, 8, ["draggable"])], 2)) : p("", !0)]
        }
        ),
        _: 1
    })
}
const JC = O(EC, [["render", YC], ["__scopeId", "data-v-47e41663"]])
  , $C = {
    name: "NPCsTab",
    components: {
        Tab: je,
        Token: fe
    },
    computed: {
        ...I("players", ["npcs", "players"]),
        ...I(["session", "grimoire", "positions", "settings"]),
        ...D("user", ["isStoryteller"]),
        ...D("players", ["nightOrder"]),
        ...D("game", ["hasGardener", "isNight"]),
        ...D(["isHomebrew", "isJinxed", "filterAbilities"]),
        npcSorted() {
            return [...this.npcs].sort( (e, s) => e.team.localeCompare(s.team))
        },
        npcClasses() {
            return [...this.npcs].sort( (e, s) => e.team.localeCompare(s.team)).map( ({id: e}, s) => {
                const t = {};
                return this.grimoire.menuOpen === "n" + s && (t["menu-open"] = !0),
                e === "bootlegger" && this.isHomebrew && (t.disabled = !0),
                e === "djinn" && this.isJinxed && (t.disabled = !0),
                e === "gardener" && this.hasGardener && (t.disabled = !0),
                t
            }
            )
        }
    },
    inject: ["renderReminderHTML"],
    data() {
        return {
            isRightSide: !1,
            isVisible: !1
        }
    },
    methods: {
        ...j(["toggleModal", "setTab", "setMenuOpen", "setPosition"]),
        removeNPC(e) {
            if (this.setMenuOpen(),
            !!this.isStoryteller) {
                if (this.npcClasses[e].disabled)
                    return !1;
                this.$store.commit("players/setNPC", {
                    index: this.npcs.indexOf(this.npcSorted[e])
                }),
                !this.npcs.length && this.grimoire.tabs.npcs && this.setTab({
                    tab: "npcs"
                })
            }
        },
        toggleNPCs() {
            if (this.positions.npcs) {
                if (this.settings.general.isPositioningDisabled)
                    return;
                this.setPosition({
                    name: "npcs"
                }),
                this.setTab({
                    tab: "npcs",
                    value: !0
                }),
                this.isRightSide = !1
            } else
                this.setTab({
                    tab: "npcs",
                    value: !this.grimoire.tabs.npcs
                })
        },
        toggleMenu(e) {
            this.isStoryteller && this.setMenuOpen("n" + e)
        },
        useAbility(e) {
            if (this.isStoryteller) {
                switch (e.name) {
                case "distribute-roles":
                    this.$store.dispatch("game/distributeRoles");
                    break;
                case "ghost-votes":
                    this.players.forEach(s => {
                        s.isVoteless && this.$store.commit("players/updatePlayer", {
                            player: s,
                            property: "isVoteless",
                            value: !1
                        })
                    }
                    );
                    break;
                case "pointing":
                    if (e.time === "night" && e.global) {
                        const s = this.players.filter( ({role: t, id: n, reminders: i, isDead: o}) => n && (t.team === e.global && !["marionette", "drunk", "lunatic"].includes(t.id) && !i.some( ({role: l}) => l === "alchemist") || e.global === "dead" && o)).map( ({id: t}) => t);
                        if (!s.length)
                            return;
                        this.$store.dispatch("session/startPointing", ["storyteller", ...s])
                    } else
                        this.$store.dispatch("session/startPointing")
                }
                this.setMenuOpen()
            }
        },
        checkScreenSide() {
            this.positions.npcs && this.setTab({
                tab: "npcs"
            }),
            this.isRightSide = this.positions.npcs && parseInt(this.positions.npcs.x, 10) > window.innerWidth / 2
        }
    },
    beforeMount() {
        this.checkScreenSide()
    }
}
  , xC = {
    class: "tokens"
}
  , eS = {
    key: 0
}
  , sS = ["innerHTML"]
  , tS = {
    key: 0
}
  , iS = ["innerHTML"]
  , oS = {
    key: 0,
    class: "menu"
}
  , nS = ["onClick"]
  , aS = ["onClick"];
function rS(e, s, t, n, i, o) {
    const l = k("Token")
      , g = k("font-awesome-icon")
      , c = k("Tab");
    return r(),
    C(q, {
        name: "slide"
    }, {
        default: S( () => [e.npcs.length ? (r(),
        u("aside", {
            key: 0,
            class: y(["tab", {
                open: e.grimoire.tabs.npcs && !e.positions.npcs,
                "is-visible": i.isVisible || e.grimoire.menuOpen.match(/^n/)
            }])
        }, [!e.positions.npcs || !e.settings.general.isPositioningDisabled ? (r(),
        u("div", {
            key: 0,
            class: "label",
            role: "heading",
            onClick: s[0] || (s[0] = (...h) => o.toggleNPCs && o.toggleNPCs(...h))
        }, d(e.$t("tabs.npcs.title")), 1)) : p("", !0), b(c, {
            name: "npcs",
            draggable: !e.settings.general.isPositioningDisabled && (e.grimoire.tabs.npcs || !!e.positions.npcs),
            onDragged: s[3] || (s[3] = h => o.checkScreenSide())
        }, {
            default: S( () => [a("ul", xC, [(r(!0),
            u(_, null, B(o.npcSorted, (h, m) => (r(),
            u("li", {
                key: h.id,
                class: y(o.npcClasses[m]),
                onMouseenter: s[1] || (s[1] = A => i.isVisible = !0),
                onMouseleave: s[2] || (s[2] = A => i.isVisible = !1)
            }, [b(l, {
                class: y({
                    right: i.isRightSide
                }),
                onClick: M(A => o.toggleMenu(m), ["stop"]),
                role: h
            }, null, 8, ["class", "onClick", "role"]), b(q, {
                name: "fade"
            }, {
                default: S( () => {
                    var A, f;
                    return [(A = e.nightOrder.get(h.id)) != null && A.first && e.settings.game.isNightOrder && e.isNight ? (r(),
                    u("div", {
                        key: 0,
                        class: y(["night-order first", {
                            right: i.isRightSide
                        }])
                    }, [a("em", null, d((f = e.nightOrder.get(h.id)) == null ? void 0 : f.first), 1), h.firstNightReminder ? (r(),
                    u("div", eS, [a("aside", null, d(e.$t("grimoire.phases.first_night")), 1), a("span", {
                        class: "reminder",
                        innerHTML: o.renderReminderHTML(e.$t(`roles.${h.id}.first`, h.firstNightReminder))
                    }, null, 8, sS)])) : p("", !0)], 2)) : p("", !0)]
                }
                ),
                _: 2
            }, 1024), b(q, {
                name: "fade"
            }, {
                default: S( () => {
                    var A, f;
                    return [(A = e.nightOrder.get(h.id)) != null && A.other && e.settings.game.isNightOrder && e.isNight ? (r(),
                    u("div", {
                        key: 0,
                        class: y(["night-order other", {
                            right: i.isRightSide
                        }])
                    }, [a("em", null, d((f = e.nightOrder.get(h.id)) == null ? void 0 : f.other), 1), h.otherNightReminder ? (r(),
                    u("div", tS, [a("aside", null, d(e.$t("grimoire.phases.other_nights")), 1), a("span", {
                        class: "reminder",
                        innerHTML: o.renderReminderHTML(e.$t(`roles.${h.id}.other`, h.otherNightReminder))
                    }, null, 8, iS)])) : p("", !0)], 2)) : p("", !0)]
                }
                ),
                _: 2
            }, 1024), b(q, {
                name: "fold"
            }, {
                default: S( () => {
                    var A;
                    return [e.grimoire.menuOpen === "n" + m ? (r(),
                    u("ul", oS, [(r(!0),
                    u(_, null, B(e.filterAbilities({
                        role: h
                    }, "ability"), (f, T) => (r(),
                    u("li", {
                        key: T,
                        onClick: M(w => o.useAbility(f.ability), ["stop"]),
                        class: "special"
                    }, [b(g, {
                        icon: "star"
                    }), a("span", null, [v(d(f.role.name) + ":", 1), s[4] || (s[4] = a("br", null, null, -1)), v(" " + d(e.$t(`grimoire.abilities.${f.ability.name}`)), 1)])], 8, nS))), 128)), a("li", {
                        onClick: M(f => o.removeNPC(m), ["stop"]),
                        class: y({
                            disabled: (A = o.npcClasses[m]) == null ? void 0 : A.disabled
                        })
                    }, [b(g, {
                        icon: "trash-alt"
                    }), v(" " + d(e.$t(`tabs.npcs.remove_${h.team}`)), 1)], 10, aS)])) : p("", !0)]
                }
                ),
                _: 2
            }, 1024)], 34))), 128))])]),
            _: 1
        }, 8, ["draggable"])], 2)) : p("", !0)]),
        _: 1
    })
}
const lS = O($C, [["render", rS], ["__scopeId", "data-v-d704e60f"]])
  , cS = {
    name: "BluffsTab",
    components: {
        Tab: je,
        Token: fe
    },
    inject: ["setDropHandler"],
    computed: {
        ...I("players", ["players", "bluffs", "npcs", "storytellers"]),
        ...I("user", ["user"]),
        ...I(["session", "grimoire", "positions", "settings"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess"]),
        ...D("players", ["seatedPlayerMap"]),
        bluffsVisible() {
            var e, s;
            return this.seatedPlayerMap.has(this.user.id) && this.settings.game.isPlayerBluffs && !this.isStoryteller || this.isStoryteller && this.players.length <= 7 && this.players.find(t => {
                var n;
                return ["snitch", "summoner"].includes((n = t.role) == null ? void 0 : n.id)
            }
            ) ? !0 : (this.players.length > 6 || this.npcs.some( ({id: t}) => t === "toymaker")) && (this.isStoryteller || this.hasGrimoireAccess || ((s = (e = this.players.find(t => t.id === this.user.id)) == null ? void 0 : e.role) == null ? void 0 : s.team) === "demon")
        }
    },
    data() {
        return {
            isRightSide: !1,
            isVisible: !1
        }
    },
    methods: {
        ...j(["toggleModal", "setTab", "setPosition"]),
        toggleBluffs() {
            if (this.positions.bluffs) {
                if (this.settings.general.isPositioningDisabled)
                    return;
                this.setPosition({
                    name: "bluffs"
                }),
                this.setTab({
                    tab: "bluffs",
                    value: !0
                })
            } else
                this.setTab({
                    tab: "bluffs",
                    value: !this.grimoire.tabs.bluffs
                })
        },
        checkScreenSide() {
            this.positions.bluffs && this.setTab({
                tab: "bluffs"
            }),
            this.isRightSide = this.positions.bluffs && parseInt(this.positions.bluffs.x, 10) > window.innerWidth / 2
        }
    },
    beforeMount() {
        this.checkScreenSide()
    }
};
function dS(e, s, t, n, i, o) {
    const l = k("Token")
      , g = k("Tab");
    return r(),
    C(q, {
        name: "slide"
    }, {
        default: S( () => [o.bluffsVisible ? (r(),
        u("aside", {
            key: 0,
            class: y(["tab", {
                open: e.grimoire.tabs.bluffs,
                "is-visible": i.isVisible
            }])
        }, [!e.positions.bluffs || !e.settings.general.isPositioningDisabled ? (r(),
        u("div", {
            key: 0,
            class: "label",
            role: "heading",
            onClick: s[0] || (s[0] = c => o.toggleBluffs())
        }, d(e.$t("tabs.bluffs.title")), 1)) : p("", !0), b(g, {
            name: "bluffs",
            draggable: !e.settings.general.isPositioningDisabled && (e.grimoire.tabs.bluffs || !!e.positions.bluffs),
            onDragged: s[3] || (s[3] = c => o.checkScreenSide())
        }, {
            default: S( () => [a("ul", null, [(r(),
            u(_, null, B(3, c => a("li", {
                key: c,
                onMouseenter: s[1] || (s[1] = h => i.isVisible = !0),
                onMouseleave: s[2] || (s[2] = h => i.isVisible = !1)
            }, [b(l, {
                role: e.bluffs[c - 1],
                class: y({
                    right: i.isRightSide
                }),
                onClick: M(h => e.toggleModal({
                    name: "role",
                    params: {
                        bluff: c
                    }
                }), ["stop"])
            }, null, 8, ["role", "class", "onClick"])], 32)), 64))])]),
            _: 1
        }, 8, ["draggable"])], 2)) : p("", !0)]),
        _: 1
    })
}
const uS = O(cS, [["render", dS], ["__scopeId", "data-v-0acf96d0"]])
  , wl = "/assets/firstnight-CQnGctKP.webp"
  , kl = "data:image/webp;base64,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"
  , Cl = "/assets/leaf-orange-418HATSf.webp"
  , Sl = "data:image/webp;base64,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"
  , Pl = "data:image/webp;base64,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"
  , Tl = "data:image/webp;base64,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"
  , Il = "data:image/webp;base64,UklGRqAPAABXRUJQVlA4WAoAAAAQAAAAZQIAZQIAQUxQSCAFAAABoERr2yFJ+hLlatvmzrZtm2Pbtu1p27Zt27ZVyIx4F5nxx/9nxurbfBExASQx3YAFvuMARgxgLYHLeIK6wwaQylmSgPzU3kZkUcbyIvYFkj5B1CGM5VM0S3h+V7RHjCV8J/dYOxwNK9hKC2vXxxYU23CVP3BlGZSZiu+etSxLbRBPqZdtPYT6Lp6yCVlwy1KqhRBy9T1D8T+AxvsMZRi0lmUn6Zl6vmYn/0DveG5SA7qZSeI1bRV5yTRo/4CV/Av9ezlJBxi0/HzkCcsEunCRpJctGJ3ORWbYMGv5eMjfML6Igww8gxh8lM49ep9FbJ5KZR3BWYjZ2219fKPlFcTyxTf8PKPmMcT67qYMI/hdCHH4cWFuUf0A4vP6L4V4xT7E7c3ByYxiNOJ5eQkukfwV4ns1kwiuR7wv5hFj7bjDRA4xDV54KI075L4Ab1yTmzlcgFdebM4afoCH9mcMRbK8BHn4wlR46v4AV6gBb7X7MAX/No/B47w8oVC212A6T5gHz7ULcoRy2d6DHzjCGHhxHn6QfsOTJvjZQXvbkzKIHf4Lb36RGwS3etShZGaQZHtUmJhhDXj1a8xgqO1VfzGD9+DVe5jBZ56FIC9YHC+2uXtlWYFvdJzc/Njc4/KsgP4wFNY2t+B3xlCGF6w0E1qrK3uojz40VpUXDDbz5S+6FgSIaImpPryg2E0TW6iRrtF+IkrYYOZuQ16Qd5eBA0Splp6snhSZ08y6NF5As/RdKkCUoula3SjU1MgcYoad9dUlIlqvxfqeHDtaBt7nBqStL0Xm1YI2TvSEgSfYwWVNKyn6Yh3n0xToR33EDkfruZXLobiOTflVaLmuy/ygW1hLR3J+4O5+T1K/oOkfflBwp443SHGlu6y8Luo/1hIezA/oew3zSPVbd9MCLuglLXerMIQq7o6Scg9X9weS6x90zPQzhDRX4Spq5Op6QXc0XcPTxBFvunmbXI5384NPA+1zV5Qj5DniYiO5rehmsJbK7nwcIXhZ7bTfFW1R21GYtA5zk5GTI5CtlFmW3DdQW5Goh352cb0cR0i9q/QFaUywVKznSfd8tVA+jlD6jso9nw7aphJqry39hhKSOEIAinYz0tpYZX+SNqqs1pgj5FNZTXoTQgoLE/XRfyr2QI7QMtvJrqqJtjhlNCaD/isK6M4RqlhOP5PuV53ulTNB7VRe5wgBOD4oro2c1iUYoS0K4zlCTtthIOl/wuHvgJmCmU5/coQODvuDBgLRMnqRWd/7Ti9whAaIXolMrohyo7ghCuxy+JUjDIz2Mxl9IsL+1meKKoajPeQIb0bZnWSmbgQGmKPPoh1KZAijI0KVyWyJiOXpZD54JsrpnPzA9zjiXzLcMwRkvEyxmOdeRJj4YXMLwGUy/T+AU4VjgnrbADCYH0wDgGeMEZD5LMXoiohV7CB4H8A+Ml44w9pVM1ZyRoRLc4N2FoCi5hLwuIM/VugdAPiUGQROAKFuFIMdBgQoZoPbAZxiBn0B+zXy2hJ3AfTiBTWABeS9hQHcys0K/AffIi+umw0EWIFnP3PjPrHYCu14jPhf/C/+F/+L/8X/4n/xv/hf/C/+F/+L/8X/4n/xv/hf/C/+F/+L/8X/4n/xv/hf/C/+F/+L/8X/4n/xv/hf/C/+F/+L/8X/4n/xv/hf/C/+F/+L/8X/4n/xv/hf/C/+F/+L/8X/4n/xv/hf/C/+F/+L/8X/4n/xv/hf/C/+F/+L/8X/4n/xv/hf/C/+l0ACVlA4IFoKAACweQCdASpmAmYCPm02l0mkIqIhIHR4WIANiWlu4XeLABM2PUD+I/iT4cf47w18rIT89v9r68ux2Um+i8x+9B/UvQH/jeEX6H7AH8u/u/oqfUnni+s/YL8tr2Ieh9+y4J6e9JAgQIEB8EE6TXWG+AtX7j3e6P4RrXIda5DrXIda5DrXIda5DrXIda4/VGpw4cOHDhum4/NVOXOAG90EWtt3MuRUFvtMKWKJF7+32+32+32+30RYH506dOnTpsbmxxQlAVSDCXxmYbv2XE38gZwyjy8NUOwz5p/xnZl1yiPEB+RvhCr0OCbgLuQqvQ4JuAu5Cqi0BAgQIECAlhW1aHEfpXpBMlKgKZSfp7I2kyzuWO6HgSIldLrWcM6eMXtqtr3nHRPekgQIECBAgQIEBKsJusgKtGIjrhhMSkud97P8FT9AEkqbujPLiGcAtlzSNntVe3OGqTAWpBYsWLFixYsWKbfjPrXW9vbqaELIGgTRgybXA3rMf0AG39E5kINBWC/OnTp06dOnTp06dNigCebksLT68aj4wQQ902+vtMl7rAOTgn2d0o9646J70kCBAgQIECA+ML18E1yHWuQnG9ynDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhw4cOHDhwrAAP7/7hwmLJ8NqQ1y8J9qKwGxnx3OBUv6vt9L83+oceMVDLBgX2Ej/PkWIxLX5gN8YTZvg6XwT9dybPsu26SzSFTS2/mx42vPn4n/Cd7TcK75saGJKWCNJYlkNcFQLMXoS5XbFq4582nm082nm082nm082nm0+//4bDZDwctPIG/N/055h0QsWnff4VZViWL5O0CwNw9k9QFIy4kGegcj/lOZn8LzYAgXrxrjgLe/Vnnn5ki2G6LP3FGOxsmojREej+FMwEBZLJkA91TaPcfzslz3GvVsVwj/PycPt8zQelV0gSojhRoX9ykC7RVzv+bZgHA9YBx+J4tSJszeBZHHSiQCPWC7bc3fNdgFdbBQKps3upv0kWnwsT+LsdiD8Ksm5bbURFed1k2CCLNJmkkBLwFebFJSy1eKQqO9bT8QvYiKaoTi4+hCXrSnhHjv9i0h4XB7LzsLLQAWNYenbPYG93wwxXvE+WZ2JP4X0OtEQGdrhU+MuDC7+5aHIDH/CacvZISMAhnfxC+eTnBBtCaj/glU+b1q83aFoji1nRcl53q0ZMwmcAIJ/V1Dqdlw4pcUePuGt7bSh1yOmckby94yDn/f9gJkr0ke8tfbZTgn9E5LmcxQECn9PzC9Xc/sGU+xmiJDSG144W0j2PJWmDNqWoYpXJpYCs+ZIU194LGu4OJ9GuybOsx72LAoqW7dTtAKX+LgyTX0VlTSaXWEvcSmEYV5/klH6PcbVynGm+j/XRAHF9R8ubrSVCZD4bcU0PVWWT0VROkIhe2zqYhQlKQ0w0FNXLt+q6ZuZhmYDjhlL3pRTHu9mp1QuJigHI+AiuMCJGt145YOiDD6P6BdXZ7FMK4aSEwobSbISfjp7NeTg4ztJs7SbO0mztJs7SbO0mzrtPjUQsDO/pPfmpCbGMbLf1o1V2n70Gf+Bh2iYnfjb+hLppj2J86+Y7CuRFB/DtuNLw81csDVaJMRo7Y/tMqF9fWW9msNCRd6/4qrUXxC2OjlBtcCH2DvenNFN7kMzMExa+e5KUM5GCWwU9sHo+DNyjXZqSRTGGS++fDCoL7sAXLQI5o4hlQAhQAEWcsb2O/lcovadUib3y4NiAQWnyHMpjdA6AMP6GhEmMN87ID9kyXC9WsGiVNgv2MKbvbb8CaSrGf8Q+Ad59RwnCVhQ0SXLPZ1XXnNlNOGFIrwuMTq3pdzG4+AFO3HcyH0CpCyBbcBRw6clTbOUXcZCxa2xue0jmP6tVsjj2xkFLqozn9ITJr6ganlkOLq/4xRqfJq8QZq6ADwaLkV4V5te8BQAAEwtll127AGbp3pHhfuEsk+ZpqH/dyb/CB63bplcOwRi9Bf2A5TjJ5oZhu6Kgmvy4CUcb2W5rgS4TsjMv+LER8qpb0vzI4ROdfGhyhY9fEuhKOjqEWoOhAl+mT/L7pH1B9eFR8J7x0iXI0mvZFkMu27w0o/a6DZsAm9T2bgvC24B0VAygK+WqfCJ1wvpHlAsm4aOmDn9UICOd2KY5odptGxaNC+P72s9R8R4VPP/lsjTiPHEoFUGWaagmawRPWNInGoTdHUAhxy+BT8swI39BKVvlm/b7nEyrqcCWxCX58rIW0hD474J8qiI/+O3r3Ldd+wPcKUh907jZG4HkQ0SyJfhYNA+J+1eJ0V4dF4t3g/qmSSrbp5vvOp5aa6KQOuIxS8eF+2dhC1RxrZScE11eelt52+Xgzc1+jhMAh+diQyW8Pd8S6ddmdzNtwn0ZFxL33CXEVmpfuIxG97ecKLufaxrbd8rgSXtoAYKFN0Kjs8N/3Qny//f0/f2onzumBEgDI6q+BIGcpt1IqMaVZWtT3lH6iV4ifbeQQQ7k1S4V5EE1J+Sj950rihupli4DkpZ57iLCBl/wNtyMrnFEhr3b/hK3EnJ5409v/L+GnlSdp3y/g/4HrWejb+60PQ6UWzS5iCoJFMuiyLmjA3W9D3u4e/+I8yySyadJMmjHQMOsJSmLgkgxfKAh0pNr1KG1/xWosBYPVnfOsbvaQ6kXQ/Qco/HdCZ/NsjN3/rs6JT2TCuq+QUufjwtnrwpVNoE/H7pKfiMEwvF3PGlQhgTOzCHlKsGH/JAjeKZrlbY23sur/Hc8UHp5A/nxnpalmr7HeJ2zRJ4gFDrgOq0UT70q48gVT02BHU0DELeAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
  , Ml = "/assets/leaf-top4-DaH0V5hE.webp"
  , Rl = "/assets/leaf-top5-DyrDgGGV.webp"
  , Dl = "/assets/othernight-UoZCooCu.webp"
  , Js = "/assets/sheet-bottom-B8o9Qwul.webp"
  , El = "/assets/sheet-ZV_08gY3.webp"
  , Nl = "/assets/token-BqDQdWeO.webp"
  , Bl = "/assets/firstnight-741QXSRJ.webp"
  , Vl = "data:image/webp;base64,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"
  , Ol = "/assets/leaf-orange-418HATSf.webp"
  , jl = "data:image/webp;base64,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"
  , Ul = "data:image/webp;base64,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"
  , Hl = "data:image/webp;base64,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"
  , ql = "/assets/leaf-top3-C9BTCwAz.webp"
  , Ll = "/assets/leaf-top4-BUjlPdzY.webp"
  , zl = "/assets/leaf-top5-BEXNsf9Y.webp"
  , Gl = "/assets/leaf-top6-rjk2XTrD.webp"
  , Wl = "/assets/othernight-D0NIKU2A.webp"
  , $s = "/assets/sheet-bottom-DPvgolac.webp"
  , Fl = "/assets/sheet-CXPnUsUN.webp"
  , Ql = "/assets/token-VPG3jS-a.webp"
  , Zl = "/assets/firstnight-741QXSRJ.webp"
  , Xl = "data:image/webp;base64,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"
  , Kl = "/assets/leaf-orange-418HATSf.webp"
  , Yl = "data:image/webp;base64,UklGRvoGAABXRUJQVlA4WAoAAAAQAAAAGgIAGgIAQUxQSNYCAAABoEXb2iFJ+v6INApt27Zt236ybdu2bdu2bZftSv0RbcXT390zNyImgOB/+B/+h//hf/gf/of/4X/4H/6H/+F/+B/+h//hf/gf/of/4X/4H/6H/+F/+B/+h//hf/gf/of/4X/4/2/MluM6VC2cVGLMKEnM4Gvx1ftIMmPslzBhluNsUKDf0yOHT+w+v/Li1ZvP7j+9fHXRzKldqhQtnDSpyWTQybIsSZIs6/RGkz2VT/Z0edo1qpMvhcVk0MtMcElZNkUoqsfjcXMn51xVVM6dDkd8RGRwyIvbh+cObNGxbY2KFdo17TV53ZWzLyICwsLiYmNCQ68fXDqxQeGkvt42o0GWGGMiiphtwONorv5cReEet8vtcrkSHS63hyuKon5b4R6PM/zx6e0Lu3WqVaZYsbw5Uhol4USkKzT6lB//Kb8xT3D4v9netUZWnXAiktK3WXMiWNHQN4MPtUolnojInqXthAuRWlNV/w1tbAKKiHQF2q7x15qqfpiVWUgRyakrDD4cozE17mJnnZAiYtY0dUbec3EtqUrooapGIUVEOkumRrvDEhXtqKrn3ZiMNi9fEUXEJEuhaXdDuXZU1fFo7aG7YupLydbu0FuHdr4qrojI1GjhQ7dmFKfKhRaRufqUE/Ha8FsyYttswUVkyt16aaAGXAu9pfQ24UVEKSoPuPfbvaxDopxZcvW5Hs9/p/h5RmFGxExJW+wPjnfz3yRukzeJddmevu+ee+EO/ut42AwziXdmyNFx5Yn7fomeXxJ7pY+BRL1XvtYzN1164hfr/ilKwLExORkJfe/c1dr0nbH06P3YH3m3ul0K+iPQbM1Zoe2AKRv3hiUqsYmvrhyd2KVOMvqTULanzVypdqv61Urlz2alPxJlieB/+B/+h//hf/gf/of/4X/4H/6H/+F/+B/+h//hf/gf/of/4X/4H/6H/+F/+B/+h//hf/gf/of/4f///AVWUDgg/gMAAJBKAJ0BKhsCGwI+bTabSaQjIqEgWLgIgA2JaW7hd2Ed6aYf54AysYnjJTVU95IKfBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmrBBvmXXOAFXhWOQPUP/yAqysQarNgmDnEuYJZp9ei4uldZPlSDIIaqk122i4QZA/FyUy/WqM4llhr8W2fsG25FGoDEfYgD/DAyUENVSa7bRcIMghqqTCtQtQucMyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1RwAP7/6wAAAAAAAAAAAAAAAAAAAi/uki/3iZv6K6GXIX7QXSHbnoWlsOlUFEqgyZDOfmT3sjg3jVF6KugnVoAYEQwv6QZ7iyabm++teR/E/Aektn3Xs7TAPEB1ae0os8xG0VZx0N+r6OBpJlGOGaTGX0ObL9hx8Dk6IvchI/Kz1xQJiXHOrwk5XNrZ28NJUTEsTpqFM5WQmj8KMgi+IXEWvdgXEAP5CxVCx/11SCCP3kTyusi8BPPOwdaHNbya2GNr7RgN44sLusvl+8eXeNVobNIfzTSMmAmLMFJag4kceb7TKflRrasqCFoFpFMN9Xh8nFgS+U+ApKR0VimgOxiyKu6lblD8rykfkChWW2UWiRTXJFgB1ov1j8SvmvaZ1BN9vGmPSCf3NI1myir7WU1b58X9oyLYBwxsugfg9nxPC4//qNltyYXhtxrq/n37/pkcrO8JzW6k0O6VNwLs88+dPQX8esas7OgRMcvKBb8RflOXWUkUwTG4JDZS0qPI+HD/hxy93A4zwhGkoRZ5XTJuxCaAAAAAAAAAAAAAAAAAAAAA"
  , Jl = "data:image/webp;base64,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"
  , $l = "data:image/webp;base64,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"
  , xl = "/assets/leaf-top3-C9BTCwAz.webp"
  , ec = "/assets/leaf-top4-BUjlPdzY.webp"
  , sc = "/assets/leaf-top5-BEXNsf9Y.webp"
  , tc = "/assets/leaf-top6-rjk2XTrD.webp"
  , ic = "/assets/othernight-D0NIKU2A.webp"
  , xs = "/assets/sheet-bottom-DPvgolac.webp"
  , oc = "/assets/sheet-CXPnUsUN.webp"
  , nc = "/assets/token-CTCszbdB.webp"
  , ac = "/assets/firstnight-CN7yUWuG.webp"
  , rc = "data:image/webp;base64,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"
  , lc = "/assets/leaf-orange-418HATSf.webp"
  , cc = "data:image/webp;base64,UklGRqQOAABXRUJQVlA4WAoAAAAwAAAAZQIAZQIASUNDUDACAAAAAAIwQURCRQIQAABtbnRyUkdCIFhZWiAHzwAGAAMAAAAAAABhY3NwQVBQTAAAAABub25lAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLUFEQkUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApjcHJ0AAAA/AAAADJkZXNjAAABMAAAAGt3dHB0AAABnAAAABRia3B0AAABsAAAABRyVFJDAAABxAAAAA5nVFJDAAAB1AAAAA5iVFJDAAAB5AAAAA5yWFlaAAAB9AAAABRnWFlaAAACCAAAABRiWFlaAAACHAAAABR0ZXh0AAAAAENvcHlyaWdodCAxOTk5IEFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkAAAAZGVzYwAAAAAAAAARQWRvYmUgUkdCICgxOTk4KQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAGN1cnYAAAAAAAAAAQIzAABjdXJ2AAAAAAAAAAECMwAAY3VydgAAAAAAAAABAjMAAFhZWiAAAAAAAACcGAAAT6UAAAT8WFlaIAAAAAAAADSNAACgLAAAD5VYWVogAAAAAAAAJjEAABAvAAC+nEFMUEjrAgAAAZAFSbJpW/Ns27Zt27Zt27Zt27Zt27aufXc/nYu999c8dERMgND/9D/9T//T//Q//U//0//0P/1P/9P/9D/9T//T//Q//U//0//0P/1P/9P/9D/9T//T//Q//U//0//0P/1P/9P/9D/9T//T//Q//f+34ER1mw5bOH581UxRdEjmeDFKpE8YUUTCiEjiaGGTZcySo9r0q/CFw1sDtEeqVrucvn0GPJ899/h24cCG449evQVc/BBopw7RFUf4cYYB07rX1Bp5ur6Gua81iqgxyn+A+d91C6EvavhYAFigL0L3fu5tASxTFyJRa/hbAFtDaosYrd7DkqMyh9QUEXq9hUUNj7UFQ+mJgrD01RYhtERFP0sB7quVRDzDYoDvIRUhTpYDXo9VECE32gAwPaV6kDa2AOcv63oUTh06EPF0gUww7OC3bufapwgTgMpPLkRWBaHv2gbg//5tv9QOPsJLdGEGJ/v4/Znx5eKEEn9gpi6QVnYDGM83dgBgrImgCsTNdgK4L74aCLFgRvEZ9mU8WZBGCYTcAh8X+wLgmkEHSFnY/efiOkCm2h1cc+gAuWR3wEEdkNXf9nCmqgaQ7M62B6gAKa1kZKySkTtKprmpvH3hdPXqtxsXHnk6MrSEnDHPiaaFEkaJFFVEwsVOVa1CtXqNG/Zo1j1pgoRVh+44d+Lhez/dEP2VWdZFkeANFfe8bpCsL01xvqAEb4RGwy76B+i1mz6QOFuD7+KiMBLM8S/DoT9ONo8fNUm2dmfUgUitC8Gys22IiGLClhcAGNjbKow4LO8MoLUqECn6NEjeuV3q2S5xKDFryTadO2eRAGc854G6ykAk3+CTLgH6PK9onBThxOIh4pTOpg5EIubq2nXw7LnTh48c2DlHGFGuIYX+p//pf/qf/qf/6X/6n/6n/+l/+p/+p//pf/qf/qf/6X/6n/6n/+l/+p/+p//pf/qf/qf/6X/6n/6n/+l/+p/+p//pf/qf/qf//4sWAFZQOCBaCQAA0G0AnQEqZgJmAj5tNpdJpCKiISB4+BiADYlpbuF3YR9SW/EinrkCZ9X/zfqc26vPUejv/mb9BvN1eP/ePCHx7/BpVHKNkC8VUyLP39VfYCgAlQT6x/mPPD6IWbR6o9gXpB+jT+4AE4ReWAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6YhQKyXtLrJlzHSQKDiDGJEI0JRSU9RKexGDYQmQP5sT/Mhb+UDLq3U3uobLANdTe6hso02gBz2pzInBtBoQP3ARhHkrNCCnuGqkzVr79ivADFuLDvMbJIjV/1EeCDz4UbP3GcYqPUXlgGupvdQ2WAa6m9xLXf2/mENC+pqJV2viimqZzz96YIr9SUFdVpSLeebRnY9SIiH8v/xZUNlgGupvdQ2WAa6m9xK/eS2vPwPwPwOU1F1bqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2WAa6m91DZYBrqb3UNlgGupvdQ2EAA/v/uHAAAAAAAAAAAAAAAAAAAAAAAATX+oFmD+bDgN61pE5WhZ9kbaXstASbc00R/+jAyBfKqGyKZr+4Un+SApEpDdTCFaf79coHoWlX5p60FF6wdCWRVjhqCrPPxOidT/rgqwCxRdEKTU7f186XzoKZdo8XelHRgPreTG4ipkkIW0mUn1hTJxZIgBb+pSx91Gr19mZe+zUIm5OULyJpLxJJk/w6i2D4YX8B5S1+xw3riAgsX8u++7EyH+UodzvehYK3+fzj4wzKSLrwLSq+Ri7MbYPmZ+M//NcNUcJxt6Le/d7JEid8rdURUeRPCE6fPyOm3pupSCt2V+THmzbr0APCMREvMZo24oZ6+EI8I0oZxmya40jZm2erFbpxywgkYxBhhhEBVfdGSa1k+Zthl/r3H5y/v/4+GLICELMqVOicH5rfO7pssgm5ciEHCoAp7ZuNWmk9Kxfug4N77PvYKh/d9daLFjA0j+D2I2x9y/IC4pY61KEzeSwKV0ubTFbTBVzOMsX6anWe0TPtcCwor5GR8966JMcnMYOlBUxV4LXDUxvPP41eUYlaI1YpWPJ5EPaW+zRdrgwcwItvZNhR/qDIa8BuYDfv3hFCuigDrRSoCFNPNiP/+D/xv/94Df/0we9WJu4Ocrt5dGaN85j2f/3YCV8K1nAbAvXk8cGc3S1D5zfi4Idk8nRcmVCZ3sgyvRNLxwrJFya0oWxndhYysSlfs6Fc7ql52kdJieifMY00dVBWQrOt/yCg+K9bbn8fE2xKyunIOlVze8Z/b2+QQ5G+fttHoM97GiAPCvRcYnVA79+CDc8Xofe9PM5ZTvpvgMegDPMoshsY51zU/hj1ol0i8lS3a8li1eIi3hXuI94nfFZLvTRoTijTEYMLNdvjE4USf7YlBNz/sXsU4DtE5f/kzWQO+12CuZWx6PMnsQNA804GE+S2HQ9InyZs8ERYDkGRK3ZcqECD62F3K6n590ULea7DReZTnneKOe1Nm9XIPlSM30B25z3DP/SIEr9aPDPeVOIylhv95mDOwzRLQWtDHCA1xMNqftyuKGsj/z3eO8LHGz3TJIjdf53E8IODw3XPKOhVNdBytrJjwb6xyuwbze6fA5ZFX9jwGUZ3ey6V4ewTisUAjjYOT6Uz9/7uBLauNTJ97ASiC6EBvcE63UjO1mUxVJsiz7O4MOFjbpl9BIeF3052O7a88o++KiCdKqaBkFGxHtity4wEgiI90H6cYAYGBXlIrjbtY8/xWy5P7YO9TdAy3YFWn+HabAci6/7yqoEcxgY9KhZfq1s+5WxSgvqXeOjw3m+uJKj1CTrXgrHSZSmO3K/E1GtW8QxfT8j3lc+9bv2CvIQEtyqeiWKsCVAK8/XJmHHYabwgTcvwjGOYP6/vvk92JLDv6x5PBZCPgiceXTs+9EapfTqDV4u69Jxn82BfD+up5earpxhrhsDqFqtPV/mArYxdZaeH+T3UlorgxXR4um+CcrM2yLL3wwYfwrv+OmRy6yFBwq1zCXEFGkfPcPdMReZAD9OJWFNPIMBocHjuJQJc5/sE4IGUxFmCnfEz9gNx3vfwBvJHK7KO6XfuUV92kD+Py/+YcgJ2UQt4WibxMuWwSm+iTVPNID1VDv4FB/KQFEuoe6LkmXAAVTyrlHLyBXZpMv2chP0t6+cR1MmgI0d8NZmEEOupefKfHcmEgpEmqPXe0jrzYm7XyxdLm29M4m3Ui4Wx/TIMWoih5GvYbaHPE5jqsfkOzB1gVCqcIZEpKsdjKB+KTfOofc04rdBAFJaReHFWIP7pcWw5gLGeCAjWLJH5oPMAo4JyFsVEr4gOO6GVrZPzzub3Jx6hV1zD5d7ptARxeGBCU4rNrT20s2dIQj4aQugUjuoZvBLN+tTCMWBwCd0xHb+Gy5XeV9eXXOOO3P93JJa5MeZnc8BhjT4fF1yujMAVwxp6K/16KWlgmIMmv7wDt6Q74qeMNbVyBbKlcAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
  , dc = "data:image/webp;base64,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"
  , uc = "/assets/leaf-top2-sRAyOA8-.webp"
  , gc = "/assets/leaf-top3-CBtDOqhc.webp"
  , mc = "/assets/leaf-top4-2k84E7uc.webp"
  , hc = "/assets/leaf-top5-Bc-Gdmm0.webp"
  , pc = "/assets/leaf-top6-CJMCb2p8.webp"
  , Ac = "/assets/leaf-top7-BwX55vT7.webp"
  , bc = "/assets/othernight-D1vk2275.webp"
  , et = "/assets/sheet-bottom-BpeJZ1aT.webp"
  , fc = "/assets/sheet-DG3cIEIJ.webp"
  , vc = "/assets/token-DRfx6YVD.webp"
  , _c = "data:image/webp;base64,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"
  , yc = "/assets/leaf-orange-418HATSf.webp"
  , wc = "data:image/webp;base64,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"
  , kc = "data:image/webp;base64,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"
  , Cc = "/assets/leaf-top2-Brn4XVVn.webp"
  , Sc = "/assets/leaf-top3-D8scAOLC.webp"
  , Pc = "/assets/leaf-top4-O8IBBccu.webp"
  , Tc = "/assets/token-BeVpitSA.webp"
  , Ic = "/assets/firstnight-CCAxafk_.webp"
  , Mc = "data:image/webp;base64,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"
  , Rc = "/assets/leaf-orange-418HATSf.webp"
  , Dc = "data:image/webp;base64,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"
  , Ec = "data:image/webp;base64,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"
  , Nc = "/assets/leaf-top2-CSOaDkz9.webp"
  , Bc = "/assets/leaf-top3-BygOvTRs.webp"
  , Vc = "/assets/leaf-top4-Barq9aua.webp"
  , Oc = "/assets/leaf-top5-Bg2URR_T.webp"
  , jc = "/assets/othernight-CEystKCV.webp"
  , st = "/assets/sheet-bottom-UbaLRZcD.webp"
  , Uc = "/assets/sheet-C8MRSCHO.webp"
  , Hc = "/assets/token-D8iljfum.webp"
  , qc = "/assets/app-icon-CG9GQKA7.webp"
  , Lc = "/assets/bigwig-3vDwfauH.webp"
  , zc = "/assets/butterfly-EBqpuH6L.webp"
  , Gc = "/assets/card-blue-kXD022m_.webp"
  , Wc = "/assets/card-brown-COX7dS9S.webp"
  , Fc = "/assets/card-green-CZ3QqHJ-.webp"
  , Qc = "/assets/card-orange-CCQqfh88.webp"
  , Zc = "/assets/card-purple-BzGRM6Av.webp"
  , Xc = "/assets/card-red-DumJ01TW.webp"
  , Kc = "/assets/clock-hour-4OZZ2IsM.webp"
  , Yc = "/assets/clock-minute-C8-oSdzR.webp"
  , Jc = "/assets/clock-second-DxRb4kLT.webp"
  , $c = "/assets/clock_back-DYcKUv9A.webp"
  , xc = "/assets/clock_circle-D9aDMLwo.webp"
  , ed = "/assets/clock_cog1-BFsWJmN-.webp"
  , sd = "/assets/clock_cog2-CDec-14_.webp"
  , td = "data:image/webp;base64,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"
  , id = "/assets/clouds-CpjqM-gf.webp"
  , od = "/assets/death-BHZe2Aua.webp"
  , nd = "/assets/demon-C7R1ydjC.webp"
  , ad = "data:image/webp;base64,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"
  , rd = "/assets/gossip-DY4wKAxk.webp"
  , ld = "/assets/gstone-VWw9KNFF.webp"
  , cd = "/assets/life-BUG528sL.webp"
  , dd = "data:image/webp;base64,UklGRt4EAABXRUJQVlA4WAoAAAAQAAAAHwMADAAAQUxQSMUBAAABGTVtGzDKH/6IOyhE9D8J5QpJkiQptpPVgx92/y9J0opWfBCdUsfQaZhZ86ar8kHTtJgjJsCB20iKlGW4uzTdIxD+1760rrnjyKADjvI8T61MJiszz1OeUsrzlAIQQgCJS04c6vRCvAnABwBvTLa8srLFvEBbJm8EqBBFW8L7MwAg2kFpA0FbBBBASqmIGdVInFOIUr+IaNxzlwNfyJKAAGYmgLZ8RBFEFGEIhKD4vcBkhyniI68CPVGKV4PZOw888CVhjPk8CFKmCqSoSuiKRP2wG6K2k2g4VOAiGkYV5aqsEsZQmeCXAImGk1chQ8YYMN5uUZOXnnjlmdp07rtuD3yLFgoalqIKxj9QJiI+ULmZjhR6g7RpqLtMoqhZCOq4UD0/RUU9mhcURIoWN21+kIXJqxpVoE4LRnlxBxizcNapwkwZQ5UCImNoccK95d1asogo9IYAEK1PXnmFoPZywWUXHOsANEb79o0GvU6v1+o4ouHk2slxRLKQnlKzj8B84AX/CmQMKUOxAIRXHpEiCgRAGQr2ZidtVFhKZWDnEAkYolQdTHLsQo/i/BOIfJpJLEm8IRAJvxymrHHKzGv5Efx3cQEAVlA4IPICAAAQEwCdASogAw0APm0sj0YkJ6EktRF6WPANiWdAnuBSO64FrLg0L2oDJVfEAVIP+Y91j6fqv3dAH/Hej/eK5Q8gsAhAPg+C8nSRKwHI0K9BWdDAvFqDGYW1u7+g2WF81jMf164jxu22D7T+Jj1hPzk64jxlnuDfuqxDTCuS2Fdhr0oeCvf6IRYOe4774r4my376fIsnB9QVUfW9+hgObl+3wAD+/K0cAZ48H9n6W90/oViGFeecg8fE1wINLD3TmpeFLm/teiUiOYrXpoP0kvbiic0gB7r5FI70iQdHMuRBqCMcqa2fHc63LEwwW7ZxoPKLFsHtRx5DG83eh0cBffizHo1YQ8nWRRDgYJsbkWGVkMdoRaUsjvc9x5xqSbUtjUlQxF3NIyqzAv4Fx9nOaRQfDBOxeTx7O+W1/cxM1oyDOXhdrPartSGvqbKZnmBSA6rfiO31lILB0CY0Xi8hxU/vo4Hgu+5ZuTHvynv6fW2vvANNEOwNBH4vN4n0gNbxj4ZJWZMUd84MkhtdrjXLubN5Vr0mDB12EidZG3JeU3e/6AhvTc/8ejrOeMaD9PBz9M6bgNHlwmIUjIl10iJe/2OJ8OYBn+31HFTJfKHNMG4c5M2uVsE3QTgreizE1ZplfXicfEz0RAE6ur/rkdolP0jOiCrk0XmUEUBuIu+j/ycGU95H76J2y0b6mrWq4mVYNZrb9fDHl6n0S9S9GfPCCN3afRfBxIuKwNoyKRWeXa+BVB/z/L9Ay8ltFHZPWvp+Bj1FlEP99y1cu55gKvqeNSd/iJC0TEv3+FfkxpC8qlbrSn/fQ09DlhNrkXBDsk3F1cTi84nr0LM2Kx2JrCnG9cL2oRRHKoL5Ec5w4wlHuSyNo2wrRC8S3zwA5ON8uv2BzMP9Q5MbLmR9UQjODHsVRDSsQeAS1sdWgTvSnPVXQCuFC7TtA9SWJu3sTOTlgBUwFYXDdOag5SoLYKZDhStE6BzjW+wTBpWKII5nGgguP/e2B+wA"
  , ud = "/assets/loading-dSz7mDOD.webp"
  , gd = "/assets/logo-B1iScA0C.webp"
  , md = "/assets/night-wkWV6s70.webp"
  , hd = "data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1200'%20height='762'%20viewBox='0%200%206000%203810'%3e%3cpath%20fill='%236d2380'%20d='M0%200h6000v3810H0z'/%3e%3cpath%20fill='%232c58a4'%20d='M0%200h6000v3175H0z'/%3e%3cpath%20fill='%2378b82a'%20d='M0%200h6000v2540H0z'/%3e%3cpath%20fill='%23efe524'%20d='M0%200h6000v1905H0z'/%3e%3cpath%20fill='%23f28917'%20d='M0%200h6000v1270H0z'/%3e%3cpath%20fill='%23e22016'%20d='M0%200h6000v635H0z'/%3e%3cpath%20d='M0%200h1577l1764%201905-1764%201905H0z'/%3e%3cpath%20fill='%23945516'%20d='M0%200h1209l1764%201905-1764%201905H0z'/%3e%3cpath%20fill='%237bcce5'%20d='M0%200h844l1764%201905L844%203810H0z'/%3e%3cpath%20fill='%23f4aec8'%20d='M0%200h477l1764%201905L477%203810H0z'/%3e%3cpath%20fill='%23fff'%20d='M0%200h111l1763%201905L111%203810H0z'/%3e%3cpath%20fill='%23fdd817'%20d='m0%20278%201507%201627L0%203532z'/%3e%3ccircle%20cx='556'%20cy='1905'%20r='404'%20fill='none'%20stroke='%2366338b'%20stroke-width='95'/%3e%3c/svg%3e"
  , pd = "/assets/puck-D7lu7Al4.webp"
  , Ad = "data:image/webp;base64,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"
  , bd = "/assets/sb-DN76BlRu.webp"
  , fd = "/assets/shroud-VicSzD1a.webp"
  , vd = "/assets/towninfo-DYodGRbv.webp"
  , _d = "/assets/tpi-CjLIf2nx.webp"
  , yd = "/assets/traveller-cKw3P72F.webp"
  , wd = "/assets/vote-CIIY1W5t.webp"
  , Pa = {
    components: {
        Tab: je,
        FontAwesomeIcon: Y
    },
    inject: ["renderReminderHTML"],
    computed: {
        ...I(["roles", "rolesAvailable", "edition", "grimoire", "session", "positions", "settings", "definitions"]),
        ...I("players", ["players", "npcs", "storytellers"]),
        ...I("user", ["user"]),
        ...D(["roleIconURL"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess"]),
        ...D("players", ["playerName"]),
        ...D("game", ["isNight"]),
        rolesFirstNight() {
            const e = [{
                role: this.$store.getters.specialRoles.dusk
            }, {
                role: this.$store.getters.specialRoles.dawn
            }];
            return (this.players.length > 6 || this.npcs.some(s => s.id === "toymaker")) && !this.npcs.some(s => s.id === "tor") && e.push({
                role: this.$store.getters.specialRoles.minioninfo,
                players: this.players.filter(s => s.role.team === "minion")
            }, {
                role: this.$store.getters.specialRoles.demoninfo,
                players: this.players.filter(s => s.role.team === "demon")
            }),
            this.roles.forEach(s => {
                const t = [...this.storytellers.filter(n => n.role.id === s.id), ...this.players.filter(n => n.role.id === s.id)];
                s.id && s.firstNight && this.definitions.PLAYER_TEAMS.includes(s.team) && (s.team !== "traveller" || t.length) && e.push({
                    role: s,
                    players: t
                })
            }
            ),
            this.players.forEach(s => {
                var t, n;
                !this.roles.has(s.role.id) && ((t = s.role) == null ? void 0 : t.team) === "traveller" && ((n = s.role) != null && n.firstNight) && e.push({
                    role: s.role,
                    players: [s]
                })
            }
            ),
            this.npcs.filter( ({firstNight: s}) => s).forEach(s => {
                e.push({
                    role: s,
                    players: this.players.filter(t => t.reminders.some(n => n.role === s.id))
                })
            }
            ),
            e.sort( (s, t) => {
                var n, i;
                return ((n = this.edition.firstNight) != null && n.includes(s.role.id) ? this.edition.firstNight.indexOf(s.role.id) : s.role.firstNight - 1) - ((i = this.edition.firstNight) != null && i.includes(t.role.id) ? this.edition.firstNight.indexOf(t.role.id) : t.role.firstNight - 1)
            }
            ),
            e
        },
        rolesOtherNight() {
            const e = [{
                role: this.$store.getters.specialRoles.dusk
            }, {
                role: this.$store.getters.specialRoles.dawn
            }];
            return this.roles.forEach(s => {
                const t = [...this.storytellers.filter(n => n.role.id === s.id), ...this.players.filter(n => n.role.id === s.id)];
                [{
                    role: "cannibal",
                    reminder: "lunch"
                }, {
                    role: "pixie",
                    reminder: "has ability"
                }].forEach( ({role: n, reminder: i}) => {
                    const o = this.players.filter(l => {
                        var g;
                        return ((g = l.role) == null ? void 0 : g.id) === n
                    }
                    );
                    o.length && t.some(l => l.reminders.some(g => g.role === n && g.name.match(RegExp(i, "i")))) && t.push(...o)
                }
                ),
                s.otherNight && this.definitions.PLAYER_TEAMS.includes(s.team) && (s.team !== "traveller" || t.length) && e.push({
                    role: s,
                    players: t
                })
            }
            ),
            this.players.forEach(s => {
                var t, n;
                !this.roles.has(s.role.id) && ((t = s.role) == null ? void 0 : t.team) === "traveller" && ((n = s.role) != null && n.otherNight) && e.push({
                    role: s.role,
                    players: [s]
                })
            }
            ),
            this.npcs.filter( ({otherNight: s}) => s).forEach(s => {
                e.push({
                    role: s,
                    players: this.players.filter(t => t.reminders.some(n => n.role === s.id))
                })
            }
            ),
            e.sort( (s, t) => {
                var n, i;
                return ((n = this.edition.otherNight) != null && n.includes(s.role.id) ? this.edition.otherNight.indexOf(s.role.id) : s.role.otherNight - 1) - ((i = this.edition.otherNight) != null && i.includes(t.role.id) ? this.edition.otherNight.indexOf(t.role.id) : t.role.otherNight - 1)
            }
            ),
            e
        },
        sheetLogo() {
            return new URL(Object.assign({
                "/src/assets/editions/bmr/logo-sheet.webp": Re,
                "/src/assets/editions/custom/logo-sheet.webp": De,
                "/src/assets/editions/homebrew/logo-sheet.webp": Ee,
                "/src/assets/editions/snv/logo-sheet.webp": Ne,
                "/src/assets/editions/tb/logo-sheet.webp": Be
            })[`/src/assets/editions/${this.edition.id}/logo-sheet.webp`],import.meta.url).href
        }
    },
    data() {
        return {
            tokensFirst: {},
            tokensOther: {},
            zoom: parseInt(localStorage.getItem("night-zoom")) || 0
        }
    },
    methods: {
        ...j(["setRightSideTabState", "toggleModal", "setPosition"]),
        setZoom(e) {
            e && (this.zoom = Math.min(Math.max(-3, this.zoom + e), 1),
            this.zoom ? localStorage.setItem("night-zoom", this.zoom) : localStorage.removeItem("night-zoom"))
        },
        toggleSheet(e) {
            var i;
            const s = e === "firstnight" ? "othernight" : "firstnight"
              , t = this.positions[e];
            t.hidden = !0;
            const n = (i = this.positions[s]) != null ? i : Object.assign({}, this.positions[e]);
            n.hidden = !1,
            this.$store.commit("setPosition", {
                name: e,
                value: t
            }),
            this.$store.commit("setPosition", {
                name: s,
                value: n
            }),
            this.grimoire.rightSideTabState.match(new RegExp(`^${s}-`)) && this.$store.commit("setRightSideTabState", "")
        },
        bgImage(e, s=!0) {
            if (this.edition.id)
                return s ? "url(" + new URL(Object.assign({
                    "/src/assets/editions/bmr/background1.webp": Rn,
                    "/src/assets/editions/bmr/background1t.webp": $e,
                    "/src/assets/editions/bmr/background2.webp": Dn,
                    "/src/assets/editions/bmr/background2t.webp": xe,
                    "/src/assets/editions/bmr/background3.webp": En,
                    "/src/assets/editions/bmr/background3t.webp": es,
                    "/src/assets/editions/bmr/background4.webp": Nn,
                    "/src/assets/editions/bmr/background4t.webp": ss,
                    "/src/assets/editions/bmr/background5.webp": Bn,
                    "/src/assets/editions/bmr/background5t.webp": ts,
                    "/src/assets/editions/bmr/background6.webp": Vn,
                    "/src/assets/editions/bmr/background6t.webp": is,
                    "/src/assets/editions/bmr/firstnight.webp": wl,
                    "/src/assets/editions/bmr/leaf-left.webp": kl,
                    "/src/assets/editions/bmr/leaf-orange.webp": Cl,
                    "/src/assets/editions/bmr/leaf-right.webp": Sl,
                    "/src/assets/editions/bmr/leaf-top1.webp": Pl,
                    "/src/assets/editions/bmr/leaf-top2.webp": Tl,
                    "/src/assets/editions/bmr/leaf-top3.webp": Il,
                    "/src/assets/editions/bmr/leaf-top4.webp": Ml,
                    "/src/assets/editions/bmr/leaf-top5.webp": Rl,
                    "/src/assets/editions/bmr/logo-active.webp": ma,
                    "/src/assets/editions/bmr/logo-sheet.webp": Re,
                    "/src/assets/editions/bmr/logo.webp": ha,
                    "/src/assets/editions/bmr/othernight.webp": Dl,
                    "/src/assets/editions/bmr/sheet-bottom.webp": Js,
                    "/src/assets/editions/bmr/sheet.webp": El,
                    "/src/assets/editions/bmr/skull.webp": Ts,
                    "/src/assets/editions/bmr/token.webp": Nl,
                    "/src/assets/editions/custom/background1.webp": On,
                    "/src/assets/editions/custom/background1t.webp": os,
                    "/src/assets/editions/custom/background2.webp": jn,
                    "/src/assets/editions/custom/background2t.webp": ns,
                    "/src/assets/editions/custom/background3.webp": Un,
                    "/src/assets/editions/custom/background3t.webp": as,
                    "/src/assets/editions/custom/background4.webp": Hn,
                    "/src/assets/editions/custom/background4t.webp": rs,
                    "/src/assets/editions/custom/background5.webp": qn,
                    "/src/assets/editions/custom/background5t.webp": ls,
                    "/src/assets/editions/custom/background6.webp": Ln,
                    "/src/assets/editions/custom/background6t.webp": cs,
                    "/src/assets/editions/custom/background7.webp": zn,
                    "/src/assets/editions/custom/background7t.webp": ds,
                    "/src/assets/editions/custom/background8.webp": Gn,
                    "/src/assets/editions/custom/background8t.webp": us,
                    "/src/assets/editions/custom/firstnight.webp": Bl,
                    "/src/assets/editions/custom/leaf-left.webp": Vl,
                    "/src/assets/editions/custom/leaf-orange.webp": Ol,
                    "/src/assets/editions/custom/leaf-right.webp": jl,
                    "/src/assets/editions/custom/leaf-top1.webp": Ul,
                    "/src/assets/editions/custom/leaf-top2.webp": Hl,
                    "/src/assets/editions/custom/leaf-top3.webp": ql,
                    "/src/assets/editions/custom/leaf-top4.webp": Ll,
                    "/src/assets/editions/custom/leaf-top5.webp": zl,
                    "/src/assets/editions/custom/leaf-top6.webp": Gl,
                    "/src/assets/editions/custom/logo-active.webp": pa,
                    "/src/assets/editions/custom/logo-label.webp": Aa,
                    "/src/assets/editions/custom/logo-sheet.webp": De,
                    "/src/assets/editions/custom/logo.webp": ba,
                    "/src/assets/editions/custom/othernight.webp": Wl,
                    "/src/assets/editions/custom/sheet-bottom.webp": $s,
                    "/src/assets/editions/custom/sheet.webp": Fl,
                    "/src/assets/editions/custom/skull.webp": Is,
                    "/src/assets/editions/custom/token.webp": Ql,
                    "/src/assets/editions/homebrew/firstnight.webp": Zl,
                    "/src/assets/editions/homebrew/leaf-left.webp": Xl,
                    "/src/assets/editions/homebrew/leaf-orange.webp": Kl,
                    "/src/assets/editions/homebrew/leaf-right.webp": Yl,
                    "/src/assets/editions/homebrew/leaf-top1.webp": Jl,
                    "/src/assets/editions/homebrew/leaf-top2.webp": $l,
                    "/src/assets/editions/homebrew/leaf-top3.webp": xl,
                    "/src/assets/editions/homebrew/leaf-top4.webp": ec,
                    "/src/assets/editions/homebrew/leaf-top5.webp": sc,
                    "/src/assets/editions/homebrew/leaf-top6.webp": tc,
                    "/src/assets/editions/homebrew/logo-label.webp": fa,
                    "/src/assets/editions/homebrew/logo-sheet.webp": Ee,
                    "/src/assets/editions/homebrew/othernight.webp": ic,
                    "/src/assets/editions/homebrew/sheet-bottom.webp": xs,
                    "/src/assets/editions/homebrew/sheet.webp": oc,
                    "/src/assets/editions/homebrew/skull.webp": Ms,
                    "/src/assets/editions/homebrew/token.webp": nc,
                    "/src/assets/editions/snv/background1.webp": Wn,
                    "/src/assets/editions/snv/background1t.webp": gs,
                    "/src/assets/editions/snv/background2.webp": Fn,
                    "/src/assets/editions/snv/background2t.webp": ms,
                    "/src/assets/editions/snv/background3.webp": Qn,
                    "/src/assets/editions/snv/background3t.webp": hs,
                    "/src/assets/editions/snv/background4.webp": Zn,
                    "/src/assets/editions/snv/background4t.webp": ps,
                    "/src/assets/editions/snv/background5.webp": Xn,
                    "/src/assets/editions/snv/background5t.webp": As,
                    "/src/assets/editions/snv/background6.webp": Kn,
                    "/src/assets/editions/snv/background6t.webp": bs,
                    "/src/assets/editions/snv/firstnight.webp": ac,
                    "/src/assets/editions/snv/leaf-left.webp": rc,
                    "/src/assets/editions/snv/leaf-orange.webp": lc,
                    "/src/assets/editions/snv/leaf-right.webp": cc,
                    "/src/assets/editions/snv/leaf-top1.webp": dc,
                    "/src/assets/editions/snv/leaf-top2.webp": uc,
                    "/src/assets/editions/snv/leaf-top3.webp": gc,
                    "/src/assets/editions/snv/leaf-top4.webp": mc,
                    "/src/assets/editions/snv/leaf-top5.webp": hc,
                    "/src/assets/editions/snv/leaf-top6.webp": pc,
                    "/src/assets/editions/snv/leaf-top7.webp": Ac,
                    "/src/assets/editions/snv/logo-active.webp": va,
                    "/src/assets/editions/snv/logo-sheet.webp": Ne,
                    "/src/assets/editions/snv/logo.webp": _a,
                    "/src/assets/editions/snv/othernight.webp": bc,
                    "/src/assets/editions/snv/sheet-bottom.webp": et,
                    "/src/assets/editions/snv/sheet.webp": fc,
                    "/src/assets/editions/snv/skull.webp": Rs,
                    "/src/assets/editions/snv/token.webp": vc,
                    "/src/assets/editions/taf/leaf-left.webp": _c,
                    "/src/assets/editions/taf/leaf-orange.webp": yc,
                    "/src/assets/editions/taf/leaf-right.webp": wc,
                    "/src/assets/editions/taf/leaf-top1.webp": kc,
                    "/src/assets/editions/taf/leaf-top2.webp": Cc,
                    "/src/assets/editions/taf/leaf-top3.webp": Sc,
                    "/src/assets/editions/taf/leaf-top4.webp": Pc,
                    "/src/assets/editions/taf/logo.webp": ya,
                    "/src/assets/editions/taf/token.webp": Tc,
                    "/src/assets/editions/tb/background1.webp": Yn,
                    "/src/assets/editions/tb/background1t.webp": fs,
                    "/src/assets/editions/tb/background2.webp": Jn,
                    "/src/assets/editions/tb/background2t.webp": vs,
                    "/src/assets/editions/tb/background3.webp": $n,
                    "/src/assets/editions/tb/background3t.webp": _s,
                    "/src/assets/editions/tb/background4.webp": xn,
                    "/src/assets/editions/tb/background4t.webp": ys,
                    "/src/assets/editions/tb/background5.webp": ea,
                    "/src/assets/editions/tb/background5t.webp": ws,
                    "/src/assets/editions/tb/background6.webp": sa,
                    "/src/assets/editions/tb/background6t.webp": ks,
                    "/src/assets/editions/tb/firstnight.webp": Ic,
                    "/src/assets/editions/tb/leaf-left.webp": Mc,
                    "/src/assets/editions/tb/leaf-orange.webp": Rc,
                    "/src/assets/editions/tb/leaf-right.webp": Dc,
                    "/src/assets/editions/tb/leaf-top1.webp": Ec,
                    "/src/assets/editions/tb/leaf-top2.webp": Nc,
                    "/src/assets/editions/tb/leaf-top3.webp": Bc,
                    "/src/assets/editions/tb/leaf-top4.webp": Vc,
                    "/src/assets/editions/tb/leaf-top5.webp": Oc,
                    "/src/assets/editions/tb/logo-active.webp": wa,
                    "/src/assets/editions/tb/logo-sheet.webp": Be,
                    "/src/assets/editions/tb/logo.webp": ka,
                    "/src/assets/editions/tb/othernight.webp": jc,
                    "/src/assets/editions/tb/sheet-bottom.webp": st,
                    "/src/assets/editions/tb/sheet.webp": Uc,
                    "/src/assets/editions/tb/skull.webp": Ds,
                    "/src/assets/editions/tb/token.webp": Hc
                })[`/src/assets/editions/${this.edition.id}/${e}`],import.meta.url).href + ")" : "url(" + new URL(Object.assign({
                    "/src/assets/app-icon.webp": qc,
                    "/src/assets/background.webp": ta,
                    "/src/assets/background1.webp": ia,
                    "/src/assets/background1t.webp": Cs,
                    "/src/assets/background2.webp": oa,
                    "/src/assets/background2t.webp": Ss,
                    "/src/assets/background3.webp": na,
                    "/src/assets/background3t.webp": Ps,
                    "/src/assets/bigwig.webp": Lc,
                    "/src/assets/butterfly.webp": zc,
                    "/src/assets/card-blue.webp": Gc,
                    "/src/assets/card-brown.webp": Wc,
                    "/src/assets/card-green.webp": Fc,
                    "/src/assets/card-orange.webp": Qc,
                    "/src/assets/card-purple.webp": Zc,
                    "/src/assets/card-red.webp": Xc,
                    "/src/assets/clock-hour.webp": Kc,
                    "/src/assets/clock-minute.webp": Yc,
                    "/src/assets/clock-second.webp": Jc,
                    "/src/assets/clock_back.webp": $c,
                    "/src/assets/clock_circle.webp": xc,
                    "/src/assets/clock_cog1.webp": ed,
                    "/src/assets/clock_cog2.webp": sd,
                    "/src/assets/clock_cogcap.webp": td,
                    "/src/assets/clouds.webp": id,
                    "/src/assets/death.webp": od,
                    "/src/assets/demon.webp": nd,
                    "/src/assets/gavel.webp": ad,
                    "/src/assets/gossip.webp": rd,
                    "/src/assets/gstone.webp": ld,
                    "/src/assets/life.webp": cd,
                    "/src/assets/line.webp": dd,
                    "/src/assets/loading.webp": ud,
                    "/src/assets/logo.webp": gd,
                    "/src/assets/night.webp": md,
                    "/src/assets/progress.svg": hd,
                    "/src/assets/puck.webp": pd,
                    "/src/assets/reminder.webp": Ad,
                    "/src/assets/sb.webp": bd,
                    "/src/assets/shroud.webp": fd,
                    "/src/assets/towninfo.webp": vd,
                    "/src/assets/tpi.webp": _d,
                    "/src/assets/traveller.webp": yd,
                    "/src/assets/vote.webp": wd
                })[`/src/assets/${e}`],import.meta.url).href + ")"
        },
        sheetImage() {
            if (this.edition.id)
                return new URL(Object.assign({
                    "/src/assets/editions/bmr/logo-sheet.webp": Re,
                    "/src/assets/editions/custom/logo-sheet.webp": De,
                    "/src/assets/editions/homebrew/logo-sheet.webp": Ee,
                    "/src/assets/editions/snv/logo-sheet.webp": Ne,
                    "/src/assets/editions/tb/logo-sheet.webp": Be
                })[`/src/assets/editions/${this.edition.id}/logo-sheet.webp`],import.meta.url).href
        },
        toggleTab(e, s=!1) {
            if (this.positions[e] && !s)
                return;
            const {rightSideTabState: t} = this.$store.state.grimoire;
            if (this.positions[e])
                if (this.settings.general.isPositioningDisabled) {
                    const n = this.positions[e];
                    n.hidden = !n.hidden,
                    this.setPosition({
                        name: e,
                        value: n
                    })
                } else
                    this.setPosition({
                        name: e
                    }),
                    this.setRightSideTabState(e + "-mid");
            else
                t === e + "-open" ? this.setRightSideTabState("") : t === e + "-mid" ? this.setRightSideTabState(e + "-open") : this.setRightSideTabState(e + "-mid")
        },
        closeTab(e) {
            this.grimoire.rightSideTabState === e + "-open" && this.$store.commit("setRightSideTabState", "")
        },
        popOut(e) {
            const {left: s, top: t} = this.$refs[e].getBoundingClientRect();
            this.setPosition({
                name: e,
                value: {
                    x: Math.round(s != null ? s : 0) + "px",
                    y: Math.round(t != null ? t : 0) + "px"
                }
            })
        },
        wake(e) {
            !this.isNight || !this.isStoryteller || this.storytellers.includes(e) || this.toggleModal({
                name: "signal",
                params: {
                    player: e
                }
            })
        }
    },
    watch: {
        "grimoire.mode"(e) {
            e === "firstnight" && this.setRightSideTabState("firstnight-mid")
        },
        "session.hook"(e) {
            e.name === "distribute-roles" && (this.tokensFirst = {},
            this.tokensOther = {})
        }
    }
}
  , Zr = () => {
    be(e => ({
        v06be3d08: e.zoom
    }))
}
  , Xr = Pa.setup;
Pa.setup = Xr ? (e, s) => (Zr(),
Xr(e, s)) : Zr;
const gS = ["onClick"]
  , mS = {
    class: "name"
}
  , hS = ["onClick"]
  , pS = ["innerHTML"]
  , AS = ["src"]
  , bS = {
    class: "button-group"
}
  , fS = ["title"]
  , vS = ["title"]
  , _S = ["onClick"]
  , yS = {
    class: "name"
}
  , wS = ["onClick"]
  , kS = ["innerHTML"]
  , CS = ["src"]
  , SS = {
    class: "button-group"
}
  , PS = ["title"]
  , TS = ["title"];
function IS(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("Tab");
    return r(),
    u(_, null, [(e.hasGrimoireAccess || e.settings.game.isPlayerNightOrder) && e.edition.id ? (r(),
    u("aside", Hs({
        key: 0
    }, e.$attrs, {
        class: ["night-order other tab", {
            open: e.grimoire.rightSideTabState === "othernight-open",
            mid: e.grimoire.rightSideTabState === "othernight-mid",
            positioned: e.positions.othernight && !e.positions.othernight.hidden
        }],
        ref: "othernight"
    }), [a("div", {
        class: "label",
        role: "heading",
        onClick: s[0] || (s[0] = c => o.toggleTab("othernight", !0))
    }, d(e.$t("grimoire.phases.other_nights")), 1), b(g, {
        name: "othernight",
        onClick: s[5] || (s[5] = c => o.toggleTab("othernight")),
        onDragged: s[6] || (s[6] = c => o.closeTab("othernight")),
        "is-draggable": e.grimoire.rightSideTabState === "othernight-open",
        style: L({
            backgroundImage: o.bgImage("sheet.webp")
        })
    }, {
        footer: S( () => [a("div", bS, [e.positions.othernight ? (r(),
        u("div", {
            key: 1,
            onClick: s[2] || (s[2] = M(c => o.toggleSheet("othernight"), ["stop"])),
            class: "button secondary",
            title: e.$t("tabs.night.toggle")
        }, [v(d(e.$t("grimoire.phases.other_nights")) + " ", 1), b(l, {
            icon: "cloud-moon"
        })], 8, vS)) : (r(),
        u("div", {
            key: 0,
            class: "button",
            onClick: s[1] || (s[1] = M(c => o.popOut("othernight"), ["stop"])),
            title: e.$t("tabs.night.popout")
        }, [b(l, {
            icon: "window-restore"
        })], 8, fS)), e.positions.othernight ? (r(),
        u(_, {
            key: 2
        }, [a("div", {
            class: y([{
                disabled: i.zoom <= -3
            }, "button zoom"]),
            onClick: s[3] || (s[3] = M(c => o.setZoom(-1), ["stop"]))
        }, [b(l, {
            icon: "magnifying-glass-minus"
        })], 2), a("div", {
            class: y([{
                disabled: i.zoom >= 1
            }, "button zoom"]),
            onClick: s[4] || (s[4] = M(c => o.setZoom(1), ["stop"]))
        }, [b(l, {
            icon: "magnifying-glass-plus"
        })], 2)], 64)) : p("", !0)])]),
        default: S( () => [a("ul", {
            style: L({
                backgroundImage: o.bgImage("othernight.webp")
            })
        }, [(r(!0),
        u(_, null, B(o.rolesOtherNight, ({role: c, players: h=[]}) => {
            var m;
            return r(),
            u("li", {
                key: c.id,
                class: y(["team-" + ((m = c.team) != null ? m : "special"), "role-" + c.id])
            }, [a("span", {
                class: y(["token", {
                    visible: i.tokensOther[c.id] === void 0 ? h.length || e.definitions.NPC_TEAMS.includes(c.team) : i.tokensOther[c.id]
                }]),
                onClick: M(A => i.tokensOther[c.id] = i.tokensOther[c.id] === void 0 ? !(h.length || e.definitions.NPC_TEAMS.includes(c.team)) : !i.tokensOther[c.id], ["stop"])
            }, null, 10, gS), a("span", {
                class: "icon",
                style: L({
                    backgroundImage: c.team ? `url(${e.roleIconURL(c)})` : null
                })
            }, null, 4), a("span", mS, [v(d(e.$te(`roles.${c.id}.name`) ? e.$t(`roles.${c.id}.name`) : c.name), 1), s[14] || (s[14] = a("br", null, null, -1)), (r(!0),
            u(_, null, B(h, (A, f) => (r(),
            u("small", {
                key: f,
                class: y({
                    dead: A.isDead
                }),
                onClick: M(T => o.wake(A), ["stop"])
            }, [e.isNight && !e.storytellers.includes(A) && e.isStoryteller ? (r(),
            C(l, {
                key: 0,
                icon: "eye"
            })) : p("", !0), v(" " + d(e.$t(...e.playerName(A))), 1)], 10, hS))), 128))]), c.otherNightReminder ? (r(),
            u("span", {
                key: 0,
                class: "reminder",
                innerHTML: o.renderReminderHTML(e.$te(`roles.${c.id}.other`) ? e.$t(`roles.${c.id}.other`) : c.otherNightReminder)
            }, null, 8, pS)) : p("", !0)], 2)
        }
        ), 128))], 4), a("img", {
            src: o.sheetLogo,
            alt: "Logo",
            class: "logo"
        }, null, 8, AS)]),
        _: 1
    }, 8, ["is-draggable", "style"])], 16)) : p("", !0), (e.hasGrimoireAccess || e.settings.game.isPlayerNightOrder) && e.edition.id ? (r(),
    u("aside", Hs({
        key: 1
    }, e.$attrs, {
        class: ["night-order first tab", {
            open: e.grimoire.rightSideTabState === "firstnight-open",
            mid: e.grimoire.rightSideTabState === "firstnight-mid",
            positioned: e.positions.firstnight && !e.positions.firstnight.hidden
        }],
        ref: "firstnight"
    }), [a("div", {
        class: "label",
        role: "heading",
        onClick: s[7] || (s[7] = c => o.toggleTab("firstnight", !0))
    }, d(e.$t("grimoire.phases.first_night")), 1), b(g, {
        name: "firstnight",
        onClick: s[12] || (s[12] = c => o.toggleTab("firstnight")),
        onDragged: s[13] || (s[13] = c => o.closeTab("firstnight")),
        "is-draggable": e.grimoire.rightSideTabState === "firstnight-open",
        style: L({
            backgroundImage: o.bgImage("sheet.webp")
        })
    }, {
        footer: S( () => [a("div", SS, [e.positions.firstnight ? (r(),
        u("div", {
            key: 1,
            onClick: s[9] || (s[9] = M(c => o.toggleSheet("firstnight"), ["stop"])),
            class: "button primary",
            title: e.$t("tabs.night.toggle")
        }, [v(d(e.$t("grimoire.phases.first_night")) + " ", 1), b(l, {
            icon: "cloud-moon"
        })], 8, TS)) : (r(),
        u("div", {
            key: 0,
            class: "button",
            onClick: s[8] || (s[8] = M(c => o.popOut("firstnight"), ["stop"])),
            title: e.$t("tabs.night.popout")
        }, [b(l, {
            icon: "window-restore"
        })], 8, PS)), e.positions.firstnight ? (r(),
        u(_, {
            key: 2
        }, [a("div", {
            class: y([{
                disabled: i.zoom <= -3
            }, "button zoom"]),
            onClick: s[10] || (s[10] = M(c => o.setZoom(-1), ["stop"]))
        }, [b(l, {
            icon: "magnifying-glass-minus"
        })], 2), a("div", {
            class: y([{
                disabled: i.zoom >= 1
            }, "button zoom"]),
            onClick: s[11] || (s[11] = M(c => o.setZoom(1), ["stop"]))
        }, [b(l, {
            icon: "magnifying-glass-plus"
        })], 2)], 64)) : p("", !0)])]),
        default: S( () => [a("ul", {
            style: L({
                backgroundImage: o.bgImage("firstnight.webp")
            })
        }, [(r(!0),
        u(_, null, B(o.rolesFirstNight, ({role: c, players: h=[]}) => {
            var m;
            return r(),
            u("li", {
                key: c.id,
                class: y(["team-" + ((m = c.team) != null ? m : "special"), "role-" + c.id])
            }, [a("span", {
                class: y(["token", {
                    visible: i.tokensFirst[c.id] === void 0 ? h.length || e.definitions.NPC_TEAMS.includes(c.team) : i.tokensFirst[c.id]
                }]),
                onClick: M(A => i.tokensFirst[c.id] = i.tokensFirst[c.id] === void 0 ? !(h.length || e.definitions.NPC_TEAMS.includes(c.team)) : !i.tokensFirst[c.id], ["stop"])
            }, null, 10, _S), a("span", {
                class: "icon",
                style: L({
                    backgroundImage: c.team ? `url(${e.roleIconURL(c)})` : null
                })
            }, null, 4), a("span", yS, [v(d(e.$te(`roles.${c.id}.name`) ? e.$t(`roles.${c.id}.name`) : c.name), 1), s[15] || (s[15] = a("br", null, null, -1)), (r(!0),
            u(_, null, B(h, (A, f) => (r(),
            u("small", {
                key: f,
                class: y({
                    dead: A.isDead
                }),
                onClick: M(T => o.wake(A), ["stop"])
            }, [e.isNight && !e.storytellers.includes(A) && e.isStoryteller ? (r(),
            C(l, {
                key: 0,
                icon: "eye"
            })) : p("", !0), v(" " + d(e.$t(...e.playerName(A))), 1)], 10, wS))), 128))]), c.firstNightReminder ? (r(),
            u("span", {
                key: 0,
                class: "reminder",
                innerHTML: o.renderReminderHTML(e.$te(`roles.${c.id}.first`) ? e.$t(`roles.${c.id}.first`) : c.firstNightReminder)
            }, null, 8, kS)) : p("", !0)], 2)
        }
        ), 128))], 4), a("img", {
            src: o.sheetImage(),
            alt: "",
            class: "logo"
        }, null, 8, CS)]),
        _: 1
    }, 8, ["is-draggable", "style"])], 16)) : p("", !0)], 64)
}
const MS = O(Pa, [["render", IS], ["__scopeId", "data-v-0c1e09ad"]])
  , Ta = {
    components: {
        Tab: je,
        FontAwesomeIcon: Y
    },
    inject: ["isApp"],
    computed: {
        ...I(["roles", "edition", "grimoire", "settings", "definitions", "positions"]),
        ...I("players", ["npcs"]),
        ...D(["roleIconURL"]),
        jinxes() {
            const e = [];
            return this.roles.forEach(s => {
                s.jinxes && s.jinxes.length && s.jinxes.forEach( ({id: t, reason: n}) => {
                    this.roles.get(t) && e.push({
                        id: [t, s.id].sort( (i, o) => i.localeCompare(o)).join("-"),
                        first: s,
                        second: this.roles.get(t),
                        reason: n
                    })
                }
                )
            }
            ),
            e
        },
        rolesGrouped() {
            const e = {};
            return this.roles.forEach(s => {
                e[s.team] || (e[s.team] = []),
                e[s.team].push(s)
            }
            ),
            this.definitions.NPC_TEAMS.forEach(s => delete e[s]),
            delete e.traveller,
            e
        },
        sheetLogo() {
            return new URL(Object.assign({
                "/src/assets/editions/bmr/logo-sheet.webp": Re,
                "/src/assets/editions/custom/logo-sheet.webp": De,
                "/src/assets/editions/homebrew/logo-sheet.webp": Ee,
                "/src/assets/editions/snv/logo-sheet.webp": Ne,
                "/src/assets/editions/tb/logo-sheet.webp": Be
            })[`/src/assets/editions/${this.edition.id}/logo-sheet.webp`],import.meta.url).href
        },
        sheetImage() {
            if (this.edition.id)
                return new URL(Object.assign({
                    "/src/assets/editions/bmr/sheet-bottom.webp": Js,
                    "/src/assets/editions/custom/sheet-bottom.webp": $s,
                    "/src/assets/editions/homebrew/sheet-bottom.webp": xs,
                    "/src/assets/editions/snv/sheet-bottom.webp": et,
                    "/src/assets/editions/tb/sheet-bottom.webp": st
                })[`/src/assets/editions/${this.edition.id}/sheet-bottom.webp`],import.meta.url).href
        }
    },
    data() {
        return {
            wikiURL: "https://wiki.bloodontheclocktower.com/",
            hasDPIPSupport: "documentPictureInPicture"in window,
            isPoppedOut: !1,
            pipWindow: null,
            zoom: parseInt(localStorage.getItem("character-zoom")) || 0
        }
    },
    methods: {
        ...j(["setPosition"]),
        async downloadScript() {
            const e = this.$store.getters.editionExport
              , s = JSON.stringify([{
                ...e.edition,
                id: "_meta"
            }, ...e.roles.filter( ({team: g}) => !this.definitions.NPC_TEAMS.includes(g)), ...e.npcs.filter(g => !["bootlegger", "djinn"].includes(g.id))], void 0, 2)
              , t = new Blob([s],{
                type: "application/json"
            }).stream()
              , i = await (await new Response(t.pipeThrough(new CompressionStream("gzip"))).blob()).arrayBuffer()
              , o = window.btoa(String.fromCharCode(...new Uint8Array(i)))
              , l = `https://script.bloodontheclocktower.com/?script=${encodeURIComponent(o)}`;
            try {
                window.open(l, "_blank")
            } catch (g) {
                this.$store.dispatch("showError", ["tabs.character.error_save", g])
            }
        },
        async popOut() {
            if (this.hasDPIPSupport) {
                if (window.documentPictureInPicture.window)
                    return
            } else {
                const {left: s, top: t} = this.$refs.sheet.getBoundingClientRect();
                this.setPosition({
                    name: "character",
                    value: {
                        x: Math.round(s != null ? s : 0) + "px",
                        y: Math.round(t != null ? t : 0) + "px"
                    }
                });
                return
            }
            const e = this.$refs.sheet.querySelector(".container");
            try {
                this.pipWindow = await window.documentPictureInPicture.requestWindow({
                    width: this.$refs.sheet.clientWidth,
                    height: this.$refs.sheet.clientHeight + 200
                }),
                this.closeTab(),
                [...document.styleSheets].forEach(s => {
                    try {
                        const t = [...s.cssRules].map(i => i.cssText).join("")
                          , n = document.createElement("style");
                        n.textContent = t,
                        this.pipWindow.document.head.appendChild(n)
                    } catch {
                        const n = document.createElement("link");
                        n.rel = "stylesheet",
                        n.type = s.type,
                        n.media = s.media,
                        n.href = s.href,
                        this.pipWindow.document.head.appendChild(n)
                    }
                }
                ),
                this.pipWindow.document.body.classList.add("picture-in-picture"),
                this.pipWindow.document.body.append(e),
                this.pipWindow.document.documentElement.lang = document.documentElement.lang,
                this.isPoppedOut = !0,
                this.setZoom(),
                this.pipWindow.addEventListener("pagehide", () => {
                    var s;
                    this.isPoppedOut = !1,
                    (s = this.$refs.sheet) == null || s.append(e),
                    this.pipWindow = null
                }
                )
            } catch (s) {
                this.$store.dispatch("showError", ["tabs.character.error_popout", String(s)])
            }
        },
        setZoom(e) {
            e && (this.zoom = Math.min(Math.max(-3, this.zoom + e), 0),
            this.zoom ? localStorage.setItem("character-zoom", this.zoom) : localStorage.removeItem("character-zoom")),
            this.pipWindow && this.pipWindow.document.body.style.setProperty("--sheet-zoom", this.zoom)
        },
        bgImage(e, s=!0) {
            return s ? "url(" + new URL(Object.assign({
                "/src/assets/editions/bmr/background1.webp": Rn,
                "/src/assets/editions/bmr/background1t.webp": $e,
                "/src/assets/editions/bmr/background2.webp": Dn,
                "/src/assets/editions/bmr/background2t.webp": xe,
                "/src/assets/editions/bmr/background3.webp": En,
                "/src/assets/editions/bmr/background3t.webp": es,
                "/src/assets/editions/bmr/background4.webp": Nn,
                "/src/assets/editions/bmr/background4t.webp": ss,
                "/src/assets/editions/bmr/background5.webp": Bn,
                "/src/assets/editions/bmr/background5t.webp": ts,
                "/src/assets/editions/bmr/background6.webp": Vn,
                "/src/assets/editions/bmr/background6t.webp": is,
                "/src/assets/editions/bmr/firstnight.webp": wl,
                "/src/assets/editions/bmr/leaf-left.webp": kl,
                "/src/assets/editions/bmr/leaf-orange.webp": Cl,
                "/src/assets/editions/bmr/leaf-right.webp": Sl,
                "/src/assets/editions/bmr/leaf-top1.webp": Pl,
                "/src/assets/editions/bmr/leaf-top2.webp": Tl,
                "/src/assets/editions/bmr/leaf-top3.webp": Il,
                "/src/assets/editions/bmr/leaf-top4.webp": Ml,
                "/src/assets/editions/bmr/leaf-top5.webp": Rl,
                "/src/assets/editions/bmr/logo-active.webp": ma,
                "/src/assets/editions/bmr/logo-sheet.webp": Re,
                "/src/assets/editions/bmr/logo.webp": ha,
                "/src/assets/editions/bmr/othernight.webp": Dl,
                "/src/assets/editions/bmr/sheet-bottom.webp": Js,
                "/src/assets/editions/bmr/sheet.webp": El,
                "/src/assets/editions/bmr/skull.webp": Ts,
                "/src/assets/editions/bmr/token.webp": Nl,
                "/src/assets/editions/custom/background1.webp": On,
                "/src/assets/editions/custom/background1t.webp": os,
                "/src/assets/editions/custom/background2.webp": jn,
                "/src/assets/editions/custom/background2t.webp": ns,
                "/src/assets/editions/custom/background3.webp": Un,
                "/src/assets/editions/custom/background3t.webp": as,
                "/src/assets/editions/custom/background4.webp": Hn,
                "/src/assets/editions/custom/background4t.webp": rs,
                "/src/assets/editions/custom/background5.webp": qn,
                "/src/assets/editions/custom/background5t.webp": ls,
                "/src/assets/editions/custom/background6.webp": Ln,
                "/src/assets/editions/custom/background6t.webp": cs,
                "/src/assets/editions/custom/background7.webp": zn,
                "/src/assets/editions/custom/background7t.webp": ds,
                "/src/assets/editions/custom/background8.webp": Gn,
                "/src/assets/editions/custom/background8t.webp": us,
                "/src/assets/editions/custom/firstnight.webp": Bl,
                "/src/assets/editions/custom/leaf-left.webp": Vl,
                "/src/assets/editions/custom/leaf-orange.webp": Ol,
                "/src/assets/editions/custom/leaf-right.webp": jl,
                "/src/assets/editions/custom/leaf-top1.webp": Ul,
                "/src/assets/editions/custom/leaf-top2.webp": Hl,
                "/src/assets/editions/custom/leaf-top3.webp": ql,
                "/src/assets/editions/custom/leaf-top4.webp": Ll,
                "/src/assets/editions/custom/leaf-top5.webp": zl,
                "/src/assets/editions/custom/leaf-top6.webp": Gl,
                "/src/assets/editions/custom/logo-active.webp": pa,
                "/src/assets/editions/custom/logo-label.webp": Aa,
                "/src/assets/editions/custom/logo-sheet.webp": De,
                "/src/assets/editions/custom/logo.webp": ba,
                "/src/assets/editions/custom/othernight.webp": Wl,
                "/src/assets/editions/custom/sheet-bottom.webp": $s,
                "/src/assets/editions/custom/sheet.webp": Fl,
                "/src/assets/editions/custom/skull.webp": Is,
                "/src/assets/editions/custom/token.webp": Ql,
                "/src/assets/editions/homebrew/firstnight.webp": Zl,
                "/src/assets/editions/homebrew/leaf-left.webp": Xl,
                "/src/assets/editions/homebrew/leaf-orange.webp": Kl,
                "/src/assets/editions/homebrew/leaf-right.webp": Yl,
                "/src/assets/editions/homebrew/leaf-top1.webp": Jl,
                "/src/assets/editions/homebrew/leaf-top2.webp": $l,
                "/src/assets/editions/homebrew/leaf-top3.webp": xl,
                "/src/assets/editions/homebrew/leaf-top4.webp": ec,
                "/src/assets/editions/homebrew/leaf-top5.webp": sc,
                "/src/assets/editions/homebrew/leaf-top6.webp": tc,
                "/src/assets/editions/homebrew/logo-label.webp": fa,
                "/src/assets/editions/homebrew/logo-sheet.webp": Ee,
                "/src/assets/editions/homebrew/othernight.webp": ic,
                "/src/assets/editions/homebrew/sheet-bottom.webp": xs,
                "/src/assets/editions/homebrew/sheet.webp": oc,
                "/src/assets/editions/homebrew/skull.webp": Ms,
                "/src/assets/editions/homebrew/token.webp": nc,
                "/src/assets/editions/snv/background1.webp": Wn,
                "/src/assets/editions/snv/background1t.webp": gs,
                "/src/assets/editions/snv/background2.webp": Fn,
                "/src/assets/editions/snv/background2t.webp": ms,
                "/src/assets/editions/snv/background3.webp": Qn,
                "/src/assets/editions/snv/background3t.webp": hs,
                "/src/assets/editions/snv/background4.webp": Zn,
                "/src/assets/editions/snv/background4t.webp": ps,
                "/src/assets/editions/snv/background5.webp": Xn,
                "/src/assets/editions/snv/background5t.webp": As,
                "/src/assets/editions/snv/background6.webp": Kn,
                "/src/assets/editions/snv/background6t.webp": bs,
                "/src/assets/editions/snv/firstnight.webp": ac,
                "/src/assets/editions/snv/leaf-left.webp": rc,
                "/src/assets/editions/snv/leaf-orange.webp": lc,
                "/src/assets/editions/snv/leaf-right.webp": cc,
                "/src/assets/editions/snv/leaf-top1.webp": dc,
                "/src/assets/editions/snv/leaf-top2.webp": uc,
                "/src/assets/editions/snv/leaf-top3.webp": gc,
                "/src/assets/editions/snv/leaf-top4.webp": mc,
                "/src/assets/editions/snv/leaf-top5.webp": hc,
                "/src/assets/editions/snv/leaf-top6.webp": pc,
                "/src/assets/editions/snv/leaf-top7.webp": Ac,
                "/src/assets/editions/snv/logo-active.webp": va,
                "/src/assets/editions/snv/logo-sheet.webp": Ne,
                "/src/assets/editions/snv/logo.webp": _a,
                "/src/assets/editions/snv/othernight.webp": bc,
                "/src/assets/editions/snv/sheet-bottom.webp": et,
                "/src/assets/editions/snv/sheet.webp": fc,
                "/src/assets/editions/snv/skull.webp": Rs,
                "/src/assets/editions/snv/token.webp": vc,
                "/src/assets/editions/taf/leaf-left.webp": _c,
                "/src/assets/editions/taf/leaf-orange.webp": yc,
                "/src/assets/editions/taf/leaf-right.webp": wc,
                "/src/assets/editions/taf/leaf-top1.webp": kc,
                "/src/assets/editions/taf/leaf-top2.webp": Cc,
                "/src/assets/editions/taf/leaf-top3.webp": Sc,
                "/src/assets/editions/taf/leaf-top4.webp": Pc,
                "/src/assets/editions/taf/logo.webp": ya,
                "/src/assets/editions/taf/token.webp": Tc,
                "/src/assets/editions/tb/background1.webp": Yn,
                "/src/assets/editions/tb/background1t.webp": fs,
                "/src/assets/editions/tb/background2.webp": Jn,
                "/src/assets/editions/tb/background2t.webp": vs,
                "/src/assets/editions/tb/background3.webp": $n,
                "/src/assets/editions/tb/background3t.webp": _s,
                "/src/assets/editions/tb/background4.webp": xn,
                "/src/assets/editions/tb/background4t.webp": ys,
                "/src/assets/editions/tb/background5.webp": ea,
                "/src/assets/editions/tb/background5t.webp": ws,
                "/src/assets/editions/tb/background6.webp": sa,
                "/src/assets/editions/tb/background6t.webp": ks,
                "/src/assets/editions/tb/firstnight.webp": Ic,
                "/src/assets/editions/tb/leaf-left.webp": Mc,
                "/src/assets/editions/tb/leaf-orange.webp": Rc,
                "/src/assets/editions/tb/leaf-right.webp": Dc,
                "/src/assets/editions/tb/leaf-top1.webp": Ec,
                "/src/assets/editions/tb/leaf-top2.webp": Nc,
                "/src/assets/editions/tb/leaf-top3.webp": Bc,
                "/src/assets/editions/tb/leaf-top4.webp": Vc,
                "/src/assets/editions/tb/leaf-top5.webp": Oc,
                "/src/assets/editions/tb/logo-active.webp": wa,
                "/src/assets/editions/tb/logo-sheet.webp": Be,
                "/src/assets/editions/tb/logo.webp": ka,
                "/src/assets/editions/tb/othernight.webp": jc,
                "/src/assets/editions/tb/sheet-bottom.webp": st,
                "/src/assets/editions/tb/sheet.webp": Uc,
                "/src/assets/editions/tb/skull.webp": Ds,
                "/src/assets/editions/tb/token.webp": Hc
            })[`/src/assets/editions/${this.edition.id}/${e}`],import.meta.url).href + ")" : "url(" + new URL(Object.assign({
                "/src/assets/app-icon.webp": qc,
                "/src/assets/background.webp": ta,
                "/src/assets/background1.webp": ia,
                "/src/assets/background1t.webp": Cs,
                "/src/assets/background2.webp": oa,
                "/src/assets/background2t.webp": Ss,
                "/src/assets/background3.webp": na,
                "/src/assets/background3t.webp": Ps,
                "/src/assets/bigwig.webp": Lc,
                "/src/assets/butterfly.webp": zc,
                "/src/assets/card-blue.webp": Gc,
                "/src/assets/card-brown.webp": Wc,
                "/src/assets/card-green.webp": Fc,
                "/src/assets/card-orange.webp": Qc,
                "/src/assets/card-purple.webp": Zc,
                "/src/assets/card-red.webp": Xc,
                "/src/assets/clock-hour.webp": Kc,
                "/src/assets/clock-minute.webp": Yc,
                "/src/assets/clock-second.webp": Jc,
                "/src/assets/clock_back.webp": $c,
                "/src/assets/clock_circle.webp": xc,
                "/src/assets/clock_cog1.webp": ed,
                "/src/assets/clock_cog2.webp": sd,
                "/src/assets/clock_cogcap.webp": td,
                "/src/assets/clouds.webp": id,
                "/src/assets/death.webp": od,
                "/src/assets/demon.webp": nd,
                "/src/assets/gavel.webp": ad,
                "/src/assets/gossip.webp": rd,
                "/src/assets/gstone.webp": ld,
                "/src/assets/life.webp": cd,
                "/src/assets/line.webp": dd,
                "/src/assets/loading.webp": ud,
                "/src/assets/logo.webp": gd,
                "/src/assets/night.webp": md,
                "/src/assets/progress.svg": hd,
                "/src/assets/puck.webp": pd,
                "/src/assets/reminder.webp": Ad,
                "/src/assets/sb.webp": bd,
                "/src/assets/shroud.webp": fd,
                "/src/assets/towninfo.webp": vd,
                "/src/assets/tpi.webp": _d,
                "/src/assets/traveller.webp": yd,
                "/src/assets/vote.webp": wd
            })[`/src/assets/${e}`],import.meta.url).href + ")"
        },
        toggleTab(e) {
            var t;
            if (this.positions.character && (e != null && e.target.closest(".container.positioned")) || (t = e == null ? void 0 : e.target.closest("body")) != null && t.classList.contains("picture-in-picture") || (e == null ? void 0 : e.target.tagName) === "A" && (e != null && e.target.hasAttribute("target")))
                return;
            this.isPoppedOut && window.documentPictureInPicture.window.close();
            let s = this.grimoire.rightSideTabState;
            if (s === "character-open" ? s = "" : s === "character-mid" ? s = "character-open" : s = "character-mid",
            this.positions.character)
                if (this.settings.general.isPositioningDisabled) {
                    const n = this.positions.character;
                    n.hidden = !n.hidden,
                    this.setPosition({
                        name: "character",
                        value: n
                    })
                } else
                    this.setPosition({
                        name: "character"
                    }),
                    s === "character-open" && (s = "");
            this.$store.commit("setRightSideTabState", s)
        },
        closeTab() {
            this.grimoire.rightSideTabState === "character-open" && this.$store.commit("setRightSideTabState", "")
        },
        async scrollTo(e, s) {
            const t = this.jinxes.findIndex(n => n.first.id === e && n.second.id === s);
            t < 0 || (this.grimoire.rightSideTabState !== "character-open" && !this.isPoppedOut && (this.$store.commit("setRightSideTabState", "character-open"),
            await new Promise(n => setTimeout(n, 350))),
            this.$refs.jinxes[t].scrollIntoView({
                behavior: "smooth"
            }))
        }
    },
    beforeUnmount() {
        this.isPoppedOut && (window.documentPictureInPicture.window.close(),
        this.pipWindow = null)
    }
}
  , Kr = () => {
    be(e => ({
        v387d31f4: e.zoom
    }))
}
  , Yr = Ta.setup;
Ta.setup = Yr ? (e, s) => (Kr(),
Yr(e, s)) : Kr;
const RS = ["src"]
  , DS = ["href"]
  , ES = {
    key: 1,
    class: "team bootlegger"
}
  , NS = {
    class: "bootlegger"
}
  , BS = ["href"]
  , VS = {
    class: "role"
}
  , OS = ["title"]
  , jS = {
    key: 0,
    class: "alt-name"
}
  , US = {
    key: 1,
    class: "jinxes"
}
  , HS = ["onClick"]
  , qS = {
    class: "ability"
}
  , LS = {
    key: 2,
    class: "team jinxes"
}
  , zS = {
    class: "role"
}
  , GS = {
    class: "name"
}
  , WS = {
    class: "ability"
}
  , FS = {
    class: "hint"
}
  , QS = ["src"]
  , ZS = {
    class: "button-group"
}
  , XS = ["title"]
  , KS = ["aria-label", "title"];
function YS(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("Tab");
    return e.edition.id ? (r(),
    u("aside", {
        key: 0,
        class: y(["character tab", {
            [e.grimoire.rightSideTabState]: !e.positions.character,
            positioned: e.positions.character,
            popout: i.pipWindow
        }]),
        ref: "sheet",
        onTouchstartPassive: s[5] || (s[5] = M( () => {}
        , ["stop"])),
        onTouchendPassive: s[6] || (s[6] = M( () => {}
        , ["stop"]))
    }, [a("div", {
        class: "label",
        onClick: s[0] || (s[0] = (...c) => o.toggleTab && o.toggleTab(...c)),
        role: "tab"
    }, d(e.$t("tabs.characters.title")), 1), b(g, {
        name: "character",
        onClick: o.toggleTab,
        onDragged: o.closeTab,
        "is-draggable": e.grimoire.rightSideTabState === "character-open",
        style: L({
            backgroundImage: o.bgImage("sheet.webp")
        })
    }, {
        footer: S( () => [a("div", ZS, [!i.isPoppedOut && !e.positions.character ? (r(),
        u("div", {
            key: 0,
            class: "button popout",
            onClick: s[1] || (s[1] = M( (...c) => o.popOut && o.popOut(...c), ["stop"])),
            title: e.$t("tabs.character.popout")
        }, [b(l, {
            icon: "window-restore"
        })], 8, XS)) : p("", !0), i.isPoppedOut || e.positions.character ? (r(),
        u(_, {
            key: 1
        }, [a("div", {
            class: y([{
                disabled: i.zoom <= -3
            }, "button"]),
            onClick: s[2] || (s[2] = M(c => o.setZoom(-1), ["stop"]))
        }, [b(l, {
            icon: "magnifying-glass-minus"
        })], 2), a("div", {
            class: y([{
                disabled: i.zoom >= 0
            }, "button"]),
            onClick: s[3] || (s[3] = M(c => o.setZoom(1), ["stop"]))
        }, [b(l, {
            icon: "magnifying-glass-plus"
        })], 2)], 64)) : p("", !0), e.edition.isOfficial ? p("", !0) : (r(),
        u("div", {
            key: 2,
            onClick: s[4] || (s[4] = M( (...c) => o.downloadScript && o.downloadScript(...c), ["stop"])),
            class: "button",
            role: "link",
            "aria-label": e.$t("tabs.character.download"),
            title: e.$t("tabs.character.download")
        }, [b(l, {
            icon: "download"
        })], 8, KS))])]),
        default: S( () => {
            var c;
            return [a("img", {
                src: o.sheetLogo,
                alt: "",
                class: "logo"
            }, null, 8, RS), !e.edition.isOfficial && e.edition.name ? (r(),
            u("a", {
                key: 0,
                class: y(["title", {
                    active: e.edition.almanac
                }]),
                href: e.edition.almanac,
                target: "_blank",
                tabindex: "-1"
            }, [v(d(e.edition.name) + " " + d(e.edition.author ? e.$t("overlays.towninfo.script_by", [e.edition.author]) : "") + " ", 1), e.edition.almanac ? (r(),
            C(l, {
                key: 0,
                icon: "book"
            })) : p("", !0)], 10, DS)) : p("", !0), (c = e.edition.bootlegger) != null && c.length ? (r(),
            u("div", ES, [s[7] || (s[7] = a("aside", null, null, -1)), a("ul", NS, [(r(!0),
            u(_, null, B(e.edition.bootlegger, (h, m) => (r(),
            u("li", {
                key: m
            }, [a("span", {
                class: "icon",
                style: L({
                    backgroundImage: `url(${e.roleIconURL("bootlegger")})`
                })
            }, null, 4), v(" " + d(h), 1)]))), 128))])])) : p("", !0), (r(!0),
            u(_, null, B(o.rolesGrouped, (h, m) => (r(),
            u("div", {
                key: m,
                class: y(["team", m])
            }, [a("aside", null, d(e.$t(`grimoire.${m}`, 2)), 1), a("ul", null, [(r(!0),
            u(_, null, B(h, A => (r(),
            u("li", {
                class: y(["team-" + m, "role-" + A.id]),
                key: A.id
            }, [A.id ? (r(),
            u("span", {
                key: 0,
                class: "icon",
                style: L({
                    backgroundImage: `url(${e.roleIconURL(A)})`
                })
            }, null, 4)) : p("", !0), A.isCustom ? p("", !0) : (r(),
            u("a", {
                key: 1,
                class: "almanac",
                href: i.wikiURL + encodeURIComponent(A.name),
                target: "_blank",
                tabindex: "-1"
            }, [b(l, {
                icon: "book"
            })], 8, BS)), a("div", VS, [a("div", {
                class: "name",
                title: e.$te(`roles.${A.id}.name`) ? e.$t(`roles.${A.id}.name`) : A.name
            }, [v(d(e.$te(`roles.${A.id}.name`) ? e.$t(`roles.${A.id}.name`) : A.name) + " ", 1), e.settings.game.isEnglishNames && e.$te(`roles.${A.id}.name`) && e.$t(`roles.${A.id}.name`) !== A.name ? (r(),
            u("span", jS, " (" + d(A.name) + ") ", 1)) : p("", !0), A.jinxes && A.jinxes.filter( ({id: f}) => e.roles.has(f)).length ? (r(),
            u("div", US, [(r(!0),
            u(_, null, B(A.jinxes.filter( ({id: f}) => e.roles.has(f)), (f, T) => (r(),
            u("small", {
                onClick: M(w => o.scrollTo(A.id, f.id), ["stop"]),
                key: T,
                class: "icon",
                style: L({
                    backgroundImage: `url(${e.roleIconURL(f.id)})`
                })
            }, null, 12, HS))), 128))])) : p("", !0)], 8, OS), a("span", qS, d(e.$te(`roles.${A.id}.ability`) ? e.$t(`roles.${A.id}.ability`) : A.ability), 1)])], 2))), 128))])], 2))), 128)), o.jinxes.length ? (r(),
            u("div", LS, [a("aside", null, d(e.$t("tabs.character.jinxes")), 1), a("ul", null, [(r(!0),
            u(_, null, B(o.jinxes, (h, m) => (r(),
            u("li", {
                class: "jinx",
                key: m,
                ref_for: !0,
                ref: "jinxes"
            }, [a("span", {
                class: "icon",
                style: L({
                    backgroundImage: `url(${e.roleIconURL(h.first)})`
                })
            }, null, 4), a("span", {
                class: "icon",
                style: L({
                    backgroundImage: `url(${e.roleIconURL(h.second)})`
                })
            }, null, 4), a("div", zS, [a("div", GS, [a("span", {
                class: y(h.first.team)
            }, d(e.$te(`roles.${h.first.id}.name`) ? e.$t(`roles.${h.first.id}.name`) : h.first.name), 3), s[8] || (s[8] = v(" & ", -1)), a("span", {
                class: y(h.second.team)
            }, d(e.$te(`roles.${h.second.id}.name`) ? e.$t(`roles.${h.second.id}.name`) : h.second.name), 3)]), a("span", WS, d(e.$te(`jinxes.${h.id}`) ? e.$t(`jinxes.${h.id}`) : h.reason), 1)])]))), 128))])])) : p("", !0), a("div", FS, [a("img", {
                src: o.sheetImage,
                alt: ""
            }, null, 8, QS), a("span", null, "*" + d(e.$t("tabs.character.other_nights")), 1)])]
        }
        ),
        _: 1
    }, 8, ["onClick", "onDragged", "is-draggable", "style"])], 34)) : p("", !0)
}
const JS = O(Ta, [["render", YS], ["__scopeId", "data-v-3c7c5d00"]])
  , $S = {
    name: "TextTab",
    components: {
        Tab: je,
        FontAwesomeIcon: Y
    },
    computed: {
        ...I(["roles"]),
        ...I("players", ["players", "storytellers"]),
        ...I("user", ["user"]),
        ...I("chat", ["textRecipient", "textMessages", "channel", "userChannels"]),
        ...I(["session", "grimoire", "positions", "settings"]),
        ...D("user", ["isStoryteller", "isSpectator", "hasGrimoireAccess", "isModerator"]),
        ...D("players", ["seatedPlayerMap", "storytellerMap"]),
        promptIcon() {
            return this.textRecipient === "spectator" ? "eye" : this.textRecipient === "system" ? "bullhorn" : this.textRecipient && !this.seatedPlayerMap.has(this.textRecipient) ? "eye" : this.textRecipient ? "envelope" : this.seatedPlayerMap.has(this.user.id) ? "users" : "eye"
        },
        promptDisabled() {
            return this.textRecipient === "private" || this.textRecipient === "system" || this.textRecipient === "" && this.isSpectator && !this.isModerator
        },
        promptPlaceholder() {
            var e;
            return this.textRecipient === "spectator" ? this.$t("tabs.text.prompt_spectator") : this.textRecipient === "private" ? this.$t("tabs.text.prompt_private") : this.textRecipient === "system" ? this.$t("tabs.text.prompt_system") : this.textRecipient ? this.$t("tabs.text.prompt_user", [((e = this.session.users.get(this.textRecipient)) == null ? void 0 : e.username) || this.textRecipient]) : this.textRecipient && !this.seatedPlayerMap.has(this.textRecipient) ? this.$t("tabs.text.prompt_spectator") : this.$t("tabs.text.prompt_public")
        },
        messages() {
            return this.textMessages.filter( ({senderId: e, recipientId: s, isSystem: t}) => this.textRecipient === "system" ? t : s === this.textRecipient && ["spectator", ""].includes(this.textRecipient) && !t || this.textRecipient === "private" && e !== this.user.id && ![this.user.id, "spectator", ""].includes(s) && !t || e === this.user.id && s === this.textRecipient && !t ? !0 : s === this.user.id && e === this.textRecipient).map(e => {
                var s, t, n, i, o, l, g, c, h, m;
                return {
                    recipient: ((s = this.session.users.get(e.recipientId)) == null ? void 0 : s.username) || e.recipientId,
                    sender: ((t = this.session.users.get(e.senderId)) == null ? void 0 : t.username) || e.senderId,
                    senderBorder: "border-" + ((i = (n = this.session.users.get(e.senderId)) == null ? void 0 : n.cosmetics) == null ? void 0 : i.border),
                    senderTeam: "team-" + ((l = (o = this.seatedPlayerMap.get(e.senderId)) == null ? void 0 : o.role) == null ? void 0 : l.team),
                    senderAlignment: "align-" + ((g = this.seatedPlayerMap.get(e.senderId)) == null ? void 0 : g.alignment),
                    recipientTeam: "team-" + ((h = (c = this.seatedPlayerMap.get(e.recipientId)) == null ? void 0 : c.role) == null ? void 0 : h.team),
                    recipientAlignment: "align-" + ((m = this.seatedPlayerMap.get(e.recipientId)) == null ? void 0 : m.alignment),
                    recipientId: e.recipientId,
                    senderId: e.senderId,
                    msgId: e.msgId,
                    message: e.message,
                    time: e.time,
                    isSystem: e.isSystem,
                    isHidden: e.isHidden
                }
            }
            )
        },
        defaultRecipients() {
            var i, o;
            const e = this.session.users
              , s = this.players.length
              , t = [];
            t.push(...this.storytellers.filter(l => {
                var g;
                return l.id !== this.user.id && ((g = e.get(l.id)) == null ? void 0 : g.isOnline)
            }
            ).map(l => l.id));
            const n = this.players.findIndex(l => l.id === this.user.id);
            if (n > -1) {
                const l = this.players[(s + n - 1) % s].id;
                (i = e.get(l)) != null && i.isOnline && t.push(l);
                const g = this.players[(s + n + 1) % s].id;
                (o = e.get(g)) != null && o.isOnline && t.push(g)
            }
            return t.push(""),
            (this.isStoryteller || this.isSpectator) && t.push("spectator"),
            this.hasGrimoireAccess && t.push("private"),
            t.push("system"),
            t
        },
        recipients() {
            const e = [...this.defaultRecipients];
            this.pinnedTabs.forEach(t => {
                var n;
                (n = this.session.users.get(t)) != null && n.isOnline && e.unshift(t)
            }
            ),
            this.seatedPlayerMap.has(this.user.id) && (this.textMessages.forEach( ({recipientId: t, senderId: n, time: i}) => {
                var o;
                e.includes(t) || n !== this.user.id && t === this.user.id && !e.includes(n) && i >= ((o = this.lastRead[n]) != null ? o : 0) && e.unshift(n)
            }
            ),
            e.includes(this.textRecipient) || e.unshift(this.textRecipient));
            const s = new Map;
            return e.forEach(t => {
                s.set(t, this.textMessages.filter(n => n.time >= (this.lastRead[t] || 0) && (n.recipientId === t && n.senderId === this.user.id && !n.isSystem || n.recipientId === this.user.id && n.senderId === t && !n.isSystem || t === "private" && n.recipientId !== this.user.id && n.senderId !== this.user.id && !["spectator", ""].includes(n.recipientId) || t === "system" && n.isSystem || n.recipientId === t && ["spectator", ""].includes(t) && !n.isSystem)).length || 0)
            }
            ),
            s
        },
        isMessageDisabled() {
            var e;
            if (!this.message)
                return !0;
            if (this.textRecipient === "spectator")
                return !this.isSpectator && !this.isStoryteller;
            if (this.textRecipient) {
                if (!this.seatedPlayerMap.has(this.textRecipient) && !this.isStoryteller || !((e = this.session.users.get(this.textRecipient)) != null && e.isOnline))
                    return !0;
                if (this.isStoryteller || this.storytellerMap.has(this.textRecipient))
                    return !1;
                if (this.session.isWhispersDisabled || !this.seatedPlayerMap.has(this.user.id) || !this.$store.getters["game/isNight"] && !this.defaultRecipients.includes(this.textRecipient) || this.$store.getters["game/isNight"] && !this.defaultRecipients.includes(this.textRecipient) && ![...this.roles].some( ([,s]) => {
                    var t;
                    return (t = s.special) == null ? void 0 : t.some(n => n.type === "player" && n.name === "open-eyes")
                }
                ) || (this.userChannels.get(this.textRecipient) || this.channel) && !this.$store.getters["game/isNight"])
                    return !0
            } else if (this.channel && !this.$store.getters["game/isNight"] && !this.isStoryteller || this.isSpectator && !this.isModerator)
                return !0;
            return !1
        },
        unreadWhispers() {
            if (this.grimoire.tabs.text || this.positions.text)
                return 0;
            const e = this.textMessages.filter( ({time: s, recipientId: t, senderId: n}) => t === this.user.id && s >= (this.lastRead[n] || 0) && (this.storytellerMap.has(n) || this.isStoryteller || Math.abs(this.players.findIndex( ({id: i}) => i === n) - this.players.findIndex( ({id: i}) => i === this.user.id)) % (this.players.length - 2) === 1)).length;
            return e > 9 ? "â" : e
        },
        unreadMessages() {
            if (this.grimoire.tabs.text || this.positions.text)
                return 0;
            const e = this.textMessages.filter( ({time: s, recipientId: t, senderId: n, isSystem: i}) => s >= this.lastRead[""] && !i && !t && n !== this.user.id || (this.isSpectator || this.isStoryteller) && s >= this.lastRead.spectator && t === "spectator" && n !== this.user.id || this.hasGrimoireAccess && s > this.lastRead.private && !["spectator", ""].includes(t) && t !== this.user.id && n !== this.user.id).length;
            return e > 9 ? "â" : e
        }
    },
    data() {
        return {
            isScrolled: !1,
            lastRead: {
                "": 0,
                private: 0,
                spectator: 0,
                previousTab: this.$store.state.chat.textRecipient
            },
            message: "",
            pinnedTabs: new Set
        }
    },
    methods: {
        ...j(["setTab", "setPosition"]),
        ...j("chat", ["setTextRecipient"]),
        toggleRecipient(e=1) {
            const s = [...this.recipients.keys()].filter(n => !["private", "system"].includes(n) && (!this.isSpectator || n !== ""))
              , t = s.length;
            t > 1 && s.indexOf(this.textRecipient) >= 0 ? this.setTextRecipient(s[(t + s.indexOf(this.textRecipient) + e) % t]) : this.setTextRecipient("")
        },
        pinTab() {
            this.pinnedTabs.has(this.textRecipient) ? this.pinnedTabs.delete(this.textRecipient) : this.pinnedTabs.add(this.textRecipient)
        },
        setRecipient(e) {
            e !== this.user.id && e !== -1 && (this.isSpectator && !this.storytellerMap.has(e) || !this.isStoryteller && !this.seatedPlayerMap.has(e) || !this.isStoryteller && this.seatedPlayerMap.has(e) && Math.abs(this.players.findIndex( ({id: s}) => s === e) - this.players.findIndex( ({id: s}) => s === this.user.id)) % (this.players.length - 2) !== 1 || this.setTextRecipient(e))
        },
        keydown(e) {
            var t;
            switch ((t = e.key) == null ? void 0 : t.toLocaleLowerCase()) {
            case "arrowup":
                this.toggleRecipient(1);
                break;
            case "arrowdown":
                this.toggleRecipient(-1);
                break;
            case "escape":
                this.setTab({
                    tab: "text",
                    value: !1
                });
                break
            }
        },
        sendMessage() {
            !this.message || this.isMessageDisabled || (this.$store.dispatch("chat/textMessage", {
                recipientId: this.textRecipient,
                message: this.message
            }),
            this.message = "",
            this.$refs.chat.scrollTop = this.$refs.chat.scrollHeight)
        },
        toggleText() {
            if (this.grimoire.tabs.text && (this.lastRead[this.textRecipient] = Date.now()),
            this.positions.text) {
                if (this.settings.general.isPositioningDisabled)
                    return;
                this.setPosition({
                    name: "text"
                }),
                this.setTab({
                    tab: "text",
                    value: !0
                })
            } else
                this.setTab({
                    tab: "text",
                    value: !this.grimoire.tabs.text
                });
            this.$refs.chat.scrollTop = this.$refs.chat.scrollHeight,
            this.isScrolled = !1
        },
        observeScroll() {
            this.$refs.chat ? this.isScrolled = this.$refs.chat.scrollTop + this.$refs.chat.clientHeight < this.$refs.chat.scrollHeight - 10 : this.isScrolled = !1
        }
    },
    watch: {
        messages() {
            this.observeScroll(),
            this.$nextTick( () => {
                const e = this.textMessages[this.textMessages.length - 1];
                this.messages.length && this.$refs.chat && !this.isScrolled && (this.textRecipient === e.recipientId || e.senderId === this.user.id || e.senderId === this.textRecipient && e.recipientId === this.user.id || this.textRecipient === "system" && e.isSystem || this.textRecipient === "private" && e.recipientId !== this.user.id && e.senderId !== this.user.id && !["spectator", ""].includes(e.recipientId)) && (this.$refs.chat.scrollTop = this.$refs.chat.scrollHeight)
            }
            )
        },
        textRecipient() {
            (this.grimoire.tabs.text || this.positions.text) && (this.lastRead[this.lastRead.previousTab] = Date.now(),
            this.lastRead.previousTab = this.textRecipient,
            document.activeElement !== this.$refs.message && this.$nextTick( () => {
                var e;
                return (e = this.$refs.message) == null ? void 0 : e.focus()
            }
            ),
            this.$nextTick( () => {
                this.$refs.chat && (this.$refs.chat.scrollTop = this.$refs.chat.scrollHeight,
                this.isScrolled = !1)
            }
            ))
        },
        "grimoire.tabs.text"() {
            this.grimoire.tabs.text ? this.$nextTick( () => {
                var e;
                return (e = this.$refs.message) == null ? void 0 : e.focus()
            }
            ) : document.getElementById("app").focus()
        }
    }
}
  , xS = {
    key: 0
}
  , eP = {
    key: 1,
    class: "secondary"
}
  , sP = {
    class: "tabs",
    role: "list"
}
  , tP = ["onClick", "aria-live", "aria-label"]
  , iP = {
    class: "name"
}
  , oP = ["onClick", "title"]
  , nP = {
    class: "to"
}
  , aP = ["onClick", "title"]
  , rP = {
    key: 0,
    class: "message"
}
  , lP = {
    key: 0,
    class: "hidden"
}
  , cP = {
    key: 1,
    class: "message"
}
  , dP = {
    key: 2,
    class: "message"
}
  , uP = {
    key: 3,
    class: "message"
}
  , gP = {
    key: 4,
    class: "message"
}
  , mP = {
    key: 5,
    class: "message"
}
  , hP = {
    key: 6,
    class: "message"
}
  , pP = ["placeholder", "disabled"]
  , AP = ["disabled"];
function bP(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("Tab");
    return r(),
    C(q, {
        name: "slide"
    }, {
        default: S( () => [e.session.sessionId ? (r(),
        u("aside", {
            key: 0,
            class: y(["tab", {
                open: e.grimoire.tabs.text && !e.positions.text
            }])
        }, [!e.positions.text || !e.settings.general.isPositioningDisabled ? (r(),
        u("div", {
            key: 0,
            class: "label",
            role: "heading",
            onClick: s[0] || (s[0] = (...c) => o.toggleText && o.toggleText(...c))
        }, [v(d(e.$t("tabs.text.title")) + " ", 1), o.unreadWhispers ? (r(),
        u("em", xS, d(o.unreadWhispers), 1)) : p("", !0), o.unreadMessages ? (r(),
        u("em", eP, d(o.unreadMessages), 1)) : p("", !0)])) : p("", !0), b(g, {
            name: "text",
            "is-draggable": !e.settings.general.isPositioningDisabled && (e.grimoire.tabs.text || !!e.positions.text),
            onDragged: s[9] || (s[9] = c => e.setTab({
                tab: "text"
            }))
        }, {
            default: S( () => [a("ul", sP, [(r(!0),
            u(_, null, B([...o.recipients.keys()], c => {
                var h, m;
                return r(),
                u("li", {
                    key: c,
                    class: y({
                        active: e.textRecipient === c
                    }),
                    onClick: A => e.setTextRecipient(c),
                    "aria-live": o.recipients.get(c) ? "assertive" : "",
                    "aria-label": e.$t("tabs.text.tooltip", [o.recipients.get(c), ((h = e.session.users.get(c)) == null ? void 0 : h.username) || e.$t(`tabs.text.channels.${c || "public"}`) || c])
                }, [c === "spectator" ? (r(),
                C(l, {
                    key: 0,
                    icon: "eye"
                })) : c === "system" ? (r(),
                C(l, {
                    key: 1,
                    icon: "bullhorn"
                })) : c === "" ? (r(),
                C(l, {
                    key: 2,
                    icon: "users"
                })) : e.storytellerMap.has(c) ? (r(),
                C(l, {
                    key: 3,
                    icon: "crown"
                })) : e.seatedPlayerMap.has(c) || c === "private" ? (r(),
                C(l, {
                    key: 4,
                    icon: "envelope"
                })) : (r(),
                C(l, {
                    key: 5,
                    icon: "eye"
                })), a("span", {
                    class: y({
                        system: ["", "private", "spectator", "system"].includes(c)
                    })
                }, d(((m = e.session.users.get(c)) == null ? void 0 : m.username) || e.$t(`tabs.text.channels.${c || "public"}`, c)), 3), a("em", null, d(o.recipients.get(c) || ""), 1)], 10, tP)
            }
            ), 128))]), s[10] || (s[10] = a("div", {
                class: "spacer"
            }, null, -1)), a("div", {
                ref: "chat",
                class: y(["messages", {
                    scrolled: i.isScrolled
                }]),
                onScroll: s[2] || (s[2] = (...c) => o.observeScroll && o.observeScroll(...c))
            }, [(r(!0),
            u(_, null, B(o.messages, c => {
                var h, m, A;
                return r(),
                u("div", {
                    draggable: "false",
                    onDragstart: s[1] || (s[1] = M( () => {}
                    , ["prevent"])),
                    key: c.msgId,
                    class: y({
                        read: c.time < i.lastRead[e.textRecipient],
                        whisper: c.recipientId && c.recipientId !== "spectator",
                        incoming: c.recipientId === e.user.id,
                        outgoing: c.senderId === e.user.id,
                        spectator: c.senderId && (!e.seatedPlayerMap.has(c.senderId) || c.recipientId === "spectator")
                    })
                }, [a("span", iP, [c.isSystem ? (r(),
                C(l, {
                    key: 0,
                    icon: "bullhorn"
                })) : p("", !0), e.storytellerMap.has(c.senderId) ? (r(),
                C(l, {
                    key: 1,
                    icon: "crown"
                })) : p("", !0), !e.seatedPlayerMap.has(c.senderId) && c.senderId ? (r(),
                C(l, {
                    key: 2,
                    icon: "eye"
                })) : p("", !0), c.senderId ? (r(),
                u("b", {
                    key: 3,
                    class: y([c.senderTeam, c.senderAlignment, c.senderBorder, {
                        self: c.senderId === e.user.id
                    }]),
                    onClick: f => o.setRecipient(c.senderId),
                    title: c.sender
                }, d(c.sender), 11, oP)) : p("", !0), e.textRecipient === "private" ? (r(),
                u(_, {
                    key: 4
                }, [a("span", nP, d(e.$t("tabs.text.message_to")), 1), e.storytellerMap.has(c.recipientId) ? (r(),
                C(l, {
                    key: 0,
                    icon: "crown"
                })) : p("", !0), a("b", {
                    class: y([c.recipientTeam, c.recipientAlignment]),
                    onClick: f => o.setRecipient(c.recipientId),
                    title: c.recipient
                }, d(c.recipient), 11, aP)], 64)) : p("", !0), c.senderId ? (r(),
                u(_, {
                    key: 5
                }, [v(":")], 64)) : p("", !0)]), c.isSystem ? ["start"].includes(c.message.type) ? (r(),
                u("span", cP, d(e.$t(`tabs.text.system.${c.message.type}`)), 1)) : ["seat_claim", "seat_empty", "seat_vacate"].includes(c.message.type) ? (r(),
                u("span", dP, d(e.$t(`tabs.text.system.${c.message.type}`, [((h = e.session.users.get(c.message.data[0])) == null ? void 0 : h.username) || c.message.data[0], c.message.data[1]])), 1)) : c.message.type === "signal" ? (r(),
                u("span", uP, d(e.$t("tabs.text.system.signal", [((m = e.session.users.get(c.message.data[0])) == null ? void 0 : m.username) || c.message.data[0], c.message.data[1] === "storyteller" ? e.$t("grimoire.storytellers") : c.message.data[1]])), 1)) : c.message.type === "phase" ? (r(),
                u("span", gP, d(e.$t("tabs.text.system.phase", [e.$t(`grimoire.phases.${c.message.data % 2 ? "night" : "day"}`, Math.ceil(c.message.data / 2))])), 1)) : c.message.type === "end" ? (r(),
                u("span", mP, d(e.$t(`tabs.text.system.end_${c.message.data.isEvilWin ? "evil" : "good"}`)), 1)) : (r(),
                u("span", hP, d(e.$t(`tabs.text.system.${c.message.type}`, c.message.data < 21 ? [e.$t("grimoire.seat", [c.message.data])] : [((A = e.session.users.get(c.message.data)) == null ? void 0 : A.username) || c.message.data])), 1)) : (r(),
                u("span", rP, [v(d(c.message) + " ", 1), c.isHidden ? (r(),
                u("em", lP, " (" + d(e.$t("tabs.text.message_blocked")) + ") ", 1)) : p("", !0)]))], 34)
            }
            ), 128))], 34), a("form", {
                class: "prompt",
                onClick: s[7] || (s[7] = M( () => {}
                , ["stop"])),
                onSubmit: s[8] || (s[8] = M( (...c) => o.sendMessage && o.sendMessage(...c), ["prevent"]))
            }, [a("span", {
                class: "recipient",
                onClick: s[3] || (s[3] = c => o.toggleRecipient())
            }, [b(l, {
                icon: o.promptIcon
            }, null, 8, ["icon"])]), z(a("input", {
                type: "text",
                name: "message",
                ref: "message",
                "onUpdate:modelValue": s[4] || (s[4] = c => i.message = c),
                placeholder: o.promptPlaceholder,
                maxlength: "250",
                autocomplete: "off",
                onKeydown: s[5] || (s[5] = M( (...c) => o.keydown && o.keydown(...c), ["stop"])),
                disabled: o.promptDisabled
            }, null, 40, pP), [[W, i.message]]), a("button", {
                class: y(["button", {
                    primary: !o.isMessageDisabled
                }]),
                type: "submit",
                disabled: o.isMessageDisabled
            }, [b(l, {
                icon: "paper-plane"
            })], 10, AP), !o.defaultRecipients.includes(e.textRecipient) || i.pinnedTabs.has(e.textRecipient) ? (r(),
            u("button", {
                key: 0,
                class: y(["button", {
                    secondary: i.pinnedTabs.has(e.textRecipient)
                }]),
                type: "button",
                title: "Pin this chat to stay open",
                onClick: s[6] || (s[6] = c => o.pinTab())
            }, [b(l, {
                icon: "thumbtack"
            })], 2)) : p("", !0)], 32)]),
            _: 1
        }, 8, ["is-draggable"])], 2)) : p("", !0)]),
        _: 1
    })
}
const fP = O($S, [["render", bP], ["__scopeId", "data-v-a0db28ad"]])
  , vP = {
    name: "SessionMeta",
    components: {
        FontAwesomeIcon: Y
    },
    computed: {
        ...I("user", ["user", "levels"]),
        ...I(["session", "chat", "edition"]),
        ...D("user", ["isStoryteller"]),
        ...D("chat", ["chatServerPreference"]),
        languageIcon() {
            return new URL(Object.assign({
                "/node_modules/language-icons/icons/aa.svg": Pn,
                "/node_modules/language-icons/icons/ab.svg": Sn,
                "/node_modules/language-icons/icons/ae.svg": Cn,
                "/node_modules/language-icons/icons/af.svg": kn,
                "/node_modules/language-icons/icons/ak.svg": wn,
                "/node_modules/language-icons/icons/am.svg": yn,
                "/node_modules/language-icons/icons/an.svg": _n,
                "/node_modules/language-icons/icons/ar.svg": vn,
                "/node_modules/language-icons/icons/as.svg": fn,
                "/node_modules/language-icons/icons/av.svg": bn,
                "/node_modules/language-icons/icons/ay.svg": An,
                "/node_modules/language-icons/icons/az.svg": pn,
                "/node_modules/language-icons/icons/ba.svg": hn,
                "/node_modules/language-icons/icons/be.svg": mn,
                "/node_modules/language-icons/icons/bg.svg": gn,
                "/node_modules/language-icons/icons/bh.svg": un,
                "/node_modules/language-icons/icons/bi.svg": dn,
                "/node_modules/language-icons/icons/bm.svg": cn,
                "/node_modules/language-icons/icons/bn.svg": ln,
                "/node_modules/language-icons/icons/bo.svg": rn,
                "/node_modules/language-icons/icons/br.svg": an,
                "/node_modules/language-icons/icons/bs.svg": nn,
                "/node_modules/language-icons/icons/ca.svg": on,
                "/node_modules/language-icons/icons/ce.svg": tn,
                "/node_modules/language-icons/icons/ch.svg": sn,
                "/node_modules/language-icons/icons/co.svg": en,
                "/node_modules/language-icons/icons/cr.svg": xo,
                "/node_modules/language-icons/icons/cs.svg": $o,
                "/node_modules/language-icons/icons/cu.svg": Jo,
                "/node_modules/language-icons/icons/cv.svg": Yo,
                "/node_modules/language-icons/icons/cy.svg": Ko,
                "/node_modules/language-icons/icons/da.svg": Xo,
                "/node_modules/language-icons/icons/de.svg": Zo,
                "/node_modules/language-icons/icons/dv.svg": Qo,
                "/node_modules/language-icons/icons/dz.svg": Fo,
                "/node_modules/language-icons/icons/ee.svg": Wo,
                "/node_modules/language-icons/icons/el.svg": Go,
                "/node_modules/language-icons/icons/en.svg": zo,
                "/node_modules/language-icons/icons/eo.svg": Lo,
                "/node_modules/language-icons/icons/es.svg": qo,
                "/node_modules/language-icons/icons/et.svg": Ho,
                "/node_modules/language-icons/icons/eu.svg": Uo,
                "/node_modules/language-icons/icons/fa.svg": jo,
                "/node_modules/language-icons/icons/ff.svg": Oo,
                "/node_modules/language-icons/icons/fi.svg": Vo,
                "/node_modules/language-icons/icons/fj.svg": Bo,
                "/node_modules/language-icons/icons/fo.svg": No,
                "/node_modules/language-icons/icons/fr.svg": Eo,
                "/node_modules/language-icons/icons/fy.svg": Do,
                "/node_modules/language-icons/icons/ga.svg": Ro,
                "/node_modules/language-icons/icons/gd.svg": Mo,
                "/node_modules/language-icons/icons/gl.svg": Io,
                "/node_modules/language-icons/icons/gn.svg": To,
                "/node_modules/language-icons/icons/gu.svg": Po,
                "/node_modules/language-icons/icons/gv.svg": So,
                "/node_modules/language-icons/icons/ha.svg": Co,
                "/node_modules/language-icons/icons/he.svg": ko,
                "/node_modules/language-icons/icons/hi.svg": wo,
                "/node_modules/language-icons/icons/ho.svg": yo,
                "/node_modules/language-icons/icons/hr.svg": _o,
                "/node_modules/language-icons/icons/ht.svg": vo,
                "/node_modules/language-icons/icons/hu.svg": fo,
                "/node_modules/language-icons/icons/hy.svg": bo,
                "/node_modules/language-icons/icons/hz.svg": Ao,
                "/node_modules/language-icons/icons/ia.svg": po,
                "/node_modules/language-icons/icons/id.svg": ho,
                "/node_modules/language-icons/icons/ie.svg": mo,
                "/node_modules/language-icons/icons/ig.svg": go,
                "/node_modules/language-icons/icons/ii.svg": uo,
                "/node_modules/language-icons/icons/ik.svg": co,
                "/node_modules/language-icons/icons/io.svg": lo,
                "/node_modules/language-icons/icons/is.svg": ro,
                "/node_modules/language-icons/icons/it.svg": ao,
                "/node_modules/language-icons/icons/iu.svg": no,
                "/node_modules/language-icons/icons/ja.svg": oo,
                "/node_modules/language-icons/icons/jv.svg": io,
                "/node_modules/language-icons/icons/ka.svg": to,
                "/node_modules/language-icons/icons/kg.svg": so,
                "/node_modules/language-icons/icons/ki.svg": eo,
                "/node_modules/language-icons/icons/kj.svg": xi,
                "/node_modules/language-icons/icons/kk.svg": $i,
                "/node_modules/language-icons/icons/kl.svg": Ji,
                "/node_modules/language-icons/icons/km.svg": Yi,
                "/node_modules/language-icons/icons/kn.svg": Ki,
                "/node_modules/language-icons/icons/ko.svg": Xi,
                "/node_modules/language-icons/icons/kr.svg": Zi,
                "/node_modules/language-icons/icons/ks.svg": Qi,
                "/node_modules/language-icons/icons/ku.svg": Fi,
                "/node_modules/language-icons/icons/kv.svg": Wi,
                "/node_modules/language-icons/icons/kw.svg": Gi,
                "/node_modules/language-icons/icons/ky.svg": zi,
                "/node_modules/language-icons/icons/la.svg": Li,
                "/node_modules/language-icons/icons/lb.svg": qi,
                "/node_modules/language-icons/icons/lg.svg": Hi,
                "/node_modules/language-icons/icons/li.svg": Ui,
                "/node_modules/language-icons/icons/ln.svg": ji,
                "/node_modules/language-icons/icons/lo.svg": Oi,
                "/node_modules/language-icons/icons/lt.svg": Vi,
                "/node_modules/language-icons/icons/lu.svg": Bi,
                "/node_modules/language-icons/icons/lv.svg": Ni,
                "/node_modules/language-icons/icons/mg.svg": Ei,
                "/node_modules/language-icons/icons/mh.svg": Di,
                "/node_modules/language-icons/icons/mi.svg": Ri,
                "/node_modules/language-icons/icons/mk.svg": Mi,
                "/node_modules/language-icons/icons/ml.svg": Ii,
                "/node_modules/language-icons/icons/mn.svg": Ti,
                "/node_modules/language-icons/icons/mr.svg": Pi,
                "/node_modules/language-icons/icons/ms.svg": Si,
                "/node_modules/language-icons/icons/mt.svg": Ci,
                "/node_modules/language-icons/icons/my.svg": ki,
                "/node_modules/language-icons/icons/na.svg": wi,
                "/node_modules/language-icons/icons/nb.svg": yi,
                "/node_modules/language-icons/icons/nd.svg": _i,
                "/node_modules/language-icons/icons/ne.svg": vi,
                "/node_modules/language-icons/icons/ng.svg": fi,
                "/node_modules/language-icons/icons/nl.svg": bi,
                "/node_modules/language-icons/icons/nn.svg": Ai,
                "/node_modules/language-icons/icons/no.svg": pi,
                "/node_modules/language-icons/icons/nr.svg": hi,
                "/node_modules/language-icons/icons/nv.svg": mi,
                "/node_modules/language-icons/icons/ny.svg": gi,
                "/node_modules/language-icons/icons/oc.svg": ui,
                "/node_modules/language-icons/icons/oj.svg": di,
                "/node_modules/language-icons/icons/om.svg": ci,
                "/node_modules/language-icons/icons/or.svg": li,
                "/node_modules/language-icons/icons/os.svg": ri,
                "/node_modules/language-icons/icons/pa.svg": ai,
                "/node_modules/language-icons/icons/pi.svg": ni,
                "/node_modules/language-icons/icons/pl.svg": oi,
                "/node_modules/language-icons/icons/ps.svg": ii,
                "/node_modules/language-icons/icons/pt.svg": ti,
                "/node_modules/language-icons/icons/qu.svg": si,
                "/node_modules/language-icons/icons/rm.svg": ei,
                "/node_modules/language-icons/icons/rn.svg": xt,
                "/node_modules/language-icons/icons/ro.svg": $t,
                "/node_modules/language-icons/icons/ru.svg": Jt,
                "/node_modules/language-icons/icons/rw.svg": Yt,
                "/node_modules/language-icons/icons/sa.svg": Kt,
                "/node_modules/language-icons/icons/sc.svg": Xt,
                "/node_modules/language-icons/icons/sd.svg": Zt,
                "/node_modules/language-icons/icons/se.svg": Qt,
                "/node_modules/language-icons/icons/sg.svg": Ft,
                "/node_modules/language-icons/icons/si.svg": Wt,
                "/node_modules/language-icons/icons/sk.svg": Gt,
                "/node_modules/language-icons/icons/sl.svg": zt,
                "/node_modules/language-icons/icons/sm.svg": Lt,
                "/node_modules/language-icons/icons/sn.svg": qt,
                "/node_modules/language-icons/icons/so.svg": Ht,
                "/node_modules/language-icons/icons/sq.svg": Ut,
                "/node_modules/language-icons/icons/sr.svg": jt,
                "/node_modules/language-icons/icons/ss.svg": Ot,
                "/node_modules/language-icons/icons/st.svg": Vt,
                "/node_modules/language-icons/icons/su.svg": Bt,
                "/node_modules/language-icons/icons/sv.svg": Nt,
                "/node_modules/language-icons/icons/sw.svg": Et,
                "/node_modules/language-icons/icons/ta.svg": Dt,
                "/node_modules/language-icons/icons/te.svg": Rt,
                "/node_modules/language-icons/icons/tg.svg": Mt,
                "/node_modules/language-icons/icons/th.svg": It,
                "/node_modules/language-icons/icons/ti.svg": Tt,
                "/node_modules/language-icons/icons/tk.svg": Pt,
                "/node_modules/language-icons/icons/tl.svg": St,
                "/node_modules/language-icons/icons/tn.svg": Ct,
                "/node_modules/language-icons/icons/to.svg": kt,
                "/node_modules/language-icons/icons/tr.svg": wt,
                "/node_modules/language-icons/icons/ts.svg": yt,
                "/node_modules/language-icons/icons/tt.svg": _t,
                "/node_modules/language-icons/icons/tw.svg": vt,
                "/node_modules/language-icons/icons/ty.svg": ft,
                "/node_modules/language-icons/icons/ug.svg": bt,
                "/node_modules/language-icons/icons/uk.svg": At,
                "/node_modules/language-icons/icons/ur.svg": pt,
                "/node_modules/language-icons/icons/uz.svg": ht,
                "/node_modules/language-icons/icons/ve.svg": mt,
                "/node_modules/language-icons/icons/vi.svg": gt,
                "/node_modules/language-icons/icons/vo.svg": ut,
                "/node_modules/language-icons/icons/wa.svg": dt,
                "/node_modules/language-icons/icons/wo.svg": ct,
                "/node_modules/language-icons/icons/xh.svg": lt,
                "/node_modules/language-icons/icons/yi.svg": rt,
                "/node_modules/language-icons/icons/yo.svg": at,
                "/node_modules/language-icons/icons/za.svg": nt,
                "/node_modules/language-icons/icons/zh.svg": ot,
                "/node_modules/language-icons/icons/zu.svg": it
            })[`/node_modules/language-icons/icons/${this.session.meta.language}.svg`],import.meta.url).href
        },
        chatServers() {
            return [...this.chat.servers].map( ([,e]) => e).sort( (e, s) => this.chatServerPreference.indexOf(e.host) - this.chatServerPreference.indexOf(s.host))
        }
    },
    emits: ["change"],
    data() {
        return {
            serverDropdown: !1,
            availableLanguages: qs.getAllCodes().map(e => [e, e + " - " + qs.getNativeName(e)]),
            sessionName: this.$store.state.session.sessionId || Math.round(Math.random() * 1e5).toString(),
            created: "",
            createdTimer: null,
            copied: !1
        }
    },
    methods: {
        ...j("session", ["updateMeta"]),
        toggle(e, s=!1) {
            var n, i;
            if (this.session.sessionId && !this.isStoryteller)
                return;
            const t = Object.assign({}, this.session.meta.tags);
            if (s ? t[e] = !t[e] : t[e] = (((n = t[e]) != null ? n : 0) + 1) % 3,
            this.session.sessionId && e === "difficulty" && this.edition.id === "homebrew") {
                if (t[e] = 1,
                this.session.meta.tags.difficulty === 1)
                    return
            } else
                this.session.sessionId && e === "difficulty" && t[e] === 2 && ((i = this.edition.level) == null ? void 0 : i.toLowerCase()) !== "beginner" && (t[e] = 0);
            this.updateMeta({
                tags: t
            })
        },
        async togglePublic() {
            if (this.session.sessionId && !this.session.meta.isPublic)
                try {
                    await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "session.prompt_public_title",
                        text: "session.prompt_public_text"
                    }) && this.updateMeta({
                        isPublic: !this.session.meta.isPublic
                    })
                } catch {} finally {
                    this.$store.commit("toggleModal", {
                        name: "users"
                    })
                }
            else
                this.updateMeta({
                    isPublic: !this.session.meta.isPublic
                })
        },
        changeServer(e) {
            var s;
            if (!(this.session.sessionId && !this.isStoryteller))
                if (this.session.sessionId) {
                    if (this.session.meta.chatServer === e.host || ((s = e.health) == null ? void 0 : s.users) >= 200)
                        return;
                    this.$store.commit("chat/changeServer", e.host)
                } else
                    this.updateMeta({
                        chatServer: e.host
                    })
        },
        copySessionUrl() {
            if (!this.session.sessionId)
                return;
            const e = "https://botc.app/join/" + encodeURIComponent(this.session.sessionId);
            navigator.clipboard.writeText(e),
            this.copied = !0,
            setTimeout( () => this.copied = !1, 2e3)
        },
        updateCreateTime() {
            if (this.created = "",
            clearTimeout(this.createdTimer),
            this.session.meta.createdAt) {
                const e = Math.round((Date.now() - new Date(this.session.meta.createdAt).getTime()) / 6e4);
                e > 60 && (this.created = Math.floor(e / 60) + "h "),
                this.created += e % 60 + "min",
                this.createdTimer = setTimeout( () => this.updateCreateTime(), 60 * 1e3)
            }
        }
    },
    beforeMount() {
        !this.session.sessionId && !this.chatServerPreference[0] !== this.session.meta.chatServer && this.updateMeta({
            chatServer: this.chatServerPreference[0]
        }),
        this.updateCreateTime()
    },
    beforeUnmount() {
        clearTimeout(this.createdTimer)
    },
    watch: {
        "session.meta.createdAt"() {
            this.updateCreateTime()
        }
    }
}
  , _P = {
    class: "meta"
}
  , yP = {
    class: "col"
}
  , wP = {
    key: 0
}
  , kP = {
    key: 1
}
  , CP = ["placeholder", "disabled", "title"]
  , SP = {
    for: "language"
}
  , PP = ["disabled"]
  , TP = ["value", "selected"]
  , IP = ["src"]
  , MP = {
    class: "dropdown"
}
  , RP = ["title"]
  , DP = {
    key: 0,
    class: "servers"
}
  , EP = ["onClick"]
  , NP = ["title"]
  , BP = ["value", "disabled"]
  , VP = ["value", "disabled"]
  , OP = ["title"]
  , jP = ["title"]
  , UP = {
    key: 2,
    href: "https://www.patreon.com/botconline",
    target: "_blank"
}
  , HP = {
    class: "tags"
}
  , qP = ["title", "onClick"]
  , LP = ["aria-label"]
  , zP = ["aria-valuetext"]
  , GP = ["aria-valuetext"]
  , WP = ["aria-valuetext"]
  , FP = ["title"]
  , QP = {
    id: "streaming-check"
}
  , ZP = {
    key: 0,
    "aria-pressed": "true",
    "aria-labelledby": "streaming-check"
}
  , XP = {
    key: 1,
    "aria-pressed": "false",
    "aria-labelledby": "streaming-check"
};
function KP(e, s, t, n, i, o) {
    var g, c, h, m, A, f, T, w, V, N, U, P;
    const l = k("font-awesome-icon");
    return r(),
    u("div", _P, [a("div", yP, [e.session.sessionId ? (r(),
    u("h4", wP, d(e.$t("session.title_current")) + ":", 1)) : (r(),
    u("h4", kP, d(e.$t("session.title_create")) + ":", 1)), (r(),
    C(Ld(e.session.sessionId ? "div" : "label"), {
        class: "label"
    }, {
        default: S( () => [a("span", null, d(e.$t("session.session_name")) + ":", 1), z(a("input", {
            required: "",
            name: "sessionName",
            minlength: "3",
            maxlength: "20",
            pattern: "^[^ ].*?[^ ]$",
            placeholder: e.$t("session.name_placeholder"),
            "onUpdate:modelValue": s[0] || (s[0] = E => i.sessionName = E),
            disabled: !!e.session.sessionId,
            title: i.created ? e.$t("session.created", [i.created, e.session.meta.owner.username]) : ""
        }, null, 8, CP), [[W, i.sessionName]]), e.session.sessionId ? (r(),
        C(l, {
            key: 0,
            icon: i.copied ? "check-circle" : "copy",
            onClick: o.copySessionUrl,
            title: e.$t("session.copy")
        }, null, 8, ["icon", "onClick", "title"])) : p("", !0)]),
        _: 1
    })), a("label", SP, [a("span", null, d(e.$t("session.language")) + ":", 1), a("select", {
        name: "language",
        id: "language",
        onChange: s[1] || (s[1] = E => e.updateMeta({
            language: E.target.value
        })),
        disabled: !!e.session.sessionId && !e.isStoryteller
    }, [(r(!0),
    u(_, null, B(i.availableLanguages, ([E,R]) => (r(),
    u("option", {
        key: E,
        value: E,
        selected: e.session.meta.language === E
    }, d(R), 9, TP))), 128))], 40, PP), a("img", {
        src: o.languageIcon,
        alt: ""
    }, null, 8, IP)]), a("div", {
        class: "label",
        onClick: s[2] || (s[2] = E => i.serverDropdown = !i.serverDropdown)
    }, [a("span", null, d(e.$t("session.server")), 1), a("div", MP, [v(d(((g = e.chat.servers.get(e.session.meta.chatServer)) == null ? void 0 : g.name) || e.session.meta.chatServer) + " (" + d((m = (h = (c = e.chat.servers.get(e.session.meta.chatServer)) == null ? void 0 : c.health) == null ? void 0 : h.latency) != null ? m : "?") + "ms) ", 1), a("span", {
        class: "status",
        style: L({
            backgroundColor: (f = (A = e.chat.servers.get(e.session.meta.chatServer)) == null ? void 0 : A.health) == null ? void 0 : f.color
        }),
        title: e.$t("session.server_stats", [(V = (w = (T = e.chat.servers.get(e.session.meta.chatServer)) == null ? void 0 : T.health) == null ? void 0 : w.users) != null ? V : "?", (P = (U = (N = e.chat.servers.get(e.session.meta.chatServer)) == null ? void 0 : N.health) == null ? void 0 : U.load) != null ? P : "?"])
    }, null, 12, RP)]), b(q, {
        name: "fold"
    }, {
        default: S( () => [i.serverDropdown ? (r(),
        u("table", DP, [a("thead", null, [a("tr", null, [a("td", null, d(e.$t("session.server_name")), 1), a("td", null, [b(l, {
            icon: "wifi",
            title: "Server status"
        }), b(l, {
            icon: "signal",
            title: "Latency"
        })]), a("td", null, [b(l, {
            icon: "users",
            title: "Users"
        })])])]), a("tbody", null, [(r(!0),
        u(_, null, B(o.chatServers, E => {
            var R, Z, H, G, K, J, x, ce;
            return r(),
            u("tr", {
                key: E.host,
                class: y({
                    selected: E.host === e.session.meta.chatServer,
                    disabled: ((R = E.health) == null ? void 0 : R.users) >= 200
                }),
                onClick: oe => o.changeServer(E)
            }, [a("td", null, d(E.name), 1), a("td", null, [E.health ? (r(),
            u("span", {
                key: 0,
                class: "status",
                style: L({
                    backgroundColor: E.health.color
                }),
                title: e.$t("session.server_stats", [(H = (Z = E.health) == null ? void 0 : Z.users) != null ? H : "?", (G = E.health.load) != null ? G : "?"])
            }, null, 12, NP)) : p("", !0), v(" " + d((J = (K = E.health) == null ? void 0 : K.latency) != null ? J : "?") + "ms ", 1)]), a("td", null, d((ce = (x = E.health) == null ? void 0 : x.users) != null ? ce : "?"), 1)], 10, EP)
        }
        ), 128))])])) : p("", !0)]),
        _: 1
    })]), a("label", {
        class: y({
            "switch-1": e.session.meta.isPublic,
            "switch-2": !e.session.meta.isPublic
        })
    }, [a("span", null, d(e.$t("session.visibility")) + ":", 1), a("input", {
        type: "checkbox",
        name: "isPublic",
        value: e.session.meta.isPublic,
        disabled: !!e.session.sessionId && !e.isStoryteller,
        onChange: s[3] || (s[3] = (...E) => o.togglePublic && o.togglePublic(...E))
    }, null, 40, BP), a("em", null, [v(d(e.session.meta.isPublic ? e.$t("session.visibility_public") : e.$t("session.visibility_private")) + " ", 1), e.session.ping ? (r(),
    u(_, {
        key: 0
    }, [v(" (" + d(e.session.ping) + "ms) ", 1)], 64)) : p("", !0)]), b(l, {
        icon: e.session.meta.isPublic ? "lock-open" : "lock"
    }, null, 8, ["icon"])], 2), a("label", {
        class: y({
            "switch-1": e.levels.GROUP.includes(e.user.level),
            "switch-2": e.levels.SINGLE.includes(e.user.level)
        })
    }, [a("span", null, d(e.$t("session.access")) + ":", 1), a("input", {
        type: "checkbox",
        name: "isLocked",
        value: e.session.meta.tags.locked,
        disabled: !e.session.sessionId || !e.isStoryteller,
        onChange: s[4] || (s[4] = E => o.toggle("locked", !0))
    }, null, 40, VP), e.session.meta.tags.locked ? (r(),
    u("em", {
        key: 0,
        title: e.$t("session.locked_text")
    }, d(e.$t("session.locked")), 9, OP)) : e.levels.GROUP.includes(e.user.level) || e.session.boostDuration ? (r(),
    u("em", {
        key: 1,
        title: e.$t("session.open_text")
    }, d(e.$t("session.free")), 9, jP)) : (r(),
    u("a", UP, [v(d(e.$t("session.subscription_needed")) + " ", 1), b(l, {
        icon: "link"
    })])), e.session.sessionId ? (r(),
    C(l, {
        key: 3,
        title: e.$t(`session.${e.session.meta.tags.locked ? "locked" : "open"}_text`),
        icon: e.session.meta.tags.locked ? "lock" : "lock-open"
    }, null, 8, ["title", "icon"])) : p("", !0)], 2)]), a("div", {
        class: y(["col", {
            closed: !e.session.meta.isPublic
        }])
    }, [a("h4", null, d(e.$t("session.tags")) + ":", 1), a("ul", HP, [(r(),
    u(_, null, B(["difficulty", "cameras", "travellers", "grimoire"], E => a("li", {
        key: E,
        title: e.$t(`common.session-tags.${E}.title`),
        class: y(["switch-" + e.session.meta.tags[E]]),
        onClick: R => o.toggle(E)
    }, [a("span", {
        role: "button",
        "aria-label": e.$t(`common.session-tags.${E}.title`)
    }, d(e.$t(`common.session-tags.${E}.label`)) + ": ", 9, LP), e.session.meta.tags[E] ? e.session.meta.tags[E] === 1 ? (r(),
    u("em", {
        key: 1,
        role: "spinbutton",
        "aria-valuetext": e.$t(`common.session-tags.${E}.value_1`)
    }, d(e.$t(`common.session-tags.${E}.value_1`)), 9, GP)) : e.session.meta.tags[E] === 2 ? (r(),
    u("em", {
        key: 2,
        role: "spinbutton",
        "aria-valuetext": e.$t(`common.session-tags.${E}.value_2`)
    }, d(e.$t(`common.session-tags.${E}.value_2`)), 9, WP)) : p("", !0) : (r(),
    u("em", {
        key: 0,
        role: "spinbutton",
        "aria-valuetext": e.$t(`common.session-tags.${E}.value_0`)
    }, d(e.$t(`common.session-tags.${E}.value_0`)), 9, zP))], 10, qP)), 64)), a("li", {
        title: e.$t("common.session-tags.streaming.title"),
        class: y({
            "switch-1": e.session.meta.tags.streaming,
            "switch-2": !e.session.meta.tags.streaming
        }),
        onClick: s[5] || (s[5] = E => o.toggle("streaming", !0))
    }, [a("span", QP, d(e.$t("common.session-tags.streaming.label")) + ":", 1), e.session.meta.tags.streaming ? (r(),
    u("em", ZP, d(e.$t("common.session-tags.streaming.value_1")), 1)) : (r(),
    u("em", XP, d(e.$t("common.session-tags.streaming.value_0")), 1))], 10, FP)])], 2)])
}
const kd = O(vP, [["render", KP]])
  , YP = {
    components: {
        SessionMeta: kd,
        FontAwesomeIcon: Y,
        Modal: se
    },
    computed: {
        ...I(["session", "chat", "modal", "game"]),
        ...I("players", ["players", "storytellers", "storytellerRequests"]),
        ...I("user", ["levels", "user"]),
        ...D("players", ["storytellerMap"]),
        ...D("user", ["isStoryteller"]),
        users() {
            const e = []
              , s = []
              , t = [];
            return this.session.users.forEach(n => {
                n.chat = "",
                n.username = n.username || "",
                Number(this.chat.userOverrides.get("volume-" + n.id)) === 0 && (n.chat = "microphone-slash"),
                this.storytellerMap.has(n.id) ? (n.class = "storyteller",
                e.push(n)) : this.players.some( ({id: i}) => i === n.id) ? (n.class = "player",
                s.push(n)) : n.isOnline && (n.class = "spectator",
                t.push(n))
            }
            ),
            e.sort( (n, i) => n.username.localeCompare(i.username)),
            s.sort( (n, i) => n.username.localeCompare(i.username)),
            t.sort( (n, i) => n.username.localeCompare(i.username)),
            [...e, ...s, ...t]
        },
        userCounts() {
            return {
                storyteller: this.users.filter(e => e.class === "storyteller").length,
                player: this.users.filter(e => e.class === "player").length,
                spectator: this.users.filter(e => e.class === "spectator").length
            }
        }
    },
    data() {
        return {}
    },
    methods: {
        ...j(["toggleModal"]),
        grantGrimoireAccess(e, s) {
            if (!this.isStoryteller || e.grimoireAccess < 1)
                return;
            const t = s != null ? s : e.grimoireAccess === 3 ? 2 : 3;
            this.$store.commit("user/requestGrimoire", {
                id: e.id,
                status: t
            })
        },
        showUser(e) {
            this.toggleModal({
                name: "user",
                params: {
                    userId: e,
                    isFromUsers: !0
                }
            })
        }
    }
}
  , JP = {
    class: "users"
}
  , $P = {
    key: 0,
    class: "break"
}
  , xP = ["onClick"]
  , eT = {
    class: "label"
}
  , sT = ["data-tooltip"]
  , tT = {
    class: "icons"
}
  , iT = ["aria-label", "data-tooltip"]
  , oT = ["aria-label", "data-tooltip"]
  , nT = ["aria-label", "data-tooltip"]
  , aT = ["data-tooltip", "aria-label"]
  , rT = ["data-tooltip", "aria-label"]
  , lT = ["data-tooltip", "aria-label"]
  , cT = ["data-tooltip", "aria-label"]
  , dT = ["data-tooltip", "aria-label"]
  , uT = {
    class: "notification"
}
  , gT = {
    key: 0,
    "aria-live": "polite"
};
function mT(e, s, t, n, i, o) {
    const l = k("SessionMeta")
      , g = k("font-awesome-icon")
      , c = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "users" && e.session.sessionId ? (r(),
        C(c, {
            key: 0,
            class: "users",
            onClose: s[0] || (s[0] = h => e.toggleModal(e.modal))
        }, {
            header: S( () => [b(l)]),
            default: S( () => [a("ul", JP, [(r(!0),
            u(_, null, B(o.users, (h, m) => {
                var A, f, T, w, V;
                return r(),
                u(_, {
                    key: h.id
                }, [!m || o.users[m - 1].class !== h.class ? (r(),
                u("li", $P, d(e.$t(`modals.users.type_${h.class}`, o.userCounts[h.class])), 1)) : p("", !0), a("li", {
                    class: y({
                        [h.class]: !0,
                        ["level-" + h.level]: h.level,
                        ["id-" + h.id]: h.id,
                        ["border-" + ((A = h.cosmetics) == null ? void 0 : A.border)]: !!((f = h.cosmetics) != null && f.border),
                        offline: !h.isOnline,
                        you: h.id === e.user.id
                    }),
                    onClick: N => o.showUser(h.id)
                }, [a("div", eT, [a("span", {
                    class: "name",
                    "data-tooltip": h.username + (h.pronouns ? " (" + h.pronouns + ")" : "") || null
                }, d(h.username.substring(0, 50) || e.$t("common.unnamed_user")), 9, sT), a("span", tT, [(T = h.flags) != null && T.includes("newuser") ? (r(),
                u("span", {
                    key: 0,
                    "aria-label": e.$t("modals.users.new_user"),
                    "data-tooltip": e.$t("modals.users.new_user")
                }, [b(g, {
                    class: "newuser",
                    icon: "seedling"
                })], 8, iT)) : p("", !0), h.isOnline ? e.levels.GROUP.includes(h.level) ? (r(),
                u("span", {
                    key: 2,
                    "aria-label": e.$t("modals.users.group_sub"),
                    "data-tooltip": e.$t("modals.users.group_sub")
                }, [b(g, {
                    class: "group",
                    icon: "users"
                })], 8, nT)) : p("", !0) : (r(),
                u("span", {
                    key: 1,
                    "aria-label": e.$t("modals.users.offline"),
                    "data-tooltip": e.$t("modals.users.offline")
                }, [b(g, {
                    class: "offline",
                    icon: "user-slash"
                })], 8, oT)), h.level === "special-tpi" && ((w = h.cosmetics) == null ? void 0 : w.border) === "tpi" ? (r(),
                u("span", {
                    key: 3,
                    "data-tooltip": e.$t("modals.users.official_tpi"),
                    "aria-label": e.$t("modals.users.official_tpi")
                }, [b(g, {
                    class: "tpi",
                    icon: "star"
                })], 8, aT)) : p("", !0), h.level === "special-moderator" && ((V = h.cosmetics) == null ? void 0 : V.border) === "moderator" ? (r(),
                u("span", {
                    key: 4,
                    "data-tooltip": e.$t("modals.users.official_mod"),
                    "aria-label": e.$t("modals.users.official_mod")
                }, [b(g, {
                    class: "moderator",
                    icon: "gavel"
                })], 8, rT)) : p("", !0), h.grimoireAccess === 3 ? (r(),
                u("span", {
                    key: 5,
                    "data-tooltip": e.$t("modals.users.grim_access"),
                    "aria-label": e.$t("modals.users.grim_access")
                }, [b(g, {
                    icon: "book-dead"
                })], 8, lT)) : p("", !0), e.storytellerRequests.includes(h.id) ? (r(),
                u("span", {
                    key: 6,
                    "data-tooltip": e.$t("modals.users.st_requested"),
                    "aria-label": e.$t("modals.users.st_requested")
                }, [b(g, {
                    icon: "crown"
                })], 8, cT)) : p("", !0), h.chat ? (r(),
                u("span", {
                    key: 7,
                    "data-tooltip": e.$t("modals.users.chat_connection"),
                    "aria-label": e.$t("modals.users.chat_connection")
                }, [b(g, {
                    icon: h.chat
                }, null, 8, ["icon"])], 8, dT)) : p("", !0)])]), a("div", uT, [h.grimoireAccess === 1 && e.isStoryteller ? (r(),
                u("div", gT, [b(g, {
                    icon: "book-dead"
                }), v(" " + d(e.$t("modals.users.grim_access")) + " ", 1), b(g, {
                    icon: "check-circle",
                    class: "primary",
                    onClick: M(N => o.grantGrimoireAccess(h, 3), ["stop"]),
                    "aria-hidden": "false",
                    role: "button",
                    "aria-label": e.$t("common.button_confirm")
                }, null, 8, ["onClick", "aria-label"]), b(g, {
                    icon: "times-circle",
                    class: "secondary",
                    onClick: M(N => o.grantGrimoireAccess(h, 2), ["stop"]),
                    "aria-hidden": "false",
                    role: "button",
                    "aria-label": e.$t("common.button_cancel")
                }, null, 8, ["onClick", "aria-label"])])) : p("", !0)])], 10, xP)], 64)
            }
            ), 128))])]),
            _: 1
        })) : p("", !0)]),
        _: 1
    })
}
const hT = O(YP, [["render", mT], ["__scopeId", "data-v-cb30eef1"]])
  , pT = {
    components: {
        Modal: se
    },
    computed: {
        ...I(["modal", "session"]),
        ...I("user", ["user"])
    },
    data() {
        return {
            title: "",
            text: "",
            sessionName: ""
        }
    },
    watch: {
        "modal.name"() {
            this.modal.name === "announcement" && this.session.sessionId && (this.sessionName = this.session.sessionId)
        }
    },
    methods: {
        ...j(["toggleModal"]),
        async submit() {
            try {
                this.close(),
                await this.$store.dispatch("user/announce", {
                    title: this.title,
                    text: this.text,
                    sessionName: this.sessionName
                }),
                this.title = "",
                this.text = ""
            } catch (e) {
                this.$store.dispatch("showError", ["modals.announcement.error", e])
            }
        },
        close() {
            document.getElementById("app").focus(),
            this.toggleModal()
        }
    }
}
  , AT = ["placeholder"]
  , bT = ["placeholder"]
  , fT = ["placeholder"]
  , vT = {
    class: "button-group"
}
  , _T = {
    tabindex: "-1",
    type: "submit",
    class: "button primary"
};
function yT(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "announcement" && e.user.level === "special-tpi" ? (r(),
        C(g, {
            key: 0,
            class: "announcement",
            onClose: s[5] || (s[5] = c => o.close())
        }, {
            header: S( () => [v(d(e.$t("modals.announcement.title")), 1)]),
            default: S( () => [a("p", null, d(e.$t("modals.announcement.description")), 1), a("form", {
                onSubmit: s[4] || (s[4] = M(c => o.submit(), ["prevent"]))
            }, [z(a("input", {
                type: "text",
                "onUpdate:modelValue": s[0] || (s[0] = c => i.title = c),
                required: "",
                placeholder: e.$t("modals.announcement.input_title")
            }, null, 8, AT), [[W, i.title]]), s[6] || (s[6] = a("br", null, null, -1)), z(a("textarea", {
                ref: "input",
                "onUpdate:modelValue": s[1] || (s[1] = c => i.text = c),
                required: "",
                placeholder: e.$t("modals.announcement.input_text")
            }, null, 8, bT), [[W, i.text]]), s[7] || (s[7] = a("br", null, null, -1)), z(a("input", {
                type: "text",
                "onUpdate:modelValue": s[2] || (s[2] = c => i.sessionName = c),
                placeholder: e.$t("modals.announcement.input_session")
            }, null, 8, fT), [[W, i.sessionName]]), a("div", vT, [a("button", _T, [b(l, {
                icon: "check-circle"
            }), v(" " + d(e.$t("common.button_send")), 1)]), a("button", {
                tabindex: "-1",
                type: "button",
                class: "button secondary",
                onClick: s[3] || (s[3] = c => o.close())
            }, [b(l, {
                icon: "times-circle"
            }), v(" " + d(e.$t("common.button_cancel")), 1)])])], 32)]),
            _: 1
        })) : p("", !0)]),
        _: 1
    })
}
const Cd = O(pT, [["render", yT], ["__scopeId", "data-v-dc9f7d16"]])
  , wT = {
    name: "ModerationModal",
    components: {
        Modal: se,
        FontAwesomeIcon: Y,
        PlayerAvatar: ca
    },
    computed: {
        ...I(["session", "grimoire", "modal"]),
        ...I("user", ["user", "accessToken"]),
        ...D("user", ["isModerator"])
    },
    data() {
        return {
            query: "",
            users: [],
            stats: null,
            bans: [],
            dirty: [],
            userEdit: null,
            count: 0,
            offset: 0,
            pageSize: 10,
            userBan: {
                id: "",
                reason: "",
                expires: ""
            },
            dtFormat: new Intl.DateTimeFormat(navigator.languages ? navigator.languages[0] : navigator.language,{
                dateStyle: "short",
                timeStyle: "short"
            }),
            isLoading: !1,
            flags: {
                newuser: "New User",
                "tos-agreed": "Agreed to ToS",
                "verified-email": "Verified E-Mail",
                "verified-phone": "Verified Phone Number",
                powerful: "Rainbow Unlock",
                "forced-username": "Locked Username",
                "forced-pronouns": "Locked Pronouns",
                "forced-avatar": "Locked Avatar",
                "forced-private": "Banned from Public Games",
                banned: "Banned"
            },
            avatarsSelected: [],
            avatars: {
                worldcup25: "World Cup 25"
            },
            borders: {
                deusexfiasco: "Deus ex Fiasco",
                worldcup25: "World Cup 25"
            },
            emotes: {
                bugreporter: "Bug Reporter",
                worldcup25: "World Cup 25"
            }
        }
    },
    methods: {
        ...$("session", ["join"]),
        ...j(["toggleModal"]),
        async search(e=0) {
            this.isLoading = !0,
            this.userEdit = null;
            const {count: s, rows: t} = await re("moderator/search", {
                query: this.query,
                offset: e
            }, this.accessToken);
            this.offset = e,
            this.users = t || [],
            this.count = s,
            this.isLoading = !1
        },
        async getUser() {
            var n;
            if (!this.modal.params.userId)
                return;
            this.isLoading = !0,
            this.users = [],
            this.dirty = [];
            const {user: e={}, bans: s=[], stats: t} = await We(`moderator/${this.modal.params.userId}`, this.accessToken);
            this.userBan = {
                id: ((n = s == null ? void 0 : s.find(i => i.userIds.includes(e.id))) == null ? void 0 : n.id) || "",
                reason: "",
                expires: ""
            },
            this.userEdit = e,
            this.bans = s,
            this.stats = t,
            this.userEdit && !this.userEdit.cosmetics && (this.userEdit.cosmetics = {}),
            this.isLoading = !1
        },
        async saveUser() {
            if (!this.modal.params.userId || !this.dirty.length)
                return;
            (await re(`moderator/${this.modal.params.userId}`, {
                user: Object.fromEntries(this.dirty.map(s => [s, this.userEdit[s]])),
                ban: this.userBan
            }, this.accessToken)).success && this.toggleModal(this.modal)
        },
        setDirty(e) {
            this.dirty.includes(e.target.name) || this.dirty.push(e.target.name)
        },
        clear(e) {
            delete this.userEdit.cosmetics[e],
            this.dirty.includes("cosmetics") || this.dirty.push("cosmetics")
        },
        toggleFlag(e) {
            this.userEdit.flags || (this.userEdit.flags = []),
            this.userEdit.flags.includes(e) ? this.userEdit.flags.splice(this.userEdit.flags.indexOf(e), 1) : this.userEdit.flags.push(e)
        },
        async joinSession(e) {
            this.session.sessionId || (await this.join(e),
            this.toggleModal(this.modal))
        },
        goBack() {
            this.session.sessionId ? this.toggleModal(this.modal) : this.modal.params.userId = ""
        }
    },
    watch: {
        "modal.name"() {
            this.modal.name === "moderation" && (this.modal.params.userId ? this.getUser() : this.$nextTick( () => this.$refs.search.focus()))
        },
        "modal.params.userId"() {
            this.modal.name === "moderation" && (this.modal.params.userId ? this.getUser() : this.search())
        }
    }
}
  , kT = {
    id: "moderation"
}
  , CT = ["disabled"]
  , ST = {
    key: 0
}
  , PT = ["onClick"]
  , TT = ["data-tooltip"]
  , IT = ["disabled"]
  , MT = ["disabled"]
  , RT = {
    class: "options"
}
  , DT = ["checked", "onChange"]
  , ET = {
    key: 0
}
  , NT = {
    class: "ban"
}
  , BT = ["value", "title"]
  , VT = {
    key: 0
}
  , OT = ["value", "selected"]
  , jT = ["value", "selected"]
  , UT = ["value", "selected"]
  , HT = {
    key: 0
}
  , qT = {
    key: 1
}
  , LT = {
    key: 2
}
  , zT = {
    key: 3
}
  , GT = {
    key: 4
}
  , WT = {
    key: 0
}
  , FT = {
    key: 1,
    class: "edition"
}
  , QT = {
    key: 0
}
  , ZT = {
    key: 1,
    class: "role"
}
  , XT = {
    class: "button-group"
};
function KT(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("PlayerAvatar")
      , c = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "moderation" && e.isModerator ? (r(),
        C(c, {
            key: 0,
            class: "moderation",
            onClose: s[23] || (s[23] = h => e.toggleModal(e.modal))
        }, {
            default: S( () => {
                var h, m, A, f, T, w, V, N, U;
                return [a("div", kT, [a("div", {
                    class: y(["content", {
                        loading: i.isLoading
                    }])
                }, [e.modal.params.userId ? (r(),
                u(_, {
                    key: 1
                }, [a("h4", null, "User Moderation: " + d(e.modal.params.userId), 1), i.userEdit ? (r(),
                u("form", {
                    key: 0,
                    id: "user",
                    onChange: s[21] || (s[21] = (...P) => o.setDirty && o.setDirty(...P)),
                    onSubmit: s[22] || (s[22] = M(P => o.saveUser(), ["prevent"])),
                    autocomplete: "off"
                }, [a("section", null, [a("label", null, [s[28] || (s[28] = a("span", null, "Username:", -1)), z(a("input", {
                    type: "text",
                    placeholder: "Username",
                    name: "username",
                    "onUpdate:modelValue": s[4] || (s[4] = P => i.userEdit.username = P),
                    required: "",
                    minlength: "3",
                    autocomplete: "false"
                }, null, 512), [[W, i.userEdit.username]])]), a("label", null, [s[29] || (s[29] = a("span", null, "Pronouns:", -1)), z(a("input", {
                    type: "text",
                    placeholder: "Pronouns",
                    name: "pronouns",
                    "onUpdate:modelValue": s[5] || (s[5] = P => i.userEdit.pronouns = P)
                }, null, 512), [[W, i.userEdit.pronouns]])]), a("label", null, [s[30] || (s[30] = a("span", null, "Email:", -1)), z(a("input", {
                    type: "email",
                    placeholder: "Username",
                    name: "email",
                    "onUpdate:modelValue": s[6] || (s[6] = P => i.userEdit.email = P),
                    disabled: e.user.level !== "special-tpi",
                    required: ""
                }, null, 8, IT), [[W, i.userEdit.email]])]), a("label", null, [s[32] || (s[32] = a("span", null, "Level:", -1)), z(a("select", {
                    "onUpdate:modelValue": s[7] || (s[7] = P => i.userEdit.level = P),
                    disabled: e.user.level !== "special-tpi",
                    name: "level"
                }, [...s[31] || (s[31] = [a("option", {
                    value: ""
                }, "None", -1), a("option", {
                    value: "patreon-townsfolk"
                }, " Patreon: Townsfolk ", -1), a("option", {
                    value: "patreon-minion"
                }, "Patreon: Minion", -1), a("option", {
                    value: "patreon-demon"
                }, "Patreon: Demon", -1), a("option", {
                    value: "special-free"
                }, "Special: Free", -1), a("option", {
                    value: "special-moderator"
                }, " Special: Moderator ", -1), a("option", {
                    value: "special-tpi"
                }, "Special: TPI", -1)])], 8, MT), [[Ae, i.userEdit.level]])]), a("div", null, [s[33] || (s[33] = a("span", null, "Flags:", -1)), a("div", RT, [(r(!0),
                u(_, null, B(i.flags, (P, E) => {
                    var R, Z;
                    return r(),
                    u("label", {
                        key: E,
                        class: y({
                            checked: (R = i.userEdit.flags) == null ? void 0 : R.includes(E)
                        })
                    }, [v(d(P) + " ", 1), a("input", {
                        type: "checkbox",
                        name: "flags",
                        checked: (Z = i.userEdit.flags) == null ? void 0 : Z.includes(E),
                        onChange: H => o.toggleFlag(E)
                    }, null, 40, DT)], 2)
                }
                ), 128))])]), (h = i.userEdit.flags) != null && h.includes("banned") ? (r(),
                u("div", ET, [s[38] || (s[38] = a("span", null, "Banned:", -1)), a("div", NT, [z(a("select", {
                    required: "",
                    "onUpdate:modelValue": s[8] || (s[8] = P => i.userBan.id = P),
                    name: "flags"
                }, [s[34] || (s[34] = a("option", {
                    value: ""
                }, "Select Reason", -1)), (r(!0),
                u(_, null, B(i.bans, P => (r(),
                u("option", {
                    key: P.id,
                    value: P.id,
                    title: P.reason
                }, d(P.reason.substring(0, 30)) + d(P.reason.length > 30 ? "..." : "") + " " + d(P.expires ? `(until ${i.dtFormat.format(new Date(P.expires))})` : ""), 9, BT))), 128)), s[35] || (s[35] = a("option", {
                    value: "-1"
                }, "New Reason", -1))], 512), [[Ae, i.userBan.id]]), i.userBan.id === "-1" ? (r(),
                u("div", VT, [a("label", null, [s[36] || (s[36] = v(" Reason: ", -1)), z(a("input", {
                    type: "text",
                    placeholder: "reason",
                    required: "",
                    "onUpdate:modelValue": s[9] || (s[9] = P => i.userBan.reason = P)
                }, null, 512), [[W, i.userBan.reason]])]), a("label", null, [s[37] || (s[37] = v(" Expires in: ", -1)), z(a("input", {
                    type: "number",
                    placeholder: "hours",
                    "onUpdate:modelValue": s[10] || (s[10] = P => i.userBan.expires = P)
                }, null, 512), [[W, i.userBan.expires]])])])) : p("", !0)])])) : p("", !0)]), a("section", null, [a("label", null, [s[39] || (s[39] = a("span", null, "Avatar:", -1)), z(a("input", {
                    type: "number",
                    placeholder: "Avatar",
                    name: "cosmetics",
                    "onUpdate:modelValue": s[11] || (s[11] = P => i.userEdit.cosmetics.avatar = P)
                }, null, 512), [[W, i.userEdit.cosmetics.avatar, void 0, {
                    number: !0
                }]])]), a("label", null, [s[40] || (s[40] = a("span", null, "Nameplate:", -1)), z(a("input", {
                    type: "text",
                    placeholder: "Nameplate",
                    name: "cosmetics",
                    "onUpdate:modelValue": s[12] || (s[12] = P => i.userEdit.cosmetics.border = P)
                }, null, 512), [[W, i.userEdit.cosmetics.border, void 0, {
                    number: !0
                }]])]), a("label", null, [a("span", null, [v(" Special Avatars: " + d(((m = i.userEdit.cosmetics.avatars) == null ? void 0 : m.length) || "") + " ", 1), (A = i.userEdit.cosmetics.avatars) != null && A.length ? (r(),
                C(l, {
                    key: 0,
                    icon: "trash-alt",
                    onClick: s[13] || (s[13] = M(P => o.clear("avatars"), ["stop"]))
                })) : p("", !0)]), z(a("select", {
                    name: "cosmetics",
                    multiple: "",
                    "onUpdate:modelValue": s[14] || (s[14] = P => i.userEdit.cosmetics.avatars = P)
                }, [(r(!0),
                u(_, null, B(Object.keys(i.avatars), P => {
                    var E;
                    return r(),
                    u("option", {
                        key: P,
                        value: P,
                        selected: (E = i.userEdit.cosmetics.avatars) == null ? void 0 : E.includes(P)
                    }, d(i.avatars[P]), 9, OT)
                }
                ), 128))], 512), [[Ae, i.userEdit.cosmetics.avatars]])]), a("label", null, [a("span", null, [v(" Special Nameplates: " + d(((f = i.userEdit.cosmetics.borders) == null ? void 0 : f.length) || "") + " ", 1), (T = i.userEdit.cosmetics.borders) != null && T.length ? (r(),
                C(l, {
                    key: 0,
                    icon: "trash-alt",
                    onClick: s[15] || (s[15] = M(P => o.clear("borders"), ["stop"]))
                })) : p("", !0)]), z(a("select", {
                    name: "cosmetics",
                    multiple: "",
                    "onUpdate:modelValue": s[16] || (s[16] = P => i.userEdit.cosmetics.borders = P)
                }, [(r(!0),
                u(_, null, B(Object.keys(i.borders), P => {
                    var E;
                    return r(),
                    u("option", {
                        key: P,
                        value: P,
                        selected: (E = i.userEdit.cosmetics.borders) == null ? void 0 : E.includes(P)
                    }, d(i.borders[P]), 9, jT)
                }
                ), 128))], 512), [[Ae, i.userEdit.cosmetics.borders]])]), a("label", null, [a("span", null, [v(" Special Emotes: " + d(((w = i.userEdit.cosmetics.emotes) == null ? void 0 : w.length) || "") + " ", 1), (V = i.userEdit.cosmetics.emotes) != null && V.length ? (r(),
                C(l, {
                    key: 0,
                    icon: "trash-alt",
                    onClick: s[17] || (s[17] = M(P => o.clear("emotes"), ["stop"]))
                })) : p("", !0)]), z(a("select", {
                    name: "cosmetics",
                    multiple: "",
                    "onUpdate:modelValue": s[18] || (s[18] = P => i.userEdit.cosmetics.emotes = P)
                }, [(r(!0),
                u(_, null, B(Object.keys(i.emotes), P => {
                    var E;
                    return r(),
                    u("option", {
                        key: P,
                        value: P,
                        selected: (E = i.userEdit.cosmetics.emotes) == null ? void 0 : E.includes(P)
                    }, d(i.emotes[P]), 9, UT)
                }
                ), 128))], 512), [[Ae, i.userEdit.cosmetics.emotes]])])]), a("section", null, [i.userEdit.patreonId ? (r(),
                u("label", HT, [s[41] || (s[41] = a("span", null, "Patreon ID:", -1)), a("b", null, d(i.userEdit.patreonId), 1)])) : p("", !0), a("label", null, [s[42] || (s[42] = a("span", null, "Registered:", -1)), a("b", null, d(i.dtFormat.format(new Date(i.userEdit.createdAt))), 1)]), a("label", null, [s[43] || (s[43] = a("span", null, "Avatar:", -1)), b(g, {
                    user: i.userEdit,
                    class: "avatar"
                }, null, 8, ["user"])]), a("label", null, [s[44] || (s[44] = a("span", null, "Last Login:", -1)), a("b", null, d(i.dtFormat.format(new Date(((N = i.userEdit.Tokens[0]) == null ? void 0 : N.createdAt) || i.userEdit.updatedAt))), 1)]), i.userEdit.Tokens.length ? (r(),
                u("label", qT, [s[45] || (s[45] = a("span", null, "Last Online:", -1)), a("b", null, d(i.dtFormat.format(new Date(i.userEdit.Tokens[0].updatedAt))), 1)])) : p("", !0), i.userEdit.Tokens.length ? (r(),
                u("label", LT, [s[46] || (s[46] = a("span", null, "Last Version:", -1)), a("b", null, d(i.userEdit.Tokens[0].version), 1)])) : p("", !0), i.userEdit.Tokens.length ? (r(),
                u("label", zT, [s[47] || (s[47] = a("span", null, "Last IP:", -1)), a("b", null, d(i.userEdit.Tokens[0].ip), 1)])) : p("", !0), i.userEdit.Tokens.length ? (r(),
                u("label", GT, [s[48] || (s[48] = a("span", null, "Last User Agent:", -1)), a("small", null, d(i.userEdit.Tokens[0].agent), 1)])) : p("", !0), (U = i.stats) != null && U.games ? (r(),
                u(_, {
                    key: 5
                }, [a("label", null, [a("span", null, d(e.$t("user.stats.storyteller")), 1), a("b", null, d(i.stats.storyteller), 1)]), a("label", null, [a("span", null, d(e.$t("user.stats.player")), 1), a("b", null, d(i.stats.player), 1)]), a("label", null, [a("span", null, d(e.$t("user.stats.edition")), 1), i.stats.editions.length ? (r(),
                u("b", FT, d(i.stats.editions[0].id) + ": " + d(i.stats.editions[0].value), 1)) : (r(),
                u("b", WT, d(e.$t("user.stats.none")), 1))]), a("label", null, [a("span", null, d(e.$t("user.stats.role")), 1), i.stats.roles.length ? (r(),
                u("b", ZT, d(i.stats.roles[0].id) + ": " + d(i.stats.roles[0].value), 1)) : (r(),
                u("b", QT, d(e.$t("user.stats.none")), 1))])], 64)) : p("", !0), i.userEdit.SessionName ? (r(),
                u("label", {
                    key: 6,
                    onClick: s[19] || (s[19] = P => o.joinSession(i.userEdit.SessionName)),
                    class: y({
                        clickable: !e.session.sessionId
                    })
                }, [s[49] || (s[49] = a("span", null, "Current Session:", -1)), a("small", null, d(i.userEdit.SessionName), 1)], 2)) : p("", !0)]), a("div", XT, [a("button", {
                    type: "submit",
                    class: y(["button", {
                        disabled: !i.dirty.length,
                        primary: i.dirty.length
                    }])
                }, " Save ", 2), a("button", {
                    onClick: s[20] || (s[20] = P => o.goBack()),
                    class: "button"
                }, "Back")])], 32)) : p("", !0)], 64)) : (r(),
                u(_, {
                    key: 0
                }, [s[26] || (s[26] = a("h4", null, "User Moderation: Search", -1)), s[27] || (s[27] = v(' Enter User ID, name, email or IP to search for. "%" is a wildcard. ', -1)), a("form", {
                    id: "search",
                    onSubmit: s[1] || (s[1] = M(P => o.search(), ["prevent"]))
                }, [z(a("input", {
                    type: "text",
                    placeholder: "query",
                    "onUpdate:modelValue": s[0] || (s[0] = P => i.query = P),
                    ref: "search"
                }, null, 512), [[W, i.query]]), a("button", {
                    type: "submit",
                    class: "button",
                    disabled: !i.query
                }, " Search ", 8, CT)], 32), i.users.length ? (r(),
                u("table", ST, [s[24] || (s[24] = a("thead", null, [a("tr", null, [a("th", null, "ID"), a("th", null, "Username"), a("th", null, "Pronouns"), a("th", null, "Email"), a("th", null, "Level"), a("th", null, "Flags"), a("th", null, "Cosmetics"), a("th", null, "Registered"), a("th", null, "Last Login"), a("th", null, "Last IP"), a("th", null, "Last User Agent"), a("th", null, "Last App Version")])], -1)), a("tbody", null, [(r(!0),
                u(_, null, B(i.users, P => {
                    var E, R, Z, H, G;
                    return r(),
                    u("tr", {
                        key: P.id,
                        onClick: K => e.modal.params.userId = P.id
                    }, [a("td", null, d(P.id), 1), a("td", null, d(P.username), 1), a("td", null, d(P.pronouns), 1), a("td", null, d(P.email), 1), a("td", null, d(P.level), 1), a("td", null, d(P.flags.join(", ")), 1), a("td", null, [(r(!0),
                    u(_, null, B(P.cosmetics, (K, J) => (r(),
                    u("div", {
                        key: J
                    }, d(J) + ": " + d(K), 1))), 128))]), a("td", null, d(i.dtFormat.format(new Date(P.createdAt))), 1), a("td", null, d(P.Tokens.length && i.dtFormat.format(new Date((E = P.Tokens[0]) == null ? void 0 : E.createdAt)) || ""), 1), a("td", null, d(P.Tokens.length && ((R = P.Tokens[0]) == null ? void 0 : R.ip) || ""), 1), a("td", {
                        class: "short",
                        "data-tooltip": (Z = P.Tokens[0]) == null ? void 0 : Z.agent
                    }, d(P.Tokens.length && ((H = P.Tokens[0]) == null ? void 0 : H.agent.substring(0, 20)) || ""), 9, TT), a("td", null, d(P.Tokens.length && ((G = P.Tokens[0]) == null ? void 0 : G.version) || ""), 1)], 8, PT)
                }
                ), 128))])])) : p("", !0), i.count && i.count > i.users.length ? (r(),
                u(_, {
                    key: 1
                }, [i.offset ? (r(),
                u("button", {
                    key: 0,
                    class: "button",
                    onClick: s[2] || (s[2] = P => o.search(i.offset - i.pageSize))
                }, [b(l, {
                    icon: "arrow-circle-left"
                })])) : p("", !0), v(" Page " + d(1 + i.offset / i.pageSize) + " of " + d(Math.ceil(i.count / i.pageSize)) + " ", 1), i.offset + i.pageSize < i.count ? (r(),
                u("button", {
                    key: 1,
                    class: "button",
                    onClick: s[3] || (s[3] = P => o.search(i.offset + i.pageSize))
                }, [b(l, {
                    icon: "arrow-circle-right"
                })])) : p("", !0), s[25] || (s[25] = a("br", null, null, -1))], 64)) : p("", !0)], 64))], 2)])]
            }
            ),
            _: 1
        })) : p("", !0)]),
        _: 1
    })
}
const Sd = O(wT, [["render", KT], ["__scopeId", "data-v-44e02a3b"]])
  , YT = {
    name: "UserModal",
    components: {
        User: bl,
        Modal: se
    },
    computed: {
        ...I(["modal", "session", "players", "game"]),
        ...I("user", {
            accessToken: "accessToken",
            localUser: "user"
        }),
        ...D("user", ["isStoryteller", "isModerator"]),
        ...D("players", ["seatedPlayerMap", "storytellerMap"]),
        grimoireAccess() {
            var e, s;
            return (s = (e = this.session.users.get(this.user.id)) == null ? void 0 : e.grimoireAccess) != null ? s : 0
        }
    },
    data() {
        return {
            user: {
                loading: !0
            },
            stats: {}
        }
    },
    methods: {
        ...j(["toggleModal"]),
        async loadUser() {
            if (this.modal.name === "user" && (this.user = {
                loading: !0
            },
            this.stats = {},
            this.modal.params.userId)) {
                const {user: e, stats: s} = await We(`user/${this.modal.params.userId}`, this.accessToken);
                this.user = e != null ? e : {
                    error: !0
                },
                this.stats = s != null ? s : {}
            }
        },
        toggleGrimoireAccess() {
            this.isStoryteller && (this.grimoireAccess < 1 || this.$store.commit("user/requestGrimoire", {
                id: this.user.id,
                status: this.grimoireAccess === 3 ? 2 : 3
            }))
        },
        async toggleCoST() {
            const e = this.storytellerMap.get(this.user.id);
            if (e)
                this.$store.commit("players/removeStoryteller", e);
            else if (this.user.id === this.localUser.id)
                this.$store.commit("players/addStoryteller", this.user);
            else if (this.players.storytellerRequests.includes(this.user.id))
                this.$store.commit("players/requestStoryteller", this.user);
            else
                try {
                    await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "modals.user.button_add_st",
                        text: ["modals.user.prompt_st", [this.user.username || this.user.id]]
                    }) && this.$store.commit("players/requestStoryteller", this.user)
                } catch {} finally {
                    this.toggleModal({
                        name: "user",
                        params: {
                            userId: this.user.id
                        }
                    })
                }
        },
        async kickUser() {
            try {
                await this.$store.dispatch("openDialogue", {
                    type: "confirm",
                    title: "modals.user.button_kick_user",
                    text: ["modals.user.prompt_kick", [this.user.username || this.user.id]]
                }) && this.$store.commit("session/kickUser", this.user.id)
            } catch {} finally {
                this.toggleModal({
                    name: "user",
                    params: {
                        userId: this.user.id
                    }
                })
            }
        },
        moderate() {
            this.isModerator && this.toggleModal({
                name: "moderation",
                params: {
                    userId: this.user.id
                }
            })
        },
        closeModal() {
            this.modal.params.isFromUsers ? this.toggleModal({
                name: "users"
            }) : this.toggleModal(this.modal)
        }
    },
    beforeMount() {
        return this.loadUser()
    },
    watch: {
        "modal.params.userId"() {
            return this.loadUser()
        }
    }
}
  , JT = {
    class: "loader"
}
  , $T = {
    class: "content"
}
  , xT = {
    key: 1,
    class: "error"
}
  , eI = {
    class: "button-group"
};
function sI(e, s, t, n, i, o) {
    const l = k("User")
      , g = k("font-awesome-icon")
      , c = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "user" && e.modal.params.userId ? (r(),
        C(c, {
            key: 0,
            class: "user",
            onClose: o.closeModal
        }, {
            default: S( () => {
                var h, m, A;
                return [a("div", {
                    id: "user",
                    class: y({
                        loading: (h = i.user) == null ? void 0 : h.loading
                    })
                }, [a("div", JT, d(e.$t("modals.user.loading")), 1), a("div", $T, [a("h4", null, d(e.$t("modals.user.title")), 1), i.user.error ? (r(),
                u("div", xT, [b(g, {
                    icon: "exclamation-triangle"
                }), v(" " + d(e.$t("modals.user.error")), 1)])) : (r(),
                C(l, {
                    key: 0,
                    stats: i.stats,
                    user: i.user
                }, null, 8, ["stats", "user"])), a("div", eI, [e.session.users.has(i.user.id) ? (r(),
                u(_, {
                    key: 0
                }, [e.isStoryteller || e.isModerator ? (r(),
                u("div", {
                    key: 0,
                    class: y(["button", [e.storytellerMap.has(i.user.id) ? "secondary" : "primary"]]),
                    onClick: s[0] || (s[0] = f => o.toggleCoST())
                }, [b(g, {
                    icon: "crown"
                }), e.storytellerMap.has(i.user.id) ? (r(),
                u(_, {
                    key: 0
                }, [v(d(e.$t("modals.user.button_remove_st")), 1)], 64)) : e.players.storytellerRequests.includes(i.user.id) ? (r(),
                u(_, {
                    key: 1
                }, [v(d(e.$t("modals.user.button_cancel_st")), 1)], 64)) : (r(),
                u(_, {
                    key: 2
                }, [v(d(e.$t("modals.user.button_add_st")), 1)], 64))], 2)) : p("", !0), e.isStoryteller && o.grimoireAccess > 0 && ((m = e.session.users.get(i.user.id)) != null && m.isOnline) && !e.seatedPlayerMap.has(i.user.id) ? (r(),
                u("div", {
                    key: 1,
                    class: "button",
                    onClick: s[1] || (s[1] = f => o.toggleGrimoireAccess())
                }, [b(g, {
                    icon: "book-dead"
                }), v(" " + d(o.grimoireAccess === 3 ? e.$t("modals.user.grimoire_access_revoke") : e.$t("modals.user.grimoire_access_grant")), 1)])) : p("", !0), (e.isStoryteller || e.isModerator) && i.user.id !== e.localUser.id && ((A = e.session.users.get(i.user.id)) != null && A.isOnline) ? (r(),
                u("div", {
                    key: 2,
                    class: "button secondary",
                    onClick: s[2] || (s[2] = f => o.kickUser())
                }, [b(g, {
                    icon: "user-xmark"
                }), v(" " + d(e.$t("modals.user.button_kick_user")), 1)])) : p("", !0)], 64)) : p("", !0), e.isModerator ? (r(),
                u("div", {
                    key: 1,
                    class: "button secondary",
                    onClick: s[3] || (s[3] = f => o.moderate())
                }, [b(g, {
                    icon: "gavel"
                }), v(" " + d(e.$t("modals.user.button_mod_user")), 1)])) : p("", !0), a("div", {
                    class: "button",
                    onClick: s[4] || (s[4] = (...f) => o.closeModal && o.closeModal(...f))
                }, [b(g, {
                    icon: "times-circle"
                }), v(" " + d(e.$t("common.button_close")), 1)])])])], 2)]
            }
            ),
            _: 1
        }, 8, ["onClose"])) : p("", !0)]),
        _: 1
    })
}
const Pd = O(YT, [["render", sI], ["__scopeId", "data-v-174e0209"]])
  , Vs = JSON.parse(`[{"name":"Afghanistan","prefix":"+93","emoji":"ð¦ð«","code":"AF","timezone":"Asia/Kabul"},{"name":"Aland Islands","prefix":"+358","emoji":"ð¦ð½","code":"AX","timezone":"Europe/Mariehamn"},{"name":"Albania","prefix":"+355","emoji":"ð¦ð±","code":"AL","timezone":"Europe/Tirane"},{"name":"Algeria","prefix":"+213","emoji":"ð©ð¿","code":"DZ","timezone":"Africa/Algiers"},{"name":"AmericanSamoa","prefix":"+1684","emoji":"ð¦ð¸","code":"AS","timezone":"Pacific/Pago_Pago"},{"name":"Andorra","prefix":"+376","emoji":"ð¦ð©","code":"AD","timezone":"Europe/Andorra"},{"name":"Angola","prefix":"+244","emoji":"ð¦ð´","code":"AO","timezone":"Africa/Luanda"},{"name":"Anguilla","prefix":"+1264","emoji":"ð¦ð®","code":"AI","timezone":"America/Anguilla"},{"name":"Antarctica","prefix":"+672","emoji":"ð¦ð¶","code":"AQ","timezone":"Antarctica/McMurdo"},{"name":"Antigua and Barbuda","prefix":"+1268","emoji":"ð¦ð¬","code":"AG","timezone":"America/Antigua"},{"name":"Argentina","prefix":"+54","emoji":"ð¦ð·","code":"AR","timezone":"America/Argentina/Buenos_Aires"},{"name":"Armenia","prefix":"+374","emoji":"ð¦ð²","code":"AM","timezone":"Asia/Yerevan"},{"name":"Aruba","prefix":"+297","emoji":"ð¦ð¼","code":"AW","timezone":"America/Aruba"},{"name":"Australia","prefix":"+61","emoji":"ð¦ðº","code":"AU","timezone":"Australia/Sydney"},{"name":"Austria","prefix":"+43","emoji":"ð¦ð¹","code":"AT","timezone":"Europe/Vienna"},{"name":"Azerbaijan","prefix":"+994","emoji":"ð¦ð¿","code":"AZ","timezone":"Asia/Baku"},{"name":"Bahamas","prefix":"+1242","emoji":"ð§ð¸","code":"BS","timezone":"America/Nassau"},{"name":"Bahrain","prefix":"+973","emoji":"ð§ð­","code":"BH","timezone":"Asia/Bahrain"},{"name":"Bangladesh","prefix":"+880","emoji":"ð§ð©","code":"BD","timezone":"Asia/Dhaka"},{"name":"Barbados","prefix":"+1246","emoji":"ð§ð§","code":"BB","timezone":"America/Barbados"},{"name":"Belarus","prefix":"+375","emoji":"ð§ð¾","code":"BY","timezone":"Europe/Minsk"},{"name":"Belgium","prefix":"+32","emoji":"ð§ðª","code":"BE","timezone":"Europe/Brussels"},{"name":"Belize","prefix":"+501","emoji":"ð§ð¿","code":"BZ","timezone":"America/Belize"},{"name":"Benin","prefix":"+229","emoji":"ð§ð¯","code":"BJ","timezone":"Africa/Porto-Novo"},{"name":"Bermuda","prefix":"+1441","emoji":"ð§ð²","code":"BM","timezone":"Atlantic/Bermuda"},{"name":"Bhutan","prefix":"+975","emoji":"ð§ð¹","code":"BT","timezone":"Asia/Thimphu"},{"name":"Bolivia, Plurinational State of","prefix":"+591","emoji":"ð§ð´","code":"BO","timezone":"America/La_Paz"},{"name":"Bosnia and Herzegovina","prefix":"+387","emoji":"ð§ð¦","code":"BA","timezone":"Europe/Sarajevo"},{"name":"Botswana","prefix":"+267","emoji":"ð§ð¼","code":"BW","timezone":"Africa/Gaborone"},{"name":"Brazil","prefix":"+55","emoji":"ð§ð·","code":"BR","timezone":"America/Sao_Paulo"},{"name":"British Indian Ocean Territory","prefix":"+246","emoji":"ð®ð´","code":"IO","timezone":"Indian/Chagos"},{"name":"Brunei Darussalam","prefix":"+673","emoji":"ð§ð³","code":"BN","timezone":"Asia/Brunei"},{"name":"Bulgaria","prefix":"+359","emoji":"ð§ð¬","code":"BG","timezone":"Europe/Sofia"},{"name":"Burkina Faso","prefix":"+226","emoji":"ð§ð«","code":"BF","timezone":"Africa/Ouagadougou"},{"name":"Burundi","prefix":"+257","emoji":"ð§ð®","code":"BI","timezone":"Africa/Bujumbura"},{"name":"Cambodia","prefix":"+855","emoji":"ð°ð­","code":"KH","timezone":"Asia/Phnom_Penh"},{"name":"Cameroon","prefix":"+237","emoji":"ð¨ð²","code":"CM","timezone":"Africa/Douala"},{"name":"Canada","prefix":"+1","emoji":"ð¨ð¦","code":"CA","timezone":"America/Toronto"},{"name":"Cape Verde","prefix":"+238","emoji":"ð¨ð»","code":"CV","timezone":"Atlantic/Cape_Verde"},{"name":"Cayman Islands","prefix":"+345","emoji":"ð°ð¾","code":"KY","timezone":"America/Cayman"},{"name":"Central African Republic","prefix":"+236","emoji":"ð¨ð«","code":"CF","timezone":"Africa/Bangui"},{"name":"Chad","prefix":"+235","emoji":"ð¹ð©","code":"TD","timezone":"Africa/Ndjamena"},{"name":"Chile","prefix":"+56","emoji":"ð¨ð±","code":"CL","timezone":"America/Santiago"},{"name":"China","prefix":"+86","emoji":"ð¨ð³","code":"CN","timezone":"Asia/Shanghai"},{"name":"Christmas Island","prefix":"+61","emoji":"ð¨ð½","code":"CX","timezone":"Indian/Christmas"},{"name":"Cocos (Keeling) Islands","prefix":"+61","emoji":"ð¨ð¨","code":"CC","timezone":"Indian/Cocos"},{"name":"Colombia","prefix":"+57","emoji":"ð¨ð´","code":"CO","timezone":"America/Bogota"},{"name":"Comoros","prefix":"+269","emoji":"ð°ð²","code":"KM","timezone":"Indian/Comoro"},{"name":"Congo","prefix":"+242","emoji":"ð¨ð¬","code":"CG","timezone":"Africa/Brazzaville"},{"name":"Congo, The Democratic Republic of the Congo","prefix":"+243","emoji":"ð¨ð©","code":"CD","timezone":"Africa/Kinshasa"},{"name":"Cook Islands","prefix":"+682","emoji":"ð¨ð°","code":"CK","timezone":"Pacific/Rarotonga"},{"name":"Costa Rica","prefix":"+506","emoji":"ð¨ð·","code":"CR","timezone":"America/Costa_Rica"},{"name":"Cote d'Ivoire","prefix":"+225","emoji":"ð¨ð®","code":"CI","timezone":"Africa/Abidjan"},{"name":"Croatia","prefix":"+385","emoji":"ð­ð·","code":"HR","timezone":"Europe/Zagreb"},{"name":"Cuba","prefix":"+53","emoji":"ð¨ðº","code":"CU","timezone":"America/Havana"},{"name":"Cyprus","prefix":"+357","emoji":"ð¨ð¾","code":"CY","timezone":"Asia/Nicosia"},{"name":"Czech Republic","prefix":"+420","emoji":"ð¨ð¿","code":"CZ","timezone":"Europe/Prague"},{"name":"Denmark","prefix":"+45","emoji":"ð©ð°","code":"DK","timezone":"Europe/Copenhagen"},{"name":"Djibouti","prefix":"+253","emoji":"ð©ð¯","code":"DJ","timezone":"Africa/Djibouti"},{"name":"Dominica","prefix":"+1767","emoji":"ð©ð²","code":"DM","timezone":"America/Dominica"},{"name":"Dominican Republic","prefix":"+1849","emoji":"ð©ð´","code":"DO","timezone":"America/Santo_Domingo"},{"name":"Ecuador","prefix":"+593","emoji":"ðªð¨","code":"EC","timezone":"America/Guayaquil"},{"name":"Egypt","prefix":"+20","emoji":"ðªð¬","code":"EG","timezone":"Africa/Cairo"},{"name":"El Salvador","prefix":"+503","emoji":"ð¸ð»","code":"SV","timezone":"America/El_Salvador"},{"name":"Equatorial Guinea","prefix":"+240","emoji":"ð¬ð¶","code":"GQ","timezone":"Africa/Malabo"},{"name":"Eritrea","prefix":"+291","emoji":"ðªð·","code":"ER","timezone":"Africa/Asmara"},{"name":"Estonia","prefix":"+372","emoji":"ðªðª","code":"EE","timezone":"Europe/Tallinn"},{"name":"Ethiopia","prefix":"+251","emoji":"ðªð¹","code":"ET","timezone":"Africa/Addis_Ababa"},{"name":"Falkland Islands (Malvinas)","prefix":"+500","emoji":"ð«ð°","code":"FK","timezone":"Atlantic/Stanley"},{"name":"Faroe Islands","prefix":"+298","emoji":"ð«ð´","code":"FO","timezone":"Atlantic/Faroe"},{"name":"Fiji","prefix":"+679","emoji":"ð«ð¯","code":"FJ","timezone":"Pacific/Fiji"},{"name":"Finland","prefix":"+358","emoji":"ð«ð®","code":"FI","timezone":"Europe/Helsinki"},{"name":"France","prefix":"+33","emoji":"ð«ð·","code":"FR","timezone":"Europe/Paris"},{"name":"French Guiana","prefix":"+594","emoji":"ð¬ð«","code":"GF","timezone":"America/Cayenne"},{"name":"French Polynesia","prefix":"+689","emoji":"ðµð«","code":"PF","timezone":"Pacific/Tahiti"},{"name":"Gabon","prefix":"+241","emoji":"ð¬ð¦","code":"GA","timezone":"Africa/Libreville"},{"name":"Gambia","prefix":"+220","emoji":"ð¬ð²","code":"GM","timezone":"Africa/Banjul"},{"name":"Georgia","prefix":"+995","emoji":"ð¬ðª","code":"GE","timezone":"Asia/Tbilisi"},{"name":"Germany","prefix":"+49","emoji":"ð©ðª","code":"DE","timezone":"Europe/Berlin"},{"name":"Ghana","prefix":"+233","emoji":"ð¬ð­","code":"GH","timezone":"Africa/Accra"},{"name":"Gibraltar","prefix":"+350","emoji":"ð¬ð®","code":"GI","timezone":"Europe/Gibraltar"},{"name":"Greece","prefix":"+30","emoji":"ð¬ð·","code":"GR","timezone":"Europe/Athens"},{"name":"Greenland","prefix":"+299","emoji":"ð¬ð±","code":"GL","timezone":"America/Godthab"},{"name":"Grenada","prefix":"+1473","emoji":"ð¬ð©","code":"GD","timezone":"America/Grenada"},{"name":"Guadeloupe","prefix":"+590","emoji":"ð¬ðµ","code":"GP","timezone":"America/Guadeloupe"},{"name":"Guam","prefix":"+1671","emoji":"ð¬ðº","code":"GU","timezone":"Pacific/Guam"},{"name":"Guatemala","prefix":"+502","emoji":"ð¬ð¹","code":"GT","timezone":"America/Guatemala"},{"name":"Guernsey","prefix":"+44","emoji":"ð¬ð¬","code":"GG","timezone":"Europe/Guernsey"},{"name":"Guinea","prefix":"+224","emoji":"ð¬ð³","code":"GN","timezone":"Africa/Conakry"},{"name":"Guinea-Bissau","prefix":"+245","emoji":"ð¬ð¼","code":"GW","timezone":"Africa/Bissau"},{"name":"Guyana","prefix":"+592","emoji":"ð¬ð¾","code":"GY","timezone":"America/Guyana"},{"name":"Haiti","prefix":"+509","emoji":"ð­ð¹","code":"HT","timezone":"America/Port-au-Prince"},{"name":"Holy See (Vatican City State)","prefix":"+379","emoji":"ð»ð¦","code":"VA","timezone":"Europe/Vatican"},{"name":"Honduras","prefix":"+504","emoji":"ð­ð³","code":"HN","timezone":"America/Tegucigalpa"},{"name":"Hong Kong","prefix":"+852","emoji":"ð­ð°","code":"HK","timezone":"Asia/Hong_Kong"},{"name":"Hungary","prefix":"+36","emoji":"ð­ðº","code":"HU","timezone":"Europe/Budapest"},{"name":"Iceland","prefix":"+354","emoji":"ð®ð¸","code":"IS","timezone":"Atlantic/Reykjavik"},{"name":"India","prefix":"+91","emoji":"ð®ð³","code":"IN","timezone":"Asia/Kolkata"},{"name":"Indonesia","prefix":"+62","emoji":"ð®ð©","code":"ID","timezone":"Asia/Jakarta"},{"name":"Iran, Islamic Republic of Persian Gulf","prefix":"+98","emoji":"ð®ð·","code":"IR","timezone":"Asia/Tehran"},{"name":"Iraq","prefix":"+964","emoji":"ð®ð·","code":"IQ","timezone":"Asia/Baghdad"},{"name":"Ireland","prefix":"+353","emoji":"ð®ðª","code":"IE","timezone":"Europe/Dublin"},{"name":"Isle of Man","prefix":"+44","emoji":"ð®ð²","code":"IM","timezone":"Europe/Isle_of_Man"},{"name":"Israel","prefix":"+972","emoji":"ð®ð±","code":"IL","timezone":"Asia/Jerusalem"},{"name":"Italy","prefix":"+39","emoji":"ð®ð¹","code":"IT","timezone":"Europe/Rome"},{"name":"Jamaica","prefix":"+1876","emoji":"ð¯ð²","code":"JM","timezone":"America/Jamaica"},{"name":"Japan","prefix":"+81","emoji":"ð¯ðµ","code":"JP","timezone":"Asia/Tokyo"},{"name":"Jersey","prefix":"+44","emoji":"ð¯ðª","code":"JE","timezone":"Europe/Jersey"},{"name":"Jordan","prefix":"+962","emoji":"ð¯ð´","code":"JO","timezone":"Asia/Amman"},{"name":"Kazakhstan","prefix":"+77","emoji":"ð°ð¿","code":"KZ","timezone":"Asia/Almaty"},{"name":"Kenya","prefix":"+254","emoji":"ð°ðª","code":"KE","timezone":"Africa/Nairobi"},{"name":"Kiribati","prefix":"+686","emoji":"ð°ð®","code":"KI","timezone":"Pacific/Tarawa"},{"name":"Korea, Democratic People's Republic of Korea","prefix":"+850","emoji":"ð°ðµ","code":"KP","timezone":"Asia/Pyongyang"},{"name":"Korea, Republic of South Korea","prefix":"+82","emoji":"ð°ð·","code":"KR","timezone":"Asia/Seoul"},{"name":"Kuwait","prefix":"+965","emoji":"ð°ð¼","code":"KW","timezone":"Asia/Kuwait"},{"name":"Kyrgyzstan","prefix":"+996","emoji":"ð°ð¬","code":"KG","timezone":"Asia/Bishkek"},{"name":"Laos","prefix":"+856","emoji":"ð±ð¦","code":"LA","timezone":"Asia/Vientiane"},{"name":"Latvia","prefix":"+371","emoji":"ð±ð»","code":"LV","timezone":"Europe/Riga"},{"name":"Lebanon","prefix":"+961","emoji":"ð±ð§","code":"LB","timezone":"Asia/Beirut"},{"name":"Lesotho","prefix":"+266","emoji":"ð±ð¸","code":"LS","timezone":"Africa/Maseru"},{"name":"Liberia","prefix":"+231","emoji":"ð±ð·","code":"LR","timezone":"Africa/Monrovia"},{"name":"Libyan Arab Jamahiriya","prefix":"+218","emoji":"ð±ð¾","code":"LY","timezone":"Africa/Tripoli"},{"name":"Liechtenstein","prefix":"+423","emoji":"ð±ð®","code":"LI","timezone":"Europe/Vaduz"},{"name":"Lithuania","prefix":"+370","emoji":"ð±ð¹","code":"LT","timezone":"Europe/Vilnius"},{"name":"Luxembourg","prefix":"+352","emoji":"ð±ðº","code":"LU","timezone":"Europe/Luxembourg"},{"name":"Macao","prefix":"+853","emoji":"ð²ð´","code":"MO","timezone":"Asia/Macau"},{"name":"Macedonia","prefix":"+389","emoji":"ð²ð°","code":"MK","timezone":"Europe/Skopje"},{"name":"Madagascar","prefix":"+261","emoji":"ð²ð¬","code":"MG","timezone":"Indian/Antananarivo"},{"name":"Malawi","prefix":"+265","emoji":"ð²ð¼","code":"MW","timezone":"Africa/Blantyre"},{"name":"Malaysia","prefix":"+60","emoji":"ð²ð¾","code":"MY","timezone":"Asia/Kuala_Lumpur"},{"name":"Maldives","prefix":"+960","emoji":"ð²ð»","code":"MV","timezone":"Indian/Maldives"},{"name":"Mali","prefix":"+223","emoji":"ð²ð±","code":"ML","timezone":"Africa/Bamako"},{"name":"Malta","prefix":"+356","emoji":"ð²ð¹","code":"MT","timezone":"Europe/Malta"},{"name":"Marshall Islands","prefix":"+692","emoji":"ð²ð­","code":"MH","timezone":"Pacific/Majuro"},{"name":"Martinique","prefix":"+596","emoji":"ð²ð¶","code":"MQ","timezone":"America/Martinique"},{"name":"Mauritania","prefix":"+222","emoji":"ð²ð·","code":"MR","timezone":"Africa/Nouakchott"},{"name":"Mauritius","prefix":"+230","emoji":"ð²ðº","code":"MU","timezone":"Indian/Mauritius"},{"name":"Mayotte","prefix":"+262","emoji":"ð¾ð¹","code":"YT","timezone":"Indian/Mayotte"},{"name":"Mexico","prefix":"+52","emoji":"ð²ð½","code":"MX","timezone":"America/Mexico_City"},{"name":"Micronesia, Federated States of Micronesia","prefix":"+691","emoji":"ð«ð²","code":"FM","timezone":"Pacific/Chuuk"},{"name":"Moldova","prefix":"+373","emoji":"ð²ð©","code":"MD","timezone":"Europe/Chisinau"},{"name":"Monaco","prefix":"+377","emoji":"ð²ð¨","code":"MC","timezone":"Europe/Monaco"},{"name":"Mongolia","prefix":"+976","emoji":"ð²ð³","code":"MN","timezone":"Asia/Ulaanbaatar"},{"name":"Montenegro","prefix":"+382","emoji":"ð²ðª","code":"ME","timezone":"Europe/Podgorica"},{"name":"Montserrat","prefix":"+1664","emoji":"ð²ð¸","code":"MS","timezone":"America/Montserrat"},{"name":"Morocco","prefix":"+212","emoji":"ð²ð¦","code":"MA","timezone":"Africa/Casablanca"},{"name":"Mozambique","prefix":"+258","emoji":"ð²ð¿","code":"MZ","timezone":"Africa/Maputo"},{"name":"Myanmar","prefix":"+95","emoji":"ð²ð²","code":"MM","timezone":"Asia/Yangon"},{"name":"Namibia","emoji":"ð³ð¦","prefix":"+264","code":"NA","timezone":"Africa/Windhoek"},{"name":"Nauru","prefix":"+674","emoji":"ð³ð·","code":"NR","timezone":"Pacific/Nauru"},{"name":"Nepal","prefix":"+977","emoji":"ð³ðµ","code":"NP","timezone":"Asia/Kathmandu"},{"name":"Netherlands","prefix":"+31","emoji":"ð³ð±","code":"NL","timezone":"Europe/Amsterdam"},{"name":"Netherlands Antilles","prefix":"+599","emoji":"ð§ð¶","code":"AN","timezone":"America/Curacao"},{"name":"New Caledonia","prefix":"+687","emoji":"ð³ð¨","code":"NC","timezone":"Pacific/Noumea"},{"name":"New Zealand","prefix":"+64","emoji":"ð³ð¿","code":"NZ","timezone":"Pacific/Auckland"},{"name":"Nicaragua","prefix":"+505","emoji":"ð³ð®","code":"NI","timezone":"America/Managua"},{"name":"Niger","prefix":"+227","emoji":"ð³ðª","code":"NE","timezone":"Africa/Niamey"},{"name":"Nigeria","prefix":"+234","emoji":"ð³ð¬","code":"NG","timezone":"Africa/Lagos"},{"name":"Niue","prefix":"+683","emoji":"ð³ðº","code":"NU","timezone":"Pacific/Niue"},{"name":"Norfolk Island","prefix":"+672","emoji":"ð³ð«","code":"NF","timezone":"Pacific/Norfolk"},{"name":"Northern Mariana Islands","prefix":"+1670","emoji":"ð²ðµ","code":"MP","timezone":"Pacific/Saipan"},{"name":"Norway","prefix":"+47","emoji":"ð³ð´","code":"NO","timezone":"Europe/Oslo"},{"name":"Oman","prefix":"+968","emoji":"ð´ð²","code":"OM","timezone":"Asia/Muscat"},{"name":"Pakistan","prefix":"+92","emoji":"ðµð°","code":"PK","timezone":"Asia/Karachi"},{"name":"Palau","prefix":"+680","emoji":"ðµð¼","code":"PW","timezone":"Pacific/Palau"},{"name":"Palestinian Territory, Occupied","prefix":"+970","emoji":"ðµð¸","code":"PS","timezone":"Asia/Hebron"},{"name":"Panama","prefix":"+507","emoji":"ðµð¦","code":"PA","timezone":"America/Panama"},{"name":"Papua New Guinea","prefix":"+675","emoji":"ðµð¬","code":"PG","timezone":"Pacific/Port_Moresby"},{"name":"Paraguay","prefix":"+595","emoji":"ðµð¾","code":"PY","timezone":"America/Asuncion"},{"name":"Peru","prefix":"+51","emoji":"ðµðª","code":"PE","timezone":"America/Lima"},{"name":"Philippines","prefix":"+63","emoji":"ðµð­","code":"PH","timezone":"Asia/Manila"},{"name":"Pitcairn","prefix":"+872","emoji":"ðµð³","code":"PN","timezone":"Pacific/Pitcairn"},{"name":"Poland","prefix":"+48","emoji":"ðµð±","code":"PL","timezone":"Europe/Warsaw"},{"name":"Portugal","prefix":"+351","emoji":"ðµð¹","code":"PT","timezone":"Europe/Lisbon"},{"name":"Puerto Rico","prefix":"+1939","emoji":"ðµð·","code":"PR","timezone":"America/Puerto_Rico"},{"name":"Qatar","prefix":"+974","emoji":"ð¶ð¦","code":"QA","timezone":"Asia/Qatar"},{"name":"Romania","prefix":"+40","emoji":"ð·ð´","code":"RO","timezone":"Europe/Bucharest"},{"name":"Russia","prefix":"+7","emoji":"ð·ðº","code":"RU","timezone":"Europe/Kaliningrad"},{"name":"Rwanda","prefix":"+250","emoji":"ð·ð¼","code":"RW","timezone":"Africa/Kigali"},{"name":"Reunion","prefix":"+262","emoji":"ð·ðª","code":"RE","timezone":"Indian/Reunion"},{"name":"Saint Barthelemy","prefix":"+590","emoji":"ð§ð±","code":"BL","timezone":"America/St_Barthelemy"},{"name":"Saint Helena, Ascension and Tristan Da Cunha","prefix":"+290","emoji":"ð¸ð­","code":"SH","timezone":"Atlantic/St_Helena"},{"name":"Saint Kitts and Nevis","prefix":"+1869","emoji":"ð°ð³","code":"KN","timezone":"America/St_Kitts"},{"name":"Saint Lucia","prefix":"+1758","emoji":"ð±ð¨","code":"LC","timezone":"America/St_Lucia"},{"name":"Saint Martin","prefix":"+590","emoji":"ð²ð«","code":"MF","timezone":"America/Marigot"},{"name":"Saint Pierre and Miquelon","prefix":"+508","emoji":"ðµð²","code":"PM","timezone":"America/Miquelon"},{"name":"Saint Vincent and the Grenadines","prefix":"+1784","emoji":"ð»ð¨","code":"VC","timezone":"America/St_Vincent"},{"name":"Samoa","prefix":"+685","emoji":"ð¼ð¸","code":"WS","timezone":"Pacific/Apia"},{"name":"San Marino","prefix":"+378","emoji":"ð¸ð²","code":"SM","timezone":"Europe/San_Marino"},{"name":"Sao Tome and Principe","prefix":"+239","emoji":"ð¸ð¹","code":"ST","timezone":"Africa/Sao_Tome"},{"name":"Saudi Arabia","prefix":"+966","emoji":"ð¸ð¦","code":"SA","timezone":"Asia/Riyadh"},{"name":"Senegal","prefix":"+221","emoji":"ð¸ð³","code":"SN","timezone":"Africa/Dakar"},{"name":"Serbia","prefix":"+381","emoji":"ð·ð¸","code":"RS","timezone":"Europe/Belgrade"},{"name":"Seychelles","prefix":"+248","emoji":"ð¸ð¨","code":"SC","timezone":"Indian/Mahe"},{"name":"Sierra Leone","prefix":"+232","emoji":"ð¸ð±","code":"SL","timezone":"Africa/Freetown"},{"name":"Singapore","prefix":"+65","emoji":"ð¸ð¬","code":"SG","timezone":"Asia/Singapore"},{"name":"Slovakia","prefix":"+421","emoji":"ð¸ð°","code":"SK","timezone":"Europe/Bratislava"},{"name":"Slovenia","prefix":"+386","emoji":"ð¸ð®","code":"SI","timezone":"Europe/Ljubljana"},{"name":"Solomon Islands","prefix":"+677","emoji":"ð¸ð§","code":"SB","timezone":"Pacific/Guadalcanal"},{"name":"Somalia","prefix":"+252","emoji":"ð¸ð´","code":"SO","timezone":"Africa/Mogadishu"},{"name":"South Africa","prefix":"+27","emoji":"ð¿ð¦","code":"ZA","timezone":"Africa/Johannesburg"},{"name":"South Sudan","prefix":"+211","emoji":"ð¸ð¸","code":"SS","timezone":"Africa/Juba"},{"name":"South Georgia and the South Sandwich Islands","prefix":"+500","emoji":"ð¬ð¸","code":"GS","timezone":"Atlantic/South_Georgia"},{"name":"Spain","prefix":"+34","emoji":"ðªð¸","code":"ES","timezone":"Europe/Madrid"},{"name":"Sri Lanka","prefix":"+94","emoji":"ð±ð°","code":"LK","timezone":"Asia/Colombo"},{"name":"Sudan","prefix":"+249","emoji":"ð¸ð©","code":"SD","timezone":"Africa/Khartoum"},{"name":"Suriname","prefix":"+597","emoji":"ð¸ð·","code":"SR","timezone":"America/Paramaribo"},{"name":"Svalbard and Jan Mayen","prefix":"+47","emoji":"ð¸ð¯","code":"SJ","timezone":"Arctic/Longyearbyen"},{"name":"Swaziland","prefix":"+268","emoji":"ð¸ð¿","code":"SZ","timezone":"Africa/Mbabane"},{"name":"Sweden","prefix":"+46","emoji":"ð¸ðª","code":"SE","timezone":"Europe/Stockholm"},{"name":"Switzerland","prefix":"+41","emoji":"ð¨ð­","code":"CH","timezone":"Europe/Zurich"},{"name":"Syrian Arab Republic","prefix":"+963","emoji":"ð¸ð¾","code":"SY","timezone":"Asia/Damascus"},{"name":"Taiwan","prefix":"+886","emoji":"ð¹ð¼","code":"TW","timezone":"Asia/Taipei"},{"name":"Tajikistan","prefix":"+992","emoji":"ð¹ð¯","code":"TJ","timezone":"Asia/Dushanbe"},{"name":"Tanzania, United Republic of Tanzania","prefix":"+255","emoji":"ð¹ð¿","code":"TZ","timezone":"Africa/Dar_es_Salaam"},{"name":"Thailand","prefix":"+66","emoji":"ð¹ð­","code":"TH","timezone":"Asia/Bangkok"},{"name":"Timor-Leste","prefix":"+670","emoji":"ð¹ð±","code":"TL","timezone":"Asia/Dili"},{"name":"Togo","prefix":"+228","emoji":"ð¹ð¬","code":"TG","timezone":"Africa/Lome"},{"name":"Tokelau","prefix":"+690","emoji":"ð¹ð°","code":"TK","timezone":"Pacific/Fakaofo"},{"name":"Tonga","prefix":"+676","emoji":"ð¹ð´","code":"TO","timezone":"Pacific/Tongatapu"},{"name":"Trinidad and Tobago","prefix":"+1868","emoji":"ð¹ð¹","code":"TT","timezone":"America/Port_of_Spain"},{"name":"Tunisia","prefix":"+216","emoji":"ð¹ð³","code":"TN","timezone":"Africa/Tunis"},{"name":"Turkey","prefix":"+90","emoji":"ð¹ð·","code":"TR","timezone":"Europe/Istanbul"},{"name":"Turkmenistan","prefix":"+993","emoji":"ð¹ð²","code":"TM","timezone":"Asia/Ashgabat"},{"name":"Turks and Caicos Islands","prefix":"+1649","emoji":"ð¹ð¨","code":"TC","timezone":"America/Grand_Turk"},{"name":"Tuvalu","prefix":"+688","emoji":"ð¹ð»","code":"TV","timezone":"Pacific/Funafuti"},{"name":"Uganda","prefix":"+256","emoji":"ðºð¬","code":"UG","timezone":"Africa/Kampala"},{"name":"Ukraine","prefix":"+380","emoji":"ðºð¦","code":"UA","timezone":"Europe/Kiev"},{"name":"United Arab Emirates","prefix":"+971","emoji":"ð¦ðª","code":"AE","timezone":"Asia/Dubai"},{"name":"United Kingdom","prefix":"+44","emoji":"ð¬ð§","code":"GB","timezone":"Europe/London"},{"name":"United States","prefix":"+1","emoji":"ðºð¸","code":"US","timezone":"America/New_York"},{"name":"Uruguay","prefix":"+598","emoji":"ðºð¾","code":"UY","timezone":"America/Montevideo"},{"name":"Uzbekistan","prefix":"+998","emoji":"ðºð¿","code":"UZ","timezone":"Asia/Samarkand"},{"name":"Vanuatu","prefix":"+678","emoji":"ð»ðº","code":"VU","timezone":"Pacific/Efate"},{"name":"Venezuela, Bolivarian Republic of Venezuela","prefix":"+58","emoji":"ð»ðª","code":"VE","timezone":"America/Caracas"},{"name":"Vietnam","prefix":"+84","emoji":"ð»ð³","code":"VN","timezone":"Asia/Ho_Chi_Minh"},{"name":"Virgin Islands, British","prefix":"+1284","emoji":"ð»ð¬","code":"VG","timezone":"America/Tortola"},{"name":"Virgin Islands, U.S.","prefix":"+1340","emoji":"ð»ð®","code":"VI","timezone":"America/St_Thomas"},{"name":"Wallis and Futuna","prefix":"+681","emoji":"ð¼ð«","code":"WF","timezone":"Pacific/Wallis"},{"name":"Yemen","prefix":"+967","emoji":"ð¾ðª","code":"YE","timezone":"Asia/Aden"},{"name":"Zambia","prefix":"+260","emoji":"ð¿ð²","code":"ZM","timezone":"Africa/Lusaka"},{"name":"Zimbabwe","prefix":"+263","emoji":"ð¿ð¼","code":"ZW","timezone":"Africa/Harare"}]`)
  , tI = {
    components: {
        Modal: se
    },
    computed: {
        ...I(["modal"]),
        ...I("user", ["accessToken", "user"]),
        isVerified() {
            var e;
            return this.user ? (e = this.user.flags) == null ? void 0 : e.includes("verified-phone") : !1
        }
    },
    data() {
        var t, n, i;
        let e = ""
          , s = ((t = Vs.find(o => o.timezone === Intl.DateTimeFormat().resolvedOptions().timeZone)) == null ? void 0 : t.code) || "+1";
        try {
            s = (n = localStorage.getItem("phone-prefix")) != null ? n : s,
            e = (i = localStorage.getItem("phone-number")) != null ? i : e
        } catch {}
        return {
            prefix: s,
            phone: e,
            code: "",
            isSent: !!localStorage.getItem("phone-number"),
            loading: !1,
            error: null,
            phoneCodes: Vs
        }
    },
    methods: {
        ...j(["toggleModal"]),
        cleanPhone() {
            this.phone = this.phone.replace(/[^\d]/gi, "").replace(/^0+/gi, "")
        },
        reset() {
            localStorage.removeItem("phone-prefix"),
            localStorage.removeItem("phone-number"),
            this.phone = "",
            this.isSent = !1,
            this.code = ""
        },
        async submit() {
            var t, n;
            this.cleanPhone(),
            this.loading = !0,
            this.error = null;
            const e = (n = (t = Vs.find(i => i.code === this.prefix)) == null ? void 0 : t.prefix) != null ? n : "+1"
              , s = await re("verify", {
                type: "phone",
                prefix: e,
                phone: this.phone,
                code: this.code
            }, this.accessToken);
            this.loading = !1,
            s.success ? this.isSent ? (localStorage.removeItem("phone-prefix"),
            localStorage.removeItem("phone-number"),
            this.isVerified || this.$store.commit("user/updateUser", {
                flags: [...this.user.flags, "verified-phone"]
            })) : (localStorage.setItem("phone-prefix", this.prefix),
            localStorage.setItem("phone-number", this.phone),
            this.isSent = !0) : (this.error = s.status,
            this.error === "restart" || this.error === 404 ? this.reset() : this.code = "")
        },
        close() {
            document.getElementById("app").focus(),
            this.toggleModal({
                name: "verification"
            })
        }
    }
}
  , iI = {
    key: 0
}
  , oI = {
    key: 1
}
  , nI = {
    key: 2
}
  , aI = {
    key: 3,
    class: "error"
}
  , rI = ["title"]
  , lI = ["value"]
  , cI = ["disabled"]
  , dI = {
    key: 0
}
  , uI = {
    class: "button-group"
}
  , gI = ["disabled"]
  , mI = ["disabled"]
  , hI = {
    key: 5,
    class: "button-group"
};
function pI(e, s, t, n, i, o) {
    const l = k("i18n-t")
      , g = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "verification" ? (r(),
        C(g, {
            key: 0,
            class: y(["verification", {
                loading: i.loading
            }]),
            onClose: s[8] || (s[8] = c => o.close())
        }, {
            header: S( () => [v(d(e.$t("modals.verification.title")), 1)]),
            default: S( () => [s[12] || (s[12] = a("div", {
                class: "loader"
            }, null, -1)), o.isVerified ? (r(),
            u("p", iI, d(e.$t("modals.verification.success")), 1)) : i.isSent ? (r(),
            u("p", nI, d(e.$t("modals.verification.code_sent")), 1)) : (r(),
            u("p", oI, [a("b", null, d(e.$t("modals.verification.text_title")), 1), s[9] || (s[9] = a("br", null, null, -1)), b(l, {
                keypath: "modals.verification.text_body",
                scope: "global"
            }, {
                default: S( () => [a("b", null, d(e.$t("modals.verification.text_body2")), 1)]),
                _: 1
            }), s[10] || (s[10] = a("br", null, null, -1)), a("b", null, d(e.$t("modals.verification.text_footer")), 1)])), i.error ? (r(),
            u("div", aI, [i.error === 403 && i.isSent ? (r(),
            C(l, {
                key: 0,
                keypath: "modals.verification.error_403",
                scope: "global"
            }, {
                default: S( () => [...s[11] || (s[11] = [a("a", {
                    href: "mailto:support@botc.app",
                    target: "_blank"
                }, "support@botc.app", -1)])]),
                _: 1
            })) : i.error === "cooldown" ? (r(),
            u(_, {
                key: 1
            }, [v(d(e.$t("modals.verification.error_cooldown", [10])), 1)], 64)) : i.error === 429 && !i.isSent ? (r(),
            u(_, {
                key: 2
            }, [v(d(e.$t("pages.verification.error_429", [60])), 1)], 64)) : i.error === 429 && i.isSent ? (r(),
            u(_, {
                key: 3
            }, [v(d(e.$t("pages.verification.error_429", [10])), 1)], 64)) : i.error === 402 ? (r(),
            u(_, {
                key: 4
            }, [v(d(e.$t("modals.verification.error_402")), 1)], 64)) : i.error === 404 ? (r(),
            u(_, {
                key: 5
            }, [v(d(e.$t("modals.verification.error_404")), 1)], 64)) : i.error === "restart" ? (r(),
            u(_, {
                key: 6
            }, [v(d(e.$t("modals.verification.error_restart")), 1)], 64)) : i.error === "pending" && i.isSent ? (r(),
            u(_, {
                key: 7
            }, [v(d(e.$t("modals.verification.error_pending")), 1)], 64)) : i.error === "assigned" || String(i.error).match(/^Value is already assigned/i) ? (r(),
            u(_, {
                key: 8
            }, [v(d(e.$t("modals.verification.error_assigned")), 1)], 64)) : (r(),
            u(_, {
                key: 9
            }, [v(d(e.$t("modals.verification.error_other", [i.error])), 1)], 64))])) : p("", !0), o.isVerified ? (r(),
            u("div", hI, [a("button", {
                type: "button",
                class: "button primary",
                onClick: s[7] || (s[7] = c => o.close())
            }, d(e.$t("common.button_close")), 1)])) : (r(),
            u("form", {
                key: 4,
                onSubmit: s[6] || (s[6] = M(c => o.submit(), ["prevent"]))
            }, [a("label", null, [a("b", null, d(e.$t("modals.verification.phone")) + ":", 1), z(a("select", {
                "onUpdate:modelValue": s[0] || (s[0] = c => i.prefix = c),
                required: "",
                title: e.$t("modals.verification.country_code")
            }, [(r(!0),
            u(_, null, B(i.phoneCodes, c => (r(),
            u("option", {
                key: c.code,
                value: c.code
            }, d(c.name) + " (" + d(c.prefix) + ") ", 9, lI))), 128))], 8, rI), [[Ae, i.prefix]]), z(a("input", {
                type: "tel",
                "onUpdate:modelValue": s[1] || (s[1] = c => i.phone = c),
                pattern: "\\d{1,14}",
                onChange: s[2] || (s[2] = (...c) => o.cleanPhone && o.cleanPhone(...c)),
                placeholder: "123 456 7890",
                required: "",
                disabled: i.isSent || i.loading
            }, null, 40, cI), [[W, i.phone]])]), i.isSent ? (r(),
            u("label", dI, [a("b", null, d(e.$t("modals.verification.code")) + ":", 1), z(a("input", {
                type: "text",
                "onUpdate:modelValue": s[3] || (s[3] = c => i.code = c),
                minlength: "6",
                maxlength: "6",
                placeholder: "123456",
                required: ""
            }, null, 512), [[W, i.code]])])) : p("", !0), a("div", uI, [a("button", {
                type: "submit",
                class: "button primary",
                disabled: i.loading
            }, d(e.$t("common.button_confirm")), 9, gI), i.isSent ? (r(),
            u("button", {
                key: 0,
                type: "button",
                class: "button secondary",
                onClick: s[4] || (s[4] = c => o.reset()),
                disabled: i.loading
            }, d(e.$t("modals.verification.button_reset")), 9, mI)) : p("", !0), a("button", {
                type: "button",
                class: "button",
                onClick: s[5] || (s[5] = c => o.close())
            }, d(e.$t("common.button_cancel")), 1)])], 32))]),
            _: 1
        }, 8, ["class"])) : p("", !0)]),
        _: 1
    })
}
const Ia = O(tI, [["render", pI], ["__scopeId", "data-v-cb2c4723"]])
  , AI = {
    audio: !1,
    video: {
        width: {
            min: 320,
            ideal: 480
        },
        height: {
            min: 320,
            ideal: 480
        },
        aspectRatio: 1
    }
}
  , bI = [{
    rid: "q",
    maxBitrate: 5e5,
    scaleResolutionDownBy: 4,
    scalabilityMode: "L1T3"
}, {
    rid: "h",
    maxBitrate: 1e6,
    scaleResolutionDownBy: 2,
    scalabilityMode: "L1T3"
}, {
    rid: "f",
    maxBitrate: 5e6,
    scaleResolutionDownBy: 1,
    scalabilityMode: "L1T3"
}]
  , Td = {
    videoConstraints: AI,
    videoEncoding: bI
};
class fI {
    constructor(s) {
        this._store = s,
        this._socket = null,
        this._server = "",
        this._isConnectingStreams = {},
        this._isReconnectCooldown = !1,
        this._suggestServerTimer = null,
        this._producerTransport = null,
        this._consumerTransport = null,
        this._device = null,
        this._audioCtx = null,
        this._audioCtxTimeout = null,
        this._consumers = new Map,
        this._consumersGain = new Map,
        this._producers = new Map,
        this._producerGain = null,
        this._producerLabel = new Map,
        this._getAudioCtx()
    }
    _getAudioCtx() {
        return this._audioCtx || (this._audioCtx = new AudioContext,
        this._store.state.chat.audio.context || this._store.commit("chat/setAudioContext", this._audioCtx)),
        clearTimeout(this._audioCtxTimeout),
        this._audioCtxTimeout = setTimeout(this._checkAudioCtx.bind(this), 200),
        this._audioCtx
    }
    _checkAudioCtx() {
        this._audioCtx.state === "suspended" && !this._store.state.chat.isNotAllowed && (this._store.commit("chat/toggleNotAllowed", !0),
        this._store.state.chat.audio.isDeafened || this._store.commit("chat/toggleAudioDeafened", !0))
    }
    async resumeAudioCtx() {
        var s;
        this._audioCtx || this._getAudioCtx();
        try {
            await this._audioCtx.resume(),
            (s = this._socket) != null && s.connected && this._socket.emit("getProducers")
        } catch {}
        this._checkAudioCtx()
    }
    async _fixAudioStream(s) {
        try {
            const t = new Audio;
            t.autoplay = !0,
            t.muted = !0,
            t.srcObject = s,
            await t.play()
        } catch {}
    }
    async _sleep(s=1e3) {
        return new Promise(t => setTimeout(t, s))
    }
    async connect() {
        var i;
        const {session: s, user: t, chat: n} = this._store.state;
        !s.isConnected || !s.sessionId || !t.accessToken || !s.meta.chatServer || s.meta.chatServer === this._server && n.isConnected || (((i = this._socket) != null && i.connected || n.isConnected || n.isReconnecting) && await this.disconnect(),
        this._store.state.chat.isReconnecting || this._store.commit("chat/toggleReconnecting", !0),
        this._server = s.meta.chatServer,
        this._socket = rl(this._server === "local" ? "ws://localhost:3016" : `wss://chat-${this._server}.botc.app`, {
            auth: o => o({
                token: this._store.state.user.accessToken
            })
        }),
        this._socket.request = (o, l={}) => new Promise( (g, c) => {
            this._socket.emit(o, l, h => {
                h.error ? c(new Error(h.error)) : g(h)
            }
            )
        }
        ),
        this._socket.on("connect", this.onConnect.bind(this)),
        this._socket.on("reconnect", this.onConnect.bind(this)),
        this._socket.on("disconnect", this.onDisconnect.bind(this)),
        this._socket.on("connect_error", this.onConnectionError.bind(this)))
    }
    async onConnect() {
        try {
            const {session: s, user: t, chat: n} = this._store.state;
            clearTimeout(this._suggestServerTimer),
            this._store.commit("chat/setStream", {
                type: "audio"
            }),
            this._store.commit("chat/setStream", {
                type: "video"
            }),
            this._store.commit("chat/toggleConsumer"),
            this._store.commit("chat/clearUserChannels"),
            this._store.commit("chat/setChannel", ""),
            this.initSockets(),
            await this.createRoom(s.sessionId),
            await this.join(t.user.id, s.sessionId, n.channel),
            this._store.state.chat.isReconnecting && this._store.commit("chat/toggleReconnecting", !1),
            this._store.commit("chat/toggleConnected", !0),
            await this.connectStreams()
        } catch (s) {
            X(s)
        }
    }
    async disconnect() {
        var s;
        if (this._server = "",
        !!this._socket) {
            try {
                await this.closeProducer("audio"),
                await this.closeProducer("video")
            } catch {}
            if (this._store.commit("chat/setStream", {
                type: "audio"
            }),
            this._store.commit("chat/setStream", {
                type: "video"
            }),
            this._store.commit("chat/toggleConsumer"),
            this._consumerTransport && !this._consumerTransport.closed && this._consumerTransport.close(),
            this._producerTransport && !this._producerTransport.closed && this._producerTransport.close(),
            this._store.state.chat.channel && this._store.commit("chat/setChannel", ""),
            (s = this._socket) != null && s.connected)
                try {
                    await this._socket.request("exitRoom")
                } catch {}
            try {
                this._socket.disconnect(),
                this._socket.removeAllListeners()
            } catch {}
            this._socket = null
        }
    }
    async onDisconnect(s) {
        this._store.state.chat.isConnected && (this._store.commit("chat/toggleConnected", !1),
        this._store.commit("chat/clearUserChannels"));
        try {
            await this.closeProducer("audio"),
            await this.closeProducer("video")
        } catch {}
        if (this._consumerTransport && !this._consumerTransport.closed && this._consumerTransport.close(),
        this._producerTransport && !this._producerTransport.closed && this._producerTransport.close(),
        s !== "io server disconnect" && s !== "io client disconnect") {
            if (s)
                try {
                    this._store.dispatch("openDialogue", {
                        type: "alert",
                        title: "modals.dialogue.error.chat_title",
                        text: ["modals.dialogue.error.chat_text", [s]]
                    })
                } catch {}
            this._store.state.chat.isReconnecting || this._store.commit("chat/toggleReconnecting", !0),
            clearTimeout(this._suggestServerTimer),
            this._suggestServerTimer = setTimeout(async () => {
                var g, c;
                const {isReconnecting: t, isConnected: n, servers: i} = this._store.state.chat
                  , {sessionId: o, meta: l} = this._store.state.session;
                if (this._store.getters["user/isStoryteller"] && t && !n && o)
                    try {
                        const h = this._store.getters["chat/chatServerPreference"]
                          , m = h[0] === l.chatServer ? h[1] : h[0];
                        await this._store.dispatch("openDialogue", {
                            type: "confirm",
                            title: "modals.dialogue.prompt.chat_title",
                            text: ["modals.dialogue.prompt.chat_text", [((g = i.get(l.chatServer)) == null ? void 0 : g.name) || l.chatServer, ((c = i.get(m)) == null ? void 0 : c.name) || m]]
                        }) && this._store.state.session.meta.chatServer !== m && this._store.commit("chat/changeServer", m)
                    } catch {}
            }
            , Math.round(30 + Math.random() * 30) * 1e3)
        } else
            this._store.state.chat.isReconnecting && this._store.commit("chat/toggleReconnecting", !1)
    }
    onConnectionError({message: s}) {
        if (!this._store.state.chat.isReconnecting) {
            if (s && s !== "transport close") {
                const t = s === "xhr poll error" ? "modals.dialogue.error.chat2_text" : s;
                this._store.dispatch("openDialogue", {
                    type: "alert",
                    title: "modals.dialogue.error.chat2_title",
                    text: t
                }).catch( () => {}
                )
            }
            this.onDisconnect().catch( () => {}
            )
        }
    }
    async createRoom(s) {
        if (this._socket)
            try {
                await this._socket.request("createRoom", {
                    roomId: s
                })
            } catch {}
    }
    async join(s, t, n) {
        if (this._socket)
            try {
                await this._socket.request("join", {
                    userId: s,
                    roomId: t,
                    channel: n,
                    audioPaused: this._store.state.chat.audio.isDeafened,
                    videoPaused: this._store.state.chat.video.isDeafened
                });
                const i = await this._socket.request("getRouterRtpCapabilities");
                this._device = await this.loadDevice(i)
            } catch {}
    }
    async connectStreams(s) {
        if (this._socket && !this._isConnectingStreams[s || "any"]) {
            this._isConnectingStreams[s || "any"] = !0;
            try {
                await this.initTransports(),
                (!s || s === "consumer") && (this._store.state.chat.isNotAllowed || this._socket.emit("getProducers")),
                (!s || s === "producer") && (this._store.state.chat.audio.device && await this.produce("audio"),
                this._store.state.chat.video.device && await this.produce("video"),
                this._socket.emit("getConsumers"))
            } catch {} finally {
                this._isConnectingStreams[s || "any"] = !1
            }
        }
    }
    async loadDevice(s) {
        let t;
        try {
            const n = {};
            window.__TAURI__ && await zd() === "macos" && (n.handlerName = "Safari12"),
            t = await Gd.Device.factory(n)
        } catch (n) {
            n.name === "UnsupportedError" && alert("Browser not supported")
        }
        return s.headerExtensions = s.headerExtensions.filter(n => n.uri !== "urn:3gpp:video-orientation"),
        await t.load({
            routerRtpCapabilities: s,
            preferLocalCodecsOrder: !0
        }),
        t
    }
    async initTransports() {
        if (!this._producerTransport || this._producerTransport.closed) {
            const s = await this._socket.request("createWebRtcTransport", {
                forceTcp: !1,
                rtpCapabilities: this._device.rtpCapabilities
            });
            if (s.error)
                throw new Error(s.error);
            this._producerTransport = this._device.createSendTransport(s),
            this._producerTransport.on("connect", async ({dtlsParameters: t}, n, i) => {
                try {
                    const o = await this._socket.request("connectTransport", {
                        dtlsParameters: t,
                        transportId: s.id
                    });
                    n(o)
                } catch (o) {
                    i(o)
                }
            }
            ),
            this._producerTransport.on("produce", async ({kind: t, rtpParameters: n}, i, o) => {
                try {
                    const {producerId: l} = await this._socket.request("produce", {
                        producerTransportId: this._producerTransport.id,
                        kind: t,
                        rtpParameters: n,
                        paused: this._store.state.chat.audio.isMuted && t === "audio" || this._store.state.chat.video.isMuted && t === "video"
                    });
                    i({
                        id: l
                    })
                } catch (l) {
                    o(l)
                }
            }
            ),
            this._producerTransport.on("connectionstatechange", t => {
                switch (t) {
                case "connecting":
                    break;
                case "connected":
                    break;
                case "failed":
                    this._producerTransport.close();
                    break
                }
            }
            )
        }
        if (!this._consumerTransport || this._consumerTransport.closed) {
            const s = await this._socket.request("createWebRtcTransport", {
                forceTcp: !1
            });
            if (s.error)
                return;
            this._consumerTransport = this._device.createRecvTransport(s),
            this._consumerTransport.on("connect", async ({dtlsParameters: t}, n, i) => {
                try {
                    const o = await this._socket.request("connectTransport", {
                        transportId: this._consumerTransport.id,
                        dtlsParameters: t
                    });
                    n(o)
                } catch (o) {
                    i(o)
                }
            }
            ),
            this._consumerTransport.on("connectionstatechange", async t => {
                switch (t) {
                case "connecting":
                    break;
                case "connected":
                    break;
                case "failed":
                    this._consumerTransport.close();
                    break
                }
            }
            )
        }
    }
    initSockets() {
        this._socket && (this._socket.removeAllListeners("consumerClosed"),
        this._socket.on("consumerClosed", ({consumerId: s}) => this.closeConsumer(s)),
        this._socket.removeAllListeners("producerPaused"),
        this._socket.on("producerPaused", ({consumerId: s}) => {
            if (this._consumers.has(s)) {
                const {consumer: t, userId: n, kind: i} = this._consumers.get(s);
                t.pause(),
                this._store.commit("chat/toggleMuted", {
                    userId: n,
                    kind: i,
                    isMuted: !0
                })
            }
        }
        ),
        this._socket.removeAllListeners("producerResumed"),
        this._socket.on("producerResumed", ({consumerId: s}) => {
            if (this._consumers.has(s)) {
                const {consumer: t, userId: n, kind: i} = this._consumers.get(s)
                  , {channel: o, userChannels: l, video: g, audio: c} = this._store.state.chat
                  , h = l.get(n) || "";
                (i === "audio" && h === o && !c.isDeafened || i === "video" && (!this._store.getters["game/isNight"] || h === o) && !g.isDeafened) && t.resume(),
                this._store.commit("chat/toggleMuted", {
                    userId: n,
                    kind: i,
                    isMuted: !1
                })
            }
        }
        ),
        this._socket.removeAllListeners("newProducers"),
        this._socket.on("newProducers", async s => {
            if (this._store.state.chat.isNotAllowed)
                return;
            if ((await Promise.allSettled(s.filter( ({userId: n}) => n !== this._store.state.user.user.id).map( ({producerId: n, userId: i, channel: o, producerSocketId: l}) => (this.updateChannel(i, o),
            this.consume(n, i, l))))).some(n => n.status === "rejected" && !String(n.reason).match(/reconnecting/))) {
                await this._sleep(.5);
                for (let n = 0; n < s.length; n++) {
                    const {producerId: i, userId: o, channel: l, producerSocketId: g} = s[n];
                    if (![...this._consumers].some( ([,c]) => c.producerId === i))
                        try {
                            this._socket && (await this.consume(i, o, g),
                            this.updateChannel(o, l))
                        } catch (c) {
                            const h = /router cannot consume producer|(consumer|producer) with id .*? not found|channel request handler with id .*? not found|invalidstateerror/i;
                            if (!String(c).match(h) && !this._isReconnectCooldown) {
                                this._isReconnectCooldown = !0,
                                setTimeout( () => {
                                    this._isReconnectCooldown = !1
                                }
                                , 30 * 1e3),
                                await this.disconnect(),
                                await this._sleep(.5),
                                await this.connect();
                                return
                            }
                        }
                }
            }
        }
        ),
        this._socket.removeAllListeners("newConsumers"),
        this._socket.on("newConsumers", s => {
            s.forEach( ({userId: t, channel: n, audioPaused: i, videoPaused: o}) => {
                t && (this.updateChannel(t, n),
                this._store.commit("chat/toggleConsumer", {
                    userId: t,
                    value: !0
                }),
                this._store.commit("chat/toggleDeafened", {
                    userId: t,
                    kind: "audio",
                    isDeafened: i
                }),
                this._store.commit("chat/toggleDeafened", {
                    userId: t,
                    kind: "video",
                    isDeafened: o
                }))
            }
            )
        }
        ),
        this._socket.removeAllListeners("consumerJoined"),
        this._socket.on("consumerJoined", ({userId: s, channel: t, audioPaused: n, videoPaused: i}) => {
            s && (this.updateChannel(s, t),
            this._store.commit("chat/toggleConsumer", {
                userId: s
            }),
            this._store.commit("chat/toggleDeafened", {
                userId: s,
                kind: "audio",
                isDeafened: n
            }),
            this._store.commit("chat/toggleDeafened", {
                userId: s,
                kind: "video",
                isDeafened: i
            }))
        }
        ),
        this._socket.removeAllListeners("consumerLeft"),
        this._socket.on("consumerLeft", s => {
            s && this._store.commit("chat/toggleConsumer", {
                userId: s,
                value: !1
            })
        }
        ),
        this._socket.removeAllListeners("channelChange"),
        this._socket.on("channelChange", ({userId: s, channel: t}) => {
            s && this.updateChannel(s, t)
        }
        ),
        this._socket.removeAllListeners("consumersPaused"),
        this._socket.on("consumersPaused", ({kind: s, userId: t}) => {
            t && this._store.commit("chat/toggleDeafened", {
                userId: t,
                kind: s,
                isDeafened: !0
            })
        }
        ),
        this._socket.removeAllListeners("consumersResumed"),
        this._socket.on("consumersResumed", ({kind: s, userId: t}) => {
            t && this._store.commit("chat/toggleDeafened", {
                userId: t,
                kind: s,
                isDeafened: !1
            })
        }
        ))
    }
    async produce(s, t=null) {
        var A;
        const {audio: n, video: i, isConnected: o, userOverrides: l} = this._store.state.chat
          , {session: g, user: c} = this._store.state
          , h = s === "audio";
        if (!o || !g.isConnected || !this._producerTransport)
            return;
        if (this._producerTransport.closed)
            try {
                await this.initTransports()
            } catch {
                return
            }
        let m;
        if (h)
            try {
                m = await navigator.mediaDevices.getUserMedia(Id(this._store.state.chat, t || n.device))
            } catch {}
        else {
            if (!this._device.canProduce("video"))
                return;
            try {
                m = await navigator.mediaDevices.getUserMedia(Md(t || i.device))
            } catch {}
        }
        if (m) {
            this._producerLabel.has(s) && await this.closeProducer(s);
            try {
                const f = {};
                if (h) {
                    const w = this._getAudioCtx()
                      , V = w.createGain();
                    V.gain.value = (A = l.get("volume-" + c.user.id)) != null ? A : 1;
                    const N = w.createMediaStreamDestination();
                    w.createMediaStreamSource(m).connect(V),
                    V.connect(N),
                    this._producerGain = V,
                    f.track = N.stream.getAudioTracks()[0],
                    f.codecOptions = {
                        opusStereo: !0,
                        opusDtx: !0,
                        opusFec: !0,
                        opusNack: !0
                    }
                } else
                    f.track = m.getVideoTracks()[0],
                    f.encodings = Td.videoEncoding,
                    f.codecOptions = {
                        videoGoogleStartBitrate: 1e3
                    },
                    this._device.rtpCapabilities.codecs.find(w => w.kind === "video").mimeType.toLowerCase() === "video/vp9" && (f.encodings = [{
                        maxBitrate: 5e6,
                        scalabilityMode: "L3T3_KEY"
                    }]);
                const T = await this._producerTransport.produce(f);
                this._producers.set(T.id, T),
                this._producerLabel.set(s, T.id),
                this.canProduce(s) || this.pauseProducer(s),
                this._store.commit("chat/setStream", {
                    userId: this._store.state.user.user.id,
                    stream: m,
                    type: s
                }),
                T.on("trackended", () => this.closeProducer(s, T.id)),
                T.on("transportclose", () => this.closeProducer(s, T.id)),
                T.on("close", () => this.closeProducer(s, T.id))
            } catch (f) {
                f === "no transport" && (this._producerTransport.close(),
                await this._sleep(),
                await this.connectStreams("producer"))
            }
        }
    }
    async closeProducer(s, t) {
        var l;
        if (!t && !this._producerLabel.has(s))
            return;
        const n = t || this._producerLabel.get(s);
        try {
            await this._socket.emitWithAck("producerClosed", {
                producerId: n
            })
        } catch {}
        if ((l = this._producers.get(n)) == null || l.close(),
        this._producers.delete(n),
        t && this._producerLabel.get(s) !== t)
            return;
        this._producerLabel.delete(s);
        const {user: i} = this._store.state.user
          , o = this._store.state.chat[s].streams.get(i.id);
        o && o.getTracks().forEach(g => {
            g.stop()
        }
        ),
        s === "audio" && this._producerGain && (this._producerGain.disconnect(),
        this._producerGain = null),
        this._store.commit("chat/setStream", {
            userId: i.id,
            type: s
        })
    }
    async consume(s, t, n) {
        const {consumer: i, stream: o, kind: l, error: g, producerPaused: c, gainFilter: h} = await this.getConsumeStream(s, n, t);
        if (!i)
            throw new Error("ConsumeStream error for " + s + ": " + g);
        this._consumers.set(i.id, {
            consumer: i,
            userId: t,
            kind: l,
            producerId: s,
            gainFilter: h
        }),
        this._store.commit("chat/setStream", {
            userId: t,
            stream: o,
            type: l
        }),
        this._store.commit("chat/toggleMuted", {
            userId: t,
            kind: l,
            isMuted: c
        }),
        i.on("trackended", () => this.closeConsumer(i.id)),
        i.on("transportclose", () => this.closeConsumer(i.id))
    }
    async getConsumeStream(s, t, n) {
        var i;
        if (!this._device)
            throw new Error("device not initialized");
        if ((!this._consumerTransport || this._consumerTransport.closed) && await this.initTransports(),
        !this._consumerTransport)
            throw new Error("transport not initialized");
        try {
            const {rtpCapabilities: o} = this._device
              , {video: l, audio: g, userOverrides: c} = this._store.state.chat
              , {id: h, kind: m, rtpParameters: A, producerPaused: f, error: T} = await this._socket.request("consume", {
                rtpCapabilities: o,
                consumerTransportId: this._consumerTransport.id,
                producerId: s,
                producerSocketId: t
            });
            if (!h)
                return {
                    error: T
                };
            const w = await this._consumerTransport.consume({
                id: h,
                producerId: s,
                kind: m,
                rtpParameters: A,
                codecOptions: {}
            })
              , {consumerPaused: V} = await this._socket.request("ready", {
                consumerId: w.id,
                producerSocketId: t,
                kind: m
            });
            f || V || m === "audio" && g.isDeafened || m === "video" && l.isDeafened ? w.pause() : this._store.getters["players/seatedPlayerMap"].has(n) || w.pause();
            const N = new MediaStream([w.track]);
            if (N.consumerId = w.id,
            m === "audio") {
                this._consumersGain.has(n) && this._consumersGain.get(n).disconnect();
                const U = this._getAudioCtx()
                  , P = U.createMediaStreamSource(N)
                  , E = U.createGain();
                E.gain.value = (i = c.get("volume-" + n)) != null ? i : 1,
                P.connect(E),
                E.connect(U.destination),
                this._consumersGain.set(n, E),
                this.updateVolume(n),
                this._store.state.chat.isNotAllowed || this._fixAudioStream(N).catch( () => {}
                )
            }
            return {
                consumer: w,
                stream: N,
                kind: m,
                producerPaused: f
            }
        } catch (o) {
            throw o === "no transport" ? (this._consumerTransport.close(),
            await this._sleep(),
            await this.connectStreams("consumer"),
            new Error("consumer transport closed, reconnecting...")) : o
        }
    }
    closeConsumer(s) {
        if (!this._consumers.has(s))
            return;
        const {consumer: t, userId: n, kind: i} = this._consumers.get(s);
        i === "audio" && this._consumersGain.has(n) && (this._consumersGain.get(n).disconnect(),
        this._consumersGain.delete(n)),
        t.close(),
        this._consumers.delete(s);
        const o = this._store.state.chat[i].streams.get(n);
        o && o.consumerId === s && (o.getTracks().forEach(l => {
            l.stop()
        }
        ),
        this._store.commit("chat/setStream", {
            userId: n,
            type: i
        }))
    }
    canProduce(s) {
        return F.currentRoute.value.name !== "Grimoire" || !this._store.state.chat.isConnected || !this._store.getters["players/seatedPlayerMap"].has(this._store.state.user.user.id) || !this._producerLabel.has(s) || this._store.state.chat[s].isMuted ? !1 : s !== "video" || !this._store.getters["game/isNight"] || !!this._store.state.chat.channel
    }
    pauseProducer(s) {
        var o;
        if (!this._store.state.chat.isConnected || !this._producerLabel.has(s))
            return;
        const t = this._store.state.user.user.id;
        (o = this._store.state.chat.usersMuted[t]) != null && o[s] || this._store.commit("chat/toggleMuted", {
            userId: t,
            kind: s,
            isMuted: !0
        });
        const n = this._producerLabel.get(s)
          , i = this._producers.get(n);
        !i || i.paused || (i.pause(),
        this._socket && this._socket.emit("producerPaused", {
            producerId: n
        }))
    }
    resumeProducer(s) {
        var o;
        if (!this.canProduce(s))
            return;
        const t = this._store.state.user.user.id;
        (o = this._store.state.chat.usersMuted[t]) != null && o[s] && this._store.commit("chat/toggleMuted", {
            userId: t,
            kind: s,
            isMuted: !1
        });
        const n = this._producerLabel.get(s)
          , i = this._producers.get(n);
        !i || !i.paused || (i.resume(),
        this._socket && this._socket.emit("producerResumed", {
            producerId: n
        }))
    }
    pauseConsumers(s) {
        this._store.state.chat.isConnected && (this._socket && this._socket.emit("consumersPaused", s),
        this._consumers.forEach( ({consumer: t, kind: n}) => {
            n === s && t.pause()
        }
        ))
    }
    resumeConsumers(s) {
        if (!this._store.state.chat.isConnected)
            return;
        const {channel: t, userChannels: n} = this._store.state.chat;
        this._consumers.forEach( ({consumer: i, kind: o, userId: l}) => {
            s === "audio" && (n.get(l) || "") !== t || o === s && i.resume()
        }
        ),
        this._socket && this._socket.emit("consumersResumed", s)
    }
    updateChannel(s, t) {
        const {channel: n, userChannels: i, audio: o, video: l} = this._store.state.chat
          , {user: g} = this._store.state.user
          , c = this._store.getters["players/seatedPlayerMap"]
          , h = this._store.getters["players/storytellerMap"]
          , m = this._store.getters["chat/isPrivateChat"]
          , A = this._store.getters["chat/isPublicChat"]
          , f = this._store.getters["game/isNight"];
        s === g.id && t !== n && this._store.commit("chat/setChannel", t);
        const T = i.get(s) || "";
        i.get(s) !== t && this._store.commit("chat/setUserChannel", {
            userId: s,
            value: t
        }),
        this._consumers.forEach(w => {
            if (!(w.kind !== "audio" && !f && !w.consumer.paused)) {
                if ((i.get(w.userId) || "") !== this._store.state.chat.channel)
                    w.consumer.paused || w.consumer.pause();
                else if (w.consumer.paused) {
                    if (w.kind === "audio" && o.isDeafened || w.kind === "video" && l.isDeafened)
                        return;
                    w.consumer.resume()
                }
            }
        }
        ),
        c.has(s) && !h.has(s) && T !== t && (A(n) && T === n ? this._store.commit("playSound", "chatLeave") : A(n) && t === n ? this._store.commit("playSound", "chatJoin") : !n && A(T) && s === g.id ? this._store.commit("playSound", "chatLeave") : m(n) && t === n && s !== g.id && this._store.commit("playSound", "privateJoin"))
    }
    updateVolume(s) {
        var o;
        const {userOverrides: t, audio: n} = this._store.state.chat;
        let i = (o = t.get("volume-" + s)) != null ? o : 1;
        if (s === this._store.state.user.user.id) {
            if (!this._producerGain)
                return;
            this._producerGain.gain.setValueAtTime(i, this._getAudioCtx().currentTime)
        } else {
            if (!this._consumersGain.has(s) || (n.volumes.has(s) && (i = Object.values(n.volumes.get(s)).reduce( (l, g) => g * l, i)),
            this._consumersGain.get(s).gain.value === i))
                return;
            this._consumersGain.get(s).gain.setValueAtTime(i, this._getAudioCtx().currentTime)
        }
    }
    handleChannelChange(s) {
        if (!this._socket)
            return;
        const {user: t} = this._store.state.user;
        this._socket.emit("channelChange", s),
        this.updateChannel(t.id, s),
        this.canProduce("video") ? this.resumeProducer("video") : this.pauseProducer("video")
    }
}
function Id(e, s=null) {
    const {isAutoGainControl: t, isEchoCancellation: n, isNoiseSuppression: i} = (e == null ? void 0 : e.audio) || {}
      , o = {
        audio: {
            echoCancellation: n != null ? n : !0,
            noiseSuppression: i != null ? i : !0,
            autoGainControl: t != null ? t : !0,
            channelCount: 1
        },
        video: !1
    };
    return s && (o.audio.deviceId = {
        exact: s
    }),
    o
}
function Md(e=null) {
    const s = structuredClone(Td.videoConstraints);
    return e && (s.video.deviceId = {
        exact: e
    }),
    s
}
const vI = e => {
    const s = new fI(e);
    e.subscribe(async ({type: t, payload: n}, i) => {
        const {session: o} = i;
        switch (t) {
        case "session/updateMeta":
        case "session/toggleConnected":
            if (t === "session/updateMeta" && !(n != null && n.chatServer))
                return;
            o.meta.chatServer && o.isConnected ? await s.connect() : await s.disconnect();
            break;
        case "chat/setChannel":
            s.handleChannelChange(n);
            break;
        case "chat/setAudioDevice":
            n ? await s.produce("audio", n) : await s.closeProducer("audio");
            break;
        case "chat/toggleAutoGainControl":
        case "chat/toggleEchoCancellation":
        case "chat/toggleNoiseSuppression":
            i.chat.audio.device && await s.produce("audio", n);
            break;
        case "chat/setVideoDevice":
            n ? await s.produce("video", n) : await s.closeProducer("video");
            break;
        case "chat/toggleAudioMuted":
            i.chat.audio.isMuted ? s.pauseProducer("audio") : s.resumeProducer("audio");
            break;
        case "chat/toggleVideoMuted":
            i.chat.video.isMuted ? s.pauseProducer("video") : s.resumeProducer("video");
            break;
        case "game/setPhase":
        case "game/setHistory":
            s.canProduce("video") ? s.resumeProducer("video") : s.pauseProducer("video");
            break;
        case "chat/toggleVideoDeafened":
            i.chat.video.isDeafened ? s.pauseConsumers("video") : s.resumeConsumers("video");
            break;
        case "chat/toggleAudioDeafened":
            i.chat.audio.isDeafened ? s.pauseConsumers("audio") : s.resumeConsumers("audio");
            break;
        case "chat/setUserOverride":
        case "chat/setVolume":
            (t === "chat/setVolume" || n.type === "volume") && s.updateVolume(n.userId);
            break;
        case "chat/toggleNotAllowed":
            n === !1 && await s.resumeAudioCtx();
            break
        }
    }
    ),
    F.afterEach( (t, n) => {
        t.name === "Grimoire" ? (s.resumeProducer("audio"),
        s.resumeProducer("video")) : n.name === "Grimoire" && (e.state.chat.audio.isMuted || e.commit("chat/toggleAudioMuted"),
        e.state.chat.video.isMuted || e.commit("chat/toggleVideoMuted"))
    }
    )
}
  , _I = {
    name: "SetupModal",
    components: {
        FontAwesomeIcon: Y,
        Modal: se
    },
    computed: {
        ...I("user", ["user"]),
        ...I(["session", "modal", "chat"]),
        ...D("players", ["seatedPlayerMap"]),
        canChat() {
            return !this.session.sessionId || this.seatedPlayerMap.has(this.user.id)
        }
    },
    data() {
        return {
            error: "",
            isRunning: !1,
            audioFeedback: !1,
            steps: [],
            videoDevices: [],
            audioDevices: [],
            audioStream: null,
            videoStream: null,
            hark: null,
            voiceLevel: 0,
            videoSelect: 0,
            audioSelect: 0,
            browser: Ke()
        }
    },
    methods: {
        ...j("chat", ["setVideoDevice", "setAudioDevice"]),
        ...j(["toggleModal"]),
        getIcon(e) {
            return e.success ? "check-circle" : e.error ? "times-circle" : "circle"
        },
        resetHark() {
            this.hark && (this.hark.stop(),
            this.hark = null,
            this.voiceLevel = 0)
        },
        async selectAudio(e) {
            if (this.audioSelect === e)
                this.audioSelect = -1,
                this.resetHark(),
                this.setAudioDevice(null),
                this.audioStream = null;
            else {
                if (this.audioSelect = e,
                !this.audioDevices[e])
                    return;
                const {deviceId: s} = this.audioDevices[e];
                await this.captureAudio(s) && this.canChat && this.setAudioDevice(s)
            }
        },
        async selectVideo(e) {
            if (this.videoSelect === e)
                this.videoSelect = -1,
                this.setVideoDevice(null),
                this.videoStream = null;
            else {
                this.videoSelect = e;
                const {deviceId: s} = this.videoDevices[e];
                if (s)
                    try {
                        await this.captureVideo(s) && this.canChat && this.setVideoDevice(s)
                    } catch {}
            }
        },
        async captureAudio(e) {
            this.error = "";
            try {
                this.audioStream = await navigator.mediaDevices.getUserMedia(Id(this.chat, e))
            } catch (s) {
                return this.error = s,
                !1
            }
            return this.audioStream && this.audioStream.getAudioTracks()[0] ? (this.resetHark(),
            this.hark = nl(this.audioStream, {
                play: !1
            }),
            this.hark.on("volume_change", s => {
                var n, i;
                let t = Math.pow(10, s / 85) * 10;
                t <= 1 && (t = 0),
                t = String(Math.round(t * 15)),
                t !== ((n = this.$refs.video) == null ? void 0 : n.style.getPropertyValue("--volume")) && ((i = this.$refs.video) == null || i.style.setProperty("--volume", t))
            }
            ),
            this.canChat && this.audioDevices.length && this.setAudioDevice(this.audioDevices[0].deviceId),
            !0) : !1
        },
        async captureVideo(e) {
            this.error = "";
            try {
                this.videoStream = await navigator.mediaDevices.getUserMedia(Md(e))
            } catch (s) {
                return this.error = s,
                !1
            }
            return !!this.videoStream
        },
        reset() {
            var e, s;
            this.resetHark(),
            this.steps = [],
            this.videoDevices = [],
            this.audioDevices = [],
            (e = this.audioStream) == null || e.getTracks().forEach(t => t.stop()),
            (s = this.videoStream) == null || s.getTracks().forEach(t => t.stop()),
            this.audioStream = null,
            this.videoStream = null,
            this.videoSelect = 0,
            this.audioSelect = 0
        },
        async start() {
            var t;
            this.isRunning = !0,
            this.reset();
            let e;
            if (!["Firefox", "Safari"].includes((t = this.browser) == null ? void 0 : t.browser.name)) {
                let n = {
                    cam: !1,
                    mic: !1
                };
                const i = {
                    description: this.$t("modals.setup.mic_query")
                };
                this.steps.push(i);
                try {
                    const l = await navigator.permissions.query({
                        name: "microphone"
                    });
                    l.state === "granted" ? (n.mic = !0,
                    i.success = !0) : l.state !== "prompt" && (i.error = this.$t("modals.setup.mic_blocked"))
                } catch (l) {
                    i.error = l
                }
                const o = {
                    description: this.$t("modals.setup.cam_query")
                };
                this.steps.push(o);
                try {
                    const l = await navigator.permissions.query({
                        name: "camera"
                    });
                    l.state === "granted" ? (n.cam = !0,
                    o.success = !0) : l.state !== "prompt" && (o.error = this.$t("modals.setup.cam_blocked"))
                } catch (l) {
                    o.error = l
                }
            }
            const s = {
                description: this.$t("modals.setup.mic_cam_query")
            };
            this.steps.push(s);
            try {
                e = await navigator.mediaDevices.getUserMedia({
                    audio: !0,
                    video: !0
                }),
                e ? s.success = !0 : s.error = this.$t("modals.setup.mic_cam_blocked")
            } catch (n) {
                s.error = n
            }
            if (!e) {
                const n = {
                    description: this.$t("modals.setup.mic_only")
                };
                this.steps.push(n);
                try {
                    e = await navigator.mediaDevices.getUserMedia({
                        audio: !0
                    }),
                    e.getTracks().forEach(i => i.stop()),
                    e ? n.success = !0 : n.error = this.$t("modals.setup.mic_blocked")
                } catch (i) {
                    n.error = i
                }
            }
            if (e) {
                const n = {
                    description: this.$t("modals.setup.get_devices")
                };
                this.steps.push(n);
                try {
                    (await navigator.mediaDevices.enumerateDevices()).forEach(o => {
                        o.kind === "audioinput" ? this.audioDevices.push(o) : o.kind === "videoinput" && this.videoDevices.push(o)
                    }
                    ),
                    this.audioDevices.length || this.videoDevices.length ? n.success = !0 : n.error = this.$t("modals.setup.no_devices")
                } catch (i) {
                    n.error = i
                }
            }
            if (this.audioDevices.length) {
                const n = {
                    description: this.$t("modals.setup.capture_audio")
                };
                this.steps.push(n);
                try {
                    await this.captureAudio(this.audioDevices[0].deviceId) ? n.success = !0 : n.error = this.$t("modals.setup.audio_error")
                } catch (i) {
                    n.error = i
                }
            }
            if (this.videoDevices.length) {
                const n = {
                    description: this.$t("modals.setup.capture_video")
                };
                this.steps.push(n);
                try {
                    await this.captureVideo(this.videoDevices[0].deviceId) ? (this.canChat && this.setVideoDevice(this.videoDevices[0].deviceId),
                    n.success = !0) : n.error = this.$t("modals.setup.video_error")
                } catch (i) {
                    n.error = i
                }
            }
            this.isRunning = !1
        },
        close() {
            this.reset(),
            document.getElementById("app").focus(),
            this.toggleModal({
                name: "settings"
            })
        }
    }
}
  , yI = {
    key: 0
}
  , wI = {
    class: "steps"
}
  , kI = {
    class: "result"
}
  , CI = {
    key: 0
}
  , SI = {
    key: 1,
    class: "stream"
}
  , PI = {
    class: "video",
    ref: "video"
}
  , TI = [".srcObject"]
  , II = [".srcObject"]
  , MI = {
    key: 0
}
  , RI = ["onClick"]
  , DI = {
    key: 1
}
  , EI = ["onClick"]
  , NI = {
    key: 2,
    class: "error"
}
  , BI = {
    class: "button-group"
}
  , VI = ["disabled"];
function OI(e, s, t, n, i, o) {
    const l = k("i18n-t")
      , g = k("font-awesome-icon")
      , c = k("Modal");
    return r(),
    C(q, {
        name: "fade"
    }, {
        default: S( () => [e.modal.name === "setup" ? (r(),
        C(c, {
            key: 0,
            class: "setup",
            onClose: s[3] || (s[3] = h => o.close())
        }, {
            header: S( () => [v(d(e.$t("modals.setup.title")), 1)]),
            default: S( () => {
                var h, m, A;
                return [b(l, {
                    tag: "p",
                    keypath: "modals.setup.text",
                    scope: "global"
                }, {
                    default: S( () => [a("b", null, d(e.$t("modals.setup.start")), 1)]),
                    _: 1
                }), i.browser ? (r(),
                u("b", yI, d(e.$t("modals.setup.browser")) + " " + d((h = i.browser.browser) == null ? void 0 : h.name) + " " + d((m = i.browser.browser) == null ? void 0 : m.version) + " " + d((A = i.browser.os) == null ? void 0 : A.name), 1)) : p("", !0), a("ul", wI, [(r(!0),
                u(_, null, B(i.steps, (f, T) => (r(),
                u("li", {
                    key: T
                }, [a("span", null, d(e.$t("modals.setup.step", [T + 1])) + " " + d(f.description), 1), a("div", kI, [b(g, {
                    icon: o.getIcon(f)
                }, null, 8, ["icon"])]), f.error ? (r(),
                u("p", CI, d(f.error), 1)) : p("", !0)]))), 128))]), i.audioDevices.length || i.videoDevices.length ? (r(),
                u("div", SI, [a("div", PI, [i.videoStream ? (r(),
                u("video", {
                    key: 0,
                    ".srcObject": i.videoStream,
                    autoplay: ""
                }, null, 40, TI)) : (r(),
                C(g, {
                    key: 1,
                    icon: "video-slash"
                })), a("label", {
                    onClick: s[0] || (s[0] = f => i.audioFeedback = !i.audioFeedback)
                }, [b(g, {
                    icon: i.audioFeedback ? "circle-check" : "circle"
                }, null, 8, ["icon"]), v(" " + d(e.$t("modals.setup.self_listen")), 1)]), i.audioFeedback && i.audioStream ? (r(),
                u("audio", {
                    key: 2,
                    ".srcObject": i.audioStream,
                    autoplay: ""
                }, null, 40, II)) : p("", !0)], 512), a("div", null, [i.videoDevices.length ? (r(),
                u("ul", MI, [a("li", null, [a("b", null, d(e.$t("modals.setup.video_devices")), 1)]), (r(!0),
                u(_, null, B(i.videoDevices, (f, T) => (r(),
                u("li", {
                    key: T,
                    class: y({
                        active: i.videoSelect === T
                    }),
                    onClick: w => o.selectVideo(T)
                }, [v(d(f.label || f.deviceId || e.$t("modals.setup.video_unnamed")) + " ", 1), b(g, {
                    icon: i.videoSelect === T ? "check-circle" : "circle"
                }, null, 8, ["icon"])], 10, RI))), 128))])) : p("", !0), i.audioDevices.length ? (r(),
                u("ul", DI, [a("li", null, [a("b", null, d(e.$t("modals.setup.audio_devices")), 1)]), (r(!0),
                u(_, null, B(i.audioDevices, (f, T) => (r(),
                u("li", {
                    key: T,
                    class: y({
                        active: i.audioSelect === T
                    }),
                    onClick: w => o.selectAudio(T)
                }, [v(d(f.label || f.deviceId || e.$t("modals.setup.audio_unnamed")) + " ", 1), b(g, {
                    icon: i.audioSelect === T ? "check-circle" : "circle"
                }, null, 8, ["icon"])], 10, EI))), 128))])) : p("", !0), i.error ? (r(),
                u("p", NI, d(i.error), 1)) : p("", !0)])])) : p("", !0), a("div", BI, [a("button", {
                    type: "button",
                    disabled: i.isRunning,
                    class: "button primary",
                    onClick: s[1] || (s[1] = (...f) => o.start && o.start(...f))
                }, d(i.steps.length ? e.$t("modals.setup.button_rerun") : e.$t("modals.setup.button_start")), 9, VI), a("button", {
                    type: "button",
                    class: "button",
                    onClick: s[2] || (s[2] = f => o.close())
                }, d(e.$t("common.button_close")), 1)])]
            }
            ),
            _: 1
        })) : p("", !0)]),
        _: 1
    })
}
const Rd = O(_I, [["render", OI], ["__scopeId", "data-v-ad0d9ee9"]])
  , jI = {
    computed: {
        ...I(["session"]),
        ...D("game", ["isNight"])
    },
    data() {
        return {}
    },
    mounted() {
        this.session.hook.name === "attention-gong" && this.$store.commit("playSound", "attentionGong")
    }
}
  , UI = {
    id: "attention"
}
  , HI = {
    viewBox: "0 0 140 140",
    class: "text"
}
  , qI = {
    x: "0%",
    class: "label mozilla"
}
  , LI = {
    key: 0,
    "xlink:href": "#circle-path",
    textLength: "377"
}
  , zI = {
    key: 1,
    "xlink:href": "#circle-path",
    textLength: "377"
};
function GI(e, s, t, n, i, o) {
    return r(),
    u("div", UI, [(r(),
    u("svg", HI, [a("text", qI, [e.isNight ? (r(),
    u("textPath", LI, d(e.$t("overlays.attention.attention")) + "Â  " + d(e.$t("overlays.attention.attention")) + "Â  ", 1)) : (r(),
    u("textPath", zI, d(e.$t("overlays.attention.return")) + "Â Â  ", 1))])]))])
}
const WI = O(jI, [["render", GI], ["__scopeId", "data-v-b0afea63"]])
  , FI = "data:image/webp;base64,UklGRtIMAABXRUJQVlA4WAoAAAAQAAAAjAAAjAAAQUxQSC4FAAABoP7/n+I0+s3tLu5UQu+wuru7u7sA9b8BDVSx1+vc5ZnVvSVI3d3d29QCyb4uKVmI7MwJsd2ZeRwREwC6FQ1txxcaS8xWq9zodjmUBlm2Ws0lxsJxbQwSsFSIShuyqezJy8eYqCRQleBHLx6XbRqSFiUwQTQMKz1gkUmoZcuB0mEGkXJi8rQ/riky0aasXPtjSrJIr6heS8+5MNEybj63tFcUlVDieuMDB9G+44FxfSKiDWqXdV4hem26mN0O0QQlZVVZMNEvtlRlJSFaoOj52+qJ3uu3zY9GVBD7fGUnNLR/1UfSH0ovu+UmdHTfKstAOoucbFIIPRXT1EhdpVVcxYSm+Gplmn7EMVdshLa2K2NFncTl1mFCX1yXG6eLVKOT0NlpTNVBN5OZ0Nps6oY0Joy8TGh+aZSgKXGWSaWaapopaihs7SEvobv34JowzUhLdrgI7V07lkkakdbs9BD6e3aukTQhzDvoIix0HZwnaGF0rZew0Vs7BoWu6yVMWIkvdg3ZpzWEpTWfhSimyMwUc1FMSMQ8hbBVKRBDMbKOsLZuVAjanMLMwSfbBC2ixErYa90QESQ08Qph8dVJKDjpVZhJuCo9KFJpI2FzY6kUBNT/NmH1nZEosLhfXcxy7UwKCGUrhN1Na1AgyXsIy/e0CgBl1zOtPhv5Z9hH2L4/xS+09APjPixF/sTWYcbh2jh/shyE9fZsP2I2YubhDTG+hj4i7H80xIe40sEBjhyxpaSLmAPIxeSWxiqEB5VxLQg/qFygfi/8z3CB8OEFw/8GOTnBOQgAhHwrJ1jzBIDIbYQX/4oEaG/jBrk9wDSFG5TpAL8RfvwNpM854nMp08IRlvYdHBzhaD/5OUe4lxRgjiCFRYQnjSUqR6jFbwlPvm3kCpuLL+xcITdyxUcPV3iaucLt4IpGmSvcVq7w8MVHO1fIbq6wOfniLVe8LVE5Qi02Ep40FmCeKJz8nCPcSzo4OMLRvr2FIyztpc854nMJfuOI3wCmKdygTAdob+MGuT1A5DZu2BYJIOTZOMGaLwDA0CZOcA4CADBc5IQLhv8JP6lcoP4g/A8mNHFB03hoMfkC5gB8PqklaZWDAxyrpJZg2CMOeDQUfMZuxMzDG2N8QbadefZs8DOuFjMO18T6g5Z9YNyHpcgfaHeAcftTwG+UXc+0hhzkH7Tex7S9rSFAlKMwzJmDAoH4X13Mcv0aDwGj/reZdXsACgykskZGNVZKEMwME2YSNmVAUNGUy0y6PAUFByKKrQyyFkdAsNuewszBp9pC8EfVMaduNIRQLFAYo+SJoYCYYjNTzMUxENrUKqZUpUKoM2pVZqh1GRByNKzGywhv1WAUOhAWHHIxwXVwoQBalNbt8jDAs2tdGGhTWrbTRT3XjuUSaDVs/SEv5byH1oWBdsU5JpVqqmmeCFoWhh6n2omhAmi8w0EztcwHO4D200qclHKWpIEe43JrMYVwbV4c6FMce8VGHduVsSLoNq3yKqYKvlqZBnqOnFKlUMRpmhIJ+v4ko+ymmxLum6UZCHQv9v7qbyr8/XUfEWiIYhZsr9ddw86FMQgoiZKyDluwjrDlcFYyAoqilBXnFd0o51ekIKAsSlxnvGfXgf2ecX0iAhpH9Vh4rhlrCjefW9gjCqgtJk/9/aoia0RWrv4+NVkEuouGYeUHbI6Q2a0HyocZRGChEJU58fPSJy8fYaIGhAl+8Pxx6ecTM6MEYKloaDs2v2jDO6tV/ujx2Jqtstxge7fJmD+mdVsJdAtWUDggfgcAADAtAJ0BKo0AjQA+bTKSRqQ/oaEqUn0T8A2JZ2xHwACHfvoU4NuYXA5OX2DsJ/XP3G/nOC9yP8P/+6HYNGueaF56n//8Jj/+io/mM5XnhOlcZm/BqTSHA5LpqrU/kAYcTtTKmR6Yf2rb4GGdxjVs1KdmHTNGlsjBMu6TJm+sUsvry6oh1oh0DAFlYPvFTHEvUYwWGzoZwieeZXuP6ToRijWw6ArFK5qs8cyK5mQ89TwAt45DyGlIMoEetofq/iVvgLq8yts/nSUG2rjVtRBpS00IR0diwhjcHhzQA/rSnnlrTeWSOHkaTsZ/OnkKpaTAso6/cFdJr7qu85IFO64a+u76FGz/r82t0qNc/0yrziA/O6f+0ca0DjSf9z52tkPelkn499+tierzbd2DRT1PFlw248UIGcfhL12Nvnru35J9j+1GLZTontACAbEWGZlrdMYyQMp9r2UagBNZZ53tTBf5+IQ6gCtQXk1X80JSdIH0e4AA/s1wIb3MnjXX8YqCYr6LBAgWGzpRl7CUBn18ZbtOAqrVyGyfX2AvzIKUGYt9z+mkc3t2WinN50JBq5QXAB4NmwWDKswfnyA+HNTfX6ZYTG3llc7SEOOgcc8HW4KDSEJd/7hELvEo7+oJHQj0xJHPUfG48wQyGhnZVdQicd3AnK/RBjhAbO/RlU8WuIazlQ/CG67ws+1ZWkOsVmwUYVXkXFDFqzfCxYT4CqmftLDOeDPXctxRbEiRyaWUobQUVqd6z0I0XwI2cDTLHuNKomh40LevemZm8V4ptFf0p3S2dGSyIhZ8kcatBNMeOYUtojkGJI1I/024rvz9mZ2OSqVkvbLcBdWppVOQRipXEkxPQ/M6WM525zzog9DfRb8xgUSJjZ3FRE8HRkxrU5gjDB54yfOsre4DMDqMOvl+l325P0Qb8lWAjNjy6/I7W6ZqsQlveLYGKC44XmeRzb1JH9r9tMAHyQeJ06ZYkePuUvHenGVDviGwWsbPNoT8KP6rxGIdgySoyKGWUWedMSeglGuD7AtQno+boW2Od8PymCXxAKaV3HeHx3vHyRcWoWCYDlrhVTLrVFbJ0KsZhNvAecOpiGgSnoFNIVZDhyryLHZnNMU0lHZGo3EreKvwEPSHYfBe8HUaf1ZHE2howdc1pg1CMzXCKmDagg6kC8tuFxWTT4Ol+vKra0ekie6CtAL53xGXtBgXYes4RHr7qESIlJ7wfmbdKz06lnadRGuACEnn14ee3qRTcEZmK7HZKj2SqGsuxFsyyWd8iV/CgmEZSnhNL/K+hs9jihDVfC2qJWeVfHU2Lb+IzjGfp1L+tnv7ocmWV4p5tOdFGNsuM08xYBY825UZG/gh+SW070JT+L6hJPcNf/aSIj9IanPNOaLPuR4DvoPFbx3Rm/PIwxUhdS0NaEzuJrJhZGkpYlegK1PCPmFO5KyPXuOsvZJobPj5atKIcKph9Qj+P14jobgb07Yx6uAI7MbXMvj4XgLLLpZdwnLzQfVfnutpAYkc1+9DHqINuwgKb2B/Nt2wfmOva2O5CegWBA0NwEErCtY8wdjR1iYo7AXDyFn7ZnQ60g9w9+ldCMtS2d+7/Ts99sByV1Lv7Gzlsq8zg6zhyI57DjeqH4zLsVtRJTwfinHRkyLNPLyRiVLgWU8J1bhcWqzET7WmJfbtxMXeItG6ZJAkL5zoEl5bHz8lpk+n9789g6ZBPwv2JQ+Lgy4IE2jEo8ReXFvixCu08BhoVOosshmSM1+WqPbRDy8oJeI9pgEXHFhmU0mR38CRt72odAHZoBSNZnq599kX5o7SsXx/cTwKU4UAF293RGsM9LUkNuqhWoipToHi6zI8e7ET1P+o/D9cPg6auvXecyV+7qfHwPLb+lkME06jgxtUfoamWwzNcZmZRdIyQmKOPD2gBS8hUV7awKNfp5vCxls5wVZgSMJuoiRfocdwMjrSTdnsHvgVh2ueIIhSm54ChiLimbQkl7MJ8zqrg50jRYP5iBWHESCLfJzVoZhm/aen+JfyBs+EOmL/rMlRCQ2D6J36kSHK4D7e7lbhE9/7H9f39Rlgg2Yd6AZKXtNnJ1+BR8mBPvU/cIzo3gqc2f8lhl/6/iitFv+lczI9RAZdAjDU114cqcKxqUiVZV+AjLjrjyIjPGb+I2E0nnvz+hvYOBPuZPk7AkfK0BDQFCAazVX/YhEAik+wF7xeKuanDqN+WvNVSpkNaio2qdG2CO0debWgHczU/3rnfn1IIsWjExdnBxU+ldM/vPsTcrLWTwocHs5GTy4T3yh7yHtJef/xDPN3mdYbSwELIzbGlTQyIqxkHNt+AZ04KAyvZZLiZipTBMct0YS4PV55ZA/WjIvK1NmrsbwdH5lumBLoN1H3+MLREKzgW9vsYOSN2g/yGT0zY7pjtxLmtvvtJeXZwct80L+5E5JxtmNKIfys5Fwig/yFl1IR8MIlCF88YIK6TR6W6TZR5a9W0fgAT4g/N9cb1CI6IjQIwkq4US77VANT9r72J1+fo8ArRWaDtJEu2wj0Qr/Vr99mx9oRGm2iQXamj+UDha8AAAA="
  , QI = {
    computed: {
        ...I(["session", "grimoire", "players", "keybindings", "settings"]),
        ...D("game", ["hasGardener"]),
        ...D("user", ["isStoryteller"]),
        hasGardener() {
            return this.players.npcs.some( ({id: e}) => e === "gardener")
        }
    },
    methods: {
        ...j(["setGrimoireMode"]),
        ...j("settings", ["toggleTutorialDisabled"]),
        ...$("game", ["distributeRoles"]),
        beginFirstNight() {
            this.$store.dispatch("game/togglePhase"),
            this.setGrimoireMode("grimoire")
        }
    }
}
  , ZI = {
    class: "overlay",
    id: "first-night"
}
  , XI = {
    key: 0
}
  , KI = {
    class: "shortcut"
}
  , YI = ["checked"];
function JI(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("i18n-t");
    return r(),
    u("div", ZI, [a("h4", null, [a("span", null, d(e.$t("overlays.firstnight.title")), 1), b(l, {
        icon: "times-circle",
        onClick: s[0] || (s[0] = M(c => e.setGrimoireMode("grimoire"), ["stop"]))
    })]), o.hasGardener && !o.hasGardener ? (r(),
    C(g, {
        key: 0,
        scope: "global",
        keypath: "overlays.firstnight.gardener_text"
    }, {
        default: S( () => [a("div", {
            class: y(["button", {
                disabled: e.session.hook.name
            }]),
            onClick: s[1] || (s[1] = c => e.distributeRoles())
        }, d(e.$t("overlays.firstnight.gardener_button")), 3)]),
        _: 1
    })) : (r(),
    u(_, {
        key: 1
    }, [b(g, {
        keypath: "overlays.firstnight.reminders",
        scope: "global"
    }, {
        default: S( () => [...s[4] || (s[4] = [a("img", {
            src: FI,
            alt: "Reminder token"
        }, null, -1)])]),
        _: 1
    }), s[6] || (s[6] = a("br", null, null, -1)), e.players.players.length > 6 ? (r(),
    u("span", XI, [v(d(e.$t("overlays.firstnight.bluffs")) + " ", 1), s[5] || (s[5] = a("br", null, null, -1))])) : p("", !0), a("div", {
        class: "button",
        onClick: s[2] || (s[2] = c => o.beginFirstNight())
    }, [a("em", KI, d(e.keybindings.toggleNight[0].trim()), 1), v(" " + d(e.$t("overlays.firstnight.button_begin")), 1)])], 64)), a("label", null, [a("input", {
        type: "checkbox",
        checked: !e.settings.game.isTutorialDisabled,
        onChange: s[3] || (s[3] = (...c) => e.toggleTutorialDisabled && e.toggleTutorialDisabled(...c))
    }, null, 40, YI), b(l, {
        icon: e.settings.game.isTutorialDisabled ? "circle" : "check-circle"
    }, null, 8, ["icon"]), v(" " + d(e.$t("modals.settings.setting_tutorial")), 1)])])
}
const $I = O(QI, [["render", JI], ["__scopeId", "data-v-0e90414c"]])
  , xI = {
    computed: {
        ...I("players", ["players"]),
        ...I(["session", "grimoire", "vote", "keybindings", "settings"]),
        ...D("user", ["isStoryteller"]),
        ...D("players", ["playerName"])
    },
    data() {
        return {
            showSwap: [],
            showMove: []
        }
    },
    methods: {
        ...j(["setGrimoireMode"]),
        ...j("settings", ["toggleTutorialDisabled"]),
        addPlayer() {
            !this.isStoryteller || this.players.length >= 20 || this.$store.dispatch("players/addPlayer")
        },
        async randomizeSeatings() {
            if (!(!this.isStoryteller || this.vote.nomination))
                try {
                    if (await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "overlays.gatherplayers.shuffle_title",
                        text: "overlays.gatherplayers.shuffle_text"
                    })) {
                        const s = this.players.map( (t, n) => [Math.random(), n]).sort( (t, n) => t[0] - n[0]).map(t => t[1]);
                        this.$store.dispatch("players/movePlayers", s)
                    }
                } catch {}
        },
        clearEmpty() {
            if (!this.isStoryteller || this.vote.nomination)
                return;
            const e = [];
            this.players.forEach( (s, t) => {
                var n;
                (n = this.session.users.get(s.id)) != null && n.isOnline || e.push(t)
            }
            ),
            this.$store.dispatch("players/removePlayers", e)
        },
        async clearPlayers() {
            if (!(!this.isStoryteller || this.vote.nomination))
                try {
                    await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "overlays.gatherplayers.clear_title",
                        text: "overlays.gatherplayers.clear_text"
                    }) && (this.$store.dispatch("game/end"),
                    this.$store.commit("players/clearPlayers"))
                } catch {}
        },
        movePlayer(e, s) {
            const t = Number(e.dataTransfer.getData("player"));
            if (this.showMove = [],
            !Number.isInteger(t) || !Number.isInteger(s) || !this.isStoryteller || this.vote.nomination)
                return;
            const n = Array.from(this.players.keys());
            n.splice(t < s + 1 ? s : s + 1, 0, n.splice(t, 1)[0]),
            this.$store.dispatch("players/movePlayers", n)
        },
        swapPlayer(e, s) {
            const t = Number(e.dataTransfer.getData("player"));
            if (this.showSwap = [],
            !Number.isInteger(t) || !Number.isInteger(s) || !this.isStoryteller || this.vote.nomination)
                return;
            const n = Array.from(this.players.keys());
            n[t] = s,
            n[s] = t,
            this.$store.dispatch("players/movePlayers", n)
        },
        selectEdition() {
            this.$store.commit("toggleModal", {
                name: "edition"
            }),
            this.$store.commit("setGrimoireMode", "rules")
        }
    }
}
  , e4 = {
    id: "gather"
}
  , s4 = {
    key: 0,
    class: "textbox"
}
  , t4 = {
    class: "shortcut"
}
  , i4 = ["checked"]
  , o4 = {
    class: "button-group"
}
  , n4 = {
    class: "button-group"
}
  , a4 = {
    key: 0
}
  , r4 = ["onDragenter", "onDrop", "onDragleave"]
  , l4 = ["onDragenter", "onDrop", "onDragleave"];
function c4(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("i18n-t");
    return r(),
    u("div", e4, [e.settings.game.isTutorialDisabled ? p("", !0) : (r(),
    u("div", s4, [a("h4", null, [a("span", null, d(e.$t("overlays.gatherplayers.title")), 1), b(l, {
        icon: "times-circle",
        onClick: s[0] || (s[0] = M(c => e.setGrimoireMode("grimoire"), ["stop"]))
    })]), v(" " + d(e.$t("overlays.gatherplayers.text")) + " ", 1), e.players.length >= 7 ? (r(),
    C(g, {
        key: 0,
        keypath: "overlays.gatherplayers.text2",
        scope: "global"
    }, {
        default: S( () => [a("div", {
            class: "button",
            onClick: s[1] || (s[1] = c => o.selectEdition())
        }, [a("em", t4, d(e.keybindings.toggleEdition[0].trim()), 1), v(" " + d(e.$t("overlays.gatherplayers.button_select")), 1)])]),
        _: 1
    })) : (r(),
    u(_, {
        key: 1
    }, [v(d(e.$t("overlays.gatherplayers.warning")), 1)], 64)), a("label", null, [a("input", {
        type: "checkbox",
        checked: !e.settings.game.isTutorialDisabled,
        onChange: s[2] || (s[2] = (...c) => e.toggleTutorialDisabled && e.toggleTutorialDisabled(...c))
    }, null, 40, i4), b(l, {
        icon: e.settings.game.isTutorialDisabled ? "circle" : "check-circle"
    }, null, 8, ["icon"]), v(" " + d(e.$t("modals.settings.setting_tutorial")), 1)])])), a("div", o4, [a("div", {
        class: "button primary",
        onClick: s[3] || (s[3] = (...c) => o.addPlayer && o.addPlayer(...c))
    }, [b(l, {
        icon: "plus-circle"
    }), v(" " + d(e.$t("overlays.gatherplayers.button_add")), 1)]), a("div", {
        class: "button secondary",
        onClick: s[4] || (s[4] = (...c) => o.randomizeSeatings && o.randomizeSeatings(...c))
    }, [b(l, {
        icon: "dice"
    }), v(" " + d(e.$t("overlays.gatherplayers.button_shuffle")), 1)])]), a("div", n4, [e.session.sessionId ? (r(),
    u("div", {
        key: 0,
        class: "button",
        onClick: s[5] || (s[5] = (...c) => o.clearEmpty && o.clearEmpty(...c))
    }, [b(l, {
        icon: "trash-alt"
    }), v(" " + d(e.$t("overlays.gatherplayers.button_clear")), 1)])) : p("", !0), a("div", {
        class: "button",
        onClick: s[6] || (s[6] = (...c) => o.clearPlayers && o.clearPlayers(...c))
    }, [b(l, {
        icon: "trash-alt"
    }), v(" " + d(e.$t("overlays.gatherplayers.button_clearall")), 1)])]), b(q, {
        name: "fade"
    }, {
        default: S( () => [e.grimoire.playerDragState > -1 ? (r(),
        u("ul", {
            key: 0,
            class: y(["drop circle", ["size-" + e.players.length]])
        }, [(r(!0),
        u(_, null, B(e.players, (c, h) => (r(),
        u("li", {
            key: h,
            class: y({
                swap: i.showSwap[h],
                move: i.showMove[h]
            })
        }, [e.grimoire.playerDragState !== h ? (r(),
        u("div", a4, [b(l, {
            class: "move",
            icon: "arrow-circle-right"
        }), e.grimoire.playerDragState !== (h === e.players.length - 1 ? 0 : h + 1) ? (r(),
        u("div", {
            key: 0,
            class: "after",
            onDragenter: M(m => i.showMove[h] = 1, ["prevent"]),
            onDragover: s[7] || (s[7] = M( () => {}
            , ["prevent"])),
            onDrop: m => o.movePlayer(m, h),
            onDragleave: m => i.showMove[h] = 0
        }, d(e.$t("overlays.gatherplayers.move", [e.$t(...e.playerName(c))])), 41, r4)) : p("", !0), b(l, {
            class: "swap",
            icon: "exchange-alt"
        }), a("div", {
            class: "name",
            onDragenter: M(m => i.showSwap[h] = 1, ["prevent"]),
            onDragover: s[8] || (s[8] = M( () => {}
            , ["prevent"])),
            onDrop: m => o.swapPlayer(m, h),
            onDragleave: m => i.showSwap[h] = 0
        }, d(e.$t("overlays.gatherplayers.swap", [e.$t(...e.playerName(c))])), 41, l4)])) : p("", !0)], 2))), 128))], 2)) : p("", !0)]),
        _: 1
    })])
}
const d4 = O(xI, [["render", c4], ["__scopeId", "data-v-3da09c94"]])
  , u4 = {
    components: {
        FontAwesomeIcon: Y
    },
    computed: {
        ...I("players", ["players"]),
        ...I("user", ["user"]),
        ...I(["session", "grimoire"]),
        ...D("session", ["pointedPlayers"]),
        ...D("user", ["isStoryteller", "hasGrimoireAccess", "isSpectator"]),
        ...D("game", ["isNight"]),
        ...D("players", ["playerName"]),
        userPoint() {
            const e = this.players.findIndex( ({id: s}) => s === this.user.id);
            return this.session.pointers[e]
        }
    },
    data() {
        return {
            pointingTimer: null
        }
    },
    methods: {
        ...j(["setGrimoireMode"]),
        countdown() {
            this.session.isPointing !== "countdown" && (this.$store.commit("session/setPointingState", "countdown"),
            this.pointingTimer = setTimeout( () => {
                this.$store.commit("session/setPointingState", "locked")
            }
            , 4e3))
        },
        close() {
            this.session.isPointing === "countdown" && (clearInterval(this.pointingTimer),
            this.$store.commit("session/setPointingState", "locked")),
            this.setGrimoireMode("grimoire")
        }
    },
    watch: {
        "grimoire.mode"() {
            this.grimoire.mode !== "pointing" && clearTimeout(this.pointingTimer)
        },
        "session.isPointing"() {
            this.session.isPointing === "countdown" ? this.isNight || this.$store.commit("playSound", "countdown") : this.$store.commit("removeSound", {
                name: "countdown"
            })
        }
    }
}
  , g4 = {
    class: "overlay",
    id: "pointing"
}
  , m4 = {
    key: 0
}
  , h4 = {
    key: 1
}
  , p4 = {
    key: 0
}
  , A4 = {
    class: "secondary"
}
  , b4 = {
    key: 1
}
  , f4 = {
    key: 2,
    class: "button-group"
}
  , v4 = {
    key: 0,
    class: "countdown"
}
  , _4 = {
    class: "animation-critical"
};
function y4(e, s, t, n, i, o) {
    const l = k("font-awesome-icon");
    return r(),
    u("div", g4, [a("div", null, [e.session.isPointing === "locked" || e.hasGrimoireAccess ? (r(),
    u(_, {
        key: 0
    }, [v(d(e.session.isPointing === "locked" ? e.$t("overlays.pointing.title_locked", e.pointedPlayers.length) : e.$t("overlays.pointing.title_open", e.pointedPlayers.length)) + " ", 1), e.pointedPlayers.length ? (r(),
    u("span", m4, [(r(!0),
    u(_, null, B(e.pointedPlayers, g => (r(),
    u("b", {
        key: g
    }, d(e.$t(...e.playerName(e.players[g]))), 1))), 128))])) : (r(),
    u("span", h4, d(e.$t("overlays.pointing.nobody")), 1))], 64)) : p("", !0)]), !e.isStoryteller && e.players[o.userPoint] ? (r(),
    u("div", p4, [v(d(e.$t("overlays.pointing.you_pointed")) + " ", 1), a("b", A4, d(e.$t(...e.playerName(e.players[o.userPoint]))), 1)])) : !e.isStoryteller && !e.isSpectator && e.session.isPointing !== "locked" ? (r(),
    u("div", b4, d(e.$t("overlays.pointing.prompt")), 1)) : e.isStoryteller ? (r(),
    u("div", f4, [a("div", {
        class: y(["button primary", {
            disabled: e.session.isPointing === "countdown"
        }]),
        onClick: s[0] || (s[0] = (...g) => o.countdown && o.countdown(...g))
    }, [b(l, {
        icon: "stopwatch"
    }), v(" " + d(e.$t("overlays.pointing.button_countdown")), 1)], 2), a("div", {
        class: "button",
        onClick: s[1] || (s[1] = (...g) => o.close && o.close(...g))
    }, [b(l, {
        icon: "times-circle"
    }), v(" " + d(e.$t("common.button_close")), 1)])])) : p("", !0), b(q, {
        name: "blur"
    }, {
        default: S( () => [e.session.isPointing === "countdown" ? (r(),
        u("div", v4, [s[2] || (s[2] = a("span", {
            class: "animation-critical"
        }, "3", -1)), s[3] || (s[3] = a("span", {
            class: "animation-critical"
        }, "2", -1)), s[4] || (s[4] = a("span", {
            class: "animation-critical"
        }, "1", -1)), a("span", _4, d(e.$t("overlays.pointing.countdown_freeze")), 1)])) : p("", !0)]),
        _: 1
    })])
}
const w4 = O(u4, [["render", y4], ["__scopeId", "data-v-40ab398d"]])
  , k4 = {
    computed: {
        ...I(["session", "grimoire"]),
        ...I("players", ["players", "storytellers"]),
        ...D("user", ["isStoryteller"]),
        isEvilWin() {
            return !!this.session.hook.params
        },
        isPlayersRevealed() {
            return this.players.every( ({revealed: e}) => e)
        }
    },
    data() {
        return {
            revealTimeouts: []
        }
    },
    methods: {
        revealGameResult() {
            var e;
            (e = this.storytellers[0]) != null && e.revealed || this.$store.commit("players/updateStoryteller", {
                property: "revealed",
                value: !0
            })
        },
        revealPlayers(e=100) {
            this.clearRevealTimeouts(),
            this.players.filter( ({revealed: s}) => !s).forEach( (s, t) => {
                this.revealTimeouts.push(setTimeout( () => {
                    s.revealed || (this.$store.commit("players/updatePlayer", {
                        player: s,
                        property: "revealed",
                        value: !0
                    }),
                    this.isPlayersRevealed && this.clearRevealTimeouts())
                }
                , e * t))
            }
            )
        },
        clearRevealTimeouts() {
            this.revealTimeouts.forEach(e => clearTimeout(e)),
            this.revealTimeouts = []
        }
    },
    beforeUnmount() {
        this.clearRevealTimeouts()
    }
}
  , C4 = {
    key: 0
}
  , S4 = {
    key: 1
}
  , P4 = {
    key: 0,
    class: "info overlay"
}
  , T4 = {
    class: "button-group"
};
function I4(e, s, t, n, i, o) {
    var g, c, h;
    const l = k("i18n-t");
    return r(),
    u("div", {
        id: "reveal",
        class: y({
            "game-result": (g = e.storytellers[0]) == null ? void 0 : g.revealed
        })
    }, [b(l, {
        scope: "global",
        tag: "div",
        keypath: "overlays.reveal.result",
        class: y(["result", {
            evil: o.isEvilWin
        }])
    }, {
        default: S( () => [o.isEvilWin ? (r(),
        u("b", C4, d(e.$t("overlays.reveal.evil")), 1)) : (r(),
        u("b", S4, d(e.$t("overlays.reveal.good")), 1))]),
        _: 1
    }, 8, ["class"]), !i.revealTimeouts.length && !o.isPlayersRevealed && e.isStoryteller ? (r(),
    u("div", P4, [a("h4", null, d(e.$t("overlays.reveal.title")), 1), v(" " + d(e.$t("overlays.reveal.text")) + " ", 1), a("div", T4, [a("div", {
        class: y(["button", {
            disabled: (c = e.storytellers[0]) == null ? void 0 : c.revealed,
            primary: !((h = e.storytellers[0]) != null && h.revealed)
        }]),
        onClick: s[0] || (s[0] = m => o.revealGameResult())
    }, d(e.$t("overlays.reveal.button_result")), 3), a("div", {
        class: "button secondary",
        onClick: s[1] || (s[1] = m => o.revealPlayers(1e3))
    }, d(e.$t("overlays.reveal.button_remaining")), 1), a("div", {
        class: "button",
        onClick: s[2] || (s[2] = m => o.revealPlayers())
    }, d(e.$t("common.button_cancel")), 1)])])) : p("", !0)], 2)
}
const M4 = O(k4, [["render", I4], ["__scopeId", "data-v-7dd2f8cc"]])
  , R4 = {
    computed: {
        ...I(["keybindings", "settings"]),
        ...I("players", ["players"])
    },
    methods: {
        ...j(["setGrimoireMode", "toggleModal"]),
        ...j("settings", ["toggleTutorialDisabled"]),
        characters() {
            this.toggleModal({
                name: "roles"
            }),
            this.setGrimoireMode("firstnight")
        }
    }
}
  , D4 = {
    class: "overlay",
    id: "rules"
}
  , E4 = {
    class: "shortcut"
}
  , N4 = ["checked"];
function B4(e, s, t, n, i, o) {
    const l = k("font-awesome-icon")
      , g = k("i18n-t");
    return r(),
    u("div", D4, [a("h4", null, [a("span", null, d(e.$t("overlays.rules.title")), 1), b(l, {
        icon: "times-circle",
        onClick: s[0] || (s[0] = M(c => e.setGrimoireMode("grimoire"), ["stop"]))
    })]), b(g, {
        keypath: "overlays.rules.text",
        scope: "global"
    }, {
        default: S( () => [a("div", {
            class: "button",
            onClick: s[1] || (s[1] = c => o.characters())
        }, [a("em", E4, d(e.keybindings.toggleRoles[0].trim()), 1), v(" " + d(e.$t("overlays.rules.button_select")), 1)])]),
        _: 1
    }), s[3] || (s[3] = a("br", null, null, -1)), v(" " + d(e.$t("overlays.rules.text2")) + " ", 1), a("label", null, [a("input", {
        type: "checkbox",
        checked: !e.settings.game.isTutorialDisabled,
        onChange: s[2] || (s[2] = (...c) => e.toggleTutorialDisabled && e.toggleTutorialDisabled(...c))
    }, null, 40, N4), b(l, {
        icon: e.settings.game.isTutorialDisabled ? "circle" : "check-circle"
    }, null, 8, ["icon"]), v(" " + d(e.$t("modals.settings.setting_tutorial")), 1)])])
}
const V4 = O(R4, [["render", B4], ["__scopeId", "data-v-24c029fc"]])
  , O4 = {
    components: {
        Timer: gl
    },
    computed: {
        ...I(["edition", "grimoire", "keybindings", "game", "settings"]),
        ...I("players", ["players"]),
        ...D("user", ["isStoryteller"]),
        ...D("chat", ["isVideoWhisper"]),
        ...D("game", ["isNight", "lastPhase"]),
        backgroundImage() {
            return this.edition.isOfficial || this.grimoire.theme <= 0 ? null : this.edition.logo && this.settings.general.isImageOptIn ? `url(${this.edition.logo})` : this.edition.name && !this.edition.hideTitle ? `url(${new URL("/assets/logo-label-q983_f8F.webp",import.meta.url).href})` : `url(${new URL("/assets/logo-Dh6MJCdH.webp",import.meta.url).href})`
        },
        teams() {
            const {players: e} = this.$store.state.players
              , s = this.$store.getters["players/nonTravellers"]
              , t = e.filter(i => i.isDead !== !0 && i.role.team !== "traveller").length
              , n = e.filter(i => i.isDead !== !0 && i.role.team === "traveller").length;
            return {
                ...ze[s - 5],
                traveller: e.length - s,
                nonTravellers: s,
                alive: t,
                aliveTravellers: n,
                votes: t + n + e.filter(i => i.isDead === !0 && i.isVoteless !== !0).length
            }
        }
    },
    methods: {
        ...j(["toggleTownSquare"]),
        gatherPlayers() {
            !this.isStoryteller || this.players.length >= 20 || this.$store.commit("setGrimoireMode", "gather")
        }
    }
}
  , j4 = {
    key: 0,
    class: "tutorial"
}
  , U4 = {
    class: "shortcut"
}
  , H4 = {
    key: 1,
    class: "meta"
}
  , q4 = {
    key: 3,
    class: "box"
}
  , L4 = {
    key: 0,
    class: "phase"
}
  , z4 = ["title"]
  , G4 = ["title"]
  , W4 = {
    class: "townsfolk"
}
  , F4 = {
    class: "townsfolk"
}
  , Q4 = {
    class: "minion"
}
  , Z4 = {
    class: "minion"
}
  , X4 = {
    class: "outsider"
}
  , K4 = {
    class: "outsider"
}
  , Y4 = {
    class: "demon"
}
  , J4 = {
    class: "demon"
};
function $4(e, s, t, n, i, o) {
    const l = k("i18n-t")
      , g = k("Timer")
      , c = k("font-awesome-icon");
    return r(),
    u("div", {
        class: y(["town-info", {
            "few-players": e.players.length < 5
        }])
    }, [o.backgroundImage ? (r(),
    u("div", {
        key: 0,
        class: "edition",
        style: L({
            backgroundImage: o.backgroundImage
        })
    }, null, 4)) : p("", !0), b(q, {
        name: "fade"
    }, {
        default: S( () => [e.players.length - o.teams.traveller < 5 && e.grimoire.mode !== "gather" ? (r(),
        u("div", j4, [b(l, {
            keypath: "overlays.towninfo.title",
            scope: "global"
        }, {
            default: S( () => [a("b", null, d(e.$t("common.title")), 1)]),
            _: 1
        }), s[2] || (s[2] = a("br", null, null, -1)), e.isStoryteller ? (r(),
        C(l, {
            key: 0,
            keypath: "overlays.towninfo.text_st",
            scope: "global"
        }, {
            default: S( () => [a("div", {
                class: "button",
                onClick: s[0] || (s[0] = (...h) => o.gatherPlayers && o.gatherPlayers(...h))
            }, [a("em", U4, d(e.keybindings.modeGather[0].trim()), 1), v(" " + d(e.$t("overlays.towninfo.button_gather")), 1)])]),
            _: 1
        })) : (r(),
        u(_, {
            key: 1
        }, [v(d(e.$t("overlays.towninfo.text_player")), 1)], 64))])) : p("", !0)]),
        _: 1
    }), !e.edition.isOfficial && e.edition.name && e.grimoire.theme > 0 && (!e.edition.hideTitle || !e.settings.general.isImageOptIn) ? (r(),
    u("span", H4, d(e.edition.name) + " " + d(e.edition.author ? e.$t("overlays.towninfo.script_by", [e.edition.author]) : ""), 1)) : p("", !0), e.grimoire.mode === "grimoire" && !e.isVideoWhisper ? (r(),
    C(g, {
        key: 2
    })) : p("", !0), e.players.length - o.teams.traveller >= 5 ? (r(),
    u("div", q4, [e.game.isRunning && e.game.history.length ? (r(),
    u("b", L4, [e.lastPhase ? e.isNight ? (r(),
    u(_, {
        key: 1
    }, [b(c, {
        icon: "cloud-moon"
    }), v(" " + d(e.$t("grimoire.phases.night", Math.ceil(e.game.phase / 2))), 1)], 64)) : (r(),
    u(_, {
        key: 2
    }, [b(c, {
        icon: "sun"
    }), v(" " + d(e.$t("grimoire.phases.day", e.game.phase / 2)), 1)], 64)) : (r(),
    u(_, {
        key: 0
    }, [v(d(e.$t("grimoire.phases.start")), 1)], 64))])) : p("", !0), a("table", null, [a("tbody", null, [a("tr", null, [a("td", null, d(e.$t("grimoire.players")), 1), a("td", null, [v(d(o.teams.nonTravellers) + " ", 1), o.teams.traveller ? (r(),
    u("span", {
        key: 0,
        class: "travellers",
        title: e.$t("grimoire.traveller", o.teams.traveller)
    }, " + " + d(o.teams.traveller), 9, z4)) : p("", !0)]), a("td", null, d(e.$t("overlays.towninfo.alive")), 1), a("td", null, [v(d(o.teams.alive) + " ", 1), o.teams.aliveTravellers ? (r(),
    u("span", {
        key: 0,
        class: "travellers",
        title: e.$t("grimoire.traveller", o.teams.traveller)
    }, " + " + d(o.teams.aliveTravellers), 9, G4)) : p("", !0)])]), e.players.length - o.teams.traveller >= 5 ? (r(),
    u(_, {
        key: 0
    }, [a("tr", null, [a("td", W4, d(e.$t("grimoire.townsfolk", o.teams.townsfolk)), 1), a("td", F4, d(o.teams.townsfolk), 1), a("td", Q4, d(e.$t("grimoire.minion", o.teams.minion)), 1), a("td", Z4, d(o.teams.minion), 1)]), a("tr", null, [a("td", X4, d(e.$t("grimoire.outsider", o.teams.outsider)), 1), a("td", K4, d(o.teams.outsider), 1), a("td", Y4, d(e.$t("grimoire.demon", o.teams.demon)), 1), a("td", J4, d(o.teams.demon), 1)])], 64)) : p("", !0)])]), e.grimoire.isTownSquare ? (r(),
    C(l, {
        key: 1,
        scope: "global",
        keypath: "overlays.towninfo.return",
        tag: "p",
        onClick: s[1] || (s[1] = h => e.toggleTownSquare())
    }, {
        default: S( () => [a("b", null, d(e.keybindings.toggleTownSquare[0].trim()), 1)]),
        _: 1
    })) : p("", !0)])) : p("", !0)], 2)
}
const x4 = O(O4, [["render", $4], ["__scopeId", "data-v-7c8b95eb"]])
  , eM = {
    components: {
        FontAwesomeIcon: Y
    },
    inject: ["bindShortcut", "unbindShortcut"],
    computed: {
        ...I("players", ["players", "npcs", "storytellers"]),
        ...I("user", ["user"]),
        ...I(["grimoire", "vote", "keybindings", "rolesAvailable"]),
        ...D("players", ["alive", "playerName"]),
        ...D("user", ["isStoryteller"]),
        isBigWig() {
            return this.vote.nominationType === "bigwig" && !this.vote.isInProgress
        },
        isPhases() {
            return !this.vote.isInProgress && this.vote.nominationType === "phases" && this.vote.locked < -1
        },
        isVoudon() {
            return this.players.some(e => e.role.id === "voudon" && !e.isDead)
        },
        majority() {
            return Math.ceil(this.nominee.role.team === "traveller" ? this.players.length / 2 : this.players.filter( ({isDead: e}) => !e).length / 2)
        },
        voteTally() {
            return this.vote.votes.reduce( (e, s) => e + s, 0)
        },
        nominator() {
            return this.players[this.vote.nomination[0]] || {
                role: {},
                id: null
            }
        },
        nominatorStyle() {
            const e = this.players.length
              , s = this.vote.nomination[0];
            return {
                transform: `rotate(${Math.round(s / e * 360)}deg)`,
                transitionDuration: this.vote.speed - 100 + "ms"
            }
        },
        nominee() {
            return this.players[this.vote.nomination[1]] || {
                role: {},
                id: null
            }
        },
        nomineeStyleStatic() {
            const e = this.players.length
              , t = 360 * this.vote.nomination[1] / e;
            return {
                transform: `rotate(${Math.round(t)}deg)`,
                transitionDuration: this.vote.speed - 100 + "ms"
            }
        },
        nomineeStyleMoving() {
            const e = this.players.length
              , s = this.vote.nomination[1]
              , t = Math.max(this.vote.locked, 0)
              , n = 360 * (s + Math.min(t, e)) / e;
            return {
                transform: `rotate(${Math.round(n)}deg)`,
                transitionDuration: this.vote.speed - 100 + "ms"
            }
        },
        player() {
            return this.players.find(e => e.id === this.user.id) || {
                role: {}
            }
        },
        currentVote() {
            const e = this.players.findIndex(s => s.id === this.user.id);
            return e >= 0 ? this.vote.votes[e] : void 0
        },
        currentPlayer() {
            if (!this.vote.isInProgress)
                return this.players[this.vote.nomination[1]];
            const e = Math.max(this.vote.locked, 0);
            return this.players[(this.vote.nomination[1] + e) % this.players.length]
        },
        canVote() {
            var n;
            if (this.isStoryteller || !this.vote.nomination || !this.player.id || this.player.isVoteless && this.nominee.role.team !== "traveller" && ((n = this.player.role) == null ? void 0 : n.id) !== "banshee" && !this.currentVote)
                return !1;
            const e = this.players.length;
            return (this.players.indexOf(this.player) - 1 + e - this.vote.nomination[1]) % e >= Math.max(this.vote.locked, 0) - 1
        },
        secretVoteRole() {
            var e;
            return this.nominee.role.team === "traveller" ? !1 : (e = [...this.players, ...this.storytellers, ...this.npcs.map(s => ({
                role: s
            }))].find( ({role: s}) => {
                var t;
                return (t = s.special) == null ? void 0 : t.some(n => n.type === "vote" && n.name === "hidden")
            }
            )) == null ? void 0 : e.role
        }
    },
    data() {
        return {
            voteTimeout: !1,
            isSelectingPlayer: !1,
            voteDelay: 500
        }
    },
    methods: {
        ...$("vote", ["setMarkedPlayer"]),
        ...j("vote", ["setSelectedPlayer"]),
        ...j(["setPlayerSelectCallback"]),
        nextPhase() {
            this.vote.locked === -3 ? this.$store.commit("vote/lockVote", -2) : this.vote.locked === -2 && this.$store.commit("vote/lockVote", 0)
        },
        selectPlayer() {
            this.isSelectingPlayer ? (this.isSelectingPlayer = !1,
            this.setPlayerSelectCallback()) : (this.isSelectingPlayer = !0,
            this.setPlayerSelectCallback(e => {
                this.setPlayerSelectCallback(),
                this.isSelectingPlayer && (this.isSelectingPlayer = !1,
                this.setSelectedPlayer(e))
            }
            ))
        },
        toggleHidden() {
            this.vote.isInProgress || this.vote.locked > 0 || this.$store.commit("vote/toggleIsHidden", !this.vote.isHidden)
        },
        startCountdown() {
            this.$store.commit("vote/lockVote", -1),
            this.$store.commit("vote/toggleVoteInProgress", !0),
            this.$store.commit("vote/setVoteTimer", setInterval( () => {
                this.startLockingVotes()
            }
            , 4e3))
        },
        start() {
            this.$store.commit("vote/lockVote", 0),
            this.$store.commit("vote/toggleVoteInProgress", !0),
            this.$store.commit("vote/setVoteTimer", setInterval( () => {
                this.vote.nomination && this.startLockingVotes()
            }
            , 1e3))
        },
        startLockingVotes() {
            this.$store.commit("vote/lockVote", 1),
            this.$store.commit("vote/setVoteTimer", setInterval( () => {
                this.vote.nomination && (this.$store.commit("vote/lockVote"),
                this.vote.locked > this.players.length && (this.$store.commit("vote/setVoteTimer"),
                this.$store.commit("vote/toggleVoteInProgress", !1)))
            }
            , this.vote.speed))
        },
        pause() {
            this.vote.voteTimer && this.vote.voteTimer !== "paused" && this.vote.locked >= 1 ? this.$store.commit("vote/setVoteTimer", "paused") : this.vote.voteTimer === "paused" && this.$store.commit("vote/setVoteTimer", setInterval( () => {
                this.$store.commit("vote/lockVote"),
                this.vote.locked > this.players.length && (this.$store.commit("vote/setVoteTimer"),
                this.$store.commit("vote/toggleVoteInProgress", !1))
            }
            , this.vote.speed))
        },
        stop() {
            this.$store.commit("vote/setVoteTimer"),
            this.$store.commit("vote/lockVote", 0),
            this.setSelectedPlayer(-1),
            this.$store.commit("vote/toggleVoteInProgress", !1)
        },
        finish() {
            this.$store.commit("vote/setVoteTimer"),
            this.$store.dispatch("vote/addLogEntry"),
            this.$store.commit("vote/nomination")
        },
        castVote(e) {
            if (!this.canVote)
                return !1;
            const s = this.players.findIndex(t => t.id === this.user.id);
            e === void 0 && (e = this.vote.votes[s] ? 0 : 1),
            s >= 0 && this.vote.votes[s] !== e && !this.voteTimeout && (this.voteTimeout = !0,
            this.$store.commit("vote/castVote", {
                index: s,
                value: e
            }),
            setTimeout( () => {
                this.voteTimeout = !1
            }
            , this.voteDelay))
        },
        markPlayer() {
            var e;
            this.vote.isHidden || this.vote.isInProgress || (((e = this.nominee.role) == null ? void 0 : e.team) !== "traveller" && this.setMarkedPlayer(),
            this.finish())
        },
        async setHighscore() {
            if (this.isStoryteller)
                try {
                    const e = await this.$store.dispatch("openDialogue", {
                        type: "prompt",
                        title: "overlays.vote.highscore_title",
                        placeholder: "overlays.vote.highscore_placeholder",
                        value: this.vote.highscore,
                        text: "overlays.vote.highscore_text"
                    });
                    this.$store.commit("vote/setHighscore", Math.abs(Number(e) || 0))
                } catch {}
        }
    },
    mounted() {
        this.bindShortcut("castVote", () => {
            if (!this.isStoryteller && this.vote.nomination)
                return this.castVote(),
                !0;
            if (this.vote.nomination)
                return this.markPlayer(),
                !0
        }
        ),
        this.bindShortcut("swipeUp2", () => this.castVote(!0)),
        this.bindShortcut("swipeDown2", () => this.castVote(!1))
    },
    beforeUnmount() {
        this.unbindShortcut("castVote"),
        this.unbindShortcut("swipeUp2"),
        this.unbindShortcut("swipeDown2"),
        this.isSelectingPlayer && (this.isSelectingPlayer = !1,
        this.setPlayerSelectCallback())
    },
    watch: {
        "vote.nomination"() {
            this.vote.nomination || this.$store.commit("vote/setVoteTimer")
        },
        "vote.isInProgress"() {
            this.vote.isInProgress || this.$store.commit("vote/setVoteTimer")
        },
        "vote.locked"() {
            const e = (this.vote.nomination[1] + this.vote.locked - 1) % this.players.length;
            this.vote.locked === -1 ? this.$store.commit("playSound", "countdown") : this.vote.locked === 0 ? this.$store.commit("removeSound", {
                name: "countdown"
            }) : this.vote.locked > 0 && this.vote.locked <= this.players.length ? (this.vote.votes[e] && this.vote.locked > 1 && !this.vote.isHidden && this.$store.commit("playSound", "voteCast"),
            this.vote.speed < 1e3 ? this.$store.commit("playSound", "voteTickShort") : this.$store.commit("playSound", "voteTick")) : this.vote.locked === this.players.length + 1 && this.vote.votes[e] && !this.vote.isHidden && this.$store.commit("playSound", "voteCast")
        }
    }
}
  , sM = {
    id: "vote"
}
  , tM = {
    class: "clock"
}
  , iM = {
    class: "arrows"
}
  , oM = ["aria-live", "aria-label"]
  , nM = {
    class: "overlay"
}
  , aM = {
    key: 0
}
  , rM = {
    key: 3,
    class: "majority"
}
  , lM = {
    class: "majority"
}
  , cM = {
    key: 1
}
  , dM = {
    class: "majority"
}
  , uM = {
    class: "majority"
}
  , gM = {
    class: "majority"
}
  , mM = {
    key: 4
}
  , hM = {
    key: 0
}
  , pM = {
    class: "button-group"
}
  , AM = {
    class: "button-group"
}
  , bM = {
    class: "warning"
}
  , fM = {
    class: "button-group"
}
  , vM = {
    key: 0,
    class: "countdown"
}
  , _M = {
    class: "animation-critical"
};
function yM(e, s, t, n, i, o) {
    var c, h;
    const l = k("font-awesome-icon")
      , g = k("i18n-t");
    return r(),
    u("div", sM, [a("div", tM, [s[14] || (s[14] = a("div", {
        class: "background"
    }, [a("span", {
        class: "ring"
    })], -1)), a("div", iM, [a("span", {
        class: "nominator animation-critical",
        style: L(o.nominatorStyle)
    }, null, 4), a("span", {
        class: "nominee-static animation-critical",
        style: L(o.nomineeStyleStatic)
    }, null, 4), a("span", {
        class: "nominee-moving animation-critical",
        style: L(o.nomineeStyleMoving),
        "aria-live": e.vote.locked >= 0 && e.vote.isInProgress ? "assertive" : "",
        "aria-label": e.$t("overlays.vote.pointing", [e.$t(...e.playerName(o.currentPlayer))])
    }, null, 12, oM)])]), a("div", nM, [o.isBigWig && e.vote.selectedPlayer >= 0 ? (r(),
    u("div", aM, [v(d(e.$t("overlays.vote.defense_attorney")) + ": ", 1), a("b", null, d(e.$t(...e.playerName(e.players[e.vote.selectedPlayer]))), 1), e.isStoryteller && e.vote.selectedPlayer >= 0 ? (r(),
    C(l, {
        key: 0,
        icon: "trash-alt",
        class: "icon",
        onClick: s[0] || (s[0] = m => e.setSelectedPlayer(-1)),
        "aria-hidden": "false",
        "aria-label": e.$t("overlays.vote.button_clear_selection")
    }, null, 8, ["aria-label"])) : p("", !0)])) : p("", !0), o.isBigWig && e.vote.selectedPlayer < 0 && (e.isStoryteller || o.nominee.id === e.user.id) ? (r(),
    u(_, {
        key: 1
    }, [v(d(e.$t("overlays.vote.choose_defense_attorney")), 1)], 64)) : o.isPhases ? (r(),
    u(_, {
        key: 2
    }, [v(d(e.vote.locked === -3 ? e.$t("overlays.vote.accusation") : e.$t("overlays.vote.defense")) + ": ", 1), a("b", null, d(e.vote.locked === -3 ? e.$t(...e.playerName(e.players[e.vote.nomination[0]])) : e.$t(...e.playerName(e.players[e.vote.nomination[1]]))), 1)], 64)) : (r(),
    u("div", rM, [o.isVoudon && o.nominee.role.team !== "traveller" ? (r(),
    u(_, {
        key: 0
    }, [e.vote.highscore ? (r(),
    C(g, {
        key: 0,
        scope: "global",
        tag: "span",
        keypath: "overlays.vote.votes",
        plural: e.vote.highscore
    }, {
        default: S( () => [a("b", null, d(Math.round(e.vote.highscore * 10) / 10), 1), a("b", lM, d(Math.round(e.vote.highscore * 10 + 10) / 10), 1)]),
        _: 1
    }, 8, ["plural"])) : (r(),
    u("span", cM, d(e.$t("overlays.vote.no_majority")), 1))], 64)) : o.nominee.role.team === "traveller" || e.vote.highscore < o.majority ? (r(),
    C(g, {
        key: 1,
        scope: "global",
        keypath: "overlays.vote.majority",
        plural: o.majority
    }, {
        default: S( () => [a("b", dM, d(o.majority), 1)]),
        _: 1
    }, 8, ["plural"])) : (r(),
    C(g, {
        key: 2,
        scope: "global",
        keypath: "overlays.vote.votes",
        plural: Math.round(e.vote.highscore * 10) / 10
    }, {
        default: S( () => [a("b", uM, d(Math.round(e.vote.highscore * 10) / 10), 1), a("b", gM, d(Math.round(e.vote.highscore * 10 + 10) / 10), 1)]),
        _: 1
    }, 8, ["plural"])), e.isStoryteller && o.nominee.role.team !== "traveller" ? (r(),
    C(l, {
        key: 3,
        class: "icon",
        icon: "pen-to-square",
        onClick: s[1] || (s[1] = m => o.setHighscore()),
        "aria-hidden": "false",
        "aria-label": e.$t("overlays.vote.button_set_highscore")
    }, null, 8, ["aria-label"])) : p("", !0)])), !e.isStoryteller && e.vote.isHidden ? (r(),
    u("div", mM, [b(l, {
        icon: "star",
        class: "special"
    }), v(" " + d(e.$t("overlays.vote.secret")), 1)])) : p("", !0), e.isStoryteller ? (r(),
    u(_, {
        key: 5
    }, [o.secretVoteRole ? (r(),
    u("label", hM, [b(l, {
        icon: "star",
        class: "special"
    }), a("input", {
        type: "checkbox",
        onChange: s[2] || (s[2] = (...m) => o.toggleHidden && o.toggleHidden(...m))
    }, null, 32), v(" " + d(o.secretVoteRole.name) + ": " + d(e.$t("overlays.vote.secret_vote")) + " ", 1), b(l, {
        icon: e.vote.isHidden ? "check-circle" : "circle"
    }, null, 8, ["icon"])])) : p("", !0), a("div", pM, [o.isBigWig && e.vote.selectedPlayer < 0 ? (r(),
    u("div", {
        key: 0,
        class: y(["button", {
            primary: !i.isSelectingPlayer
        }]),
        onClick: s[3] || (s[3] = m => o.selectPlayer())
    }, [b(l, {
        icon: "user"
    }), v(" " + d(i.isSelectingPlayer ? e.$t("common.button_cancel") : e.$t("overlays.vote.button_select_player")), 1)], 2)) : o.isPhases ? (r(),
    u("div", {
        key: 1,
        class: "button primary",
        onClick: s[4] || (s[4] = (...m) => o.nextPhase && o.nextPhase(...m))
    }, [b(l, {
        icon: "volume-up"
    }), v(" " + d(e.vote.locked === -3 ? e.$t("overlays.vote.button_defense") : e.$t("overlays.vote.button_chat")), 1)])) : e.vote.isInProgress ? (r(),
    u(_, {
        key: 3
    }, [a("div", {
        class: y(["button primary", {
            disabled: !e.vote.voteTimer || e.vote.locked < 1
        }]),
        onClick: s[7] || (s[7] = (...m) => o.pause && o.pause(...m))
    }, [b(l, {
        icon: e.vote.voteTimer === "paused" ? "play-circle" : "pause-circle"
    }, null, 8, ["icon"]), v(" " + d(e.vote.voteTimer === "paused" ? e.$t("overlays.vote.button_resume") : e.$t("overlays.vote.button_pause")), 1)], 2), a("div", {
        class: "button secondary",
        onClick: s[8] || (s[8] = m => o.stop())
    }, [b(l, {
        icon: "redo-alt"
    }), v(" " + d(e.$t("overlays.vote.button_reset")), 1)])], 64)) : (r(),
    u(_, {
        key: 2
    }, [a("div", {
        class: "button primary",
        onClick: s[5] || (s[5] = m => o.startCountdown())
    }, [b(l, {
        icon: "stopwatch"
    }), v(" " + d(e.$t("overlays.vote.button_countdown")), 1)]), a("div", {
        class: "button secondary",
        onClick: s[6] || (s[6] = m => o.start())
    }, [b(l, {
        icon: e.vote.locked > 0 ? "redo-alt" : "play-circle"
    }, null, 8, ["icon"]), v(" " + d(e.vote.locked > 0 ? e.$t("overlays.vote.button_restart") : e.$t("overlays.vote.button_start")), 1)])], 64))]), a("div", AM, [o.nominee.role.team !== "traveller" ? (r(),
    u("div", {
        key: 0,
        class: y(["button mark", {
            disabled: e.vote.isHidden || e.vote.isInProgress
        }]),
        onClick: s[9] || (s[9] = m => o.markPlayer())
    }, [b(l, {
        icon: "skull"
    }), v(" " + d(e.vote.locked > e.players.length && o.voteTally === e.vote.highscore && e.vote.markedPlayer > -1 && o.voteTally ? e.$t("overlays.vote.button_mark_remove") : e.$t("overlays.vote.button_mark")), 1)], 2)) : p("", !0), a("div", {
        class: "button",
        onClick: s[10] || (s[10] = m => o.finish())
    }, [b(l, {
        icon: "times-circle"
    }), v(" " + d(e.$t("common.button_close")), 1)])])], 64)) : o.canVote ? (r(),
    u(_, {
        key: 6
    }, [a("div", bM, [b(l, {
        icon: "warning"
    }), v(" " + d(e.$t("overlays.vote.warning_shortcuts")), 1)]), a("div", fM, [a("div", {
        class: y(["button primary", {
            disabled: !o.currentVote || i.voteTimeout
        }]),
        onClick: s[11] || (s[11] = m => o.castVote(0))
    }, [b(l, {
        icon: "hand"
    }), v(" " + d(e.$t("overlays.vote.button_hand_down")), 1)], 2), a("div", {
        class: y(["button secondary", {
            disabled: o.currentVote && o.currentVote !== 2 || i.voteTimeout
        }]),
        onClick: s[12] || (s[12] = m => o.castVote(1))
    }, [b(l, {
        icon: "hand"
    }), v(" " + d(e.$t("overlays.vote.button_hand_up")), 1)], 2), o.player.isDead && ((c = o.player.role) == null ? void 0 : c.id) === "banshee" && ((h = o.nominee.role) == null ? void 0 : h.team) !== "traveller" ? (r(),
    u("div", {
        key: 0,
        class: y(["button secondary", {
            disabled: o.currentVote === 2 || i.voteTimeout
        }]),
        onClick: s[13] || (s[13] = m => o.castVote(2))
    }, [b(l, {
        icon: "hand"
    }), b(l, {
        icon: "hand"
    }), v(" " + d(e.$t("overlays.vote.button_hand_up")), 1)], 2)) : p("", !0)])], 64)) : p("", !0)]), b(q, {
        name: "blur"
    }, {
        default: S( () => [e.vote.isInProgress && e.vote.locked === -1 ? (r(),
        u("div", vM, [s[15] || (s[15] = a("span", {
            class: "animation-critical"
        }, "3", -1)), s[16] || (s[16] = a("span", {
            class: "animation-critical"
        }, "2", -1)), s[17] || (s[17] = a("span", {
            class: "animation-critical"
        }, "1", -1)), a("span", _M, d(e.$t("overlays.vote.countdown_go")), 1)])) : p("", !0)]),
        _: 1
    })])
}
const wM = O(eM, [["render", yM], ["__scopeId", "data-v-46d76d96"]])
  , kM = {
    name: "WhisperOverlay",
    components: {
        PlayerReminders: la,
        ChatVideo: da,
        FontAwesomeIcon: Y,
        Token: fe
    },
    inject: ["setDropHandler"],
    computed: {
        ...I(["chat", "positions"]),
        ...I("players", ["players", "storytellers"]),
        ...I("user", ["user"]),
        ...I("session", ["users"]),
        ...D("players", ["seatedPlayerMap", "storytellerMap"]),
        usersInWhisper() {
            return [...this.users].filter( ([e]) => {
                var s;
                return this.chat.userChannels.get(e) === this.chat.channel && this.seatedPlayerMap.has(e) && ((s = this.users.get(e)) == null ? void 0 : s.isOnline)
            }
            ).sort( ([e]) => this.chat.video.streams.get(e) ? 1 : -1).map( ([e]) => this.seatedPlayerMap.get(e))
        }
    },
    data() {
        return {
            dragging: !1
        }
    },
    methods: {
        ...j(["toggleModal", "setPosition"]),
        changeCharacter(e) {
            var t;
            if (((t = e.role) == null ? void 0 : t.team) === "traveller")
                return;
            const s = this.storytellers.includes(e) ? this.storytellers.indexOf(e) * -1 - 1 : this.players.indexOf(e);
            this.toggleModal({
                name: "role",
                params: {
                    playerIndex: s
                }
            })
        },
        startDrag(e) {
            e.target.getBoundingClientRect && (e.dataTransfer.dropEffect = "move",
            e.dataTransfer.effectAllowed = "move",
            e.dataTransfer.setData("text/plain", ""),
            this.dragging = {
                x: e.target.getBoundingClientRect().x - e.x,
                y: e.target.getBoundingClientRect().y - e.y,
                offsetHeight: e.target.offsetHeight,
                offsetWidth: e.target.offsetWidth
            },
            this.setDropHandler(this.stopDrag.bind(this)))
        },
        stopDrag(e) {
            const s = this.positions.whisper || {};
            s.x = Math.min(Math.max(0, Math.round(this.dragging.x + e.x)), window.innerWidth - this.dragging.offsetWidth) + "px",
            s.y = Math.min(Math.max(0, Math.round(this.dragging.y + e.y)), window.innerHeight - this.dragging.offsetHeight) + "px",
            this.setPosition({
                name: "whisper",
                value: s
            }),
            this.dragging = !1
        },
        toggleMinimized() {
            const e = this.positions.whisper || {};
            e.minimized = !e.minimized,
            this.setPosition({
                name: "whisper",
                value: e
            })
        }
    },
    beforeMount() {
        this.$nextTick( () => {
            window.whispersElem = this.$refs.whispers
        }
        )
    },
    beforeUnmount() {
        window.whispersElem = null
    }
}
  , CM = ["draggable"]
  , SM = {
    key: 0,
    class: "shroud"
}
  , PM = {
    class: "name"
};
function TM(e, s, t, n, i, o) {
    var m, A, f, T, w, V, N, U;
    const l = k("ChatVideo")
      , g = k("font-awesome-icon")
      , c = k("PlayerReminders")
      , h = k("Token");
    return r(),
    u("ul", {
        id: "whispers",
        ref: "whispers",
        onClick: s[0] || (s[0] = (...P) => o.toggleMinimized && o.toggleMinimized(...P)),
        class: y({
            small: (m = e.positions.whisper) == null ? void 0 : m.minimized,
            dragging: i.dragging,
            positioned: ((A = e.positions.whisper) == null ? void 0 : A.minimized) && ((f = e.positions.whisper) == null ? void 0 : f.x),
            crowded: o.usersInWhisper.length > 6
        }),
        draggable: (T = e.positions.whisper) == null ? void 0 : T.minimized,
        onDragstart: s[1] || (s[1] = M(P => o.startDrag(P), ["stop"])),
        style: L({
            left: (w = e.positions.whisper) != null && w.minimized ? (V = e.positions.whisper) == null ? void 0 : V.x : void 0,
            top: (N = e.positions.whisper) != null && N.minimized ? (U = e.positions.whisper) == null ? void 0 : U.y : void 0
        })
    }, [(r(!0),
    u(_, null, B(o.usersInWhisper, (P, E) => {
        var R, Z, H, G, K, J, x, ce, oe;
        return r(),
        u("li", {
            key: P.id,
            class: y(["video", [{
                storyteller: e.storytellerMap.has(P.id),
                dead: P.isDead,
                "no-vote": P.isVoteless
            }, (Z = (R = e.users.get(P.id)) == null ? void 0 : R.flags) == null ? void 0 : Z.map(te => "flag-" + te), "id-" + P.id]]),
            style: L({
                zIndex: 20 - E,
                "--speaking": `var(--speaking${P.id})`,
                "--volume": `var(--volume${P.id})`
            })
        }, [b(l, {
            "user-id": P.id
        }, null, 8, ["user-id"]), P.isDead ? (r(),
        u("div", SM)) : p("", !0), a("span", PM, [e.chat.video.streams.get(P.id) && ((H = e.chat.usersMuted[P.id]) != null && H.video) ? (r(),
        C(g, {
            key: 0,
            class: y({
                silenced: e.chat.userOverrides.get("novideo-" + P.id) === 0
            }),
            icon: "video-slash",
            title: e.$t("overlays.whisper.video_muted")
        }, null, 8, ["class", "title"])) : p("", !0), (G = e.chat.usersDeafened[P.id]) != null && G.audio || P.id === e.user.id && e.chat.audio.isDeafened ? (r(),
        C(g, {
            key: 1,
            icon: "ear-deaf"
        })) : p("", !0), e.chat.audio.streams.get(P.id) && ((K = e.chat.usersMuted[P.id]) != null && K.audio || e.chat.userOverrides.get("volume-" + P.id) === 0) ? (r(),
        C(g, {
            key: 2,
            class: y({
                silenced: e.chat.userOverrides.get("volume-" + P.id) === 0
            }),
            icon: "microphone-slash",
            title: e.$t("overlays.whisper.muted")
        }, null, 8, ["class", "title"])) : p("", !0), v(" " + d(((J = e.users.get(P.id)) == null ? void 0 : J.username) || e.$t("common.unnamed_user")) + " " + d((x = e.users.get(P.id)) != null && x.pronouns ? "(" + ((ce = e.users.get(P.id)) == null ? void 0 : ce.pronouns) + ")" : ""), 1)]), b(c, {
            player: P
        }, null, 8, ["player"]), b(h, {
            onClick: M(te => o.changeCharacter(P), ["stop"]),
            role: P.role,
            class: y({
                "has-role": (oe = P.role) == null ? void 0 : oe.id
            }),
            alignment: P.alignment
        }, null, 8, ["onClick", "role", "class", "alignment"])], 6)
    }
    ), 128))], 46, CM)
}
const IM = O(kM, [["render", TM], ["__scopeId", "data-v-98a4b62e"]])
  , MM = {
    computed: {
        ...I("players", ["players"]),
        ...I("user", ["user"]),
        ...D("game", ["hasGardener"]),
        ...D("players", ["seatedPlayerMap"]),
        ...D("user", ["isStoryteller", "getOpenEyes"]),
        player() {
            var e;
            return (e = this.seatedPlayerMap.get(this.user.id)) != null ? e : {}
        },
        abilities() {
            var e, s, t;
            return (t = (s = (e = this.player.role) == null ? void 0 : e.special) == null ? void 0 : s.filter(n => n.type === "player" && n.time === "night").map(n => n.name)) != null ? t : []
        }
    },
    data() {
        return {
            loading: !1
        }
    },
    methods: {
        openEyes(e) {
            var t, n, i;
            if (e && ((t = this.player.status) != null && t.includes(e)) || !e && !((n = this.player.status) != null && n.includes("open-eyes")) && !((i = this.player.status) != null && i.includes("peek-eyes")) || this.loading)
                return;
            this.loading = !0;
            const s = this.players.indexOf(this.player);
            s < 0 || (this.$store.commit("players/openEyes", {
                index: s,
                value: e
            }),
            e && (this.$store.commit("chat/setTextRecipient", "system"),
            this.$store.commit("setTab", {
                tab: "text",
                value: 1
            })))
        }
    },
    watch: {
        getOpenEyes() {
            this.loading = !1
        }
    }
}
  , RM = {
    class: "overlay",
    id: "night-action"
}
  , DM = {
    key: 0,
    class: "ability"
}
  , EM = ["data-tooltip"]
  , NM = {
    class: "button-group"
};
function BM(e, s, t, n, i, o) {
    const l = k("i18n-t");
    return r(),
    u("div", RM, [o.abilities.includes("open-eyes") ? (r(),
    u("div", DM, [b(l, {
        keypath: "overlays.nightaction.open-eyes.text",
        scope: "global"
    }, {
        default: S( () => [a("b", {
            "data-tooltip": e.$t(`overlays.nightaction.open-eyes.tooltip_${String(e.getOpenEyes)}`)
        }, d(e.$t(`overlays.nightaction.open-eyes.state_${String(e.getOpenEyes)}`)), 9, EM)]),
        _: 1
    }), a("div", NM, [a("div", {
        class: y(["button primary", {
            disabled: e.getOpenEyes === "open-eyes" || i.loading
        }]),
        onClick: s[0] || (s[0] = g => o.openEyes("open-eyes"))
    }, d(e.$t("overlays.nightaction.open-eyes.button_open")), 3), a("div", {
        class: y(["button secondary", {
            disabled: e.getOpenEyes === "peek-eyes" || i.loading
        }]),
        onClick: s[1] || (s[1] = g => o.openEyes("peek-eyes"))
    }, d(e.$t("overlays.nightaction.open-eyes.button_peek")), 3), a("div", {
        class: y(["button", {
            disabled: !e.getOpenEyes || i.loading
        }]),
        onClick: s[2] || (s[2] = g => o.openEyes(!1))
    }, d(e.$t("overlays.nightaction.open-eyes.button_close")), 3)])])) : p("", !0)])
}
const VM = O(MM, [["render", BM], ["__scopeId", "data-v-312b1633"]])
  , OM = {
    components: {
        NightActionOverlay: VM,
        WhisperOverlay: IM,
        VoteOverlay: wM,
        TownInfoOverlay: x4,
        RulesOverlay: V4,
        RevealOverlay: M4,
        PointingOverlay: w4,
        GatherPlayersOverlay: d4,
        FirstNightOverlay: $I,
        AttentionOverlay: WI
    },
    computed: {
        ...I(["session", "grimoire", "vote"]),
        ...D("user", ["isStoryteller", "hasNightAction"]),
        ...D("chat", ["isVideoWhisper"])
    },
    data() {
        return {}
    }
};
function jM(e, s, t, n, i, o) {
    const l = k("AttentionOverlay")
      , g = k("FirstNightOverlay")
      , c = k("GatherPlayersOverlay")
      , h = k("RulesOverlay")
      , m = k("PointingOverlay")
      , A = k("RevealOverlay")
      , f = k("VoteOverlay")
      , T = k("NightActionOverlay")
      , w = k("TownInfoOverlay")
      , V = k("WhisperOverlay");
    return r(),
    u(_, null, [b(q, {
        name: "blur"
    }, {
        default: S( () => [e.session.hook.name === "attention-gong" ? (r(),
        C(l, {
            key: 0
        })) : p("", !0)]),
        _: 1
    }), b(q, {
        name: "fade"
    }, {
        default: S( () => [e.isStoryteller && e.grimoire.mode === "firstnight" ? (r(),
        C(g, {
            key: 0
        })) : e.isStoryteller && e.grimoire.mode === "gather" ? (r(),
        C(c, {
            key: 1
        })) : e.isStoryteller && e.grimoire.mode === "rules" ? (r(),
        C(h, {
            key: 2
        })) : e.grimoire.mode === "pointing" ? (r(),
        C(m, {
            key: 3
        })) : e.grimoire.mode === "reveal" ? (r(),
        C(A, {
            key: 4
        })) : e.vote.nomination ? (r(),
        C(f, {
            key: 5
        })) : e.hasNightAction ? (r(),
        C(T, {
            key: 6
        })) : (r(),
        C(w, {
            key: 7
        }))]),
        _: 1
    }), b(q, {
        name: "fade"
    }, {
        default: S( () => [e.isVideoWhisper ? (r(),
        C(V, {
            key: 0
        })) : p("", !0)]),
        _: 1
    })], 64)
}
const UM = O(OM, [["render", jM]])
  , Ma = {
    components: {
        NPCModal: n1,
        Overlays: UM,
        SetupModal: Rd,
        VerificationModal: Ia,
        UserModal: Pd,
        ModerationModal: Sd,
        AnnouncementModal: Cd,
        UsersModal: hT,
        TextTab: fP,
        CharacterTab: JS,
        NightOrderTab: MS,
        BluffsTab: uS,
        NPCsTab: lS,
        ChatTab: JC,
        Storyteller: IC,
        HelpModal: yl,
        SettingsModal: _l,
        SignalModal: fw,
        Player: fy,
        RoleModal: My,
        ReminderModal: Hy,
        DialogueModal: ga,
        RulesModal: Qw,
        VoteHistoryModal: $w,
        EditionModal: M1,
        RolesModal: q1
    },
    computed: {
        ...I(["grimoire", "session", "edition", "vote", "settings"]),
        ...I("players", ["players"]),
        ...I("user", ["user"]),
        ...D("user", ["isStoryteller"]),
        ...D("game", ["isNight"]),
        ...D("chat", ["hasAvatars"]),
        getBackground() {
            const {theme: e} = this.grimoire
              , {background: s, isImageOptIn: t} = this.settings.general;
            return this.settings.advanced.chromaKey ? {
                backgroundColor: this.settings.advanced.chromaKey
            } : s ? {
                backgroundImage: `url(${s})`
            } : this.edition.background && t ? {
                backgroundImage: `url(${this.edition.background})`
            } : e ? e > 0 ? {
                backgroundImage: `url(${new URL(Object.assign({
                    "/src/assets/editions/bmr/background1.webp": Rn,
                    "/src/assets/editions/bmr/background1t.webp": $e,
                    "/src/assets/editions/bmr/background2.webp": Dn,
                    "/src/assets/editions/bmr/background2t.webp": xe,
                    "/src/assets/editions/bmr/background3.webp": En,
                    "/src/assets/editions/bmr/background3t.webp": es,
                    "/src/assets/editions/bmr/background4.webp": Nn,
                    "/src/assets/editions/bmr/background4t.webp": ss,
                    "/src/assets/editions/bmr/background5.webp": Bn,
                    "/src/assets/editions/bmr/background5t.webp": ts,
                    "/src/assets/editions/bmr/background6.webp": Vn,
                    "/src/assets/editions/bmr/background6t.webp": is,
                    "/src/assets/editions/custom/background1.webp": On,
                    "/src/assets/editions/custom/background1t.webp": os,
                    "/src/assets/editions/custom/background2.webp": jn,
                    "/src/assets/editions/custom/background2t.webp": ns,
                    "/src/assets/editions/custom/background3.webp": Un,
                    "/src/assets/editions/custom/background3t.webp": as,
                    "/src/assets/editions/custom/background4.webp": Hn,
                    "/src/assets/editions/custom/background4t.webp": rs,
                    "/src/assets/editions/custom/background5.webp": qn,
                    "/src/assets/editions/custom/background5t.webp": ls,
                    "/src/assets/editions/custom/background6.webp": Ln,
                    "/src/assets/editions/custom/background6t.webp": cs,
                    "/src/assets/editions/custom/background7.webp": zn,
                    "/src/assets/editions/custom/background7t.webp": ds,
                    "/src/assets/editions/custom/background8.webp": Gn,
                    "/src/assets/editions/custom/background8t.webp": us,
                    "/src/assets/editions/snv/background1.webp": Wn,
                    "/src/assets/editions/snv/background1t.webp": gs,
                    "/src/assets/editions/snv/background2.webp": Fn,
                    "/src/assets/editions/snv/background2t.webp": ms,
                    "/src/assets/editions/snv/background3.webp": Qn,
                    "/src/assets/editions/snv/background3t.webp": hs,
                    "/src/assets/editions/snv/background4.webp": Zn,
                    "/src/assets/editions/snv/background4t.webp": ps,
                    "/src/assets/editions/snv/background5.webp": Xn,
                    "/src/assets/editions/snv/background5t.webp": As,
                    "/src/assets/editions/snv/background6.webp": Kn,
                    "/src/assets/editions/snv/background6t.webp": bs,
                    "/src/assets/editions/tb/background1.webp": Yn,
                    "/src/assets/editions/tb/background1t.webp": fs,
                    "/src/assets/editions/tb/background2.webp": Jn,
                    "/src/assets/editions/tb/background2t.webp": vs,
                    "/src/assets/editions/tb/background3.webp": $n,
                    "/src/assets/editions/tb/background3t.webp": _s,
                    "/src/assets/editions/tb/background4.webp": xn,
                    "/src/assets/editions/tb/background4t.webp": ys,
                    "/src/assets/editions/tb/background5.webp": ea,
                    "/src/assets/editions/tb/background5t.webp": ws,
                    "/src/assets/editions/tb/background6.webp": sa,
                    "/src/assets/editions/tb/background6t.webp": ks
                })[`/src/assets/editions/${this.edition.isOfficial ? this.edition.id : "custom"}/background${e}.webp`],import.meta.url).href})`
            } : {
                backgroundImage: `url(${new URL(Object.assign({
                    "/src/assets/background.webp": ta,
                    "/src/assets/background1.webp": ia,
                    "/src/assets/background1t.webp": Cs,
                    "/src/assets/background2.webp": oa,
                    "/src/assets/background2t.webp": Ss,
                    "/src/assets/background3.webp": na,
                    "/src/assets/background3t.webp": Ps
                })[`/src/assets/background${-e}.webp`],import.meta.url).href})`
            } : {
                backgroundImage: `url(${new URL("/assets/background1-C0iW8pNy.webp",import.meta.url).href})`
            }
        },
        zoom() {
            let e;
            return this.players.length < 7 ? e = 18 + this.settings.general.tokenZoom : this.players.length <= 10 ? e = 16 + this.settings.general.tokenZoom : this.players.length <= 15 ? e = 14 + this.settings.general.tokenZoom : e = 12 + this.settings.general.tokenZoom,
            `min(${e}vw,${e}vh)`
        },
        scale() {
            return this.players.length < 7 ? (18 + this.settings.general.tokenZoom) / 18 : this.players.length <= 10 ? (16 + this.settings.general.tokenZoom) / 16 : this.players.length <= 15 ? (14 + this.settings.general.tokenZoom) / 14 : (12 + this.settings.general.tokenZoom) / 12
        }
    },
    data() {
        return {
            dropHandler: () => {}
        }
    },
    provide() {
        return {
            setDropHandler: e => {
                this.dropHandler = e
            }
        }
    },
    methods: {
        ...j(["toggleModal", "setGrimoireMode"]),
        doDrop(e) {
            this.dropHandler(e),
            this.dropHandler = () => {}
        },
        backgroundError() {
            this.$store.commit("settings/setBackground", "")
        }
    }
}
  , Jr = () => {
    be(e => ({
        v0cf077d8: e.zoom,
        v37087129: e.scale,
        v2f916c1f: e.settings.general.grimoireOffset
    }))
}
  , $r = Ma.setup;
Ma.setup = $r ? (e, s) => (Jr(),
$r(e, s)) : Jr;
const HM = ["src"]
  , qM = ["src"]
  , LM = {
    id: "left"
};
function zM(e, s, t, n, i, o) {
    const l = k("Player")
      , g = k("Overlays")
      , c = k("Storyteller")
      , h = k("ChatTab")
      , m = k("TextTab")
      , A = k("NPCsTab")
      , f = k("BluffsTab")
      , T = k("NightOrderTab")
      , w = k("CharacterTab")
      , V = k("HelpModal")
      , N = k("ReminderModal")
      , U = k("RoleModal")
      , P = k("SignalModal")
      , E = k("EditionModal")
      , R = k("NPCModal")
      , Z = k("RolesModal")
      , H = k("VoteHistoryModal")
      , G = k("RulesModal")
      , K = k("DialogueModal")
      , J = k("SettingsModal")
      , x = k("UsersModal")
      , ce = k("UserModal")
      , oe = k("AnnouncementModal")
      , te = k("ModerationModal")
      , ge = k("VerificationModal")
      , ne = k("SetupModal");
    return r(),
    u("div", {
        id: "grimoire",
        onDragover: s[2] || (s[2] = M( () => {}
        , ["prevent"])),
        onDragenter: s[3] || (s[3] = M( () => {}
        , ["prevent"])),
        onDrop: s[4] || (s[4] = M( (...ae) => o.doDrop && o.doDrop(...ae), ["prevent"])),
        class: y([{
            [e.grimoire.mode]: e.grimoire.mode !== "grimoire",
            townsquare: e.grimoire.isTownSquare || e.vote.locked > 0 || e.vote.isInProgress,
            storyteller: e.isStoryteller,
            player: e.players.some( ({id: ae}) => ae === e.user.id),
            vote: e.vote.nomination,
            ["nomination-" + e.vote.nominationType]: e.vote.nomination && e.vote.nominationType !== "regular",
            session: e.session.sessionId,
            loading: e.grimoire.loadingState,
            night: e.isNight,
            "has-avatars": e.hasAvatars
        }])
    }, [a("div", {
        id: "center",
        style: L(o.getBackground)
    }, [e.settings.general.background && !e.settings.advanced.chromaKey ? (r(),
    u(_, {
        key: 0
    }, [e.settings.general.background.match(/\.(mp4|webm)$/i) ? (r(),
    u("video", {
        key: 0,
        id: "background",
        onError: s[0] || (s[0] = ae => o.backgroundError()),
        src: e.settings.general.background,
        autoplay: "",
        loop: ""
    }, null, 40, HM)) : (r(),
    u("img", {
        key: 1,
        id: "background-check",
        src: e.settings.general.background,
        onError: s[1] || (s[1] = ae => o.backgroundError()),
        alt: ""
    }, null, 40, qM))], 64)) : p("", !0), b(q, {
        name: "fade"
    }, {
        default: S( () => [(e.isNight || e.session.hook.name === "reveal-grimoire") && !e.settings.advanced.chromaKey ? (r(),
        u("div", {
            key: 0,
            class: y(["night-backdrop", {
                static: e.settings.advanced.hasNightStatic
            }])
        }, null, 2)) : p("", !0)]),
        _: 1
    }), a("h1", null, d(e.grimoire.isTownSquare ? "Town Square" : "Grimoire"), 1), b(q, {
        name: "fade"
    }, {
        default: S( () => [e.grimoire.loadingState ? p("", !0) : (r(),
        u("ul", {
            key: 0,
            class: y(["circle", ["size-" + e.players.length]]),
            role: "list"
        }, [(r(!0),
        u(_, null, B(e.players, (ae, ve) => (r(),
        C(l, {
            key: ae.id || ve,
            player: ae,
            class: y({
                right: ve < Math.floor(e.players.length / 2) && ve > 0,
                left: ve > Math.ceil(e.players.length / 2),
                top: ve < e.players.length / 4 || ve > e.players.length * .75,
                bottom: ve > e.players.length / 4 && ve < e.players.length * .75
            })
        }, null, 8, ["player", "class"]))), 128))], 2))]),
        _: 1
    }), b(g)], 4), a("div", LM, [b(c), b(h), b(m), b(A), b(f)]), b(T), b(w), b(V), b(N), b(U), b(P), b(E), b(R), b(Z), b(H), b(G), b(K), b(J), b(x), b(ce), b(oe), b(te), b(ge), b(ne)], 34)
}
const GM = O(Ma, [["render", zM]])
  , WM = {
    components: {
        AnnouncementModal: Cd,
        VerificationModal: Ia,
        UserModal: Pd,
        ModerationModal: Sd,
        HelpModal: yl,
        SessionMeta: kd,
        FontAwesomeIcon: Y,
        SettingsModal: _l,
        DialogueModal: ga,
        SetupModal: Rd
    },
    inject: ["bindShortcut", "unbindShortcut", "isApp"],
    computed: {
        index() {
            return ll
        },
        ...I("user", ["user", "levels", "accessToken"]),
        ...I(["session", "editionsAvailable", "grimoire", "chat", "npcs", "definitions", "rolesAvailable"]),
        ...D(["roleIconURL"]),
        ...D("user", ["isModerator"]),
        isSubscribed() {
            return !!this.user.level && (!this.user.expires || this.user.expires > Date.now())
        },
        sessions() {
            return this.sessionsList.filter(e => this.showPrivate || e.isPublic).sort( (e, s) => {
                var t, n;
                if (e.isPublic !== s.isPublic)
                    return e.isPublic ? -1 : 1;
                switch (this.sortColumn) {
                case "name":
                    return e.name > s.name ? this.sortAsc : -1 * this.sortAsc;
                case "language":
                    return e.language > s.language ? this.sortAsc : -1 * this.sortAsc;
                case "storytellers":
                    return ((t = e.usersAll.find(i => {
                        var o;
                        return i.id === ((o = e.storytellers[0]) == null ? void 0 : o.id)
                    }
                    )) == null ? void 0 : t.username) > ((n = s.usersAll.find(i => {
                        var o;
                        return i.id === ((o = s.storytellers[0]) == null ? void 0 : o.id)
                    }
                    )) == null ? void 0 : n.username) ? this.sortAsc : -1 * this.sortAsc;
                case "players":
                    return (e.players.length - e.players.filter(i => e.usersAll.some(o => o.id === i.id && o.isOnline)).length - (s.players.length - s.players.filter(i => s.usersAll.some(o => o.id === i.id && o.isOnline)).length) || s.players.length - e.players.length) * this.sortAsc * -1;
                case "script":
                    return e.edition.id === s.edition.id ? e.edition.name > s.edition.name ? this.sortAsc : -1 * this.sortAsc : e.edition.id > s.edition.id ? this.sortAsc : -1 * this.sortAsc;
                case "phase":
                default:
                    return ((e.isRunning ? e.phase : -1) - (s.isRunning ? s.phase : -1)) * this.sortAsc
                }
            }
            ).map(e => {
                var s, t, n;
                return Object.assign({}, e, {
                    count: e.usersAll.filter(i => i.isOnline).length,
                    disabled: e.usersAll.filter(i => i.isOnline).length >= 25 && !e.players.some(i => i.id === this.user.id) && !e.storytellers.some(i => i.id === this.user.id) && !this.isModerator || !this.user.level && !e.boostDuration || e.isPublic && ((s = this.user.flags) == null ? void 0 : s.includes("forced-private")) || e.isPublic && !((t = this.user.flags) != null && t.includes("verified-phone")) && !this.user.level,
                    editionIcon: new URL(Object.assign({
                        "/src/assets/editions/bmr/skull.webp": Ts,
                        "/src/assets/editions/custom/skull.webp": Is,
                        "/src/assets/editions/homebrew/skull.webp": Ms,
                        "/src/assets/editions/snv/skull.webp": Rs,
                        "/src/assets/editions/tb/skull.webp": Ds
                    })[`/src/assets/editions/${(n = e.edition.id) != null ? n : "custom"}/skull.webp`],import.meta.url).href,
                    languageName: qs.getName(e.language),
                    phaseIcon: e.isRunning ? e.phase ? e.phase % 2 ? "cloud-moon" : "sun" : "cloud" : "hourglass-half",
                    phase: e.isRunning ? e.phase ? e.phase % 2 ? this.$t("grimoire.phases.night", {
                        n: Math.ceil(e.phase / 2)
                    }) : this.$t("grimoire.phases.day", {
                        n: Math.ceil(e.phase / 2)
                    }) : this.$t("grimoire.phases.start") : this.$t("grimoire.phases.end"),
                    seats: e.players.filter(i => e.usersAll.some(o => o.id === i.id && o.isOnline)).length + " / " + e.players.length,
                    languageIcon: new URL(Object.assign({
                        "/node_modules/language-icons/icons/aa.svg": Pn,
                        "/node_modules/language-icons/icons/ab.svg": Sn,
                        "/node_modules/language-icons/icons/ae.svg": Cn,
                        "/node_modules/language-icons/icons/af.svg": kn,
                        "/node_modules/language-icons/icons/ak.svg": wn,
                        "/node_modules/language-icons/icons/am.svg": yn,
                        "/node_modules/language-icons/icons/an.svg": _n,
                        "/node_modules/language-icons/icons/ar.svg": vn,
                        "/node_modules/language-icons/icons/as.svg": fn,
                        "/node_modules/language-icons/icons/av.svg": bn,
                        "/node_modules/language-icons/icons/ay.svg": An,
                        "/node_modules/language-icons/icons/az.svg": pn,
                        "/node_modules/language-icons/icons/ba.svg": hn,
                        "/node_modules/language-icons/icons/be.svg": mn,
                        "/node_modules/language-icons/icons/bg.svg": gn,
                        "/node_modules/language-icons/icons/bh.svg": un,
                        "/node_modules/language-icons/icons/bi.svg": dn,
                        "/node_modules/language-icons/icons/bm.svg": cn,
                        "/node_modules/language-icons/icons/bn.svg": ln,
                        "/node_modules/language-icons/icons/bo.svg": rn,
                        "/node_modules/language-icons/icons/br.svg": an,
                        "/node_modules/language-icons/icons/bs.svg": nn,
                        "/node_modules/language-icons/icons/ca.svg": on,
                        "/node_modules/language-icons/icons/ce.svg": tn,
                        "/node_modules/language-icons/icons/ch.svg": sn,
                        "/node_modules/language-icons/icons/co.svg": en,
                        "/node_modules/language-icons/icons/cr.svg": xo,
                        "/node_modules/language-icons/icons/cs.svg": $o,
                        "/node_modules/language-icons/icons/cu.svg": Jo,
                        "/node_modules/language-icons/icons/cv.svg": Yo,
                        "/node_modules/language-icons/icons/cy.svg": Ko,
                        "/node_modules/language-icons/icons/da.svg": Xo,
                        "/node_modules/language-icons/icons/de.svg": Zo,
                        "/node_modules/language-icons/icons/dv.svg": Qo,
                        "/node_modules/language-icons/icons/dz.svg": Fo,
                        "/node_modules/language-icons/icons/ee.svg": Wo,
                        "/node_modules/language-icons/icons/el.svg": Go,
                        "/node_modules/language-icons/icons/en.svg": zo,
                        "/node_modules/language-icons/icons/eo.svg": Lo,
                        "/node_modules/language-icons/icons/es.svg": qo,
                        "/node_modules/language-icons/icons/et.svg": Ho,
                        "/node_modules/language-icons/icons/eu.svg": Uo,
                        "/node_modules/language-icons/icons/fa.svg": jo,
                        "/node_modules/language-icons/icons/ff.svg": Oo,
                        "/node_modules/language-icons/icons/fi.svg": Vo,
                        "/node_modules/language-icons/icons/fj.svg": Bo,
                        "/node_modules/language-icons/icons/fo.svg": No,
                        "/node_modules/language-icons/icons/fr.svg": Eo,
                        "/node_modules/language-icons/icons/fy.svg": Do,
                        "/node_modules/language-icons/icons/ga.svg": Ro,
                        "/node_modules/language-icons/icons/gd.svg": Mo,
                        "/node_modules/language-icons/icons/gl.svg": Io,
                        "/node_modules/language-icons/icons/gn.svg": To,
                        "/node_modules/language-icons/icons/gu.svg": Po,
                        "/node_modules/language-icons/icons/gv.svg": So,
                        "/node_modules/language-icons/icons/ha.svg": Co,
                        "/node_modules/language-icons/icons/he.svg": ko,
                        "/node_modules/language-icons/icons/hi.svg": wo,
                        "/node_modules/language-icons/icons/ho.svg": yo,
                        "/node_modules/language-icons/icons/hr.svg": _o,
                        "/node_modules/language-icons/icons/ht.svg": vo,
                        "/node_modules/language-icons/icons/hu.svg": fo,
                        "/node_modules/language-icons/icons/hy.svg": bo,
                        "/node_modules/language-icons/icons/hz.svg": Ao,
                        "/node_modules/language-icons/icons/ia.svg": po,
                        "/node_modules/language-icons/icons/id.svg": ho,
                        "/node_modules/language-icons/icons/ie.svg": mo,
                        "/node_modules/language-icons/icons/ig.svg": go,
                        "/node_modules/language-icons/icons/ii.svg": uo,
                        "/node_modules/language-icons/icons/ik.svg": co,
                        "/node_modules/language-icons/icons/io.svg": lo,
                        "/node_modules/language-icons/icons/is.svg": ro,
                        "/node_modules/language-icons/icons/it.svg": ao,
                        "/node_modules/language-icons/icons/iu.svg": no,
                        "/node_modules/language-icons/icons/ja.svg": oo,
                        "/node_modules/language-icons/icons/jv.svg": io,
                        "/node_modules/language-icons/icons/ka.svg": to,
                        "/node_modules/language-icons/icons/kg.svg": so,
                        "/node_modules/language-icons/icons/ki.svg": eo,
                        "/node_modules/language-icons/icons/kj.svg": xi,
                        "/node_modules/language-icons/icons/kk.svg": $i,
                        "/node_modules/language-icons/icons/kl.svg": Ji,
                        "/node_modules/language-icons/icons/km.svg": Yi,
                        "/node_modules/language-icons/icons/kn.svg": Ki,
                        "/node_modules/language-icons/icons/ko.svg": Xi,
                        "/node_modules/language-icons/icons/kr.svg": Zi,
                        "/node_modules/language-icons/icons/ks.svg": Qi,
                        "/node_modules/language-icons/icons/ku.svg": Fi,
                        "/node_modules/language-icons/icons/kv.svg": Wi,
                        "/node_modules/language-icons/icons/kw.svg": Gi,
                        "/node_modules/language-icons/icons/ky.svg": zi,
                        "/node_modules/language-icons/icons/la.svg": Li,
                        "/node_modules/language-icons/icons/lb.svg": qi,
                        "/node_modules/language-icons/icons/lg.svg": Hi,
                        "/node_modules/language-icons/icons/li.svg": Ui,
                        "/node_modules/language-icons/icons/ln.svg": ji,
                        "/node_modules/language-icons/icons/lo.svg": Oi,
                        "/node_modules/language-icons/icons/lt.svg": Vi,
                        "/node_modules/language-icons/icons/lu.svg": Bi,
                        "/node_modules/language-icons/icons/lv.svg": Ni,
                        "/node_modules/language-icons/icons/mg.svg": Ei,
                        "/node_modules/language-icons/icons/mh.svg": Di,
                        "/node_modules/language-icons/icons/mi.svg": Ri,
                        "/node_modules/language-icons/icons/mk.svg": Mi,
                        "/node_modules/language-icons/icons/ml.svg": Ii,
                        "/node_modules/language-icons/icons/mn.svg": Ti,
                        "/node_modules/language-icons/icons/mr.svg": Pi,
                        "/node_modules/language-icons/icons/ms.svg": Si,
                        "/node_modules/language-icons/icons/mt.svg": Ci,
                        "/node_modules/language-icons/icons/my.svg": ki,
                        "/node_modules/language-icons/icons/na.svg": wi,
                        "/node_modules/language-icons/icons/nb.svg": yi,
                        "/node_modules/language-icons/icons/nd.svg": _i,
                        "/node_modules/language-icons/icons/ne.svg": vi,
                        "/node_modules/language-icons/icons/ng.svg": fi,
                        "/node_modules/language-icons/icons/nl.svg": bi,
                        "/node_modules/language-icons/icons/nn.svg": Ai,
                        "/node_modules/language-icons/icons/no.svg": pi,
                        "/node_modules/language-icons/icons/nr.svg": hi,
                        "/node_modules/language-icons/icons/nv.svg": mi,
                        "/node_modules/language-icons/icons/ny.svg": gi,
                        "/node_modules/language-icons/icons/oc.svg": ui,
                        "/node_modules/language-icons/icons/oj.svg": di,
                        "/node_modules/language-icons/icons/om.svg": ci,
                        "/node_modules/language-icons/icons/or.svg": li,
                        "/node_modules/language-icons/icons/os.svg": ri,
                        "/node_modules/language-icons/icons/pa.svg": ai,
                        "/node_modules/language-icons/icons/pi.svg": ni,
                        "/node_modules/language-icons/icons/pl.svg": oi,
                        "/node_modules/language-icons/icons/ps.svg": ii,
                        "/node_modules/language-icons/icons/pt.svg": ti,
                        "/node_modules/language-icons/icons/qu.svg": si,
                        "/node_modules/language-icons/icons/rm.svg": ei,
                        "/node_modules/language-icons/icons/rn.svg": xt,
                        "/node_modules/language-icons/icons/ro.svg": $t,
                        "/node_modules/language-icons/icons/ru.svg": Jt,
                        "/node_modules/language-icons/icons/rw.svg": Yt,
                        "/node_modules/language-icons/icons/sa.svg": Kt,
                        "/node_modules/language-icons/icons/sc.svg": Xt,
                        "/node_modules/language-icons/icons/sd.svg": Zt,
                        "/node_modules/language-icons/icons/se.svg": Qt,
                        "/node_modules/language-icons/icons/sg.svg": Ft,
                        "/node_modules/language-icons/icons/si.svg": Wt,
                        "/node_modules/language-icons/icons/sk.svg": Gt,
                        "/node_modules/language-icons/icons/sl.svg": zt,
                        "/node_modules/language-icons/icons/sm.svg": Lt,
                        "/node_modules/language-icons/icons/sn.svg": qt,
                        "/node_modules/language-icons/icons/so.svg": Ht,
                        "/node_modules/language-icons/icons/sq.svg": Ut,
                        "/node_modules/language-icons/icons/sr.svg": jt,
                        "/node_modules/language-icons/icons/ss.svg": Ot,
                        "/node_modules/language-icons/icons/st.svg": Vt,
                        "/node_modules/language-icons/icons/su.svg": Bt,
                        "/node_modules/language-icons/icons/sv.svg": Nt,
                        "/node_modules/language-icons/icons/sw.svg": Et,
                        "/node_modules/language-icons/icons/ta.svg": Dt,
                        "/node_modules/language-icons/icons/te.svg": Rt,
                        "/node_modules/language-icons/icons/tg.svg": Mt,
                        "/node_modules/language-icons/icons/th.svg": It,
                        "/node_modules/language-icons/icons/ti.svg": Tt,
                        "/node_modules/language-icons/icons/tk.svg": Pt,
                        "/node_modules/language-icons/icons/tl.svg": St,
                        "/node_modules/language-icons/icons/tn.svg": Ct,
                        "/node_modules/language-icons/icons/to.svg": kt,
                        "/node_modules/language-icons/icons/tr.svg": wt,
                        "/node_modules/language-icons/icons/ts.svg": yt,
                        "/node_modules/language-icons/icons/tt.svg": _t,
                        "/node_modules/language-icons/icons/tw.svg": vt,
                        "/node_modules/language-icons/icons/ty.svg": ft,
                        "/node_modules/language-icons/icons/ug.svg": bt,
                        "/node_modules/language-icons/icons/uk.svg": At,
                        "/node_modules/language-icons/icons/ur.svg": pt,
                        "/node_modules/language-icons/icons/uz.svg": ht,
                        "/node_modules/language-icons/icons/ve.svg": mt,
                        "/node_modules/language-icons/icons/vi.svg": gt,
                        "/node_modules/language-icons/icons/vo.svg": ut,
                        "/node_modules/language-icons/icons/wa.svg": dt,
                        "/node_modules/language-icons/icons/wo.svg": ct,
                        "/node_modules/language-icons/icons/xh.svg": lt,
                        "/node_modules/language-icons/icons/yi.svg": rt,
                        "/node_modules/language-icons/icons/yo.svg": at,
                        "/node_modules/language-icons/icons/za.svg": nt,
                        "/node_modules/language-icons/icons/zh.svg": ot,
                        "/node_modules/language-icons/icons/zu.svg": it
                    })[`/node_modules/language-icons/icons/${e.language}.svg`],import.meta.url).href,
                    spectators: e.usersAll.filter(i => ![...e.players, ...e.storytellers].some(o => o.id === i.id) && i.isOnline)
                })
            }
            )
        },
        sessionUsers() {
            return this.sessions.reduce( (e, s) => e + s.usersAll.filter(t => t.isOnline).length, 0)
        }
    },
    data() {
        return {
            updateTimer: null,
            tab: "list",
            selected: {},
            loading: !1,
            sessionsList: [],
            page: 0,
            pageSize: 10,
            sortColumn: "phase",
            sortAsc: 1,
            showPrivate: !1,
            isCreating: !1
        }
    },
    methods: {
        ...j(["toggleModal"]),
        ...$("session", ["join", "create"]),
        ...$("user", ["logout"]),
        async joinSession(e) {
            var s, t;
            if (e.disabled) {
                e.isPublic && !((s = this.user.flags) != null && s.includes("verified-phone")) && !this.user.level && this.toggleModal({
                    name: "verification"
                });
                return
            }
            if (!((t = this.user.flags) != null && t.includes("newuser") && e.npcs.some(n => n.id === "bootlegger") && !await this.$store.dispatch("openDialogue", {
                type: "confirm",
                title: this.$t("pages.lobby.bootlegger_title"),
                text: this.$t("pages.lobby.bootlegger_warning")
            })))
                return this.join(e.name)
        },
        async createSession() {
            if (this.isSubscribed && !this.isCreating)
                if (this.tab !== "create")
                    this.server = this.$store.getters["chat/chatServerPreference"][0],
                    this.tab = "create";
                else {
                    const e = new FormData(this.$refs.createForm);
                    if (!e.get("sessionName"))
                        return;
                    const s = e.get("sessionName").trim().toLocaleLowerCase();
                    if (s.length < 3)
                        return;
                    this.isCreating = !0,
                    await this.create(s),
                    this.isCreating = !1
                }
        },
        async play() {
            if (this.isSubscribed)
                return this.$store.dispatch("session/cleanGamestate"),
                this.$store.dispatch("players/becomeStoryteller"),
                F.replace({
                    name: "Grimoire"
                })
        },
        settings() {
            return this.toggleModal({
                name: "settings"
            })
        },
        help() {
            return this.toggleModal({
                name: "help"
            })
        },
        async quit() {
            await ol(0)
        },
        togglePrivate() {
            this.showPrivate = !this.showPrivate,
            this.page = 0
        },
        sortBy(e) {
            this.sortColumn === e ? this.sortAsc *= -1 : (this.sortColumn = e,
            this.sortAsc = 1)
        },
        async updateSessions() {
            if (!this.loading) {
                clearTimeout(this.updateTimer),
                this.loading = !0;
                try {
                    const e = await We("sessions", this.accessToken);
                    this.sessionsList = e != null && e.length ? e : []
                } catch {}
                this.sessionsList.length <= this.page * this.pageSize && (this.page = 0),
                this.updateTimer = setTimeout(this.updateSessions.bind(this), 30 * 1e3),
                this.loading = !1
            }
        },
        showUser(e) {
            e && this.toggleModal({
                name: "user",
                params: {
                    userId: e
                }
            })
        }
    },
    beforeMount() {
        this.accessToken && this.updateSessions(),
        this.bindShortcut("modalSettings", () => this.settings(), "Lobby"),
        this.bindShortcut("c", () => this.createSession(), "Lobby"),
        this.bindShortcut("l", () => this.play(), "Lobby"),
        this.bindShortcut("j", () => this.join(), "Lobby"),
        this.bindShortcut("escape", () => this.tab = "list", "Lobby")
    },
    beforeUnmount() {
        clearTimeout(this.updateTimer),
        this.unbindShortcut("modalSettings", "Lobby"),
        this.unbindShortcut("c", "Lobby"),
        this.unbindShortcut("l", "Lobby"),
        this.unbindShortcut("j", "Lobby"),
        this.unbindShortcut("escape", "Lobby")
    },
    watch: {
        "grimoire.loadingState"() {
            if (this.grimoire.loadingState === "" && this.accessToken) {
                const e = decodeURIComponent(window.location.hash.substring(1)) || this.session.sessionId;
                e ? this.join(e) : this.updateSessions()
            }
        }
    }
}
  , FM = {
    id: "lobby"
}
  , QM = {
    key: 0,
    class: "list"
}
  , ZM = {
    class: "left"
}
  , XM = {
    class: "right"
}
  , KM = {
    key: 0,
    class: "loader"
}
  , YM = {
    class: "container"
}
  , JM = {
    class: "list"
}
  , $M = {
    key: 0
}
  , xM = {
    key: 0
}
  , eR = {
    colspan: "7"
}
  , sR = {
    key: 0
}
  , tR = {
    key: 1
}
  , iR = ["onClick"]
  , oR = {
    rowspan: "2"
}
  , nR = ["onClick"]
  , aR = ["src", "alt", "title"]
  , rR = ["src", "alt"]
  , lR = {
    key: 0
}
  , cR = {
    class: "storyteller"
}
  , dR = ["onClick"]
  , uR = {
    class: "players"
}
  , gR = {
    class: "tags"
}
  , mR = ["title"]
  , hR = ["title"]
  , pR = ["title"]
  , AR = ["title"]
  , bR = ["title"]
  , fR = ["title"]
  , vR = ["onClick"]
  , _R = {
    colspan: "6"
}
  , yR = {
    key: 0
}
  , wR = {
    key: 1
}
  , kR = ["title"]
  , CR = {
    key: 2
}
  , SR = ["title"]
  , PR = {
    key: 3,
    class: "players"
}
  , TR = ["onClick"]
  , IR = {
    key: 4,
    class: "spectators"
}
  , MR = ["onClick"]
  , RR = {
    key: 1,
    class: "warning"
}
  , DR = {
    href: "https://www.patreon.com/botconline",
    target: "_blank"
}
  , ER = {
    href: "https://www.patreon.com/botconline",
    target: "_blank"
}
  , NR = {
    class: "button-group"
}
  , BR = {
    key: 4,
    class: "gap"
}
  , VR = {
    key: 5,
    class: "pagination"
}
  , OR = {
    key: 1
}
  , jR = {
    class: "button-group"
};
function UR(e, s, t, n, i, o) {
    var U, P, E;
    const l = k("i18n-t")
      , g = k("font-awesome-icon")
      , c = k("SessionMeta")
      , h = k("DialogueModal")
      , m = k("SettingsModal")
      , A = k("ModerationModal")
      , f = k("HelpModal")
      , T = k("UserModal")
      , w = k("VerificationModal")
      , V = k("SetupModal")
      , N = k("AnnouncementModal");
    return r(),
    u("div", FM, [a("main", {
        class: y(i.tab)
    }, [i.tab === "list" ? (r(),
    u("section", QM, [a("header", null, [a("span", ZM, [b(l, {
        keypath: "pages.lobby.welcome",
        scope: "global"
    }, {
        default: S( () => [a("b", null, d(e.$t("common.botc_online")), 1)]),
        _: 1
    }), s[21] || (s[21] = a("br", null, null, -1)), o.isSubscribed ? (r(),
    u(_, {
        key: 0
    }, [v(d(e.$t("pages.lobby.subscription")) + ": ", 1), a("b", null, d(e.$t("common.account-levels." + e.user.level, "unknown")), 1)], 64)) : p("", !0)]), s[23] || (s[23] = a("img", {
        src: Ve,
        alt: "",
        class: "logo app"
    }, null, -1)), a("span", XM, [b(l, {
        keypath: "pages.lobby.stats",
        scope: "global"
    }, {
        default: S( () => [a("b", null, d(o.sessionUsers), 1), a("b", null, d(o.sessions.length), 1), i.showPrivate ? p("", !0) : (r(),
        u(_, {
            key: 0
        }, [v(d(e.$t("pages.lobby.stats_public")), 1)], 64))]),
        _: 1
    }), s[22] || (s[22] = a("br", null, null, -1)), o.sessions.length !== i.sessionsList.length || i.showPrivate ? (r(),
    u("label", {
        key: 0,
        onClick: s[0] || (s[0] = (...R) => o.togglePrivate && o.togglePrivate(...R))
    }, [b(g, {
        icon: i.showPrivate ? "check-circle" : "circle"
    }, null, 8, ["icon"]), v(" " + d(e.$t("pages.lobby.show_private")), 1)])) : p("", !0)])]), i.loading ? (r(),
    u("div", KM, d(e.$t("pages.lobby.updating")), 1)) : p("", !0), a("div", YM, [a("table", JM, [o.sessions.length ? (r(),
    u("thead", $M, [a("tr", null, [a("td", {
        onClick: s[1] || (s[1] = R => o.sortBy("name")),
        class: y({
            ["sort-" + (i.sortAsc > 0 ? "asc" : "desc")]: i.sortColumn === "name"
        })
    }, d(e.$t("pages.lobby.game")), 3), a("td", {
        onClick: s[2] || (s[2] = R => o.sortBy("language")),
        class: y({
            ["sort-" + (i.sortAsc > 0 ? "asc" : "desc")]: i.sortColumn === "language"
        })
    }, [b(g, {
        icon: "language",
        title: e.$t("pages.lobby.language")
    }, null, 8, ["title"])], 2), a("td", {
        onClick: s[3] || (s[3] = R => o.sortBy("script")),
        class: y({
            ["sort-" + (i.sortAsc > 0 ? "asc" : "desc")]: i.sortColumn === "script"
        })
    }, d(e.$t("pages.lobby.script")), 3), a("td", {
        onClick: s[4] || (s[4] = R => o.sortBy("storytellers")),
        class: y({
            ["sort-" + (i.sortAsc > 0 ? "asc" : "desc")]: i.sortColumn === "storytellers"
        })
    }, d(e.$t("pages.lobby.storyteller")), 3), a("td", {
        onClick: s[5] || (s[5] = R => o.sortBy("players")),
        class: y({
            ["sort-" + (i.sortAsc > 0 ? "asc" : "desc")]: i.sortColumn === "players"
        })
    }, d(e.$t("pages.lobby.players")), 3), a("td", {
        onClick: s[6] || (s[6] = R => o.sortBy("phase")),
        class: y({
            ["sort-" + (i.sortAsc > 0 ? "asc" : "desc")]: i.sortColumn === "phase"
        })
    }, d(e.$t("pages.lobby.phase")), 3), s[24] || (s[24] = a("td", null, "Tags", -1))])])) : p("", !0), a("tbody", null, [o.sessions.length ? p("", !0) : (r(),
    u("tr", xM, [a("td", eR, [i.loading ? (r(),
    u("b", sR, d(e.$t("pages.lobby.loading")), 1)) : (r(),
    u("b", tR, d(e.$t("pages.lobby.no_games")), 1)), s[25] || (s[25] = a("br", null, null, -1)), !i.loading && o.isSubscribed ? (r(),
    u("button", {
        key: 2,
        class: "button primary",
        onClick: s[7] || (s[7] = R => o.createSession())
    }, d(e.$t("pages.lobby.create_game")), 1)) : p("", !0)])])), (r(!0),
    u(_, null, B(o.sessions.slice(i.page * i.pageSize, i.page * i.pageSize + i.pageSize), R => {
        var Z;
        return r(),
        u(_, {
            key: R.name
        }, [a("tr", {
            onClick: H => i.selected[R.name] = !i.selected[R.name],
            class: y([{
                selected: i.selected[R.name]
            }, "summary"])
        }, [a("td", oR, [a("div", {
            class: y(["button primary", {
                disabled: R.disabled
            }]),
            onClick: M(H => o.joinSession(R), ["stop"])
        }, [v(d(R.name) + " ", 1), R.isPublic ? p("", !0) : (r(),
        C(g, {
            key: 0,
            icon: "lock"
        }))], 10, nR)]), a("td", null, [a("img", {
            src: R.languageIcon,
            alt: R.language,
            title: R.languageName
        }, null, 8, aR)]), a("td", {
            class: y(["edition", "edition-" + R.edition.id])
        }, [a("img", {
            src: R.editionIcon,
            alt: R.edition.id
        }, null, 8, rR), a("span", {
            style: L({
                color: (Z = e.editionsAvailable.get(R.edition.id)) == null ? void 0 : Z.color
            })
        }, d(e.$t(`editions.${R.edition.id}.name`)), 5), !R.edition.isOfficial && R.edition.name ? (r(),
        u("div", lR, d(R.edition.name) + " " + d(R.edition.author ? e.$t("pages.lobby.edition_by", R.edition) : ""), 1)) : p("", !0)], 2), a("td", cR, [(r(!0),
        u(_, null, B(R.storytellers, (H, G) => {
            var K, J;
            return r(),
            u("span", {
                key: H.id,
                onClick: M(x => o.showUser(H.id), ["stop"])
            }, [(K = R.usersAll.find(x => x.id === H.id)) != null && K.isOnline ? p("", !0) : (r(),
            C(g, {
                key: 0,
                icon: "user-slash"
            })), v(" " + d((J = R.usersAll.find(x => x.id === H.id)) == null ? void 0 : J.username) + d(G + 1 < R.storytellers.length ? ", " : ""), 1)], 8, dR)
        }
        ), 128))]), a("td", uR, [v(d(R.seats) + " ", 1), R.spectators.length ? (r(),
        u(_, {
            key: 0
        }, [s[26] || (s[26] = a("br", null, null, -1)), v(d(R.spectators.length) + " ", 1), b(g, {
            icon: "eye",
            title: e.$t("pages.lobby.spectators")
        }, null, 8, ["title"])], 64)) : p("", !0)]), a("td", null, [b(g, {
            icon: R.phaseIcon
        }, null, 8, ["icon"]), v(" " + d(R.phase), 1)]), a("td", gR, [R.tags.difficulty ? (r(),
        u("span", {
            key: 0,
            class: y(["switch-" + R.tags.difficulty]),
            title: e.$t("common.session-tags.difficulty.title")
        }, [b(g, {
            icon: "star"
        }), v(" " + d(e.$t("common.session-tags.difficulty.label")) + ": " + d(e.$t("common.session-tags.difficulty.value_" + R.tags.difficulty)), 1)], 10, mR)) : p("", !0), R.tags.cameras ? (r(),
        u("span", {
            key: 1,
            class: y(["switch-" + R.tags.cameras]),
            title: e.$t("common.session-tags.cameras.title")
        }, [b(g, {
            icon: "video"
        }), v(" " + d(e.$t("common.session-tags.cameras.label")) + ": " + d(e.$t("common.session-tags.cameras.value_" + R.tags.cameras)), 1)], 10, hR)) : p("", !0), R.tags.travellers ? (r(),
        u("span", {
            key: 2,
            class: y(["switch-" + R.tags.travellers]),
            title: e.$t("common.session-tags.travellers.title")
        }, [b(g, {
            icon: "theater-masks"
        }), v(" " + d(e.$t("common.session-tags.travellers.label")) + ": " + d(e.$t("common.session-tags.travellers.value_" + R.tags.travellers)), 1)], 10, pR)) : p("", !0), R.tags.grimoire ? (r(),
        u("span", {
            key: 3,
            class: y(["switch-" + R.tags.grimoire]),
            title: e.$t("common.session-tags.grimoire.title")
        }, [b(g, {
            icon: "book-dead"
        }), v(" " + d(e.$t("common.session-tags.grimoire.label")) + ": " + d(e.$t("common.session-tags.grimoire.value_" + R.tags.grimoire)), 1)], 10, AR)) : p("", !0), R.tags.streaming ? (r(),
        u("span", {
            key: 4,
            class: "switch-1",
            title: e.$t("common.session-tags.streaming.title")
        }, [b(g, {
            icon: "eye"
        }), v(" " + d(e.$t("common.session-tags.streaming.label")), 1)], 8, bR)) : p("", !0), R.boostDuration ? p("", !0) : (r(),
        u("span", {
            key: 5,
            class: "switch-2",
            title: e.$t("common.session-tags.subscription.title")
        }, [b(g, {
            icon: "lock"
        }), v(" " + d(e.$t("common.session-tags.subscription.label")), 1)], 8, fR))])], 10, iR), a("tr", {
            class: "details",
            onClick: H => i.selected[R.name] = !i.selected[R.name]
        }, [a("td", _R, [a("ul", null, [!R.edition.isOfficial && R.edition.name ? (r(),
        u("li", yR, [a("b", null, d(e.$t("pages.lobby.script")) + ": ", 1), v(" " + d(R.edition.name) + " " + d(R.edition.author ? e.$t("pages.lobby.edition_by", R.edition) : ""), 1)])) : p("", !0), R.edition.isOfficial ? p("", !0) : (r(),
        u("li", wR, [a("b", null, d(e.$t("pages.lobby.characters")) + ": ", 1), (r(!0),
        u(_, null, B(R.roles.filter(H => {
            var G, K;
            return ![...e.definitions.NPC_TEAMS, "traveller"].includes((K = H.team) != null ? K : (G = e.rolesAvailable.get(H.id)) == null ? void 0 : G.team)
        }
        ), H => {
            var G;
            return r(),
            u("span", {
                class: "icon",
                key: H.id,
                style: L({
                    backgroundImage: `url(${e.roleIconURL(H)})`
                }),
                title: H.name || e.$t(`roles.${H.id}.name`, (G = e.rolesAvailable.get(H.id)) == null ? void 0 : G.name)
            }, null, 12, kR)
        }
        ), 128))])), R.npcs.length ? (r(),
        u("li", CR, [a("b", null, d(e.$t("pages.lobby.npcs")) + ": ", 1), (r(!0),
        u(_, null, B(R.npcs, H => {
            var G;
            return r(),
            u("span", {
                class: "icon",
                key: H.id,
                style: L({
                    backgroundImage: `url(${e.roleIconURL(H)})`
                }),
                title: H.name || e.$t(`roles.${H.id}.name`, (G = e.npcs.get(H.id)) == null ? void 0 : G.name)
            }, null, 12, SR)
        }
        ), 128))])) : p("", !0), R.players.length ? (r(),
        u("li", PR, [a("b", null, d(e.$t("pages.lobby.players")) + ": ", 1), (r(!0),
        u(_, null, B(R.players, (H, G) => {
            var K, J, x, ce;
            return r(),
            u("span", {
                key: G,
                class: y(["player", {
                    dead: H.isDead,
                    voteless: H.isVoteless,
                    empty: !H.id || !((K = R.usersAll.find(oe => oe.id === H.id)) != null && K.isOnline)
                }]),
                onClick: M(oe => o.showUser(H.id), ["stop"])
            }, [H.id && !((J = R.usersAll.find(oe => oe.id === H.id)) != null && J.isOnline) ? (r(),
            C(g, {
                key: 0,
                icon: "user-slash"
            })) : p("", !0), v(" " + d((ce = (x = R.usersAll.find(oe => oe.id === H.id)) == null ? void 0 : x.username) != null ? ce : e.$t("grimoire.seat", [G + 1])) + d(G + 1 < R.players.length ? ", " : ""), 1)], 10, TR)
        }
        ), 128))])) : p("", !0), R.spectators.length ? (r(),
        u("li", IR, [a("b", null, d(e.$t("pages.lobby.spectators")) + ":", 1), (r(!0),
        u(_, null, B(R.spectators, (H, G) => (r(),
        u("span", {
            key: G,
            onClick: M(K => o.showUser(H.id), ["stop"])
        }, d(H.username), 9, MR))), 128))])) : p("", !0)])])], 8, vR)], 64)
    }
    ), 128))])])]), (U = e.user.flags) != null && U.includes("forced-private") ? (r(),
    u("p", RR, [a("b", null, d(e.$t("pages.lobby.forced_private")), 1)])) : p("", !0), !o.isSubscribed && ((P = e.user.flags) != null && P.includes("verified-phone")) ? (r(),
    C(l, {
        key: 2,
        tag: "p",
        scope: "global",
        keypath: "pages.lobby.free_tier_unverified"
    }, {
        default: S( () => [a("b", null, d(e.$t("pages.lobby.free_tier_free")), 1), a("a", DR, d(e.$t("pages.lobby.free_tier_patreon")), 1)]),
        _: 1
    })) : !o.isSubscribed && e.user.id ? (r(),
    C(l, {
        key: 3,
        tag: "p",
        scope: "global",
        keypath: "pages.lobby.free_tier_verified"
    }, {
        default: S( () => [a("b", null, d(e.$t("pages.lobby.free_tier_free")), 1), a("b", null, d(e.$t("pages.lobby.free_tier_verify")), 1), a("a", ER, d(e.$t("pages.lobby.free_tier_patreon")), 1)]),
        _: 1
    })) : p("", !0), a("nav", NR, [e.user.id && !e.user.level && !((E = e.user.flags) != null && E.includes("verified-phone")) ? (r(),
    u("button", {
        key: 0,
        class: "button primary",
        onClick: s[8] || (s[8] = R => e.toggleModal({
            name: "verification"
        }))
    }, d(e.$t("pages.lobby.button_verify")), 1)) : p("", !0), o.isSubscribed ? (r(),
    u("button", {
        key: 1,
        class: "button primary",
        onClick: s[9] || (s[9] = R => o.createSession())
    }, d(e.$t("pages.lobby.button_create_game")), 1)) : p("", !0), o.isSubscribed ? (r(),
    u("button", {
        key: 2,
        class: "button primary",
        onClick: s[10] || (s[10] = R => o.play())
    }, d(e.$t("pages.lobby.button_local_play")), 1)) : p("", !0), e.user.id ? (r(),
    u("button", {
        key: 3,
        class: "button secondary",
        onClick: s[11] || (s[11] = R => e.join())
    }, d(e.$t("pages.lobby.button_join_game")), 1)) : p("", !0), e.user.id ? (r(),
    u("button", {
        key: 4,
        class: "button",
        onClick: s[12] || (s[12] = R => o.settings())
    }, d(e.$t("pages.lobby.button_settings")), 1)) : p("", !0), e.isModerator ? (r(),
    u("button", {
        key: 5,
        class: "button",
        onClick: s[13] || (s[13] = R => e.toggleModal({
            name: "moderation"
        }))
    }, d(e.$t("pages.lobby.button_mod")), 1)) : p("", !0), a("button", {
        class: "button",
        onClick: s[14] || (s[14] = R => o.help())
    }, d(e.$t("pages.lobby.button_help")), 1), o.isApp ? (r(),
    u("button", {
        key: 6,
        class: "button",
        onClick: s[15] || (s[15] = R => o.quit())
    }, d(e.$t("pages.lobby.button_quit")), 1)) : (r(),
    u("button", {
        key: 7,
        class: "button",
        onClick: s[16] || (s[16] = R => e.logout())
    }, d(e.$t("common.button_logout")), 1))]), i.pageSize < o.sessions.length ? (r(),
    u("div", BR)) : p("", !0), i.pageSize < o.sessions.length ? (r(),
    u("div", VR, [i.page ? (r(),
    u("button", {
        key: 0,
        class: "button",
        onClick: s[17] || (s[17] = R => i.page -= 1)
    }, [b(g, {
        icon: "arrow-circle-left"
    })])) : p("", !0), v(" " + d(e.$t("pages.lobby.page", {
        page: i.page + 1,
        total: Math.ceil(o.sessions.length / i.pageSize)
    })) + " ", 1), i.page + 1 < Math.ceil(o.sessions.length / i.pageSize) ? (r(),
    u("button", {
        key: 1,
        class: "button",
        onClick: s[18] || (s[18] = R => i.page += 1)
    }, [b(g, {
        icon: "arrow-circle-right"
    })])) : p("", !0)])) : p("", !0)])) : p("", !0), i.tab === "create" ? (r(),
    u("section", OR, [a("form", {
        onSubmit: s[20] || (s[20] = M( (...R) => o.createSession && o.createSession(...R), ["prevent"])),
        ref: "createForm"
    }, [b(c), a("nav", jR, [a("button", {
        type: "submit",
        class: y(["button primary", {
            disabled: !o.isSubscribed || i.isCreating
        }])
    }, d(e.$t("pages.lobby.button_create_game")), 3), a("button", {
        class: "button",
        type: "button",
        onClick: s[19] || (s[19] = R => i.tab = "list")
    }, d(e.$t("common.button_cancel")), 1)])], 544)])) : p("", !0)], 2), s[27] || (s[27] = a("div", {
        class: "break"
    }, null, -1)), s[28] || (s[28] = a("footer", null, [a("img", {
        src: Pe,
        class: "logo",
        alt: ""
    }), a("img", {
        src: Oe,
        alt: "",
        class: "logo sb"
    })], -1)), b(h), b(m), b(A), b(f), b(T), b(w), b(V), b(N)])
}
const HR = O(WM, [["render", UR], ["__scopeId", "data-v-75482b6d"]])
  , qR = {
    components: {
        VueTurnstile: Wd
    },
    computed: {
        ...I("user", ["user"]),
        siteKey() {
            return "0x4AAAAAABMWdc6b3NE8DX1D"
        },
        isTauriHost() {
            return window.location.origin === "tauri://localhost"
        }
    },
    data() {
        return {
            email: "",
            password: "",
            passwordConfirm: "",
            acceptsMarketing: !1,
            acceptsTerms: !1,
            username: "",
            error: "",
            notification: "",
            mode: "login",
            loading: !1,
            token: "",
            iframeListener: null
        }
    },
    methods: {
        async submit() {
            var e;
            if (!this.loading) {
                if (this.error = "",
                this.notification = "",
                this.mode === "register" && this.passwordConfirm !== this.password) {
                    this.error = this.$t("pages.login.error_password");
                    return
                }
                if (!this.token) {
                    this.error = this.$t("pages.login.error_captcha");
                    return
                }
                this.loading = !0;
                try {
                    this.mode === "register" ? await this.$store.dispatch("user/register", {
                        email: this.email,
                        password: this.password,
                        acceptsMarketing: this.acceptsMarketing,
                        username: this.username,
                        captcha: this.token
                    }) : await this.$store.dispatch("user/login", {
                        email: this.email,
                        password: this.password,
                        captcha: this.token
                    }),
                    this.user.flags && !this.user.flags.includes("verified-email") ? this.$router.replace({
                        name: "Verification",
                        hash: decodeURIComponent(window.location.hash)
                    }) : (e = history.state) != null && e.returnRoute ? this.$router.replace({
                        name: history.state.returnRoute,
                        params: history.state.returnParams
                    }) : this.$router.replace({
                        name: "Lobby",
                        hash: decodeURIComponent(window.location.hash)
                    })
                } catch (s) {
                    this.password = "",
                    this.passwordConfirm = "",
                    s.cause === "CUSTOMER_DISABLED" ? (this.notification = s.message,
                    this.mode = "login") : this.error = s.message,
                    this.reloadCaptcha()
                } finally {
                    this.loading = !1
                }
            }
        },
        async recover() {
            if (!(this.loading || !this.email || !this.token)) {
                this.error = "",
                this.notification = "",
                this.loading = !0;
                try {
                    await this.$store.dispatch("user/recover", {
                        email: this.email,
                        captcha: this.token
                    }),
                    this.notification = this.$t("pages.login.password_reset")
                } catch (e) {
                    this.error = e.message
                } finally {
                    this.loading = !1
                }
            }
        },
        reloadCaptcha() {
            var e;
            this.$router.currentRoute.value.name === "Login" && ((e = this.$refs.turnstile) == null || e.reset())
        }
    },
    beforeMount() {
        this.iframeListener = e => {
            e.origin === "https://botc.app" && (this.token = e.data)
        }
        ,
        this.isTauriHost && window.addEventListener("message", this.iframeListener)
    },
    beforeUnmount() {
        var e;
        this.isTauriHost ? window.removeEventListener("message", this.iframeListener) : (e = this.$refs.turnstile) == null || e.remove()
    }
}
  , LR = {
    id: "login"
}
  , zR = {
    class: "content"
}
  , GR = ["placeholder", "title"]
  , WR = ["placeholder", "title", "autocomplete"]
  , FR = ["placeholder", "title"]
  , QR = ["placeholder", "title"]
  , ZR = {
    key: 3,
    class: "turnstile",
    src: "https://botc.app/turnstile.html"
}
  , XR = {
    key: 4,
    for: "accepts-terms"
}
  , KR = {
    href: "https://bloodontheclocktower.com/terms-of-use",
    target: "_blank"
}
  , YR = {
    href: "https://bloodontheclocktower.com/privacy-policy",
    target: "_blank"
}
  , JR = {
    href: "https://bloodontheclocktower.com/cookie-policy",
    target: "_blank"
}
  , $R = {
    key: 5,
    for: "accepts-marketing"
}
  , xR = {
    class: "button-group"
}
  , eD = ["type", "disabled"]
  , sD = ["disabled"]
  , tD = ["type", "disabled"]
  , iD = {
    key: 0,
    class: "error"
}
  , oD = {
    key: 1,
    class: "notification"
}
  , nD = {
    class: "footer"
};
function aD(e, s, t, n, i, o) {
    const l = k("vue-turnstile")
      , g = k("font-awesome-icon")
      , c = k("i18n-t");
    return r(),
    u("div", LR, [s[14] || (s[14] = a("div", {
        class: "header"
    }, [a("img", {
        src: Ve,
        alt: "",
        class: "logo app"
    })], -1)), a("div", zR, [v(d(e.$t("pages.login.title")), 1), s[13] || (s[13] = a("br", null, null, -1)), v(" " + d(e.$t("pages.login.description")) + " ", 1), a("form", {
        onSubmit: s[11] || (s[11] = M( (...h) => o.submit && o.submit(...h), ["prevent"])),
        class: y({
            loading: i.loading
        })
    }, [z(a("input", {
        placeholder: e.$t("pages.login.email"),
        title: e.$t("pages.login.email"),
        name: "email",
        type: "email",
        "onUpdate:modelValue": s[0] || (s[0] = h => i.email = h),
        required: "",
        autocomplete: "username"
    }, null, 8, GR), [[W, i.email]]), z(a("input", {
        placeholder: e.$t("pages.login.password"),
        title: e.$t("pages.login.password"),
        name: "password",
        type: "password",
        "onUpdate:modelValue": s[1] || (s[1] = h => i.password = h),
        minlength: "6",
        required: "",
        autocomplete: i.mode === "register" ? "new-password" : "current-password"
    }, null, 8, WR), [[W, i.password]]), i.mode === "register" ? z((r(),
    u("input", {
        key: 0,
        placeholder: e.$t("pages.login.password_confirm"),
        title: e.$t("pages.login.password_confirm"),
        name: "password-confirm",
        type: "password",
        "onUpdate:modelValue": s[2] || (s[2] = h => i.passwordConfirm = h),
        class: y({
            error: i.passwordConfirm !== i.password
        }),
        minlength: "6",
        required: "",
        autocomplete: "new-password"
    }, null, 10, FR)), [[W, i.passwordConfirm]]) : p("", !0), i.mode === "register" ? z((r(),
    u("input", {
        key: 1,
        placeholder: e.$t("pages.login.username"),
        title: e.$t("pages.login.username"),
        name: "username",
        type: "text",
        "onUpdate:modelValue": s[3] || (s[3] = h => i.username = h),
        minlength: "3",
        maxlength: "150",
        required: "",
        autocomplete: "nickname"
    }, null, 8, QR)), [[W, i.username]]) : p("", !0), o.isTauriHost ? (r(),
    u("iframe", ZR)) : (r(),
    C(l, {
        key: 2,
        class: "turnstile",
        "site-key": o.siteKey,
        size: "flexible",
        modelValue: i.token,
        "onUpdate:modelValue": s[4] || (s[4] = h => i.token = h),
        ref: "turnstile",
        onExpired: s[5] || (s[5] = h => o.reloadCaptcha())
    }, null, 8, ["site-key", "modelValue"])), i.mode === "register" ? (r(),
    u("label", XR, [z(a("input", {
        id: "accepts-terms",
        name: "acceptsTerms",
        type: "checkbox",
        "onUpdate:modelValue": s[6] || (s[6] = h => i.acceptsTerms = h),
        required: ""
    }, null, 512), [[qe, i.acceptsTerms]]), b(g, {
        icon: i.acceptsTerms ? "check-circle" : "circle"
    }, null, 8, ["icon"]), b(c, {
        keypath: "pages.login.accept",
        scope: "global"
    }, {
        default: S( () => [a("a", KR, d(e.$t("common.terms_of_use")), 1), a("a", YR, d(e.$t("common.privacy_policy")), 1), a("a", JR, d(e.$t("common.cookie_policy")), 1)]),
        _: 1
    })])) : p("", !0), i.mode === "register" ? (r(),
    u("label", $R, [z(a("input", {
        type: "checkbox",
        id: "accepts-marketing",
        name: "acceptsMarketing",
        "onUpdate:modelValue": s[7] || (s[7] = h => i.acceptsMarketing = h)
    }, null, 512), [[qe, i.acceptsMarketing]]), b(g, {
        icon: i.acceptsMarketing ? "check-circle" : "circle"
    }, null, 8, ["icon"]), v(" " + d(e.$t("pages.login.subscribe")), 1)])) : p("", !0), a("div", xR, [a("button", {
        class: "button primary",
        type: i.mode === "login" ? "submit" : "button",
        disabled: !i.token || i.loading || !!i.passwordConfirm,
        onClick: s[8] || (s[8] = h => i.mode = "login")
    }, d(e.$t("pages.login.login")), 9, eD), a("button", {
        class: "button",
        type: "button",
        onClick: s[9] || (s[9] = (...h) => o.recover && o.recover(...h)),
        disabled: i.loading || !i.email || !i.token
    }, d(e.$t("pages.login.recover_password")), 9, sD), a("button", {
        class: "button secondary",
        type: i.mode === "login" ? "button" : "submit",
        onClick: s[10] || (s[10] = h => i.mode = "register"),
        disabled: !i.token || i.loading || i.mode === "register" && !i.acceptsTerms
    }, d(e.$t("pages.login.register")), 9, tD)]), s[12] || (s[12] = a("div", {
        class: "loader"
    }, null, -1))], 34), i.error ? (r(),
    u("div", iD, [b(g, {
        icon: "exclamation-triangle"
    }), v(" " + d(i.error), 1)])) : p("", !0), i.notification ? (r(),
    u("div", oD, d(i.notification), 1)) : p("", !0), a("div", nD, d(e.$t("common.trademark")), 1)]), s[15] || (s[15] = a("footer", null, [a("img", {
        src: Pe,
        alt: ""
    }), a("img", {
        src: Oe,
        class: "sb",
        alt: ""
    })], -1))])
}
const rD = O(qR, [["render", aD], ["__scopeId", "data-v-7a9c27b0"]])
  , lD = {
    inject: ["isApp"],
    name: "Update",
    computed: {
        ...I("user", ["latestVersion", "newVersions", "downloadUrl"])
    },
    data() {
        return {
            version: le.version
        }
    },
    methods: {}
}
  , cD = {
    id: "update"
}
  , dD = {
    class: "content"
}
  , uD = ["href"]
  , gD = {
    key: 1
};
function mD(e, s, t, n, i, o) {
    const l = k("i18n-t");
    return r(),
    u("div", cD, [s[2] || (s[2] = a("div", {
        class: "header"
    }, [a("img", {
        src: Ve,
        alt: "",
        class: "logo app"
    })], -1)), a("div", dD, [a("h4", null, d(e.$t("pages.update.title")), 1), a("p", null, [b(l, {
        keypath: "pages.update.description",
        scope: "global"
    }, {
        default: S( () => [a("b", null, "v" + d(i.version), 1), a("b", null, d(e.latestVersion), 1)]),
        _: 1
    }), s[1] || (s[1] = a("br", null, null, -1)), o.isApp ? (r(!0),
    u(_, {
        key: 0
    }, B(e.downloadUrl, ([g,c]) => (r(),
    u("a", {
        href: c,
        key: g,
        target: "_blank"
    }, [v(d(e.$t("pages.update.download", {
        label: g
    })), 1), s[0] || (s[0] = a("br", null, null, -1))], 8, uD))), 128)) : (r(),
    u("span", gD, d(e.$t("pages.update.reload")), 1))])]), s[3] || (s[3] = a("div", {
        class: "authors"
    }, [a("img", {
        src: Pe,
        alt: "",
        class: "logo tpi"
    }), a("img", {
        src: Oe,
        alt: "",
        class: "logo sb"
    })], -1))])
}
const hD = O(lD, [["render", mD], ["__scopeId", "data-v-343df6f2"]])
  , pD = {
    computed: {
        ...I("user", ["accessToken", "user"])
    },
    data() {
        var e;
        return {
            code: (e = new Proxy(new URLSearchParams(window.location.search),{
                get: (s, t) => s.get(t)
            })) == null ? void 0 : e.code,
            loading: !1,
            error: "",
            notification: ""
        }
    },
    methods: {
        ...$("user", ["logout"]),
        async submit() {
            if (!this.loading) {
                this.error = "",
                this.notification = "",
                this.loading = !0;
                try {
                    const e = await re("verify", {
                        type: "email",
                        code: this.code
                    }, this.accessToken);
                    e.success ? (this.$store.commit("user/updateUser", {
                        flags: [...this.user.flags, "verified-email"]
                    }),
                    this.$router.replace({
                        name: "Lobby",
                        hash: decodeURIComponent(window.location.hash)
                    })) : this.error = e.status
                } catch (e) {
                    this.code = "",
                    this.error = e.message
                } finally {
                    this.loading = !1
                }
            }
        },
        async reset() {
            this.code = "",
            this.error = "",
            this.notification = "";
            const e = await re("verify", {
                type: "email"
            }, this.accessToken);
            e.success ? this.notification = this.$t("pages.verification.email_success") : this.error = e.status
        }
    },
    watch: {
        accessToken() {
            var e;
            this.accessToken && ((e = this.user.flags) != null && e.includes("verified-email") ? this.$router.replace({
                name: "Lobby"
            }) : this.code && this.submit())
        }
    }
}
  , AD = {
    id: "verification"
}
  , bD = {
    class: "content"
}
  , fD = {
    key: 0,
    class: "notification"
}
  , vD = {
    key: 1,
    class: "error"
}
  , _D = ["title"]
  , yD = {
    class: "button-group"
}
  , wD = {
    class: "button primary",
    type: "submit"
};
function kD(e, s, t, n, i, o) {
    const l = k("font-awesome-icon");
    return r(),
    u("div", AD, [s[6] || (s[6] = a("div", {
        class: "header"
    }, [a("img", {
        src: Ve,
        alt: "",
        class: "logo app"
    })], -1)), a("div", bD, [v(d(e.$t("pages.verification.description")) + " ", 1), a("a", {
        href: "https://bloodontheclocktower.com/account/edit",
        target: "_blank",
        onClick: s[0] || (s[0] = (...g) => e.logout && e.logout(...g))
    }, d(e.$t("pages.verification.link")), 1), i.notification ? (r(),
    u("div", fD, d(i.notification), 1)) : p("", !0), i.error ? (r(),
    u("div", vD, [b(l, {
        icon: "exclamation-triangle"
    }), i.error === 429 && !i.code ? (r(),
    u(_, {
        key: 0
    }, [v(d(e.$t("pages.verification.error_429", [60])), 1)], 64)) : i.error === 429 && i.code ? (r(),
    u(_, {
        key: 1
    }, [v(d(e.$t("pages.verification.error_429", [10])), 1)], 64)) : i.error === "wrong" ? (r(),
    u(_, {
        key: 2
    }, [v(d(e.$t("pages.verification.error_wrong")), 1)], 64)) : i.error === 403 ? (r(),
    u(_, {
        key: 3
    }, [v(d(e.$t("modals.dialogue.error.unauthorized")), 1)], 64)) : i.error === 400 ? (r(),
    u(_, {
        key: 4
    }, [v(d(e.$t("pages.verification.error_disposable")), 1)], 64)) : i.error === 404 ? (r(),
    u(_, {
        key: 5
    }, [v(d(e.$t("pages.verification.error_verified")), 1)], 64)) : (r(),
    u(_, {
        key: 6
    }, [v(d(i.error), 1)], 64))])) : p("", !0), a("form", {
        onSubmit: s[4] || (s[4] = M( (...g) => o.submit && o.submit(...g), ["prevent"])),
        class: y({
            loading: i.loading
        })
    }, [z(a("input", {
        placeholder: "123456",
        name: "code",
        type: "text",
        pattern: "\\d+",
        "onUpdate:modelValue": s[1] || (s[1] = g => i.code = g),
        title: e.$t("pages.verification.code"),
        minlength: "6",
        maxlength: "6",
        required: ""
    }, null, 8, _D), [[W, i.code]]), a("div", yD, [a("button", wD, d(e.$t("common.button_confirm")), 1), a("button", {
        class: "button",
        type: "button",
        onClick: s[2] || (s[2] = (...g) => o.reset && o.reset(...g))
    }, d(e.$t("pages.verification.button_resend")), 1), a("button", {
        class: "button secondary",
        type: "button",
        onClick: s[3] || (s[3] = (...g) => e.logout && e.logout(...g))
    }, d(e.$t("common.button_logout")), 1)]), s[5] || (s[5] = a("div", {
        class: "loader"
    }, null, -1))], 34)]), s[7] || (s[7] = a("footer", null, [a("img", {
        src: Pe,
        alt: ""
    })], -1))])
}
const CD = O(pD, [["render", kD], ["__scopeId", "data-v-0708b5c3"]])
  , Es = "/assets/logo-DT5w2Zuc.webp"
  , SD = {
    name: "WorldcupGroup",
    computed: {
        ...I("user", ["user"]),
        ...I(["worldcup", "worldcupVotes"]),
        startPage() {
            return !this.worldcup.matches || this.worldcup.matches[0].time > Date.now() ? 0 : this.worldcup.matches[this.worldcup.matches.length - 1].time < Date.now() ? this.worldcup.matches.length - this.pageSize : Math.min(this.worldcup.matches.findIndex(e => e.time >= Date.now() - this.worldcup.votePeriod), this.worldcup.matches.length - this.pageSize)
        }
    },
    data() {
        return {
            error: null,
            page: 0,
            pageSize: 6,
            locale: navigator.languages ? navigator.languages[0] : navigator.language,
            baseURL: "https://release.botc.app/wc25"
        }
    },
    methods: {
        backToLobby() {
            const {path: e} = this.$router.currentRoute.value;
            this.$router.push({
                name: e === "/worldcup" ? this.user.id ? "Lobby" : "Login" : "WorldcupKnockout"
            })
        },
        voteState(e) {
            const s = [];
            return e.time > Date.now() ? ["upcoming"] : (e.time < Date.now() && e.time > Date.now() - this.worldcup.votePeriod ? s.push("active") : s.push("locked"),
            this.user.id && this.worldcupVotes.has(this.worldcup.matches.indexOf(e)) && s.push("voted"),
            s)
        },
        setPage(e) {
            var t, n;
            if (e < 0 && this.startPage + this.page <= 0 || e > 0 && this.startPage + this.page + this.pageSize >= ((t = this.worldcup.matches) == null ? void 0 : t.length))
                return;
            const s = e < 0 ? Math.max(this.startPage * -1, this.page - this.pageSize) : Math.min((n = this.worldcup.matches) == null ? void 0 : n.length, this.page + this.pageSize);
            this.page = this.page && s && Math.sign(s) !== Math.sign(this.page) ? 0 : s,
            history.replaceState({
                start: this.page + this.startPage
            }, null)
        },
        showMatch(e) {
            this.$router.push({
                name: "WorldcupMatch",
                params: {
                    match: this.worldcup.matches.indexOf(e)
                }
            })
        }
    },
    async beforeMount() {
        var e;
        try {
            if (await this.$store.dispatch("loadWorldcup"),
            ((e = history.state) == null ? void 0 : e.start) !== void 0) {
                const s = Number(history.state.start) - this.startPage;
                this.page = Math.min(Math.max(this.startPage * -1, Math.floor(s / this.pageSize) * this.pageSize), this.worldcup.matches.length)
            }
        } catch (s) {
            this.error = s
        }
    }
}
  , PD = {
    id: "worldcup-group"
}
  , TD = {
    class: "content"
}
  , ID = {
    key: 0,
    class: "matches"
}
  , MD = ["onClick"]
  , RD = {
    class: "logo left"
}
  , DD = ["src"]
  , ED = {
    class: "date"
}
  , ND = {
    class: "mid"
}
  , BD = {
    class: "mid"
}
  , VD = {
    class: "big"
}
  , OD = {
    class: "small"
}
  , jD = {
    class: "small"
}
  , UD = {
    class: "small"
}
  , HD = {
    class: "logo right"
}
  , qD = ["src"]
  , LD = {
    class: "channel"
}
  , zD = ["src", "alt"]
  , GD = {
    key: 1,
    class: "loader"
}
  , WD = {
    key: 2,
    class: "pagination"
};
function FD(e, s, t, n, i, o) {
    var g;
    const l = k("RouterLink");
    return r(),
    u("div", PD, [a("div", {
        class: "back",
        onClick: s[0] || (s[0] = (...c) => o.backToLobby && o.backToLobby(...c)),
        role: "button",
        "aria-label": "Back"
    }), b(l, {
        to: {
            name: "WorldcupLeaderboard"
        },
        class: "wcbutton icon-alt right"
    }, {
        default: S( () => [...s[4] || (s[4] = [v(" World Cup Leaderboard ", -1), a("span", {
            class: "icon"
        }, null, -1)])]),
        _: 1
    }), s[15] || (s[15] = a("div", {
        class: "gap"
    }, null, -1)), b(l, {
        to: {
            name: "WorldcupKnockout"
        },
        class: "wcbutton icon-alt"
    }, {
        default: S( () => [...s[5] || (s[5] = [v(" Knockout Phase ", -1), a("span", {
            class: "icon"
        }, null, -1)])]),
        _: 1
    }), s[16] || (s[16] = a("img", {
        src: Es,
        class: "logo",
        alt: ""
    }, null, -1)), a("div", TD, [e.worldcup.matches ? (r(),
    u("ul", ID, [(r(!0),
    u(_, null, B(e.worldcup.matches.slice(o.startPage + i.page, o.startPage + i.page + i.pageSize), c => {
        var h, m, A, f, T, w, V, N, U, P;
        return r(),
        u("li", {
            class: y(["match", o.voteState(c)]),
            key: e.worldcup.matches.indexOf(c),
            onClick: E => o.showMatch(c)
        }, [a("div", {
            class: y(["group", `group-${e.worldcup.scripts[c.scripts[0]].group}`])
        }, [s[6] || (s[6] = v(" Group ", -1)), a("b", null, d(e.worldcup.scripts[c.scripts[0]].group), 1)], 2), a("div", RD, [a("img", {
            src: `${i.baseURL}/${e.worldcup.scripts[c.scripts[0]].id}/logo-clean.webp`,
            alt: ""
        }, null, 8, DD), (h = c.results) != null && h.length ? (r(),
        u("div", {
            key: 0,
            class: y(["result", {
                winner: ((m = c.results) == null ? void 0 : m[0]) > ((A = c.results) == null ? void 0 : A[1])
            }])
        }, [a("b", null, d(c.results[0]), 1), s[7] || (s[7] = v(" points ", -1))], 2)) : p("", !0)]), a("div", ED, [c.time > Date.now() ? (r(),
        u(_, {
            key: 0
        }, [a("span", ND, d(new Date(c.time).toLocaleString(i.locale, {
            weekday: "short"
        })), 1), a("span", BD, d(new Date(c.time).toLocaleString(i.locale, {
            month: "short"
        })), 1), a("span", VD, d(new Date(c.time).toLocaleString(i.locale, {
            day: "numeric"
        })), 1), a("span", OD, d(new Date(c.time).toLocaleString(i.locale, {
            hour: "numeric",
            minute: "numeric"
        })), 1)], 64)) : c.voteRemaining ? (r(),
        u(_, {
            key: 1
        }, [s[8] || (s[8] = a("span", {
            class: "mid"
        }, "Vote", -1)), s[9] || (s[9] = a("span", {
            class: "mid primary"
        }, "Open", -1)), a("span", jD, d(c.voteRemaining) + " left", 1)], 64)) : (r(),
        u(_, {
            key: 2
        }, [s[10] || (s[10] = a("span", {
            class: "mid"
        }, "Vote", -1)), s[11] || (s[11] = a("span", {
            class: "mid secondary"
        }, "closed", -1)), a("span", UD, d(new Date(c.time + e.worldcup.votePeriod).toLocaleString(i.locale, {
            day: "numeric",
            month: "short"
        })), 1)], 64))]), a("div", HD, [a("img", {
            src: `${i.baseURL}/${e.worldcup.scripts[c.scripts[1]].id}/logo-clean.webp`,
            alt: ""
        }, null, 8, qD), (f = c.results) != null && f.length ? (r(),
        u("div", {
            key: 0,
            class: y(["result", {
                winner: ((T = c.results) == null ? void 0 : T[0]) < ((w = c.results) == null ? void 0 : w[1])
            }])
        }, [a("b", null, d(c.results[1]), 1), s[12] || (s[12] = v(" points ", -1))], 2)) : p("", !0)]), a("div", LD, [a("img", {
            src: e.worldcup.channels[c.channel].logo,
            alt: e.worldcup.channels[c.channel].name
        }, null, 8, zD)]), a("div", {
            class: y(["title left", {
                winner: ((V = c.results) == null ? void 0 : V[0]) > ((N = c.results) == null ? void 0 : N[1])
            }])
        }, [a("div", {
            class: y(["vote", {
                checked: e.worldcupVotes.get(e.worldcup.matches.indexOf(c)) === c.scripts[0]
            }]),
            role: "checkbox"
        }, null, 2), a("span", null, d(e.worldcup.scripts[c.scripts[0]].name), 1)], 2), a("div", {
            class: y(["title right", {
                winner: ((U = c.results) == null ? void 0 : U[0]) < ((P = c.results) == null ? void 0 : P[1])
            }])
        }, [a("div", {
            class: y(["vote", {
                checked: e.worldcupVotes.get(e.worldcup.matches.indexOf(c)) === c.scripts[1]
            }]),
            role: "checkbox"
        }, null, 2), a("span", null, d(e.worldcup.scripts[c.scripts[1]].name), 1)], 2)], 10, MD)
    }
    ), 128))])) : (r(),
    u("div", GD, "Loading...")), (g = e.worldcup.matches) != null && g.length ? (r(),
    u("div", WD, [a("div", {
        class: y(["wcbutton", {
            disabled: o.startPage + i.page <= 0
        }]),
        onClick: s[1] || (s[1] = c => o.setPage(-1))
    }, [...s[13] || (s[13] = [a("span", null, "Previous", -1)])], 2), o.startPage + i.page + i.pageSize < e.worldcup.matches.length ? (r(),
    u("div", {
        key: 0,
        class: "wcbutton right",
        onClick: s[2] || (s[2] = c => o.setPage(1))
    }, [...s[14] || (s[14] = [a("span", null, "Next", -1)])])) : (r(),
    u("div", {
        key: 1,
        class: "wcbutton right",
        onClick: s[3] || (s[3] = c => e.$router.push({
            name: "WorldcupKnockout"
        }))
    }, " Knockout Phase "))])) : p("", !0)])])
}
const QD = O(SD, [["render", FD], ["__scopeId", "data-v-886ca09a"]])
  , ZD = {
    name: "WorldcupLeaderboard",
    computed: {
        ...I(["worldcup"]),
        scriptsByGroup() {
            const e = {};
            return this.worldcup.matches && this.worldcup.scripts.forEach(s => {
                e[s.group] || (e[s.group] = []),
                e[s.group].push(s),
                e[s.group].sort( (t, n) => n.points - t.points)
            }
            ),
            e
        }
    },
    data() {
        return {
            error: null,
            baseURL: "https://release.botc.app/wc25"
        }
    },
    methods: {},
    async beforeMount() {
        try {
            await this.$store.dispatch("loadWorldcup")
        } catch (e) {
            this.error = e
        }
    }
}
  , XD = {
    id: "worldcup-leaderboard"
}
  , KD = {
    class: "content"
}
  , YD = {
    key: 0,
    class: "leaderboard"
}
  , JD = ["href"]
  , $D = {
    class: "points"
}
  , xD = {
    class: "matches"
}
  , e6 = {
    key: 1,
    class: "loader"
};
function s6(e, s, t, n, i, o) {
    return r(),
    u("div", XD, [a("div", {
        class: "back",
        onClick: s[0] || (s[0] = l => e.$router.push({
            path: "/worldcup"
        })),
        role: "button",
        "aria-label": "Back"
    }), s[4] || (s[4] = Fd('<a class="wcbutton right" href="https://docs.google.com/document/d/1PZ2Gpqp4-5-ockyX3zrkyPTHiPmy8XOgUTepJgrKKeA/edit?usp=sharing" target="_blank" data-v-0751458f> World Cup Overview <span class="icon" data-v-0751458f></span></a><div class="gap" data-v-0751458f></div><div class="info" data-v-0751458f> The top two scripts from each group move onto the knockout stages! </div><img src="' + Es + '" class="logo" alt="" data-v-0751458f>', 4)), a("div", KD, [e.worldcup.matches ? (r(),
    u("div", YD, [s[3] || (s[3] = a("div", {
        class: "banner"
    }, [v("Group"), a("small", null, "Standings")], -1)), (r(!0),
    u(_, null, B(o.scriptsByGroup, (l, g) => (r(),
    u("div", {
        class: y(["group left", "group-" + g]),
        key: g
    }, [a("aside", null, [s[1] || (s[1] = v(" Group", -1)), a("b", null, d(g), 1)]), s[2] || (s[2] = a("header", null, [a("span", null, "Points"), a("span", null, "Games Played")], -1)), a("ol", null, [(r(!0),
    u(_, null, B(l, c => (r(),
    u("li", {
        key: c.id
    }, [a("span", {
        class: "logo",
        style: L({
            backgroundImage: `url('${i.baseURL}/${c.id}/logo-clean.webp')`
        })
    }, null, 4), a("a", {
        href: c.url,
        target: "_blank"
    }, d(c.name), 9, JD), a("b", $D, d(c.points || "TBA"), 1), a("b", xD, d(c.matches), 1)]))), 128))])], 2))), 128))])) : (r(),
    u("div", e6, "Loading..."))])])
}
const t6 = O(ZD, [["render", s6], ["__scopeId", "data-v-0751458f"]])
  , i6 = {
    name: "WorldcupKnockout",
    computed: {
        ...I("user", ["user"]),
        ...I(["worldcup", "worldcupVotes"])
    },
    data() {
        return {
            error: null,
            baseURL: "https://release.botc.app/wc25",
            locale: navigator.languages ? navigator.languages[0] : navigator.language
        }
    },
    methods: {
        backToLobby() {
            const {path: e} = this.$router.currentRoute.value;
            this.$router.push({
                name: e === "/worldcup" ? this.user.id ? "Lobby" : "Login" : "WorldcupGroup"
            })
        },
        showMatch(e) {
            this.$router.push({
                name: "WorldcupMatch",
                params: {
                    match: this.worldcup.playoffs.indexOf(e) + 38
                }
            })
        }
    },
    async beforeMount() {
        try {
            await this.$store.dispatch("loadWorldcup")
        } catch (e) {
            this.error = e
        }
    }
}
  , o6 = {
    id: "worldcup-playoff"
}
  , n6 = {
    class: "content"
}
  , a6 = {
    key: 0,
    class: "brackets"
}
  , r6 = ["onClick"]
  , l6 = {
    class: "match"
}
  , c6 = {
    class: "mid"
}
  , d6 = {
    class: "mid"
}
  , u6 = {
    class: "big"
}
  , g6 = {
    class: "small"
}
  , m6 = {
    class: "small"
}
  , h6 = {
    class: "small"
}
  , p6 = {
    class: "channel"
}
  , A6 = {
    key: 1,
    class: "loader"
};
function b6(e, s, t, n, i, o) {
    const l = k("RouterLink");
    return r(),
    u("div", o6, [a("nav", null, [a("div", {
        class: "back",
        onClick: s[0] || (s[0] = (...g) => o.backToLobby && o.backToLobby(...g)),
        role: "button",
        "aria-label": "Back"
    }), b(l, {
        to: {
            name: "WorldcupLeaderboard"
        },
        class: "wcbutton icon-alt right"
    }, {
        default: S( () => [...s[1] || (s[1] = [v(" World Cup Leaderboard ", -1), a("span", {
            class: "icon"
        }, null, -1)])]),
        _: 1
    }), s[3] || (s[3] = a("div", {
        class: "gap"
    }, null, -1)), b(l, {
        to: {
            name: "WorldcupGroup"
        },
        class: "wcbutton icon-alt"
    }, {
        default: S( () => [...s[2] || (s[2] = [v(" Group Phase Results ", -1), a("span", {
            class: "icon"
        }, null, -1)])]),
        _: 1
    }), s[4] || (s[4] = a("img", {
        src: Es,
        class: "logo",
        alt: ""
    }, null, -1))]), a("div", n6, [e.worldcup.playoffs ? (r(),
    u("div", a6, [s[9] || (s[9] = a("div", {
        class: "sun"
    }, null, -1)), a("ul", null, [(r(!0),
    u(_, null, B(e.worldcup.playoffs, (g, c) => {
        var h, m, A, f, T, w, V;
        return r(),
        u("li", {
            key: c,
            onClick: N => o.showMatch(g)
        }, [a("div", l6, [a("div", {
            class: y(["date", {
                voted: e.worldcupVotes.has(38 + c)
            }])
        }, [g.time > Date.now() ? (r(),
        u(_, {
            key: 0
        }, [a("span", c6, d(new Date(g.time).toLocaleString(i.locale, {
            weekday: "short"
        })), 1), a("span", d6, d(new Date(g.time).toLocaleString(i.locale, {
            month: "short"
        })), 1), a("span", u6, d(new Date(g.time).toLocaleString(i.locale, {
            day: "numeric"
        })), 1), a("span", g6, d(new Date(g.time).toLocaleString(i.locale, {
            hour: "numeric",
            minute: "numeric"
        })), 1)], 64)) : g.voteRemaining ? (r(),
        u(_, {
            key: 1
        }, [s[5] || (s[5] = a("span", {
            class: "mid"
        }, "Vote", -1)), s[6] || (s[6] = a("span", {
            class: "mid primary"
        }, "Open", -1)), a("span", m6, d(g.voteRemaining) + " left", 1)], 64)) : (r(),
        u(_, {
            key: 2
        }, [s[7] || (s[7] = a("span", {
            class: "mid"
        }, "Vote", -1)), s[8] || (s[8] = a("span", {
            class: "mid secondary"
        }, "closed", -1)), a("span", h6, d(new Date(g.time + e.worldcup.votePeriod).toLocaleString(i.locale, {
            day: "numeric",
            month: "short"
        })), 1)], 64))], 2), a("div", {
            class: y(["votes", {
                locked: !g.voteRemaining,
                hidden: g.time > Date.now()
            }])
        }, [a("div", {
            class: y(["vote", {
                checked: e.worldcupVotes.get(e.worldcup.playoffs.indexOf(g) + 38) === g.scripts[0]
            }]),
            role: "checkbox"
        }, null, 2), a("div", {
            class: y(["vote", {
                checked: e.worldcupVotes.get(e.worldcup.playoffs.indexOf(g) + 38) === g.scripts[1]
            }]),
            role: "checkbox"
        }, null, 2)], 2), a("div", {
            class: y(["wcbutton script", {
                disabled: !e.worldcup.scripts[g.scripts[0]],
                right: c < 6,
                winner: ((h = g.results) == null ? void 0 : h[0]) > ((m = g.results) == null ? void 0 : m[1])
            }])
        }, [e.worldcup.scripts[g.scripts[0]] ? (r(),
        u("span", {
            key: 0,
            class: "logo",
            style: L({
                backgroundImage: `url('${i.baseURL}/${e.worldcup.scripts[g.scripts[0]].id}/logo-clean.webp')`
            })
        }, null, 4)) : p("", !0), a("span", null, d(((A = e.worldcup.scripts[g.scripts[0]]) == null ? void 0 : A.name) || g.scripts[0]), 1)], 2), a("div", p6, " Live on " + d(e.worldcup.channels[g.channel].name), 1), a("div", {
            class: y(["wcbutton script", {
                disabled: !e.worldcup.scripts[g.scripts[1]],
                right: c < 6,
                winner: ((f = g.results) == null ? void 0 : f[1]) > ((T = g.results) == null ? void 0 : T[0])
            }])
        }, [e.worldcup.scripts[g.scripts[1]] ? (r(),
        u("span", {
            key: 0,
            class: "logo",
            style: L({
                backgroundImage: `url('${i.baseURL}/${(w = e.worldcup.scripts[g.scripts[1]]) == null ? void 0 : w.id}/logo-clean.webp')`
            })
        }, null, 4)) : p("", !0), a("span", null, d(((V = e.worldcup.scripts[g.scripts[1]]) == null ? void 0 : V.name) || g.scripts[1]), 1)], 2)])], 8, r6)
    }
    ), 128))])])) : (r(),
    u("div", A6, "Loading..."))])])
}
const f6 = O(i6, [["render", b6], ["__scopeId", "data-v-48093c1a"]])
  , v6 = {
    name: "WorldcupMatch",
    components: {
        VerificationModal: Ia,
        DialogueModal: ga,
        FontAwesomeIcon: Y
    },
    computed: {
        ...I("user", ["user", "accessToken"]),
        ...I(["worldcup", "worldcupVotes"]),
        canVote() {
            var e, s;
            return this.user.id && (!((e = this.user.flags) != null && e.includes("newuser")) || ((s = this.user.flags) == null ? void 0 : s.includes("verified-phone")))
        },
        knockoutPhase() {
            return Number(this.$route.params.match) < 38 ? "" : Number(this.$route.params.match) < 42 ? "quarter finals" : Number(this.$route.params.match) < 44 ? "semi finals" : "finals"
        },
        match() {
            var s;
            const e = Number(this.$route.params.match);
            return (s = this.worldcup) != null && s.matches ? this.knockoutPhase ? this.worldcup.playoffs[e - 38] ? {
                ...this.worldcup.playoffs[e - 38],
                vote: this.user.id && this.worldcupVotes.get(e)
            } : !1 : this.worldcup.matches[e] ? {
                ...this.worldcup.matches[e],
                vote: this.user.id && this.worldcupVotes.get(e)
            } : !1 : !1
        },
        streamTime() {
            return new Date(this.match.time).toLocaleString(this.locale, {
                weekday: "long",
                day: "numeric",
                month: "long",
                hour: "numeric",
                minute: "numeric"
            })
        },
        voteState() {
            return this.match.time > Date.now() ? "" : this.match.time < Date.now() && this.match.time > Date.now() - this.worldcup.votePeriod ? "active" : "locked"
        }
    },
    data() {
        return {
            error: "",
            locale: navigator.languages ? navigator.languages[0] : navigator.language,
            baseURL: "https://release.botc.app/wc25",
            voteTimer: null
        }
    },
    methods: {
        backToOverview() {
            const e = Number(this.$route.params.match);
            this.$router.push({
                name: e > 23 ? "WorldcupKnockout" : "WorldcupGroup",
                state: {
                    start: this.$route.params.match
                }
            })
        },
        async vote(e, s) {
            var i;
            if (((i = e.target) == null ? void 0 : i.tagName) === "A" || this.voteState !== "active" || this.voteTimer)
                return;
            if (!this.canVote) {
                try {
                    await this.$store.dispatch("openDialogue", {
                        type: "confirm",
                        title: this.user.id ? "Account Verification Required" : "Login Required",
                        text: this.user.id ? "You need to verify your account first, before you are able to vote. Do you want to start the account verification now?" : "You need to log in first, before you are able to vote! Do you want to log in now?"
                    }) && (this.user.id ? this.$store.commit("toggleModal", {
                        name: "verification"
                    }) : this.$router.push({
                        name: "Login",
                        state: {
                            returnRoute: "WorldcupMatch",
                            returnParams: {
                                match: this.$route.params.match
                            }
                        }
                    }))
                } catch {}
                return
            }
            this.error = "";
            const t = Number(this.$route.params.match)
              , n = this.worldcupVotes.get(t) === s ? null : s;
            try {
                this.voteTimer = setTimeout( () => {
                    this.voteTimer = null
                }
                , 1e3);
                const o = await re("vote", {
                    match: t,
                    choice: n
                }, this.accessToken);
                o.success ? this.$store.commit("setWorldcupVote", {
                    match: t,
                    choice: n
                }) : this.error = o.error
            } catch (o) {
                this.error = o
            }
        }
    },
    async beforeMount() {
        try {
            this.$store.dispatch("loadWorldcup")
        } catch (e) {
            this.error = e
        }
    }
}
  , _6 = {
    id: "worldcup-match"
}
  , y6 = {
    class: "info"
}
  , w6 = {
    key: 1
}
  , k6 = {
    class: "content"
}
  , C6 = {
    key: 0,
    class: "match"
}
  , S6 = {
    key: 0
}
  , P6 = {
    key: 0,
    class: "error"
}
  , T6 = ["href"]
  , I6 = ["title"]
  , M6 = {
    class: "channel"
}
  , R6 = ["title"]
  , D6 = ["onClick"]
  , E6 = {
    key: 0,
    class: "placeholder"
}
  , N6 = ["title"]
  , B6 = {
    class: "description"
}
  , V6 = {
    class: "button-group"
}
  , O6 = ["href"]
  , j6 = ["href"]
  , U6 = ["href"]
  , H6 = {
    key: 2
}
  , q6 = {
    key: 3
}
  , L6 = {
    key: 1,
    class: "loader"
};
function z6(e, s, t, n, i, o) {
    var m, A;
    const l = k("RouterLink")
      , g = k("font-awesome-icon")
      , c = k("DialogueModal")
      , h = k("VerificationModal");
    return r(),
    u(_, null, [a("div", _6, [a("div", {
        class: "back",
        onClick: s[0] || (s[0] = (...f) => o.backToOverview && o.backToOverview(...f)),
        role: "button",
        "aria-label": "Back"
    }), b(l, {
        to: {
            name: "WorldcupLeaderboard"
        },
        class: "wcbutton icon-alt right"
    }, {
        default: S( () => [...s[1] || (s[1] = [v(" World Cup Leaderboard ", -1), a("span", {
            class: "icon"
        }, null, -1)])]),
        _: 1
    }), s[10] || (s[10] = a("div", {
        class: "gap"
    }, null, -1)), a("div", y6, [e.user.id ? (r(),
    u(_, {
        key: 0
    }, [s[2] || (s[2] = a("b", null, "Vote for your favorite script below!", -1)), s[3] || (s[3] = v(" Points are awarded based on the share of votes each script receives. ", -1))], 64)) : (r(),
    u("b", w6, "You need to Log In before you can vote!"))]), s[11] || (s[11] = a("img", {
        src: Es,
        class: "logo",
        alt: ""
    }, null, -1)), a("div", k6, [o.match ? (r(),
    u("div", C6, [a("div", {
        class: y(["group", `group-${o.knockoutPhase || e.worldcup.scripts[o.match.scripts[0]].group}`])
    }, [o.knockoutPhase ? (r(),
    u("b", S6, d(o.knockoutPhase), 1)) : (r(),
    u(_, {
        key: 1
    }, [s[4] || (s[4] = v(" Group ", -1)), a("b", null, d(e.worldcup.scripts[o.match.scripts[0]].group), 1)], 64))], 2), i.error ? (r(),
    u("div", P6, [s[5] || (s[5] = v(" Error: ", -1)), i.error === "votelocked" ? (r(),
    u(_, {
        key: 0
    }, [v(" You can no longer vote on this match. ")], 64)) : i.error === "voteupcoming" ? (r(),
    u(_, {
        key: 1
    }, [v(" You can not vote on this match, yet. ")], 64)) : i.error === "newuser" ? (r(),
    u(_, {
        key: 2
    }, [v(" You need to verify your account before you can vote. ")], 64)) : (r(),
    u(_, {
        key: 3
    }, [v(" An error occurred when you tried to vote. ")], 64))])) : p("", !0), a("a", {
        class: "banner",
        href: o.match.link || e.worldcup.channels[o.match.channel].url,
        target: "_blank"
    }, [a("span", {
        title: o.streamTime
    }, d(o.streamTime), 9, I6), a("div", M6, [o.match.time > Date.now() ? (r(),
    u(_, {
        key: 0
    }, [v("Live at:")], 64)) : (r(),
    u(_, {
        key: 1
    }, [v("Streamed at:")], 64)), a("div", {
        class: "logo",
        style: L({
            backgroundImage: `url('${e.worldcup.channels[o.match.channel].logo}')`
        }),
        title: e.worldcup.channels[o.match.channel].name
    }, null, 12, R6)])], 8, T6), a("div", {
        class: y(["scripts", {
            vote: o.voteState === "active"
        }])
    }, [(r(!0),
    u(_, null, B(o.match.scripts, (f, T) => {
        var w, V, N, U, P, E;
        return r(),
        u("div", {
            class: y(["script", {
                voted: o.match.vote === f,
                shunned: o.match.vote !== void 0 && o.match.vote !== f,
                loser: ((w = o.match.results) == null ? void 0 : w[T]) === Math.min(...(N = (V = o.match) == null ? void 0 : V.results) != null ? N : []),
                winner: ((U = o.match.results) == null ? void 0 : U[T]) === Math.max(...(E = (P = o.match) == null ? void 0 : P.results) != null ? E : [])
            }]),
            key: f,
            onClick: R => o.vote(R, f)
        }, [e.worldcup.scripts[f] ? (r(),
        u(_, {
            key: 1
        }, [a("div", {
            class: "logo",
            style: L({
                backgroundImage: `url('${i.baseURL}/${e.worldcup.scripts[f].id}/logo.webp')`
            }),
            title: e.worldcup.scripts[f].name
        }, null, 12, N6), a("div", B6, [a("b", null, [s[6] || (s[6] = a("span", {
            class: "icon"
        }, null, -1)), v(" " + d(e.worldcup.scripts[f].rule), 1)]), a("p", null, d(e.worldcup.scripts[f].description), 1), a("footer", null, [a("span", null, "Script by " + d(e.worldcup.scripts[f].author), 1), a("div", V6, [e.worldcup.scripts[f].url ? (r(),
        u("a", {
            key: 0,
            class: "button primary",
            href: e.worldcup.scripts[f].url,
            target: "_blank"
        }, " Guide ", 8, O6)) : p("", !0), a("a", {
            class: "button",
            href: `${i.baseURL}/${e.worldcup.scripts[f].id}/script.json`,
            target: "_blank"
        }, " JSON ", 8, j6), a("a", {
            class: "button secondary",
            href: `${i.baseURL}/${e.worldcup.scripts[f].id}/script.pdf`,
            target: "_blank"
        }, " PDF ", 8, U6)])])])], 64)) : (r(),
        u("div", E6, d(f), 1))], 10, D6)
    }
    ), 128)), a("div", {
        class: y(["versus", {
            results: (m = o.match.results) == null ? void 0 : m.length
        }])
    }, [(r(!0),
    u(_, null, B((A = o.match.results) != null ? A : [], (f, T) => (r(),
    u("div", {
        class: y(["result", {
            winner: f === Math.max(...o.match.results)
        }]),
        key: T
    }, [a("b", null, d(f), 1), s[7] || (s[7] = v(" points ", -1))], 2))), 128)), o.voteState ? (r(),
    u("div", {
        key: 0,
        class: y(["vote", o.voteState])
    }, [o.canVote ? (r(),
    u("span", {
        key: 0,
        class: y(["checkbox", {
            checked: o.match.vote === o.match.scripts[0]
        }])
    }, null, 2)) : (r(),
    C(g, {
        key: 1,
        icon: "lock"
    })), o.match.time > Date.now() - e.worldcup.votePeriod ? (r(),
    u("b", H6, [...s[8] || (s[8] = [v(" Vote ", -1), a("span", {
        class: "primary"
    }, "open", -1)])])) : (r(),
    u("b", q6, [...s[9] || (s[9] = [v("Vote ", -1), a("span", {
        class: "secondary"
    }, "closed", -1)])])), o.canVote ? (r(),
    u("span", {
        key: 4,
        class: y(["checkbox", {
            checked: o.match.vote === o.match.scripts[1]
        }])
    }, null, 2)) : (r(),
    C(g, {
        key: 5,
        icon: "lock"
    }))], 2)) : p("", !0)], 2)], 2)])) : (r(),
    u("div", L6, "Loading..."))])]), b(c), b(h)], 64)
}
const G6 = O(v6, [["render", z6], ["__scopeId", "data-v-69bbd2a8"]])
  , W6 = [{
    path: "/play",
    name: "Grimoire",
    component: GM
}, {
    path: "/login",
    name: "Login",
    meta: {
        isPublic: !0
    },
    component: rD
}, {
    path: "/verification",
    name: "Verification",
    component: CD
}, {
    path: "/",
    name: "Lobby",
    component: HR
}, {
    path: "/update",
    name: "Update",
    component: hD
}, {
    path: "/clock",
    name: "Clock",
    meta: {
        isPublic: !0
    },
    component: Xv
}, {
    path: "/banned",
    name: "Banned",
    component: zv
}, {
    path: Date.now() > 17476776e5 ? "/worldcup/group" : "/worldcup",
    alias: "/worldcup/group",
    name: "WorldcupGroup",
    component: QD,
    meta: {
        isPublic: !0
    }
}, {
    path: "/worldcup/leaderboard",
    name: "WorldcupLeaderboard",
    component: t6,
    meta: {
        isPublic: !0
    }
}, {
    path: Date.now() > 17476776e5 ? "/worldcup" : "/worldcup/knockout",
    alias: "/worldcup/knockout",
    name: "WorldcupKnockout",
    component: f6,
    meta: {
        isPublic: !0
    }
}, {
    path: "/worldcup/:match",
    name: "WorldcupMatch",
    component: G6,
    meta: {
        isPublic: !0
    }
}]
  , F = Qd({
    history: Zd(),
    routes: W6
});
F.beforeEach(async e => {
    var o;
    const {user: s, refreshToken: t, newVersions: n} = we.state.user
      , {loadingState: i} = we.state.grimoire;
    if (!(document.hidden && i === "initial")) {
        if (n > 1) {
            if (e.name !== "Update")
                return {
                    name: "Update"
                }
        } else if (t) {
            if ((o = s == null ? void 0 : s.flags) != null && o.includes("banned")) {
                if (e.name !== "Banned")
                    return {
                        name: "Banned"
                    }
            } else if (s.flags && !s.flags.includes("verified-email")) {
                if (e.name !== "Verification")
                    return {
                        name: "Verification"
                    }
            } else if (["Login", "Banned"].includes(e.name))
                return {
                    name: "Lobby"
                }
        } else if (!e.meta.isPublic)
            return {
                name: "Login",
                hash: decodeURIComponent(window.location.hash)
            }
    }
}
);
F.afterEach(e => {
    const s = document.getElementById("custom-css");
    if (e.name === "Grimoire") {
        const {customCSS: t, customCSSEnabled: n} = we.state.settings.advanced;
        if (!s && t && n) {
            const i = document.createElement("style");
            i.id = "custom-css",
            i.innerHTML = t,
            document.head.appendChild(i)
        }
    } else
        s && s.remove()
}
);
const F6 = e => {
    const s = new Proxy(new URLSearchParams(window.location.search),{
        get: (n, i) => n.get(i)
    });
    let t = !1;
    e.dispatch("user/checkVersion"),
    e.subscribe(async ({type: n, payload: i}, o) => {
        const {user: l, session: g} = o;
        switch (n) {
        case "user/setAccessToken":
            if (i && s.code && s.state === l.user.id) {
                const {success: c, level: h} = await e.dispatch("user/linkPatreon", s.code);
                c ? h || await e.dispatch("openDialogue", {
                    type: "alert",
                    title: "modals.dialogue.error.subscription_title",
                    text: "modals.dialogue.error.subscription_text"
                }) : await e.dispatch("openDialogue", {
                    type: "alert",
                    title: "modals.dialogue.error.link_title",
                    text: "modals.dialogue.error.link_text"
                }),
                window.location = "/";
                return
            } else if (i && !t) {
                const [c] = await Promise.all([e.dispatch("user/loadData")]);
                c != null && c.length && (e.state.edition.id || e.commit("setEdition", {
                    edition: c[0],
                    isInternal: !0
                }),
                e.commit("setLoadingState", "app data"),
                t = !0)
            } else
                i || (o.session.sessionId && e.commit("session/setSessionId", ""),
                F.currentRoute.value.meta.isPublic || await F.replace({
                    name: "Login",
                    hash: window.location.hash
                }),
                t = !1);
            break;
        case "setLoadingState":
            i === "permissions" && (l.user.flags && !l.user.flags.includes("verified-email") && F.currentRoute.value.name !== "Verification" ? await F.replace({
                name: "Verification"
            }) : !l.user.level && !g.sessionId && F.currentRoute.value.name === "Grimoire" && await F.replace({
                name: "Lobby"
            }),
            e.commit("setLoadingState", ""));
            break
        }
    }
    )
}
  , Os = e => {
    const {customCSS: s, customCSSEnabled: t} = e.state.settings.advanced
      , n = document.getElementById("custom-css") || document.createElement("style");
    n.id = "custom-css",
    s && t ? (document.head.appendChild(n),
    n.innerHTML = s) : n.remove()
}
  , Q6 = e => {
    const s = new BroadcastChannel("botc-app");
    let t = !1;
    s.addEventListener("message", ({data: l}) => {
        l === "checkSession" && e.state.session.sessionId ? s.postMessage("isInSession") : l === "isInSession" && (t = !0)
    }
    ),
    s.postMessage("checkSession");
    const n = () => {
        if (localStorage.getItem("token") && (e.commit("user/setRefreshToken", localStorage.getItem("token")),
        e.dispatch("user/refresh").catch( () => {}
        )),
        localStorage.getItem("background") && e.commit("settings/setBackground", localStorage.background),
        localStorage.getItem("zoom") && e.commit("settings/setTokenZoom", parseFloat(localStorage.getItem("zoom"))),
        localStorage.getItem("reminderZoom") && e.commit("settings/setReminderZoom", parseFloat(localStorage.getItem("reminderZoom"))),
        localStorage.getItem("grimoireOffset") && e.commit("settings/setGrimoireOffset", parseInt(localStorage.getItem("grimoireOffset"))),
        localStorage.getItem("avatarZoom") && e.commit("settings/setAvatarZoom", parseFloat(localStorage.getItem("avatarZoom"))),
        localStorage.getItem("advanced"))
            try {
                const [,l,,g,c,h,m,A,f] = JSON.parse(localStorage.getItem("advanced"));
                e.commit("settings/toggleNightStatic", !!l),
                e.commit("settings/toggleHiddenTownSquareCams", !!c),
                e.commit("settings/toggleHiddenPrivateCams", !!f),
                e.commit("settings/toggleHiddenRevealCams", !!h),
                e.commit("settings/togglePublicTownSquare", !!A),
                e.commit("settings/toggleCustomCSS", !!m),
                g && e.commit("settings/setChromaKey", g)
            } catch (l) {
                X(l)
            }
        if (localStorage.getItem("customCSS")) {
            const l = localStorage.getItem("customCSS");
            Os(e),
            e.commit("settings/setCustomCSS", l)
        }
        if (localStorage.getItem("settings"))
            try {
                const l = JSON.parse(localStorage.getItem("settings"));
                if (Array.isArray(l)) {
                    const [g,c,h,m,A,f,T,w,V,N,U,P,E=0,R=null,Z="regular",H=!0,G=!1,K=!0] = l;
                    e.commit("vote/setVotingSpeed", parseInt(c)),
                    e.commit("vote/setNominationType", Z),
                    e.commit("session/toggleWhispers", !!h),
                    e.commit("settings/toggleNightOrder", !!g),
                    e.commit("settings/togglePlayerBluffs", !!m),
                    e.commit("settings/togglePlayerNightOrder", !!G),
                    e.commit("settings/togglePlayerDuplicates", !!U),
                    e.commit("settings/toggleTutorialDisabled", !!A),
                    e.commit("settings/toggleImageOptIn", !!f),
                    e.commit("settings/toggleCosmeticsDisabled", !!P),
                    e.commit("settings/toggleAnimationsDisabled", !!T),
                    e.commit("settings/setSoundVolume", w),
                    e.commit("settings/togglePositioningDisabled", !!V),
                    e.commit("settings/toggleNightRequestPing", !!N),
                    e.commit("settings/toggleTouchSupport", !!H),
                    e.commit("settings/setColorblind", Number(E)),
                    e.commit("settings/toggleStackReminderTokens", R),
                    e.commit("settings/toggleEnglishNames", !!K)
                }
            } catch (l) {
                X(l)
            }
        if (localStorage.getItem("sounds"))
            try {
                JSON.parse(localStorage.getItem("sounds")).forEach( ([l,g]) => {
                    e.commit("settings/setSoundEffectVolume", {
                        id: l,
                        value: g
                    })
                }
                )
            } catch (l) {
                X(l)
            }
        if (localStorage.getItem("positions"))
            try {
                e.commit("setPositions", JSON.parse(localStorage.getItem("positions")))
            } catch (l) {
                X(l)
            }
        if (localStorage.getItem("keybindings"))
            try {
                const l = e.state.keybindings;
                JSON.parse(localStorage.getItem("keybindings")).forEach( ([g,c]) => {
                    Ge[g] && (l[g] = Array.isArray(c) ? c : [c])
                }
                ),
                e.commit("setKeybindings", l)
            } catch (l) {
                X(l)
            }
        if (localStorage.getItem("chatAudio"))
            try {
                const {audio: l, muted: g=!1, deafened: c=!1, ptt: h=!1, isAutoGainControl: m=!0, isNoiseSuppression: A=!0, isEchoCancellation: f=!0} = JSON.parse(localStorage.getItem("chatAudio"));
                e.state.chat.audio.isMuted !== g && e.commit("chat/toggleAudioMuted", g),
                e.state.chat.audio.isDeafened !== c && e.commit("chat/toggleAudioDeafened", c),
                e.state.chat.audio.preference !== l && e.commit("chat/setAudioPreference", l),
                e.state.chat.audio.isAutoGainControl !== m && e.commit("chat/toggleAutoGainControl", m),
                e.state.chat.audio.isNoiseSuppression !== A && e.commit("chat/toggleNoiseSuppression", A),
                e.state.chat.audio.isEchoCancellation !== f && e.commit("chat/toggleEchoCancellation", f),
                e.state.chat.audio.isPushToTalk !== h && (e.commit("chat/togglePushToTalk", h),
                h && !e.state.chat.audio.isMuted && e.commit("chat/toggleAudioMuted", !0))
            } catch (l) {
                X(l)
            }
        if (localStorage.getItem("chatVideo"))
            try {
                const {video: l, muted: g=!1, deafened: c=!1, unmirrored: h=!1, hidden: m=!1} = JSON.parse(localStorage.getItem("chatVideo"));
                e.state.chat.video.isMuted !== g && e.commit("chat/toggleVideoMuted", g),
                e.state.chat.video.isDeafened !== c && e.commit("chat/toggleVideoDeafened", c),
                e.state.chat.video.isHidden !== m && e.commit("chat/toggleVideoHidden", m),
                e.state.chat.video.preference !== l && e.commit("chat/setVideoPreference", l),
                e.state.chat.video.isUnmirrored !== h && e.commit("chat/toggleVideoUnmirrored", h)
            } catch (l) {
                X(l)
            }
    }
      , i = async () => {
        if (localStorage.getItem("townSquare") && e.commit("toggleTownSquare", !0),
        localStorage.getItem("roles"))
            try {
                e.commit("setCustomRoles", JSON.parse(localStorage.getItem("roles")))
            } catch (l) {
                X(l)
            }
        if (localStorage.getItem("edition")) {
            const l = JSON.parse(localStorage.getItem("edition"));
            l.isInternal = !0,
            e.commit("setEdition", l)
        }
        if (localStorage.getItem("bluffs"))
            try {
                e.dispatch("players/setBluffs", JSON.parse(localStorage.getItem("bluffs")))
            } catch (l) {
                X(l)
            }
        if (localStorage.getItem("npcs"))
            try {
                e.dispatch("players/setNPCs", JSON.parse(localStorage.getItem("npcs")))
            } catch (l) {
                X(l)
            }
        if (localStorage.getItem("game"))
            try {
                e.commit("game/setHistory", JSON.parse(localStorage.getItem("game")))
            } catch (l) {
                X(l)
            }
        if (localStorage.getItem("voteHistory"))
            try {
                const l = JSON.parse(localStorage.getItem("voteHistory"));
                e.commit("vote/setHistory", l.filter(g => new Date(g.timestamp).getTime() >= Date.now() - 10800 * 1e3))
            } catch (l) {
                X(l)
            }
        if (localStorage.getItem("players"))
            try {
                e.commit("players/setPlayers", JSON.parse(localStorage.getItem("players")).map(l => ({
                    ...l,
                    role: e.state.roles.get(l.role) || e.state.rolesAvailable.get(l.role) || {}
                })))
            } catch (l) {
                X(l)
            }
        if (localStorage.getItem("storytellers"))
            try {
                e.commit("players/setStorytellers", JSON.parse(localStorage.getItem("storytellers")).map(l => ({
                    ...l,
                    role: e.state.roles.get(l.role) || e.state.rolesAvailable.get(l.role) || {}
                })))
            } catch (l) {
                X(l)
            }
        else
            e.state.players.storytellers.length || await e.dispatch("players/becomeStoryteller");
        if (localStorage.getItem("seats"))
            try {
                e.commit("setSeatName", {
                    seats: JSON.parse(localStorage.getItem("seats"))
                })
            } catch (l) {
                X(l)
            }
        if (localStorage.getItem("reminders"))
            try {
                e.commit("toggleSavedReminder", JSON.parse(localStorage.getItem("reminders")))
            } catch (l) {
                X(l)
            }
        if (e.getters["user/isStoryteller"] && localStorage.getItem("timer"))
            try {
                e.commit("session/setTimer", JSON.parse(localStorage.getItem("timer")))
            } catch (l) {
                X(l)
            }
        if (e.getters["user/isStoryteller"] && localStorage.getItem("raisedHands"))
            try {
                e.commit("session/setRaisedHands", new Map(JSON.parse(localStorage.getItem("raisedHands"))))
            } catch (l) {
                X(l)
            }
    }
      , o = () => {
        if (localStorage.getItem("userOverrides"))
            try {
                e.commit("chat/setUserOverrides", new Map(JSON.parse(localStorage.getItem("userOverrides"))))
            } catch (l) {
                X(l)
            }
        if (!e.state.session.previousSessionId && localStorage.getItem("previousSession") && e.commit("session/setPreviousSessionId", localStorage.getItem("previousSession")),
        !t && !e.state.session.sessionId && localStorage.getItem("session")) {
            const l = localStorage.getItem("session");
            e.commit("session/setSessionId", l)
        }
        e.commit("setLoadingState", "permissions")
    }
    ;
    if (e.subscribe(async ({type: l, payload: g}, c) => {
        var h;
        switch (l) {
        case "setLoadingState":
            g === "app data" ? (await i(),
            e.commit("setLoadingState", "session")) : g === "session" ? o() : g === "" && ["Grimoire", "Lobby"].includes(F.currentRoute.value.name) && ((h = c.user.user.flags) != null && h.includes("tos-agreed") ? localStorage.getItem("update") !== le.version && e.commit("toggleModal", {
                name: "update"
            }) : e.dispatch("openDialogue", {
                type: "terms",
                title: "modals.dialogue.prompt.terms",
                isImportant: !0
            }).then(m => {
                m ? e.dispatch("user/updateUser", {
                    hasAgreedTOS: !0
                }) : e.dispatch("user/logout").catch( () => {}
                )
            }
            ).catch( () => {}
            ));
            break;
        case "toggleModal":
            g && g.name === "update" && localStorage.setItem("update", le.version);
            break;
        case "toggleTownSquare":
            c.grimoire.isTownSquare ? localStorage.setItem("townSquare", 1) : localStorage.removeItem("townSquare");
            break;
        case "settings/setBackground":
            g ? localStorage.setItem("background", g) : localStorage.removeItem("background");
            break;
        case "settings/toggleNightStatic":
        case "settings/toggleHiddenTownSquareCams":
        case "settings/toggleHiddenRevealCams":
        case "settings/togglePublicTownSquare":
        case "settings/toggleCustomCSS":
        case "settings/toggleHiddenPrivateCams":
        case "settings/setChromaKey":
            localStorage.setItem("advanced", JSON.stringify([!1, c.settings.advanced.hasNightStatic, !1, c.settings.advanced.chromaKey, c.settings.advanced.hasHiddenTownSquareCams, c.settings.advanced.hasHiddenRevealCams, c.settings.advanced.customCSSEnabled, c.settings.advanced.hasPublicTownSquare, c.settings.advanced.hasHiddenPrivateCams])),
            l === "settings/toggleCustomCSS" && Os(e);
            break;
        case "settings/setCustomCSS":
            g ? localStorage.setItem("customCSS", g) : localStorage.removeItem("customCSS"),
            Os(e);
            break;
        case "settings/setTokenZoom":
            g !== 0 ? localStorage.setItem("zoom", g) : localStorage.removeItem("zoom");
            break;
        case "settings/setAvatarZoom":
            g !== 1 ? localStorage.setItem("avatarZoom", g) : localStorage.removeItem("avatarZoom");
            break;
        case "settings/setReminderZoom":
            g !== 1 ? localStorage.setItem("reminderZoom", g) : localStorage.removeItem("reminderZoom");
            break;
        case "settings/setGrimoireOffset":
            g ? localStorage.setItem("grimoireOffset", g) : localStorage.removeItem("grimoireOffset");
            break;
        case "setPosition":
            Object.values(c.positions).some(m => !!m) ? localStorage.setItem("positions", JSON.stringify(c.positions)) : localStorage.removeItem("positions");
            break;
        case "setEdition":
        case "setTheme":
            if (c.grimoire.loadingState === "initial")
                return;
            localStorage.setItem("edition", JSON.stringify({
                edition: e.getters.editionExport.edition,
                theme: c.grimoire.theme
            })),
            c.edition.isOfficial && localStorage.removeItem("roles");
            break;
        case "setCustomRoles":
            g.length ? localStorage.setItem("roles", JSON.stringify(g)) : localStorage.removeItem("roles");
            break;
        case "players/setBluff":
            localStorage.setItem("bluffs", JSON.stringify(c.players.bluffs.map(m => m.isCustom ? m : {
                id: m.id
            })));
            break;
        case "players/setNPCs":
            localStorage.setItem("npcs", JSON.stringify(c.players.npcs.map(m => m.isCustom ? m : {
                id: m.id
            })));
            break;
        case "setSeatName":
            c.grimoire.seats.some(m => m) ? localStorage.setItem("seats", JSON.stringify(c.grimoire.seats)) : localStorage.removeItem("seats");
            break;
        case "toggleSavedReminder":
            c.grimoire.savedReminders.length ? localStorage.setItem("reminders", JSON.stringify(c.grimoire.savedReminders)) : localStorage.removeItem("reminders");
            break;
        case "players/addPlayer":
        case "players/updatePlayer":
        case "players/removePlayers":
        case "players/clearPlayers":
        case "players/movePlayers":
        case "players/setPlayers":
            c.players.players.length ? localStorage.setItem("players", JSON.stringify(c.players.players.map(m => ({
                ...m,
                role: m.role.id || {}
            })))) : localStorage.removeItem("players");
            break;
        case "players/addStoryteller":
        case "players/setStorytellers":
        case "players/removeStoryteller":
        case "players/updateStoryteller":
            c.players.storytellers ? localStorage.setItem("storytellers", JSON.stringify(c.players.storytellers.map(m => {
                var A, f;
                return {
                    id: m.id,
                    ...(A = m.role) != null && A.id ? {
                        role: m.role.id
                    } : {},
                    ...m.alignment ? {
                        alignment: m.alignment
                    } : {},
                    ...(f = m.reminders) != null && f.length ? {
                        reminders: m.reminders
                    } : {}
                }
            }
            ))) : localStorage.removeItem("storytellers");
            break;
        case "session/setSessionId":
            c.session.sessionId ? localStorage.setItem("session", c.session.sessionId) : localStorage.removeItem("session");
            break;
        case "session/setPreviousSessionId":
            c.session.previousSessionId ? localStorage.setItem("previousSession", c.session.previousSessionId) : localStorage.removeItem("previousSession");
            break;
        case "chat/setUserOverride":
            c.chat.userOverrides.size ? localStorage.setItem("userOverrides", JSON.stringify([...c.chat.userOverrides])) : localStorage.removeItem("userOverrides");
            break;
        case "chat/toggleAudioMuted":
        case "chat/toggleAudioDeafened":
        case "chat/togglePushToTalk":
        case "chat/toggleAutoGainControl":
        case "chat/toggleEchoCancellation":
        case "chat/toggleNoiseSuppression":
        case "chat/setAudioPreference":
        case "chat/setAudioDevice":
            if (c.chat.audio.isPushToTalk && l === "chat/toggleAudioMuted")
                return;
            localStorage.setItem("chatAudio", JSON.stringify({
                audio: c.chat.audio.device || c.chat.audio.preference,
                muted: c.chat.audio.isMuted,
                deafened: c.chat.audio.isDeafened,
                ptt: c.chat.audio.isPushToTalk,
                isAutoGainControl: c.chat.audio.isAutoGainControl,
                isEchoCancellation: c.chat.audio.isEchoCancellation,
                isNoiseSuppression: c.chat.audio.isNoiseSuppression
            }));
            break;
        case "chat/toggleVideoMuted":
        case "chat/toggleVideoDeafened":
        case "chat/toggleVideoUnmirrored":
        case "chat/toggleVideoHidden":
        case "chat/setVideoPreference":
        case "chat/setVideoDevice":
            localStorage.setItem("chatVideo", JSON.stringify({
                video: c.chat.video.device || c.chat.video.preference,
                muted: c.chat.video.isMuted,
                deafened: c.chat.video.isDeafened,
                unmirrored: c.chat.video.isUnmirrored,
                hidden: c.chat.video.isHidden
            }));
            break;
        case "user/setRefreshToken":
            g ? localStorage.setItem("token", g) : localStorage.removeItem("token");
            break;
        case "game/setPhase":
        case "game/toggleRunning":
        case "game/addHistory":
        case "game/setHistory":
        case "game/removeHistory":
            localStorage.setItem("game", JSON.stringify({
                phase: c.game.phase,
                isRunning: c.game.isRunning,
                history: c.game.history
            }));
            break;
        case "vote/addLogEntry":
        case "vote/clearHistory":
            c.vote.history.length ? localStorage.setItem("voteHistory", JSON.stringify(c.vote.history)) : localStorage.removeItem("voteHistory");
            break;
        case "settings/toggleNightOrder":
        case "vote/setVotingSpeed":
        case "vote/setNominationType":
        case "settings/togglePlayerBluffs":
        case "settings/togglePlayerNightOrder":
        case "settings/togglePlayerDuplicates":
        case "settings/toggleTutorialDisabled":
        case "settings/toggleEnglishNames":
        case "session/toggleWhispers":
        case "settings/toggleImageOptIn":
        case "settings/toggleNightRequestPing":
        case "settings/toggleTouchSupport":
        case "settings/toggleAnimationsDisabled":
        case "settings/toggleCosmeticsDisabled":
        case "settings/setSoundVolume":
        case "settings/togglePositioningDisabled":
        case "settings/toggleStackReminderTokens":
        case "settings/setColorblind":
            localStorage.setItem("settings", JSON.stringify([c.settings.game.isNightOrder, c.vote.speed, c.session.isWhispersDisabled, c.settings.game.isPlayerBluffs, c.settings.game.isTutorialDisabled, c.settings.general.isImageOptIn, c.settings.general.isAnimationsDisabled, c.settings.general.soundVolume, c.settings.general.isPositioningDisabled, c.settings.game.isNightRequestPing, c.settings.game.isPlayerDuplicates, c.settings.general.isCosmeticsDisabled, c.settings.general.colorblind, c.settings.game.stackReminderTokens, c.vote.nominationType, c.settings.game.isTouchSupport, c.settings.game.isPlayerNightOrder, c.settings.game.isEnglishNames]));
            break;
        case "settings/setSoundEffectVolume":
            [...c.settings.sounds].some( ([,m]) => m !== 1) ? localStorage.setItem("sounds", JSON.stringify([...c.settings.sounds].filter( ([,m]) => m !== 1))) : localStorage.removeItem("sounds");
            break;
        case "session/setTimer":
        case "session/setTimerPaused":
            e.getters["user/isStoryteller"] && localStorage.setItem("timer", JSON.stringify(c.session.timer));
            break;
        case "session/raiseHand":
        case "session/setRaisedHands":
            e.getters["user/isStoryteller"] && localStorage.setItem("raisedHands", JSON.stringify([...c.session.raisedHands]));
            break;
        case "setKeybindings":
            localStorage.setItem("keybindings", JSON.stringify(Object.entries(c.keybindings).filter( ([m,A]) => A.some(f => !Ge[m].includes(f)))));
            break
        }
    }
    ),
    document.hidden) {
        let l = !1;
        document.addEventListener("visibilitychange", () => {
            !document.hidden && !l && (l = !0,
            n())
        }
        )
    } else
        n()
}
;
class Z6 {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._socket.handleMessage("getGamestate", this.sendGamestate.bind(this)),
        this._socket.handleMessage("gamestate", this.updateGamestate.bind(this)),
        this._socket.handleMessage("session", this.initGamestate.bind(this))
    }
    async checkUserGamedata(s=0) {
        const {user: t, levels: n} = this._store.state.user;
        if (![...n.GROUP, ...n.SINGLE].includes(t.level)) {
            if (!(!t.level && s)) {
                if (!t.level && s <= 0) {
                    const o = new Error("modals.dialogue.error.subscription_text");
                    throw o.name = "modals.dialogue.error.subscription",
                    o
                }
            }
        }
        const {name: i} = F.currentRoute.value;
        i === "Lobby" && await F.replace({
            name: "Grimoire"
        }),
        this._store.state.grimoire.loadingState === "game" && this._store.commit("setLoadingState", "permissions")
    }
    async initGamestate(s, t) {
        var n;
        if (!t) {
            try {
                s.boostDuration !== void 0 && (await this.checkUserGamedata(s.boostDuration),
                this._store.commit("session/setBoostDuration", Date.now() + s.boostDuration)),
                s.isInternal = !0,
                this._store.commit("session/setUsers", s.usersAll),
                s.Server && !this._store.state.chat.servers.has(s.Server.host) && this._store.commit("chat/updateServer", s.Server),
                this._store.commit("session/updateMeta", {
                    owner: s.owner,
                    banlist: s.banlist,
                    createdAt: s.createdAt,
                    chatServer: (n = s.Server) == null ? void 0 : n.host,
                    isPublic: s.isPublic,
                    tags: s.tags,
                    language: s.language,
                    isInternal: !0
                }),
                await this._store.dispatch("loadEdition", s),
                await this._store.dispatch("players/setStorytellers", s.storytellers),
                await this._store.dispatch("players/setPlayers", s.players),
                await this._store.dispatch("players/setNPCs", s.npcs),
                await this._store.dispatch("players/setBluffs", s.bluffs),
                await this._store.dispatch("game/setHistory", s),
                this._store.commit("session/setPreviousSessionId", this._store.state.session.sessionId)
            } catch (i) {
                this._store.dispatch("openDialogue", {
                    type: "alert",
                    title: i.name,
                    text: [i.message, i.params]
                }).catch( () => {}
                ),
                this._socket.disconnect();
                return
            }
            if (s.storytellers && s.usersAll) {
                const {storytellers: i} = this._store.state.players
                  , o = i.find(l => {
                    var g;
                    return ((g = this._store.state.session.users.get(l.id)) == null ? void 0 : g.isOnline) && l.id !== this._store.state.user.user.id
                }
                );
                this._store.getters["user/isStoryteller"] && !o ? this.sendGamestate() : i.length && o && this._socket.sendMessage("getGamestate", !1, o.id)
            }
        }
    }
    sendGamestate(s, t) {
        const {session: n, settings: i, rolesSelected: o} = this._store.state;
        if (!this._store.getters["user/isStoryteller"] || n.users.size < 2)
            return;
        const l = this._store.getters["players/storytellerMap"]
          , g = {
            vote: this._store.getters["vote/nomination"],
            raisedHands: [...n.raisedHands],
            flags: [i.advanced.isWhispersDisabled, i.advanced.hasHiddenPrivateCams],
            timer: n.timer
        }
          , {isPointing: c, pointers: h, recipients: m} = n;
        c && (!m.length || m.includes(t)) && (g.pointing = {
            isPointing: c,
            pointers: h,
            recipients: m
        }),
        l.has(t) && (g.rolesSelected = o),
        this._socket.sendMessage("gamestate", g, t)
    }
    updateGamestate(s, t) {
        const n = this._store.getters["players/storytellerMap"];
        if (t && !n.has(t))
            return;
        const {vote: i, raisedHands: o, pointing: l, flags: g, timer: c, rolesSelected: h} = s;
        this._store.commit("vote/nomination", Object.assign(i, {
            isInternal: !0
        })),
        o && this._store.commit("session/setRaisedHands", new Map(o.length ? o : [])),
        l && (this._store.commit("session/setPointing", l),
        this._store.commit("setGrimoireMode", "pointing"));
        const [m,A] = g;
        this._store.state.settings.advanced.hasHiddenPrivateCams !== !!A && this._store.commit("settings/toggleHiddenPrivateCams", {
            value: !!A,
            isInternal: !0
        }),
        this._store.state.session.isWhispersDisabled !== !!m && this._store.commit("session/toggleWhispers", {
            value: !!m,
            isInternal: !0
        }),
        this._store.state.session.timer.expiration !== (c == null ? void 0 : c.expiration) && this._store.commit("session/setTimer", Object.assign(c, {
            isInternal: !0
        })),
        h && this._store.commit("setRolesSelected", h)
    }
}
class X6 {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: n, payload: i}) => {
            if (!(i != null && i.isInternal))
                switch (n) {
                case "players/claimSeat":
                    this.claimSeat(i).catch( () => {}
                    );
                    break;
                case "players/openEyes":
                    this.openEyes(i).catch( () => {}
                    );
                    break;
                case "players/updatePlayer":
                    this.updatePlayer(i).catch( () => {}
                    );
                    break;
                case "players/setRoles":
                    this.setRoles().catch( () => {}
                    );
                    break;
                case "players/clearPlayers":
                    this._store.commit("setSeatName", {
                        seats: []
                    }),
                    this.clearSession("players").catch( () => {}
                    );
                    break
                }
        }
        ),
        this._store.subscribeAction( ({type: n, payload: i}) => {
            if (!(i != null && i.isInternal))
                switch (n) {
                case "players/clearRoles":
                    this.clearSession("grimoire").catch( () => {}
                    );
                    break;
                case "players/removePlayers":
                    this.updateSeats("remove", i).catch( () => {}
                    );
                    break;
                case "players/movePlayers":
                    this.updateSeats("move", i).catch( () => {}
                    );
                    break;
                case "players/addPlayer":
                    this.updateSeats("add").catch( () => {}
                    );
                    break
                }
        }
        );
        const t = s.handleMessage.bind(s);
        t("updateSeats", this.handleSeatUpdate.bind(this)),
        t("updatePlayer", this.handlePlayerUpdate.bind(this)),
        t("clear", this.handleClear.bind(this))
    }
    async claimSeat(s) {
        if (s === null)
            return;
        const {players: t} = this._store.state.players
          , {user: n} = this._store.state.user
          , i = this._store.getters["players/seatedPlayerMap"];
        if (s < 0) {
            if (t.some(o => o.id === n.id))
                try {
                    await this._socket.request("claimSeat", s)
                } catch (o) {
                    this._store.dispatch("showError", ["modals.dialogue.error.vacating", o]).catch( () => {}
                    )
                }
        } else if (!i.has(n.id) && t.length > s && (s < 0 || !t[s].id))
            try {
                await this._socket.request("claimSeat", s)
            } catch (o) {
                this._store.dispatch("showError", ["modals.dialogue.error.claiming", o]).catch( () => {}
                )
            }
        this._store.commit("players/claimSeat", null)
    }
    async openEyes({index: s, value: t=!1}) {
        const {players: n} = this._store.state.players;
        if (n[s] && !(!this._store.getters["user/isStoryteller"] && n[s].id !== this._store.state.user.user.id))
            try {
                await this._socket.request("openEyes", {
                    index: s,
                    value: t
                })
            } catch (i) {
                this._store.dispatch("showError", [`modals.dialogue.error.eyes_${t ? "open" : "close"}`, i]).catch( () => {}
                )
            }
    }
    async setRoles() {
        if (this._store.getters["user/isStoryteller"])
            try {
                const s = this._store.state.players.players.map(t => ({
                    role: t.role.id,
                    alignment: t.alignment
                }));
                await this._socket.request("playerRoles", s)
            } catch (s) {
                this._store.dispatch("showError", ["modals.dialogue.error.sending_roles", s]).catch( () => {}
                )
            }
    }
    async updateSeats(s, t) {
        if (!this._store.getters["user/isStoryteller"])
            return;
        let n = this._store.state.players.players.length;
        try {
            await this._socket.request("updateSeats", {
                type: s,
                payload: t,
                check: n
            })
        } catch (i) {
            this._store.dispatch("showError", [`modals.dialogue.error.${s}_player`, i]).catch( () => {}
            )
        }
    }
    async handleSeatUpdate(s) {
        switch (s.payload || (s.payload = {}),
        s.payload.isInternal = !0,
        s.type) {
        case "add":
            await this._store.dispatch("players/addPlayer", s.payload);
            break;
        case "move":
            await this._store.dispatch("players/movePlayers", s.payload);
            break;
        case "remove":
            await this._store.dispatch("players/removePlayers", s.payload);
            break
        }
    }
    async clearSession(s) {
        if (this._store.getters["user/isStoryteller"])
            try {
                await this._socket.request("clear", s)
            } catch (t) {
                this._store.dispatch("showError", ["modals.dialogue.error.clear_grim", t]).catch( () => {}
                )
            }
    }
    async handleClear() {
        await this._store.dispatch("players/clearRoles", {
            isInternal: !0
        }),
        await this._store.dispatch("session/clearSignals")
    }
    async updatePlayer({player: s, property: t, value: n}) {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const i = ["isVoteless", "isDead", "id", "role", "alignment", "reminders"]
          , o = this._store.state.players.players.indexOf(s);
        if (!(o < 0))
            try {
                t === "role" ? await this._socket.request("updatePlayer", {
                    index: o,
                    property: t,
                    value: n.id || null
                }) : i.includes(t) ? await this._socket.request("updatePlayer", {
                    index: o,
                    property: t,
                    value: n
                }) : t === "isMarkedForDeath" && this._socket.sendMessage("updatePlayer", {
                    index: o,
                    property: t,
                    value: n
                }, "storyteller")
            } catch (l) {
                this._store.dispatch("showError", ["modals.dialogue.error.update_player", l]).catch( () => {}
                )
            }
    }
    async handlePlayerUpdate({index: s, property: t, value: n}, i) {
        const o = this._store.getters["players/storytellerMap"].has(i);
        if (i && (!o || t !== "isMarkedForDeath"))
            return;
        const l = this._store.state.players.players[s]
          , g = !0;
        if (l)
            if (t === "role") {
                if (!n && l.role.team === "traveller")
                    this._store.commit("players/updatePlayer", {
                        player: l,
                        property: "role",
                        value: {},
                        isInternal: g
                    });
                else {
                    const c = this._store.state.roles.get(n) || this._store.state.rolesAvailable.get(n) || {};
                    this._store.commit("players/updatePlayer", {
                        player: l,
                        property: "role",
                        value: c,
                        isInternal: g
                    })
                }
                l.alignment && this._store.commit("players/updatePlayer", {
                    player: l,
                    property: "alignment",
                    value: null,
                    isInternal: g
                })
            } else
                t === "id" ? (this._store.commit("players/updatePlayer", {
                    player: l,
                    property: "special",
                    isInternal: g
                }),
                l.id !== n && await this._store.dispatch("chat/textMessage", {
                    isSystem: !0,
                    senderId: "",
                    message: {
                        type: n ? "seat_claim" : "seat_vacate",
                        data: [n || l.id, s + 1]
                    }
                })) : t === "isDead" && n && s === this._store.state.vote.markedPlayer && this._store.commit("vote/setMarkedPlayer", -1),
                this._store.commit("players/updatePlayer", {
                    player: l,
                    property: t,
                    value: n,
                    isInternal: g
                })
    }
}
class K6 {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._pingInterval = 60 * 1e3,
        this._pingTimer = null,
        this._userJoinLeaveTimer = {
            [!0]: {},
            [!1]: {}
        },
        this._store.subscribe( ({type: t, payload: n}) => {
            switch (t) {
            case "session/toggleConnected":
                n ? (this.ping().catch( () => {}
                ),
                this._pingTimer = setInterval(this.ping.bind(this), this._pingInterval)) : clearInterval(this._pingTimer);
                break;
            case "session/kickUser":
                this.kickUser(n).catch( () => {}
                );
                break;
            case "user/requestGrimoire":
                this.requestGrimoire(n).catch( () => {}
                );
                break;
            case "session/togglePowerful":
                this.togglePowerful(n).catch( () => {}
                );
                break
            }
        }
        ),
        this._socket.handleMessage("updateUser", this.handleUserUpdate.bind(this)),
        this._socket.handleMessage("announcement", this.handleAnnouncement.bind(this))
    }
    async ping() {
        const s = Date.now();
        await this._socket.request("ping"),
        this._store.commit("session/setPing", Date.now() - s)
    }
    async kickUser(s) {
        if (!(!this._store.getters["user/isStoryteller"] && !this._store.getters["user/isModerator"]))
            try {
                await this._socket.request("kickUser", s)
            } catch (t) {
                this._store.dispatch("showError", ["modals.dialogue.error.kick", t])
            }
    }
    async handleUserUpdate(s, t) {
        if (t)
            return;
        const n = this._store.state.session.users.get(s.id);
        if (s.isOnline !== void 0 && s.isOnline !== (n == null ? void 0 : n.isOnline)) {
            const i = this._userJoinLeaveTimer[!s.isOnline];
            if (i[s.id])
                clearTimeout(i[s.id]),
                i[s.id] = null;
            else {
                const o = this._userJoinLeaveTimer[s.isOnline];
                o[s.id] = setTimeout( () => {
                    this._store.dispatch("chat/textMessage", {
                        isSystem: !0,
                        senderId: "",
                        message: {
                            type: s.isOnline ? "join" : "leave",
                            data: s.id
                        }
                    }),
                    o[s.id] = null
                }
                , 3 * 1e3)
            }
        } else if (s.grimoireAccess !== void 0 && s.grimoireAccess !== (n == null ? void 0 : n.grimoireAccess) && ((n == null ? void 0 : n.grimoireAccess) === 3 || s.grimoireAccess !== 0)) {
            const i = ["grim_remove", "grim_request", "grim_deny", "grim_receive"];
            await this._store.dispatch("chat/textMessage", {
                isSystem: !0,
                senderId: "",
                message: {
                    type: i[s.grimoireAccess],
                    data: s.id
                }
            })
        }
        this._store.commit("session/updateUser", s)
    }
    async handleAnnouncement({title: s, text: t}, n) {
        n || await this._store.dispatch("openDialogue", {
            type: "alert",
            title: s,
            text: t,
            isImportant: !0
        })
    }
    async requestGrimoire({id: s, status: t}={}) {
        const n = this._store.getters["players/seatedPlayerMap"]
          , i = this._store.getters["user/isStoryteller"];
        if (!(s && !i) && !(!s && n.has(this._store.state.user.user.id)))
            try {
                await this._socket.request("requestGrimoire", {
                    id: s,
                    status: t
                })
            } catch (o) {
                this._store.dispatch("showError", ["modals.dialogue.error.request_grim", o])
            }
    }
    async togglePowerful(s) {
        var n;
        const t = ((n = this._store.state.session.users.get(this._store.state.user.user.id)) == null ? void 0 : n.flags) || [];
        try {
            await this._socket.request("code", [s, this._store.state.players.players.map(i => {
                var o;
                return (o = i.role) == null ? void 0 : o.id
            }
            ), this._store.state.players.npcs.map(i => i.id)]),
            this._store.dispatch("showError", ["Reality has changed...", t.includes("powerful") ? "Your powers have been removed." : "Your powers have been enhanced."])
        } catch (i) {
            this._store.dispatch("showError", ["That didn't work", i])
        }
    }
}
class Y6 {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            n != null && n.isInternal || t === "players/setNPC" && this.sendNPCs().catch( () => {}
            )
        }
        ),
        this._socket.handleMessage("npcs", this.handleNPCs.bind(this))
    }
    async sendNPCs() {
        if (this._store.getters["user/isStoryteller"])
            try {
                await this._socket.request("npcs", this._store.getters.editionExport.npcs)
            } catch (s) {
                X(s),
                await this._store.dispatch("showError", ["modals.dialogue.error.npcs", s])
            }
    }
    handleNPCs(s) {
        this._store.state.positions.npcs || this._store.commit("setTab", {
            tab: "npcs",
            value: !0
        }),
        this._store.dispatch("players/setNPCs", s)
    }
}
class J6 {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            t === "setEdition" && !n.isInternal ? this.sendEdition().catch( () => {}
            ) : t === "setTheme" && !n.isInternal && this.sendTheme(n).catch( () => {}
            )
        }
        )
    }
    async sendEdition() {
        const s = this._store.getters.editionExport;
        if (this._store.getters["user/isStoryteller"])
            try {
                await this._socket.request("edition", s)
            } catch (t) {
                X(t),
                this._store.dispatch("showError", ["modals.dialogue.error.edition_change", t])
            }
    }
    async sendTheme({theme: s}) {
        if (this._store.getters["user/isStoryteller"])
            try {
                await this._socket.request("edition", {
                    theme: s
                })
            } catch (t) {
                X(t),
                this._store.dispatch("showError", ["modals.dialogue.error.theme_change", t])
            }
    }
}
class $6 {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            n != null && n.isInternal || (t === "session/setHook" && n.name === "distribute-roles" && this.distributeRoles().catch( () => {}
            ),
            t === "toggleRole" && this.toggleRole(n))
        }
        ),
        s.handleMessage("distributeRoles", this.handleDistribute.bind(this)),
        s.handleMessage("toggleRole", this.handleRoleToggle.bind(this))
    }
    toggleRole(s) {
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("toggleRole", s, "storyteller")
    }
    handleRoleToggle(s) {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {id: t, add: n} = s || {};
        this._store.commit("toggleRole", {
            id: t,
            add: n,
            isInternal: !0
        })
    }
    async distributeRoles() {
        if (this._store.getters["user/isStoryteller"])
            try {
                await this._socket.request("startGame", this._store.state.game)
            } catch (s) {
                this._store.dispatch("showError", ["modals.dialogue.error.start", s])
            }
    }
    async handleDistribute({role: s, alignment: t}, n) {
        if (n)
            return;
        const {user: i, modal: o, players: l, roles: g, rolesAvailable: c} = this._store.state;
        o.name === "roles" && this._store.commit("toggleModal"),
        this._store.commit("vote/clearHistory"),
        this._store.getters["user/hasGrimoireAccess"] || await this._store.dispatch("players/clearRoles");
        const h = this._store.getters["players/seatedPlayerMap"].get(i.user.id);
        if (h && s) {
            this._store.commit("players/updatePlayer", {
                player: h,
                property: "role",
                value: g.get(s) || c.get(s) || {},
                isInternal: !0
            }),
            this._store.commit("players/updatePlayer", {
                player: h,
                property: "alignment",
                value: t,
                isInternal: !0
            });
            try {
                await this._store.dispatch("session/triggerHook", {
                    name: "receive-role",
                    delay: 2500
                })
            } catch {}
        } else if (h && l.npcs.some(m => m.id === "tor"))
            try {
                await this._store.dispatch("session/triggerHook", {
                    name: "receive-tor",
                    delay: 5e3
                })
            } catch {}
        else
            await this._store.dispatch("session/triggerHook", {
                name: "distribute-roles",
                delay: 1500,
                isInternal: !0
            })
    }
}
class x6 {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            if (t === "session/setHook" && n.name === "reveal-grimoire" && !n.isInternal)
                this.revealGrimoire(n.params).catch( () => {}
                );
            else if (t === "players/updatePlayer" && n.property === "revealed" && n.value) {
                this.revealPlayer(n);
                const {players: i} = this._store.state.players;
                if (i.every( ({revealed: o}) => o)) {
                    const o = this._store.state.session.hook.params;
                    setTimeout( () => {
                        this._store.commit("session/setHook", {
                            name: "",
                            params: o
                        }),
                        this._store.commit("setGrimoireMode", "grimoire")
                    }
                    , 1e3)
                }
            } else
                t === "players/updateStoryteller" && n.property === "revealed" && n.value && !n.isInternal && this.revealGameResult()
        }
        ),
        this._socket.handleMessage("reveal", this.handleReveal.bind(this)),
        this._socket.handleMessage("revealPlayer", this.handleRevealPlayer.bind(this)),
        this._socket.handleMessage("revealGameResult", this.handleGameResult.bind(this))
    }
    async revealGrimoire(s) {
        if (this._store.getters["user/isStoryteller"]) {
            this._store.commit("chat/togglePrompt", !1);
            try {
                await this._socket.request("endGame", {
                    isEvilWin: s
                })
            } catch (t) {
                this._store.dispatch("showError", ["modals.dialogue.error.end", t])
            }
        }
    }
    async handleReveal({players: s, isEvilWin: t}) {
        this._store.state.players.players.forEach(n => this._store.commit("players/updatePlayer", {
            player: n,
            property: "revealed",
            value: !1,
            isInternal: !0
        })),
        this._store.commit("players/updateStoryteller", {
            property: "revealed",
            value: !1,
            isInternal: !0
        }),
        this._store.commit("chat/togglePrompt", !1),
        this._store.commit("setGrimoireMode", "reveal");
        try {
            await this._store.dispatch("session/triggerHook", {
                name: "reveal-grimoire",
                params: t,
                isInternal: !0
            })
        } catch {}
        this._store.getters["user/isStoryteller"] || await this._store.dispatch("players/setRoles", s)
    }
    revealPlayer({player: s, value: t, isInternal: n}) {
        n || this._store.getters["user/isStoryteller"] && s && t && this._socket.sendMessage("revealPlayer", this._store.state.players.players.indexOf(s))
    }
    handleRevealPlayer(s) {
        const t = this._store.state.players.players[s];
        s >= 0 && t && this._store.commit("players/updatePlayer", {
            player: t,
            property: "revealed",
            value: !0,
            isInternal: !0
        })
    }
    revealGameResult() {
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("revealGameResult")
    }
    handleGameResult() {
        this._store.commit("players/updateStoryteller", {
            property: "revealed",
            value: !0,
            isInternal: !0
        })
    }
}
class eE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            n != null && n.isInternal || t === "session/setHook" && n.name === "attention-gong" && this.attentionGong()
        }
        ),
        this._socket.handleMessage("attention", this.handleAttentionGong.bind(this))
    }
    attentionGong() {
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("attention")
    }
    handleAttentionGong() {
        const s = this._store.getters["game/isNight"];
        this._store.dispatch("session/triggerHook", {
            name: "attention-gong",
            delay: 1e4,
            isInternal: !0
        }).catch( () => {}
        ),
        this._socket.showNotification(s ? "The Storyteller requested your attention!" : "Please return to the Town Square!").catch( () => {}
        )
    }
}
class sE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._clearTimeout = null,
        this._store.subscribe( ({type: t, payload: n}) => {
            t === "session/addSignal" && this.sendSignal(n).catch( () => {}
            ),
            t === "game/setPhase" && (clearTimeout(this._clearTimeout),
            this._store.getters["game/isNight"] || (this._clearTimeout = setTimeout( () => this._store.dispatch("session/clearSignals"), 10 * 1e3))),
            t === "session/setHook" && ["reveal-grimoire", "distribute-roles"].includes(n.name) && (clearTimeout(this._clearTimeout),
            this._store.dispatch("session/clearSignals").catch( () => {}
            ))
        }
        ),
        this._socket.handleMessage("signal", this.handleSignal.bind(this)),
        this._socket.handleMessage("signalIndicator", this.handleSignalIndicator.bind(this))
    }
    async sendSignal({userIds: s, message: t, isInternal: n}) {
        if (!n)
            try {
                const i = await this._socket.request("signal", {
                    message: t.map( ({id: o, data: l, role: g, description: c, icon: h}) => ({
                        id: o,
                        data: l,
                        role: g,
                        icon: o === "special" ? h : void 0,
                        description: o === "special" ? c : void 0
                    })),
                    recipients: s
                });
                i.length ? s.forEach(o => {
                    var c;
                    const l = i.map(h => ({
                        id: "seen",
                        data: h
                    }))
                      , g = (c = this._store.state.session.signals[o]) == null ? void 0 : c.findIndex(h => h.message === t);
                    g >= 0 && this._store.commit("session/updateSignal", {
                        userId: o,
                        index: g,
                        message: [...t, ...l]
                    })
                }
                ) : this._store.state.modal.name === "signal" && this._store.commit("toggleModal")
            } catch (i) {
                this._store.dispatch("showError", ["modals.dialogue.error.signal", i]).catch( () => {}
                )
            }
    }
    handleSignal({message: s, recipients: t}, n) {
        const {user: i} = this._store.state.user
          , o = this._store.getters["user/isStoryteller"]
          , l = this._store.getters["user/isSpectator"]
          , g = this._store.getters["players/storytellerMap"]
          , c = this._store.getters["user/getOpenEyes"] === "open-eyes" && !(t != null && t.includes(i.id));
        if (t.includes("storyteller") && t.splice(t.indexOf("storyteller"), 1),
        (o || l || c) && t.length)
            t.forEach(h => {
                this._store.commit("session/addSignal", {
                    userIds: [h],
                    message: s,
                    isInbound: !1,
                    isInternal: !0
                })
            }
            );
        else if (!t.length || t != null && t.includes(i.id)) {
            const h = g.has(n) ? "storyteller" : n;
            this._store.commit("session/addSignal", {
                userIds: [h],
                message: s,
                isInbound: !0,
                isInternal: !0
            }),
            l || this._socket.showNotification(o ? "A player sent you a message at night" : "The Storyteller woke you at night!").catch( () => {}
            )
        } else
            return;
        !o && !l && !c && this._store.state.modal.name !== "signal" && this._store.commit("toggleModal", {
            name: "signal"
        })
    }
    handleSignalIndicator({sender: s, recipients: t}, n) {
        if (n)
            return;
        const i = this._store.getters["players/seatedPlayerMap"]
          , {users: o} = this._store.state.session
          , l = t.filter(g => i.has(g)).map(g => {
            var c;
            return ((c = o.get(g)) == null ? void 0 : c.username) || g
        }
        );
        this._store.dispatch("chat/textMessage", {
            isSystem: !0,
            isExpiring: !0,
            senderId: "",
            message: {
                type: "signal",
                data: [s, l.length ? l.join(",") : "storyteller"]
            }
        })
    }
}
class tE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._whisperRequestTimers = new Map,
        this._whisperRequestTimeout = 10 * 1e3,
        this._prevChannel = this._store.state.chat.channel,
        this._leaveChannelTimer = null,
        this._store.subscribe( ({type: t, payload: n}) => {
            switch (t) {
            case "chat/setWhisperTo":
                this.sendWhisperRequest(n);
                break;
            case "chat/removeWhisperTo":
            case "chat/removeWhisperFrom":
                this.sendWhisperRemove(n);
                break;
            case "chat/addTextMessage":
                if (n.isSystem)
                    return;
                this.sendTextMessage(n);
                break;
            case "game/setPhase":
            case "session/setHook":
                (t !== "session/setHook" || (n == null ? void 0 : n.name) === "reveal-grimoire") && this.returnToTown();
                break;
            case "players/removeStoryteller":
                (n == null ? void 0 : n.id) === this._store.state.user.user.id && this.returnToTown();
                break;
            case "vote/nomination":
            case "vote/setNomination":
                this._store.state.vote.nomination && this.returnToTown();
                break;
            case "chat/changeServer":
                this.updateServer(n).catch( () => {}
                );
                break;
            case "session/setSessionId":
                this._store.state.chat.textRecipient && this._store.commit("chat/setTextRecipient", "");
                break;
            case "chat/setUserChannel":
                this.followUser(n),
                this.leaveEmptyChannel(n);
                break;
            case "chat/setChannel":
                this.setChannel(n);
                break
            }
        }
        ),
        this._socket.handleMessage("chatServer", this.handleServerUpdate.bind(this)),
        this._socket.handleMessage("whisperRequest", this.handleWhisperRequest.bind(this)),
        this._socket.handleMessage("whisperRemove", this.handleWhisperRemove.bind(this)),
        this._socket.handleMessage("textMessage", this.handleTextMessage.bind(this)),
        this._socket.handleMessage("textMessageIndicator", this.handleTextMessageIndicator.bind(this))
    }
    async updateServer(s) {
        if (this._store.getters["user/isStoryteller"] && s)
            try {
                await this._socket.request("updateServer", s),
                this._store.commit("session/updateMeta", {
                    chatServer: s
                })
            } catch (t) {
                this._store.dispatch("showError", ["modals.dialogue.error.server_change", t])
            }
    }
    async handleServerUpdate(s, t) {
        t || (this._store.state.chat.servers.has(s.host) || this._store.commit("chat/updateServer", s),
        this._store.commit("session/updateMeta", {
            chatServer: s.host
        }))
    }
    sendWhisperRequest({id: s, channel: t, isInternal: n}) {
        var l;
        const {whisperFrom: i} = this._store.state.chat
          , o = t.split("-").shift();
        if (!n && s)
            if (this._socket.sendMessage("whisperRequest", t, s),
            o === ((l = i.get(s)) == null ? void 0 : l.split("-").shift())) {
                const g = o + "-" + Math.min(t.split("-").pop(), i.get(s).split("-").pop());
                this.initiateChat(s, g)
            } else
                this._whisperRequestTimers.set(s, setTimeout( () => this._store.commit("chat/removeWhisperTo", {
                    id: s
                }), this._whisperRequestTimeout))
    }
    async handleWhisperRequest(s, t) {
        var g, c, h;
        const {whisperFrom: n, whisperTo: i} = this._store.state.chat
          , {users: o} = this._store.state.session
          , l = s.split("-").shift();
        if (l === ((g = i.get(t)) == null ? void 0 : g.split("-").shift())) {
            const m = l + "-" + Math.min(s.split("-").pop(), i.get(t).split("-").pop());
            this.initiateChat(t, m),
            clearTimeout(this._whisperRequestTimers.get(t)),
            this._whisperRequestTimers.delete(t)
        } else if (n.get(t) !== s) {
            if (this._store.commit("chat/setWhisperFrom", {
                id: t,
                channel: s,
                isInternal: !0
            }),
            (!this._store.getters["game/isNight"] || this._store.state.settings.game.isNightRequestPing || this._store.getters["user/isStoryteller"]) && this._store.commit("playSound", "privateRequest"),
            (c = o.get(t)) != null && c.isOnline) {
                const m = ((h = o.get(t)) == null ? void 0 : h.username) + " has requested a private chat with you.";
                this._socket.showNotification(m).catch( () => {}
                )
            }
            this._store.commit("setTab", {
                tab: "chat",
                value: !0
            })
        }
    }
    initiateChat(s, t) {
        const {userChannels: n} = this._store.state.chat
          , {user: i} = this._store.state.user;
        if (this._store.commit("chat/removeWhisperFrom", {
            isInternal: !0
        }),
        n.get(i.id) === t) {
            this._store.commit("chat/removeWhisperTo", {
                id: s,
                isInternal: !0
            }),
            clearTimeout(this._whisperRequestTimers.get(s)),
            this._whisperRequestTimers.delete(s);
            return
        }
        this._store.commit("chat/removeWhisperTo", {
            isInternal: !0
        }),
        !(this._store.getters["game/isNight"] && !this._store.getters["players/storytellerMap"].has(s) && !this._store.getters["user/isStoryteller"]) && (this._store.state.chat.following && this._store.commit("chat/setFollowing", ""),
        this._store.commit("chat/setChannel", t),
        this._store.commit("setTab", {
            tab: "chat",
            value: !0
        }))
    }
    sendWhisperRemove({id: s, isInternal: t}={}) {
        if (!t) {
            if (s)
                this._socket.sendMessage("whisperRemove", null, s),
                clearTimeout(this._whisperRequestTimers.get(s)),
                this._whisperRequestTimers.delete(s);
            else if (this._whisperRequestTimers.size) {
                const n = [];
                this._whisperRequestTimers.forEach( (i, o) => {
                    n.push(["whisperRemove", null, o]),
                    clearTimeout(i)
                }
                ),
                this._socket.sendMessages(n),
                this._whisperRequestTimers = new Map
            }
        }
    }
    handleWhisperRemove(s, t) {
        const {whisperFrom: n, whisperTo: i} = this._store.state.chat;
        i.has(t) && (this._store.commit("chat/removeWhisperTo", {
            id: t,
            isInternal: !0
        }),
        clearTimeout(this._whisperRequestTimers.get(t)),
        this._whisperRequestTimers.delete(t)),
        n.has(t) && this._store.commit("chat/removeWhisperFrom", {
            id: t,
            isInternal: !0
        })
    }
    sendTextMessage({message: s, recipientId: t, senderId: n}) {
        const {user: i} = this._store.state.user
          , {players: o} = this._store.state.players
          , l = this._store.getters["players/storytellerMap"]
          , g = this._store.getters["user/isSpectator"]
          , c = this._store.getters["user/isModerator"];
        if (n === i.id)
            if (t && t !== "spectator") {
                if (g && !c && !l.has(t))
                    return;
                const h = [["textMessage", {
                    message: s.substring(0, 250),
                    recipientId: t
                }, [t, "storyteller"]]]
                  , m = o.findIndex(f => f.id === i.id)
                  , A = o.findIndex(f => f.id === t);
                if (m > -1 && A > -1 && Math.abs(m - A) % (o.length - 2) === 1) {
                    const f = Math.min(s.length, 250);
                    h.push(["textMessageIndicator", {
                        recipientId: t,
                        length: f
                    }]),
                    this.handleTextMessageIndicator({
                        recipientId: t,
                        length: f
                    }, i.id)
                }
                this._socket.sendMessages(h)
            } else
                this._socket.sendMessage("textMessage", {
                    message: s.substring(0, 250),
                    recipientId: t
                }, (!c && g || t === "spectator") && "spectator")
    }
    handleTextMessage({message: s="", recipientId: t="", isHidden: n}, i) {
        var c;
        const {user: o} = this._store.state.user
          , l = this._store.getters["players/seatedPlayerMap"]
          , g = this._store.getters["players/storytellerMap"];
        if (!(!l.has(i) && !g.has(o.id) && l.has(o.id) && !["special-tpi", "special-moderator"].includes((c = this._store.state.session.users.get(i)) == null ? void 0 : c.level)))
            return this._store.dispatch("chat/textMessage", {
                message: s == null ? void 0 : s.substring(0, 250),
                senderId: i,
                isHidden: n,
                recipientId: t
            })
    }
    handleTextMessageIndicator({recipientId: s="", length: t=0}, n) {
        const i = n + String(Date.now()).substring(9) + this._store.state.chat.textMessageIndicators.length;
        this._store.commit("chat/addTextMessageIndicator", {
            msgId: i,
            senderId: n,
            length: Math.max(1, Math.min(t, 250)),
            recipientId: s
        }),
        setTimeout( () => this._store.commit("chat/removeTextMessageIndicator", i), 4e3)
    }
    returnToTown() {
        const {chat: s, grimoire: t} = this._store.state;
        s.channel && this._store.commit("chat/setChannel", "");
        const n = {
            id: "",
            isInternal: !0
        };
        Object.values(this._whisperRequestTimers).forEach(i => clearTimeout(i)),
        this._whisperRequestTimers = new Map,
        s.whisperTo.size && this._store.commit("chat/removeWhisperTo", n),
        s.whisperFrom.size && this._store.commit("chat/removeWhisperFrom", n),
        t.tabs.chat && this._store.commit("setTab", {
            tab: "chat"
        })
    }
    followUser({userId: s, value: t}) {
        const {following: n} = this._store.state.chat;
        if (s === n) {
            if (!this._store.getters["user/hasGrimoireAccess"] || !this._store.getters["players/seatedPlayerMap"].has(s)) {
                n && this._store.commit("chat/setFollowing", "");
                return
            }
            this._store.commit("chat/setChannel", t)
        }
    }
    leaveEmptyChannel() {
        if (!this._store.getters["user/isSpectator"])
            return;
        const {channel: s, userChannels: t} = this._store.state.chat
          , {id: n} = this._store.state.user.user;
        if (this._store.getters["chat/isPrivateChat"](s) && ![...t].some( ([i,o]) => i !== n && o === s)) {
            if (this._leaveChannelTimer)
                return;
            this._leaveChannelTimer = setTimeout( () => {
                this._leaveChannelTimer = null,
                this._store.commit("chat/setChannel", "")
            }
            , 5e3)
        }
    }
    setChannel(s) {
        clearTimeout(this._leaveChannelTimer),
        this._leaveChannelTimer = null,
        this._store.getters["chat/isPrivateChat"](this._prevChannel) && !s && (this._store.state.chat.whisperTo.size && this._store.commit("chat/removeWhisperTo"),
        this._store.state.chat.whisperFrom.size && !this._store.getters["user/isStoryteller"] && this._store.commit("chat/removeWhisperFrom")),
        this._prevChannel = s
    }
}
class iE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            var i;
            if (!(n != null && n.isInternal))
                switch (t) {
                case "players/addStoryteller":
                    this.addStoryteller(n).catch( () => {}
                    );
                    break;
                case "players/removeStoryteller":
                    this.removeStoryteller(n).catch( () => {}
                    );
                    break;
                case "players/updateStoryteller":
                    this.updateStoryteller(n).catch( () => {}
                    );
                    break;
                case "players/requestStoryteller":
                    n && this.requestStoryteller(n);
                    break;
                case "session/updateUser":
                    ((i = this._store.state.modal.params) == null ? void 0 : i.storytellerId) === n.id && n.isOnline === !1 && this._store.commit("toggleModal");
                    break
                }
        }
        , {
            prepend: !0
        }),
        this._socket.handleMessage("removeStoryteller", this.handleSTRemove.bind(this)),
        this._socket.handleMessage("addStoryteller", this.handleSTAdd.bind(this)),
        this._socket.handleMessage("updateStoryteller", this.handleSTUpdate.bind(this)),
        this._socket.handleMessage("requestStoryteller", this.handleSTRequest.bind(this)),
        this._socket.handleMessage("respondStoryteller", this.handleSTResponse.bind(this)),
        this._socket.handleMessage("gamestateST", this.handleStorytellerGamestate.bind(this))
    }
    async addStoryteller({id: s}) {
        const {storytellers: t} = this._store.state.players;
        if (!(t.length && !this._store.getters["user/isStoryteller"] && !this._store.getters["user/isModerator"]))
            try {
                await this._socket.request("addStoryteller", {
                    id: s
                }),
                this.sendStorytellerGamestate({
                    id: s
                }),
                await this._store.dispatch("chat/textMessage", {
                    isSystem: !0,
                    senderId: "",
                    message: {
                        type: "storyteller_add",
                        data: s
                    }
                })
            } catch (n) {
                await this._store.dispatch("showError", ["modals.dialogue.error.add_storyteller", n.replace(/^Validation error:/i, "")])
            }
    }
    async handleSTAdd(s, t) {
        if (t)
            return;
        const {user: n} = this._store.state.user
          , {following: i} = this._store.state.chat
          , o = this._store.getters["players/storytellerMap"];
        s.isInternal = !0,
        this._store.commit("players/addStoryteller", s),
        this.sendStorytellerGamestate(s),
        s.id === n.id && o.has(i) && this._store.commit("chat/setFollowing", ""),
        await this._store.dispatch("chat/textMessage", {
            isSystem: !0,
            senderId: "",
            message: {
                type: "storyteller_add",
                data: s.id
            }
        })
    }
    requestStoryteller({id: s}) {
        !this._store.getters["user/isStoryteller"] && !this._store.getters["user/isModerator"] || this._socket.sendMessage("requestStoryteller", this._store.state.players.storytellerRequests.includes(s), s)
    }
    async handleSTRequest(s, t) {
        var n;
        if (!(!this._store.getters["players/storytellerMap"].has(t) && !this._store.getters["user/isModerator"]))
            if (s) {
                let i = !1;
                try {
                    i = await this._store.dispatch("openDialogue", {
                        type: "confirm",
                        title: "modals.dialogue.prompt.storyteller_title",
                        text: "modals.dialogue.prompt.storyteller_text",
                        storytellerId: t
                    })
                } catch {} finally {
                    this._socket.sendMessage("respondStoryteller", i, t)
                }
            } else
                (n = this._store.state.modal.params) != null && n.storytellerId && this._store.commit("toggleModal")
    }
    async handleSTResponse(s, t) {
        !this._store.getters["user/isStoryteller"] && !this._store.getters["user/isModerator"] || this._store.state.players.storytellerRequests.includes(t) && (s ? (this._store.commit("players/addStoryteller", {
            id: t
        }),
        await this._store.dispatch("chat/textMessage", {
            isSystem: !0,
            senderId: "",
            message: {
                type: "storyteller_add",
                data: t
            }
        })) : this._store.commit("players/requestStoryteller", {
            id: t,
            isInternal: !0
        }))
    }
    async removeStoryteller({id: s}) {
        const t = this._store.state.user.user.id;
        if (!(s !== t && !this._store.getters["user/isStoryteller"] && !this._store.getters["user/isModerator"]))
            try {
                await this._socket.request("removeStoryteller", {
                    id: s
                }),
                await this._store.dispatch("chat/textMessage", {
                    isSystem: !0,
                    senderId: "",
                    message: {
                        type: "storyteller_remove",
                        data: s
                    }
                })
            } catch (n) {
                this._store.dispatch("showError", ["modals.dialogue.error.remove_storyteller", n])
            }
    }
    async handleSTRemove(s) {
        s.isInternal = !0,
        this._store.commit("players/removeStoryteller", s),
        await this._store.dispatch("chat/textMessage", {
            isSystem: !0,
            senderId: "",
            message: {
                type: "storyteller_remove",
                data: s.id
            }
        })
    }
    async updateStoryteller({storyteller: s, property: t, value: n}) {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const i = ["role", "alignment", "reminders"]
          , {id: o} = s;
        try {
            i.includes(t) && await this._socket.request("updateStoryteller", {
                id: o,
                property: t,
                value: t === "role" ? n.id || null : n
            })
        } catch (l) {
            this._store.dispatch("showError", ["modals.dialogue.error.update_storyteller", l])
        }
    }
    handleSTUpdate({id: s, property: t, value: n}, i) {
        if (i)
            return;
        const o = this._store.getters["players/storytellerMap"].get(s)
          , l = !0;
        if (o)
            if (t === "role") {
                const g = this._store.state.roles.get(n) || this._store.state.rolesAvailable.get(n) || {};
                this._store.commit("players/updateStoryteller", {
                    storyteller: o,
                    property: "role",
                    value: g,
                    isInternal: l
                }),
                o.alignment && this._store.commit("players/updateStoryteller", {
                    storyteller: o,
                    property: "alignment",
                    value: null,
                    isInternal: l
                })
            } else
                this._store.commit("players/updateStoryteller", {
                    storyteller: o,
                    property: t,
                    value: n,
                    isInternal: l
                })
    }
    sendStorytellerGamestate({id: s}={}) {
        if (!s || !this._store.getters["user/isStoryteller"])
            return;
        const t = this._store.state.user.user.id;
        if (t === s)
            return;
        if (this._store.state.players.storytellers.find(i => {
            var o;
            return ((o = this._store.state.session.users.get(i == null ? void 0 : i.id)) == null ? void 0 : o.isOnline) && (i == null ? void 0 : i.id) !== s
        }
        ).id === t && s !== t) {
            const i = this._store.state.rolesSelected;
            this._socket.sendMessage("gamestateST", {
                rolesSelected: i
            }, s)
        }
    }
    handleStorytellerGamestate(s, t) {
        const n = this._store.getters["players/storytellerMap"];
        if (t && !n.has(t) || !this._store.getters["user/isStoryteller"])
            return;
        const {rolesSelected: i} = s;
        i && this._store.commit("setRolesSelected", i)
    }
}
class oE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            if (t === "game/setPhase" && this._store.getters["game/isNight"] && this.clearMarked(),
            t === "players/removeStoryteller" && (n == null ? void 0 : n.id) === this._store.state.user.user.id && this._store.state.vote.voteTimer && this._store.commit("vote/setVoteTimer", "paused"),
            t === "players/setNPC" && this._store.getters["user/isStoryteller"]) {
                const {players: i, vote: o} = this._store.state
                  , l = i.npcs.some(c => c.id === "bigwig")
                  , g = o.nominationType === "bigwig";
                l !== g && this._store.commit("vote/setNominationType", {
                    value: l ? "bigwig" : "regular",
                    isInternal: n == null ? void 0 : n.isInternal
                })
            }
            if ((t === "vote/nomination" || t === "vote/setNomination" || t === "vote/setSelectedPlayer" || t === "vote/toggleVoteInProgress" || t === "vote/lockVote" && (n <= 0 || (n == null ? void 0 : n.value) <= 0) || t === "players/addStoryteller" && (n != null && n.id) || t === "players/updatePlayer" && (n == null ? void 0 : n.property) === "id" && (n != null && n.value)) && this.adjustVoteVolume(),
            !(n != null && n.isInternal))
                switch (t) {
                case "vote/nomination":
                case "vote/setNomination":
                    this.nomination(n);
                    break;
                case "vote/toggleIsHidden":
                    this.toggleIsHidden();
                    break;
                case "vote/setHighscore":
                    this.setHighscore(n);
                    break;
                case "vote/setNominationType":
                    this.setNominationType(n);
                    break;
                case "vote/setSelectedPlayer":
                    this.setSelectedPlayer(n);
                    break;
                case "vote/toggleVoteInProgress":
                    this.setVoteInProgress(n);
                    break;
                case "vote/castVote":
                    this.castVote(n);
                    break;
                case "vote/lockVote":
                    this.lockVote();
                    break;
                case "session/setSessionId":
                    n || this._store.commit("vote/nomination", {
                        isInternal: !0
                    })
                }
        }
        ),
        this._store.subscribeAction( ({type: t, payload: n}) => {
            t === "vote/setMarkedPlayer" && !(n != null && n.isInternal) && this.setMarked()
        }
        ),
        this._socket.handleMessage("nomination", this.handleNomination.bind(this)),
        this._socket.handleMessage("voteInProgress", this.handleVoteInProgress.bind(this)),
        this._socket.handleMessage("voteIsHidden", this.handleIsHidden.bind(this)),
        this._socket.handleMessage("vote", this.handleVote.bind(this)),
        this._socket.handleMessage("lock", this.handleLock.bind(this)),
        this._socket.handleMessage("marked", this.handleMarked.bind(this)),
        this._socket.handleMessage("voteHighscore", this.handleHighscore.bind(this)),
        this._socket.handleMessage("nominationType", this.handleType.bind(this)),
        this._socket.handleMessage("selectedPlayer", this.handleSelectedPlayer.bind(this))
    }
    nomination() {
        var i;
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {vote: s, players: {players: t, storytellers: n}} = this._store.state;
        s.nomination && (t.length <= s.nomination[0] || t.length <= s.nomination[1]) || (this._socket.sendMessage("nomination", this._store.getters["vote/nomination"]),
        [...t, ...n].some( ({role: o, isDead: l, reminders: g}) => {
            var c;
            return ((c = o.special) == null ? void 0 : c.some(h => h.type === "vote" && h.name === "hidden")) && !g.some( ({name: h}) => h.match(/^drunk|poisoned$/i)) && (!l || g.some( ({name: h}) => h.match(/^has ability$/i)))
        }
        ) && s.nomination && ((i = t[s.nomination[1]]) == null ? void 0 : i.role.team) !== "traveller" && this._store.commit("vote/toggleIsHidden", !0))
    }
    handleNomination(s, t) {
        this._store.getters["players/storytellerMap"].has(t) && (s.nomination || this._store.dispatch("vote/addLogEntry"),
        s.isInternal = !0,
        this._store.commit("vote/nomination", s))
    }
    toggleIsHidden() {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {isHidden: s} = this._store.state.vote;
        this._socket.sendMessage("voteIsHidden", s, "storyteller")
    }
    handleIsHidden(s) {
        this._store.commit("vote/toggleIsHidden", {
            value: s,
            isInternal: !0
        })
    }
    setHighscore(s) {
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("voteHighscore", s)
    }
    handleHighscore(s) {
        this._store.commit("vote/setHighscore", {
            value: s,
            isInternal: !0
        })
    }
    setNominationType(s) {
        var t;
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("nominationType", (t = s == null ? void 0 : s.value) != null ? t : s)
    }
    handleType(s) {
        this._store.commit("vote/setNominationType", {
            value: s,
            isInternal: !0
        })
    }
    setSelectedPlayer(s) {
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("selectedPlayer", s)
    }
    handleSelectedPlayer(s) {
        this._store.commit("vote/setSelectedPlayer", {
            value: s,
            isInternal: !0
        })
    }
    setVoteInProgress(s) {
        if (!this._store.state.vote.nomination || !this._store.getters["user/isStoryteller"])
            return;
        const {isHidden: t, locked: n, speed: i} = this._store.state.vote;
        this._socket.sendMessage("voteInProgress", [s, s || n > 0 ? t : !1, i])
    }
    handleVoteInProgress([s,t,n], i) {
        if (this._store.state.vote.nomination && this._store.getters["players/storytellerMap"].has(i)) {
            if (s && this._store.state.vote.isInProgress && this._store.getters["user/isStoryteller"]) {
                const {storytellers: o} = this._store.state.players
                  , {user: l} = this._store.state.user;
                o.findIndex(g => g.id === i) < o.findIndex(g => g.id === l.id) && this._store.commit("vote/setVoteTimer")
            }
            this._store.commit("vote/setVotingSpeed", {
                value: n,
                isInternal: !0
            }),
            this._store.commit("vote/toggleIsHidden", {
                value: t,
                isInternal: !0
            }),
            this._store.commit("vote/toggleVoteInProgress", {
                value: s,
                isInternal: !0
            })
        }
    }
    castVote({index: s, isInternal: t}) {
        const {players: {players: n}, user: i, vote: o} = this._store.state;
        if (t || this._store.getters["user/isStoryteller"])
            return;
        const l = o.isHidden ? ["storyteller"] : [];
        i.user.id === n[s].id && this._socket.sendMessage("vote", [s, o.votes[s]], l)
    }
    handleVote([s,t], n) {
        const {vote: i, players: {players: o}} = this._store.state;
        if (!o[s])
            return;
        const l = o.length
          , g = o[s].id === n
          , c = this._store.getters["players/storytellerMap"].has(n)
          , h = (s - 1 + l - i.nomination[1]) % l;
        (c || g && h >= i.locked - 1) && this._store.commit("vote/castVote", {
            index: s,
            value: t,
            isInternal: !0
        })
    }
    lockVote() {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {locked: s, votes: t, nomination: n, isHidden: i} = this._store.state.vote
          , {players: o, npcs: l} = this._store.state.players
          , g = this._store.getters.filterAbilities
          , c = (n[1] + s - 1) % o.length
          , h = o[c]
          , m = o[n[1]];
        if (s < 2)
            this._socket.sendMessage("lock", [s]);
        else {
            const A = (h == null ? void 0 : h.role.id) === "banshee" && (h == null ? void 0 : h.reminders.some(w => w.role === "banshee")) && !(h != null && h.reminders.some(w => w.name.match(/drunk|poisoned/i))) && (h == null ? void 0 : h.isDead)
              , f = o.some(w => (w == null ? void 0 : w.role.id) === "voudon" && !w.isDead);
            let T = t[c] ? 1 : 0;
            if (m.role.team !== "traveller") {
                A ? T = t[c] === 2 ? 2 : T : h != null && h.isDead && (h != null && h.isVoteless) && !f && (T = 0);
                const w = [...o, ...l.map(V => ({
                    role: V
                }))].map(V => g(V, "vote")).flat();
                h == null || h.reminders.forEach( ({role: V}) => {
                    const N = w.find(U => U.role.id === V);
                    N && N.ability.name === "multiplier" && (T *= N.ability.value)
                }
                )
            }
            T !== t[c] && this._store.commit("vote/castVote", {
                index: c,
                value: T,
                isInternal: !0
            }),
            m.role.team !== "traveller" && (h != null && h.isDead) && !(h != null && h.isVoteless) && T !== 0 && !i && !f && !A && (this._store.commit("players/updatePlayer", {
                player: h,
                property: "isVoteless",
                value: !0
            }),
            this._store.dispatch("game/addHistory", {
                data: h.id || o.indexOf(h) + 1,
                type: "vote"
            }).catch( () => {}
            )),
            i ? this._socket.sendMessages([["lock", [s, null], ["user", "-storyteller"]], ["lock", [s, T], "storyteller"]]) : this._socket.sendMessage("lock", [s, T])
        }
    }
    handleLock([s,t], n) {
        if (this._store.state.vote.nomination && this._store.getters["players/storytellerMap"].has(n) && (this._store.commit("vote/lockVote", {
            value: s,
            isInternal: !0
        }),
        s > 1 && t !== null)) {
            const {locked: i, nomination: o, votes: l} = this._store.state.vote
              , {players: g} = this._store.state.players
              , c = (o[1] + i - 1) % g.length;
            l[c] !== t && this._store.commit("vote/castVote", {
                index: c,
                value: t,
                isInternal: !0
            })
        }
    }
    setMarked() {
        this._store.getters["user/isStoryteller"] && this._socket.sendMessage("marked")
    }
    handleMarked() {
        this._store.dispatch("vote/setMarkedPlayer", {
            isInternal: !0
        }).catch( () => {}
        )
    }
    clearMarked() {
        this._store.commit("vote/setMarkedPlayer", -1),
        this._store.commit("vote/setHighscore", {
            isInternal: !0,
            value: 0
        })
    }
    _setPlayerVolumes(s, t=[]) {
        const {players: n, chat: i} = this._store.state
          , o = "vote";
        n.players.forEach( (l, g) => {
            var h, m, A;
            const c = t.includes(g) ? 1 : s;
            l.id && (c === 1 && ((h = i.audio.volumes.get(l.id)) == null ? void 0 : h[o]) !== void 0 ? this._store.commit("chat/setVolume", {
                userId: l.id,
                type: o
            }) : ((A = (m = i.audio.volumes.get(l.id)) == null ? void 0 : m[o]) != null ? A : 1) !== c && this._store.commit("chat/setVolume", {
                userId: l.id,
                type: o,
                value: c
            }))
        }
        )
    }
    adjustVoteVolume() {
        const {nominationType: s, nomination: t, locked: n, selectedPlayer: i, isInProgress: o} = this._store.state.vote
          , {players: l, chat: g} = this._store.state
          , c = "vote";
        if (t && s === "focus")
            this._setPlayerVolumes(.5, [t[1]]);
        else if (t && s === "phases" && n < -1) {
            const h = n === -3 ? t[0] : t[1];
            this._setPlayerVolumes(0, [h])
        } else if (t && s === "bigwig" && n <= 0 && !o) {
            const h = i === -1 ? t[1] : i;
            this._setPlayerVolumes(0, [h])
        } else
            this._setPlayerVolumes(1);
        l.storytellers.forEach(h => {
            var m;
            ((m = g.audio.volumes.get(h.id)) == null ? void 0 : m[c]) !== void 0 && this._store.commit("chat/setVolume", {
                userId: h.id,
                type: c
            })
        }
        )
    }
}
class nE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            if (!(n != null && n.isInternal))
                switch (t) {
                case "settings/toggleHiddenPrivateCams":
                    this.togglePrivateCams();
                    break;
                case "session/toggleWhispers":
                    this.toggleWhispers();
                    break;
                case "session/updateMeta":
                    this.updateMeta(n).catch( () => {}
                    );
                    break
                }
        }
        ),
        this._socket.handleMessage("privatecams", this.handlePrivateCams.bind(this)),
        this._socket.handleMessage("whispers", this.handleWhispers.bind(this)),
        this._socket.handleMessage("metaUpdate", this.handleMetaUpdate.bind(this))
    }
    async updateMeta(s={}) {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const t = ["isPublic", "language", "tags"]
          , n = {};
        if (Object.keys(s).forEach(i => {
            t.includes(i) && (n[i] = s[i])
        }
        ),
        !!Object.keys(n).length)
            try {
                await this._socket.request("updateMeta", n)
            } catch (i) {
                this._store.dispatch("showError", ["modals.dialogue.error.update_game", i])
            }
    }
    handleMetaUpdate(s, t) {
        t || (s.isInternal = !0,
        this._store.commit("session/updateMeta", s))
    }
    togglePrivateCams() {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {hasHiddenPrivateCams: s} = this._store.state.settings.advanced;
        this._socket.sendMessage("privatecams", s)
    }
    handlePrivateCams(s) {
        this._store.commit("settings/toggleHiddenPrivateCams", {
            value: s,
            isInternal: !0
        })
    }
    toggleWhispers() {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {isWhispersDisabled: s} = this._store.state.session;
        this._socket.sendMessage("whispers", s)
    }
    handleWhispers(s) {
        this._store.commit("session/toggleWhispers", {
            value: s,
            isInternal: !0
        })
    }
}
class aE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            if (!(n && n.isInternal))
                switch (t) {
                case "game/setPhase":
                case "game/addHistory":
                case "game/removeHistory":
                    this.sendHistory(t, n).catch( () => {}
                    );
                    break;
                case "game/toggleRunning":
                    this.toggleRunning().catch( () => {}
                    );
                    break
                }
        }
        ),
        this._socket.handleMessage("historyAdd", this.handleHistory.bind(this, "add")),
        this._socket.handleMessage("historyRemove", this.handleHistory.bind(this, "remove")),
        this._socket.handleMessage("historyPhase", this.handleHistory.bind(this, "phase")),
        this._socket.handleMessage("historySet", this.handleHistory.bind(this, "set"))
    }
    async sendHistory(s, t) {
        if (this._store.getters["user/isStoryteller"] && !t.isInternal)
            try {
                let n = t;
                if (s === "game/addHistory") {
                    const {history: i} = this._store.state.game;
                    n = i[i.length - 1]
                } else
                    s === "game/removeHistory" && (n = {
                        id: t.id
                    });
                await this._socket.request("history", {
                    type: s,
                    payload: n
                })
            } catch (n) {
                X(n),
                this._store.dispatch("showError", ["modals.dialogue.error.update", n])
            }
    }
    handleHistory(s, t, n) {
        if (n)
            return;
        t.isInternal = !0;
        const {phase: i, history: o} = this._store.state.game;
        if (s === "add") {
            if (o.length && t.type === "phase" && o[o.length - 1].type === "phase" && o[o.length - 1].data === t.data)
                return;
            this._store.dispatch("game/addHistory", t)
        } else if (s === "remove")
            this._store.commit("game/removeHistory", t);
        else if (s === "phase") {
            if (t.phase === i)
                return;
            this._store.commit("game/setPhase", t)
        } else
            s === "set" && this._store.dispatch("game/setHistory", t)
    }
    async toggleRunning() {
        if (this._store.getters["user/isStoryteller"])
            try {
                await this._socket.request("toggleRunning", this._store.state.game.isRunning)
            } catch (s) {
                X(s),
                this._store.dispatch("showError", ["modals.dialogue.error.running", s])
            }
    }
}
class rE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            t === "setGrimoireMode" && n !== "pointing" && this._store.state.session.isPointing && (this._store.commit("session/setPointingState", !1),
            this._store.state.session.recipients.length && this._store.commit("session/setRecipients", [])),
            t === "session/setPointingState" && this.sendPointing(n),
            t === "session/pointAtPlayer" && this.sendPoint(n)
        }
        ),
        this._socket.handleMessage("pointing", this.handlePointing.bind(this)),
        this._socket.handleMessage("point", this.handlePoint.bind(this))
    }
    sendPointing(s) {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {recipients: t, pointers: n} = this._store.state.session;
        this._socket.sendMessage("pointing", {
            isPointing: s,
            pointers: n,
            recipients: t
        }, t)
    }
    handlePointing(s) {
        this._store.commit("session/setPointing", s);
        const t = s.isPointing ? "pointing" : "grimoire";
        this._store.state.grimoire.mode !== t && this._store.commit("setGrimoireMode", t)
    }
    sendPoint({index: s, playerIndex: t}) {
        const {players: n, user: i} = this._store.state
          , {recipients: o} = this._store.state.session;
        n.players[s].id === i.user.id && this._socket.sendMessage("point", t, o)
    }
    handlePoint(s, t) {
        const {players: n} = this._store.state.players
          , {isPointing: i} = this._store.state.session
          , o = this._store.getters["players/seatedPlayerMap"].get(t);
        !n.includes(o) || !i || i === "locked" || this._store.commit("session/pointAtPlayer", {
            index: n.indexOf(o),
            playerIndex: s
        })
    }
}
class lE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            if (t === "session/raiseHand")
                this.raiseHand(n);
            else if (t === "vote/nomination" && this._store.state.vote.nomination)
                this._store.commit("session/setRaisedHands", new Map);
            else if (t === "setEdition") {
                const i = this._store.state.user.user.id;
                this._store.state.session.handIcon.match(/^r-/i) && (this._store.commit("session/setHandIcon", "i-hand"),
                this._store.state.session.raisedHands.has(i) && this._store.commit("session/raiseHand", {
                    userId: i
                }))
            }
        }
        ),
        this._socket.handleMessage("raise-hand", this.handleRaiseHand.bind(this))
    }
    raiseHand({userId: s}) {
        if (this._store.state.user.user.id !== s)
            return;
        const {raisedHands: t} = this._store.state.session;
        this._socket.sendMessage("raise-hand", t.get(s))
    }
    handleRaiseHand(s, t) {
        var l, g;
        if (this._store.state.user.user.id === t)
            return;
        const n = [null, "i-hand", "i-hand-fist", "i-hand-peace", "i-thumbs-up", "i-thumbs-down"]
          , i = this._store.state.session.users.get(t)
          , o = n.concat(((l = i == null ? void 0 : i.cosmetics) == null ? void 0 : l.emotes) || []);
        (g = i == null ? void 0 : i.flags) != null && g.includes("powerful") && (o.push("i-hand-spock", "i-hand-lizard", "i-hand-middle-finger", "i-face-smile", "i-face-frown"),
        this._store.state.roles.forEach(c => o.push("r-" + c.id))),
        o.includes(s) && this._store.commit("session/raiseHand", {
            userId: t,
            value: s
        })
    }
}
class cE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            n != null && n.isInternal || t === "players/setBluff" && this.sendBluffs()
        }
        ),
        this._socket.handleMessage("bluffs", this.handleBluffs.bind(this))
    }
    async sendBluffs() {
        if (this._store.getters["user/isStoryteller"])
            try {
                const {bluffs: s} = this._store.state.players;
                await this._socket.request("bluffs", s.map(t => t.isCustom ? t : {
                    id: t.id
                }))
            } catch (s) {
                await this._store.dispatch("showError", ["modals.dialogue.error.bluffs", s])
            }
    }
    handleBluffs(s) {
        this._store.state.positions.bluffs || this._store.commit("setTab", {
            tab: "bluffs",
            value: !0
        }),
        this._store.dispatch("players/setBluffs", s)
    }
}
class dE {
    constructor(s) {
        this._store = s.store,
        this._socket = s,
        this._store.subscribe( ({type: t, payload: n}) => {
            switch (t) {
            case "session/setTimer":
                if (n != null && n.isInternal)
                    return;
                this.setTimer();
                break;
            case "vote/nomination":
                this.pauseTimer();
                break
            }
        }
        ),
        this._socket.handleMessage("timer", this.handleTimer.bind(this))
    }
    setTimer() {
        if (!this._store.getters["user/isStoryteller"])
            return;
        const {title: s, expiration: t, isPausedDuringVotes: n, paused: i} = this._store.state.session.timer;
        this._socket.sendMessage("timer", {
            title: s,
            duration: t - Date.now(),
            isPausedDuringVotes: n,
            paused: i
        })
    }
    handleTimer(s={}) {
        const {title: t, duration: n, isPausedDuringVotes: i, paused: o} = s
          , l = Date.now() + n - this._store.state.session.ping;
        this._store.commit("session/setTimer", {
            title: t,
            expiration: l,
            isPausedDuringVotes: i,
            paused: o,
            isInternal: !0
        })
    }
    pauseTimer() {
        const {expiration: s, paused: t, isPausedDuringVotes: n, title: i} = this._store.state.session.timer;
        if (n && !(!t && s < Date.now())) {
            if (this._store.state.vote.nomination && !t)
                this._store.commit("session/setTimerPaused", Date.now());
            else if (!this._store.state.vote.nomination && t) {
                const o = Date.now() - t;
                this._store.commit("session/setTimer", {
                    expiration: s + o,
                    title: i,
                    isInternal: !0
                }),
                this._store.commit("session/setTimerPaused", 0)
            }
        }
    }
}
class uE {
    constructor(s) {
        this._store = s;
        const t = {
            production: "wss://botc.app/"
        };
        this._url = t.production,
        this._socket = null,
        this._listeners = [],
        this._isRequesting = !1,
        this._requestQueue = [],
        this._gamestateTimeout = null,
        window.__TAURI__ && Xd(Kd.WINDOW_CLOSE_REQUESTED, () => {
            this.disconnect()
        }
        ).catch( () => {}
        ),
        F.afterEach( (n, i) => {
            const {sessionId: o} = this._store.state.session;
            i.name === "Grimoire" && n.name !== "Grimoire" && o ? this.disconnect() : i.name !== "Grimoire" && n.name === "Grimoire" && o && this.connect()
        }
        ),
        s.subscribe( ({type: n, payload: i}) => {
            if (F.currentRoute.value.name !== "Grimoire")
                return;
            const {loadingState: o} = this._store.state.grimoire;
            switch (n) {
            case "session/setSessionId":
                (!o || o === "session") && (i ? this.connect() : (window.location.hash = "",
                this.disconnect()));
                break;
            case "setLoadingState":
                if (i !== "game" && clearTimeout(this._gamestateTimeout),
                !i || i === "session") {
                    const {sessionId: l, isConnected: g} = this._store.state.session;
                    l && !g ? this.connect() : !l && g && this.disconnect()
                }
                break
            }
        }
        )
    }
    connect() {
        if (!this._store.state.user.accessToken)
            return;
        this.disconnect(),
        this._store.commit("setLoadingState", "game"),
        this._store.commit("vote/clearHistory"),
        this._store.commit("setGrimoireMode", "grimoire"),
        this._gamestateTimeout = setTimeout( () => {
            this.disconnect(),
            this._store.dispatch("openDialogue", {
                type: "alert",
                title: "modals.dialogue.error.server_title",
                text: "modals.dialogue.error.server_text"
            }).catch( () => {}
            )
        }
        , 10 * 1e3);
        const {sessionId: s} = this._store.state.session;
        this._socket = rl(this._url + encodeURIComponent(s), {
            path: "/backend/socket/",
            auth: t => t({
                token: this._store.state.user.accessToken
            })
        }),
        this._socket.on("connect", this._onConnect.bind(this)),
        this._socket.on("disconnect", this._onDisconnect.bind(this)),
        this._socket.on("error", this._onError.bind(this)),
        this._socket.on("connect_error", this._onConnectionError.bind(this)),
        this._socket.io.on("reconnect_failed", () => {
            this._store.commit("session/toggleReconnecting", !1)
        }
        ),
        this._listeners.forEach( ([t,n]) => this._socket.on(t, n))
    }
    disconnect() {
        this._socket && (this._socket.offAny(),
        this._socket.disconnect(),
        this._socket = null),
        this._store.commit("session/setPing", 0),
        this._store.state.session.isReconnecting && (this._store.commit("session/toggleReconnecting", !1),
        this._onDisconnect("io client disconnect").catch( () => {}
        ))
    }
    async _onConnect() {
        this._store.state.session.isReconnecting && this._store.commit("session/toggleReconnecting", !1),
        this._store.commit("session/updateMeta"),
        this._store.commit("session/toggleConnected", !0),
        this._processQueue()
    }
    async _onDisconnect(s) {
        var n;
        const {session: t} = this._store.state;
        if (clearTimeout(this._gamestateTimeout),
        this._isRequesting = !1,
        t.isConnected && (this._store.commit("session/toggleConnected", !1),
        this._store.commit("session/setBoostDuration", 0),
        this._store.commit("session/updateMeta"),
        this._store.commit("players/requestStoryteller")),
        s !== "io server disconnect" && s !== "io client disconnect" && !((n = this._socket) != null && n.io.skipReconnect))
            s && s !== "transport close" && this._store.dispatch("openDialogue", {
                type: "alert",
                title: "modals.dialogue.error.server_title",
                text: ["modals.dialogue.error.server2_text", [s]]
            }).catch( () => {}
            ),
            this._store.commit("session/toggleReconnecting", !0);
        else {
            t.sessionId && this._store.commit("session/setSessionId", "");
            const {name: i} = F.currentRoute.value;
            i === "Grimoire" && await F.replace({
                name: "Lobby"
            }),
            this._store.commit("session/setUsers", []),
            this._store.commit("chat/removeTextMessage"),
            this._store.commit("session/setHook", {
                name: "",
                isInternal: !0
            }),
            this._store.state.grimoire.loadingState === "game" && this._store.commit("setLoadingState", ""),
            this._store.dispatch("user/refresh")
        }
    }
    _onError({type: s, message: t}) {
        s === "disconnect" && this.disconnect(),
        this._isRequesting = !1,
        this._store.dispatch("openDialogue", {
            type: "alert",
            title: "modals.dialogue.error.generic",
            text: t
        }).catch( () => {}
        )
    }
    _onConnectionError({message: s}) {
        if (!this._store.state.session.isReconnecting) {
            const t = s === "xhr poll error" ? "modals.dialogue.error.offline" : s;
            this._store.dispatch("openDialogue", {
                type: "alert",
                title: "modals.dialogue.error.connection",
                text: t
            }).catch( () => {}
            )
        }
        return this._onDisconnect()
    }
    sendMessage(s, t=null, n=[]) {
        if (!(!this._socket || this._socket.disconnected))
            if (n && (n != null && n.length)) {
                const i = Array.isArray(n) ? n : [n];
                i.length && this._socket.emit("message", s, t, i)
            } else
                this._socket.emit("message", s, t)
    }
    sendMessages(s) {
        if (!this._socket || this._socket.disconnected)
            return;
        const t = s.filter(n => {
            const [,,i] = n;
            return i ? (Array.isArray(i) ? i : [i]).length : !0
        }
        );
        t.length && this._socket.emit("messages", t)
    }
    request(s, t) {
        return this._store.state.session.sessionId ? new Promise( (n, i) => {
            this._requestQueue.push({
                type: s,
                data: t,
                resolve: n,
                reject: i
            }),
            this._processQueue()
        }
        ) : Promise.resolve()
    }
    _processQueue() {
        if (this._isRequesting || !this._requestQueue.length)
            return;
        this._isRequesting = !0;
        const {type: s, data: t, resolve: n, reject: i} = this._requestQueue.shift();
        try {
            !this._socket || this._socket.disconnected ? (this._isRequesting = !1,
            i("Session disconnected"),
            this._processQueue()) : this._socket.emit(s, t, (o, l) => {
                this._isRequesting = !1,
                o ? i(o) : n(l),
                this._processQueue()
            }
            )
        } catch (o) {
            i(o),
            this._isRequesting = !1,
            this._processQueue()
        }
    }
    handleMessage(s, t) {
        this._listeners.push([s, t]),
        this._socket && this._socket.on(s, t)
    }
    async showNotification(s) {
        if ("Notification"in window) {
            let t = Notification.permission;
            if (t !== "denied" && t !== "granted" && (t = await Notification.requestPermission()),
            t === "granted") {
                const n = new URL("/assets/app-icon-CG9GQKA7.webp",import.meta.url).href;
                new Notification("Blood on the Clocktower",{
                    body: s,
                    badge: n,
                    icon: n,
                    image: n
                })
            }
        }
    }
    get store() {
        return this._store
    }
    get socket() {
        return this._socket
    }
}
const gE = e => {
    const s = new uE(e);
    [tE, $6, J6, Y6, cE, aE, Z6, x6, iE, K6, X6, rE, lE, eE, nE, sE, dE, oE].forEach(t => new t(s))
}
  , mE = () => ({
    audio: {
        context: null,
        device: null,
        preference: null,
        isEchoCancellation: !0,
        isNoiseSuppression: !0,
        isAutoGainControl: !0,
        isPushToTalk: !1,
        isDeafened: !1,
        isMuted: !1,
        streams: new Map,
        volumes: new Map
    },
    video: {
        device: null,
        preference: null,
        isDeafened: !1,
        isMuted: !1,
        isUnmirrored: !1,
        isHidden: !1,
        streams: new Map
    },
    channel: "",
    isPrompt: !1,
    isNotAllowed: !1,
    isConnected: !1,
    isReconnecting: !1,
    servers: new Map,
    consumers: new Set,
    userOverrides: new Map,
    userChannels: new Map,
    usersMuted: {},
    usersDeafened: {},
    whisperFrom: new Map,
    whisperTo: new Map,
    textMessages: [],
    textMessageIndicators: [],
    textRecipient: "",
    following: ""
})
  , xr = 180 * 1e3
  , Qe = new Set;
let el = null;
const hE = 300 * 1e3
  , Dd = async (e, s, t) => {
    const n = s.session.meta.chatServer
      , i = s.user.accessToken
      , o = 1
      , l = [n];
    if (e.servers.forEach( ({host: g}) => {
        l.includes(g) || l.push(g)
    }
    ),
    l.length && i)
        try {
            await Promise.any(l.map(async g => {
                const c = Date.now()
                  , h = e.servers.get(g);
                if (Qe.has(g) || h.health && c - h.health.timestamp < xr)
                    return Promise.resolve();
                Qe.add(g);
                try {
                    const m = await fetch(g === "local" ? "http://localhost:3016/health" : `https://chat-${g}.botc.app/health`, {
                        headers: {
                            "Content-Type": "application/json",
                            Authorization: "Bearer " + s.user.accessToken
                        }
                    });
                    h.health = await m.json(),
                    h.health.load <= o ? h.health.color = `rgb(${Math.round(Math.min(255, 255 * h.health.load / o))}, 255, 0)` : h.health.color = `rgb(255, ${Math.round(Math.max(0, 255 - 255 * (h.health.load - o) / o))}, 0)`
                } catch {
                    return Qe.delete(g),
                    h.health = {
                        color: "rgb(128, 128, 128)"
                    },
                    Promise.reject()
                }
                h.health.latency = Math.round((Date.now() - c) / 2),
                h.health.timestamp = c,
                t("updateServer", h),
                Qe.delete(g)
            }
            ))
        } catch {}
    clearTimeout(el),
    el = setTimeout( () => Dd(e, s, t), xr)
}
  , pE = {
    hasAvatars(e, s, t) {
        return t.settings.advanced.hasHiddenTownSquareCams || t.session.hook.name === "reveal-grimoire" && t.settings.advanced.hasHiddenRevealCams ? !1 : !!t.session.sessionId
    },
    isVideoWhisper(e, s, t, n) {
        return [...t.session.users].some( ([i]) => !(!e.channel || e.userChannels.get(i) !== e.channel || !n["players/seatedPlayerMap"].has(i)))
    },
    whispersAvailable(e, s, t, n) {
        return t.session.sessionId ? t.vote.nomination ? new Set : n["user/isSpectator"] ? new Set : new Set([...t.session.users].filter( ([i,o]) => !n["players/seatedPlayerMap"].has(i) || n["game/isNight"] && !n["user/isStoryteller"] && !n["players/storytellerMap"].has(i) || i === t.user.user.id || !o.isOnline || e.whisperTo.has(i) || !e.audio.streams.has(i) ? !1 : !s.isPrivateChat(e.userChannels.get(i)) || !s.isPrivateChat(e.channel)).map( ([i]) => i)) : new Set
    },
    textsAvailable(e, s, t, n) {
        const i = n["players/seatedPlayerMap"]
          , o = t.players.players;
        return t.session.sessionId ? new Set([...t.session.users].filter( ([l,g]) => {
            if (!g.isOnline || l === t.user.user.id)
                return !1;
            if (n["players/storytellerMap"].has(l) || n["user/isStoryteller"])
                return !0;
            if (n["user/isSpectator"])
                return !i.has(l);
            if (!i.has(l) || t.session.isWhispersDisabled)
                return !1;
            if (n["user/getOpenEyes"])
                return !0;
            const c = o.indexOf(i.get(t.user.user.id))
              , h = o.indexOf(i.get(l));
            return Math.abs(c - h) % (o.length - 2) !== 1 ? !1 : n["game/isNight"] || !e.channel && !e.userChannels.get(l)
        }
        ).map( ([l]) => l)) : new Set
    },
    chatServerPreference(e) {
        return e.servers.size ? [...e.servers].map( ([s]) => s).sort( (s, t) => {
            var o, l, g, c, h, m, A, f, T, w;
            const n = e.servers.get(s)
              , i = e.servers.get(t);
            return !((o = i.health) != null && o.latency) && !((l = n.health) != null && l.latency) ? 0 : !((g = n.health) != null && g.latency) && ((c = i.health) != null && c.latency) ? 1 : !((h = i.health) != null && h.latency) && ((m = n.health) != null && m.latency) ? -1 : ((A = n.health) == null ? void 0 : A.latency) + ((f = n.health) == null ? void 0 : f.users) - ((T = i.health) == null ? void 0 : T.latency) - ((w = i.health) == null ? void 0 : w.users)
        }
        ) : ["eu"]
    },
    isPrivateChat() {
        return (e="") => ["private", "night"].includes(e.split("-").shift())
    },
    isPublicChat() {
        return (e="") => ["public"].includes(e.split("-").shift())
    }
}
  , AE = {
    textMessage(e, {recipientId: s, message: t, senderId: n, isSystem: i, isHidden: o, isExpiring: l}) {
        const {commit: g, rootState: c} = e
          , {user: h} = c.user
          , m = h.id + Date.now() + e.state.textMessages.length;
        t && c.session.sessionId && (g("addTextMessage", {
            msgId: m,
            message: i ? t : t.substring(0, 250),
            senderId: n != null ? n : h.id,
            recipientId: s || "",
            isSystem: i != null ? i : !1,
            isHidden: o != null ? o : !1
        }),
        (!i || l) && setTimeout( () => g("removeTextMessage", m), hE))
    },
    requestWhisper({rootGetters: e, rootState: s, commit: t, state: n, getters: i}, o) {
        if (!e["players/seatedPlayerMap"].has(s.user.user.id) || !o.id || !n.audio.streams.has(o.id) || n.whisperTo.has(o.id))
            return;
        t("togglePrompt", !1);
        let l = (e["game/isNight"] ? "night-" : "private-") + String(Date.now()).substring(6, 10) + Math.round(Math.random() * 1e4);
        n.channel ? l = n.channel : (t("removeWhisperTo"),
        i.isPrivateChat(n.userChannels.get(o.id)) && !e["players/storytellerMap"].has(o.id) && (l = n.userChannels.get(o.id))),
        t("setWhisperTo", {
            id: o.id,
            channel: l
        })
    },
    async setServerList({state: e, commit: s, rootState: t}, n) {
        s("setServerList", new Map(n.map(i => [i.host, i]))),
        await Dd(e, t, s)
    },
    followUser({state: e, commit: s, rootGetters: t, rootState: n}, i) {
        !i || !t["user/hasGrimoireAccess"] || i !== n.user.user.id && (i === e.following ? s("setFollowing", "") : (e.userChannels.has(i) && e.channel !== e.userChannels.get(i) && s("setChannel", e.userChannels.get(i)),
        s("setFollowing", i)))
    },
    showTextTab({commit: e}, s) {
        e("setTextRecipient", s),
        e("setTab", {
            tab: "text",
            value: 1 + Math.random()
        }, {
            root: !0
        }),
        e("togglePrompt", !1)
    }
}
  , me = (e, s="", t=!1) => (n, i) => {
    t && i == null || (s && n[s] ? n[s][e] = i : n[e] = i)
}
  , bE = {
    toggleEchoCancellation: ie("isEchoCancellation", "audio"),
    toggleNoiseSuppression: ie("isNoiseSuppression", "audio"),
    toggleAutoGainControl: ie("isAutoGainControl", "audio"),
    togglePushToTalk: ie("isPushToTalk", "audio"),
    toggleAudioMuted: ie("isMuted", "audio"),
    toggleAudioDeafened: ie("isDeafened", "audio"),
    setAudioPreference: me("preference", "audio"),
    setAudioDevice: me("device", "audio"),
    setAudioContext: me("context", "audio"),
    setVolume({audio: e}, {userId: s, type: t, value: n=1}) {
        var i;
        if (n !== 1)
            e.volumes.set(s, Object.assign((i = e.volumes.get(s)) != null ? i : {}, {
                [t]: n
            }));
        else if (e.volumes.has(s)) {
            const o = e.volumes.get(s);
            delete o[t],
            Object.keys(o).length ? e.volumes.set(s, o) : e.volumes.delete(s)
        }
    },
    toggleVideoMuted: ie("isMuted", "video"),
    toggleVideoDeafened: ie("isDeafened", "video"),
    toggleVideoUnmirrored: ie("isUnmirrored", "video"),
    toggleVideoHidden: ie("isHidden", "video"),
    setVideoPreference: me("preference", "video"),
    setVideoDevice: me("device", "video"),
    toggleNotAllowed: ie("isNotAllowed"),
    setChannel: me("channel"),
    toggleConnected: ie("isConnected"),
    toggleReconnecting: ie("isReconnecting"),
    togglePrompt: ie("isPrompt"),
    setServerList: me("servers"),
    changeServer: () => {}
    ,
    updateServer(e, s) {
        e.servers.set(s.host, s)
    },
    setTextRecipient: me("textRecipient"),
    setFollowing: me("following"),
    setUserOverrides: me("userOverrides"),
    setUserOverride({userOverrides: e}, {userId: s, type: t, value: n}) {
        const i = t + "-" + s;
        n === !1 || n === void 0 && e.has(i) ? e.delete(i) : e.set(i, n != null ? n : 1)
    },
    setUserChannel(e, {userId: s, value: t}) {
        e.userChannels.set(s, t)
    },
    clearUserChannels(e) {
        e.userChannels.clear()
    },
    setStream(e, {userId: s, type: t, stream: n}={}) {
        e[t] && (s ? n ? e[t].streams.set(s, n) : e[t].streams.delete(s) : e[t].streams = new Map)
    },
    toggleConsumer(e, {userId: s, value: t=!0}={}) {
        s ? t ? e.consumers.add(s) : e.consumers.delete(s) : e.consumers = new Set
    },
    toggleMuted(e, {userId: s, kind: t, isMuted: n}) {
        e.usersMuted[s] || (e.usersMuted[s] = {}),
        e.usersMuted[s][t] = n
    },
    toggleDeafened(e, {userId: s, kind: t, isDeafened: n}) {
        e.usersDeafened[s] || (e.usersDeafened[s] = {}),
        e.usersDeafened[s][t] = n
    },
    setWhisperTo(e, {id: s, channel: t}) {
        s && e.whisperFrom.get(s) === t || s && e.whisperTo.set(s, t)
    },
    removeWhisperTo(e, {id: s}={}) {
        s ? e.whisperTo.delete(s) : e.whisperTo = new Map
    },
    setWhisperFrom(e, {id: s, channel: t}) {
        s && e.whisperFrom.set(s, t)
    },
    removeWhisperFrom(e, {id: s}={}) {
        s ? e.whisperFrom.delete(s) : e.whisperFrom = new Map
    },
    addTextMessage(e, s) {
        e.textMessages.push({
            ...s,
            time: Date.now()
        })
    },
    removeTextMessage(e, s) {
        if (!s)
            e.textMessages = [];
        else {
            const t = e.textMessages.findIndex( ({msgId: n}) => n === s);
            t >= 0 && e.textMessages.splice(t, 1)
        }
    },
    addTextMessageIndicator(e, s) {
        e.textMessageIndicators.push({
            ...s,
            time: Date.now()
        })
    },
    removeTextMessageIndicator(e, s) {
        if (!s)
            e.textMessageIndicators = [];
        else {
            const t = e.textMessageIndicators.findIndex( ({msgId: n}) => n === s);
            t >= 0 && e.textMessageIndicators.splice(t, 1)
        }
    }
}
  , fE = {
    namespaced: !0,
    state: mE,
    getters: pE,
    actions: AE,
    mutations: bE
}
  , vE = () => ({
    history: [],
    phase: 0,
    isRunning: !1
})
  , _E = {
    hasGardener({history: e, isRunning: s}) {
        var t;
        return s && e.length && e[0].type === "start" && ((t = e[0].data.npcs) == null ? void 0 : t.includes("gardener"))
    },
    lastPhase({history: e}) {
        return e.filter( ({type: s}) => s === "phase").pop()
    },
    isNight({phase: e}) {
        return !!(e % 2)
    }
}
  , yE = {
    async distributeRoles({dispatch: e, commit: s, rootState: t, rootGetters: n}) {
        if (n["user/isStoryteller"] && !t.session.hook.name) {
            s("setHistory", {
                phase: 0,
                isRunning: !0,
                history: []
            }),
            s("vote/clearHistory", void 0, {
                root: !0
            }),
            e("addHistory", {
                type: "start",
                data: {
                    players: t.players.players.map( ({id: i, isDead: o, isVoteless: l}) => ({
                        id: i,
                        isDead: o,
                        isVoteless: l
                    })),
                    npcs: t.players.npcs.map( ({id: i}) => i)
                },
                isInternal: !0
            });
            try {
                e("session/triggerHook", {
                    name: "distribute-roles",
                    delay: 1500
                }, {
                    root: !0
                })
            } catch {}
        }
    },
    async revealGrimoire({dispatch: e, commit: s, rootState: t, rootGetters: n, getters: i}) {
        if (n["user/isStoryteller"] && !t.session.hook.name)
            try {
                const o = await e("openDialogue", {
                    type: "reveal",
                    title: "overlays.reveal.title",
                    text: "overlays.reveal.prompt"
                }, {
                    root: !0
                });
                t.vote.nomination && s("vote/nomination", void 0, {
                    root: !0
                }),
                i.isNight && e("togglePhase"),
                s("setGrimoireMode", "reveal", {
                    root: !0
                }),
                t.players.players.forEach(l => {
                    const g = l.reminders.find( ({role: c, name: h}) => {
                        const {special: m, remindersGlobal: A} = t.roles.get(c) || {};
                        return (m == null ? void 0 : m.some(f => f.type === "reveal" && f.name === "replace-character")) && A[0] === h
                    }
                    );
                    if (g) {
                        const c = {
                            townsfolk: "g",
                            outsider: "g",
                            minion: "e",
                            demon: "e"
                        }
                          , h = l.alignment || c[l.role.team];
                        s("players/updatePlayer", {
                            player: l,
                            property: "role",
                            value: t.roles.get(g.role)
                        }, {
                            root: !0
                        }),
                        h && h !== c[t.roles.get(g.role)] && s("players/updatePlayer", {
                            player: l,
                            property: "alignment",
                            value: h
                        }, {
                            root: !0
                        })
                    }
                    s("players/updatePlayer", {
                        player: l,
                        property: "revealed",
                        value: !1,
                        isInternal: !0
                    }, {
                        root: !0
                    })
                }
                ),
                s("players/updateStoryteller", {
                    property: "revealed",
                    value: !1,
                    isInternal: !0
                }, {
                    root: !0
                }),
                e("session/triggerHook", {
                    name: "reveal-grimoire",
                    params: !o
                }, {
                    root: !0
                }),
                await e("end", !o)
            } catch {}
    },
    end({state: e, commit: s, rootState: t, dispatch: n}, i) {
        if (!e.isRunning)
            return;
        const {players: o, npcs: l} = t.players;
        n("addHistory", {
            type: "end",
            data: {
                players: o.map( ({id: g, isDead: c, isVoteless: h}) => ({
                    id: g,
                    isDead: c,
                    isVoteless: h
                })),
                roles: o.map( ({role: g}) => g.id),
                npcs: l.map( ({id: g}) => g),
                isEvilWin: i
            }
        }),
        s("toggleRunning", !1)
    },
    togglePhase({state: e, commit: s, dispatch: t}) {
        const n = e.history.filter(i => i.type === "phase").pop();
        e.isRunning && n && Date.now() - n.time < 10 * 1e3 ? (s("setPhase", {
            phase: e.phase - 1
        }),
        s("removeHistory", n)) : (s("setPhase", {
            phase: e.phase + 1
        }),
        e.isRunning && t("addHistory", {
            type: "phase",
            data: e.phase
        }))
    },
    addHistory({commit: e, dispatch: s, state: t}, n) {
        t.isRunning && (e("addHistory", n),
        s("chat/textMessage", {
            isSystem: !0,
            senderId: "",
            message: {
                type: n.type,
                data: n.data
            }
        }, {
            root: !0
        }))
    },
    setHistory({state: e, commit: s, dispatch: t}, n) {
        var i, o, l;
        n && ((n.phase && e.phase !== n.phase || (i = n.history) != null && i.length && n.history[0].id !== ((o = e.history[0]) == null ? void 0 : o.id)) && (s("session/clearSignals", null, {
            root: !0
        }),
        s("vote/nomination", void 0, {
            root: !0
        })),
        s("setHistory", n),
        (l = n.history) == null || l.forEach( ({data: g, type: c, time: h}) => {
            t("chat/textMessage", {
                isSystem: !0,
                senderId: "",
                message: {
                    type: c,
                    data: g
                },
                time: h
            }, {
                root: !0
            })
        }
        ))
    }
}
  , wE = {
    toggleRunning(e, s) {
        s !== void 0 ? e.isRunning = s : e.isRunning = !e.isRunning
    },
    setPhase(e, {phase: s}) {
        e.phase = s
    },
    setHistory(e, s) {
        if (!s)
            return;
        const {history: t, phase: n, isRunning: i} = s;
        Array.isArray(t) && (e.history = t),
        n !== void 0 && (e.phase = n),
        i !== void 0 && (e.isRunning = !!i)
    },
    addHistory(e, s) {
        if (!e.isRunning)
            return;
        const {id: t, type: n, time: i, data: o, isPrivate: l} = s
          , g = {
            id: t || e.history.length + "-" + Date.now(),
            type: n,
            data: o,
            time: i || Date.now()
        };
        l && (g.isPrivate = !0),
        e.history.push(g)
    },
    removeHistory({history: e}, {id: s}) {
        const t = e.findIndex(n => n.id === s);
        t > -1 && e.splice(t, 1)
    }
}
  , kE = {
    namespaced: !0,
    state: vE,
    getters: _E,
    actions: yE,
    mutations: wE
}
  , tt = {
    id: null,
    role: {},
    ability: {},
    alignment: null,
    reminders: [],
    status: [],
    isVoteless: !1,
    isDead: !1
}
  , Xe = {
    id: null,
    role: {},
    ability: {},
    alignment: null,
    reminders: []
}
  , CE = () => ({
    players: [],
    npcs: [],
    bluffs: [],
    storytellers: [],
    claimedSeat: null,
    storytellerRequests: []
})
  , SE = {
    alive({players: e}) {
        return e.filter(s => !s.isDead).length
    },
    nonTravellers({players: e}) {
        const s = e.filter(t => t.role.team !== "traveller");
        return Math.min(s.length, 15)
    },
    nightOrder({players: e, storytellers: s, npcs: t}, n, {edition: i}) {
        const o = []
          , l = [];
        [...e, ...s].forEach( ({role: h}) => {
            h.firstNight && !o.some(m => m.id === h.id) && o.push(h),
            h.otherNight && !l.some(m => m.id === h.id) && l.push(h)
        }
        ),
        t.forEach(h => {
            h.firstNight && !o.some(m => m.id === h.id) && o.push(h),
            h.otherNight && !l.some(m => m.id === h.id) && l.push(h)
        }
        );
        const g = (h, m) => {
            var A;
            return (A = i[h]) != null && A.includes(m.id) ? i[h].indexOf(m.id) : m[h] - 1
        }
        ;
        o.sort( (h, m) => g("firstNight", h) - g("firstNight", m)),
        l.sort( (h, m) => g("otherNight", h) - g("otherNight", m));
        const c = new Map;
        return e.forEach(h => {
            var f;
            if (!((f = h.role) != null && f.id))
                return;
            const m = o.findIndex(T => T.id === h.role.id) + 1;
            let A = l.findIndex(T => T.id === h.role.id) + 1;
            [{
                role: "cannibal",
                reminder: "lunch"
            }, {
                role: "pixie",
                reminder: "has ability"
            }].forEach( ({role: T, reminder: w}) => {
                var V;
                if (h.role.id === T) {
                    const N = e.find(U => U.reminders.some(P => P.role === T && P.name.match(RegExp(w, "i"))));
                    N && ((V = N.role) != null && V.otherNight) && (A = l.findIndex(U => U.id === N.role.id) + 1)
                }
            }
            ),
            c.set(h.role.id, {
                first: m,
                other: A
            })
        }
        ),
        s.forEach(h => {
            var m;
            (m = h.role) != null && m.id && c.set(h.role.id, {
                first: o.findIndex(A => A.id === h.role.id) + 1,
                other: l.findIndex(A => A.id === h.role.id) + 1
            })
        }
        ),
        t.forEach(h => {
            const m = o.findIndex(f => f.id === h.id) + 1
              , A = l.findIndex(f => f.id === h.id) + 1;
            c.set(h.id, {
                first: m,
                other: A
            })
        }
        ),
        c
    },
    seatedPlayerMap({players: e, storytellers: s}) {
        const t = new Map;
        return s.forEach(n => {
            n.id && t.set(n.id, n)
        }
        ),
        e.forEach(n => {
            n.id && t.set(n.id, n)
        }
        ),
        t
    },
    storytellerMap({storytellers: e}) {
        return new Map(e.map(s => [s.id, s]))
    },
    playerName: ({players: e, storytellers: s}, t, {session: n, grimoire: i}) => o => {
        var c, h;
        if (!o)
            return [];
        const l = o.id && s.some(m => m.id === o.id)
          , g = l ? o.id ? s.findIndex(m => m.id === o.id) : s.indexOf(o) : o.id ? e.findIndex(m => m.id === o.id) : e.indexOf(o);
        return o.id && n.sessionId ? (c = n.users.get(o.id)) != null && c.username ? ["{username}", {
            username: (h = n.users.get(o.id)) == null ? void 0 : h.username
        }, {
            resolvedMessage: !0
        }] : [l ? "grimoire.storyteller" : "grimoire.player", [g + 1]] : l ? ["grimoire.storyteller", [g > 0 ? g + 1 : ""]] : !i.seats[g] || n.sessionId ? ["grimoire.seat", [g + 1]] : ["{seat}", {
            seat: i.seats[g]
        }, {
            resolvedMessage: !0
        }]
    }
}
  , PE = {
    clearRoles(e, {isInternal: s, clearNPCs: t}={}) {
        const {state: n, commit: i, rootState: o, rootGetters: l, dispatch: g} = e;
        let c, h;
        if (!l["user/isStoryteller"])
            c = n.players.map(m => (m.role.team !== "traveller" && (m.role = {}),
            m.reminders = [],
            m.alignment = "",
            m)),
            h = n.storytellers.map(m => (m.role = {},
            m.reminders = [],
            m.alignment = "",
            m)),
            i("session/clearSignals", null, {
                root: !0
            }),
            n.bluffs.length && i("setBluff");
        else {
            if (s || (g("game/end", null, {
                root: !0
            }),
            (o.vote.markedPlayer > -1 || o.vote.highscore) && i("vote/nomination", {
                markedPlayer: -1,
                highscore: 0
            }, {
                root: !0
            }),
            i("vote/clearHistory", null, {
                root: !0
            }),
            n.bluffs.length && i("setBluff")),
            c = n.players.map( ({id: m}) => ({
                ...tt,
                id: m
            })),
            h = n.storytellers.map( ({id: m}) => ({
                ...Xe,
                id: m
            })),
            t) {
                const m = [];
                l.isHomebrew && o.npcs.has("bootlegger") && m.push(o.npcs.get("bootlegger")),
                l.isJinxed && m.push(o.npcs.get("djinn")),
                (n.npcs.length !== m.length || m.some(A => !n.npcs.includes(A))) && i("setNPC", {
                    npc: m
                })
            }
            i("session/clearSignals", null, {
                root: !0
            })
        }
        i("setPlayers", c),
        i("setStorytellers", h)
    },
    emptySeat({state: e, commit: s, dispatch: t}, {id: n}) {
        e.players.forEach(async (i, o) => {
            i.id === n && (s("updatePlayer", {
                player: i,
                property: "id",
                value: null
            }),
            await t("chat/textMessage", {
                isSystem: !0,
                senderId: "",
                message: {
                    type: "seat_empty",
                    data: [n, o + 1]
                }
            }, {
                root: !0
            }))
        }
        )
    },
    becomeStoryteller({state: e, rootState: s, commit: t}) {
        const n = s.user.user.id;
        e.players.forEach(i => {
            i.id === n && t("updatePlayer", {
                player: i,
                property: "id",
                value: null
            })
        }
        ),
        t("setStorytellers", [Object.assign({}, Xe, {
            id: n
        })])
    },
    setRoles({state: e, rootState: s, commit: t}, n) {
        const i = e.players.map( (o, l) => {
            const {role: g, alignment: c} = n[l] || {};
            return o.role.id !== g && (o.role = s.roles.get(g) || s.rolesAvailable.get(g) || {}),
            o.alignment !== c && (o.alignment = c || null),
            o
        }
        );
        t("setRoles", i)
    },
    setPlayers({state: e, rootState: s, commit: t, rootGetters: n}, i) {
        if (!i)
            return;
        const {sessionId: o, previousSessionId: l} = s.session;
        i.forEach( (g, c) => {
            g.role = s.roles.get(g.role) || s.rolesAvailable.get(g.role) || {};
            const h = e.players[c] || {};
            if ((h.id === g.id || g.id === s.user.user.id && !(h != null && h.id)) && !n["user/isStoryteller"] && (!l || l === o)) {
                const {role: m, alignment: A, reminders: f} = h;
                if (f && g.reminders === null && (g.reminders = f),
                m && !s.roles.has(m.id) && m.team !== "traveller")
                    return;
                m && !g.role.id && m.team !== "traveller" ? (g.role = m,
                A && g.alignment === null && (g.alignment = A)) : g.role.id === (m == null ? void 0 : m.id) && A && g.alignment === null && (g.alignment = A)
            }
        }
        ),
        t("setPlayers", i)
    },
    setStorytellers({rootState: e, commit: s, rootGetters: t, getters: n}, i) {
        if (!i)
            return;
        const o = n.storytellerMap;
        i.forEach(l => {
            if (l.role = e.roles.get(l.role) || e.rolesAvailable.get(l.role) || {},
            o.has(l.id) && !t["user/isStoryteller"]) {
                const {role: g, alignment: c, reminders: h} = o.get(l.id);
                !l.role.id && (g == null ? void 0 : g.team) !== "traveller" && (l.role = g),
                l.alignment === null && (l.alignment = c),
                l.reminders === null && (l.reminders = h)
            }
        }
        ),
        s("setStorytellers", i)
    },
    setBluffs({rootState: e, commit: s}, t) {
        Array.isArray(t) && s("setBluff", {
            bluff: t.map(n => e.roles.get(n == null ? void 0 : n.id) || e.rolesAvailable.get(n == null ? void 0 : n.id) || {}),
            isInternal: !0
        })
    },
    setNPCs({rootState: e, commit: s}, t) {
        t && s("setNPC", {
            npc: t.map(n => e.npcs.get(n.id) || Object.assign({}, e.definitions.CUSTOM_ROLE, n)),
            isInternal: !0
        })
    },
    movePlayers({commit: e, rootState: s}, t) {
        const {markedPlayer: n} = s.vote;
        e("movePlayers", t);
        const i = t.map(l => s.grimoire.seats[l]);
        e("setSeatName", {
            seats: i
        }, {
            root: !0
        }),
        n > -1 && t.indexOf(n) !== n && e("vote/setMarkedPlayer", {
            value: t.indexOf(n),
            isInternal: !0
        }, {
            root: !0
        });
        const {signals: o} = s.session;
        Object.keys(o).forEach(l => {
            o[l].forEach( ({message: g}, c) => {
                let h = !1;
                const m = g.map(A => {
                    const f = t.indexOf(A.data);
                    return A.id === "player" && f !== A.data ? (h = !0,
                    {
                        id: A.id,
                        data: f
                    }) : A
                }
                );
                h && e("session/updateSignal", {
                    userId: l,
                    index: c,
                    message: m
                }, {
                    root: !0
                })
            }
            )
        }
        )
    },
    removePlayers({commit: e, rootState: s}, t) {
        const {markedPlayer: n} = s.vote;
        e("removePlayers", t);
        const i = s.grimoire.seats.filter( (l, g) => !t.includes(g));
        if (e("setSeatName", {
            seats: i
        }, {
            root: !0
        }),
        n > -1)
            if (t.includes(n))
                e("vote/setMarkedPlayer", {
                    value: -1,
                    isInternal: !0
                }, {
                    root: !0
                });
            else {
                const l = n - t.filter(g => g < n).length;
                l !== n && e("vote/setMarkedPlayer", {
                    value: l,
                    isInternal: !0
                }, {
                    root: !0
                })
            }
        const {signals: o} = s.session;
        Object.keys(o).forEach(l => {
            o[l].forEach( ({message: g, timestamp: c}, h) => {
                let m = !1;
                const A = g.filter(f => f.id !== "player" || !t.includes(f.data)).map(f => {
                    const T = t.filter(w => w < f.data).length;
                    return f.id === "player" && T ? (m = !0,
                    {
                        id: f.id,
                        data: f.data - T
                    }) : f
                }
                );
                A.length ? (m || A.length !== g.length) && e("session/updateSignal", {
                    userId: l,
                    index: h,
                    message: A
                }, {
                    root: !0
                }) : e("session/removeSignal", {
                    userId: l,
                    timestamp: c
                }, {
                    root: !0
                })
            }
            )
        }
        )
    },
    addPlayer({commit: e, state: s}) {
        s.players.length >= 20 || e("addPlayer")
    }
}
  , TE = {
    claimSeat: (e, s) => {
        e.claimedSeat = s
    }
    ,
    openEyes: () => {}
    ,
    clearPlayers(e) {
        e.players = [],
        e.bluffs = []
    },
    setPlayers(e, s) {
        Array.isArray(s) && (e.players = s.map(t => {
            const n = Object.assign({}, tt, t);
            return n.reminders = n.reminders || [],
            n.role = n.role || {},
            n
        }
        ))
    },
    setRoles(e, s=[]) {
        e.players.forEach( (t, n) => {
            const {role: i, alignment: o} = s[n] || {};
            i && (t.role = i,
            t.alignment = o)
        }
        )
    },
    movePlayers(e, s) {
        s.length === e.players.length && (e.players = s.map(t => e.players[t]))
    },
    updatePlayer(e, {player: s, property: t, value: n}) {
        const i = e.players.indexOf(s);
        i >= 0 && (e.players[i][t] = n)
    },
    addPlayer(e) {
        e.players.length >= 20 || e.players.push({
            ...tt
        })
    },
    removePlayers(e, s) {
        e.players = e.players.filter( (t, n) => !s.includes(n))
    },
    setBluff(e, {index: s, bluff: t}={}) {
        s !== void 0 ? e.bluffs.splice(s, 1, t) : Array.isArray(t) ? e.bluffs = t : e.bluffs = []
    },
    setNPC(e, {index: s, npc: t}={}) {
        if (s !== void 0)
            e.npcs.splice(s, 1);
        else if (t)
            if (Array.isArray(t))
                e.npcs = t;
            else {
                if (e.npcs.some(n => n.id === t.id))
                    return;
                e.npcs.push(t)
            }
        else
            e.npcs = []
    },
    updateStoryteller(e, {storyteller: s, property: t, value: n}) {
        const i = s ? e.storytellers.indexOf(s) : 0;
        e.storytellers[i] && t && (e.storytellers[i][t] = n)
    },
    setStorytellers(e, s) {
        Array.isArray(s) && (e.storytellers = s.map(t => {
            const n = Object.assign({}, Xe, t);
            return n.role = n.role || {},
            n.reminders = n.reminders || [],
            n
        }
        ))
    },
    addStoryteller(e, {id: s}) {
        s && (e.storytellers.some(t => t.id === s) || (e.storytellers.push(Object.assign({}, Xe, {
            id: s
        })),
        e.storytellerRequests.includes(s) && e.storytellerRequests.splice(e.storytellerRequests.indexOf(s), 1)))
    },
    removeStoryteller(e, {id: s}) {
        const t = e.storytellers.findIndex(n => n.id === s);
        t >= 0 && e.storytellers.splice(t, 1)
    },
    requestStoryteller(e, {id: s}={}) {
        if (!e.storytellers.some(t => t.id === s))
            if (!s)
                e.storytellerRequests = [];
            else {
                const t = e.storytellerRequests.indexOf(s);
                t > -1 ? e.storytellerRequests.splice(t, 1) : e.storytellerRequests.push(s)
            }
    }
}
  , IE = {
    namespaced: !0,
    state: CE,
    getters: SE,
    actions: PE,
    mutations: TE
};
let js = !0;
const Ed = {
    owner: {},
    banlist: {},
    createdAt: 0,
    isPublic: !1,
    chatServer: "",
    tags: {
        difficulty: 0,
        cameras: 0,
        travellers: 0,
        grimoire: 0,
        streaming: !1,
        locked: !1
    },
    language: (navigator.languages ? navigator.languages[0] : navigator.language).split("-")[0] || "en"
}
  , ME = () => ({
    sessionId: "",
    previousSessionId: "",
    isConnected: !1,
    isReconnecting: !1,
    isWhispersDisabled: !1,
    users: new Map,
    meta: Object.assign({}, Ed),
    ping: -1,
    isPointing: !1,
    pointers: [],
    raisedHands: new Map,
    handIcon: "i-hand",
    recipients: [],
    signals: {},
    timer: {
        expiration: 0,
        title: "",
        isPausedDuringVotes: !0,
        paused: 0
    },
    boostDuration: 0,
    hook: {
        name: ""
    },
    code: "9a885ff8b98251ed16d03c5972e3bac8a92e8c16ba661e5b5902a0af6a0ae8ca"
})
  , RE = {
    pointedPlayers({pointers: e}) {
        const s = [];
        e.forEach(n => {
            n != null && (s[n] = s[n] ? s[n] + 1 : 1)
        }
        );
        const t = s.reduce( (n, i) => i > n ? i : n, 0);
        return s.map( (n, i) => n === t ? i : -1).filter(n => n > -1)
    }
}
  , DE = {
    cleanGamestate({commit: e}) {
        e("setTimer"),
        e("setRaisedHands", new Map),
        e("vote/clearHistory", null, {
            root: !0
        }),
        e("players/setBluff", {}, {
            root: !0
        }),
        e("players/setStorytellers", [], {
            root: !0
        }),
        e("game/setHistory", {
            history: [],
            phase: 0,
            isRunning: !1
        }, {
            root: !0
        }),
        e("chat/removeTextMessage", null, {
            root: !0
        })
    },
    async create({state: e, dispatch: s, commit: t, rootState: n, rootGetters: i}, o) {
        var l;
        if (!e.sessionId && o)
            try {
                await s("players/clearRoles", {}, {
                    root: !0
                });
                const g = n.editionsAvailable.get("tb");
                e.meta.tags.difficulty === 2 && n.edition !== g && t("setEdition", {
                    edition: g
                }, {
                    root: !0
                }),
                s("cleanGamestate"),
                await s("players/becomeStoryteller", null, {
                    root: !0
                });
                const {players: c, storytellers: h, bluffs: m} = n.players
                  , {phase: A, isRunning: f, history: T} = n.game
                  , w = await re("create", {
                    name: o,
                    players: c.map(V => ({
                        ...V,
                        role: V.role.id,
                        id: void 0
                    })).slice(0, 20),
                    storytellers: h,
                    bluffs: m.map(V => V.id),
                    isPublic: e.meta.isPublic,
                    tags: e.meta.tags,
                    language: e.meta.language,
                    chatServer: e.meta.chatServer || i["chat/chatServerPreference"][0],
                    ...i.editionExport,
                    phase: A,
                    isRunning: f,
                    history: T
                }, n.user.accessToken);
                w.error ? ((l = w.error.message) != null && l.match(/Failed to fetch/i) && (w.error = "create_generic"),
                await s("openDialogue", {
                    type: "alert",
                    title: "modals.dialogue.error.session",
                    text: `modals.dialogue.error.${w.error}`
                }, {
                    root: !0
                })) : (t("setSessionId", o),
                F.currentRoute.value.name !== "Grimoire" && await F.replace({
                    name: "Grimoire"
                }))
            } catch {}
    },
    async join({state: e, dispatch: s, commit: t}, n="") {
        if (e.sessionId && e.sessionId !== n && F.currentRoute.value.name === "Grimoire")
            return s("leave");
        let i = n;
        try {
            i || (i = await s("openDialogue", {
                type: "prompt",
                title: "modals.dialogue.prompt.join_title",
                placeholder: "modals.dialogue.prompt.join_placeholder",
                value: "",
                minlength: 3,
                text: "modals.dialogue.prompt.join_text"
            }, {
                root: !0
            }),
            i = i.trim().toLocaleLowerCase()),
            i && (i.match(/^https?:\/\//i) && (i = decodeURIComponent(i.split("/join/").pop())),
            i !== e.previousSessionId && s("cleanGamestate"),
            t("setSessionId", i),
            F.currentRoute.value.name !== "Grimoire" && await F.replace({
                name: "Grimoire"
            }))
        } catch {}
    },
    async leave({dispatch: e, state: s, commit: t, rootState: n}) {
        try {
            const i = n.players.players.some(l => l.id === n.user.user.id);
            await e("openDialogue", {
                type: "confirm",
                title: "modals.dialogue.prompt.leave_title",
                text: "modals.dialogue.prompt.leave_text" + (i ? "_player" : "")
            }, {
                root: !0
            }) && (s.sessionId && t("setSessionId", ""),
            F.currentRoute.value.name === "Grimoire" && await F.replace({
                name: "Lobby"
            }))
        } catch {}
    },
    triggerHook({commit: e, state: s}, {name: t, params: n, delay: i, isInternal: o}) {
        return s.hook.name ? Promise.reject("hook already in progress") : (e("setHook", {
            name: t,
            params: n,
            isInternal: o
        }),
        i ? new Promise(l => {
            setTimeout( () => {
                e("setHook", {
                    name: "",
                    isInternal: o
                }),
                l()
            }
            , i)
        }
        ) : Promise.resolve())
    },
    startPointing({rootState: e, commit: s, rootGetters: t}, n=[]) {
        !t["user/isStoryteller"] || t["game/isNight"] !== !!n.length || (e.vote.nomination && s("vote/setNomination", !1, {
            root: !0
        }),
        s("setRecipients", n),
        s("setPointers", []),
        s("setPointingState", "start"),
        s("setGrimoireMode", "pointing", {
            root: !0
        }))
    },
    pointAtPlayer({state: e, rootState: s, commit: t}, n) {
        if (!e.isPointing || e.isPointing === "locked")
            return;
        const {players: i, user: o} = s
          , l = i.players.findIndex( ({id: g}) => g === o.user.id);
        l >= 0 && js && (js = !1,
        setTimeout( () => {
            js = !0
        }
        , 500),
        t("pointAtPlayer", {
            index: l,
            playerIndex: e.pointers[l] === n ? -1 : n
        }))
    },
    clearSignals({rootState: e, commit: s}) {
        e.modal.name === "signal" && s("toggleModal", {}, {
            root: !0
        }),
        s("clearSignals")
    }
}
  , ue = (e, s) => (t, n) => {
    const i = n != null && n.isInternal && (n != null && n.value) ? n.value : n;
    s && t[s] ? t[s][e] = i : t[e] = i
}
  , EE = {
    setPing: ue("ping"),
    setHook: ue("hook"),
    setHandIcon: ue("handIcon"),
    setRaisedHands: ue("raisedHands"),
    setBoostDuration: ue("boostDuration"),
    setPreviousSessionId: ue("previousSessionId"),
    toggleConnected: ie("isConnected"),
    toggleReconnecting: ue("isReconnecting"),
    toggleWhispers: ie("isWhispersDisabled"),
    setTimerPaused: ue("paused", "timer"),
    setTimer(e, {expiration: s, title: t, isPausedDuringVotes: n, paused: i}={}) {
        e.timer.expiration = s != null ? s : 0,
        e.timer.title = t != null ? t : "",
        e.timer.paused = i != null ? i : 0,
        n !== void 0 && (e.timer.isPausedDuringVotes = n)
    },
    updateMeta(e, s={}) {
        Object.keys(s).length ? Object.keys(s).forEach(t => {
            Object.hasOwn(e.meta, t) && s[t] !== void 0 && (e.meta[t] = s[t])
        }
        ) : e.meta = Object.assign({}, Ed)
    },
    kickUser: () => {}
    ,
    togglePowerful: () => {}
    ,
    setUsers(e, s) {
        Array.isArray(s) && (s.length ? s.forEach(t => e.users.set(t.id, t)) : e.users = new Map)
    },
    updateUser(e, s) {
        s != null && s.id && e.users.set(s.id, Object.assign({}, e.users.get(s.id), s))
    },
    setPointing(e, {isPointing: s, pointers: t=[], recipients: n=[]}) {
        e.pointers = t,
        e.isPointing = s,
        e.recipients = n
    },
    setPointers: ue("pointers"),
    setPointingState: ue("isPointing"),
    setRecipients: ue("recipients"),
    pointAtPlayer(e, {index: s, playerIndex: t}={}) {
        s >= 0 && (t >= 0 ? e.pointers[s] = t : delete e.pointers[s])
    },
    raiseHand({raisedHands: e, handIcon: s}, {userId: t, value: n}={}) {
        n !== void 0 ? n ? e.set(t, n) : e.delete(t) : e.has(t) ? e.delete(t) : e.set(t, s)
    },
    setSessionId(e, s) {
        e.sessionId = s.toLocaleLowerCase().trim().substring(0, 20)
    },
    addSignal(e, {userIds: s, message: t, isInbound: n=!1}) {
        for (let i = 0; i < s.length; i++) {
            const o = s[i];
            e.signals[o] || (e.signals[o] = []),
            e.signals[o].push({
                message: t,
                isInbound: n,
                timestamp: Date.now()
            })
        }
    },
    removeSignal(e, {userId: s, timestamp: t}) {
        e.signals[s] && (e.signals[s] = e.signals[s].filter(n => n.timestamp !== t))
    },
    updateSignal(e, {userId: s, index: t, message: n}) {
        var i;
        (i = e.signals[s]) != null && i[t] && (e.signals[s][t].message = n)
    },
    markSignalsAsRead(e, s) {
        e.signals[s] && e.signals[s].forEach(t => {
            t.isInbound && (t.isRead = !0)
        }
        )
    },
    clearSignals(e) {
        e.signals = {}
    }
}
  , NE = {
    namespaced: !0,
    state: ME,
    getters: RE,
    actions: DE,
    mutations: EE
}
  , Us = "https://the-pandemonium-institute.myshopify.com/api/2025-07/graphql.json"
  , Le = new Headers;
Le.append("X-Shopify-Storefront-Access-Token", "16f486cbc24d20dc53f4a33f216d7b2b");
Le.append("Content-Type", "application/json");
let _e = null;
const sl = 120 * 1e3
  , Nd = "https://github.com/ThePandemoniumInstitute/botc-release/releases"
  , Bd = () => ({
    user: {},
    accessToken: "",
    refreshToken: "",
    appUpdate: "",
    newVersions: 0,
    latestVersion: "",
    serverTimeDiff: 0,
    downloadUrl: [["Desktop", Nd]],
    levels: {
        SINGLE: ["app-single", "patreon-townsfolk"],
        GROUP: ["special-tpi", "special-free", "special-moderator", "app-group", "patreon-minion", "patreon-demon"]
    }
})
  , BE = {
    isStoryteller({user: e}, s, {session: t}, n) {
        return !t.sessionId || n["players/storytellerMap"].has(e.id)
    },
    isSpectator({user: e}, s, {session: t}, n) {
        return t.sessionId && !n["players/seatedPlayerMap"].has(e.id)
    },
    isModerator({user: e}) {
        return ["special-tpi", "special-moderator"].includes(e == null ? void 0 : e.level)
    },
    hasGrimoireAccess({user: e}, s, {session: t}, n) {
        var i;
        return !t.sessionId || n["players/storytellerMap"].has(e.id) || t.sessionId && !n["players/seatedPlayerMap"].has(e.id) && ((i = t.users.get(e.id)) == null ? void 0 : i.grimoireAccess) === 3
    },
    hasNightAction({user: e}, s, t, n) {
        var l, g;
        const i = n["players/seatedPlayerMap"].get(e.id);
        return n["players/storytellerMap"].get(e.id) || !(i != null && i.role) ? !1 : n["game/isNight"] && (!i.isDead || ((l = i.reminders) == null ? void 0 : l.some(c => c.name === "Has Ability"))) && ((g = i.role.special) == null ? void 0 : g.some(c => c.type === "player" && c.time === "night"))
    },
    getOpenEyes({user: e}, s, {session: t}, n) {
        var o, l, g, c;
        const i = n["players/seatedPlayerMap"].get(e.id);
        return !n["game/isNight"] || !t.sessionId || !((l = (o = i == null ? void 0 : i.role) == null ? void 0 : o.special) != null && l.some(h => h.type === "player" && h.name === "open-eyes")) ? !1 : (g = i == null ? void 0 : i.status) != null && g.includes("open-eyes") ? "open-eyes" : (c = i == null ? void 0 : i.status) != null && c.includes("peek-eyes") ? "peek-eyes" : !1
    }
}
  , VE = {
    async login({commit: e, dispatch: s}, {email: t, password: n, username: i, captcha: o}) {
        var A, f, T;
        Bd.accessToken && e("setAccessToken"),
        e("setRefreshToken");
        const l = JSON.stringify({
            query: `mutation customerAccessTokenCreate($input: CustomerAccessTokenCreateInput!) {
            customerAccessTokenCreate(input: $input) {
              customerUserErrors {
                code
                field
                message
              }
              customerAccessToken {
                accessToken
                expiresAt
              }
            }
          }`,
            variables: {
                input: {
                    email: t,
                    password: n
                }
            }
        })
          , g = await fetch(Us, {
            method: "POST",
            headers: Le,
            body: l
        })
          , {data: c, errors: h} = await g.json();
        if (!c)
            throw new Error("Authentication server unavailable");
        const m = (A = c.customerAccessTokenCreate) == null ? void 0 : A.customerAccessToken;
        if (m && m.accessToken) {
            const w = await re("login", {
                captcha: o,
                token: m.accessToken,
                username: i,
                version: le.version + (window.__TAURI__ ? "-app" : "") + "-" + document.documentElement.lang
            });
            if (w.accessToken)
                await s("setupRefresh", w);
            else
                throw new Error(`Unable to authenticate user: ${w == null ? void 0 : w.error}`)
        } else {
            const w = h ? h[0].message : (T = (f = c.customerAccessTokenCreate) == null ? void 0 : f.customerUserErrors[0]) == null ? void 0 : T.message;
            throw w === "Unidentified customer" ? new Error("Wrong e-mail address or password.") : new Error("Error logging in: " + w)
        }
    },
    async register({dispatch: e}, s) {
        const {email: t, password: n, acceptsMarketing: i, username: o, captcha: l} = s
          , g = JSON.stringify({
            query: `mutation customerCreate($input: CustomerCreateInput!) {
        customerCreate(input: $input) {
          customer {
            id
            email
            acceptsMarketing
          }
          customerUserErrors { field, message, code }
        }
      }`,
            variables: {
                input: {
                    email: t,
                    password: n,
                    acceptsMarketing: i
                }
            }
        })
          , c = await fetch(Us, {
            method: "POST",
            headers: Le,
            body: g
        })
          , {data: h} = await c.json()
          , m = h.customerCreate;
        if (!m || !m.customer || !m.customer.id)
            if (m && m.customerUserErrors && m.customerUserErrors.length) {
                const A = m.customerUserErrors.pop();
                throw new Error(A.message,{
                    cause: A.code
                })
            } else
                throw Error("Unable to register account. Please try again later.");
        await e("login", {
            email: t,
            password: n,
            username: o,
            captcha: l
        })
    },
    async refresh({commit: e, state: s, dispatch: t}) {
        if (clearTimeout(_e),
        s.refreshToken) {
            const n = {
                token: s.refreshToken,
                version: le.version + (window.__TAURI__ ? "-app" : "") + "-" + document.documentElement.lang
            }
              , i = await re("token", n);
            i.accessToken ? t("setupRefresh", i) : (e("setAccessToken"),
            e("setRefreshToken"))
        }
    },
    async setupRefresh({dispatch: e, commit: s}, {accessToken: t, refreshToken: n, timestamp: i}) {
        var c;
        _e && (clearTimeout(_e),
        _e = null),
        s("setAccessToken", t),
        s("setRefreshToken", n);
        const o = cl(t)
          , l = o.exp * 1e3 - Date.now()
          , g = Math.abs(Date.now() - i);
        l > sl ? _e = setTimeout( () => e("refresh").catch( () => {}
        ), l - sl) : l > 0 ? e("refresh").catch( () => {}
        ) : (s("setAccessToken"),
        s("setRefreshToken")),
        Da({
            id: o.id,
            username: o.username
        }),
        (c = o.flags) != null && c.includes("banned") ? await F.replace({
            name: "Banned"
        }) : i && g > 1e3 * 60 && (s("setServerTimeDiff", Date.now() - i),
        await F.replace({
            name: "Clock"
        }))
    },
    async recover(e, {email: s}) {
        const t = JSON.stringify({
            query: `mutation customerRecover($email: String!) {
        customerRecover(email: $email) {
          customerUserErrors { field, message, code }
          }
        }`,
            variables: {
                email: s
            }
        })
          , n = await fetch(Us, {
            method: "POST",
            headers: Le,
            body: t
        })
          , {data: i} = await n.json();
        if (!i)
            throw new Error("Authentication server unavailable");
        const {customerRecover: o} = i;
        if (!o || o.customerUserErrors.length)
            throw new Error("Unable to recover account")
    },
    async announce({state: e}, s) {
        if (!e.accessToken || e.user.level !== "special-tpi")
            return;
        const t = await re("announcement", s, e.accessToken);
        if (t.error)
            throw new Error(t.error)
    },
    async logout({commit: e, state: s, rootState: t}) {
        s.accessToken && (t.session.sessionId && e("session/setSessionId", "", {
            root: !0
        }),
        await re("logout", {
            token: s.refreshToken
        }, s.accessToken),
        e("setAccessToken"),
        e("setRefreshToken"),
        _e && (clearTimeout(_e),
        _e = null),
        Da(null))
    },
    async updateUser({commit: e, state: s, dispatch: t}, n={}) {
        if (!s.accessToken)
            return;
        const i = {};
        if (["pronouns", "username", "hasAgreedTOS", "border", "avatar", "stats"].forEach(l => {
            n[l] !== void 0 && (i[l] = n[l])
        }
        ),
        !Object.keys(i).length)
            return;
        const o = await re("user", i, s.accessToken);
        o.error ? await t("openDialogue", {
            type: "alert",
            title: "modals.dialogue.error.user_title",
            text: ["modals.dialogue.error.user_text", [o.error]]
        }, {
            root: !0
        }) : e("setAccessToken", o.accessToken)
    },
    async uploadAvatar({commit: e, state: s, dispatch: t}, n) {
        var o, l, g, c;
        if (!s.accessToken || !s.user.level || !n)
            return !1;
        const i = await re("avatar", n, s.accessToken, !0);
        if (i.error) {
            const h = "modals.dialogue.error.avatar";
            let m = "modals.dialogue.error.avatar_generic";
            return ((o = i.body) == null ? void 0 : o.error) === "LIMIT_FILE_SIZE" && (m = "modals.dialogue.error.avatar_size"),
            ((l = i.body) == null ? void 0 : l.error) === "FILE_TYPE" && (m = "modals.dialogue.error.avatar_type"),
            ((g = i.body) == null ? void 0 : g.error) === "LIMIT_PIXEL" && (m = "modals.dialogue.error.avatar_pixel"),
            await t("showError", [h, m], {
                root: !0
            }),
            X(i.error),
            !1
        } else
            return e("setAccessToken", i.accessToken),
            (c = s.user.cosmetics) == null ? void 0 : c.avatar
    },
    async promptUserUpdate({commit: e, state: s, dispatch: t}, n) {
        if (["username", "pronouns"].includes(n))
            try {
                const i = await t("openDialogue", {
                    type: "prompt",
                    title: `modals.dialogue.prompt.${n}_title`,
                    placeholder: `modals.dialogue.prompt.${n}_placeholder`,
                    value: s.user[n],
                    minlength: n === "pronouns" ? 0 : 3,
                    maxlength: 50,
                    text: `modals.dialogue.prompt.${n}_text`
                }, {
                    root: !0
                });
                i !== null && i !== s.user[n] && (e("updateUser", {
                    [n]: i.substring(0, 50)
                }),
                await t("updateUser", {
                    [n]: i.substring(0, 50)
                }))
            } catch {}
    },
    async linkPatreon({state: e}, s) {
        if (e.accessToken)
            return await re("patreon", {
                code: s,
                redirect: window.location.origin
            }, e.accessToken)
    },
    async loadData({commit: e, state: s, dispatch: t, rootState: n}) {
        if (!s.accessToken)
            return;
        const {editions: i, roles: o, servers: l, nightOrder: g} = await We("data", s.accessToken);
        if (i != null && i.length)
            return e("setEditionsAvailable", i, {
                root: !0
            }),
            e("setNightOrder", g, {
                root: !0
            }),
            e("setNPCs", o.filter(c => n.definitions.NPC_TEAMS.includes(c.team)), {
                root: !0
            }),
            e("setRolesAvailable", o.filter(c => n.definitions.PLAYER_TEAMS.includes(c.team)), {
                root: !0
            }),
            t("chat/setServerList", l, {
                root: !0
            }),
            i;
        try {
            await t("openDialogue", {
                type: "alert",
                title: "modals.dialogue.error.loading_title",
                text: "modals.dialogue.error.loading_text"
            })
        } catch {} finally {
            window.location.reload()
        }
        return []
    },
    async setDownloadUrl({commit: e}, s=le.version) {
        let t = "";
        window.__TAURI__ && (t = await $d());
        const {os: n} = Ke();
        let i = `${Nd}/download/v${s}/Blood.on.the.Clocktower.Online_${s}_`;
        if ((n == null ? void 0 : n.name) === "macOS") {
            const o = [["Intel Mac", i + "x64.dmg"], ["M1+ Mac", i + "aarch64.dmg"]];
            return t ? t === "aarch64" ? e("setDownloadUrl", [o[1]]) : e("setDownloadUrl", [o[0]]) : e("setDownloadUrl", o)
        } else {
            if ((n == null ? void 0 : n.name) === "Windows")
                return e("setDownloadUrl", [["Windows", i + "x64-setup.exe"]]);
            ["Linux", "Unix", "Debian", "Ubuntu", "Arch", "SUSE", "RedHat", "Mint", "Xubuntu", "FreeBSD", "Fedora", "GNU", "OpenBSD"].includes(n == null ? void 0 : n.name)
        }
        return e("setDownloadUrl", [])
    },
    async checkVersion({commit: e, state: s, dispatch: t}) {
        try {
            let n;
            if (window.__TAURI__ && (n = await Yd(),
            n && (e("setAppUpdate", n.version),
            await n.downloadAndInstall(),
            await Jd())),
            !window.__TAURI__ || !n) {
                const i = []
                  , o = await fetch("https://api.github.com/repos/thepandemoniuminstitute/botc-release/tags");
                if (o && o.json) {
                    const l = await o.json();
                    l && l.length && l.forEach(g => i.push(g.name))
                }
                i.forEach( (l, g) => {
                    "v" + le.version === l && e("setNewVersions", g),
                    g || (e("setLatestVersion", l),
                    t("setDownloadUrl", l.substring(1)))
                }
                )
            }
        } catch {}
        s.newVersions > 1 && F.currentRoute.value.name !== "Update" ? await F.replace({
            name: "Update"
        }) : F.currentRoute.value.name === "Update" && await F.replace({
            name: "Grimoire"
        })
    }
}
  , Te = e => (s, t) => {
    s[e] = t === void 0 ? "" : t
}
  , OE = {
    requestGrimoire: () => {}
    ,
    setNewVersions: Te("newVersions"),
    setAppUpdate: Te("appUpdate"),
    setServerTimeDiff: Te("serverTimeDiff"),
    setLatestVersion: Te("latestVersion"),
    setRefreshToken: Te("refreshToken"),
    setDownloadUrl: Te("downloadUrl"),
    setAccessToken(e, s) {
        e.accessToken = s || "",
        e.user = s ? cl(s) : {}
    },
    updateUser(e, s) {
        Object.keys(s).forEach(t => {
            e.user[t] !== void 0 && (e.user[t] = s[t])
        }
        )
    }
}
  , jE = {
    namespaced: !0,
    state: Bd,
    getters: BE,
    actions: VE,
    mutations: OE
}
  , UE = () => ({
    nomination: !1,
    votes: [],
    locked: 0,
    speed: 1e3,
    isInProgress: !1,
    isHidden: !1,
    nominationType: "regular",
    history: [],
    markedPlayer: -1,
    selectedPlayer: -1,
    highscore: 0,
    voteTimer: null
})
  , HE = {
    nomination(e) {
        const s = Object.assign({}, e);
        return delete s.history,
        !e.isInProgress && e.locked <= 0 && (s.isHidden = !1),
        e.isHidden && delete s.votes,
        s
    }
}
  , qE = {
    nominatePlayer({state: e, commit: s, rootState: t, rootGetters: n}, i) {
        if (!n["user/isStoryteller"] || e.isInProgress || n["game/isNight"] || i[0] < 0 || t.session.hook.name === "reveal-grimoire")
            return;
        t.grimoire.mode !== "grimoire" && s("setGrimoireMode", "grimoire", {
            root: !0
        });
        const o = e.nominationType === "phases" ? -3 : 0;
        s("nomination", {
            nomination: i,
            locked: o
        })
    },
    addLogEntry({state: e, rootState: s, rootGetters: t, commit: n}) {
        const {players: i} = s.players;
        if (!e.nomination || e.locked <= i.length || !t["user/hasGrimoireAccess"])
            return;
        const o = i[e.nomination[1]].role.team === "traveller"
          , l = t["players/playerName"];
        n("addLogEntry", {
            timestamp: new Date,
            phase: s.game.phase,
            nominator: l(i[e.nomination[0]]),
            nominee: l(i[e.nomination[1]]),
            type: o ? "exile" : "execution",
            majority: Math.ceil(i.filter(g => !g.isDead || o).length / 2),
            votes: e.votes.reduce( (g, c) => g + (c || 0), 0),
            voters: i.map( (g, c) => [l(g), e.votes[c]]).filter( (g, c) => e.votes[c])
        })
    },
    setMarkedPlayer({state: e, rootState: s, commit: t}) {
        if (!e.nomination)
            return;
        const n = e.nomination[1];
        if (e.locked > s.players.players.length) {
            const i = e.votes.reduce( (o, l) => o + l, 0);
            i === e.highscore && e.markedPlayer > -1 && i ? t("setMarkedPlayer", -1) : t("setMarkedPlayer", n === e.markedPlayer ? -1 : n),
            i > e.highscore && t("setHighscore", {
                isInternal: !0,
                value: i
            })
        } else
            t("setMarkedPlayer", n === e.markedPlayer ? -1 : n)
    }
}
  , ye = e => (s, t) => {
    (t == null ? void 0 : t.value) !== void 0 ? s[e] = t.value : s[e] = t
}
  , LE = {
    setVotingSpeed: ye("speed"),
    setMarkedPlayer: ye("markedPlayer"),
    setSelectedPlayer: ye("selectedPlayer"),
    setNomination: ye("nomination"),
    setHighscore: ye("highscore"),
    setNominationType: ye("nominationType"),
    toggleVoteInProgress: ye("isInProgress"),
    toggleIsHidden: ye("isHidden"),
    nomination(e, s={}) {
        var t, n, i, o;
        e.nomination = s.nomination || !1,
        e.votes = s.votes || [],
        e.locked = s.locked || 0,
        e.isInProgress = e.nomination && s.isInProgress || !1,
        e.isHidden = s.isHidden || !1,
        e.speed = s.speed || e.speed,
        e.markedPlayer = (t = s.markedPlayer) != null ? t : e.markedPlayer,
        e.highscore = (n = s.highscore) != null ? n : e.highscore,
        e.nominationType = (i = s.nominationType) != null ? i : e.nominationType,
        e.selectedPlayer = (o = s.selectedPlayer) != null ? o : -1,
        e.voteTimer && clearInterval(e.voteTimer),
        e.voteTimer = null
    },
    addLogEntry(e, s) {
        e.history.push(s)
    },
    setHistory(e, s) {
        e.history = s
    },
    clearHistory(e) {
        e.history = []
    },
    setVoteTimer(e, s=null) {
        e.voteTimer && clearInterval(e.voteTimer),
        e.voteTimer = s
    },
    castVote: (e, {index: s, value: t}) => {
        e.nomination && (e.votes = [...e.votes],
        e.votes[s] = t)
    }
    ,
    lockVote(e, s) {
        s != null && s.isInternal ? e.locked = s.value : e.locked = s !== void 0 ? s : e.locked + 1
    }
}
  , zE = {
    namespaced: !0,
    state: UE,
    getters: HE,
    actions: qE,
    mutations: LE
}
  , GE = () => ({
    general: {
        avatarZoom: 1,
        tokenZoom: 0,
        reminderZoom: 1,
        grimoireOffset: 0,
        background: "",
        colorblind: 0,
        isAnimationsDisabled: !1,
        isCosmeticsDisabled: !1,
        isImageOptIn: !1,
        isPositioningDisabled: !1,
        soundVolume: 1
    },
    game: {
        isNightOrder: !1,
        isNightRequestPing: !1,
        isPlayerBluffs: !1,
        isPlayerDuplicates: !1,
        isPlayerNightOrder: !1,
        isTouchSupport: !0,
        isEnglishNames: !0,
        isTutorialDisabled: !1,
        stackReminderTokens: null
    },
    sounds: new Map(Tn.map(e => [e, 1])),
    advanced: {
        chromaKey: "",
        customCSS: "",
        customCSSEnabled: !1,
        hasHiddenPrivateCams: !1,
        hasHiddenTownSquareCams: !1,
        hasNightStatic: !1,
        hasPublicTownSquare: !1,
        hasHiddenRevealCams: !1
    }
})
  , pe = (e, s="general") => (t, n) => {
    s ? t[s][e] = n : t[e] = n
}
  , ee = (e, s="general") => (t, n) => {
    const i = t[s];
    n === !0 || n === !1 ? i[e] = n : n != null && n.isInternal ? i[e] = !!n.value : i[e] = !i[e]
}
  , WE = {}
  , FE = {}
  , QE = {
    setAvatarZoom: pe("avatarZoom"),
    setTokenZoom: pe("tokenZoom"),
    setReminderZoom: pe("reminderZoom"),
    setGrimoireOffset: pe("grimoireOffset"),
    setColorblind: pe("colorblind"),
    setBackground: pe("background"),
    setSoundVolume: pe("soundVolume"),
    togglePositioningDisabled: ee("isPositioningDisabled"),
    toggleAnimationsDisabled: ee("isAnimationsDisabled"),
    toggleCosmeticsDisabled: ee("isCosmeticsDisabled"),
    toggleImageOptIn: ee("isImageOptIn"),
    toggleTutorialDisabled: ee("isTutorialDisabled", "game"),
    toggleEnglishNames: ee("isEnglishNames", "game"),
    togglePlayerDuplicates: ee("isPlayerDuplicates", "game"),
    toggleNightOrder: ee("isNightOrder", "game"),
    togglePlayerNightOrder: ee("isPlayerNightOrder", "game"),
    togglePlayerBluffs: ee("isPlayerBluffs", "game"),
    toggleNightRequestPing: ee("isNightRequestPing", "game"),
    toggleTouchSupport: ee("isTouchSupport", "game"),
    toggleStackReminderTokens({game: e}, s) {
        s !== void 0 ? e.stackReminderTokens = s : e.stackReminderTokens === null ? e.stackReminderTokens = !0 : e.stackReminderTokens === !0 ? e.stackReminderTokens = !1 : e.stackReminderTokens = null
    },
    setSoundEffectVolume({sounds: e}, {id: s, value: t}) {
        e.has(s) && e.set(s, t)
    },
    toggleNightStatic: ee("hasNightStatic", "advanced"),
    toggleHiddenTownSquareCams: ee("hasHiddenTownSquareCams", "advanced"),
    toggleHiddenPrivateCams: ee("hasHiddenPrivateCams", "advanced"),
    toggleHiddenRevealCams: ee("hasHiddenRevealCams", "advanced"),
    togglePublicTownSquare: ee("hasPublicTownSquare", "advanced"),
    toggleCustomCSS: ee("customCSSEnabled", "advanced"),
    setChromaKey: pe("chromaKey", "advanced"),
    setCustomCSS: pe("customCSS", "advanced")
}
  , ZE = {
    namespaced: !0,
    state: GE,
    getters: WE,
    actions: FE,
    mutations: QE
}
  , he = (e, s) => (t, n) => {
    s ? t[s][e] = n : t[e] = n
}
  , tl = e => (e == null ? void 0 : e.toLocaleLowerCase().replace(/[^a-z0-9]/g, "")) || ""
  , il = {
    townsfolk: "townsfolk",
    outsider: "outsider",
    minion: "minion",
    demon: "demon",
    fabled: "fabled",
    loric: "loric",
    traveller: "traveller"
}
  , XE = ["townsfolk", "outsider", "minion", "demon", "traveller"]
  , KE = ["fabled", "loric"]
  , Ze = {
    id: "",
    name: "",
    image: "",
    ability: "",
    flavor: "",
    edition: "custom",
    firstNight: 0,
    firstNightReminder: "",
    otherNight: 0,
    otherNightReminder: "",
    reminders: [],
    remindersGlobal: [],
    setup: !1,
    team: "",
    special: [],
    jinxes: [],
    isCustom: !0
}
  , we = new ll.Store({
    modules: {
        chat: fE,
        game: kE,
        players: IE,
        session: NE,
        user: jE,
        vote: zE,
        settings: ZE
    },
    state: {
        definitions: {
            CUSTOM_ROLE: Ze,
            PLAYER_TEAMS: XE,
            NPC_TEAMS: KE
        },
        grimoire: {
            isTownSquare: !1,
            loadingState: "initial",
            menuOpen: "",
            mode: "grimoire",
            playerSelectCallback: null,
            playerDragState: -1,
            rightSideTabState: "",
            savedReminders: [],
            seats: [],
            sounds: [],
            tabs: {},
            theme: -1
        },
        positions: {},
        modal: {
            name: "",
            params: {}
        },
        edition: {},
        editionsAvailable: new Map,
        roles: new Map,
        rolesAvailable: new Map,
        nightOrder: {
            firstNight: [],
            otherNight: []
        },
        rolesSelected: [],
        npcs: new Map,
        keybindings: Object.fromEntries(Object.entries(Ge).map( ([e,s]) => [e, [...s]])),
        worldcup: {},
        worldcupVotes: new Map
    },
    getters: {
        editionExport({roles: e, grimoire: s, edition: t}, n, {players: i}) {
            const o = Object.keys(Ze)
              , l = !t.isOfficial
              , g = h => {
                if (h.isCustom) {
                    const m = {};
                    for (let A in h) {
                        const f = h[A];
                        A !== "isCustom" && o.includes(A) && JSON.stringify(f) !== JSON.stringify(Ze[A]) && (m[A] = f)
                    }
                    return m
                } else
                    return {
                        id: h.id
                    }
            }
              , c = {};
            return Object.keys(t).forEach(h => {
                ["id", "name", "background", "logo", "author", "firstNight", "otherNight", "isOfficial", "hideTitle", "bootlegger", "almanac"].includes(h) && (c[h] = t[h])
            }
            ),
            {
                edition: l ? c : {
                    id: t.id,
                    isOfficial: !0
                },
                theme: s.theme,
                roles: l ? [...e].map( ([,h]) => g(h)) : [],
                npcs: i.npcs.map(h => g(h))
            }
        },
        roleIconURL: ({roles: e, rolesAvailable: s, npcs: t}, n, {players: i, settings: o}) => (l, g="") => {
            var A;
            if (["custom", "good", "evil"].includes(l))
                return new URL(Object.assign({
                    "/src/assets/icons/card-ability.webp": zs,
                    "/src/assets/icons/card-bluffs.webp": Gs,
                    "/src/assets/icons/card-choice.webp": Ws,
                    "/src/assets/icons/card-claim.webp": Fs,
                    "/src/assets/icons/card-demon.webp": Qs,
                    "/src/assets/icons/card-minions.webp": Zs,
                    "/src/assets/icons/card-selected.webp": Xs,
                    "/src/assets/icons/card-special.webp": Ks,
                    "/src/assets/icons/card-you.webp": Ys,
                    "/src/assets/icons/custom.webp": za,
                    "/src/assets/icons/dawn.webp": Ga,
                    "/src/assets/icons/demon-info.webp": Wa,
                    "/src/assets/icons/demon_e.webp": Fa,
                    "/src/assets/icons/demon_g.webp": Qa,
                    "/src/assets/icons/dusk.webp": Za,
                    "/src/assets/icons/evil.webp": Xa,
                    "/src/assets/icons/fabled.webp": Ka,
                    "/src/assets/icons/good.webp": Ya,
                    "/src/assets/icons/loric.webp": Ja,
                    "/src/assets/icons/minion-info.webp": $a,
                    "/src/assets/icons/minion_e.webp": xa,
                    "/src/assets/icons/minion_g.webp": er,
                    "/src/assets/icons/outsider_e.webp": sr,
                    "/src/assets/icons/outsider_g.webp": tr,
                    "/src/assets/icons/townsfolk_e.webp": ir,
                    "/src/assets/icons/townsfolk_g.webp": or,
                    "/src/assets/icons/traveller.webp": nr,
                    "/src/assets/icons/traveller_e.webp": ar,
                    "/src/assets/icons/traveller_g.webp": rr,
                    "/src/assets/icons/x.webp": lr
                })[`/src/assets/icons/${l}.webp`],import.meta.url).href;
            if (l != null && l.id && Object.keys(l).length === 1 && (l = l.id),
            typeof l == "string" && (l = e.get(l) || s.get(l) || t.get(l) || i.npcs.find( ({id: f}) => f === l)),
            !l || !l.id)
                return new URL("/assets/custom-CLofFTEi.webp",import.meta.url).href;
            let c = "";
            if (["townsfolk", "outsider"].includes(l.team) && (c = "g"),
            ["minion", "demon"].includes(l.team) && (c = "e"),
            l.image && o.general.isImageOptIn && (F == null ? void 0 : F.currentRoute.value.name) === "Grimoire")
                return Array.isArray(l.image) ? l.image.length < 2 ? CSS.escape(l.image[0]) : l.team === "traveller" && g === "g" ? CSS.escape(l.image[1]) : l.team === "traveller" && g === "e" ? CSS.escape(l.image[2]) : g && g !== c ? CSS.escape(l.image[1]) : CSS.escape(l.image[0]) : CSS.escape(l.image);
            c && (c = "_" + c);
            let h = g ? "_" + g : c;
            if (l.isCustom || (A = t.get(l.id)) != null && A.isCustom || !s.has(l.id) && !t.has(l.id))
                return new URL(Object.assign({
                    "/src/assets/icons/card-ability.webp": zs,
                    "/src/assets/icons/card-bluffs.webp": Gs,
                    "/src/assets/icons/card-choice.webp": Ws,
                    "/src/assets/icons/card-claim.webp": Fs,
                    "/src/assets/icons/card-demon.webp": Qs,
                    "/src/assets/icons/card-minions.webp": Zs,
                    "/src/assets/icons/card-selected.webp": Xs,
                    "/src/assets/icons/card-special.webp": Ks,
                    "/src/assets/icons/card-you.webp": Ys,
                    "/src/assets/icons/custom.webp": za,
                    "/src/assets/icons/dawn.webp": Ga,
                    "/src/assets/icons/demon-info.webp": Wa,
                    "/src/assets/icons/demon_e.webp": Fa,
                    "/src/assets/icons/demon_g.webp": Qa,
                    "/src/assets/icons/dusk.webp": Za,
                    "/src/assets/icons/evil.webp": Xa,
                    "/src/assets/icons/fabled.webp": Ka,
                    "/src/assets/icons/good.webp": Ya,
                    "/src/assets/icons/loric.webp": Ja,
                    "/src/assets/icons/minion-info.webp": $a,
                    "/src/assets/icons/minion_e.webp": xa,
                    "/src/assets/icons/minion_g.webp": er,
                    "/src/assets/icons/outsider_e.webp": sr,
                    "/src/assets/icons/outsider_g.webp": tr,
                    "/src/assets/icons/townsfolk_e.webp": ir,
                    "/src/assets/icons/townsfolk_g.webp": or,
                    "/src/assets/icons/traveller.webp": nr,
                    "/src/assets/icons/traveller_e.webp": ar,
                    "/src/assets/icons/traveller_g.webp": rr,
                    "/src/assets/icons/x.webp": lr
                })[`/src/assets/icons/${il[l.team] || "custom"}${h}.webp`],import.meta.url).href;
            const m = l.edition || "custom";
            return new URL(Object.assign({
                "/src/assets/icons/bmr/apprentice.webp": mm,
                "/src/assets/icons/bmr/apprentice_e.webp": hm,
                "/src/assets/icons/bmr/apprentice_g.webp": pm,
                "/src/assets/icons/bmr/assassin_e.webp": Am,
                "/src/assets/icons/bmr/assassin_g.webp": bm,
                "/src/assets/icons/bmr/bishop.webp": fm,
                "/src/assets/icons/bmr/bishop_e.webp": vm,
                "/src/assets/icons/bmr/bishop_g.webp": _m,
                "/src/assets/icons/bmr/chambermaid_e.webp": ym,
                "/src/assets/icons/bmr/chambermaid_g.webp": wm,
                "/src/assets/icons/bmr/courtier_e.webp": km,
                "/src/assets/icons/bmr/courtier_g.webp": Cm,
                "/src/assets/icons/bmr/devilsadvocate_e.webp": Sm,
                "/src/assets/icons/bmr/devilsadvocate_g.webp": Pm,
                "/src/assets/icons/bmr/exorcist_e.webp": Tm,
                "/src/assets/icons/bmr/exorcist_g.webp": Im,
                "/src/assets/icons/bmr/fool_e.webp": Mm,
                "/src/assets/icons/bmr/fool_g.webp": Rm,
                "/src/assets/icons/bmr/gambler_e.webp": Dm,
                "/src/assets/icons/bmr/gambler_g.webp": Em,
                "/src/assets/icons/bmr/godfather_e.webp": Nm,
                "/src/assets/icons/bmr/godfather_g.webp": Bm,
                "/src/assets/icons/bmr/goon_e.webp": Vm,
                "/src/assets/icons/bmr/goon_g.webp": Om,
                "/src/assets/icons/bmr/gossip_e.webp": jm,
                "/src/assets/icons/bmr/gossip_g.webp": Um,
                "/src/assets/icons/bmr/grandmother_e.webp": Hm,
                "/src/assets/icons/bmr/grandmother_g.webp": qm,
                "/src/assets/icons/bmr/innkeeper_e.webp": Lm,
                "/src/assets/icons/bmr/innkeeper_g.webp": zm,
                "/src/assets/icons/bmr/judge.webp": Gm,
                "/src/assets/icons/bmr/judge_e.webp": Wm,
                "/src/assets/icons/bmr/judge_g.webp": Fm,
                "/src/assets/icons/bmr/lunatic_e.webp": Qm,
                "/src/assets/icons/bmr/lunatic_g.webp": Zm,
                "/src/assets/icons/bmr/mastermind_e.webp": Xm,
                "/src/assets/icons/bmr/mastermind_g.webp": Km,
                "/src/assets/icons/bmr/matron.webp": Ym,
                "/src/assets/icons/bmr/matron_e.webp": Jm,
                "/src/assets/icons/bmr/matron_g.webp": $m,
                "/src/assets/icons/bmr/minstrel_e.webp": xm,
                "/src/assets/icons/bmr/minstrel_g.webp": eh,
                "/src/assets/icons/bmr/moonchild_e.webp": sh,
                "/src/assets/icons/bmr/moonchild_g.webp": th,
                "/src/assets/icons/bmr/pacifist_e.webp": ih,
                "/src/assets/icons/bmr/pacifist_g.webp": oh,
                "/src/assets/icons/bmr/po_e.webp": nh,
                "/src/assets/icons/bmr/po_g.webp": ah,
                "/src/assets/icons/bmr/professor_e.webp": rh,
                "/src/assets/icons/bmr/professor_g.webp": lh,
                "/src/assets/icons/bmr/pukka_e.webp": ch,
                "/src/assets/icons/bmr/pukka_g.webp": dh,
                "/src/assets/icons/bmr/sailor_e.webp": uh,
                "/src/assets/icons/bmr/sailor_g.webp": gh,
                "/src/assets/icons/bmr/shabaloth_e.webp": mh,
                "/src/assets/icons/bmr/shabaloth_g.webp": hh,
                "/src/assets/icons/bmr/tealady_e.webp": ph,
                "/src/assets/icons/bmr/tealady_g.webp": Ah,
                "/src/assets/icons/bmr/tinker_e.webp": bh,
                "/src/assets/icons/bmr/tinker_g.webp": fh,
                "/src/assets/icons/bmr/voudon.webp": vh,
                "/src/assets/icons/bmr/voudon_e.webp": _h,
                "/src/assets/icons/bmr/voudon_g.webp": yh,
                "/src/assets/icons/bmr/zombuul_e.webp": wh,
                "/src/assets/icons/bmr/zombuul_g.webp": kh,
                "/src/assets/icons/carousel/acrobat_e.webp": Ch,
                "/src/assets/icons/carousel/acrobat_g.webp": Sh,
                "/src/assets/icons/carousel/alchemist_e.webp": Ph,
                "/src/assets/icons/carousel/alchemist_g.webp": Th,
                "/src/assets/icons/carousel/alhadikhia_e.webp": Ih,
                "/src/assets/icons/carousel/alhadikhia_g.webp": Mh,
                "/src/assets/icons/carousel/alsaahir_e.webp": Rh,
                "/src/assets/icons/carousel/alsaahir_g.webp": Dh,
                "/src/assets/icons/carousel/amnesiac_e.webp": Eh,
                "/src/assets/icons/carousel/amnesiac_g.webp": Nh,
                "/src/assets/icons/carousel/atheist_e.webp": Bh,
                "/src/assets/icons/carousel/atheist_g.webp": Vh,
                "/src/assets/icons/carousel/balloonist_e.webp": Oh,
                "/src/assets/icons/carousel/balloonist_g.webp": jh,
                "/src/assets/icons/carousel/banshee_e.webp": Uh,
                "/src/assets/icons/carousel/banshee_g.webp": Hh,
                "/src/assets/icons/carousel/boffin_e.webp": qh,
                "/src/assets/icons/carousel/boffin_g.webp": Lh,
                "/src/assets/icons/carousel/boomdandy_e.webp": zh,
                "/src/assets/icons/carousel/boomdandy_g.webp": Gh,
                "/src/assets/icons/carousel/bountyhunter_e.webp": Wh,
                "/src/assets/icons/carousel/bountyhunter_g.webp": Fh,
                "/src/assets/icons/carousel/cannibal_e.webp": Qh,
                "/src/assets/icons/carousel/cannibal_g.webp": Zh,
                "/src/assets/icons/carousel/choirboy_e.webp": Xh,
                "/src/assets/icons/carousel/choirboy_g.webp": Kh,
                "/src/assets/icons/carousel/cultleader_e.webp": Yh,
                "/src/assets/icons/carousel/cultleader_g.webp": Jh,
                "/src/assets/icons/carousel/damsel_e.webp": $h,
                "/src/assets/icons/carousel/damsel_g.webp": xh,
                "/src/assets/icons/carousel/engineer_e.webp": ep,
                "/src/assets/icons/carousel/engineer_g.webp": sp,
                "/src/assets/icons/carousel/farmer_e.webp": tp,
                "/src/assets/icons/carousel/farmer_g.webp": ip,
                "/src/assets/icons/carousel/fearmonger_e.webp": op,
                "/src/assets/icons/carousel/fearmonger_g.webp": np,
                "/src/assets/icons/carousel/fisherman_e.webp": ap,
                "/src/assets/icons/carousel/fisherman_g.webp": rp,
                "/src/assets/icons/carousel/gangster.webp": lp,
                "/src/assets/icons/carousel/gangster_e.webp": cp,
                "/src/assets/icons/carousel/gangster_g.webp": dp,
                "/src/assets/icons/carousel/general_e.webp": up,
                "/src/assets/icons/carousel/general_g.webp": gp,
                "/src/assets/icons/carousel/gnome.webp": mp,
                "/src/assets/icons/carousel/gnome_e.webp": hp,
                "/src/assets/icons/carousel/gnome_g.webp": pp,
                "/src/assets/icons/carousel/goblin_e.webp": Ap,
                "/src/assets/icons/carousel/goblin_g.webp": bp,
                "/src/assets/icons/carousel/golem_e.webp": fp,
                "/src/assets/icons/carousel/golem_g.webp": vp,
                "/src/assets/icons/carousel/harpy_e.webp": _p,
                "/src/assets/icons/carousel/harpy_g.webp": yp,
                "/src/assets/icons/carousel/hatter_e.webp": wp,
                "/src/assets/icons/carousel/hatter_g.webp": kp,
                "/src/assets/icons/carousel/heretic_e.webp": Cp,
                "/src/assets/icons/carousel/heretic_g.webp": Sp,
                "/src/assets/icons/carousel/hermit_e.webp": Pp,
                "/src/assets/icons/carousel/hermit_g.webp": Tp,
                "/src/assets/icons/carousel/highpriestess_e.webp": Ip,
                "/src/assets/icons/carousel/highpriestess_g.webp": Mp,
                "/src/assets/icons/carousel/huntsman_e.webp": Rp,
                "/src/assets/icons/carousel/huntsman_g.webp": Dp,
                "/src/assets/icons/carousel/kazali_e.webp": Ep,
                "/src/assets/icons/carousel/kazali_g.webp": Np,
                "/src/assets/icons/carousel/king_e.webp": Bp,
                "/src/assets/icons/carousel/king_g.webp": Vp,
                "/src/assets/icons/carousel/knight_e.webp": Op,
                "/src/assets/icons/carousel/knight_g.webp": jp,
                "/src/assets/icons/carousel/legion_e.webp": Up,
                "/src/assets/icons/carousel/legion_g.webp": Hp,
                "/src/assets/icons/carousel/leviathan_e.webp": qp,
                "/src/assets/icons/carousel/leviathan_g.webp": Lp,
                "/src/assets/icons/carousel/lilmonsta_e.webp": zp,
                "/src/assets/icons/carousel/lilmonsta_g.webp": Gp,
                "/src/assets/icons/carousel/lleech_e.webp": Wp,
                "/src/assets/icons/carousel/lleech_g.webp": Fp,
                "/src/assets/icons/carousel/lordoftyphon_e.webp": Qp,
                "/src/assets/icons/carousel/lordoftyphon_g.webp": Zp,
                "/src/assets/icons/carousel/lycanthrope_e.webp": Xp,
                "/src/assets/icons/carousel/lycanthrope_g.webp": Kp,
                "/src/assets/icons/carousel/magician_e.webp": Yp,
                "/src/assets/icons/carousel/magician_g.webp": Jp,
                "/src/assets/icons/carousel/marionette_e.webp": $p,
                "/src/assets/icons/carousel/marionette_g.webp": xp,
                "/src/assets/icons/carousel/mezepheles_e.webp": eA,
                "/src/assets/icons/carousel/mezepheles_g.webp": sA,
                "/src/assets/icons/carousel/nightwatchman_e.webp": tA,
                "/src/assets/icons/carousel/nightwatchman_g.webp": iA,
                "/src/assets/icons/carousel/noble_e.webp": oA,
                "/src/assets/icons/carousel/noble_g.webp": nA,
                "/src/assets/icons/carousel/ogre_e.webp": aA,
                "/src/assets/icons/carousel/ogre_g.webp": rA,
                "/src/assets/icons/carousel/ojo_e.webp": lA,
                "/src/assets/icons/carousel/ojo_g.webp": cA,
                "/src/assets/icons/carousel/organgrinder_e.webp": dA,
                "/src/assets/icons/carousel/organgrinder_g.webp": uA,
                "/src/assets/icons/carousel/pixie_e.webp": gA,
                "/src/assets/icons/carousel/pixie_g.webp": mA,
                "/src/assets/icons/carousel/plaguedoctor_e.webp": hA,
                "/src/assets/icons/carousel/plaguedoctor_g.webp": pA,
                "/src/assets/icons/carousel/politician_e.webp": AA,
                "/src/assets/icons/carousel/politician_g.webp": bA,
                "/src/assets/icons/carousel/poppygrower_e.webp": fA,
                "/src/assets/icons/carousel/poppygrower_g.webp": vA,
                "/src/assets/icons/carousel/preacher_e.webp": _A,
                "/src/assets/icons/carousel/preacher_g.webp": yA,
                "/src/assets/icons/carousel/princess_e.webp": wA,
                "/src/assets/icons/carousel/princess_g.webp": kA,
                "/src/assets/icons/carousel/psychopath_e.webp": CA,
                "/src/assets/icons/carousel/psychopath_g.webp": SA,
                "/src/assets/icons/carousel/puzzlemaster_e.webp": PA,
                "/src/assets/icons/carousel/puzzlemaster_g.webp": TA,
                "/src/assets/icons/carousel/riot_e.webp": IA,
                "/src/assets/icons/carousel/riot_g.webp": MA,
                "/src/assets/icons/carousel/shugenja_e.webp": RA,
                "/src/assets/icons/carousel/shugenja_g.webp": DA,
                "/src/assets/icons/carousel/snitch_e.webp": EA,
                "/src/assets/icons/carousel/snitch_g.webp": NA,
                "/src/assets/icons/carousel/steward_e.webp": BA,
                "/src/assets/icons/carousel/steward_g.webp": VA,
                "/src/assets/icons/carousel/summoner_e.webp": OA,
                "/src/assets/icons/carousel/summoner_g.webp": jA,
                "/src/assets/icons/carousel/villageidiot_e.webp": UA,
                "/src/assets/icons/carousel/villageidiot_g.webp": HA,
                "/src/assets/icons/carousel/vizier_e.webp": qA,
                "/src/assets/icons/carousel/vizier_g.webp": LA,
                "/src/assets/icons/carousel/widow_e.webp": zA,
                "/src/assets/icons/carousel/widow_g.webp": GA,
                "/src/assets/icons/carousel/wizard_e.webp": WA,
                "/src/assets/icons/carousel/wizard_g.webp": FA,
                "/src/assets/icons/carousel/wraith_e.webp": QA,
                "/src/assets/icons/carousel/wraith_g.webp": ZA,
                "/src/assets/icons/carousel/xaan_e.webp": XA,
                "/src/assets/icons/carousel/xaan_g.webp": KA,
                "/src/assets/icons/carousel/yaggababble_e.webp": YA,
                "/src/assets/icons/carousel/yaggababble_g.webp": JA,
                "/src/assets/icons/carousel/zealot_e.webp": $A,
                "/src/assets/icons/carousel/zealot_g.webp": xA,
                "/src/assets/icons/custom/thebigbarnacle_e.webp": eb,
                "/src/assets/icons/fabled/angel.webp": sb,
                "/src/assets/icons/fabled/buddhist.webp": tb,
                "/src/assets/icons/fabled/deusexfiasco.webp": ib,
                "/src/assets/icons/fabled/djinn.webp": ob,
                "/src/assets/icons/fabled/doomsayer.webp": nb,
                "/src/assets/icons/fabled/duchess.webp": ab,
                "/src/assets/icons/fabled/ferryman.webp": rb,
                "/src/assets/icons/fabled/fibbin.webp": lb,
                "/src/assets/icons/fabled/fiddler.webp": cb,
                "/src/assets/icons/fabled/hellslibrarian.webp": db,
                "/src/assets/icons/fabled/revolutionary.webp": ub,
                "/src/assets/icons/fabled/sentinel.webp": gb,
                "/src/assets/icons/fabled/spiritofivory.webp": mb,
                "/src/assets/icons/fabled/toymaker.webp": hb,
                "/src/assets/icons/loric/bigwig.webp": pb,
                "/src/assets/icons/loric/bootlegger.webp": Ab,
                "/src/assets/icons/loric/gardener.webp": bb,
                "/src/assets/icons/loric/stormcatcher.webp": fb,
                "/src/assets/icons/loric/tor.webp": vb,
                "/src/assets/icons/loric/zenomancer.webp": _b,
                "/src/assets/icons/snv/artist_e.webp": yb,
                "/src/assets/icons/snv/artist_g.webp": wb,
                "/src/assets/icons/snv/barber_e.webp": kb,
                "/src/assets/icons/snv/barber_g.webp": Cb,
                "/src/assets/icons/snv/barista.webp": Sb,
                "/src/assets/icons/snv/barista_e.webp": Pb,
                "/src/assets/icons/snv/barista_g.webp": Tb,
                "/src/assets/icons/snv/bonecollector.webp": Ib,
                "/src/assets/icons/snv/bonecollector_e.webp": Mb,
                "/src/assets/icons/snv/bonecollector_g.webp": Rb,
                "/src/assets/icons/snv/butcher.webp": Db,
                "/src/assets/icons/snv/butcher_e.webp": Eb,
                "/src/assets/icons/snv/butcher_g.webp": Nb,
                "/src/assets/icons/snv/cerenovus_e.webp": Bb,
                "/src/assets/icons/snv/cerenovus_g.webp": Vb,
                "/src/assets/icons/snv/clockmaker_e.webp": Ob,
                "/src/assets/icons/snv/clockmaker_g.webp": jb,
                "/src/assets/icons/snv/deviant.webp": Ub,
                "/src/assets/icons/snv/deviant_e.webp": Hb,
                "/src/assets/icons/snv/deviant_g.webp": qb,
                "/src/assets/icons/snv/dreamer_e.webp": Lb,
                "/src/assets/icons/snv/dreamer_g.webp": zb,
                "/src/assets/icons/snv/eviltwin_e.webp": Gb,
                "/src/assets/icons/snv/eviltwin_g.webp": Wb,
                "/src/assets/icons/snv/fanggu_e.webp": Fb,
                "/src/assets/icons/snv/fanggu_g.webp": Qb,
                "/src/assets/icons/snv/flowergirl_e.webp": Zb,
                "/src/assets/icons/snv/flowergirl_g.webp": Xb,
                "/src/assets/icons/snv/harlot.webp": Kb,
                "/src/assets/icons/snv/harlot_e.webp": Yb,
                "/src/assets/icons/snv/harlot_g.webp": Jb,
                "/src/assets/icons/snv/juggler_e.webp": $b,
                "/src/assets/icons/snv/juggler_g.webp": xb,
                "/src/assets/icons/snv/klutz_e.webp": ef,
                "/src/assets/icons/snv/klutz_g.webp": sf,
                "/src/assets/icons/snv/mathematician_e.webp": tf,
                "/src/assets/icons/snv/mathematician_g.webp": of,
                "/src/assets/icons/snv/mutant_e.webp": nf,
                "/src/assets/icons/snv/mutant_g.webp": af,
                "/src/assets/icons/snv/nodashii_e.webp": rf,
                "/src/assets/icons/snv/nodashii_g.webp": lf,
                "/src/assets/icons/snv/oracle_e.webp": cf,
                "/src/assets/icons/snv/oracle_g.webp": df,
                "/src/assets/icons/snv/philosopher_e.webp": uf,
                "/src/assets/icons/snv/philosopher_g.webp": gf,
                "/src/assets/icons/snv/pithag_e.webp": mf,
                "/src/assets/icons/snv/pithag_g.webp": hf,
                "/src/assets/icons/snv/sage_e.webp": pf,
                "/src/assets/icons/snv/sage_g.webp": Af,
                "/src/assets/icons/snv/savant_e.webp": bf,
                "/src/assets/icons/snv/savant_g.webp": ff,
                "/src/assets/icons/snv/seamstress_e.webp": vf,
                "/src/assets/icons/snv/seamstress_g.webp": _f,
                "/src/assets/icons/snv/snakecharmer_e.webp": yf,
                "/src/assets/icons/snv/snakecharmer_g.webp": wf,
                "/src/assets/icons/snv/sweetheart_e.webp": kf,
                "/src/assets/icons/snv/sweetheart_g.webp": Cf,
                "/src/assets/icons/snv/towncrier_e.webp": Sf,
                "/src/assets/icons/snv/towncrier_g.webp": Pf,
                "/src/assets/icons/snv/vigormortis_e.webp": Tf,
                "/src/assets/icons/snv/vigormortis_g.webp": If,
                "/src/assets/icons/snv/vortox_e.webp": Mf,
                "/src/assets/icons/snv/vortox_g.webp": Rf,
                "/src/assets/icons/snv/witch_e.webp": Df,
                "/src/assets/icons/snv/witch_g.webp": Ef,
                "/src/assets/icons/tb/baron_e.webp": Nf,
                "/src/assets/icons/tb/baron_g.webp": Bf,
                "/src/assets/icons/tb/beggar.webp": Vf,
                "/src/assets/icons/tb/beggar_e.webp": Of,
                "/src/assets/icons/tb/beggar_g.webp": jf,
                "/src/assets/icons/tb/bureaucrat.webp": Uf,
                "/src/assets/icons/tb/bureaucrat_e.webp": Hf,
                "/src/assets/icons/tb/bureaucrat_g.webp": qf,
                "/src/assets/icons/tb/butler_e.webp": Lf,
                "/src/assets/icons/tb/butler_g.webp": zf,
                "/src/assets/icons/tb/chef_e.webp": Gf,
                "/src/assets/icons/tb/chef_g.webp": Wf,
                "/src/assets/icons/tb/drunk_e.webp": Ff,
                "/src/assets/icons/tb/drunk_g.webp": Qf,
                "/src/assets/icons/tb/empath_e.webp": Zf,
                "/src/assets/icons/tb/empath_g.webp": Xf,
                "/src/assets/icons/tb/fortuneteller_e.webp": Kf,
                "/src/assets/icons/tb/fortuneteller_g.webp": Yf,
                "/src/assets/icons/tb/gunslinger.webp": Jf,
                "/src/assets/icons/tb/gunslinger_e.webp": $f,
                "/src/assets/icons/tb/gunslinger_g.webp": xf,
                "/src/assets/icons/tb/imp_e.webp": ev,
                "/src/assets/icons/tb/imp_g.webp": sv,
                "/src/assets/icons/tb/investigator_e.webp": tv,
                "/src/assets/icons/tb/investigator_g.webp": iv,
                "/src/assets/icons/tb/librarian_e.webp": ov,
                "/src/assets/icons/tb/librarian_g.webp": nv,
                "/src/assets/icons/tb/mayor_e.webp": av,
                "/src/assets/icons/tb/mayor_g.webp": rv,
                "/src/assets/icons/tb/monk_e.webp": lv,
                "/src/assets/icons/tb/monk_g.webp": cv,
                "/src/assets/icons/tb/poisoner_e.webp": dv,
                "/src/assets/icons/tb/poisoner_g.webp": uv,
                "/src/assets/icons/tb/ravenkeeper_e.webp": gv,
                "/src/assets/icons/tb/ravenkeeper_g.webp": mv,
                "/src/assets/icons/tb/recluse_e.webp": hv,
                "/src/assets/icons/tb/recluse_g.webp": pv,
                "/src/assets/icons/tb/saint_e.webp": Av,
                "/src/assets/icons/tb/saint_g.webp": bv,
                "/src/assets/icons/tb/scapegoat.webp": fv,
                "/src/assets/icons/tb/scapegoat_e.webp": vv,
                "/src/assets/icons/tb/scapegoat_g.webp": _v,
                "/src/assets/icons/tb/scarletwoman_e.webp": yv,
                "/src/assets/icons/tb/scarletwoman_g.webp": wv,
                "/src/assets/icons/tb/slayer_e.webp": kv,
                "/src/assets/icons/tb/slayer_g.webp": Cv,
                "/src/assets/icons/tb/soldier_e.webp": Sv,
                "/src/assets/icons/tb/soldier_g.webp": Pv,
                "/src/assets/icons/tb/spy_e.webp": Tv,
                "/src/assets/icons/tb/spy_g.webp": Iv,
                "/src/assets/icons/tb/thief.webp": Mv,
                "/src/assets/icons/tb/thief_e.webp": Rv,
                "/src/assets/icons/tb/thief_g.webp": Dv,
                "/src/assets/icons/tb/undertaker_e.webp": Ev,
                "/src/assets/icons/tb/undertaker_g.webp": Nv,
                "/src/assets/icons/tb/virgin_e.webp": Bv,
                "/src/assets/icons/tb/virgin_g.webp": Vv,
                "/src/assets/icons/tb/washerwoman_e.webp": Ov,
                "/src/assets/icons/tb/washerwoman_g.webp": jv
            })[`/src/assets/icons/${m}/${l.id}${h}.webp`],import.meta.url).href
        }
        ,
        isHomebrew({roles: e, edition: s}, t, {players: n}) {
            var i;
            return [...e.values(), ...n.npcs].some( ({isCustom: o}) => o) || ((i = s.bootlegger) == null ? void 0 : i.length)
        },
        isJinxed({roles: e}) {
            return [...e].some( ([,s]) => s.jinxes ? s.jinxes.some(t => e.has(t.id)) : !1)
        },
        filterAbilities: ({game: e, roles: s}, t) => ({isDead: n, role: i={}}={}, o="") => {
            const l = ({type: h, time: m, name: A}) => {
                const f = ["night", "firstNight", "otherNight"]
                  , T = ["day", "firstDay", "otherDay"];
                return h !== o || f.includes(m) && !t["game/isNight"] || T.includes(m) && t["game/isNight"] || m === "firstNight" && e.phase > 1 || m === "otherNight" && e.phase === 1 || m === "firstDay" && e.phase > 2 || m === "otherDay" && e.phase === 2 || m === "pregame" && e.isRunning && e.phase > 0 ? !1 : !!A
            }
              , c = (Array.isArray(i.special) ? i.special : []).filter(l).map(h => ({
                role: i,
                ability: h
            }));
            return s.forEach(h => {
                if (!Array.isArray(h.special))
                    return;
                const m = h.special.filter( ({global: A}) => i.team && A === i.team ? !0 : A === "dead" && n).filter(A => !c.some(f => f.ability === A)).filter(l).map(A => ({
                    role: h,
                    ability: A
                }));
                c.push(...m)
            }
            ),
            c
        }
        ,
        specialRoles: ({edition: e, nightOrder: s}) => {
            var t, n, i, o, l, g;
            return {
                dusk: {
                    id: "dusk",
                    name: "Dusk",
                    firstNight: (t = e.firstNight) != null && t.includes("dusk") ? e.firstNight.indexOf("dusk") + 1 : s.firstNight.indexOf("dusk") + 1,
                    otherNight: (n = e.otherNight) != null && n.includes("dusk") ? e.otherNight.indexOf("dusk") + 1 : s.otherNight.indexOf("dusk") + 1,
                    firstNightReminder: "Start the Night Phase.",
                    otherNightReminder: "Start the Night Phase."
                },
                dawn: {
                    id: "dawn",
                    name: "Dawn",
                    firstNight: (i = e.firstNight) != null && i.includes("dawn") ? e.firstNight.indexOf("dawn") + 1 : s.firstNight.indexOf("dawn") + 1,
                    otherNight: (o = e.otherNight) != null && o.includes("dawn") ? e.otherNight.indexOf("dawn") + 1 : s.otherNight.indexOf("dawn") + 1,
                    firstNightReminder: "Wait for a few seconds. End the Night Phase.",
                    otherNightReminder: "Wait for a few seconds. End the Night Phase."
                },
                minioninfo: {
                    id: "minioninfo",
                    name: "Minion Info",
                    firstNight: (l = e.firstNight) != null && l.includes("minioninfo") ? e.firstNight.indexOf("minioninfo") + 1 : s.firstNight.indexOf("minioninfo") + 1,
                    firstNightReminder: "If there are 7 or more players, wake all Minions: Show the *THIS IS THE DEMON* token. Point to the Demon. Show the *THESE ARE YOUR MINIONS* token. Point to the other Minions."
                },
                demoninfo: {
                    id: "demoninfo",
                    name: "Demon Info",
                    firstNight: (g = e.firstNight) != null && g.includes("demoninfo") ? e.firstNight.indexOf("demoninfo") + 1 : s.firstNight.indexOf("demoninfo") + 1,
                    firstNightReminder: "If there are 7 or more players, wake the Demon: Show the *THESE ARE YOUR MINIONS* token. Point to all Minions. Show the *THESE CHARACTERS ARE NOT IN PLAY* token. Show 3 not-in-play good character tokens."
                }
            }
        }
    },
    actions: {
        openDialogue({commit: e}, s) {
            return new Promise( (t, n) => {
                s.resolve = t,
                s.reject = n,
                e("toggleModal", {
                    name: "dialogue",
                    params: s
                })
            }
            )
        },
        showError({commit: e}, [s,t]) {
            e("toggleModal", {
                name: "dialogue",
                params: {
                    type: "alert",
                    title: s,
                    text: t
                }
            })
        },
        async loadEdition({state: e, commit: s}, t) {
            if (!t)
                return;
            const {edition: n={}, roles: i, theme: o, isInternal: l} = t;
            if (Array.isArray(i) && i.length && (s("setCustomRoles", i),
            i.some(g => !e.roles.has(g.id || g[0]) && !e.npcs.has(g.id || g[0])))) {
                const g = [];
                i.forEach(h => {
                    const m = h.id || h[0];
                    !e.roles.has(m) && !e.npcs.has(m) && g.push(m)
                }
                );
                const c = new Error("modals.dialogue.error.missing_roles");
                throw c.name = "modals.dialogue.error.missing_roles_title",
                c.params = [g.join(", ")],
                c
            }
            if (n.id)
                if (!n.isOfficial || e.editionsAvailable.has(n.id))
                    s("setEdition", {
                        edition: n,
                        theme: o,
                        isInternal: l
                    });
                else {
                    const g = new Error("modals.dialogue.error.missing_edition");
                    throw g.name = "modals.dialogue.error.missing_edition_title",
                    g
                }
            else
                o !== void 0 && o !== e.grimoire.theme && s("setTheme", {
                    theme: o,
                    isInternal: l
                });
            e.players.bluffs.some(g => !e.roles.has(g.id)) && s("players/setBluff", {
                bluff: e.players.bluffs.filter(g => e.roles.has(g.id)),
                isInternal: !0
            })
        },
        async loadWorldcup({commit: e, state: s}) {
            var t;
            if (!((t = s.worldcup.scripts) != null && t.length))
                try {
                    const i = await (await fetch("https://release.botc.app/wc25/data.json")).json()
                      , o = l => {
                        if (l.time + i.votePeriod > Date.now()) {
                            const g = Math.abs(l.time + i.votePeriod - Date.now()) / 1e3;
                            g > 3600 * 24 ? l.voteRemaining = Math.floor(g / (3600 * 24)) + " day" + (Math.floor(g / (3600 * 24)) > 1 ? "s" : "") : g > 3600 ? l.voteRemaining = Math.floor(g / 3600) + "h" : g > 60 ? l.voteRemaining = Math.floor(g / 60) + "min" : l.voteRemaining = Math.round(g) + "s"
                        }
                        return l
                    }
                    ;
                    e("setWorldcup", {
                        scripts: i.scripts.map( (l, g) => ({
                            ...l,
                            group: String.fromCharCode(65 + Math.floor(g / 4)),
                            points: i.matches.reduce( (c, h) => {
                                var m, A;
                                return h.scripts.includes(g) ? c + ((A = (m = h.results) == null ? void 0 : m[h.scripts.indexOf(g)]) != null ? A : 0) : c
                            }
                            , 0),
                            matches: i.matches.filter(c => {
                                var h;
                                return c.scripts.includes(g) && ((h = c.results) == null ? void 0 : h.length)
                            }
                            ).length
                        })),
                        channels: i.channels,
                        matches: i.matches.sort( (l, g) => l.time - g.time).map(o),
                        playoffs: i.playoffs.map(o),
                        votePeriod: i.votePeriod
                    })
                } catch {}
        }
    },
    mutations: {
        setGrimoireMode: he("mode", "grimoire"),
        setLoadingState: he("loadingState", "grimoire"),
        setPlayerDragState: he("playerDragState", "grimoire"),
        setPlayerSelectCallback: he("playerSelectCallback", "grimoire"),
        setRightSideTabState: he("rightSideTabState", "grimoire"),
        setPositions: he("positions"),
        setKeybindings: he("keybindings"),
        setRolesSelected: he("rolesSelected"),
        setWorldcup: he("worldcup"),
        setWorldcupVotes: he("worldcupVotes"),
        setWorldcupVote(e, {match: s, choice: t}) {
            t == null ? e.worldcupVotes.delete(s) : e.worldcupVotes.set(s, t)
        },
        toggleTownSquare({grimoire: e}, s) {
            s === !0 || s === !1 ? e.isTownSquare = s : e.isTownSquare = !e.isTownSquare
        },
        toggleSavedReminder({grimoire: e}, s) {
            if (Array.isArray(s))
                e.savedReminders = s;
            else {
                const t = e.savedReminders.indexOf(s);
                t > -1 ? e.savedReminders.splice(t, 1) : e.savedReminders.push(s)
            }
        },
        toggleModal(e, {name: s="", params: t={}}={}) {
            if (e.modal.params.isImportant && s) {
                typeof (t == null ? void 0 : t.reject) == "function" && t.reject(!1);
                return
            }
            e.modal.params.reject && e.modal.params.reject(!1),
            e.modal.params = t,
            t.tab !== void 0 && (e.grimoire.tabs["modal-" + s] = t.tab),
            e.modal.name = e.modal.name === s && s !== "dialogue" ? "" : s
        },
        setPosition({positions: e}, {name: s, value: t}) {
            e[s] = t
        },
        setTab: ({grimoire: e}, {tab: s, value: t}) => {
            s && (e.tabs[s] = t != null ? t : !1)
        }
        ,
        setSeatName: ({grimoire: e}, {seat: s, name: t, seats: n}) => {
            n ? e.seats = n : t ? e.seats[s] = t : delete e.seats[s]
        }
        ,
        setMenuOpen: ({grimoire: e}, s) => {
            !s || s === e.menuOpen ? e.menuOpen = "" : e.menuOpen = s
        }
        ,
        setEditionsAvailable: (e, s) => {
            e.editionsAvailable = new Map(s.map(t => [t.id, t]))
        }
        ,
        setRolesAvailable: (e, s) => {
            e.rolesAvailable = new Map(s.map(t => (e.nightOrder.firstNight.includes(t.id) && t.firstNightReminder ? t.firstNight = e.nightOrder.firstNight.indexOf(t.id) + 1 : t.firstNight = 0,
            e.nightOrder.otherNight.includes(t.id) && t.otherNightReminder ? t.otherNight = e.nightOrder.otherNight.indexOf(t.id) + 1 : t.otherNight = 0,
            [t.id, t])))
        }
        ,
        setNightOrder: (e, {firstNight: s=[], otherNight: t=[]}={}) => {
            e.nightOrder = {
                firstNight: s,
                otherNight: t
            },
            e.rolesAvailable.forEach( (n, i) => {
                e.nightOrder.firstNight.includes(i) && n.firstNightReminder ? n.firstNight = e.nightOrder.firstNight.indexOf(i) + 1 : n.firstNight = 0,
                e.nightOrder.otherNight.includes(i) && n.otherNightReminder ? n.otherNight = e.nightOrder.otherNight.indexOf(i) + 1 : n.otherNight = 0,
                e.rolesAvailable.set(i, n)
            }
            )
        }
        ,
        setNPCs: (e, s) => {
            e.npcs = new Map(s.map(t => [t.id, t]))
        }
        ,
        playSound: ({grimoire: e}, s) => {
            e.sounds.push({
                name: s,
                timestamp: Date.now()
            })
        }
        ,
        removeSound: ({grimoire: e}, {timestamp: s, name: t}) => {
            e.sounds = e.sounds.filter(n => n.timestamp !== s && n.name !== t)
        }
        ,
        setCustomRoles(e, s) {
            const t = e.definitions.NPC_TEAMS
              , n = [...e.definitions.PLAYER_TEAMS, ...e.definitions.NPC_TEAMS]
              , i = e.npcs.has("bootlegger")
              , o = s.map(l => (l.id = tl(l.id),
            l)).map(l => e.rolesAvailable.get(l.id) || (i ? Object.assign({}, Ze, l, {
                isCustom: !0
            }) : {})).map(l => (e.rolesAvailable.get(l.id) || (l.imageAlt = il[l.team] || "custom",
            l.firstNight = Math.abs(l.firstNight),
            l.otherNight = Math.abs(l.otherNight),
            l.jinxes && l.jinxes.length && l.jinxes.forEach(g => {
                g.id = tl(g.id)
            }
            ),
            l.special && !Array.isArray(l.special) && delete l.special),
            l)).filter(l => l.name && l.ability && l.team).sort( (l, g) => n.indexOf(l.team) - n.indexOf(g.team));
            o.filter(l => !t.includes(l.team)).length && (e.roles = new Map(o.map(l => [l.id, l])),
            e.npcs = new Map([...o.filter(l => t.includes(l.team)).map(l => [l.id, l]), ...[...e.npcs].filter( ([,l]) => !l.isCustom)]),
            e.rolesSelected = [])
        },
        toggleRole(e, {id: s, add: t}={}) {
            if (s) {
                const n = e.rolesSelected.indexOf(s);
                n > -1 && !t ? (e.rolesSelected.splice(n, 1),
                s === "atheist" && !e.rolesSelected.includes(s) && (e.rolesSelected = e.rolesSelected.filter( (i, o) => {
                    var l, g;
                    return o === e.rolesSelected.indexOf(i) || ((g = (l = e.rolesAvailable.get(i)) == null ? void 0 : l.special) == null ? void 0 : g.some(c => c.type === "selection" && c.name === "bag-duplicate"))
                }
                ))) : e.rolesSelected.push(s)
            } else
                e.rolesSelected = []
        },
        setEdition(e, {edition: s, theme: t=0}) {
            if (!s)
                return;
            if (e.editionsAvailable.has(s.id) && s.isOfficial !== !1) {
                const {id: i} = s;
                e.edition = e.editionsAvailable.get(i);
                const o = ["townsfolk", "outsider", "minion", "demon", "traveller"];
                e.roles = new Map([...e.rolesAvailable].filter( ([,l]) => l.edition === i).sort( (l, g) => {
                    var c, h, m, A;
                    return ((h = (c = e.edition.roles) == null ? void 0 : c.indexOf(l[1].id)) != null ? h : o.indexOf(l[1].team)) - ((A = (m = e.edition.roles) == null ? void 0 : m.indexOf(g[1].id)) != null ? A : o.indexOf(g[1].team))
                }
                )),
                e.npcs = new Map([...e.npcs].filter( ([,l]) => !l.isCustom)),
                e.rolesSelected = []
            } else
                s.isOfficial || (e.edition = s);
            const n = ([i,o]) => {
                var l, g, c, h;
                return [i, Object.assign({}, o, {
                    firstNight: o.firstNightReminder && ((l = e.edition.firstNight) != null && l.includes(i)) ? e.edition.firstNight.indexOf(i) + 1 : o.firstNightReminder && e.nightOrder.firstNight.includes(i) ? e.nightOrder.firstNight.indexOf(i) + 1 : (g = o.firstNight) != null ? g : 0,
                    otherNight: o.otherNightReminder && ((c = e.edition.otherNight) != null && c.includes(i)) ? e.edition.otherNight.indexOf(i) + 1 : o.otherNightReminder && e.nightOrder.otherNight.includes(i) ? e.nightOrder.otherNight.indexOf(i) + 1 : (h = o.otherNight) != null ? h : 0
                })]
            }
            ;
            e.roles = new Map([...e.roles].map(n)),
            e.npcs = new Map([...e.npcs].map(n)),
            e.grimoire.theme = t
        },
        setTheme(e, {theme: s}) {
            e.grimoire.theme = s
        }
    },
    plugins: [Q6, gE, vI, F6]
})
  , YE = ["AddressCard", "ArrowCircleDown", "ArrowCircleLeft", "ArrowCircleRight", "ArrowCircleUp", "ArrowsAlt", "ArrowsToDot", "Book", "BookDead", "Bug", "Bullhorn", "Chair", "CheckCircle", "Circle", "Clipboard", "Cloud", "CloudMoon", "Cog", "CommentDots", "Comments", "Copy", "Crown", "Dice", "DiceOne", "DiceTwo", "DiceThree", "DiceFour", "DiceFive", "Download", "EarDeaf", "Envelope", "ExchangeAlt", "ExclamationTriangle", "Eye", "EyeSlash", "FaceFrown", "FaceSmile", "FileCode", "FilePdf", "FileUpload", "Gavel", "Hand", "HandFist", "HandLizard", "HandMiddleFinger", "HandPeace", "HandPointRight", "HandSpock", "Headphones", "Heartbeat", "HourglassHalf", "Image", "InfoCircle", "Keyboard", "Language", "Link", "LinkSlash", "Lock", "LockOpen", "MagnifyingGlassMinus", "MagnifyingGlassPlus", "Microphone", "MicrophoneSlash", "MinusCircle", "PauseCircle", "PaperPlane", "PenToSquare", "PeopleArrows", "PlayCircle", "PlusCircle", "Random", "RedoAlt", "RotateLeft", "RotateRight", "SearchMinus", "SearchPlus", "Seedling", "Signal", "SignOutAlt", "Skull", "SlidersH", "Splotch", "Square", "Star", "Stopwatch", "Sun", "TheaterMasks", "ThumbsUp", "ThumbsDown", "Thumbtack", "Times", "TimesCircle", "TrashAlt", "Undo", "User", "UserEdit", "UserPlus", "UserSlash", "UserFriends", "UserXmark", "Users", "VenusMars", "Video", "VideoSlash", "VolumeUp", "VolumeMute", "WindowRestore", "YinYang", "Wifi"];
xd.add(...YE.map(e => eu["fa" + e]));
const JE = async () => {
    const e = su(gm)
      , s = await Su();
    {
        const t = () => {
            var n, i;
            return document.documentElement.lang !== ((n = s.global) == null ? void 0 : n.locale.value) || ((i = document.getElementsByTagName("title")[0]) == null ? void 0 : i.hasAttribute("_msttexthash")) || document.querySelectorAll("[papago-translate]").length
        }
        ;
        tu({
            app: e,
            dsn: "https://a690916c14ce77b29bb0c6d77a26dd29@o4509212719251456.ingest.de.sentry.io/4509212720496720",
            release: "botc-app@" + le.version,
            environment: "production",
            sendDefaultPii: !0,
            ignoreErrors: ["TurnstileError"],
            integrations: [iu({
                maskAllText: !1,
                unblock: ["img", "svg", "object", "picture"],
                beforeErrorSampling: () => !t()
            })],
            replaysSessionSampleRate: .01,
            replaysOnErrorSampleRate: 1,
            beforeSend: n => t() ? null : (n.tags || (n.tags = {}),
            n.tags.app = window.__TAURI__ ? "standalone" : "browser",
            we.state.session.sessionId && (n.tags.session = we.state.session.sessionId),
            n.context || (n.context = {}),
            n.contexts.session = Object.assign({}, we.state.session),
            delete n.contexts.session.code,
            delete n.contexts.session.meta,
            delete n.contexts.session.raisedHands,
            n.contexts.user = Object.assign({}, we.state.user),
            delete n.contexts.user.levels,
            delete n.contexts.user.downloadUrl,
            n)
        })
    }
    e.use(we).use(F).use(s).component("font-awesome-icon", Y).mount("#main")
}
;
JE();
//# sourceMappingURL=index-BmaliijN.js.map
